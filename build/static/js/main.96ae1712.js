/*! For license information please see main.96ae1712.js.LICENSE.txt */
(()=>{var e={5252:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler");Symbol.for("react.provider");var a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case d:case u:return e;default:switch(e=e&&e.$$typeof){case c:case l:case p:case h:case a:return e;default:return t}}case r:return t}}}t.iY=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===s||e===o||e===d||e===u||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===c||e.$$typeof===a||e.$$typeof===l||e.$$typeof===m||void 0!==e.getModuleId)}},3322:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i=function(e){try{return!!e()}catch(e){return!0}},o=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),s=o,a=Function.prototype,c=a.call,l=s&&a.bind.bind(c,c),d=s?l:function(e){return function(){return c.apply(e,arguments)}},u=d({}.isPrototypeOf),h=function(e){return e&&e.Math===Math&&e},p=h("object"==typeof globalThis&&globalThis)||h("object"==typeof window&&window)||h("object"==typeof self&&self)||h("object"==typeof t&&t)||h("object"==typeof t&&t)||function(){return this}()||Function("return this")(),f=o,m=Function.prototype,g=m.apply,v=m.call,y="object"==typeof Reflect&&Reflect.apply||(f?v.bind(g):function(){return v.apply(g,arguments)}),_=d,E=_({}.toString),b=_("".slice),w=function(e){return b(E(e),8,-1)},S=w,A=d,C=function(e){if("Function"===S(e))return A(e)},T="object"==typeof document&&document.all,R=void 0===T&&void 0!==T?function(e){return"function"==typeof e||e===T}:function(e){return"function"==typeof e},I={},x=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),O=o,N=Function.prototype.call,D=O?N.bind(N):function(){return N.apply(N,arguments)},k={},P={}.propertyIsEnumerable,L=Object.getOwnPropertyDescriptor,M=L&&!P.call({1:2},1);k.f=M?function(e){var t=L(this,e);return!!t&&t.enumerable}:P;var j,U,B=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},F=i,V=w,W=Object,H=d("".split),z=F((function(){return!W("z").propertyIsEnumerable(0)}))?function(e){return"String"===V(e)?H(e,""):W(e)}:W,G=function(e){return null==e},Y=G,K=TypeError,q=function(e){if(Y(e))throw new K("Can't call method on "+e);return e},X=z,J=q,Q=function(e){return X(J(e))},Z=R,$=function(e){return"object"==typeof e?null!==e:Z(e)},ee={},te=ee,ne=p,re=R,ie=function(e){return re(e)?e:void 0},oe=function(e,t){return arguments.length<2?ie(te[e])||ie(ne[e]):te[e]&&te[e][t]||ne[e]&&ne[e][t]},se=p.navigator,ae=se&&se.userAgent,ce=ae?String(ae):"",le=p,de=ce,ue=le.process,he=le.Deno,pe=ue&&ue.versions||he&&he.version,fe=pe&&pe.v8;fe&&(U=(j=fe.split("."))[0]>0&&j[0]<4?1:+(j[0]+j[1])),!U&&de&&(!(j=de.match(/Edge\/(\d+)/))||j[1]>=74)&&(j=de.match(/Chrome\/(\d+)/))&&(U=+j[1]);var me=U,ge=me,ve=i,ye=p.String,_e=!!Object.getOwnPropertySymbols&&!ve((function(){var e=Symbol("symbol detection");return!ye(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ge&&ge<41})),Ee=_e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,be=oe,we=R,Se=u,Ae=Object,Ce=Ee?function(e){return"symbol"==typeof e}:function(e){var t=be("Symbol");return we(t)&&Se(t.prototype,Ae(e))},Te=String,Re=function(e){try{return Te(e)}catch(e){return"Object"}},Ie=R,xe=Re,Oe=TypeError,Ne=function(e){if(Ie(e))return e;throw new Oe(xe(e)+" is not a function")},De=Ne,ke=G,Pe=function(e,t){var n=e[t];return ke(n)?void 0:De(n)},Le=D,Me=R,je=$,Ue=TypeError,Be={exports:{}},Fe=!0,Ve=p,We=Object.defineProperty,He=p,ze=function(e,t){try{We(Ve,e,{value:t,configurable:!0,writable:!0})}catch(r){Ve[e]=t}return t},Ge="__core-js_shared__",Ye=Be.exports=He[Ge]||ze(Ge,{});(Ye.versions||(Ye.versions=[])).push({version:"3.39.0",mode:"pure",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Ke=Be.exports,qe=Ke,Xe=function(e,t){return qe[e]||(qe[e]=t||{})},Je=q,Qe=Object,Ze=function(e){return Qe(Je(e))},$e=Ze,et=d({}.hasOwnProperty),tt=Object.hasOwn||function(e,t){return et($e(e),t)},nt=d,rt=0,it=Math.random(),ot=nt(1..toString),st=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ot(++rt+it,36)},at=Xe,ct=tt,lt=st,dt=_e,ut=Ee,ht=p.Symbol,pt=at("wks"),ft=ut?ht.for||ht:ht&&ht.withoutSetter||lt,mt=function(e){return ct(pt,e)||(pt[e]=dt&&ct(ht,e)?ht[e]:ft("Symbol."+e)),pt[e]},gt=D,vt=$,yt=Ce,_t=Pe,Et=function(e,t){var n,r;if("string"===t&&Me(n=e.toString)&&!je(r=Le(n,e)))return r;if(Me(n=e.valueOf)&&!je(r=Le(n,e)))return r;if("string"!==t&&Me(n=e.toString)&&!je(r=Le(n,e)))return r;throw new Ue("Can't convert object to primitive value")},bt=TypeError,wt=mt("toPrimitive"),St=function(e,t){if(!vt(e)||yt(e))return e;var n,r=_t(e,wt);if(r){if(void 0===t&&(t="default"),n=gt(r,e,t),!vt(n)||yt(n))return n;throw new bt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Et(e,t)},At=Ce,Ct=function(e){var t=St(e,"string");return At(t)?t:t+""},Tt=$,Rt=p.document,It=Tt(Rt)&&Tt(Rt.createElement),xt=function(e){return It?Rt.createElement(e):{}},Ot=xt,Nt=!x&&!i((function(){return 7!==Object.defineProperty(Ot("div"),"a",{get:function(){return 7}}).a})),Dt=x,kt=D,Pt=k,Lt=B,Mt=Q,jt=Ct,Ut=tt,Bt=Nt,Ft=Object.getOwnPropertyDescriptor;I.f=Dt?Ft:function(e,t){if(e=Mt(e),t=jt(t),Bt)try{return Ft(e,t)}catch(e){}if(Ut(e,t))return Lt(!kt(Pt.f,e,t),e[t])};var Vt=i,Wt=R,Ht=/#|\.prototype\./,zt=function(e,t){var n=Yt[Gt(e)];return n===qt||n!==Kt&&(Wt(t)?Vt(t):!!t)},Gt=zt.normalize=function(e){return String(e).replace(Ht,".").toLowerCase()},Yt=zt.data={},Kt=zt.NATIVE="N",qt=zt.POLYFILL="P",Xt=zt,Jt=Ne,Qt=o,Zt=C(C.bind),$t=function(e,t){return Jt(e),void 0===t?e:Qt?Zt(e,t):function(){return e.apply(t,arguments)}},en={},tn=x&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),nn=$,rn=String,on=TypeError,sn=function(e){if(nn(e))return e;throw new on(rn(e)+" is not an object")},an=x,cn=Nt,ln=tn,dn=sn,un=Ct,hn=TypeError,pn=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,mn="enumerable",gn="configurable",vn="writable";en.f=an?ln?function(e,t,n){if(dn(e),t=un(t),dn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&vn in n&&!n[vn]){var r=fn(e,t);r&&r[vn]&&(e[t]=n.value,n={configurable:gn in n?n[gn]:r[gn],enumerable:mn in n?n[mn]:r[mn],writable:!1})}return pn(e,t,n)}:pn:function(e,t,n){if(dn(e),t=un(t),dn(n),cn)try{return pn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new hn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var yn=en,_n=B,En=x?function(e,t,n){return yn.f(e,t,_n(1,n))}:function(e,t,n){return e[t]=n,e},bn=p,wn=y,Sn=C,An=R,Cn=I.f,Tn=Xt,Rn=ee,In=$t,xn=En,On=tt,Nn=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return wn(e,this,arguments)};return t.prototype=e.prototype,t},Dn=function(e,t){var n,r,i,o,s,a,c,l,d,u=e.target,h=e.global,p=e.stat,f=e.proto,m=h?bn:p?bn[u]:bn[u]&&bn[u].prototype,g=h?Rn:Rn[u]||xn(Rn,u,{})[u],v=g.prototype;for(o in t)r=!(n=Tn(h?o:u+(p?".":"#")+o,e.forced))&&m&&On(m,o),a=g[o],r&&(c=e.dontCallGetSet?(d=Cn(m,o))&&d.value:m[o]),s=r&&c?c:t[o],(n||f||typeof a!=typeof s)&&(l=e.bind&&r?In(s,bn):e.wrap&&r?Nn(s):f&&An(s)?Sn(s):s,(e.sham||s&&s.sham||a&&a.sham)&&xn(l,"sham",!0),xn(g,o,l),f&&(On(Rn,i=u+"Prototype")||xn(Rn,i,{}),xn(Rn[i],o,s),e.real&&v&&(n||!v[o])&&xn(v,o,s)))},kn=Math.ceil,Pn=Math.floor,Ln=Math.trunc||function(e){var t=+e;return(t>0?Pn:kn)(t)},Mn=Ln,jn=function(e){var t=+e;return t!=t||0===t?0:Mn(t)},Un=jn,Bn=Math.max,Fn=Math.min,Vn=function(e,t){var n=Un(e);return n<0?Bn(n+t,0):Fn(n,t)},Wn=jn,Hn=Math.min,zn=function(e){var t=Wn(e);return t>0?Hn(t,9007199254740991):0},Gn=zn,Yn=function(e){return Gn(e.length)},Kn=Q,qn=Vn,Xn=Yn,Jn=function(e){return function(t,n,r){var i=Kn(t),o=Xn(i);if(0===o)return!e&&-1;var s,a=qn(r,o);if(e&&n!=n){for(;o>a;)if((s=i[a++])!=s)return!0}else for(;o>a;a++)if((e||a in i)&&i[a]===n)return e||a||0;return!e&&-1}},Qn={includes:Jn(!0),indexOf:Jn(!1)},Zn=Qn.includes;Dn({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return Zn(this,e,arguments.length>1?arguments[1]:void 0)}});var $n=p,er=ee,tr=function(e,t){var n=er[e+"Prototype"],r=n&&n[t];if(r)return r;var i=$n[e],o=i&&i.prototype;return o&&o[t]},nr=tr("Array","includes"),rr=$,ir=w,or=mt("match"),sr=function(e){var t;return rr(e)&&(void 0!==(t=e[or])?!!t:"RegExp"===ir(e))},ar=sr,cr=TypeError,lr={};lr[mt("toStringTag")]="z";var dr="[object z]"===String(lr),ur=dr,hr=R,pr=w,fr=mt("toStringTag"),mr=Object,gr="Arguments"===pr(function(){return arguments}()),vr=ur?pr:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=mr(e),fr))?n:gr?pr(t):"Object"===(r=pr(t))&&hr(t.callee)?"Arguments":r},yr=vr,_r=String,Er=function(e){if("Symbol"===yr(e))throw new TypeError("Cannot convert a Symbol value to a string");return _r(e)},br=mt("match"),wr=Dn,Sr=function(e){if(ar(e))throw new cr("The method doesn't accept regular expressions");return e},Ar=q,Cr=Er,Tr=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[br]=!1,"/./"[e](t)}catch(e){}}return!1},Rr=d("".indexOf);wr({target:"String",proto:!0,forced:!Tr("includes")},{includes:function(e){return!!~Rr(Cr(Ar(this)),Cr(Sr(e)),arguments.length>1?arguments[1]:void 0)}});var Ir=tr("String","includes"),xr=u,Or=nr,Nr=Ir,Dr=Array.prototype,kr=String.prototype,Pr=function(e){var t=e.includes;return e===Dr||xr(Dr,e)&&t===Dr.includes?Or:"string"==typeof e||e===kr||xr(kr,e)&&t===kr.includes?Nr:t},Lr=r(Pr),Mr=Ne,jr=Ze,Ur=z,Br=Yn,Fr=TypeError,Vr="Reduce of empty array with no initial value",Wr=function(e){return function(t,n,r,i){var o=jr(t),s=Ur(o),a=Br(o);if(Mr(n),0===a&&r<2)throw new Fr(Vr);var c=e?a-1:0,l=e?-1:1;if(r<2)for(;;){if(c in s){i=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw new Fr(Vr)}for(;e?c>=0:a>c;c+=l)c in s&&(i=n(i,s[c],c,o));return i}},Hr={left:Wr(!1),right:Wr(!0)},zr=i,Gr=function(e,t){var n=[][e];return!!n&&zr((function(){n.call(null,t||function(){return 1},1)}))},Yr=p,Kr=ce,qr=w,Xr=function(e){return Kr.slice(0,e.length)===e},Jr=Xr("Bun/")?"BUN":Xr("Cloudflare-Workers")?"CLOUDFLARE":Xr("Deno/")?"DENO":Xr("Node.js/")?"NODE":Yr.Bun&&"string"==typeof Bun.version?"BUN":Yr.Deno&&"object"==typeof Deno.version?"DENO":"process"===qr(Yr.process)?"NODE":Yr.window&&Yr.document?"BROWSER":"REST",Qr="NODE"===Jr,Zr=Hr.left;Dn({target:"Array",proto:!0,forced:!Qr&&me>79&&me<83||!Gr("reduce")},{reduce:function(e){var t=arguments.length;return Zr(this,e,t,t>1?arguments[1]:void 0)}});var $r=tr("Array","reduce"),ei=u,ti=$r,ni=Array.prototype,ri=function(e){var t=e.reduce;return e===ni||ei(ni,e)&&t===ni.reduce?ti:t},ii=ri,oi=r(ii),si=w,ai=Array.isArray||function(e){return"Array"===si(e)},ci=Dn,li=ai,di=d([].reverse),ui=[1,2];ci({target:"Array",proto:!0,forced:String(ui)===String(ui.reverse())},{reverse:function(){return li(this)&&(this.length=this.length),di(this)}});var hi=tr("Array","reverse"),pi=u,fi=hi,mi=Array.prototype,gi=function(e){var t=e.reverse;return e===mi||pi(mi,e)&&t===mi.reverse?fi:t},vi=gi,yi=r(vi),_i=st,Ei=Xe("keys"),bi=function(e){return Ei[e]||(Ei[e]=_i(e))},wi=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Si=tt,Ai=R,Ci=Ze,Ti=wi,Ri=bi("IE_PROTO"),Ii=Object,xi=Ii.prototype,Oi=Ti?Ii.getPrototypeOf:function(e){var t=Ci(e);if(Si(t,Ri))return t[Ri];var n=t.constructor;return Ai(n)&&t instanceof n?n.prototype:t instanceof Ii?xi:null},Ni=d,Di=Ne,ki=$,Pi=function(e){return ki(e)||null===e},Li=String,Mi=TypeError,ji=function(e,t,n){try{return Ni(Di(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Ui=$,Bi=q,Fi=function(e){if(Pi(e))return e;throw new Mi("Can't set "+Li(e)+" as a prototype")},Vi=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=ji(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Bi(n),Fi(r),Ui(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0),Wi={},Hi={},zi=tt,Gi=Q,Yi=Qn.indexOf,Ki=Hi,qi=d([].push),Xi=function(e,t){var n,r=Gi(e),i=0,o=[];for(n in r)!zi(Ki,n)&&zi(r,n)&&qi(o,n);for(;t.length>i;)zi(r,n=t[i++])&&(~Yi(o,n)||qi(o,n));return o},Ji=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qi=Xi,Zi=Ji.concat("length","prototype");Wi.f=Object.getOwnPropertyNames||function(e){return Qi(e,Zi)};var $i={};$i.f=Object.getOwnPropertySymbols;var eo=oe,to=Wi,no=$i,ro=sn,io=d([].concat),oo=eo("Reflect","ownKeys")||function(e){var t=to.f(ro(e)),n=no.f;return n?io(t,n(e)):t},so=tt,ao=oo,co=I,lo=en,uo={},ho=Xi,po=Ji,fo=Object.keys||function(e){return ho(e,po)},mo=x,go=tn,vo=en,yo=sn,_o=Q,Eo=fo;uo.f=mo&&!go?Object.defineProperties:function(e,t){yo(e);for(var n,r=_o(t),i=Eo(t),o=i.length,s=0;o>s;)vo.f(e,n=i[s++],r[n]);return e};var bo,wo=oe("document","documentElement"),So=sn,Ao=uo,Co=Ji,To=Hi,Ro=wo,Io=xt,xo="prototype",Oo="script",No=bi("IE_PROTO"),Do=function(){},ko=function(e){return"<"+Oo+">"+e+"</"+Oo+">"},Po=function(e){e.write(ko("")),e.close();var t=e.parentWindow.Object;return e=null,t},Lo=function(){try{bo=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;Lo="undefined"!=typeof document?document.domain&&bo?Po(bo):(t=Io("iframe"),n="java"+Oo+":",t.style.display="none",Ro.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(ko("document.F=Object")),e.close(),e.F):Po(bo);for(var r=Co.length;r--;)delete Lo[xo][Co[r]];return Lo()};To[No]=!0;var Mo=Object.create||function(e,t){var n;return null!==e?(Do[xo]=So(e),n=new Do,Do[xo]=null,n[No]=e):n=Lo(),void 0===t?n:Ao.f(n,t)},jo=$,Uo=En,Bo=Error,Fo=d("".replace),Vo=String(new Bo("zxcasd").stack),Wo=/\n\s*at [^:]*:[^\n]*/,Ho=Wo.test(Vo),zo=B,Go=!i((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",zo(1,7)),7!==e.stack)})),Yo=En,Ko=function(e,t){if(Ho&&"string"==typeof e&&!Bo.prepareStackTrace)for(;t--;)e=Fo(e,Wo,"");return e},qo=Go,Xo=Error.captureStackTrace,Jo={},Qo=Jo,Zo=mt("iterator"),$o=Array.prototype,es=function(e){return void 0!==e&&(Qo.Array===e||$o[Zo]===e)},ts=vr,ns=Pe,rs=G,is=Jo,os=mt("iterator"),ss=function(e){if(!rs(e))return ns(e,os)||ns(e,"@@iterator")||is[ts(e)]},as=D,cs=Ne,ls=sn,ds=Re,us=ss,hs=TypeError,ps=function(e,t){var n=arguments.length<2?us(e):t;if(cs(n))return ls(as(n,e));throw new hs(ds(e)+" is not iterable")},fs=D,ms=sn,gs=Pe,vs=function(e,t,n){var r,i;ms(e);try{if(!(r=gs(e,"return"))){if("throw"===t)throw n;return n}r=fs(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return ms(r),n},ys=$t,_s=D,Es=sn,bs=Re,ws=es,Ss=Yn,As=u,Cs=ps,Ts=ss,Rs=vs,Is=TypeError,xs=function(e,t){this.stopped=e,this.result=t},Os=xs.prototype,Ns=function(e,t,n){var r,i,o,s,a,c,l,d=n&&n.that,u=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=ys(t,d),g=function(e){return r&&Rs(r,"normal",e),new xs(!0,e)},v=function(e){return u?(Es(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(h)r=e.iterator;else if(p)r=e;else{if(!(i=Ts(e)))throw new Is(bs(e)+" is not iterable");if(ws(i)){for(o=0,s=Ss(e);s>o;o++)if((a=v(e[o]))&&As(Os,a))return a;return new xs(!1)}r=Cs(e,i)}for(c=h?e.next:r.next;!(l=_s(c,r)).done;){try{a=v(l.value)}catch(e){Rs(r,"throw",e)}if("object"==typeof a&&a&&As(Os,a))return a}return new xs(!1)},Ds=Er,ks=Dn,Ps=u,Ls=Oi,Ms=Vi,js=function(e,t,n){for(var r=ao(t),i=lo.f,o=co.f,s=0;s<r.length;s++){var a=r[s];so(e,a)||n&&so(n,a)||i(e,a,o(t,a))}},Us=Mo,Bs=En,Fs=B,Vs=function(e,t){jo(t)&&"cause"in t&&Uo(e,"cause",t.cause)},Ws=function(e,t,n,r){qo&&(Xo?Xo(e,t):Yo(e,"stack",Ko(n,r)))},Hs=Ns,zs=function(e,t){return void 0===e?arguments.length<2?"":t:Ds(e)},Gs=mt("toStringTag"),Ys=Error,Ks=[].push,qs=function(e,t){var n,r=Ps(Xs,this);Ms?n=Ms(new Ys,r?Ls(this):Xs):(n=r?this:Us(Xs),Bs(n,Gs,"Error")),void 0!==t&&Bs(n,"message",zs(t)),Ws(n,qs,n.stack,1),arguments.length>2&&Vs(n,arguments[2]);var i=[];return Hs(e,Ks,{that:i}),Bs(n,"errors",i),n};Ms?Ms(qs,Ys):js(qs,Ys,{name:!0});var Xs=qs.prototype=Us(Ys.prototype,{constructor:Fs(1,qs),message:Fs(1,""),name:Fs(1,"AggregateError")});ks({global:!0,constructor:!0,arity:2},{AggregateError:qs});var Js,Qs,Zs,$s=R,ea=p.WeakMap,ta=$s(ea)&&/native code/.test(String(ea)),na=p,ra=$,ia=En,oa=tt,sa=Ke,aa=bi,ca=Hi,la="Object already initialized",da=na.TypeError,ua=na.WeakMap;if(ta||sa.state){var ha=sa.state||(sa.state=new ua);ha.get=ha.get,ha.has=ha.has,ha.set=ha.set,Js=function(e,t){if(ha.has(e))throw new da(la);return t.facade=e,ha.set(e,t),t},Qs=function(e){return ha.get(e)||{}},Zs=function(e){return ha.has(e)}}else{var pa=aa("state");ca[pa]=!0,Js=function(e,t){if(oa(e,pa))throw new da(la);return t.facade=e,ia(e,pa,t),t},Qs=function(e){return oa(e,pa)?e[pa]:{}},Zs=function(e){return oa(e,pa)}}var fa,ma,ga,va={set:Js,get:Qs,has:Zs,enforce:function(e){return Zs(e)?Qs(e):Js(e,{})},getterFor:function(e){return function(t){var n;if(!ra(t)||(n=Qs(t)).type!==e)throw new da("Incompatible receiver, "+e+" required");return n}}},ya=x,_a=tt,Ea=Function.prototype,ba=ya&&Object.getOwnPropertyDescriptor,wa=_a(Ea,"name"),Sa={EXISTS:wa,PROPER:wa&&"something"===function(){}.name,CONFIGURABLE:wa&&(!ya||ya&&ba(Ea,"name").configurable)},Aa=En,Ca=function(e,t,n,r){return r&&r.enumerable?e[t]=n:Aa(e,t,n),e},Ta=i,Ra=R,Ia=$,xa=Mo,Oa=Oi,Na=Ca,Da=mt("iterator"),ka=!1;[].keys&&("next"in(ga=[].keys())?(ma=Oa(Oa(ga)))!==Object.prototype&&(fa=ma):ka=!0);var Pa=!Ia(fa)||Ta((function(){var e={};return fa[Da].call(e)!==e}));Ra((fa=Pa?{}:xa(fa))[Da])||Na(fa,Da,(function(){return this}));var La={IteratorPrototype:fa,BUGGY_SAFARI_ITERATORS:ka},Ma=vr,ja=dr?{}.toString:function(){return"[object "+Ma(this)+"]"},Ua=dr,Ba=en.f,Fa=En,Va=tt,Wa=ja,Ha=mt("toStringTag"),za=function(e,t,n,r){var i=n?e:e&&e.prototype;i&&(Va(i,Ha)||Ba(i,Ha,{configurable:!0,value:t}),r&&!Ua&&Fa(i,"toString",Wa))},Ga=La.IteratorPrototype,Ya=Mo,Ka=B,qa=za,Xa=Jo,Ja=function(){return this},Qa=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Ya(Ga,{next:Ka(+!r,n)}),qa(e,i,!1,!0),Xa[i]=Ja,e},Za=Dn,$a=D,ec=Qa,tc=Oi,nc=za,rc=Ca,ic=Jo,oc=La,sc=Sa.PROPER,ac=oc.BUGGY_SAFARI_ITERATORS,cc=mt("iterator"),lc="keys",dc="values",uc="entries",hc=function(){return this},pc=function(e,t,n,r,i,o,s){ec(n,t,r);var a,c,l,d=function(e){if(e===i&&m)return m;if(!ac&&e&&e in p)return p[e];switch(e){case lc:case dc:case uc:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",h=!1,p=e.prototype,f=p[cc]||p["@@iterator"]||i&&p[i],m=!ac&&f||d(i),g="Array"===t&&p.entries||f;if(g&&(a=tc(g.call(new e)))!==Object.prototype&&a.next&&(nc(a,u,!0,!0),ic[u]=hc),sc&&i===dc&&f&&f.name!==dc&&(h=!0,m=function(){return $a(f,this)}),i)if(c={values:d(dc),keys:o?m:d(lc),entries:d(uc)},s)for(l in c)(ac||h||!(l in p))&&rc(p,l,c[l]);else Za({target:t,proto:!0,forced:ac||h},c);return s&&p[cc]!==m&&rc(p,cc,m,{name:i}),ic[t]=m,c},fc=function(e,t){return{value:e,done:t}},mc=Q,gc=Jo,vc=va;en.f;var yc=pc,_c=fc,Ec="Array Iterator",bc=vc.set,wc=vc.getterFor(Ec);yc(Array,"Array",(function(e,t){bc(this,{type:Ec,target:mc(e),index:0,kind:t})}),(function(){var e=wc(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,_c(void 0,!0);switch(e.kind){case"keys":return _c(n,!1);case"values":return _c(t[n],!1)}return _c([n,t[n]],!1)}),"values"),gc.Arguments=gc.Array;var Sc=en,Ac=function(e,t,n){return Sc.f(e,t,n)},Cc=oe,Tc=Ac,Rc=x,Ic=mt("species"),xc=u,Oc=TypeError,Nc=function(e,t){if(xc(t,e))return e;throw new Oc("Incorrect invocation")},Dc=R,kc=Ke,Pc=d(Function.toString);Dc(kc.inspectSource)||(kc.inspectSource=function(e){return Pc(e)});var Lc=kc.inspectSource,Mc=d,jc=i,Uc=R,Bc=vr,Fc=Lc,Vc=function(){},Wc=oe("Reflect","construct"),Hc=/^\s*(?:class|function)\b/,zc=Mc(Hc.exec),Gc=!Hc.test(Vc),Yc=function(e){if(!Uc(e))return!1;try{return Wc(Vc,[],e),!0}catch(e){return!1}},Kc=function(e){if(!Uc(e))return!1;switch(Bc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Gc||!!zc(Hc,Fc(e))}catch(e){return!0}};Kc.sham=!0;var qc,Xc,Jc,Qc,Zc=!Wc||jc((function(){var e;return Yc(Yc.call)||!Yc(Object)||!Yc((function(){e=!0}))||e}))?Kc:Yc,$c=Zc,el=Re,tl=TypeError,nl=sn,rl=function(e){if($c(e))return e;throw new tl(el(e)+" is not a constructor")},il=G,ol=mt("species"),sl=function(e,t){var n,r=nl(e).constructor;return void 0===r||il(n=nl(r)[ol])?t:rl(n)},al=d([].slice),cl=TypeError,ll=function(e,t){if(e<t)throw new cl("Not enough arguments");return e},dl=/(?:ipad|iphone|ipod).*applewebkit/i.test(ce),ul=p,hl=y,pl=$t,fl=R,ml=tt,gl=i,vl=wo,yl=al,_l=xt,El=ll,bl=dl,wl=Qr,Sl=ul.setImmediate,Al=ul.clearImmediate,Cl=ul.process,Tl=ul.Dispatch,Rl=ul.Function,Il=ul.MessageChannel,xl=ul.String,Ol=0,Nl={},Dl="onreadystatechange";gl((function(){qc=ul.location}));var kl=function(e){if(ml(Nl,e)){var t=Nl[e];delete Nl[e],t()}},Pl=function(e){return function(){kl(e)}},Ll=function(e){kl(e.data)},Ml=function(e){ul.postMessage(xl(e),qc.protocol+"//"+qc.host)};Sl&&Al||(Sl=function(e){El(arguments.length,1);var t=fl(e)?e:Rl(e),n=yl(arguments,1);return Nl[++Ol]=function(){hl(t,void 0,n)},Xc(Ol),Ol},Al=function(e){delete Nl[e]},wl?Xc=function(e){Cl.nextTick(Pl(e))}:Tl&&Tl.now?Xc=function(e){Tl.now(Pl(e))}:Il&&!bl?(Qc=(Jc=new Il).port2,Jc.port1.onmessage=Ll,Xc=pl(Qc.postMessage,Qc)):ul.addEventListener&&fl(ul.postMessage)&&!ul.importScripts&&qc&&"file:"!==qc.protocol&&!gl(Ml)?(Xc=Ml,ul.addEventListener("message",Ll,!1)):Xc=Dl in _l("script")?function(e){vl.appendChild(_l("script"))[Dl]=function(){vl.removeChild(this),kl(e)}}:function(e){setTimeout(Pl(e),0)});var jl={set:Sl,clear:Al},Ul=p,Bl=x,Fl=Object.getOwnPropertyDescriptor,Vl=function(e){if(!Bl)return Ul[e];var t=Fl(Ul,e);return t&&t.value},Wl=function(){this.head=null,this.tail=null};Wl.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var Hl,zl,Gl,Yl,Kl,ql=Wl,Xl=/ipad|iphone|ipod/i.test(ce)&&"undefined"!=typeof Pebble,Jl=/web0s(?!.*chrome)/i.test(ce),Ql=p,Zl=Vl,$l=$t,ed=jl.set,td=ql,nd=dl,rd=Xl,id=Jl,od=Qr,sd=Ql.MutationObserver||Ql.WebKitMutationObserver,ad=Ql.document,cd=Ql.process,ld=Ql.Promise,dd=Zl("queueMicrotask");if(!dd){var ud=new td,hd=function(){var e,t;for(od&&(e=cd.domain)&&e.exit();t=ud.get();)try{t()}catch(e){throw ud.head&&Hl(),e}e&&e.enter()};nd||od||id||!sd||!ad?!rd&&ld&&ld.resolve?((Yl=ld.resolve(void 0)).constructor=ld,Kl=$l(Yl.then,Yl),Hl=function(){Kl(hd)}):od?Hl=function(){cd.nextTick(hd)}:(ed=$l(ed,Ql),Hl=function(){ed(hd)}):(zl=!0,Gl=ad.createTextNode(""),new sd(hd).observe(Gl,{characterData:!0}),Hl=function(){Gl.data=zl=!zl}),dd=function(e){ud.head||Hl(),ud.add(e)}}var pd=dd,fd=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},md=p.Promise,gd=p,vd=md,yd=R,_d=Xt,Ed=Lc,bd=mt,wd=Jr,Sd=me,Ad=vd&&vd.prototype,Cd=bd("species"),Td=!1,Rd=yd(gd.PromiseRejectionEvent),Id=_d("Promise",(function(){var e=Ed(vd),t=e!==String(vd);if(!t&&66===Sd)return!0;if(!Ad.catch||!Ad.finally)return!0;if(!Sd||Sd<51||!/native code/.test(e)){var n=new vd((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Cd]=r,!(Td=n.then((function(){}))instanceof r))return!0}return!(t||"BROWSER"!==wd&&"DENO"!==wd||Rd)})),xd={CONSTRUCTOR:Id,REJECTION_EVENT:Rd,SUBCLASSING:Td},Od={},Nd=Ne,Dd=TypeError,kd=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new Dd("Bad Promise constructor");t=e,n=r})),this.resolve=Nd(t),this.reject=Nd(n)};Od.f=function(e){return new kd(e)};var Pd,Ld,Md=Dn,jd=Qr,Ud=p,Bd=D,Fd=Ca,Vd=za,Wd=function(e){var t=Cc(e);Rc&&t&&!t[Ic]&&Tc(t,Ic,{configurable:!0,get:function(){return this}})},Hd=Ne,zd=R,Gd=$,Yd=Nc,Kd=sl,qd=jl.set,Xd=pd,Jd=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}},Qd=fd,Zd=ql,$d=va,eu=md,tu=xd,nu=Od,ru="Promise",iu=tu.CONSTRUCTOR,ou=tu.REJECTION_EVENT,su=$d.getterFor(ru),au=$d.set,cu=eu&&eu.prototype,lu=eu,du=cu,uu=Ud.TypeError,hu=Ud.document,pu=Ud.process,fu=nu.f,mu=fu,gu=!!(hu&&hu.createEvent&&Ud.dispatchEvent),vu="unhandledrejection",yu=function(e){var t;return!(!Gd(e)||!zd(t=e.then))&&t},_u=function(e,t){var n,r,i,o=t.value,s=1===t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,d=e.domain;try{a?(s||(2===t.rejection&&Au(t),t.rejection=1),!0===a?n=o:(d&&d.enter(),n=a(o),d&&(d.exit(),i=!0)),n===e.promise?l(new uu("Promise-chain cycle")):(r=yu(n))?Bd(r,n,c,l):c(n)):l(o)}catch(e){d&&!i&&d.exit(),l(e)}},Eu=function(e,t){e.notified||(e.notified=!0,Xd((function(){for(var n,r=e.reactions;n=r.get();)_u(n,e);e.notified=!1,t&&!e.rejection&&wu(e)})))},bu=function(e,t,n){var r,i;gu?((r=hu.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Ud.dispatchEvent(r)):r={promise:t,reason:n},!ou&&(i=Ud["on"+e])?i(r):e===vu&&Jd("Unhandled promise rejection",n)},wu=function(e){Bd(qd,Ud,(function(){var t,n=e.facade,r=e.value;if(Su(e)&&(t=Qd((function(){jd?pu.emit("unhandledRejection",r,n):bu(vu,n,r)})),e.rejection=jd||Su(e)?2:1,t.error))throw t.value}))},Su=function(e){return 1!==e.rejection&&!e.parent},Au=function(e){Bd(qd,Ud,(function(){var t=e.facade;jd?pu.emit("rejectionHandled",t):bu("rejectionhandled",t,e.value)}))},Cu=function(e,t,n){return function(r){e(t,r,n)}},Tu=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Eu(e,!0))},Ru=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new uu("Promise can't be resolved itself");var r=yu(t);r?Xd((function(){var n={done:!1};try{Bd(r,t,Cu(Ru,n,e),Cu(Tu,n,e))}catch(t){Tu(n,t,e)}})):(e.value=t,e.state=1,Eu(e,!1))}catch(t){Tu({done:!1},t,e)}}};iu&&(du=(lu=function(e){Yd(this,du),Hd(e),Bd(Pd,this);var t=su(this);try{e(Cu(Ru,t),Cu(Tu,t))}catch(e){Tu(t,e)}}).prototype,(Pd=function(e){au(this,{type:ru,done:!1,notified:!1,parent:!1,reactions:new Zd,rejection:!1,state:0,value:null})}).prototype=Fd(du,"then",(function(e,t){var n=su(this),r=fu(Kd(this,lu));return n.parent=!0,r.ok=!zd(e)||e,r.fail=zd(t)&&t,r.domain=jd?pu.domain:void 0,0===n.state?n.reactions.add(r):Xd((function(){_u(r,n)})),r.promise})),Ld=function(){var e=new Pd,t=su(e);this.promise=e,this.resolve=Cu(Ru,t),this.reject=Cu(Tu,t)},nu.f=fu=function(e){return e===lu||void 0===e?new Ld(e):mu(e)}),Md({global:!0,constructor:!0,wrap:!0,forced:iu},{Promise:lu}),Vd(lu,ru,!1,!0),Wd(ru);var Iu=mt("iterator"),xu=!1;try{var Ou=0,Nu={next:function(){return{done:!!Ou++}},return:function(){xu=!0}};Nu[Iu]=function(){return this},Array.from(Nu,(function(){throw 2}))}catch(e){}var Du=md,ku=function(e,t){try{if(!t&&!xu)return!1}catch(e){return!1}var n=!1;try{var r={};r[Iu]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Pu=xd.CONSTRUCTOR||!ku((function(e){Du.all(e).then(void 0,(function(){}))})),Lu=D,Mu=Ne,ju=Od,Uu=fd,Bu=Ns;Dn({target:"Promise",stat:!0,forced:Pu},{all:function(e){var t=this,n=ju.f(t),r=n.resolve,i=n.reject,o=Uu((function(){var n=Mu(t.resolve),o=[],s=0,a=1;Bu(e,(function(e){var c=s++,l=!1;a++,Lu(n,t,e).then((function(e){l||(l=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise}});var Fu=Dn,Vu=xd.CONSTRUCTOR;md&&md.prototype,Fu({target:"Promise",proto:!0,forced:Vu,real:!0},{catch:function(e){return this.then(void 0,e)}});var Wu=D,Hu=Ne,zu=Od,Gu=fd,Yu=Ns;Dn({target:"Promise",stat:!0,forced:Pu},{race:function(e){var t=this,n=zu.f(t),r=n.reject,i=Gu((function(){var i=Hu(t.resolve);Yu(e,(function(e){Wu(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Ku=Od;Dn({target:"Promise",stat:!0,forced:xd.CONSTRUCTOR},{reject:function(e){var t=Ku.f(this);return(0,t.reject)(e),t.promise}});var qu=sn,Xu=$,Ju=Od,Qu=function(e,t){if(qu(e),Xu(t)&&t.constructor===e)return t;var n=Ju.f(e);return(0,n.resolve)(t),n.promise},Zu=Dn,$u=md,eh=xd.CONSTRUCTOR,th=Qu,nh=oe("Promise"),rh=!eh;Zu({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return th(rh&&this===nh?$u:this,e)}});var ih=D,oh=Ne,sh=Od,ah=fd,ch=Ns;Dn({target:"Promise",stat:!0,forced:Pu},{allSettled:function(e){var t=this,n=sh.f(t),r=n.resolve,i=n.reject,o=ah((function(){var n=oh(t.resolve),i=[],o=0,s=1;ch(e,(function(e){var a=o++,c=!1;s++,ih(n,t,e).then((function(e){c||(c=!0,i[a]={status:"fulfilled",value:e},--s||r(i))}),(function(e){c||(c=!0,i[a]={status:"rejected",reason:e},--s||r(i))}))})),--s||r(i)}));return o.error&&i(o.value),n.promise}});var lh=D,dh=Ne,uh=oe,hh=Od,ph=fd,fh=Ns,mh="No one promise resolved";Dn({target:"Promise",stat:!0,forced:Pu},{any:function(e){var t=this,n=uh("AggregateError"),r=hh.f(t),i=r.resolve,o=r.reject,s=ph((function(){var r=dh(t.resolve),s=[],a=0,c=1,l=!1;fh(e,(function(e){var d=a++,u=!1;c++,lh(r,t,e).then((function(e){u||l||(l=!0,i(e))}),(function(e){u||l||(u=!0,s[d]=e,--c||o(new n(s,mh)))}))})),--c||o(new n(s,mh))}));return s.error&&o(s.value),r.promise}});var gh=Dn,vh=y,yh=al,_h=Od,Eh=Ne,bh=fd,wh=p.Promise,Sh=!1;gh({target:"Promise",stat:!0,forced:!wh||!wh.try||bh((function(){wh.try((function(e){Sh=8===e}),8)})).error||!Sh},{try:function(e){var t=arguments.length>1?yh(arguments,1):[],n=_h.f(this),r=bh((function(){return vh(Eh(e),void 0,t)}));return(r.error?n.reject:n.resolve)(r.value),n.promise}});var Ah=Od;Dn({target:"Promise",stat:!0},{withResolvers:function(){var e=Ah.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var Ch=Dn,Th=md,Rh=i,Ih=oe,xh=R,Oh=sl,Nh=Qu,Dh=Th&&Th.prototype;Ch({target:"Promise",proto:!0,real:!0,forced:!!Th&&Rh((function(){Dh.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Oh(this,Ih("Promise")),n=xh(e);return this.then(n?function(n){return Nh(t,e()).then((function(){return n}))}:e,n?function(n){return Nh(t,e()).then((function(){throw n}))}:e)}});var kh=d,Ph=jn,Lh=Er,Mh=q,jh=kh("".charAt),Uh=kh("".charCodeAt),Bh=kh("".slice),Fh=function(e){return function(t,n){var r,i,o=Lh(Mh(t)),s=Ph(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=Uh(o,s))<55296||r>56319||s+1===a||(i=Uh(o,s+1))<56320||i>57343?e?jh(o,s):r:e?Bh(o,s,s+2):i-56320+(r-55296<<10)+65536}},Vh={codeAt:Fh(!1),charAt:Fh(!0)},Wh=Vh.charAt,Hh=Er,zh=va,Gh=pc,Yh=fc,Kh="String Iterator",qh=zh.set,Xh=zh.getterFor(Kh);Gh(String,"String",(function(e){qh(this,{type:Kh,string:Hh(e),index:0})}),(function(){var e,t=Xh(this),n=t.string,r=t.index;return r>=n.length?Yh(void 0,!0):(e=Wh(n,r),t.index+=e.length,Yh(e,!1))}));var Jh=ee.Promise,Qh={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Zh=p,$h=za,ep=Jo;for(var tp in Qh)$h(Zh[tp],tp),ep[tp]=ep.Array;var np=Jh,rp=r(np),ip=tr("Array","values"),op=vr,sp=tt,ap=u,cp=ip,lp=Array.prototype,dp={DOMTokenList:!0,NodeList:!0},up=function(e){var t=e.values;return e===lp||ap(lp,e)&&t===lp.values||sp(dp,op(e))?cp:t},hp=r(up),pp=Dn,fp=d,mp=Vn,gp=RangeError,vp=String.fromCharCode,yp=String.fromCodePoint,_p=fp([].join);pp({target:"String",stat:!0,arity:1,forced:!!yp&&1!==yp.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],mp(t,1114111)!==t)throw new gp(t+" is not a valid code point");n[i]=t<65536?vp(t):vp(55296+((t-=65536)>>10),t%1024+56320)}return _p(n,"")}});var Ep=i,bp=Fe,wp=mt("iterator"),Sp=!Ep((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),n.delete("b",void 0),!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b")||!t.size&&bp||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[wp]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("https://a#\u0431").hash||"a1c3"!==r||"x"!==new URL("https://x",void 0).host})),Ap=Ca,Cp=al,Tp=Math.floor,Rp=function(e,t){var n=e.length;if(n<8)for(var r,i,o=1;o<n;){for(i=o,r=e[o];i&&t(e[i-1],r)>0;)e[i]=e[--i];i!==o++&&(e[i]=r)}else for(var s=Tp(n/2),a=Rp(Cp(e,0,s),t),c=Rp(Cp(e,s),t),l=a.length,d=c.length,u=0,h=0;u<l||h<d;)e[u+h]=u<l&&h<d?t(a[u],c[h])<=0?a[u++]:c[h++]:u<l?a[u++]:c[h++];return e},Ip=Rp,xp=Dn,Op=p,Np=Vl,Dp=oe,kp=D,Pp=d,Lp=x,Mp=Sp,jp=Ca,Up=Ac,Bp=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Ap(e,r,t[r],n);return e},Fp=za,Vp=Qa,Wp=va,Hp=Nc,zp=R,Gp=tt,Yp=$t,Kp=vr,qp=sn,Xp=$,Jp=Er,Qp=Mo,Zp=B,$p=ps,ef=ss,tf=fc,nf=ll,rf=Ip,of=mt("iterator"),sf="URLSearchParams",af=sf+"Iterator",cf=Wp.set,lf=Wp.getterFor(sf),df=Wp.getterFor(af),uf=Np("fetch"),hf=Np("Request"),pf=Np("Headers"),ff=hf&&hf.prototype,mf=pf&&pf.prototype,gf=Op.TypeError,vf=Op.encodeURIComponent,yf=String.fromCharCode,_f=Dp("String","fromCodePoint"),Ef=parseInt,bf=Pp("".charAt),wf=Pp([].join),Sf=Pp([].push),Af=Pp("".replace),Cf=Pp([].shift),Tf=Pp([].splice),Rf=Pp("".split),If=Pp("".slice),xf=Pp(/./.exec),Of=/\+/g,Nf=/^[0-9a-f]+$/i,Df=function(e,t){var n=If(e,t,t+2);return xf(Nf,n)?Ef(n,16):NaN},kf=function(e){for(var t=0,n=128;n>0&&e&n;n>>=1)t++;return t},Pf=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},Lf=function(e){for(var t=(e=Af(e,Of," ")).length,n="",r=0;r<t;){var i=bf(e,r);if("%"===i){if("%"===bf(e,r+1)||r+3>t){n+="%",r++;continue}var o=Df(e,r+1);if(o!=o){n+=i,r++;continue}r+=2;var s=kf(o);if(0===s)i=yf(o);else{if(1===s||s>4){n+="\ufffd",r++;continue}for(var a=[o],c=1;c<s&&!(3+ ++r>t||"%"!==bf(e,r));){var l=Df(e,r+1);if(l!=l){r+=3;break}if(l>191||l<128)break;Sf(a,l),r+=2,c++}if(a.length!==s){n+="\ufffd";continue}var d=Pf(a);null===d?n+="\ufffd":i=_f(d)}}n+=i,r++}return n},Mf=/[!'()~]|%20/g,jf={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Uf=function(e){return jf[e]},Bf=function(e){return Af(vf(e),Mf,Uf)},Ff=Vp((function(e,t){cf(this,{type:af,target:lf(e).entries,index:0,kind:t})}),sf,(function(){var e=df(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,tf(void 0,!0);var r=t[n];switch(e.kind){case"keys":return tf(r.key,!1);case"values":return tf(r.value,!1)}return tf([r.key,r.value],!1)}),!0),Vf=function(e){this.entries=[],this.url=null,void 0!==e&&(Xp(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===bf(e,0)?If(e,1):e:Jp(e)))};Vf.prototype={type:sf,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,s,a,c=this.entries,l=ef(e);if(l)for(n=(t=$p(e,l)).next;!(r=kp(n,t)).done;){if(o=(i=$p(qp(r.value))).next,(s=kp(o,i)).done||(a=kp(o,i)).done||!kp(o,i).done)throw new gf("Expected sequence with length 2");Sf(c,{key:Jp(s.value),value:Jp(a.value)})}else for(var d in e)Gp(e,d)&&Sf(c,{key:d,value:Jp(e[d])})},parseQuery:function(e){if(e)for(var t,n,r=this.entries,i=Rf(e,"&"),o=0;o<i.length;)(t=i[o++]).length&&(n=Rf(t,"="),Sf(r,{key:Lf(Cf(n)),value:Lf(wf(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Sf(n,Bf(e.key)+"="+Bf(e.value));return wf(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Wf=function(){Hp(this,Hf);var e=cf(this,new Vf(arguments.length>0?arguments[0]:void 0));Lp||(this.size=e.entries.length)},Hf=Wf.prototype;if(Bp(Hf,{append:function(e,t){var n=lf(this);nf(arguments.length,2),Sf(n.entries,{key:Jp(e),value:Jp(t)}),Lp||this.length++,n.updateURL()},delete:function(e){for(var t=lf(this),n=nf(arguments.length,1),r=t.entries,i=Jp(e),o=n<2?void 0:arguments[1],s=void 0===o?o:Jp(o),a=0;a<r.length;){var c=r[a];if(c.key!==i||void 0!==s&&c.value!==s)a++;else if(Tf(r,a,1),void 0!==s)break}Lp||(this.size=r.length),t.updateURL()},get:function(e){var t=lf(this).entries;nf(arguments.length,1);for(var n=Jp(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=lf(this).entries;nf(arguments.length,1);for(var n=Jp(e),r=[],i=0;i<t.length;i++)t[i].key===n&&Sf(r,t[i].value);return r},has:function(e){for(var t=lf(this).entries,n=nf(arguments.length,1),r=Jp(e),i=n<2?void 0:arguments[1],o=void 0===i?i:Jp(i),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===o||a.value===o))return!0}return!1},set:function(e,t){var n=lf(this);nf(arguments.length,1);for(var r,i=n.entries,o=!1,s=Jp(e),a=Jp(t),c=0;c<i.length;c++)(r=i[c]).key===s&&(o?Tf(i,c--,1):(o=!0,r.value=a));o||Sf(i,{key:s,value:a}),Lp||(this.size=i.length),n.updateURL()},sort:function(){var e=lf(this);rf(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=lf(this).entries,r=Yp(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new Ff(this,"keys")},values:function(){return new Ff(this,"values")},entries:function(){return new Ff(this,"entries")}},{enumerable:!0}),jp(Hf,of,Hf.entries,{name:"entries"}),jp(Hf,"toString",(function(){return lf(this).serialize()}),{enumerable:!0}),Lp&&Up(Hf,"size",{get:function(){return lf(this).entries.length},configurable:!0,enumerable:!0}),Fp(Wf,sf),xp({global:!0,constructor:!0,forced:!Mp},{URLSearchParams:Wf}),!Mp&&zp(pf)){var zf=Pp(mf.has),Gf=Pp(mf.set),Yf=function(e){if(Xp(e)){var t,n=e.body;if(Kp(n)===sf)return t=e.headers?new pf(e.headers):new pf,zf(t,"content-type")||Gf(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Qp(e,{body:Zp(0,Jp(n)),headers:Zp(0,t)})}return e};if(zp(uf)&&xp({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return uf(e,arguments.length>1?Yf(arguments[1]):{})}}),zp(hf)){var Kf=function(e){return Hp(this,ff),new hf(e,arguments.length>1?Yf(arguments[1]):{})};ff.constructor=Kf,Kf.prototype=ff,xp({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Kf})}}var qf,Xf={URLSearchParams:Wf,getState:lf},Jf=ee.URLSearchParams,Qf=x,Zf=d,$f=D,em=i,tm=fo,nm=$i,rm=k,im=Ze,om=z,sm=Object.assign,am=Object.defineProperty,cm=Zf([].concat),lm=!sm||em((function(){if(Qf&&1!==sm({b:1},sm(am({},"a",{enumerable:!0,get:function(){am(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==sm({},e)[n]||tm(sm({},t)).join("")!==r}))?function(e,t){for(var n=im(e),r=arguments.length,i=1,o=nm.f,s=rm.f;r>i;)for(var a,c=om(arguments[i++]),l=o?cm(tm(c),o(c)):tm(c),d=l.length,u=0;d>u;)a=l[u++],Qf&&!$f(s,c,a)||(n[a]=c[a]);return n}:sm,dm=sn,um=vs,hm=x,pm=en,fm=B,mm=function(e,t,n){hm?pm.f(e,t,fm(0,n)):e[t]=n},gm=$t,vm=D,ym=Ze,_m=function(e,t,n,r){try{return r?t(dm(n)[0],n[1]):t(n)}catch(t){um(e,"throw",t)}},Em=es,bm=Zc,wm=Yn,Sm=mm,Am=ps,Cm=ss,Tm=Array,Rm=d,Im=2147483647,xm=/[^\0-\u007E]/,Om=/[.\u3002\uFF0E\uFF61]/g,Nm="Overflow: input needs wider integers to process",Dm=RangeError,km=Rm(Om.exec),Pm=Math.floor,Lm=String.fromCharCode,Mm=Rm("".charCodeAt),jm=Rm([].join),Um=Rm([].push),Bm=Rm("".replace),Fm=Rm("".split),Vm=Rm("".toLowerCase),Wm=function(e){return e+22+75*(e<26)},Hm=function(e,t,n){var r=0;for(e=n?Pm(e/700):e>>1,e+=Pm(e/t);e>455;)e=Pm(e/35),r+=36;return Pm(r+36*e/(e+38))},zm=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=Mm(e,n++);if(i>=55296&&i<=56319&&n<r){var o=Mm(e,n++);56320==(64512&o)?Um(t,((1023&i)<<10)+(1023&o)+65536):(Um(t,i),n--)}else Um(t,i)}return t}(e);var n,r,i=e.length,o=128,s=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&Um(t,Lm(r));var c=t.length,l=c;for(c&&Um(t,"-");l<i;){var d=Im;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<d&&(d=r);var u=l+1;if(d-o>Pm((Im-s)/u))throw new Dm(Nm);for(s+=(d-o)*u,o=d,n=0;n<e.length;n++){if((r=e[n])<o&&++s>Im)throw new Dm(Nm);if(r===o){for(var h=s,p=36;;){var f=p<=a?1:p>=a+26?26:p-a;if(h<f)break;var m=h-f,g=36-f;Um(t,Lm(Wm(f+m%g))),h=Pm(m/g),p+=36}Um(t,Lm(Wm(h))),a=Hm(s,u,l===c),s=0,l++}}s++,o++}return jm(t,"")},Gm=Dn,Ym=x,Km=Sp,qm=p,Xm=$t,Jm=d,Qm=Ca,Zm=Ac,$m=Nc,eg=tt,tg=lm,ng=function(e){var t=ym(e),n=bm(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=gm(i,r>2?arguments[2]:void 0));var s,a,c,l,d,u,h=Cm(t),p=0;if(!h||this===Tm&&Em(h))for(s=wm(t),a=n?new this(s):Tm(s);s>p;p++)u=o?i(t[p],p):t[p],Sm(a,p,u);else for(a=n?new this:[],d=(l=Am(t,h)).next;!(c=vm(d,l)).done;p++)u=o?_m(l,i,[c.value,p],!0):c.value,Sm(a,p,u);return a.length=p,a},rg=al,ig=Vh.codeAt,og=function(e){var t,n,r=[],i=Fm(Bm(Vm(e),Om,"."),".");for(t=0;t<i.length;t++)n=i[t],Um(r,km(xm,n)?"xn--"+zm(n):n);return jm(r,".")},sg=Er,ag=za,cg=ll,lg=Xf,dg=va,ug=dg.set,hg=dg.getterFor("URL"),pg=lg.URLSearchParams,fg=lg.getState,mg=qm.URL,gg=qm.TypeError,vg=qm.parseInt,yg=Math.floor,_g=Math.pow,Eg=Jm("".charAt),bg=Jm(/./.exec),wg=Jm([].join),Sg=Jm(1..toString),Ag=Jm([].pop),Cg=Jm([].push),Tg=Jm("".replace),Rg=Jm([].shift),Ig=Jm("".split),xg=Jm("".slice),Og=Jm("".toLowerCase),Ng=Jm([].unshift),Dg="Invalid scheme",kg="Invalid host",Pg="Invalid port",Lg=/[a-z]/i,Mg=/[\d+-.a-z]/i,jg=/\d/,Ug=/^0x/i,Bg=/^[0-7]+$/,Fg=/^\d+$/,Vg=/^[\da-f]+$/i,Wg=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Hg=/[\0\t\n\r #/:<>?@[\\\]^|]/,zg=/^[\u0000-\u0020]+/,Gg=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Yg=/[\t\n\r]/g,Kg=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)Ng(t,e%256),e=yg(e/256);return wg(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n?r:t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=Sg(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},qg={},Xg=tg({},qg,{" ":1,'"':1,"<":1,">":1,"`":1}),Jg=tg({},Xg,{"#":1,"?":1,"{":1,"}":1}),Qg=tg({},Jg,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Zg=function(e,t){var n=ig(e,0);return n>32&&n<127&&!eg(t,e)?e:encodeURIComponent(e)},$g={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ev=function(e,t){var n;return 2===e.length&&bg(Lg,Eg(e,0))&&(":"===(n=Eg(e,1))||!t&&"|"===n)},tv=function(e){var t;return e.length>1&&ev(xg(e,0,2))&&(2===e.length||"/"===(t=Eg(e,2))||"\\"===t||"?"===t||"#"===t)},nv=function(e){return"."===e||"%2e"===Og(e)},rv={},iv={},ov={},sv={},av={},cv={},lv={},dv={},uv={},hv={},pv={},fv={},mv={},gv={},vv={},yv={},_v={},Ev={},bv={},wv={},Sv={},Av=function(e,t,n){var r,i,o,s=sg(e);if(t){if(i=this.parse(s))throw new gg(i);this.searchParams=null}else{if(void 0!==n&&(r=new Av(n,!0)),i=this.parse(s,null,r))throw new gg(i);(o=fg(new pg)).bindURL(this),this.searchParams=o}};Av.prototype={type:"URL",parse:function(e,t,n){var r,i,o,s,a,c=this,l=t||rv,d=0,u="",h=!1,p=!1,f=!1;for(e=sg(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=Tg(e,zg,""),e=Tg(e,Gg,"$1")),e=Tg(e,Yg,""),r=ng(e);d<=r.length;){switch(i=r[d],l){case rv:if(!i||!bg(Lg,i)){if(t)return Dg;l=ov;continue}u+=Og(i),l=iv;break;case iv:if(i&&(bg(Mg,i)||"+"===i||"-"===i||"."===i))u+=Og(i);else{if(":"!==i){if(t)return Dg;u="",l=ov,d=0;continue}if(t&&(c.isSpecial()!==eg($g,u)||"file"===u&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&$g[c.scheme]===c.port&&(c.port=null));u="","file"===c.scheme?l=gv:c.isSpecial()&&n&&n.scheme===c.scheme?l=sv:c.isSpecial()?l=dv:"/"===r[d+1]?(l=av,d++):(c.cannotBeABaseURL=!0,Cg(c.path,""),l=bv)}break;case ov:if(!n||n.cannotBeABaseURL&&"#"!==i)return Dg;if(n.cannotBeABaseURL&&"#"===i){c.scheme=n.scheme,c.path=rg(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=Sv;break}l="file"===n.scheme?gv:cv;continue;case sv:if("/"!==i||"/"!==r[d+1]){l=cv;continue}l=uv,d++;break;case av:if("/"===i){l=hv;break}l=Ev;continue;case cv:if(c.scheme=n.scheme,i===qf)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=rg(n.path),c.query=n.query;else if("/"===i||"\\"===i&&c.isSpecial())l=lv;else if("?"===i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=rg(n.path),c.query="",l=wv;else{if("#"!==i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=rg(n.path),c.path.length--,l=Ev;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=rg(n.path),c.query=n.query,c.fragment="",l=Sv}break;case lv:if(!c.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=Ev;continue}l=hv}else l=uv;break;case dv:if(l=uv,"/"!==i||"/"!==Eg(u,d+1))continue;d++;break;case uv:if("/"!==i&&"\\"!==i){l=hv;continue}break;case hv:if("@"===i){h&&(u="%40"+u),h=!0,o=ng(u);for(var m=0;m<o.length;m++){var g=o[m];if(":"!==g||f){var v=Zg(g,Qg);f?c.password+=v:c.username+=v}else f=!0}u=""}else if(i===qf||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(h&&""===u)return"Invalid authority";d-=ng(u).length+1,u="",l=pv}else u+=i;break;case pv:case fv:if(t&&"file"===c.scheme){l=yv;continue}if(":"!==i||p){if(i===qf||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(c.isSpecial()&&""===u)return kg;if(t&&""===u&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(u))return s;if(u="",l=_v,t)return;continue}"["===i?p=!0:"]"===i&&(p=!1),u+=i}else{if(""===u)return kg;if(s=c.parseHost(u))return s;if(u="",l=mv,t===fv)return}break;case mv:if(!bg(jg,i)){if(i===qf||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()||t){if(""!==u){var y=vg(u,10);if(y>65535)return Pg;c.port=c.isSpecial()&&y===$g[c.scheme]?null:y,u=""}if(t)return;l=_v;continue}return Pg}u+=i;break;case gv:if(c.scheme="file","/"===i||"\\"===i)l=vv;else{if(!n||"file"!==n.scheme){l=Ev;continue}switch(i){case qf:c.host=n.host,c.path=rg(n.path),c.query=n.query;break;case"?":c.host=n.host,c.path=rg(n.path),c.query="",l=wv;break;case"#":c.host=n.host,c.path=rg(n.path),c.query=n.query,c.fragment="",l=Sv;break;default:tv(wg(rg(r,d),""))||(c.host=n.host,c.path=rg(n.path),c.shortenPath()),l=Ev;continue}}break;case vv:if("/"===i||"\\"===i){l=yv;break}n&&"file"===n.scheme&&!tv(wg(rg(r,d),""))&&(ev(n.path[0],!0)?Cg(c.path,n.path[0]):c.host=n.host),l=Ev;continue;case yv:if(i===qf||"/"===i||"\\"===i||"?"===i||"#"===i){if(!t&&ev(u))l=Ev;else if(""===u){if(c.host="",t)return;l=_v}else{if(s=c.parseHost(u))return s;if("localhost"===c.host&&(c.host=""),t)return;u="",l=_v}continue}u+=i;break;case _v:if(c.isSpecial()){if(l=Ev,"/"!==i&&"\\"!==i)continue}else if(t||"?"!==i)if(t||"#"!==i){if(i!==qf&&(l=Ev,"/"!==i))continue}else c.fragment="",l=Sv;else c.query="",l=wv;break;case Ev:if(i===qf||"/"===i||"\\"===i&&c.isSpecial()||!t&&("?"===i||"#"===i)){if(".."===(a=Og(a=u))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"===i||"\\"===i&&c.isSpecial()||Cg(c.path,"")):nv(u)?"/"===i||"\\"===i&&c.isSpecial()||Cg(c.path,""):("file"===c.scheme&&!c.path.length&&ev(u)&&(c.host&&(c.host=""),u=Eg(u,0)+":"),Cg(c.path,u)),u="","file"===c.scheme&&(i===qf||"?"===i||"#"===i))for(;c.path.length>1&&""===c.path[0];)Rg(c.path);"?"===i?(c.query="",l=wv):"#"===i&&(c.fragment="",l=Sv)}else u+=Zg(i,Jg);break;case bv:"?"===i?(c.query="",l=wv):"#"===i?(c.fragment="",l=Sv):i!==qf&&(c.path[0]+=Zg(i,qg));break;case wv:t||"#"!==i?i!==qf&&("'"===i&&c.isSpecial()?c.query+="%27":c.query+="#"===i?"%23":Zg(i,qg)):(c.fragment="",l=Sv);break;case Sv:i!==qf&&(c.fragment+=Zg(i,Xg))}d++}},parseHost:function(e){var t,n,r;if("["===Eg(e,0)){if("]"!==Eg(e,e.length-1))return kg;if(t=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,d=null,u=0,h=function(){return Eg(e,u)};if(":"===h()){if(":"!==Eg(e,1))return;u+=2,d=++l}for(;h();){if(8===l)return;if(":"!==h()){for(t=n=0;n<4&&bg(Vg,h());)t=16*t+vg(h(),16),u++,n++;if("."===h()){if(0===n)return;if(u-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."===h()&&r<4))return;u++}if(!bg(jg,h()))return;for(;bg(jg,h());){if(o=vg(h(),10),null===i)i=o;else{if(0===i)return;i=10*i+o}if(i>255)return;u++}c[l]=256*c[l]+i,2!=++r&&4!==r||l++}if(4!==r)return;break}if(":"===h()){if(u++,!h())return}else if(h())return;c[l++]=t}else{if(null!==d)return;u++,d=++l}}if(null!==d)for(s=l-d,l=7;0!==l&&s>0;)a=c[l],c[l--]=c[d+s-1],c[d+--s]=a;else if(8!==l)return;return c}(xg(e,1,-1)),!t)return kg;this.host=t}else if(this.isSpecial()){if(e=og(e),bg(Wg,e))return kg;if(t=function(e){var t,n,r,i,o,s,a,c=Ig(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""===(i=c[r]))return e;if(o=10,i.length>1&&"0"===Eg(i,0)&&(o=bg(Ug,i)?16:8,i=xg(i,8===o?1:2)),""===i)s=0;else{if(!bg(10===o?Fg:8===o?Bg:Vg,i))return e;s=vg(i,o)}Cg(n,s)}for(r=0;r<t;r++)if(s=n[r],r===t-1){if(s>=_g(256,5-t))return null}else if(s>255)return null;for(a=Ag(n),r=0;r<n.length;r++)a+=n[r]*_g(256,3-r);return a}(e),null===t)return kg;this.host=t}else{if(bg(Hg,e))return kg;for(t="",n=ng(e),r=0;r<n.length;r++)t+=Zg(n[r],qg);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return eg($g,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&ev(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=Kg(i),null!==o&&(l+=":"+o)):"file"===t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+wg(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw new gg(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Cv(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+Kg(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(sg(e)+":",rv)},getUsername:function(){return this.username},setUsername:function(e){var t=ng(sg(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Zg(t[n],Qg)}},getPassword:function(){return this.password},setPassword:function(e){var t=ng(sg(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Zg(t[n],Qg)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Kg(e):Kg(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,pv)},getHostname:function(){var e=this.host;return null===e?"":Kg(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,fv)},getPort:function(){var e=this.port;return null===e?"":sg(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=sg(e))?this.port=null:this.parse(e,mv))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+wg(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,_v))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=sg(e))?this.query=null:("?"===Eg(e,0)&&(e=xg(e,1)),this.query="",this.parse(e,wv)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=sg(e))?("#"===Eg(e,0)&&(e=xg(e,1)),this.fragment="",this.parse(e,Sv)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Cv=function(e){var t=$m(this,Tv),n=cg(arguments.length,1)>1?arguments[1]:void 0,r=ug(t,new Av(e,!1,n));Ym||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Tv=Cv.prototype,Rv=function(e,t){return{get:function(){return hg(this)[e]()},set:t&&function(e){return hg(this)[t](e)},configurable:!0,enumerable:!0}};if(Ym&&(Zm(Tv,"href",Rv("serialize","setHref")),Zm(Tv,"origin",Rv("getOrigin")),Zm(Tv,"protocol",Rv("getProtocol","setProtocol")),Zm(Tv,"username",Rv("getUsername","setUsername")),Zm(Tv,"password",Rv("getPassword","setPassword")),Zm(Tv,"host",Rv("getHost","setHost")),Zm(Tv,"hostname",Rv("getHostname","setHostname")),Zm(Tv,"port",Rv("getPort","setPort")),Zm(Tv,"pathname",Rv("getPathname","setPathname")),Zm(Tv,"search",Rv("getSearch","setSearch")),Zm(Tv,"searchParams",Rv("getSearchParams")),Zm(Tv,"hash",Rv("getHash","setHash"))),Qm(Tv,"toJSON",(function(){return hg(this).serialize()}),{enumerable:!0}),Qm(Tv,"toString",(function(){return hg(this).serialize()}),{enumerable:!0}),mg){var Iv=mg.createObjectURL,xv=mg.revokeObjectURL;Iv&&Qm(Cv,"createObjectURL",Xm(Iv,mg)),xv&&Qm(Cv,"revokeObjectURL",Xm(xv,mg))}ag(Cv,"URL"),Gm({global:!0,constructor:!0,forced:!Km,sham:!Ym},{URL:Cv});var Ov=Dn,Nv=i,Dv=ll,kv=Er,Pv=Sp,Lv=oe("URL"),Mv=Pv&&Nv((function(){Lv.canParse()})),jv=Nv((function(){return 1!==Lv.canParse.length}));Ov({target:"URL",stat:!0,forced:!Mv||jv},{canParse:function(e){var t=Dv(arguments.length,1),n=kv(e),r=t<2||void 0===arguments[1]?void 0:kv(arguments[1]);try{return!!new Lv(n,r)}catch(e){return!1}}});var Uv=Dn,Bv=ll,Fv=Er,Vv=Sp,Wv=oe("URL");Uv({target:"URL",stat:!0,forced:!Vv},{parse:function(e){var t=Bv(arguments.length,1),n=Fv(e),r=t<2||void 0===arguments[1]?void 0:Fv(arguments[1]);try{return new Wv(n,r)}catch(e){return null}}});var Hv=r(ee.URL);let zv=!0,Gv=!0;function Yv(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Kv(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function qv(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(zv=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Xv(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Gv=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Jv(){if("object"==typeof window){if(zv)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Qv(e,t){Gv&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Zv(e){return"[object Object]"===Object.prototype.toString.call(e)}function $v(e){var t;return Zv(e)?oi(t=Object.keys(e)).call(t,(function(t,n){const r=Zv(e[n]),i=r?$v(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function ey(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?ey(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{ey(e,e.get(t),n)}))})))}function ty(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&ey(e,n,i)}))})),i}const ny=Jv;function ry(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>{var n;return Lr(n=e.label.toLowerCase()).call(n,t)}))));return!s&&n.length&&Lr(t).call(t,"back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),ny("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return ny("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>rp.reject(o(e))))))}}}function iy(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function oy(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Kv(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function sy(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ay(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new rp(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function cy(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ty(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Kv(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ty(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?rp.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():rp.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function ly(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function dy(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return ly(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),rp.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function uy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function hy(e,t){Kv(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var py=Object.freeze({__proto__:null,fixNegotiationNeeded:hy,shimAddTrackRemoveTrack:dy,shimAddTrackRemoveTrackWithNative:ly,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:sy,shimGetStats:ay,shimGetUserMedia:ry,shimMediaStream:iy,shimOnTrack:oy,shimPeerConnection:uy,shimSenderReceiverGetStats:cy});function fy(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Qv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function my(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function gy(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function vy(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):rp.resolve(new Map)}}function yy(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Kv(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function _y(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Qv("removeStream","removeTrack"),this.getSenders().forEach((t=>{var n;t.track&&Lr(n=e.getTracks()).call(n,t.track)&&this.removeTrack(t)}))})}function Ey(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function by(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function wy(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Sy(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?rp.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Ay(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?rp.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var Cy=Object.freeze({__proto__:null,shimAddTransceiver:by,shimCreateAnswer:Ay,shimCreateOffer:Sy,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,rp.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:wy,shimGetUserMedia:fy,shimOnTrack:my,shimPeerConnection:gy,shimRTCDataChannel:Ey,shimReceiverGetStats:yy,shimRemoveStream:_y,shimSenderGetStats:vy});function Ty(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n;this._localStreams||(this._localStreams=[]),Lr(n=this._localStreams).call(n,e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{var t;this._localStreams?Lr(t=this._localStreams).call(t,e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{Lr(n).call(n,e.track)&&this.removeTrack(e)}))})}}function Ry(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),Lr(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const n=new Event("addstream");n.stream=e,this.dispatchEvent(n)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function Iy(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),rp.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),rp.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),rp.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),rp.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),rp.resolve()):r},t.addIceCandidate=a}function xy(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Oy(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Oy(e){return e&&void 0!==e.video?Object.assign({},e,{video:$v(e.video)}):e}function Ny(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Qv("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Dy(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ky(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Py(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ly=Object.freeze({__proto__:null,shimAudioContext:Py,shimCallbacksAPI:Iy,shimConstraints:Oy,shimCreateOfferLegacy:ky,shimGetUserMedia:xy,shimLocalStreamsAPI:Ty,shimRTCIceServerUrls:Ny,shimRemoteStreamsAPI:Ry,shimTrackEventTransceiver:Dy}),My="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",jy=q,Uy=Er,By=My,Fy=d("".replace),Vy=RegExp("^["+By+"]+"),Wy=RegExp("(^|[^"+By+"])["+By+"]+$"),Hy=function(e){return function(t){var n=Uy(jy(t));return 1&e&&(n=Fy(n,Vy,"")),2&e&&(n=Fy(n,Wy,"$1")),n}},zy={start:Hy(1),end:Hy(2),trim:Hy(3)},Gy=Sa.PROPER,Yy=i,Ky=My,qy=zy.trim;Dn({target:"String",proto:!0,forced:function(e){return Yy((function(){return!!Ky[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||Gy&&Ky[e].name!==e}))}("trim")},{trim:function(){return qy(this)}});var Xy=tr("String","trim"),Jy=u,Qy=Xy,Zy=String.prototype,$y=function(e){var t=e.trim;return"string"==typeof e||e===Zy||Jy(Zy,e)&&t===Zy.trim?Qy:t},e_=r($y),t_={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let o=3;o<r.length;o++){const i=r[o],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){const r=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=o.length?t.parseFmtp(o[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substring(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(t_);var n_=t_.exports,r_=r(n_),i_=e({__proto__:null,default:r_},[n_]);function o_(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=r_.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Kv(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function s_(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Kv(e,"icecandidate",(e=>{if(e.candidate){const t=r_.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function a_(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=r_.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=r_.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=r_.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>i}),this._sctp=o}return n.apply(this,arguments)}}function c_(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Kv(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function l_(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function d_(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e_(e).call(e))).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function u_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?rp.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),rp.resolve())})}function h_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var p_=Object.freeze({__proto__:null,removeExtmapAllowMixed:d_,shimAddIceCandidateNullOrEmpty:u_,shimConnectionState:l_,shimMaxMessageSize:a_,shimParameterlessSetLocalDescription:h_,shimRTCIceCandidate:o_,shimRTCIceCandidateRelayProtocol:s_,shimSendThrowTypeError:c_});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Jv,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Yv(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Yv(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Yv(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:p_,extractVersion:Yv,disableLog:qv,disableWarnings:Xv,sdp:i_};switch(r.browser){case"chrome":if(!py||!uy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=py,u_(e,r),h_(e),ry(e,r),iy(e),uy(e,r),oy(e),dy(e,r),sy(e),ay(e),cy(e),hy(e,r),o_(e),s_(e),l_(e),a_(e,r),c_(e),d_(e,r);break;case"firefox":if(!Cy||!gy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Cy,u_(e,r),h_(e),fy(e,r),gy(e,r),my(e),_y(e),vy(e),yy(e),Ey(e),by(e),wy(e),Sy(e),Ay(e),o_(e),l_(e),a_(e,r),c_(e);break;case"safari":if(!Ly||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Ly,u_(e,r),h_(e),Ny(e),ky(e),Iy(e),Ty(e),Ry(e),Dy(e),xy(e),Py(e),o_(e),s_(e),a_(e,r),c_(e),d_(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var f_=Re,m_=TypeError,g_=ce.match(/firefox\/(\d+)/i),v_=!!g_&&+g_[1],y_=/MSIE|Trident/.test(ce),__=ce.match(/AppleWebKit\/(\d+)\./),E_=!!__&&+__[1],b_=Dn,w_=d,S_=Ne,A_=Ze,C_=Yn,T_=function(e,t){if(!delete e[t])throw new m_("Cannot delete property "+f_(t)+" of "+f_(e))},R_=Er,I_=i,x_=Ip,O_=Gr,N_=v_,D_=y_,k_=me,P_=E_,L_=[],M_=w_(L_.sort),j_=w_(L_.push),U_=I_((function(){L_.sort(void 0)})),B_=I_((function(){L_.sort(null)})),F_=O_("sort"),V_=!I_((function(){if(k_)return k_<70;if(!(N_&&N_>3)){if(D_)return!0;if(P_)return P_<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)L_.push({k:t+r,v:n})}for(L_.sort((function(e,t){return t.v-e.v})),r=0;r<L_.length;r++)t=L_[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));b_({target:"Array",proto:!0,forced:U_||!B_||!F_||!V_},{sort:function(e){void 0!==e&&S_(e);var t=A_(this);if(V_)return void 0===e?M_(t):M_(t,e);var n,r,i=[],o=C_(t);for(r=0;r<o;r++)r in t&&j_(i,t[r]);for(x_(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:R_(t)>R_(n)?1:-1}}(e)),n=C_(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)T_(t,r++);return t}});var W_=tr("Array","sort"),H_=u,z_=W_,G_=Array.prototype,Y_=function(e){var t=e.sort;return e===G_||H_(G_,e)&&t===G_.sort?z_:t},K_=r(Y_),q_=p;Dn({global:!0,forced:q_.globalThis!==q_},{globalThis:q_});var X_=r(p),J_={exports:{}};!function(e,n){!function(t,r){var i="function",o="undefined",s="object",a="string",c="major",l="model",d="name",u="type",h="vendor",p="version",f="architecture",m="console",g="mobile",v="tablet",y="smarttv",_="wearable",E="embedded",b="Amazon",w="Apple",S="ASUS",A="BlackBerry",C="Browser",T="Chrome",R="Firefox",I="Google",x="Huawei",O="LG",N="Microsoft",D="Motorola",k="Opera",P="Samsung",L="Sharp",M="Sony",j="Xiaomi",U="Zebra",B="Facebook",F="Chromium OS",V="Mac OS",W=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},H=function(e,t){return typeof e===a&&-1!==z(t).indexOf(z(e))},z=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},Y=function(e,t){for(var n,o,a,c,l,d,u=0;u<t.length&&!l;){var h=t[u],p=t[u+1];for(n=o=0;n<h.length&&!l&&h[n];)if(l=h[n++].exec(e))for(a=0;a<p.length;a++)d=l[++o],typeof(c=p[a])===s&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,d):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=d?d.replace(c[1],c[2]):r:this[c[0]]=d?c[1].call(this,d,c[2]):r:4===c.length&&(this[c[0]]=d?c[3].call(this,d.replace(c[1],c[2])):r):this[c]=d||r;u+=2}},K=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(H(t[n][i],e))return"?"===n?r:n}else if(H(t[n],e))return"?"===n?r:n;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,k+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,k]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+C],p],[/\bfocus\/([\w\.]+)/i],[p,[d,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,k+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,k+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[p,[d,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+C]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+C],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,B],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,T+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,z]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",z]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,P],[u,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,P],[u,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[h,w],[u,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,w],[u,v]],[/(macintosh);/i],[l,[h,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,L],[u,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,x],[u,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[h,x],[u,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[h,j],[u,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,j],[u,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[u,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[u,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[u,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,D],[u,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,D],[u,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,O],[u,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,O],[u,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[u,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[u,g]],[/(pixel c)\b/i],[l,[h,I],[u,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,I],[u,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,M],[u,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,M],[u,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[u,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,b],[u,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,b],[u,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[u,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,A],[u,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,S],[u,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,S],[u,g]],[/(nexus 9)/i],[l,[h,"HTC"],[u,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[u,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[u,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[u,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[u,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[u,v]],[/(surface duo)/i],[l,[h,N],[u,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[u,g]],[/(u304aa)/i],[l,[h,"AT&T"],[u,g]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[u,g]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[u,v]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[u,v]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[u,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[u,v]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[u,v]],[/\b(k88) b/i],[l,[h,"ZTE"],[u,v]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[u,g]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[u,g]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[u,v]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[u,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[u,v]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[u,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[u,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[u,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[u,g]],[/\b(ph-1) /i],[l,[h,"Essential"],[u,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[u,v]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[u,v]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[u,v]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[u,v]],[/(sprint) (\w+)/i],[h,l,[u,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,N],[u,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,U],[u,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,U],[u,g]],[/smart-tv.+(samsung)/i],[h,[u,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,P],[u,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,O],[u,y]],[/(apple) ?tv/i],[h,[l,w+" TV"],[u,y]],[/crkey/i],[[l,T+"cast"],[h,I],[u,y]],[/droid.+aft(\w)( bui|\))/i],[l,[h,b],[u,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[h,L],[u,y]],[/(bravia[\w ]+)( bui|\))/i],[l,[h,M],[u,y]],[/(mitv-\w{5}) bui/i],[l,[h,j],[u,y]],[/Hbbtv.*(technisat) (.*);/i],[h,l,[u,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,G],[l,G],[u,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[u,m]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[u,m]],[/(playstation [345portablevi]+)/i],[l,[h,M],[u,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,N],[u,m]],[/((pebble))app/i],[h,l,[u,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[h,w],[u,_]],[/droid.+; (glass) \d/i],[l,[h,I],[u,_]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,U],[u,_]],[/(quest( 2| pro)?)/i],[l,[h,B],[u,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[u,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[u,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,K,q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,K,q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,V],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,F],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},J=function(e,n){if(typeof e===s&&(n=e,e=r),!(this instanceof J))return new J(e,n).getResult();var m=typeof t!==o&&t.navigator?t.navigator:r,y=e||(m&&m.userAgent?m.userAgent:""),_=m&&m.userAgentData?m.userAgentData:r,E=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(X,n):X;return this.getBrowser=function(){var e={};return e[d]=r,e[p]=r,Y.call(e,y,E.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[p]),m&&m.brave&&typeof m.brave.isBrave==i&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[f]=r,Y.call(e,y,E.cpu),e},this.getDevice=function(){var e={};return e[h]=r,e[l]=r,e[u]=r,Y.call(e,y,E.device),!e[u]&&_&&_.mobile&&(e[u]=g),"Macintosh"==e[l]&&m&&typeof m.standalone!==o&&m.maxTouchPoints&&m.maxTouchPoints>2&&(e[l]="iPad",e[u]=v),e},this.getEngine=function(){var e={};return e[d]=r,e[p]=r,Y.call(e,y,E.engine),e},this.getOS=function(){var e={};return e[d]=r,e[p]=r,Y.call(e,y,E.os),!e[d]&&_&&"Unknown"!=_.platform&&(e[d]=_.platform.replace(/chrome os/i,F).replace(/macos/i,V)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return y},this.setUA=function(e){return y=typeof e===a&&e.length>350?G(e,350):e,this},this.setUA(y),this};J.VERSION="0.7.34",J.BROWSER=W([d,p,c]),J.CPU=W([f]),J.DEVICE=W([l,h,u,m,g,y,v,_,E]),J.ENGINE=J.OS=W([d,p]),e.exports&&(n=e.exports=J),n.UAParser=J;var Q=typeof t!==o&&(t.jQuery||t.Zepto);if(Q&&!Q.ua){var Z=new J;Q.ua=Z.getResult(),Q.ua.get=function(){return Z.getUA()},Q.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var n in t)Q.ua[n]=t[n]}}}("object"==typeof window?window:t)}(J_,J_.exports);var Q_=r(J_.exports),Z_=vr,$_=tt,eE=G,tE=Jo,nE=mt("iterator"),rE=Object,iE=function(e){if(eE(e))return!1;var t=rE(e);return void 0!==t[nE]||"@@iterator"in t||$_(tE,Z_(t))},oE=r(iE),sE=jl.clear;Dn({global:!0,bind:!0,enumerable:!0,forced:p.clearImmediate!==sE},{clearImmediate:sE});var aE=p,cE=y,lE=R,dE=Jr,uE=ce,hE=al,pE=ll,fE=aE.Function,mE=/MSIE .\./.test(uE)||"BUN"===dE&&function(){var e=aE.Bun.version.split(".");return e.length<3||"0"===e[0]&&(e[1]<3||"3"===e[1]&&"0"===e[2])}(),gE=Dn,vE=p,yE=jl.set,_E=function(e,t){var n=t?2:1;return mE?function(r,i){var o=pE(arguments.length,1)>n,s=lE(r)?r:fE(r),a=o?hE(arguments,n):[],c=o?function(){cE(s,this,a)}:s;return t?e(c,i):e(c)}:e},EE=vE.setImmediate?_E(yE,!1):yE;gE({global:!0,bind:!0,enumerable:!0,forced:vE.setImmediate!==EE},{setImmediate:EE});var bE=r(ee.setImmediate),wE=p,SE=pd,AE=Ne,CE=ll,TE=x;Dn({global:!0,enumerable:!0,dontCallGetSet:!0,forced:i((function(){return TE&&1!==Object.getOwnPropertyDescriptor(wE,"queueMicrotask").value.length}))},{queueMicrotask:function(e){CE(arguments.length,1),SE(AE(e))}});var RE=r(ee.queueMicrotask);function IE(e,t){return function(){return e.apply(t,arguments)}}const{toString:xE}=Object.prototype,{getPrototypeOf:OE}=Object,NE=(DE=Object.create(null),e=>{const t=xE.call(e);return DE[t]||(DE[t]=t.slice(8,-1).toLowerCase())});var DE;const kE=e=>(e=e.toLowerCase(),t=>NE(t)===e),PE=e=>t=>typeof t===e,{isArray:LE}=Array,ME=PE("undefined"),jE=kE("ArrayBuffer"),UE=PE("string"),BE=PE("function"),FE=PE("number"),VE=e=>null!==e&&"object"==typeof e,WE=e=>{if("object"!==NE(e))return!1;const t=OE(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||oE(e))},HE=kE("Date"),zE=kE("File"),GE=kE("Blob"),YE=kE("FileList"),KE=kE("URLSearchParams"),[qE,XE,JE,QE]=["ReadableStream","Request","Response","Headers"].map(kE);function ZE(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),LE(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function $E(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const eb=void 0!==X_?X_:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,tb=e=>!ME(e)&&e!==eb,nb=(rb="undefined"!=typeof Uint8Array&&OE(Uint8Array),e=>rb&&e instanceof rb);var rb;const ib=kE("HTMLFormElement"),ob=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),sb=kE("RegExp"),ab=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ZE(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},cb="abcdefghijklmnopqrstuvwxyz",lb="0123456789",db={DIGIT:lb,ALPHA:cb,ALPHA_DIGIT:cb+cb.toUpperCase()+lb},ub=kE("AsyncFunction"),hb=(pb="function"==typeof bE,fb=BE(eb.postMessage),pb?bE:fb?(mb="axios@".concat(Math.random()),gb=[],eb.addEventListener("message",(e=>{let{source:t,data:n}=e;t===eb&&n===mb&&gb.length&&gb.shift()()}),!1),e=>{gb.push(e),eb.postMessage(mb,"*")}):e=>setTimeout(e));var pb,fb,mb,gb;const vb=void 0!==RE?RE.bind(eb):"undefined"!=typeof process&&process.nextTick||hb;var yb={isArray:LE,isArrayBuffer:jE,isBuffer:function(e){return null!==e&&!ME(e)&&null!==e.constructor&&!ME(e.constructor)&&BE(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||BE(e.append)&&("formdata"===(t=NE(e))||"object"===t&&BE(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&jE(e.buffer),t},isString:UE,isNumber:FE,isBoolean:e=>!0===e||!1===e,isObject:VE,isPlainObject:WE,isReadableStream:qE,isRequest:XE,isResponse:JE,isHeaders:QE,isUndefined:ME,isDate:HE,isFile:zE,isBlob:GE,isRegExp:sb,isFunction:BE,isStream:e=>VE(e)&&BE(e.pipe),isURLSearchParams:KE,isTypedArray:nb,isFileList:YE,forEach:ZE,merge:function e(){const{caseless:t}=tb(this)&&this||{},n={},r=(r,i)=>{const o=t&&$E(n,i)||i;WE(n[o])&&WE(r)?n[o]=e(n[o],r):WE(r)?n[o]=e({},r):LE(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ZE(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ZE(t,((t,r)=>{n&&BE(t)?e[r]=IE(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e_(e)?e_(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&OE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:NE,kindOfTest:kE,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(LE(e))return e;let t=e.length;if(!FE(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ib,hasOwnProperty:ob,hasOwnProp:ob,reduceDescriptors:ab,freezeMethods:e=>{ab(e,((t,n)=>{if(BE(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];BE(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return LE(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:$E,global:eb,isContextDefined:tb,ALPHABET:db,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:db.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&BE(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(VE(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=LE(e)?[]:{};return ZE(e,((e,t)=>{const o=n(e,r+1);!ME(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ub,isThenable:e=>e&&(VE(e)||BE(e))&&BE(e.then)&&BE(e.catch),setImmediate:hb,asap:vb};function _b(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}yb.inherits(_b,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yb.toJSONObject(this.config),code:this.code,status:this.status}}});const Eb=_b.prototype,bb={};function wb(e){return yb.isPlainObject(e)||yb.isArray(e)}function Sb(e){return yb.endsWith(e,"[]")?e.slice(0,-2):e}function Ab(e,t,n){return e?e.concat(t).map((function(e,t){return e=Sb(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{bb[e]={value:e}})),Object.defineProperties(_b,bb),Object.defineProperty(Eb,"isAxiosError",{value:!0}),_b.from=(e,t,n,r,i,o)=>{const s=Object.create(Eb);return yb.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),_b.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const Cb=yb.toFlatObject(yb,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Tb(e,t,n){if(!yb.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=yb.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!yb.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&yb.isSpecCompliantForm(t);if(!yb.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(yb.isDate(e))return e.toISOString();if(!a&&yb.isBlob(e))throw new _b("Blob is not supported. Use a Buffer instead.");return yb.isArrayBuffer(e)||yb.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if(yb.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(yb.isArray(e)&&function(e){return yb.isArray(e)&&!e.some(wb)}(e)||(yb.isFileList(e)||yb.endsWith(n,"[]"))&&(a=yb.toArray(e)))return n=Sb(n),a.forEach((function(e,r){!yb.isUndefined(e)&&null!==e&&t.append(!0===s?Ab([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!wb(e)||(t.append(Ab(i,n,o),c(e)),!1)}const d=[],u=Object.assign(Cb,{defaultVisitor:l,convertValue:c,isVisitable:wb});if(!yb.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!yb.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),yb.forEach(n,(function(n,o){!0===(!(yb.isUndefined(n)||null===n)&&i.call(t,n,yb.isString(o)?e_(o).call(o):o,r,u))&&e(n,r?r.concat(o):[o])})),d.pop()}}(e),t}function Rb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ib(e,t){this._pairs=[],e&&Tb(e,this,t)}const xb=Ib.prototype;function Ob(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nb(e,t,n){if(!t)return e;const r=n&&n.encode||Ob;yb.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(o=i?i(t,n):yb.isURLSearchParams(t)?t.toString():new Ib(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}xb.append=function(e,t){this._pairs.push([e,t])},xb.toString=function(e){const t=e?function(t){return e.call(this,t,Rb)}:Rb;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Db=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yb.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},kb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pb={exports:{}},Lb=Dn,Mb=x,jb=en.f;Lb({target:"Object",stat:!0,forced:Object.defineProperty!==jb,sham:!Mb},{defineProperty:jb});var Ub=ee.Object,Bb=Pb.exports=function(e,t,n){return Ub.defineProperty(e,t,n)};Ub.defineProperty.sham&&(Bb.sham=!0);var Fb=r(Pb.exports),Vb=TypeError,Wb=ai,Hb=Zc,zb=$,Gb=mt("species"),Yb=Array,Kb=function(e){var t;return Wb(e)&&(t=e.constructor,(Hb(t)&&(t===Yb||Wb(t.prototype))||zb(t)&&null===(t=t[Gb]))&&(t=void 0)),void 0===t?Yb:t},qb=function(e,t){return new(Kb(e))(0===t?0:t)},Xb=i,Jb=me,Qb=mt("species"),Zb=function(e){return Jb>=51||!Xb((function(){var t=[];return(t.constructor={})[Qb]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},$b=Dn,ew=i,tw=ai,nw=$,rw=Ze,iw=Yn,ow=function(e){if(e>9007199254740991)throw Vb("Maximum allowed index exceeded");return e},sw=mm,aw=qb,cw=Zb,lw=me,dw=mt("isConcatSpreadable"),uw=lw>=51||!ew((function(){var e=[];return e[dw]=!1,e.concat()[0]!==e})),hw=function(e){if(!nw(e))return!1;var t=e[dw];return void 0!==t?!!t:tw(e)};$b({target:"Array",proto:!0,arity:1,forced:!uw||!cw("concat")},{concat:function(e){var t,n,r,i,o,s=rw(this),a=aw(s,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(hw(o=-1===t?s:arguments[t]))for(i=iw(o),ow(c+i),n=0;n<i;n++,c++)n in o&&sw(a,c,o[n]);else ow(c+1),sw(a,c++,o);return a.length=c,a}});var pw={},fw=w,mw=Q,gw=Wi.f,vw=al,yw="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];pw.f=function(e){return yw&&"Window"===fw(e)?function(e){try{return gw(e)}catch(e){return vw(yw)}}(e):gw(mw(e))};var _w={},Ew=mt;_w.f=Ew;var bw=ee,ww=tt,Sw=_w,Aw=en.f,Cw=function(e){var t=bw.Symbol||(bw.Symbol={});ww(t,e)||Aw(t,e,{value:Sw.f(e)})},Tw=D,Rw=oe,Iw=mt,xw=Ca,Ow=function(){var e=Rw("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=Iw("toPrimitive");t&&!t[r]&&xw(t,r,(function(e){return Tw(n,this)}),{arity:1})},Nw=$t,Dw=z,kw=Ze,Pw=Yn,Lw=qb,Mw=d([].push),jw=function(e){var t=1===e,n=2===e,r=3===e,i=4===e,o=6===e,s=7===e,a=5===e||o;return function(c,l,d,u){for(var h,p,f=kw(c),m=Dw(f),g=Pw(m),v=Nw(l,d),y=0,_=u||Lw,E=t?_(c,g):n||s?_(c,0):void 0;g>y;y++)if((a||y in m)&&(p=v(h=m[y],y,f),e))if(t)E[y]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:Mw(E,h)}else switch(e){case 4:return!1;case 7:Mw(E,h)}return o?-1:r||i?i:E}},Uw={forEach:jw(0),map:jw(1),filter:jw(2),some:jw(3),every:jw(4),find:jw(5),findIndex:jw(6),filterReject:jw(7)},Bw=Dn,Fw=p,Vw=D,Ww=d,Hw=x,zw=_e,Gw=i,Yw=tt,Kw=u,qw=sn,Xw=Q,Jw=Ct,Qw=Er,Zw=B,$w=Mo,eS=fo,tS=Wi,nS=pw,rS=$i,iS=I,oS=en,sS=uo,aS=k,cS=Ca,lS=Ac,dS=Xe,uS=Hi,hS=st,pS=mt,fS=_w,mS=Cw,gS=Ow,vS=za,yS=va,_S=Uw.forEach,ES=bi("hidden"),bS="Symbol",wS="prototype",SS=yS.set,AS=yS.getterFor(bS),CS=Object[wS],TS=Fw.Symbol,RS=TS&&TS[wS],IS=Fw.RangeError,xS=Fw.TypeError,OS=Fw.QObject,NS=iS.f,DS=oS.f,kS=nS.f,PS=aS.f,LS=Ww([].push),MS=dS("symbols"),jS=dS("op-symbols"),US=dS("wks"),BS=!OS||!OS[wS]||!OS[wS].findChild,FS=function(e,t,n){var r=NS(CS,t);r&&delete CS[t],DS(e,t,n),r&&e!==CS&&DS(CS,t,r)},VS=Hw&&Gw((function(){return 7!==$w(DS({},"a",{get:function(){return DS(this,"a",{value:7}).a}})).a}))?FS:DS,WS=function(e,t){var n=MS[e]=$w(RS);return SS(n,{type:bS,tag:e,description:t}),Hw||(n.description=t),n},HS=function(e,t,n){e===CS&&HS(jS,t,n),qw(e);var r=Jw(t);return qw(n),Yw(MS,r)?(n.enumerable?(Yw(e,ES)&&e[ES][r]&&(e[ES][r]=!1),n=$w(n,{enumerable:Zw(0,!1)})):(Yw(e,ES)||DS(e,ES,Zw(1,$w(null))),e[ES][r]=!0),VS(e,r,n)):DS(e,r,n)},zS=function(e,t){qw(e);var n=Xw(t),r=eS(n).concat(qS(n));return _S(r,(function(t){Hw&&!Vw(GS,n,t)||HS(e,t,n[t])})),e},GS=function(e){var t=Jw(e),n=Vw(PS,this,t);return!(this===CS&&Yw(MS,t)&&!Yw(jS,t))&&(!(n||!Yw(this,t)||!Yw(MS,t)||Yw(this,ES)&&this[ES][t])||n)},YS=function(e,t){var n=Xw(e),r=Jw(t);if(n!==CS||!Yw(MS,r)||Yw(jS,r)){var i=NS(n,r);return!i||!Yw(MS,r)||Yw(n,ES)&&n[ES][r]||(i.enumerable=!0),i}},KS=function(e){var t=kS(Xw(e)),n=[];return _S(t,(function(e){Yw(MS,e)||Yw(uS,e)||LS(n,e)})),n},qS=function(e){var t=e===CS,n=kS(t?jS:Xw(e)),r=[];return _S(n,(function(e){!Yw(MS,e)||t&&!Yw(CS,e)||LS(r,MS[e])})),r};zw||(TS=function(){if(Kw(RS,this))throw new xS("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Qw(arguments[0]):void 0,t=hS(e),n=function(e){var r=void 0===this?Fw:this;r===CS&&Vw(n,jS,e),Yw(r,ES)&&Yw(r[ES],t)&&(r[ES][t]=!1);var i=Zw(1,e);try{VS(r,t,i)}catch(e){if(!(e instanceof IS))throw e;FS(r,t,i)}};return Hw&&BS&&VS(CS,t,{configurable:!0,set:n}),WS(t,e)},cS(RS=TS[wS],"toString",(function(){return AS(this).tag})),cS(TS,"withoutSetter",(function(e){return WS(hS(e),e)})),aS.f=GS,oS.f=HS,sS.f=zS,iS.f=YS,tS.f=nS.f=KS,rS.f=qS,fS.f=function(e){return WS(pS(e),e)},Hw&&lS(RS,"description",{configurable:!0,get:function(){return AS(this).description}})),Bw({global:!0,constructor:!0,wrap:!0,forced:!zw,sham:!zw},{Symbol:TS}),_S(eS(US),(function(e){mS(e)})),Bw({target:bS,stat:!0,forced:!zw},{useSetter:function(){BS=!0},useSimple:function(){BS=!1}}),Bw({target:"Object",stat:!0,forced:!zw,sham:!Hw},{create:function(e,t){return void 0===t?$w(e):zS($w(e),t)},defineProperty:HS,defineProperties:zS,getOwnPropertyDescriptor:YS}),Bw({target:"Object",stat:!0,forced:!zw},{getOwnPropertyNames:KS}),gS(),vS(TS,bS),uS[ES]=!0;var XS=_e&&!!Symbol.for&&!!Symbol.keyFor,JS=Dn,QS=oe,ZS=tt,$S=Er,eA=Xe,tA=XS,nA=eA("string-to-symbol-registry"),rA=eA("symbol-to-string-registry");JS({target:"Symbol",stat:!0,forced:!tA},{for:function(e){var t=$S(e);if(ZS(nA,t))return nA[t];var n=QS("Symbol")(t);return nA[t]=n,rA[n]=t,n}});var iA=Dn,oA=tt,sA=Ce,aA=Re,cA=XS,lA=Xe("symbol-to-string-registry");iA({target:"Symbol",stat:!0,forced:!cA},{keyFor:function(e){if(!sA(e))throw new TypeError(aA(e)+" is not a symbol");if(oA(lA,e))return lA[e]}});var dA=ai,uA=R,hA=w,pA=Er,fA=d([].push),mA=Dn,gA=oe,vA=y,yA=D,_A=d,EA=i,bA=R,wA=Ce,SA=al,AA=function(e){if(uA(e))return e;if(dA(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?fA(n,i):"number"!=typeof i&&"Number"!==hA(i)&&"String"!==hA(i)||fA(n,pA(i))}var o=n.length,s=!0;return function(e,t){if(s)return s=!1,t;if(dA(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}},CA=_e,TA=String,RA=gA("JSON","stringify"),IA=_A(/./.exec),xA=_A("".charAt),OA=_A("".charCodeAt),NA=_A("".replace),DA=_A(1..toString),kA=/[\uD800-\uDFFF]/g,PA=/^[\uD800-\uDBFF]$/,LA=/^[\uDC00-\uDFFF]$/,MA=!CA||EA((function(){var e=gA("Symbol")("stringify detection");return"[null]"!==RA([e])||"{}"!==RA({a:e})||"{}"!==RA(Object(e))})),jA=EA((function(){return'"\\udf06\\ud834"'!==RA("\udf06\ud834")||'"\\udead"'!==RA("\udead")})),UA=function(e,t){var n=SA(arguments),r=AA(t);if(bA(r)||void 0!==e&&!wA(e))return n[1]=function(e,t){if(bA(r)&&(t=yA(r,this,TA(e),t)),!wA(t))return t},vA(RA,null,n)},BA=function(e,t,n){var r=xA(n,t-1),i=xA(n,t+1);return IA(PA,e)&&!IA(LA,i)||IA(LA,e)&&!IA(PA,r)?"\\u"+DA(OA(e,0),16):e};RA&&mA({target:"JSON",stat:!0,arity:3,forced:MA||jA},{stringify:function(e,t,n){var r=SA(arguments),i=vA(MA?UA:RA,null,r);return jA&&"string"==typeof i?NA(i,kA,BA):i}});var FA=$i,VA=Ze;Dn({target:"Object",stat:!0,forced:!_e||i((function(){FA.f(1)}))},{getOwnPropertySymbols:function(e){var t=FA.f;return t?t(VA(e)):[]}}),Cw("asyncIterator"),Cw("hasInstance"),Cw("isConcatSpreadable"),Cw("iterator"),Cw("match"),Cw("matchAll"),Cw("replace"),Cw("search"),Cw("species"),Cw("split");var WA=Ow;Cw("toPrimitive"),WA();var HA=oe,zA=za;Cw("toStringTag"),zA(HA("Symbol"),"Symbol"),Cw("unscopables"),za(p.JSON,"JSON",!0);var GA=ee.Symbol,YA=mt,KA=en.f,qA=YA("metadata"),XA=Function.prototype;void 0===XA[qA]&&KA(XA,qA,{value:null}),Cw("asyncDispose"),Cw("dispose"),Cw("metadata");var JA=GA,QA=d,ZA=oe("Symbol"),$A=ZA.keyFor,eC=QA(ZA.prototype.valueOf),tC=ZA.isRegisteredSymbol||function(e){try{return void 0!==$A(eC(e))}catch(e){return!1}};Dn({target:"Symbol",stat:!0},{isRegisteredSymbol:tC});for(var nC=Xe,rC=oe,iC=d,oC=Ce,sC=mt,aC=rC("Symbol"),cC=aC.isWellKnownSymbol,lC=rC("Object","getOwnPropertyNames"),dC=iC(aC.prototype.valueOf),uC=nC("wks"),hC=0,pC=lC(aC),fC=pC.length;hC<fC;hC++)try{var mC=pC[hC];oC(aC[mC])&&sC(mC)}catch(e){}var gC=function(e){if(cC&&cC(e))return!0;try{for(var t=dC(e),n=0,r=lC(uC),i=r.length;n<i;n++)if(uC[r[n]]==t)return!0}catch(e){}return!1};Dn({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:gC}),Cw("customMatcher"),Cw("observable"),Dn({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:tC}),Dn({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:gC}),Cw("matcher"),Cw("metadataKey"),Cw("patternMatch"),Cw("replaceAll");var vC=r(JA),yC=r(_w.f("iterator"));function _C(e){return _C="function"==typeof vC&&"symbol"==typeof yC?function(e){return typeof e}:function(e){return e&&"function"==typeof vC&&e.constructor===vC&&e!==vC.prototype?"symbol":typeof e},_C(e)}var EC=r(_w.f("toPrimitive"));function bC(e){var t=function(e,t){if("object"!==_C(e)||null===e)return e;var n=e[EC];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_C(t)?t:String(t)}function wC(e,t,n){return(t=bC(t))in e?Fb(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SC=r(Jf),AC={isBrowser:!0,classes:{URLSearchParams:void 0!==SC?SC:Ib,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const CC="undefined"!=typeof window&&"undefined"!=typeof document,TC="object"==typeof navigator&&navigator||void 0,RC=CC&&(!TC||["ReactNative","NativeScript","NS"].indexOf(TC.product)<0),IC="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,xC=CC&&window.location.href||"http://localhost";function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OC(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var DC=NC(NC({},Object.freeze({__proto__:null,hasBrowserEnv:CC,hasStandardBrowserEnv:RC,hasStandardBrowserWebWorkerEnv:IC,navigator:TC,origin:xC})),AC),kC=sn,PC=D,LC=tt,MC=u,jC=function(){var e=kC(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},UC=RegExp.prototype,BC=function(e){var t=e.flags;return void 0!==t||"flags"in UC||LC(e,"flags")||!MC(UC,e)?t:PC(jC,e)},FC=Vh.charAt,VC=D,WC=sn,HC=R,zC=w,GC=/./.exec,YC=TypeError,KC=Dn,qC=D,XC=C,JC=Qa,QC=fc,ZC=q,$C=zn,eT=Er,tT=sn,nT=G,rT=w,iT=sr,oT=BC,sT=Pe,aT=i,cT=sl,lT=function(e,t,n){return t+(n?FC(e,t).length:1)},dT=function(e,t){var n=e.exec;if(HC(n)){var r=VC(n,e,t);return null!==r&&WC(r),r}if("RegExp"===zC(e))return VC(GC,e,t);throw new YC("RegExp#exec called on incompatible receiver")},uT=va,hT=mt("matchAll"),pT="RegExp String",fT=pT+" Iterator",mT=uT.set,gT=uT.getterFor(fT),vT=TypeError,yT=XC("".indexOf),_T=XC("".matchAll),ET=!!_T&&!aT((function(){_T("a",/./)})),bT=JC((function(e,t,n,r){mT(this,{type:fT,regexp:e,string:t,global:n,unicode:r,done:!1})}),pT,(function(){var e=gT(this);if(e.done)return QC(void 0,!0);var t=e.regexp,n=e.string,r=dT(t,n);return null===r?(e.done=!0,QC(void 0,!0)):e.global?(""===eT(r[0])&&(t.lastIndex=lT(n,$C(t.lastIndex),e.unicode)),QC(r,!1)):(e.done=!0,QC(r,!1))})),wT=function(e){var t,n,r,i=tT(this),o=eT(e),s=cT(i,RegExp),a=eT(oT(i));return t=new s(s===RegExp?i.source:i,a),n=!!~yT(a,"g"),r=!!~yT(a,"u"),t.lastIndex=$C(i.lastIndex),new bT(t,o,n,r)};KC({target:"String",proto:!0,forced:ET},{matchAll:function(e){var t,n,r,i,o=ZC(this);if(nT(e)){if(ET)return _T(o,e)}else{if(iT(e)&&(t=eT(ZC(oT(e))),!~yT(t,"g")))throw new vT("`.matchAll` does not allow non-global regexes");if(ET)return _T(o,e);if(void 0===(r=sT(e,hT))&&"RegExp"===rT(e)&&(r=wT),r)return qC(r,e,o)}return n=eT(o),i=new RegExp(e,"g"),qC(wT,i,n)}});var ST=tr("String","matchAll"),AT=u,CT=ST,TT=String.prototype,RT=function(e){var t=e.matchAll;return"string"==typeof e||e===TT||AT(TT,e)&&t===TT.matchAll?CT:t},IT=r(RT);function xT(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;return o=!o&&yb.isArray(r)?r.length:o,a?(yb.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s):(r[o]&&yb.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&yb.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s)}if(yb.isFormData(e)&&yb.isFunction(e.entries)){const n={};return yb.forEachEntry(e,((e,r)=>{t(function(e){return IT(yb).call(yb,/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const OT={transitional:kb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=yb.isObject(e);if(i&&yb.isHTMLForm(e)&&(e=new FormData(e)),yb.isFormData(e))return r?JSON.stringify(xT(e)):e;if(yb.isArrayBuffer(e)||yb.isBuffer(e)||yb.isStream(e)||yb.isFile(e)||yb.isBlob(e)||yb.isReadableStream(e))return e;if(yb.isArrayBufferView(e))return e.buffer;if(yb.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Tb(e,new DC.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return DC.isNode&&yb.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=yb.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Tb(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(yb.isString(e))try{return(t||JSON.parse)(e),e_(yb).call(yb,e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||OT.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(yb.isResponse(e)||yb.isReadableStream(e))return e;if(e&&yb.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw _b.from(e,_b.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:DC.classes.FormData,Blob:DC.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yb.forEach(["delete","get","head","post","put","patch"],(e=>{OT.headers[e]={}}));var NT=OT;const DT=yb.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kT=Symbol("internals");function PT(e){var t;return e&&e_(t=String(e)).call(t).toLowerCase()}function LT(e){return!1===e||null==e?e:yb.isArray(e)?e.map(LT):String(e)}function MT(e,t,n,r,i){return yb.isFunction(r)?r.call(this,t,n):(i&&(t=n),yb.isString(t)?yb.isString(r)?-1!==t.indexOf(r):yb.isRegExp(r)?r.test(t):void 0:void 0)}class jT{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=PT(t);if(!i)throw new Error("header name must be a non-empty string");const o=yb.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=LT(e))}const o=(e,t)=>yb.forEach(e,((e,n)=>i(e,n,t)));if(yb.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(yb.isString(e)&&(e=e_(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e_(s=e).call(s)))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){var o,s;i=e.indexOf(":"),n=e_(o=e.substring(0,i)).call(o).toLowerCase(),r=e_(s=e.substring(i+1)).call(s),!n||t[n]&&DT[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(yb.isHeaders(e))for(const[a,c]of e.entries())i(c,a,n);else null!=e&&i(t,e,n);var s;return this}get(e,t){if(e=PT(e)){const n=yb.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(yb.isFunction(t))return t.call(this,e,n);if(yb.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=PT(e)){const n=yb.findKey(this,e);return!(!n||void 0===this[n]||t&&!MT(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=PT(e)){const i=yb.findKey(n,e);!i||t&&!MT(0,n[i],i,t)||(delete n[i],r=!0)}}return yb.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!MT(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return yb.forEach(this,((r,i)=>{var o;const s=yb.findKey(n,i);if(s)return t[s]=LT(r),void delete t[i];const a=e?function(e){return e_(e).call(e).toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):e_(o=String(i)).call(o);a!==i&&delete t[i],t[a]=LT(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return yb.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&yb.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[kT]=this[kT]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=PT(e);t[r]||(function(e,t){const n=yb.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return yb.isArray(e)?e.forEach(r):r(e),this}}jT.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yb.reduceDescriptors(jT.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),yb.freezeMethods(jT);var UT=jT;function BT(e,t){const n=this||NT,r=t||n,i=UT.from(r.headers);let o=r.data;return yb.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function FT(e){return!(!e||!e.__CANCEL__)}function VT(e,t,n){_b.call(this,null==e?"canceled":e,_b.ERR_CANCELED,t,n),this.name="CanceledError"}function WT(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new _b("Request failed with status code "+n.status,[_b.ERR_BAD_REQUEST,_b.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}yb.inherits(VT,_b,{__CANCEL__:!0});const HT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let d=s,u=0;for(;d!==o;)u+=n[d++],d%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const h=l&&c-l;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let n,r,i=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];t>=o?s(c,e):(n=c,r||(r=setTimeout((()=>{r=null,s(n)}),o-t)))},()=>n&&s(n)]}((n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,c=i(a);r=o,e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},zT=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},GT=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yb.asap((()=>e(...n)))};var YT=DC.hasStandardBrowserEnv?((e,t)=>n=>(n=new Hv(n,DC.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new Hv(DC.origin),DC.navigator&&/(msie|trident)/i.test(DC.navigator.userAgent)):()=>!0,KT=DC.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];yb.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),yb.isString(r)&&s.push("path="+r),yb.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function qT(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const JT=e=>e instanceof UT?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XT(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e):e;function QT(e,t){t=t||{};const n={};function r(e,t,n,r){return yb.isPlainObject(e)&&yb.isPlainObject(t)?yb.merge.call({caseless:r},e,t):yb.isPlainObject(t)?yb.merge({},t):yb.isArray(t)?t.slice():t}function i(e,t,n,i){return yb.isUndefined(t)?yb.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function o(e,t){if(!yb.isUndefined(t))return r(void 0,t)}function s(e,t){return yb.isUndefined(t)?yb.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>i(JT(e),JT(t),0,!0)};return yb.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);yb.isUndefined(s)&&o!==a||(n[r]=s)})),n}var ZT=e=>{const t=QT({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=UT.from(a),t.url=Nb(qT(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),yb.isFormData(r))if(DC.hasStandardBrowserEnv||DC.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e_(e).call(e))).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(DC.hasStandardBrowserEnv&&(i&&yb.isFunction(i)&&(i=i(t)),i||!1!==i&&YT(t.url))){const e=o&&s&&KT.read(s);e&&a.set(o,e)}return t},$T="undefined"!=typeof XMLHttpRequest&&function(e){return new rp((function(t,n){const r=ZT(e);let i=r.data;const o=UT.from(r.headers).normalize();let s,a,c,l,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=r;function f(){l&&l(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=UT.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());WT((function(e){t(e),f()}),(function(e){n(e),f()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new _b("Request aborted",_b.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new _b("Network Error",_b.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||kb;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new _b(t,i.clarifyTimeoutError?_b.ETIMEDOUT:_b.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&yb.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),yb.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),u&&"json"!==u&&(m.responseType=r.responseType),p&&([c,d]=HT(p,!0),m.addEventListener("progress",c)),h&&m.upload&&([a,l]=HT(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new VT(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===DC.protocols.indexOf(v)?n(new _b("Unsupported protocol "+v+":",_b.ERR_BAD_REQUEST,e)):m.send(i||null)}))},eR=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof _b?t:new VT(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new _b("timeout ".concat(t," of ms exceeded"),_b.ETIMEDOUT))}),t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>yb.asap(s),a}},tR=r(np),nR=_w.f("asyncIterator"),rR=r(nR);function iR(e,t){this.v=e,this.k=t}function oR(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,a=s instanceof iR;tR.resolve(a?s.v:s).then((function(n){if(a){var c="return"===t?"return":"next";if(!s.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new tR((function(o,s){var a={key:e,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function sR(e){return function(){return new oR(e.apply(this,arguments))}}function aR(e){return new iR(e,0)}function cR(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new iR(r=new tR((function(n){n(e[t](r))})),1)}}return t[void 0!==vC&&yC||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}oR.prototype["function"==typeof vC&&rR||"@@asyncIterator"]=function(){return this},oR.prototype.next=function(e){return this._invoke("next",e)},oR.prototype.throw=function(e){return this._invoke("throw",e)},oR.prototype.return=function(e){return this._invoke("return",e)};var lR=r(nR);function dR(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=lR,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new uR(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function uR(e){function t(e){if(Object(e)!==e)return rp.reject(new TypeError(e+" is not an object."));var t=e.done;return rp.resolve(e.value).then((function(e){return{value:e,done:t}}))}return uR=function(e){this.s=e,this.n=e.next},uR.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?rp.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?rp.reject(e):t(n.apply(this.s,arguments))}},new uR(e)}const hR=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},pR=function(){var e=sR((function*(e,t){var n,r=!1,i=!1;try{for(var o,s=dR(fR(e));r=!(o=yield aR(s.next())).done;r=!1){const e=o.value;yield*cR(dR(hR(e,t)))}}catch(e){i=!0,n=e}finally{try{r&&null!=s.return&&(yield aR(s.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),fR=function(){var e=sR((function*(e){if(e[lR])return void(yield*cR(dR(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield aR(t.read());if(e)break;yield n}}finally{yield aR(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),mR=(e,t,n,r)=>{const i=pR(e,t);let o,s=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw a(e),e}},cancel:e=>(a(e),i.return())},{highWaterMark:2})};function gR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gR(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const yR="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,_R=yR&&"function"==typeof ReadableStream,ER=yR&&("function"==typeof TextEncoder?(bR=new TextEncoder,e=>bR.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var bR;const wR=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(e){return!1}},SR=_R&&wR((()=>{let e=!1;const t=new Request(DC.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),AR=_R&&wR((()=>yb.isReadableStream(new Response("").body))),CR={stream:AR&&(e=>e.body)};var TR;yR&&(TR=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!CR[e]&&(CR[e]=yb.isFunction(TR[e])?t=>t[e]():(t,n)=>{throw new _b("Response type '".concat(e,"' is not supported"),_b.ERR_NOT_SUPPORT,n)})})));const RR=async(e,t)=>{const n=yb.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(yb.isBlob(e))return e.size;if(yb.isSpecCompliantForm(e)){const t=new Request(DC.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return yb.isArrayBufferView(e)||yb.isArrayBuffer(e)?e.byteLength:(yb.isURLSearchParams(e)&&(e+=""),yb.isString(e)?(await ER(e)).byteLength:void 0)})(t):n};var IR=yR&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:d,withCredentials:u="same-origin",fetchOptions:h}=ZT(e);l=l?(l+"").toLowerCase():"text";let p,f=eR([i,o&&o.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&SR&&"get"!==n&&"head"!==n&&0!==(g=await RR(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(yb.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=zT(g,HT(GT(c)));r=mR(n.body,65536,e,t)}}yb.isString(u)||(u=u?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,vR(vR({},h),{},{signal:f,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:i?u:void 0}));let o=await fetch(p);const s=AR&&("stream"===l||"response"===l);if(AR&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=yb.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&zT(t,HT(GT(a),!0))||[];o=new Response(mR(o.body,65536,n,(()=>{r&&r(),m&&m()})),e)}l=l||"text";let v=await CR[yb.findKey(CR,l)||"text"](o,e);return!s&&m&&m(),await new rp(((t,n)=>{WT(t,n,{data:v,headers:UT.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new _b("Network Error",_b.ERR_NETWORK,e,p),{cause:t.cause||t});throw _b.from(t,t&&t.code,e,p)}});const xR={http:null,xhr:$T,fetch:IR};yb.forEach(xR,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const OR=e=>"- ".concat(e),NR=e=>yb.isFunction(e)||null===e||!1===e;var DR=e=>{e=yb.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!NR(n)&&(r=xR[(t=String(n)).toLowerCase()],void 0===r))throw new _b("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new _b("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(OR).join("\n"):" "+OR(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function kR(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new VT(null,e)}function PR(e){return kR(e),e.headers=UT.from(e.headers),e.data=BT.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),DR(e.adapter||NT.adapter)(e).then((function(t){return kR(e),t.data=BT.call(e,e.transformResponse,t),t.headers=UT.from(t.headers),t}),(function(t){return FT(t)||(kR(e),t&&t.response&&(t.response.data=BT.call(e,e.transformResponse,t.response),t.response.headers=UT.from(t.response.headers))),rp.reject(t)}))}const LR="1.7.9",MR={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{MR[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const jR={};MR.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new _b(r(i," has been removed"+(t?" in "+t:"")),_b.ERR_DEPRECATED);return t&&!jR[i]&&(jR[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},MR.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};var UR={assertOptions:function(e,t,n){if("object"!=typeof e)throw new _b("options must be an object",_b.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new _b("option "+o+" must be "+n,_b.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new _b("Unknown option "+o,_b.ERR_BAD_OPTION)}},validators:MR};const BR=UR.validators;let FR=class{constructor(e){this.defaults=e,this.interceptors={request:new Db,response:new Db}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=QT(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&UR.assertOptions(n,{silentJSONParsing:BR.transitional(BR.boolean),forcedJSONParsing:BR.transitional(BR.boolean),clarifyTimeoutError:BR.transitional(BR.boolean)},!1),null!=r&&(yb.isFunction(r)?t.paramsSerializer={serialize:r}:UR.assertOptions(r,{encode:BR.function,serialize:BR.function},!0)),UR.assertOptions(t,{baseUrl:BR.spelling("baseURL"),withXsrfToken:BR.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&yb.merge(i.common,i[t.method]);i&&yb.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=UT.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!a){const e=[PR.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),d=e.length,l=rp.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=s.length;let h=t;for(u=0;u<d;){const t=s[u++],n=s[u++];try{h=t(h)}catch(e){n.call(this,e);break}}try{l=PR.call(this,h)}catch(e){return rp.reject(e)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return Nb(qT((e=QT(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};yb.forEach(["delete","get","head","options"],(function(e){FR.prototype[e]=function(t,n){return this.request(QT(n||{},{method:e,url:t,data:(n||{}).data}))}})),yb.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(QT(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}FR.prototype[e]=t(),FR.prototype[e+"Form"]=t(!0)}));var VR=FR;class WR{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new rp((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new rp((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new VT(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new WR((function(t){e=t})),cancel:e}}}var HR=WR;const zR={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zR).forEach((e=>{let[t,n]=e;zR[n]=t}));var GR=zR;const YR=function e(t){const n=new VR(t),r=IE(VR.prototype.request,n);return yb.extend(r,VR.prototype,n,{allOwnKeys:!0}),yb.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(QT(t,n))},r}(NT);YR.Axios=VR,YR.CanceledError=VT,YR.CancelToken=HR,YR.isCancel=FT,YR.VERSION=LR,YR.toFormData=Tb,YR.AxiosError=_b,YR.Cancel=YR.CanceledError,YR.all=function(e){return rp.all(e)},YR.spread=function(e){return function(t){return e.apply(null,t)}},YR.isAxiosError=function(e){return yb.isObject(e)&&!0===e.isAxiosError},YR.mergeConfig=QT,YR.AxiosHeaders=UT,YR.formToJSON=e=>xT(yb.isHTMLForm(e)?new FormData(e):e),YR.getAdapter=DR,YR.HttpStatusCode=GR,YR.default=YR;var KR=YR;const qR=()=>{};function XR(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:qR};return e.promise=new rp(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const JR=new Map,QR=new Map,ZR=new Map;let $R=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),eI=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({});const tI=new Q_;let nI=tI.getResult(),rI=null;function iI(e){if(!rI){e&&tI.setUA(e),nI=tI.getResult();const t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return eI.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return eI.CHROME;case"Safari":case"Mobile Safari":return eI.SAFARI;case"Edge":return eI.EDGE;case"Firefox":return eI.FIREFOX;case"QQ":case"QQBrowser":return eI.QQ;case"Opera":return eI.OPERA;case"WeChat":return eI.WECHAT;default:return e.browser.name||""}}(nI),n=oI(nI),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(nI),i=nI.os.version,o=oI(nI,!1),s=nI.device.type;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:s};rI={name:t,version:n,os:r,osVersion:i,browserVersion:o,deviceType:s}}return rI}function oI(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",n?t.split(".")[0]:t}function sI(){return iI().os}function aI(){const e=iI();return"".concat(e.os," ").concat(e.osVersion)}function cI(){const e=iI();return!!("WebKit"===nI.engine.name&&e.os===$R.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==eI.SAFARI||pI()&&e.name!==eI.SAFARI)}function lI(){return iI().name===eI.CHROME}function dI(){return iI().name===eI.SAFARI}function uI(){return iI().name===eI.EDGE}function hI(){return iI().name===eI.FIREFOX}function pI(){return iI().os===$R.IOS}function fI(e){const t=iI();return!(t.name!==eI.CHROME||!t.osVersion)&&Number(t.version)>=e}function mI(e){const t=iI();return!(t.name!==eI.CHROME||!t.osVersion)&&Number(t.version)<e}function gI(e,t,n){const r=iI();return!(r.name!==e||!r.osVersion)&&(n?Number(r.version)>=t&&Number(r.version)<=n:Number(r.version)===t)}function vI(e){const t=iI();return!(t.name!==eI.EDGE||!t.osVersion)&&Number(t.version)>=e}function yI(e){const t=iI();return!(t.name!==eI.SAFARI||!t.osVersion)&&Number(t.version)>=e}function _I(e,t,n){const r=iI();if(r.os!==$R.IOS||!r.osVersion)return!1;const i=r.osVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function EI(e,t,n){const r=iI();if(r.name!==eI.SAFARI||!r.osVersion||!r.browserVersion)return!1;const i=r.browserVersion.split(".");return n?t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e:t?Number(i[0])===e&&Number(i[1])<=t||Number(i[0])<e:Number(i[0])<=e}function bI(e){const t=iI();return!(t.name!==eI.OPERA||!t.osVersion)&&Number(t.version)>=e}function wI(){const e=iI();if(e.os!==$R.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function SI(){const e=iI();if(e.os!==$R.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function AI(){const e=iI();if(e.os!==$R.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function CI(){const e=iI();if(e.os!==$R.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function TI(){return dI()&&navigator.maxTouchPoints>0}function RI(){return iI().name===eI.WECHAT}function II(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function xI(){const e=sI();return function(){const{deviceType:e}=iI();return"mobile"===e||"tablet"===e}()||e===$R.ANDROID||e===$R.IOS||e===$R.HARMONY_OS}function OI(){const e=iI();return e.name!==eI.EDGE&&e.name!==eI.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function NI(){return sI()===$R.ANDROID}function DI(){const e=iI();return NI()&&(e.name===eI.CHROME||e.name===eI.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function kI(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PI(Object(n),!0).forEach((function(t){kI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let MI=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({});class jI extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),kI(this,"code",void 0),kI(this,"message",void 0),kI(this,"data",void 0),kI(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"".concat(this.message,"\ndata: ").concat(JSON.stringify(this.data)):this.message}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}}function UI(e,t){if("boolean"!=typeof e)throw new jI(MI.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function BI(e,t,n){if(!Lr(n).call(n,e))throw new jI(MI.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function FI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new jI(MI.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function VI(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new jI(MI.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&FI(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&FI(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&FI(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&FI(e.ideal,"".concat(t,".ideal"),1,1/0)}else FI(e,t,1,1/0)}function WI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new jI(MI.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!GI(e,n,r,i))throw new jI(MI.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function HI(e,t){if(!Array.isArray(e))throw new jI(MI.INVALID_PARAMS,"".concat(t," should be an array"))}function zI(e){return null==e}function GI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}var YI=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(YI||{}),KI=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(KI||{});const qI=new class{constructor(){kI(this,"_clientSize",null),kI(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),kI(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),kI(this,"getStyle",(e=>window.getComputedStyle(e,null))),kI(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:o,opacity:s,filter:a}=r;return("none"===i||Lr(t=["hidden","collapse"]).call(t,o)||Number(s)<.1)&&(n=!1),!!n&&(a&&a.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Lr(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})),n)})),kI(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,r=!0;const i=e=>t(e);let o=e;for(;o&&r;)i(o)||(n=!1,r=!1),o=o.parentElement,o||(r=!1);return n})),kI(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),kI(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:r,right:i,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}})),kI(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),kI(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),kI(this,"checkCoverForAPoint",((e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n})),kI(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,o=t/6,s=[],a=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*a+(0===c?.1:4===c?(i*c*a-1e5)/a:i*c)*a)/a,l=(r*a+(0===e?.1:4===e?(o*e*a-1e5)/a:o*e)*a)/a;s.push({x:t,y:l})}return[...s]})),kI(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),kI(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),kI(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:o,clientMin:s}=this._clientSize;let a,c,l,d;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;d=r<i?r:i;const u=c-a,h=d-l;return this.checkSizeIsVisible(u,h,s)})),kI(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),kI(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(YI.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(YI.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(YI.SIZE)}}return this.returnHiddenResult(YI.STYLE)}return this.returnHiddenResult(KI.UNMOUNTED)}return this.returnHiddenResult(KI.INVALID_HTML_ELEMENT)})),kI(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function XI(e){return(new TextEncoder).encode(e)}const JI=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},QI=async e=>function(e,t){let n="";return new Uint8Array(e).forEach((e=>{n+=e.toString(t).padStart(2,"0")})),n}(await crypto.subtle.digest("SHA-256",XI(e)),16);let ZI=class{constructor(){kI(this,"_events",{}),kI(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){const n=t[o];n.once&&this.off(e,n.listener),n.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(t){console.error("safeEmit event:".concat(e," error ").concat(null==t?void 0:t.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}},$I=null;function ex(){if($I)return $I;if(window.electron)return $I=window.electron;if(!window.require)return null;try{return $I=window.require("electron"),$I}catch(e){return null}}let tx=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e.REPUB_AFTER_PC_CONNECTED="repubAfterPCConnected",e}({}),nx=function(e){return e.TRACER="tracer",e}({});function rx(e){return FI(e.timeout,"config.timeout",0,1e5),FI(e.timeoutFactor,"config.timeoutFactor",0,100,!1),FI(e.maxRetryCount,"config.maxRetryConfig",0,1/0),FI(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let ix=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),ox=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function sx(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function ax(e){return WI(e.turnServerURL,"turnServerURL"),WI(e.username,"username"),WI(e.password,"password"),e.udpport&&FI(e.udpport,"udpport",1,99999,!0),e.forceturn&&UI(e.forceturn,"forceturn"),e.security&&UI(e.security,"security"),e.tcpport&&FI(e.tcpport,"tcpport",1,99999,!0),!0}function cx(e){return void 0!==e.level&&BI(e.level,"level",[1,2,3]),void 0!==e.delay&&FI(e.delay,"delay",0,3e3,!0),!0}let lx=function(e){return e.PEERCONNECTION_STATE_CHANGE="peerconnection-state-change",e.AUDIO_METADATA="audio-metadata",e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),dx=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e.REGIONAL_DISTRIBUTION="REGIONAL_DISTRIBUTION",e}({}),ux=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),hx=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function px(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?rp.reject(new jI(MI.UNEXPECTED_ERROR,"can not emit promise")):new rp(((n,i)=>{e.emit(t,...r,n,i)}))}function fx(e,t){if(0===e.getListeners(t).length)return rp.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return px(e,t,...r)}function mx(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return gx(e,t,...r)}function gx(e,t){let n=null,r=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];if(e.emit(t,...o,(e=>{n=e}),(e=>{r=e})),null!==r)throw r;if(null===n)throw new jI(MI.UNEXPECTED_ERROR,"handler is not sync");return n}const vx=new class extends ZI{set networkState(e){this.emit(hx.NETWORK_STATE_CHANGE,e,this._networkState),e===ux.ONLINE?this.emit(hx.ONLINE):e===ux.OFFLINE&&(this.onlineWaiter=new rp((e=>{this.once(hx.ONLINE,(()=>{this.onlineWaiter=void 0,e(ux.ONLINE)}))})),this.emit(hx.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===ux.ONLINE}constructor(){super(),kI(this,"_moduleName","network-indicator"),kI(this,"_networkState",ux.ONLINE),kI(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=ux.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=ux.OFFLINE}))}};function yx(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function _x(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function Ex(e){void 0!==rp?rp.resolve().then(e):setTimeout(e,0)}function bx(e){return JSON.parse(JSON.stringify(e))}function wx(e){try{return bx(e)}catch(t){return e}}const Sx={};function Ax(e,t){Sx[t]||(Sx[t]=!0,e())}function Cx(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function Tx(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function Rx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=(new TextEncoder).encode(e);if(n.length>t)n=n.slice(0,t);else if(n.length<t){const e=new Uint8Array(t);e.set(n),n=e}return n}function Ix(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=oi(t).call(t,((e,t)=>e+t.length),0),i=new Uint8Array(new ArrayBuffer(r));let o=0;return t.forEach((e=>{i.set(e,o),o+=e.length})),i}function xx(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function Ox(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?xx(e):e.size})),t+138}function Nx(e){const t=new jI(MI.TIMEOUT,"timeout");return new rp(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function Dx(e){return new rp((t=>{window.setTimeout(t,e)}))}function kx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+kx(e-n.length,"")}function Px(){return kx(32,"").toUpperCase()}const Lx=()=>{},Mx=new class{constructor(){kI(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var i=arguments.length,o=new Array(i>4?i-4:0),s=4;s<i;s++)o[s-4]=arguments[s];if(this.fnMap.has(t)){const i=this.fnMap.get(t);if(i.threshold!==n){i.fn(...i.args),clearTimeout(i.timer);const s=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:s,args:o,skipFn:r})}else i.skipFn&&i.skipFn(...i.args),this.fnMap.set(t,LI(LI({},i),{},{fn:e,args:o,skipFn:r}))}else{const i=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:i,args:o,skipFn:r})}}},jx=Mx.throttleByKey.bind(Mx);function Ux(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function Bx(e,t){if(!Ux(e)||!Ux(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=Bx(e[r],t[r]);return n}{const n=LI({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=Bx(e[r],t[r]):n[r]=t[r]);return n}}function Fx(e,t){let n=[0];if(t&&(n=new Array(t).fill(0)),0===e)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,!t||r!==t););return n}function Vx(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function Wx(e){const t="0123456789abcdef";function n(e){let n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,s){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,s)),o),n)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}const l=function(e){let t;const n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e);let d,u,h,p,f,m=1732584193,g=-271733879,v=-1732584194,y=271733878;for(d=0;d<l.length;d+=16)u=m,h=g,p=v,f=y,m=o(m,g,v,y,l[d+0],7,-680876936),y=o(y,m,g,v,l[d+1],12,-389564586),v=o(v,y,m,g,l[d+2],17,606105819),g=o(g,v,y,m,l[d+3],22,-1044525330),m=o(m,g,v,y,l[d+4],7,-176418897),y=o(y,m,g,v,l[d+5],12,1200080426),v=o(v,y,m,g,l[d+6],17,-1473231341),g=o(g,v,y,m,l[d+7],22,-45705983),m=o(m,g,v,y,l[d+8],7,1770035416),y=o(y,m,g,v,l[d+9],12,-1958414417),v=o(v,y,m,g,l[d+10],17,-42063),g=o(g,v,y,m,l[d+11],22,-1990404162),m=o(m,g,v,y,l[d+12],7,1804603682),y=o(y,m,g,v,l[d+13],12,-40341101),v=o(v,y,m,g,l[d+14],17,-1502002290),g=o(g,v,y,m,l[d+15],22,1236535329),m=s(m,g,v,y,l[d+1],5,-165796510),y=s(y,m,g,v,l[d+6],9,-1069501632),v=s(v,y,m,g,l[d+11],14,643717713),g=s(g,v,y,m,l[d+0],20,-373897302),m=s(m,g,v,y,l[d+5],5,-701558691),y=s(y,m,g,v,l[d+10],9,38016083),v=s(v,y,m,g,l[d+15],14,-660478335),g=s(g,v,y,m,l[d+4],20,-405537848),m=s(m,g,v,y,l[d+9],5,568446438),y=s(y,m,g,v,l[d+14],9,-1019803690),v=s(v,y,m,g,l[d+3],14,-187363961),g=s(g,v,y,m,l[d+8],20,1163531501),m=s(m,g,v,y,l[d+13],5,-1444681467),y=s(y,m,g,v,l[d+2],9,-51403784),v=s(v,y,m,g,l[d+7],14,1735328473),g=s(g,v,y,m,l[d+12],20,-1926607734),m=a(m,g,v,y,l[d+5],4,-378558),y=a(y,m,g,v,l[d+8],11,-2022574463),v=a(v,y,m,g,l[d+11],16,1839030562),g=a(g,v,y,m,l[d+14],23,-35309556),m=a(m,g,v,y,l[d+1],4,-1530992060),y=a(y,m,g,v,l[d+4],11,1272893353),v=a(v,y,m,g,l[d+7],16,-155497632),g=a(g,v,y,m,l[d+10],23,-1094730640),m=a(m,g,v,y,l[d+13],4,681279174),y=a(y,m,g,v,l[d+0],11,-358537222),v=a(v,y,m,g,l[d+3],16,-722521979),g=a(g,v,y,m,l[d+6],23,76029189),m=a(m,g,v,y,l[d+9],4,-640364487),y=a(y,m,g,v,l[d+12],11,-421815835),v=a(v,y,m,g,l[d+15],16,530742520),g=a(g,v,y,m,l[d+2],23,-995338651),m=c(m,g,v,y,l[d+0],6,-198630844),y=c(y,m,g,v,l[d+7],10,1126891415),v=c(v,y,m,g,l[d+14],15,-1416354905),g=c(g,v,y,m,l[d+5],21,-57434055),m=c(m,g,v,y,l[d+12],6,1700485571),y=c(y,m,g,v,l[d+3],10,-1894986606),v=c(v,y,m,g,l[d+10],15,-1051523),g=c(g,v,y,m,l[d+1],21,-2054922799),m=c(m,g,v,y,l[d+8],6,1873313359),y=c(y,m,g,v,l[d+15],10,-30611744),v=c(v,y,m,g,l[d+6],15,-1560198380),g=c(g,v,y,m,l[d+13],21,1309151649),m=c(m,g,v,y,l[d+4],6,-145523070),y=c(y,m,g,v,l[d+11],10,-1120210379),v=c(v,y,m,g,l[d+2],15,718787259),g=c(g,v,y,m,l[d+9],21,-343485551),m=r(m,u),g=r(g,h),v=r(v,p),y=r(y,f);return n(m)+n(g)+n(v)+n(y)}let Hx=1,zx=console,Gx=class{static setLogger(e){zx=e}constructor(e,t){kI(this,"id",void 0),kI(this,"lockingPromise",rp.resolve()),kI(this,"locks",0),kI(this,"name",""),kI(this,"lockId",void 0),this.lockId=Hx++,e&&(this.name=e),t&&(this.id=t),this.logger("created")}logger(e,t){const n=(this.id?"[".concat(this.id,"]"):"")+"[lock-".concat(this.name,"-").concat(this.lockId,"]"),r="created"===e?"is ".concat(e,"."):"is ".concat(e,", current queue ").concat(this.locks,". ").concat(null!=t?t:"");zx.debug("".concat(n," ").concat(r))}setId(e){this.id=e}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,this.logger("locked",e);const n=new rp((n=>{t=()=>{this.locks-=1,this.logger("unlocked",e),n()}})),r=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),r}};function Yx(e,t){return function(n,r,i){const o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const i=await n.lock("From ".concat(e,".").concat(r));try{for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return await o.apply(this,a)}finally{i()}},i}}const Kx={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function qx(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function Xx(e,t,n,r){const i=Object.assign({},Kx,r);let o=i.timeout;const s=async()=>{await function(e){return new rp((t=>{window.setTimeout(t,e)}))}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)};let a=!1;const c=new rp((async(r,o)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(a)return o(new jI(MI.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return r(n);if(c+1===i.maxRetryCount)return r(n);await s()}catch(e){if(!n(e,c))return o(e);if(c+1===i.maxRetryCount)return o(e);await s()}}}));return c.cancel=()=>a=!0,c}let Jx,Qx=class{constructor(e){kI(this,"input",[]),kI(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:oi(e=this.input).call(e,((e,t)=>e+t))/this.input.length}},Zx=0,$x=0;function eO(e,t,n,r){return new rp(((i,o)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),Zx+=xx(t.data)):n&&(t.data.size?Zx+=t.data.size:t.data instanceof FormData?Zx+=Ox(t.data):Zx+=xx(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,KR.request(t).then((e=>{"string"==typeof e.data?$x+=xx(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?$x+=e.data.byteLength:$x+=xx(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{KR.isCancel(e)?o(new jI(MI.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new jI(MI.NETWORK_TIMEOUT,e.message)):e.response?o(new jI(MI.NETWORK_RESPONSE_ERROR,e.response.status)):o(new jI(MI.NETWORK_ERROR,e.message))}))}))}async function tO(e,t){const n=new Blob([t.data],{type:"buffer"});return await eO(e,LI(LI({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const nO=()=>void 0!==window.isSecureContext;function rO(e){if(Array.isArray(e))return e.map((e=>e));if(!iO(e))return e;const t={};for(const n in e){const r=e[n];iO(r)||Array.isArray(r)?t[n]=rO(r):t[n]=r}return t}function iO(e){return!("object"!=typeof e||Array.isArray(e)||!e)}let oO=class{constructor(e){kI(this,"input",[]),kI(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}};const sO={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},aO={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:sO,remoteCandidate:sO},updateInterval:0},cO={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0,packetsDiscarded:0,framesAssembledFromMultiplePackets:0,totalProcessingDelay:0,avgDecodeMs:0,avgFramesAssembledFromMultiplePacketsMs:0,avgProcessingDelayMs:0,avgInterFrameDelayMs:0,totalAssemblyTime:0},lO={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},dO={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},uO={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};let hO=class{constructor(e,t){kI(this,"onFirstVideoReceived",void 0),kI(this,"onFirstVideoDecoded",void 0),kI(this,"onFirstAudioReceived",void 0),kI(this,"onFirstVideoDecodedTimeout",void 0),kI(this,"onFirstAudioDecoded",void 0),kI(this,"onSelectedLocalCandidateChanged",void 0),kI(this,"onSelectedRemoteCandidateChanged",void 0),kI(this,"videoIsReady",!1),kI(this,"videoIsReady2",{}),kI(this,"pc",void 0),kI(this,"options",void 0),kI(this,"intervalTimer",void 0),kI(this,"stats",rO(aO)),kI(this,"isFirstVideoReceived",{}),kI(this,"isFirstVideoDecoded",{}),kI(this,"isFirstAudioReceived",{}),kI(this,"isFirstAudioDecoded",{}),kI(this,"isFirstVideoDecodedTimeout",{}),kI(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new rp((e=>{e({local:LI({},sO),remote:LI({},sO)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let r=0,i=0,o=0,s=0;for(const a of n)e[a].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][a][n]||!this.lossRateWindowStats[0][a][n])return;const c=this.lossRateWindowStats[t-1][a][n].packets-this.lossRateWindowStats[0][a][n].packets,l=this.lossRateWindowStats[t-1][a][n].packetsLost-this.lossRateWindowStats[0][a][n].packetsLost;"videoSend"===a||"audioSend"===a?(r+=c,o+=l):(i+=c,s+=l),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||l<=0?0:l/(c+l)}));e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||s<=0?0:s/(i+s)}},pO=class extends hO{constructor(){super(...arguments),kI(this,"_stats",aO),kI(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=rO(aO);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const r=t.find((e=>"VideoBwe"===e.type));r&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Lr(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=rO(lO);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=rO(cO),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const r=n.stats,i=Date.now()-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:LI({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=rO(uO);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=rO(dO);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new rp(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}},fO=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({}),mO=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),gO=function(e){return e[e.new=0]="new",e[e.connecting=1]="connecting",e[e.connected=2]="connected",e[e.disconnected=3]="disconnected",e[e.failed=4]="failed",e[e.closed=5]="closed",e}({}),vO=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({});var yO=function(e){return e[e.kNone=1]="kNone",e[e.kMillisecondsFromSeconds=1e3]="kMillisecondsFromSeconds",e[e.kBytesToBits=8]="kBytesToBits",e}(yO||{});function _O(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yO.kNone;if(!t)return;const o=Number(t[n]);if("number"!=typeof o)return;const s=Number(t[r]);if("number"!=typeof s)return;if(!e)return s?o/s*i:void 0;const a=Number(e[n]);if("number"!=typeof a)return;const c=Number(e[r]);if("number"!=typeof c)return;const l=s-c;return l?(o-a)/l*i:void 0}let EO=class extends hO{constructor(){super(...arguments),kI(this,"_stats",aO),kI(this,"report",void 0),kI(this,"lastDecodeVideoReceiverStats",new Map),kI(this,"lastVideoFramesRecv",new Map),kI(this,"lastVideoFramesSent",new Map),kI(this,"lastVideoFramesDecode",new Map),kI(this,"lastVideoFramesOutput",new Map),kI(this,"lastVideoJBDelay",new Map),kI(this,"lastAudioJBDelay",new Map),kI(this,"mediaBytesSent",new Map),kI(this,"mediaBytesRetransmit",new Map),kI(this,"mediaBytesTargetEncode",new Map),kI(this,"lastDecodeAudioReceiverStats",new Map),kI(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=rO(aO),this.report.forEach((e=>{switch(e.type){case vO.OUTBOUND:case vO.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,r=!t&&!("frameWidth"in e);e.type===vO.OUTBOUND?"audio"===t||r?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===vO.INBOUND&&("audio"===t||r?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case vO.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case vO.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.updateInterval=Date.now()-this.stats.timestamp,this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:LI({},sO),remote:LI({},sO)};return e.forEach((n=>{let r;if(n.type===vO.TRANSPORT&&(r=e.get(n.selectedCandidatePairId)),n.type===vO.CANDIDATE_PAIR&&n.selected&&(r=n),r){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){const i=e.get(r.localCandidateId);i&&n(t.local,i)}if(r.remoteCandidateId){const i=e.get(r.remoteCandidateId);i&&n(t.remote,i)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===vO.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===vO.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===vO.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(LI({},t),LI({},this.stats.selectedCandidatePair.localCandidate)),e.type===vO.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(LI({},t),LI({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=rO(uO),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,t.retransmittedBytesReceived=e.retransmittedBytesReceived,t.retransmittedPacketsReceived=e.retransmittedPacketsReceived,t.totalProcessingDelay=e.totalProcessingDelay,t.jitterBufferEmittedCount=e.jitterBufferEmittedCount;const n=this.lastDecodeAudioReceiverStats.get(t.ssrc);t.avgProcessingDelayMs=_O(n,t,"totalProcessingDelay","jitterBufferEmittedCount",yO.kMillisecondsFromSeconds),this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples),this.lastDecodeAudioReceiverStats.set(t.ssrc,LI({},t))}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=rO(cO),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration,t.totalProcessingDelay=e.totalProcessingDelay,t.packetsDiscarded=e.packetsDiscarded,t.framesAssembledFromMultiplePackets=e.framesAssembledFromMultiplePackets,t.totalAssemblyTime=e.totalAssemblyTime,t.keyFramesDecoded=e.keyFramesDecoded,t.retransmittedBytesReceived=e.retransmittedBytesReceived,t.retransmittedPacketsReceived=e.retransmittedPacketsReceived;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const r=n.stats,i=o-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&i>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=i,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<r.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime,t.avgDecodeMs=_O(null==n?void 0:n.stats,t,"decodeMs","framesDecodeCount")),t.avgProcessingDelayMs=_O(null==n?void 0:n.stats,t,"totalProcessingDelay","framesDecodeCount",yO.kMillisecondsFromSeconds),t.avgFramesAssembledFromMultiplePacketsMs=_O(null==n?void 0:n.stats,t,"totalAssemblyTime","framesAssembledFromMultiplePackets",yO.kMillisecondsFromSeconds),t.avgInterFrameDelayMs=_O(null==n?void 0:n.stats,t,"totalInterFrameDelay","framesDecodeCount",yO.kMillisecondsFromSeconds),r&&o-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((o-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(i&&o-i.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-i.count)/((o-i.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):i?t.outputFrameRate=i.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:LI({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=rO(lO),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new oO(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new oO(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new oO(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent,t.hugeFramesSent=e.hugeFramesSent,t.keyFramesEncoded=e.keyFramesEncoded,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const r=e.framesEncoded-n.lastFrameCount,i=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*i/r}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,vO.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=rO(dO),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,vO.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const r=Array.from(hp(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return r?r.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null==a?void 0:a.framesSent)&&void 0!==r?r:e.framesSent;if("number"!=typeof c)return;let l=null!==(i=null==a?void 0:a.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight,u=null!==(s=null==a?void 0:a.framesPerSecond)&&void 0!==s?s:e.framesPerSecond;if("number"==typeof l&&"number"==typeof d||(l=0,d=0),null==u){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(u=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:u})):t?u=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:l,height:d,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,n){var r,i,o,s,a;const c=t?this.report.get(t):void 0,l=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,d=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,u=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,h=null!==(s=null==c?void 0:c.jitterBufferDelay)&&void 0!==s?s:e.jitterBufferDelay,p=null!==(a=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount;if("number"==typeof l){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=l;let r=0;e&&t-e.lts>=800?(r=Math.round((l-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:r})):e?r=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:0}),n.receivedFrame={width:d||0,height:u||0,frameRate:r||0},n.decodedFrame={width:d||0,height:u||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:d||0,height:u||0,frameRate:n.outputFrameRate||n.decodeFrameRate||0}}if(h&&p){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=p-e.jitterBufferEmittedCount;r>0&&(t=1e3*(h-e.jitterBufferDelay)/r),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:p,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var r,i,o,s;const a=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==a?void 0:a.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,l=null!==(o=null!==(s=null==a?void 0:a.echoReturnLossEnhancement)&&void 0!==s?s:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,n){var r,i,o,s,a,c,l;const d=t?this.report.get(t):void 0,u=null!==(r=null==d?void 0:d.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,h=null!==(i=null==d?void 0:d.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,p=null!==(o=null==d?void 0:d.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,f=null!==(s=null==d?void 0:d.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount,m=null!==(a=null==d?void 0:d.audioLevel)&&void 0!==a?a:null==e?void 0:e.audioLevel,g=null!==(c=null==d?void 0:d.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,v=null!==(l=null==d?void 0:d.concealedSamples)&&void 0!==l?l:e.concealedSamples;if(u&&h&&(n.accelerateRate=u/h),p&&f){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=f-e.jitterBufferEmittedCount;r>0&&(t=1e3*(p-e.jitterBufferDelay)/r),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:f,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=m;let y=1920;g&&h&&(y=h/g/50,n.receivedFrames=Math.round(h/y)),v&&(n.droppedFrames=Math.round(v/y))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}},bO=class extends hO{updateStats(){return rp.resolve()}};function wO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return o?o<76?new pO(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new EO(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):function(e){if(!window.RTCStatsReport)return!1;const t=e.getStats();return!!(t instanceof rp||function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(t))}(e)?new EO(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new bO(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}const SO="websdk_ng_install_id";function AO(){try{if(LO("INSTALL_ID"))return LO("INSTALL_ID");let e=window.localStorage.getItem(SO);return e||(e=Px(),window.localStorage.setItem(SO,e)),PO("INSTALL_ID",e),e}catch(e){return}}const CO=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}return"4.0.0.999"}("4.23.1"),TO=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}();let RO=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({});const IO=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),i=[];for(let a=0;a<6;a++)i.push("1");const o=i.join(""),s={};return s[e]=r,s[t]=o,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=IO;const xO={ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_AUT_FEEDBACK:!1,SVC_EXTENDED:["VP9"]},OO={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},NO="v4.23.1-0-gea45199f-dirty(1/16/2025, 3:18:04 PM)",DO={ENABLE_EVENT_REPORT:!0,UPLOAD_LOG:!1,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,ENABLE_PRELOAD:!0,NEW_ICE_RESTART:!1,ICE_RESTART_INTERVAL:1e4,RESTART_SEQUENCE:["udp_tcp_relay","relay"]},kO=LI(LI(LI({},DO),{},{PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,SHOW_REPORT_USER_INVOKER_LOG:!0,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,FIRST_H264_PROFILE_LEVEL_ID:"42001f",FIRST_PACKETIZATION_MODE:"",X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,FINGERPRINT:null,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,ENABLE_AUDIO_TOPN:!1,ENABLE_AUDIO_METADATA:!1,TOPN_SMOOTH_LEVEL:void 0,TOPN_NEW_SPEAKER_DELAY:void 0,TOPN_SWITCH_HOLD_MS:void 0,TOPN_AUDIO_GAIN:void 0,TOPN_SILENCE_THRESHOLD:250,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:OO,CUSTOM_ADAPTATION_DEFAULT_MODE:"",HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,DISABLE_SCREEN_SHARE_REMB:!1},xO),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1,AP_REQUEST_DETAIL:void 0,ENABLE_ROLE_SELECT_EDGE:!1,CLIENT_ROLE_OPTIONS:void 0,COMPATIBLE_SDP_EXTENSION:["gdpr_forbidden"],LIMIT_BITRATE:void 0,EXPERIMENTS:{},USE_PUB_RTX:!0,USE_SUB_RTX:!0,ENABLE_DATASTREAM_2:!1,USE_XR:!0,ENABLE_PREALLOC_PC:!1,ENABLE_PRE_SUB:!1,ENABLE_SVC:!1},{INSTALL_ID:""});function PO(e,t,n){var r,i,o;Lr(r=Object.keys(kO)).call(r,e)&&(!n&&Lr(i=Object.keys(jO)).call(i,e)||(kO[e]=t,"ENABLE_VIDEO_SEI"!==e&&"ENABLE_AUDIO_TOPN"!==e&&"ENABLE_AUDIO_METADATA"!==e||!0!==t||(kO.ENABLE_ENCODED_TRANSFORM=!0),"USE_NEW_NETWORK_CONFIG"===e&&t&&(o=!!t,kO.USE_NEW_NETWORK_CONFIG=o,o&&(kO.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],kO.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],kO.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],kO.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],kO.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",kO.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",kO.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),"ENABLE_PRE_SUB"===e&&t&&(kO.ENABLE_INSTANT_VIDEO=!0,kO.ENABLE_PREALLOC_PC=!0),"ENABLE_SVC"===e&&t&&(kO.ENABLE_AUT_CC=!0)))}function LO(e){return kO[e]}TO||(kO.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],kO.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],kO.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],kO.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],kO.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],kO.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],kO.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",kO.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",kO.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",kO.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",kO.AREAS=["NORTH_AMERICA","OVERSEA"]);let MO=function(e){return e[e.REALTIME=1]="REALTIME",e}({});const jO={};var UO=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(UO||{});let BO=class{constructor(e,t,n,r){kI(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:RO.Default,hasStartJoinChannel:!1,isABTestSuccess:!1}}dispatch(e){this.state=function(e,t){switch(t.type){case UO.SET_SESSION_ID:return LI(LI({},e),{},{sessionId:t.sessionId});case UO.SET_P2P_ID:return LI(LI({},e),{},{p2pId:t.p2pId});case UO.SET_UID:return LI(LI({},e),{},{uid:t.uid});case UO.SET_INT_UID:return LI(LI({},e),{},{intUid:t.intUid});case UO.SET_PUB_ID:return LI(LI({},e),{},{pubId:t.pubId});case UO.KEY_METRIC_CLIENT_CREATED:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{clientCreated:t.metric})});case UO.KEY_METRIC_JOIN_START:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{joinStart:t.metric})});case UO.AVOID_JOIN_START:return LI(LI({},e),{},{avoidJoinStart:t.avoidJoinStart});case UO.KEY_METRIC_JOIN_END:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{joinEnd:t.metric})});case UO.KEY_METRIC_REQUEST_AP_START:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{requestAPStart:t.metric})});case UO.KEY_METRIC_REQUEST_AP_END:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{requestAPEnd:t.metric})});case UO.KEY_METRIC_JOIN_GATEWAY_START:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case UO.KEY_METRIC_JOIN_GATEWAY_END:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case UO.KEY_METRIC_PEER_CONNECTION_START:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case UO.KEY_METRIC_PEER_CONNECTION_END:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case UO.KEY_METRIC_DESCRIPTION_START:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{descriptionStart:t.metric})});case UO.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case UO.KEY_METRIC_ICE_CONNECTION_END:return LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case UO.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==r?(n[r]=LI(LI({},n[r]),t.metric),LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{publish:[...n]})})):LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case UO.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==r?(n[r]=LI(LI({},n[r]),t.metric),LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{subscribe:[...n]})})):LI(LI({},e),{},{keyMetrics:LI(LI({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case UO.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case UO.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=LI(LI({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case UO.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case UO.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case UO.SET_USE_P2P:return LI(LI({},e),{},{useP2P:t.val});case UO.SET_TRANSPORT_TYPE:return LI(LI({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:UO.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set cid(e){this.state.cid=e}get cid(){return this.state.cid}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:UO.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:UO.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:UO.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:UO.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:UO.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:UO.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:UO.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:UO.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}set hasStartJoinChannel(e){this.state.hasStartJoinChannel=e}get hasStartJoinChannel(){return this.state.hasStartJoinChannel}set isABTestSuccess(e){this.state.isABTestSuccess=e}get isABTestSuccess(){return this.state.isABTestSuccess}clientCreated(){this.dispatch({type:UO.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:UO.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:UO.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:UO.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:UO.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:UO.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:UO.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:UO.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:UO.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:UO.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:UO.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:UO.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,r){this.dispatch({type:UO.KEY_METRIC_PUBLISH,metric:LI(LI({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}subscribe(e,t,n,r,i,o,s){this.dispatch({type:UO.KEY_METRIC_SUBSCRIBE,metric:LI(LI(LI(LI(LI({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),s&&{firstDecoded:s})})}massSubscribe(e,t,n,r){e.forEach((e=>{this.dispatch({type:UO.KEY_METRIC_SUBSCRIBE,metric:LI(LI(LI({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:UO.RECORD_JOIN_CHANNEL_SERVICE,record:LI(LI({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:UO.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:UO.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:UO.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(e){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:UO.AVOID_JOIN_START,avoidJoinStart:e})}},FO=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});!function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}({});let VO=0;var WO=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>w,Printer:()=>R,parse:()=>N,print:()=>D});const r="\n",i="".concat("\r").concat(r),o=" ";let s;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>="\x80"&&e<="\xff"}function d(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function u(e){return e>="1"&&e<="9"}function h(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function m(e){return h(e)||a(e)||"+"===e||"/"===e}function g(e){return a(e)||h(e)||"+"===e||"/"===e||"-"===e||"_"===e}function v(e){return h(e)||a(e)||"+"===e||"/"===e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(s||(s={}));class b{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let i=0;i<3&&a(e[n]);i++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;a(e[n])||h(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!u(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!u(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&a(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,d)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(u(e[n])&&(n+=1);a(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,a),p(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!u(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class w extends b{constructor(){super(),E(this,"records",[]),E(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!e_(e).call(e))).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),d=this.parseBandWidth(),u=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:s,emails:a,phones:c,connection:l,bandwidths:d,timeFields:u,key:h,attributes:p,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?i:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new A;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>d(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,f)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new C(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>d(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,f)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const i=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:i,back:r})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const n=this.extractOneOrMore(t,d);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,a);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:i,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,d);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),i=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:i,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.value,e.cur,...r),s=e.value.slice(e.cur,o);return e.cur=o,s}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class S extends b{constructor(){super(...arguments),E(this,"attributes",void 0),E(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),[o,s]=n||[];if("number"==typeof o&&i.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof s&&i.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=r,i}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=t.call(this,e.attValue,e._cur,...r),s=e.attValue.slice(e._cur,o);return e._cur=o,s}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,m,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,m,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,m));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,o),i=_(_({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class A extends S{constructor(){super(...arguments),E(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,g)}parseIdentity(e){const t=this.extractOneOrMore(e,v),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,(e=>e!==o&&f(e)));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,o);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class C extends S{constructor(e){super(),E(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,m,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const d={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:s,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),d.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),d.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),d.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(d)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const i=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));i?i.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=e_(t).call(t);const i="string"==typeof n?e_(n).call(n):null;"string"==typeof t&&t.length>0&&(r[t]=i)}));const i=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o);let r;if("trr-int"===n)r={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),r=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,d),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,d,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,d,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>h(e)||a(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R{constructor(){T(this,"eol",i)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new x(this.eol).print(e)}printMediaAttributes(e){return new O(this.eol).print(e)}}class I{constructor(e){T(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class x extends I{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(o).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(o).concat(e)))),t+this.eol}}class O extends I{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(o).concat(t).concat(o).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const r of t)n+=this.printRtpMap(r.payloadType,r.rtpMap),n+=this.printFmtp(r.payloadType,r.fmtp),n+=r.rtcpFeedbacks.map((e=>this.printRTCPFeedback(r.payloadType,e))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(o).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(o),r=t;return"trr-int"===r.type?n+="ttr-int".concat(o).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(o).concat(r.parameter),r.additional&&(n+="".concat(o).concat(r.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(o).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function N(e){return(new w).parse(e)}function D(e,t){return(new R).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})();function HO(e){return WO.parse(e)}function zO(e,t){return WO.print(e,t)}var GO=tr("Array","keys"),YO=vr,KO=tt,qO=u,XO=GO,JO=Array.prototype,QO={DOMTokenList:!0,NodeList:!0},ZO=function(e){var t=e.keys;return e===JO||qO(JO,e)&&t===JO.keys||KO(QO,YO(e))?XO:t},$O=r(ZO);function eN(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tN(Object(n),!0).forEach((function(t){eN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rN=new class extends ZI{constructor(){super(...arguments),eN(this,"currentUploadLogID",0)}reportLogUploadError(e){const{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}};class iN{constructor(e){eN(this,"logger",void 0),eN(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function oN(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function sN(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const aN={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},cN=Date.now(),lN=e=>{for(const t in aN)if(Object.prototype.hasOwnProperty.call(aN,t)&&aN[t]===e)return t;return"DEFAULT"},dN=new class{constructor(){eN(this,"proxyServerURL",void 0),eN(this,"logLevel",aN.DEBUG),eN(this,"uploadState","collecting"),eN(this,"uploadLogWaitingList",[]),eN(this,"uploadLogUploadingList",[]),eN(this,"uploadErrorCount",0),eN(this,"currentLogID",0),eN(this,"url",void 0),eN(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[aN.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[aN.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[aN.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[aN.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[aN.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){PO("UPLOAD_LOG",!0)}disableLogUpload(){PO("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new iN(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-cN<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-cN);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=oN()+" Agora-SDK [".concat(lN(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const i=oN()+" %cAgora-SDK [".concat(lN(r),"]:");let o=[];if(!LO("USE_NEW_LOG"))switch(r){case aN.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case aN.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case aN.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case aN.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-cN<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-cN);const r=Math.max(0,Math.min(4,t[0]));t[0]=oN()+" Agora-SDK [".concat(lN(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!LO("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=sN()+" Agora-SDK [".concat(lN(e),"]:"):n[0]=sN()+" Agora-SDK [".concat(lN(e),"]:");let i="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:CO,process_id:LO("PROCESS_ID"),payload:JSON.stringify(e)};return Xx((async()=>{const e=await KR.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(LO("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(LO("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(t=>{const n={status:-1,message:t.message,errorRange:e.map((e=>e.log_item_id))};return t.response?(n.status=t.response.status,n.data=t.response.data,n.headers=t.response.headers):t.request&&(n.status=t.request.status),rN.reportLogUploadError(n),!0}),{timeout:LO("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:LO("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,LO("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),LO("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),LO("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),LO("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var uN;function hN(e){return WI(e.reportId,"params.reportId",0,100,!1),WI(e.category,"params.category",0,100,!1),WI(e.event,"params.event",0,100,!1),WI(e.label,"params.label",0,100,!1),FI(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(uN={}).FREE="free",uN.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});const pN={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let fN=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e.AB_TEST="ab_test",e}({}),mN=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e.AB_TEST="io.agora.pb.Wrtc.ABTest",e}({});!function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}({});let gN=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({});function vN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){const i=r.value;if("function"==typeof i){const o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];let c=s;if(e.argsMap)try{c=e.argsMap(this,...s)}catch(e){dN.warning(e),c=[]}try{JSON.stringify(c)}catch(e){dN.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),c=[]}const l=(e.report||yN).reportApiInvoke(this._sessionId||null,{id:this._clientId||(null===(t=this.store)||void 0===t?void 0:t.clientId)||this._ID,name:"".concat(o,".").concat(String(n)),options:c,tag:nx.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=i.apply(this,s);return t instanceof rp?t.then((t=>(l.onSuccess(e.reportResult&&t),t))).catch((e=>{throw l.onError(e),e})):(l.onSuccess(e.reportResult&&t),t)}catch(e){throw l.onError(e),e}}}return r}}const yN=new class{constructor(){eN(this,"baseInfoMap",new Map),eN(this,"proxyServer",void 0),eN(this,"eventUploadTimer",void 0),eN(this,"setSessionIdTimer",void 0),eN(this,"url",void 0),eN(this,"sids",new Set),eN(this,"backupUrl",void 0),eN(this,"_appId",void 0),eN(this,"_aid",0),eN(this,"keyEventUploadPendingItems",[]),eN(this,"normalEventUploadPendingItems",[]),eN(this,"apiInvokeUploadPendingItems",[]),eN(this,"apiInvokeCount",0),eN(this,"apiInvokeLoggedCount",0),eN(this,"ltsList",[]),eN(this,"lastSendNormalEventTime",Date.now()),eN(this,"customReportCounterTimer",void 0),eN(this,"customReportCount",0),eN(this,"extApiInvoke",(async e=>{for(const t of e){const e=nN(nN({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:nx.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),LO("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),LO("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}setAppId(e){this._appId=e,this._aid=parseInt(e.replace(/[a-fA-F0-9]{8}/g,(e=>{let[t,n]=e;return t+n})),16)||0}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,o=!!LO("SHOW_REPORT_INVOKER_LOG"),s=!!LO("SHOW_REPORT_USER_INVOKER_LOG"),a=o||s&&t.id;a&&(this.apiInvokeLoggedCount+=1);const c=this.apiInvokeLoggedCount;function l(e,n){if(a){let r="[apiInvoke-".concat(c,"]");t.id&&(r+="[".concat(t.id,"]")),t.name&&(r+="[".concat(t.name,"]")),dN.info("".concat(r," ").concat(e),"start"===e?t.options:n||"")}}const d=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null});l("start");let u=!1;Dx(t.timeout).then((()=>{u||(this.sendApiInvoke(nN(nN({},d()),{},{error:MI.API_INVOKE_TIMEOUT,success:!1})),l("timeout"))}));const h=new jI(MI.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(u)throw h;return u=!0,this.sendApiInvoke(nN(nN({},d()),{},{success:!0},t.reportResult&&{result:e})),l("onSuccess"),e};return n?jx(r,t.name+"Success",n,(()=>u=!0)):r()},onError:e=>{const r=()=>{if(u)throw e;u=!0,this.sendApiInvoke(nN(nN({},d()),{},{success:!1,error:e})),l("onFailure",e.toString())};return n?jx(r,t.name+"Error",n,(()=>u=!0)):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=Object.assign({},{willUploadConsoleLog:LO("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:TO?"global":"oversea",areas:LO("AREAS")&&LO("AREAS").join(",")},t.extend),{stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:l,clientRole:d}=t,u=Date.now(),h=nN(nN({},r),{},{eventType:fN.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,buildFormat:t.buildFormat,build:NO,lts:u,elapse:u-n,extend:JSON.stringify(i),mode:t.mode,process:LO("PROCESS_ID"),appType:LO("APP_TYPE"),success:!0,version:CO,stringUid:o,channelProfile:s,channelMode:a,isABTestSuccess:c,lsid:l,clientType:Lr(p=window.navigator.userAgent).call(p,"AgoraWebView")?42:20,clientRole:d,serviceId:LO("PROCESS_ID"),extensionID:LO("PLUGIN_INFO").join(",")||""});var p;this.send({type:mN.SESSION,data:h},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN({},r),{},{role:t.role,eventType:fN.JOIN_CHOOSE_SERVER,lts:i,eventElapse:t.elapse||i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3,corssRegionTagReq:t.corssRegionTagReq||void 0,corssRegionTagRes:t.corssRegionTagRes||void 0});this.send({type:mN.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN({},r),{},{eventType:fN.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:t.elapse||i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:mN.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Date.now(),{firstSuccess:o,avoidJoinStartTime:s,addr:a,isProxy:c}=t,l=i-(o&&s?s:n.startTime),d=nN(nN({},r),{},{eventType:fN.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,errorMsg:t.errorMsg||"",elapse:l,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel,preload:t.preload?1:0,installId:AO(),isABTestSuccess:t.isABTestSuccess?1:0}),u=d.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),o)this.send({type:mN.JOIN_GATEWAY,data:d},!0);else{let e;if(a)if(c){const t=a.match(/h=(\d{1,3}-){3}\d{1,3}/g),n=a.match(/p=[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split("=")[1]:"",isProxy:c?1:0}}else{const t=a.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),n=a.match(/(:|p=)[0-9]{1,6}/g);e={isSuccess:u,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:n&&n.length?n[0].split(/:|p=/g)[1]:"",isProxy:c?1:0}}else e={isSuccess:u,gatewayIp:"",port:"",isProxy:c?1:0};delete d.success,delete d.eventType,delete d.firstSuccess,d.vid=Number(d.vid);const t=Object.assign({},d,e,{eventType:fN.REJOIN_GATEWAY});this.send({type:mN.RE_JOIN_GATEWAY,data:t},!0)}}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Date.now(),i=nN(nN({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:mN.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN({},r),{},{eventType:fN.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:mN.PUBLISH,data:o},!0)}subscribe(e,t,n){const r=this.baseInfoMap.get(e);if(!r)return;const i=r.info,o=Date.now(),s=nN(nN({},i),{},{eventType:fN.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid,preSsrc:t.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?s.peerSuid=t.peerid:s.peer=t.peerid,this.send({type:mN.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var t;const n=[...$O(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const o=i.info,s=Date.now(),a=nN(nN({},o),{},{eventType:fN.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-i.startTime,status:e.status?1:2});this.send({type:mN.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteVideoDecode(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=nN(nN(nN({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s,firstDecodeFrame:Math.max((r.firstFrame||s)-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:a},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=nN(nN(nN({},o),r),{},{elapse:s-i.startTime,eventType:t,lts:s});this.send({type:n,data:a},!0)}abTest(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN(nN({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:fN.AB_TEST,lts:i});this.send({type:mN.AB_TEST,data:o},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN(nN({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:fN.PC_STATS,lts:i,preallocation:t.preallocation?1:0});this.send({type:mN.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN(nN({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),eventType:fN.UPDATE_REMOTE_RTPCAPABILITIES,lts:i});this.send({type:mN.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Date.now(),a=nN(nN(nN({},o),r),{},{eventType:t,lts:s});this.send({type:n,data:a},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN({},r),{},{eventType:fN.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:mN.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN({},r),{},{eventType:fN.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:mN.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN({},r),{},{eventType:fN.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:mN.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?dN.debug("reportProxyServerurl: ".concat(e)):dN.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:mN.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now();(function(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const i=xx(JSON.stringify(e));let o=0;const s=[];let a=0;for(let c=0;c<r.length;c++)a+=r.charCodeAt(c)<=127?1:3,a<=n-i||(s[s.length]=LI(LI({},e),{},{[t]:r.substring(o,c)}),o=c,a=r.charCodeAt(c)<=127?1:3);return o!==r.length-1&&(s[s.length]=LI(LI({},e),{},{[t]:r.substring(o)})),s})(nN(nN(nN({},r),t),{},{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300).forEach((e=>this.send({type:mN.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN(nN({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:mN.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN(nN({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:mN.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Date.now(),o=nN(nN(nN({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:mN.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>LO("CUSTOM_REPORT_LIMIT"))throw new jI(MI.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),r=t.map((t=>({type:mN.USER_ANALYTICS,data:nN(nN({sid:e},t),{},{lts:n})})));try{LO("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(r):await this.postDataToStatsCollector(r)}catch(e){throw dN.error("send custom report message failed",e.toString()),new jI(MI.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=LO("NOT_REPORT_EVENT");if(e.tag&&Lr(t)&&Lr(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:o}=n.info;let s;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof jI){const{code:t,message:n}=e.error;s=t||n||e.error.toString()}else s=e.error.toString();const a={invokeId:e.invokeId,sid:e.sid,cname:r,cid:o,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:mN.API_INVOKE,data:a},!1),!0}addSid(e){this.sids.add(e)}removeSid(e){this.sids.delete(e)}appendSessionId(){const e=this.apiInvokeUploadPendingItems;if(0===e.length)return;const t=Array.from(this.sids).find((e=>null!==e));t&&e.forEach((e=>{e&&(e.sid=t,this.sendApiInvoke(Object.assign({},e)))})),e.length=0}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>LO("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const o of[...n]){var i;-1!==this.ltsList.indexOf(o.data.lts)?(o.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(o.data.lts)):(this.ltsList.push(o.data.lts),K_(i=this.ltsList).call(i,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),LO("ENABLE_EVENT_REPORT")?(n.length&&(LO("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{LO("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>LO("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-LO("NORMAL_EVENT_QUEUE_CAPACITY")),dN.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){vx.networkState===ux.OFFLINE&&await rp.race([vx.onlineWaiter,Dx(2*Kx.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=XI(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=(e=>{let t=0;return Object.entries(mN).forEach((n=>{let[r,i]=n;i===e.type&&(t=gN[r])})),t})(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=JI(t,new Uint8Array(r)),t=JI(t,n)})),t},n="event";let r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(LO("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(LO("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let i=0;i<2;i+=1){1===i&&(r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(LO("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(LO("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await eO(r,{timeout:1e4,data:t(e),headers:nN(nN({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===i)throw e;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0]),r=n?void 0:this._aid,i={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:n,aid:r};vx.networkState===ux.OFFLINE&&await rp.race([vx.onlineWaiter,Dx(2*Kx.maxRetryTimeout)]);const o=t?"/events/proto-raws":"/events/messages";let s=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(LO("EVENT_REPORT_DOMAIN"),"&p=").concat(LO("STATS_COLLECTOR_PORT"),"&d=").concat(o):"https://".concat(LO("EVENT_REPORT_DOMAIN"),":").concat(LO("STATS_COLLECTOR_PORT")).concat(o));for(let a=0;a<2;a+=1){1===a&&(s=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(LO("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(LO("STATS_COLLECTOR_PORT"),"&d=").concat(o):"https://".concat(LO("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(LO("STATS_COLLECTOR_PORT")).concat(o)));try{t?await tO(s,{timeout:1e4,data:i}):await eO(s,{timeout:1e4,data:i})}catch(t){if(1===a)throw t;continue}return}}createBaseInfo(e,t){const n=Object.assign({},pN);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:nx.TRACER}).onSuccess()}};rN.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=vx.networkState,yN.reportApiInvoke(null,{name:"logUploadError",options:e,tag:nx.TRACER}).onSuccess("logUploadError")}));class _N extends jI{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),eN(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,dN)}throw(){super.throw(dN)}}const EN={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function bN(){return EN}function wN(){return"setSinkId"in HTMLAudioElement.prototype&&(!LO("RESTRICTION_SET_PLAYBACK_DEVICE")||(lI()||uI())&&!xI())}function SN(){return!EN.supportUnifiedPlan||LO("CHROME_FORCE_PLAN_B")&&OI()}let AN=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function CN(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function TN(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function RN(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function IN(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}const xN={"90p":TN(160,90),"90p_1":TN(160,90),"120p":TN(160,120,15,30,65),"120p_1":TN(160,120,15,30,65),"120p_3":TN(120,120,15,30,50),"120p_4":TN(212,120),"180p":TN(320,180,15,30,140),"180p_1":TN(320,180,15,30,140),"180p_3":TN(180,180,15,30,100),"180p_4":TN(240,180,15,30,120),"240p":TN(320,240,15,40,200),"240p_1":TN(320,240,15,40,200),"240p_3":TN(240,240,15,40,140),"240p_4":TN(424,240,15,40,220),"360p":TN(640,360,15,80,400),"360p_1":TN(640,360,15,80,400),"360p_3":TN(360,360,15,80,260),"360p_4":TN(640,360,30,80,600),"360p_6":TN(360,360,30,80,400),"360p_7":TN(480,360,15,80,320),"360p_8":TN(480,360,30,80,490),"360p_9":TN(640,360,15,80,800),"360p_10":TN(640,360,24,80,800),"360p_11":TN(640,360,24,80,1e3),"480p":TN(640,480,15,100,500),"480p_1":TN(640,480,15,100,500),"480p_2":TN(640,480,30,100,1e3),"480p_3":TN(480,480,15,100,400),"480p_4":TN(640,480,30,100,750),"480p_6":TN(480,480,30,100,600),"480p_8":TN(848,480,15,100,610),"480p_9":TN(848,480,30,100,930),"480p_10":TN(640,480,10,100,400),"720p":TN(1280,720,15,120,1130),"720p_auto":TN(1280,720,30,900,3e3),"720p_1":TN(1280,720,15,120,1130),"720p_2":TN(1280,720,30,120,2e3),"720p_3":TN(1280,720,30,120,1710),"720p_5":TN(960,720,15,120,910),"720p_6":TN(960,720,30,120,1380),"1080p":TN(1920,1080,15,120,2080),"1080p_1":TN(1920,1080,15,120,2080),"1080p_2":TN(1920,1080,30,120,3e3),"1080p_3":TN(1920,1080,30,120,3150),"1080p_5":TN(1920,1080,60,120,4780),"1440p":TN(2560,1440,30,120,4850),"1440p_1":TN(2560,1440,30,120,4850),"1440p_2":TN(2560,1440,60,120,7350),"4k":TN(3840,2160,30,120,8910),"4k_1":TN(3840,2160,30,120,8910),"4k_3":TN(3840,2160,60,120,13500)},ON={"480p":RN(640,480,5),"480p_1":RN(640,480,5),"480p_2":RN(640,480,30),"480p_3":RN(640,480,15),"720p":RN(1280,720,5),"720p_auto":TN(1280,720,30,900,3e3),"720p_1":RN(1280,720,5),"720p_2":RN(1280,720,30),"720p_3":RN(1280,720,15),"1080p":RN(1920,1080,5),"1080p_1":RN(1920,1080,5),"1080p_2":RN(1920,1080,30),"1080p_3":RN(1920,1080,15)},NN={"1SL1TL":IN(1,1),"3SL3TL":IN(3,3),"2SL3TL":IN(2,3)};function DN(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},xN[e]):e}function kN(e){return"string"==typeof e?Object.assign({},ON[e]):e}function PN(e){return"string"==typeof e?Object.assign({},NN[e]):e}const LN={speech_low_quality:CN(16e3,!1),speech_standard:CN(32e3,!1,18),music_standard:CN(48e3,!1),standard_stereo:CN(48e3,!0,56),high_quality:CN(48e3,!1,128),high_quality_stereo:CN(48e3,!0,192)};function MN(e){return"string"==typeof e?Object.assign({},LN[e]):e}const jN=[];function UN(e){return BI(e,"mediaSource",["screen","window","application"]),!0}let BN=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),FN=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e.SCREEN_LOW_TRACK="screen_low_track",e}({}),VN=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),WN=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.HIGH_STREAM_LAYER1=4]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=5]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=6]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=7]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=8]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=9]="HIGH_STREAM_LAYER6",e}({}),HN=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e[e.HIGH_STREAM_LAYER1=3]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=4]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=5]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=6]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=7]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=8]="HIGH_STREAM_LAYER6",e}({}),zN=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),GN=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),YN=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),KN=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),qN=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});const XN={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},JN={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},QN={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},ZN={uplinkNetworkQuality:0,downlinkNetworkQuality:0},$N={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let eD=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),tD=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),nD=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),rD=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),iD=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),oD=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({});const sD={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let aD=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function cD(e,t,n,r,i){var o,s,a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=oi(o=yi(s=n.slice()).call(s)).call(o,(function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}function lD(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dD(Object(n),!0).forEach((function(t){lD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class hD extends ZI{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(zN.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),lD(this,"trackMediaType",void 0),lD(this,"_ID",void 0),lD(this,"_rtpTransceiver",void 0),lD(this,"_lowRtpTransceiver",void 0),lD(this,"_hints",[]),lD(this,"_isClosed",!1),lD(this,"_originMediaStreamTrack",void 0),lD(this,"mediaStreamTrack",void 0),lD(this,"_external",{}),this._ID=t||kx(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(e){Lr(jN).call(jN,e)||jN.push(e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||Ax((()=>{var e;yN.reportApiInvoke(null,{name:tx.GET_MEDIA_STREAM_TRACK,options:[],tag:nx.TRACER}).onSuccess((null===(e=this._mediaStreamTrack)||void 0===e?void 0:e.label)||"")}),this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===VN.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=jN.indexOf(e);-1!==t&&jN.splice(t,1)}(this),this.emit(GN.CLOSED),this.removeAllListeners(zN.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===VN.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(zN.TRANSCEIVER_UPDATED,e,t)}}class pD extends hD{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),lD(this,"_enabled",!0),lD(this,"_muted",!1),lD(this,"_isExternalTrack",!1),lD(this,"_isClosed",!1),lD(this,"_enabledMutex",void 0),lD(this,"processor",void 0),lD(this,"_processorContext",void 0),lD(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new Gx("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,dN.debug("[".concat(this.getTrackId(),"] close")),this.emit(BN.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await fx(this,BN.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){dN.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(GN.TRACK_ENDED)}stateCheck(e,t){if(dN.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),UI(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new jI(MI.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",dN);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new jI(MI.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",dN)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():rp.resolve([])}}const fD=window.AudioContext||window.webkitAudioContext;let mD=null;const gD=new class extends ZI{constructor(){super(...arguments),lD(this,"prevState",void 0),lD(this,"curState",void 0),lD(this,"currentTime",void 0),lD(this,"currentTimeStuckAt",void 0),lD(this,"interruptDetectorTrack",void 0),lD(this,"onLocalAudioTrackMute",(()=>{dN.info("ios15-interruption-start"),this.emit(AN.IOS_15_16_INTERRUPTION_START)})),lD(this,"onLocalAudioTrackUnmute",(async()=>{dN.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?dN.info("ios15-interruption-end-canceled"):(mD&&await mD.suspend(),this.emit(AN.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){dN.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){dN.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function vD(){if(!mD){if(function(){if(!fD)return void dN.error("your browser is not support web audio");dN.info("create audio context");const e=uD({},LO("WEBAUDIO_INIT_OPTIONS"));dN.debug("audio context init option:",JSON.stringify(e)),mD=new fD(e),gD.curState=mD.state,mD.onstatechange=()=>{gD.prevState=gD.curState,gD.curState=mD?mD.state:void 0;const{prevState:e,curState:t}=gD,n="running"===t,r="interrupted"===t,i="running"===e,o="suspended"===e,s="interrupted"===e,a=iI().osVersion;(pI()||TI())&&i&&r&&(dN.info("ios".concat(a,"-interruption-start")),gD.emit(AN.IOS_INTERRUPTION_START)),(pI()||TI())&&(o||s)&&n&&(dN.info("ios".concat(a,"-interruption-end")),gD.emit(AN.IOS_INTERRUPTION_END)),e!==t&&gD.emit(AN.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=mD)||void 0===e?void 0:e.currentTime;gD.currentTime!==t?(gD.currentTimeStuckAt&&(dN.debug("AudioContext current time resume at ".concat(t)),gD.currentTimeStuckAt=void 0),gD.currentTime=t):(t!==gD.currentTimeStuckAt&&(yN.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:nx.TRACER}).onSuccess(),dN.warning("AudioContext current time stuck at ".concat(t))),gD.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,i=!1,o=!1;function s(t){"running"===e.state?a(!1):pI()||TI()?"suspended"===e.state&&(a(!0),t&&e.resume().then(c,c)):"closed"!==e.state&&(a(!0),t&&e.resume().then(c,c))}function a(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,l,{capture:!0,passive:!0}):window.removeEventListener(t,l,{capture:!0,passive:!0})}}}function c(){s(!1)}function l(){s(!0)}function d(e){if(!o)if(n.paused)if(e){let t;u(!1),o=!0;try{t=n.play(),t?t.then(h,h):(n.addEventListener("playing",h),n.addEventListener("abort",h),n.addEventListener("error",h))}catch(e){h()}}else u(!0);else u(!1)}function u(e){if(i!==e){i=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,p,{capture:!0,passive:!0}):window.removeEventListener(t,p,{capture:!0,passive:!0})}}}function h(){n.removeEventListener("playing",h),n.removeEventListener("abort",h),n.removeEventListener("error",h),o=!1,d(!1)}function p(){d(!0)}if(pI()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,d(!0)}gD.on(AN.STATE_CHANGE,(function(){s(!0)})),s(!1)}(mD)}(),!mD)throw new jI(MI.NOT_SUPPORTED,"can not create audio context");return mD}return mD}function yD(e){if(function(){if(null!==_D)return _D;const e=vD(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),_D=i,i}())return;const t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var o;return e._inputNodes||(e._inputNodes=[]),Lr(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,o)=>{n.call(e),r?yx(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let _D=null;function ED(e,t){let n=!1;const r=1/t;if(LO("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*r)}else{const t=vD();let i=t.createGain();i.gain.value=0,i.connect(t.destination);const o=()=>{if(n)return void(i=null);const s=t.createOscillator();s.onended=o,s.connect(i),s.start(0),s.stop(t.currentTime+r),e(t.currentTime)};o()}return()=>{n=!0}}class bD{constructor(){lD(this,"context",void 0),lD(this,"analyserNode",void 0),lD(this,"sourceNode",void 0),this.context=vD(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||pI()||TI()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=oi(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){dN.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class wD extends ZI{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),lD(this,"outputNode",void 0),lD(this,"outputTrack",void 0),lD(this,"isPlayed",!1),lD(this,"sourceNode",void 0),lD(this,"context",void 0),lD(this,"audioBufferNode",void 0),lD(this,"destNode",void 0),lD(this,"audioOutputLevel",0),lD(this,"volumeLevelAnalyser",void 0),lD(this,"_processedNode",void 0),lD(this,"playNode",void 0),lD(this,"isDestroyed",!1),lD(this,"onNoAudioInput",void 0),lD(this,"isNoAudioInput",!1),lD(this,"_noAudioInputCount",0),this.context=vD(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),yD(this.outputNode),this.volumeLevelAnalyser=new bD}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(qN.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!bN().webAudioMediaStreamDest)throw new jI(MI.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&Ex((()=>{gD.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;pI()||TI()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let r=!1;for(let i=0;i<n.length;i++)0!==n[i]&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await Dx(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class SD extends wD{get isFreeze(){return!1}constructor(e,t,n){var r;if(super(),lD(this,"sourceNode",void 0),lD(this,"track",void 0),lD(this,"clonedTrack",void 0),lD(this,"audioElement",void 0),lD(this,"isCurrentTrackCloned",!1),lD(this,"isRemoteTrack",!1),lD(this,"originVolumeLevelAnalyser",void 0),lD(this,"rebuildWebAudio",(async()=>{if(dN.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void dN.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>dN.info("resume success"))),dN.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),yD(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),yD(this.outputNode),this.emit(qN.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new jI(MI.UNEXPECTED_ERROR);this.track=e;const i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),yD(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,dN.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));yD(t),this.originVolumeLevelAnalyser=new bD,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;const o=iI();t&&o.os===$R.IOS&&Number(null===(r=o.osVersion)||void 0===r?void 0:r.split(".")[0])<15&&(gD.on(AN.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),yD(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(qN.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),gD.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),dN.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));yD(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function AD(e,t,n){const r=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,i={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function CD(e,t){const n=await TD(e.mediaSource),{sourceId:r,audio:i}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new rp(((n,r)=>{const i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const o=document.createElement("div");o.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const s=document.createElement("div");s.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",s.setAttribute("style","height: 12%;");const a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const l=document.createElement("button");l.innerHTML="cancel",l.setAttribute("style","width: 85px;"),l.onclick=()=>{document.body.removeChild(h);const e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};let d=t;const u=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=d,e.onchange=()=>{d=e.checked},u.appendChild(e),u.appendChild(t)}c.appendChild(u),c.appendChild(l),o.appendChild(s),o.appendChild(a),o.appendChild(c);const h=document.createElement("div");h.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),h.appendChild(i),h.appendChild(o),document.body.appendChild(h),e.map((e=>{if(e.id){const t=document.createElement("div");t.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=e.thumbnail;try{const{width:e}=r.getSize();e>1920&&(r=r.resize({width:1920}))}catch(e){throw e&&e.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),e}t.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",t.onclick=()=>{document.body.removeChild(h),n({sourceId:e.id,audio:d})},a.appendChild(t)}}))}))}(n,t);return await AD(r,e,i)}async function TD(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=ex();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new jI(MI.ELECTRON_IS_NULL);let r=null;try{var i;r=(null===(i=n.desktopCapturer)||void 0===i?void 0:i.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(e){r=null}r&&r.then||(r=new rp(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await r}catch(e){throw new jI(MI.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}const RD=new Gx("safari");let ID=!1,xD=!1;async function OD(e,t){let n=0,r=null;for(;n<2;)try{r=await ND(e,t,n>0);break}catch(e){if(e instanceof jI)throw dN.error("[".concat(t,"] ").concat(e.toString())),e;const r=DD(e.name||e.code||e,e.message);if(r.code===MI.MEDIA_OPTION_INVALID){dN.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await Dx(500);continue}throw dN.error("[".concat(t,"] ").concat(r.toString())),r}if(!r)throw new jI(MI.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function ND(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new jI(MI.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=bN(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return dN.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(ex())e.screen.sourceId?kD(i,await AD(e.screen.sourceId,e.screen,!!e.screenAudio)):kD(i,await CD(e.screen,!!e.screenAudio));else if(lI()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new jI(MI.NOT_SUPPORTED,"This browser does not support screen sharing");dN.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(s=e.screen.extensionId,a=t,new rp(((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},(n=>{if(!n||!n.streamId)return dN.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new jI(MI.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){dN.error("[".concat(a,"] AgoraRTC screensharing plugin is not accessible(").concat(s,")"),e.toString()),t(new jI(MI.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,kD(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var o;e.screen.mediaSource&&UN(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(o=e.screen.displaySurface)&&void 0!==o?o:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a,preferCurrentTab:c}=e.screen,l={selfBrowserSurface:r,surfaceSwitching:s,systemAudio:a,preferCurrentTab:c};!r&&delete l.selfBrowserSurface,!s&&delete l.surfaceSwitching,!a&&delete l.systemAudio,!c&&delete l.preferCurrentTab,dN.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:e.screenAudio,controls:l})),kD(i,await navigator.mediaDevices.getDisplayMedia(uD({video:n,audio:e.screenAudio},l)))}else{if(!hI())throw dN.error("[".concat(t,"] This browser does not support screenSharing")),new jI(MI.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&UN(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};dN.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),kD(i,await navigator.mediaDevices.getUserMedia(n))}}var s,a;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=LO("MEDIA_DEVICE_CONSTRAINTS");if(l)try{"string"==typeof l&&(l=JSON.parse(l)),c=Bx(c,l)}catch(e){}dN.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),iI();let d,u=null;(dI()||pI()||cI())&&(u=await RD.lock());try{d=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(ID=!0),c.video&&(xD=!0),kD(i,d),u&&u(),i}function DD(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new jI(MI.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new jI(MI.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new jI(MI.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new jI(MI.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new jI(MI.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new jI(MI.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return dN.error("getUserMedia unexpected error",e),new jI(MI.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function kD(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const PD=new class extends ZI{get state(){return this._state}set state(e){e!==this._state&&(this.emit(rD.STATE_CHANGE,e),this._state=e)}constructor(){super(),lD(this,"_state",nD.IDLE),lD(this,"isAccessMicrophonePermission",!1),lD(this,"isAccessCameraPermission",!1),lD(this,"lastAccessMicrophonePermission",!1),lD(this,"lastAccessCameraPermission",!1),lD(this,"checkdeviceMatched",!1),lD(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(LO("ENUMERATE_DEVICES_INTERVAL")||(NI()||sI()===$R.HARMONY_OS)&&OI())&&this.updateDevicesInfo()}),LO("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>dN.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new jI(MI.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(s=!1);let a=null,c=null,l=null;if(!n&&(o||s)){if(RD.isLocked&&(dN.debug("[device manager] wait GUM lock"),(await RD.lock())(),dN.debug("[device manager] GUM unlock")),ID&&(o=!1,this.isAccessMicrophonePermission=!0),xD&&(s=!1,this.isAccessCameraPermission=!0),dN.debug("[device manager] check media device permissions",e,t,o,s),o&&s){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=DD(e.name||e.code||e,e.message);if(t.code===MI.PERMISSION_DENIED)throw t;dN.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=DD(e.name||e.code||e,e.message);if(t.code===MI.PERMISSION_DENIED)throw t;dN.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=DD(e.name||e.code||e,e.message);if(t.code===MI.PERMISSION_DENIED)throw t;dN.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}dN.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,e}catch(e){return a&&a.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),a=null,c=null,l=null,new jI(MI.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new jI(MI.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=nD.INITING;try{await this.updateDevicesInfo(),this.state=nD.INITEND}catch(e){throw dN.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=nD.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new jI(MI.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?dN.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):dN.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):dN.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const r=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(r?r.state:"INACTIVE")){const r={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),r),n.push(r)}r&&(r.updateAt=t)})),this.deviceInfoMap.forEach(((e,r)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==nD.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(rD.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(rD.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(rD.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),r={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}};let LD=!1;const MD=new class extends ZI{constructor(){super(...arguments),lD(this,"onAutoplayFailed",void 0),lD(this,"onAudioAutoplayFailed",void 0)}};function jD(){if(iI(),!LD){const e=t=>{t.preventDefault(),LD=!1,DI()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};LD=!0,DI()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),dN.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),MD.onAutoplayFailed?MD.onAutoplayFailed():MD.onAudioAutoplayFailed?dN.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):dN.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),MD.emit("autoplay-failed")}}function UD(e,t,n,r){if(!e)return;const i=yN.getBaseInfoBySessionId(e);if(!i)return;const o=i.info,s=Date.now(),a=uD(uD({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-i.startTime,cbRegistered:MD.onAutoplayFailed||MD.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});yN.send({type:mN.AUTOPLAY_FAILED,data:a},!0)}const BD=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],FD=new class{constructor(){lD(this,"onAutoplayFailed",void 0),lD(this,"elementMap",new Map),lD(this,"elementStateMap",new Map),lD(this,"elementsNeedToResume",[]),lD(this,"sinkIdMap",new Map),lD(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,r]=t;const i=this.elementStateMap.get(n),o=r.srcObject.getAudioTracks()[0],s=o&&o.readyState;if(dN.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(s," ").concat(e)),"live"===s){if(e)return r.pause(),void r.play();if("running"===gD.curState)return SI()?(r.pause(),void r.play()):void(i&&"paused"===i&&r.play())}}))})),lD(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(dN.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),gD.on(AN.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),gD.on(AN.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),gD.on(AN.STATE_CHANGE,(()=>{pI()&&"suspended"===gD.prevState&&"running"===gD.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new jI(MI.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,iD.INIT),this.setVolume(t,n);const o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch((e=>{dN.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){dN.warning("[".concat(t,"] set sink id failed"),e.toString())}const s=i.play();s&&s.then&&s.catch((e=>{r&&UD(r,"audio",e.message,t),dN.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(dN.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),Ex((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),jD()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){BD.forEach((n=>{t.addEventListener(n,(n=>{const r=this.elementStateMap.get(e),i="pause"===n.type?"paused":n.type;if(dN.debug("[".concat(e,"] audio-element-status change ").concat(r," => ").concat(i)),"error"===n.type){const n=null==t?void 0:t.error;n&&dN.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,i)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{dN.debug("Auto resume audio element success")})).catch((e=>{dN.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new rp((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{DI()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function VD(){return function(e,t,n){const r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new jI(MI.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",dN);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=r.apply(this,t);return i instanceof rp?new rp(((e,t)=>{i.then(e).catch(t)})):i}),n}}class WD extends ZI{constructor(e){super(),lD(this,"name","VideoProcessorDestination"),lD(this,"ID","0"),lD(this,"_source",void 0),lD(this,"videoContext",void 0),lD(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new jI(MI.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new jI(MI.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(eD.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(eD.ON_TRACK,void 0)}}class HD extends ZI{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),lD(this,"constraintsMap",new Map),lD(this,"statsRegistry",[]),lD(this,"usageRegistry",[]),lD(this,"trackId",void 0),lD(this,"direction",void 0),lD(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await px(this,tD.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return dN.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),fx(this,tD.REQUEST_UPDATE_CONSTRAINTS,Array.from(hp(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return dN.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),fx(this,tD.REQUEST_UPDATE_CONSTRAINTS,Array.from(hp(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){dN.error(new jI(MI.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof rp&&(n=await n),e.push(uD(uD({},n),{},{direction:this.direction}))}catch(e){dN.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class zD extends ZI{constructor(e){super(),lD(this,"name","AudioProcessorDestination"),lD(this,"ID","0"),lD(this,"inputTrack",void 0),lD(this,"inputNode",void 0),lD(this,"audioProcessorContext",void 0),lD(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new jI(MI.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new jI(MI.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(eD.ON_TRACK,void 0),this.emit(eD.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(eD.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(eD.ON_NODE,this.inputNode))}}class GD extends ZI{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),lD(this,"constraintsMap",new Map),lD(this,"statsRegistry",[]),lD(this,"audioContext",void 0),lD(this,"trackId",void 0),lD(this,"direction",void 0),lD(this,"usageRegistry",[]),lD(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return px(this,tD.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return dN.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),fx(this,tD.REQUEST_UPDATE_CONSTRAINTS,Array.from(hp(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),fx(this,tD.REQUEST_UPDATE_CONSTRAINTS,Array.from(hp(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:t,processorName:n,type:r,cb:i}of this.statsRegistry)try{const o=i();e.push({processorID:t,processorName:n,type:r,stats:o})}catch(e){dN.error(new jI(MI.UNEXPECTED_ERROR,e.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:t}of this.usageRegistry)try{let n=t();n instanceof rp&&(n=await n),e.push(uD(uD({},n),{},{direction:this.direction}))}catch(e){dN.error("gather extension usage error",e)}return e}getDirection(){return this.direction}}class YD extends ZI{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),lD(this,"context",void 0),lD(this,"processSourceNode",void 0),lD(this,"outputTrack",void 0),lD(this,"processedNode",void 0),lD(this,"clonedTrack",void 0),lD(this,"outputNode",void 0),this.outputNode=new KD}setVolume(){}createOutputTrack(){throw new jI(MI.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class KD{disconnect(){}connect(){}}function qD(e){return new rp(((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const o=pI()?"canplay":"playing";i.addEventListener(o,(()=>{const e=i.videoWidth,n=i.videoHeight;!e&&hI()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(Lx),setTimeout((()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}function XD(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=DN(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!II()&&n.frameRate&&(t.frameRate=n.frameRate),uI()&&"object"==typeof t.frameRate&&(t.frameRate.max=60),hI()&&(t.frameRate={ideal:30,max:30}),t}function JD(e){const t={};return II()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,lI()&&e.ANS&&(t.googHighpassFilter=e.ANS))),t}function QD(e){const t=JD(e);if(e.encoderConfig){const n=MN(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),NI()&&(t.sampleRate=void 0),t}const ZD=e=>{const t=e._encoderConfig;if(!t)return;const{frameRate:n,width:r,height:i}=e.getMediaStreamTrackSettings();let{frameRate:o=n,width:s=r,height:a=i}=t;if(!o||!s||!a)return;s=Vx(s),a=Vx(a),o=Vx(o);const{max:c,min:l}=function(e,t,n){const r=200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75);return{min:Math.floor(r),max:Math.floor(4*r)}}(s,a,o),{bitrateMax:d,bitrateMin:u}=t||{};d||dN.debug("calculate bitrate: [w: ".concat(s,", h: ").concat(a,", fps: ").concat(o,"] => [brMax: ").concat(d,", brMin: ").concat(u,"]"));const{maxFramerate:h}=LO("ENCODER_CONFIG_LIMIT");return h&&"number"==typeof h&&(o=Math.min(o,h)),{frameRate:o,bitrateMax:d||c,bitrateMin:u||l,scaleResolutionDownBy:1,scale:0}},$D=async(e,t,n)=>await(async(e,t,n)=>{const r=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(Wx(""+t+n)).slice(0,16),i=r.slice(0,12),o=await window.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,e))})(e.buffer,t,n),ek=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new rp(((n,r)=>{t.toBlob((async e=>{if(t.remove(),e){const r=await tk(e);n({buffer:r,width:t.width,height:t.height})}else r(new jI(MI.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},tk=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};var nk,rk,ik,ok,sk,ak,ck,lk,dk,uk,hk,pk,fk,mk,gk,vk,yk,_k,Ek,bk,wk,Sk,Ak,Ck,Tk,Rk,Ik,xk,Ok,Nk,Dk,kk,Pk,Lk,Mk,jk,Uk,Bk,Fk,Vk;let Wk=(nk=vN({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),rk=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),ik=VD(),ok=Yx("LocalAudioTrack","_enabledMutex"),sk=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),ak=VD(),ck=Yx("LocalAudioTrack","_enabledMutex"),lk=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),dk=VD(),uk=VD(),hk=VD(),pk=vN({argsMap:e=>[e.getTrackId()]}),fk=VD(),mk=vN({argsMap:e=>[e.getTrackId()]}),gk=VD(),vk=vN({argsMap:e=>[e.getTrackId()]}),yk=vN({argsMap:(e,t)=>[e.getTrackId(),t.name]}),_k=vN({argsMap:e=>[e.getTrackId()]}),cD((Ek=class extends pD{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?FD.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),lD(this,"trackMediaType",KN.AUDIO),lD(this,"_encoderConfig",void 0),lD(this,"_trackSource",void 0),lD(this,"metadata",[]),lD(this,"_enabled",!0),lD(this,"_volume",100),lD(this,"_useAudioElement",!0),lD(this,"_bypassWebAudio",!1),lD(this,"processor",void 0),lD(this,"_processorContext",void 0),lD(this,"_processorDestination",void 0),lD(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new YD,LO("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),LO("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),dI()&&!mD?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){FI(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&FD.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void dN.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,fx(this,BN.NEED_REPLACE_TRACK,this).then((()=>{dN.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{dN.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!wN())throw new jI(MI.NOT_SUPPORTED,"your browser does not support setting the audio output device");await FD.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(dN.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await fx(this,BN.NEED_ENABLE_TRACK,this),dN.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(e){throw n||(this._enabled=!1),dN.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await fx(this,BN.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),dN.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,dN.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await fx(this,BN.NEED_MUTE_TRACK,this):await fx(this,BN.NEED_UNMUTE_TRACK,this))}getStats(){return Ax((()=>{dN.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),mx(this,BN.GET_STATS)||uD({},XN)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(qN.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(qN.ON_AUDIO_BUFFER),this._source.on(qN.ON_AUDIO_BUFFER,(t=>e(t)))}play(){dN.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(dN.debug("[".concat(this.getTrackId(),"] start audio playback in element")),FD.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){dN.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?FD.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];dN.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&FD.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await fx(this,BN.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return rp.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new jI(MI.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new jI(MI.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(eD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await fx(this,BN.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await fx(this,BN.NEED_REPLACE_TRACK,this))})),e.on(eD.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(eD.ON_TRACK),e.removeAllListeners(eD.ON_NODE)}bindProcessorContextEvents(e){e.on(tD.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(tD.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof YD&&(this._trackSource=new SD(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new GD(this._source.context,this.getTrackId(),"local"),t=new zD(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(qN.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(FD.stop(this.getTrackId()),this._source.play()),fx(this,BN.NEED_REPLACE_MIXING_TRACK,this).then((()=>{dN.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{dN.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[nk],Object.getOwnPropertyDescriptor(Ek.prototype,"setVolume"),Ek.prototype),cD(Ek.prototype,"setPlaybackDevice",[rk,ik],Object.getOwnPropertyDescriptor(Ek.prototype,"setPlaybackDevice"),Ek.prototype),cD(Ek.prototype,"setEnabled",[ok,sk,ak],Object.getOwnPropertyDescriptor(Ek.prototype,"setEnabled"),Ek.prototype),cD(Ek.prototype,"setMuted",[ck,lk,dk],Object.getOwnPropertyDescriptor(Ek.prototype,"setMuted"),Ek.prototype),cD(Ek.prototype,"getStats",[uk],Object.getOwnPropertyDescriptor(Ek.prototype,"getStats"),Ek.prototype),cD(Ek.prototype,"setAudioFrameCallback",[hk],Object.getOwnPropertyDescriptor(Ek.prototype,"setAudioFrameCallback"),Ek.prototype),cD(Ek.prototype,"play",[pk,fk],Object.getOwnPropertyDescriptor(Ek.prototype,"play"),Ek.prototype),cD(Ek.prototype,"stop",[mk,gk],Object.getOwnPropertyDescriptor(Ek.prototype,"stop"),Ek.prototype),cD(Ek.prototype,"close",[vk],Object.getOwnPropertyDescriptor(Ek.prototype,"close"),Ek.prototype),cD(Ek.prototype,"pipe",[yk],Object.getOwnPropertyDescriptor(Ek.prototype,"pipe"),Ek.prototype),cD(Ek.prototype,"unpipe",[_k],Object.getOwnPropertyDescriptor(Ek.prototype,"unpipe"),Ek.prototype),Ek),Hk=(bk=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),wk=VD(),Sk=Yx("MicrophoneAudioTrack","_enabledMutex"),Ak=vN({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),Ck=VD(),Tk=vN({argsMap:e=>[e.getTrackId()]}),cD((Rk=class extends Wk{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?MN(t.encoderConfig):{},r,LO("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),lD(this,"_config",void 0),lD(this,"_deviceName","default"),lD(this,"_constraints",void 0),lD(this,"_originalConstraints",void 0),lD(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(SI()||AI())&&gD.bindInterruptDetectorTrack(this)}async setDevice(e){if(dN.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const t=await PD.getDeviceById(e),n={};n.audio=uD({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await OD(n,this.getTrackId())}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await OD({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await PD.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}dN.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return dN.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(dN.info("[".concat(this.getTrackId(),"] start setEnabled"),e),LO("AUTO_RESET_AUDIO_ROUTE")&&(pI()||TI())){const t=navigator.audioSession;t&&(e||(t.type="playback"),t.type="auto")}if(!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(r=this._source.clonedTrack)||void 0===r||r.stop(),n||(this._enabled=!1);try{await fx(this,BN.NEED_DISABLE_TRACK,this)}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const i=uD({},this._constraints),o=PD.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{n||(this._enabled=!0);const e=await OD({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await fx(this,BN.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),dN.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}dN.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(SI()||AI())&&gD.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((pI()||TI())&&this._enabled&&!this._isClosed&&gD.duringInterruption){const e=async()=>{gD.off(AN.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(dN.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};gD.on(AN.IOS_INTERRUPTION_END,e)}else dN.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(GN.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=PD.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await OD({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(tD.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(tD.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[bk,wk],Object.getOwnPropertyDescriptor(Rk.prototype,"setDevice"),Rk.prototype),cD(Rk.prototype,"setEnabled",[Sk,Ak,Ck],Object.getOwnPropertyDescriptor(Rk.prototype,"setEnabled"),Rk.prototype),cD(Rk.prototype,"close",[Tk],Object.getOwnPropertyDescriptor(Rk.prototype,"close"),Rk.prototype),Rk),zk=(Ik=vN({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),xk=VD(),Ok=vN({argsMap:e=>[e.getTrackId()]}),Nk=VD(),Dk=vN({argsMap:e=>[e.getTrackId()]}),kk=VD(),Pk=vN({argsMap:e=>[e.getTrackId()]}),Lk=VD(),Mk=vN({argsMap:e=>[e.getTrackId()]}),jk=VD(),Uk=vN({argsMap:e=>[e.getTrackId()]}),Bk=vN({argsMap:e=>[e.getTrackId()]}),Fk=VD(),cD((Vk=class extends Wk{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),lD(this,"source",void 0),lD(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(qN.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(GN.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){FI(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[Ik,xk],Object.getOwnPropertyDescriptor(Vk.prototype,"startProcessAudioBuffer"),Vk.prototype),cD(Vk.prototype,"pauseProcessAudioBuffer",[Ok,Nk],Object.getOwnPropertyDescriptor(Vk.prototype,"pauseProcessAudioBuffer"),Vk.prototype),cD(Vk.prototype,"seekAudioBuffer",[Dk,kk],Object.getOwnPropertyDescriptor(Vk.prototype,"seekAudioBuffer"),Vk.prototype),cD(Vk.prototype,"resumeProcessAudioBuffer",[Pk,Lk],Object.getOwnPropertyDescriptor(Vk.prototype,"resumeProcessAudioBuffer"),Vk.prototype),cD(Vk.prototype,"stopProcessAudioBuffer",[Mk,jk],Object.getOwnPropertyDescriptor(Vk.prototype,"stopProcessAudioBuffer"),Vk.prototype),cD(Vk.prototype,"close",[Uk],Object.getOwnPropertyDescriptor(Vk.prototype,"close"),Vk.prototype),cD(Vk.prototype,"setAudioBufferPlaybackSpeed",[Bk,Fk],Object.getOwnPropertyDescriptor(Vk.prototype,"setAudioBufferPlaybackSpeed"),Vk.prototype),Vk);class Gk extends Wk{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=vD().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,kx(8,"track-mix-")),lD(this,"trackList",void 0),lD(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(dN.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):dN.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){dN.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}yx(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof Gk?t.emit(zN.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}class Yk extends wD{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(qN.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),lD(this,"audioBuffer",void 0),lD(this,"sourceNode",void 0),lD(this,"startPlayTime",0),lD(this,"startPlayOffset",0),lD(this,"pausePlayTime",0),lD(this,"options",void 0),lD(this,"currentLoopCount",0),lD(this,"currentPlaybackSpeed",100),lD(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):dN.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const Kk=new Map;class qk{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(dN.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){lD(this,"trackId",void 0),lD(this,"config",void 0),lD(this,"onFirstVideoFrameDecoded",void 0),lD(this,"onVideoStateChanged",void 0),lD(this,"freezeTimeCounterList",[]),lD(this,"renderFreezeAccTime",0),lD(this,"isKeepLastFrame",!1),lD(this,"timeUpdatedCount",0),lD(this,"freezeTime",0),lD(this,"playbackTime",0),lD(this,"lastTimeUpdatedTime",0),lD(this,"autoplayFailed",!1),lD(this,"videoTrack",void 0),lD(this,"videoElement",void 0),lD(this,"cacheVideoElement",void 0),lD(this,"renderStats",void 0),lD(this,"_videoState",oD.VideoStateStopped),lD(this,"videoElementCheckInterval",void 0),lD(this,"videoElementFreezeTimeout",void 0),lD(this,"_videoElementStatus",iD.NONE),lD(this,"isGettingVideoDimensions",!1),lD(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return dN.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),lD(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===gD.curState&&(dN.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(aI())),CI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),lD(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=iD.PLAYING;break;case"loadeddata":if(this.videoState=oD.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(e){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=iD.CANPLAY;break;case"stalled":this.videoElementStatus=iD.STALLED;break;case"suspend":this.videoElementStatus=iD.SUSPEND;break;case"pause":this.videoElementStatus=iD.PAUSED,pI()||TI()||dI()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(dN.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=iD.WAITING;break;case"abort":this.videoElementStatus=iD.ABORT;break;case"ended":this.videoElementStatus=iD.ENDED;break;case"emptied":this.videoElementStatus=iD.EMPTIED;break;case"error":{const e=this.videoElement.error;e&&(this.videoElementStatus=iD.ERROR,dN.error("[".concat(this.trackId,"] media error: ").concat(e.message," (").concat(e.code,")")));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,XP.lastVisibleTime<XP.lastHiddenTime||n<XP.lastHiddenTime||n<XP.lastVisibleTime)return;for(t>LO("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),lD(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(dN.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(aI())),CI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),gD.on(AN.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),gD.on(AN.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&UD(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(dN.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):dN.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=iI();if(("Safari"===n.name&&15===Number(n.version)||SI())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return dN.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const r=n.getContext("2d");return r?(r.drawImage(this.videoElement,0,0,n.width,n.height),new rp(((r,i)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await tk(e);r({buffer:t,width:n.width,height:n.height})}else i(new jI(MI.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await ek(e)}destroy(){this.renderStats=void 0,gD.off(AN.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),gD.off(AN.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=oD.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=iD.INIT,!this.videoElementCheckInterval&&(Xk.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{(function(e){return e!==document.body&&document.body.contains(e)})(this.videoElement)||(this.videoElementStatus=iD.DESTROYED)}),1e3),LO("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const r=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.videoElementFreezeTimeout=window.setTimeout(i,LO("VIDEO_FREEZE_DURATION")))},i=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===oD.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=oD.VideoStateFrozen:document.addEventListener("visibilitychange",r))},o=(e,t)=>{if(this.videoElementStatus===iD.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=t.mediaTime):this.renderStats={lastTs:t.mediaTime,curTs:t.mediaTime,lastRenderNum:0,renderNum:0},n){const e=t.presentationTime-n.presentationTime;this.videoState===oD.VideoStateStarting&&(this.videoState=oD.VideoStateDecoding),this.videoState===oD.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(i,LO("VIDEO_FREEZE_DURATION"))),e<LO("VIDEO_FREEZE_DURATION")&&this.videoState===oD.VideoStateFrozen&&(this.videoState=oD.VideoStateDecoding),e>LO("VIDEO_FREEZE_DURATION")&&XP.lastVisibleTime>=XP.lastHiddenTime&&n.timestamp>XP.lastVisibleTime&&n.timestamp>XP.lastHiddenTime&&(this.renderFreezeAccTime+=e)}n=uD(uD({},t),{},{timestamp:e})}var r,s;LO("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=(s=this.videoElement).requestVideoFrameCallback)||void 0===r||r.call(s,o))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,o)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),NI()&&!LO("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const n=iI();"Safari"===n.name&&15===Number(n.version)||SI()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,hI()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,hI()&&this.videoElement.load());const r=this.videoElement.play();void 0!==r&&r.catch((e=>{dN.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){Xk.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=iD.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{dN.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{dN.error(e)})),this.autoplayFailed=!1,DI()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};DI()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),jD()}}const Xk=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class Jk extends qk{constructor(e){super(e),lD(this,"container",void 0),lD(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await ek(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",LO("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var Qk,Zk,$k,eP,tP,nP,rP,iP,oP,sP,aP,cP,lP,dP,uP,hP,pP,fP,mP,gP,vP,yP,_P,EP,bP,wP,SP,AP,CP,TP,RP,IP,xP,OP;let NP=(Qk=vN({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),Zk=VD(),$k=vN({argsMap:e=>[e.getTrackId()]}),eP=Yx("LocalVideoTrack","_enabledMutex"),tP=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),nP=VD(),rP=Yx("LocalVideoTrack","_enabledMutex"),iP=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),oP=VD(),sP=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),aP=VD(),cP=VD(),lP=vN({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),dP=VD(),uP=VD(),hP=VD(),pP=VD(),fP=VD(),mP=VD(),gP=VD(),vP=vN({argsMap:(e,t)=>[e.getTrackId(),t.name]}),yP=vN({argsMap:e=>[e.getTrackId()]}),_P=vN({argsMap:e=>[e.getTrackId()]}),EP=vN({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),bP=class e extends pD{get videoHeight(){if(dI()){const{height:e}=this._mediaStreamTrack.getSettings();return this._videoHeight=e,this._videoHeight}return this._videoHeight}get videoWidth(){if(dI()){const{width:e}=this._mediaStreamTrack.getSettings();return this._videoWidth=e,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==iD.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,r,i,o){if(super(e,i),lD(this,"trackMediaType",KN.VIDEO),lD(this,"_player",void 0),lD(this,"isUseScaleResolutionDownBy",!1),lD(this,"_videoVisibleTimer",null),lD(this,"_previousVideoVisibleStatus",void 0),lD(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),lD(this,"_encoderConfig",void 0),lD(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),lD(this,"_optimizationMode",void 0),lD(this,"_videoHeight",void 0),lD(this,"_videoWidth",void 0),lD(this,"_forceBitrateLimit",void 0),lD(this,"_enabled",!0),lD(this,"_processorDestination",void 0),lD(this,"_processorContext",void 0),dI()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=n,this._optimizationMode=r,this._hints=o||[],-1===this._hints.indexOf(FN.SCREEN_TRACK))this.updateBitrateFromProfile();else if(gI(eI.CHROME,115)&&-1!==sI().indexOf("Windows")){const t=function(e,t){if("VideoFrame"in window&&"TransformStream"in window&&bN().supportWebRTCInsertableStream){const n=new MediaStreamTrackProcessor(e),r=new MediaStreamTrackGenerator({kind:"video"});let i,o,s=Date.now();const a=()=>{c&&(clearInterval(c),c=void 0),i&&(i.close(),i=void 0),e.stop(),o=void 0,r.removeEventListener("ended",a)};let c=window.setInterval((()=>{if(o&&i&&Date.now()-s>(null!=t?t:1e3))try{"live"===r.readyState?o.enqueue(i.clone()):a()}catch(e){a()}}),null!=t?t:1e3);const l=new TransformStream({transform:(e,t)=>{"live"===r.readyState?(o=t,s=Date.now(),void 0===i?(i=e,t.enqueue(e.clone())):(t.enqueue(i),i=e)):e.close()}});return r.addEventListener("ended",a),n.readable.pipeThrough(l).pipeTo(r.writable),r}}(e);t&&(dN.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(FN.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new HD(this.getTrackId(),"local"),this._processorDestination=new WD(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(dN.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}dN.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=uD(uD(uD({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new qk(n):this._player=new Jk(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(GN.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),LO("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,dN.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(dN.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await fx(this,BN.NEED_DISABLE_TRACK,this)}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void dN.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await fx(this,BN.NEED_ENABLE_TRACK,this)}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}dN.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,dN.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await fx(this,BN.NEED_MUTE_TRACK,this):await fx(this,BN.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new jI(MI.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(e=DN(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=XD({encoderConfig:e});(dI()||pI()||TI())&&(t.deviceId=void 0),dN.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(e){const t=new jI(MI.UNEXPECTED_ERROR,e.toString());throw dN.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}}this._encoderConfig=e,-1===this._hints.indexOf(FN.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await fx(this,BN.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(dN)}}getStats(){return Ax((()=>{dN.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),mx(this,BN.GET_STATS)||uD({},JN)}async setBeautyEffect(e){dN.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await ek(e)}async setBitrateLimit(e){dN.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e&&(this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate))}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void dN.error(MI.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await fx(this,BN.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(e){throw this._optimizationMode=t,dN.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}dN.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return dN.error(MI.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,dN.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){qD(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(Lx)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new jI(MI.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");dN.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=DN(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(FN.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await fx(this,BN.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(dN)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;const{bitrateMax:r,bitrateMin:i}=this._encoderConfig;if(null==i||null==r){const{max:o,min:s}=function(e,t,n,r,i){const o=LO("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===o)return{min:r,max:i};if(void 0===i){var s;const a=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));i="STANDARD_BITRATE"===o?4*a:2*a,r=null!==(s=r)&&void 0!==s?s:a}else{var a;r=null!==(a=r)&&void 0!==a?a:Math.floor(i/10)}return{min:r,max:i}}(e,t,n,i,r);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=o,dN.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(o,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=qI.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=yN.reportApiInvoke(null,{tag:nx.TRACER,name:tx.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new jI(MI.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new jI(MI.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=uD(uD({},r),DN(t))),r=wx(r);const i=kx(8,"track-video-cloned-"),o=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,r,wx(this._scalabilityMode),this._optimizationMode,i,wx(this._hints));return t&&r&&o.setEncoderConfiguration(r),dN.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new jI(MI.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new jI(MI.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}sendSeiData(e){if(Ax((()=>{yN.reportApiInvoke(null,{name:tx.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:nx.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!LO("ENABLE_VIDEO_SEI")||!LO("ENABLE_ENCODED_TRANSFORM"))return void dN.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new jI(MI.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void dN.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const r=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===r?this.safeEmit("sei-to-send",e):dN.warning("SEI is not supported by ".concat(r))}bindProcessorDestinationEvents(){this.processorDestination.on(eD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await fx(this,BN.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await fx(this,BN.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(eD.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(tD.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(tD.REQUEST_CONSTRAINTS)}},cD(bP.prototype,"play",[Qk,Zk],Object.getOwnPropertyDescriptor(bP.prototype,"play"),bP.prototype),cD(bP.prototype,"stop",[$k],Object.getOwnPropertyDescriptor(bP.prototype,"stop"),bP.prototype),cD(bP.prototype,"setEnabled",[eP,tP,nP],Object.getOwnPropertyDescriptor(bP.prototype,"setEnabled"),bP.prototype),cD(bP.prototype,"setMuted",[rP,iP,oP],Object.getOwnPropertyDescriptor(bP.prototype,"setMuted"),bP.prototype),cD(bP.prototype,"setEncoderConfiguration",[sP,aP],Object.getOwnPropertyDescriptor(bP.prototype,"setEncoderConfiguration"),bP.prototype),cD(bP.prototype,"getStats",[cP],Object.getOwnPropertyDescriptor(bP.prototype,"getStats"),bP.prototype),cD(bP.prototype,"setBeautyEffect",[lP,dP],Object.getOwnPropertyDescriptor(bP.prototype,"setBeautyEffect"),bP.prototype),cD(bP.prototype,"getCurrentFrameData",[uP],Object.getOwnPropertyDescriptor(bP.prototype,"getCurrentFrameData"),bP.prototype),cD(bP.prototype,"getCurrentFrameImage",[hP],Object.getOwnPropertyDescriptor(bP.prototype,"getCurrentFrameImage"),bP.prototype),cD(bP.prototype,"setBitrateLimit",[pP],Object.getOwnPropertyDescriptor(bP.prototype,"setBitrateLimit"),bP.prototype),cD(bP.prototype,"setOptimizationMode",[fP],Object.getOwnPropertyDescriptor(bP.prototype,"setOptimizationMode"),bP.prototype),cD(bP.prototype,"setScalabiltyMode",[mP],Object.getOwnPropertyDescriptor(bP.prototype,"setScalabiltyMode"),bP.prototype),cD(bP.prototype,"updateMediaStreamTrackResolution",[gP],Object.getOwnPropertyDescriptor(bP.prototype,"updateMediaStreamTrackResolution"),bP.prototype),cD(bP.prototype,"pipe",[vP],Object.getOwnPropertyDescriptor(bP.prototype,"pipe"),bP.prototype),cD(bP.prototype,"unpipe",[yP],Object.getOwnPropertyDescriptor(bP.prototype,"unpipe"),bP.prototype),cD(bP.prototype,"close",[_P],Object.getOwnPropertyDescriptor(bP.prototype,"close"),bP.prototype),cD(bP.prototype,"replaceTrack",[EP],Object.getOwnPropertyDescriptor(bP.prototype,"replaceTrack"),bP.prototype),bP),DP=(wP=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),SP=VD(),AP=Yx("CameraVideoTrack","_enabledMutex"),CP=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),TP=VD(),RP=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),IP=VD(),xP=vN({argsMap:e=>[e.getTrackId()]}),OP=class e extends NP{get __className__(){return"CameraVideoTrack"}constructor(e,t,n,r,i,o){super(e,DN(t.encoderConfig),r,i,o),lD(this,"_config",void 0),lD(this,"_originalConstraints",void 0),lD(this,"_constraints",void 0),lD(this,"_enabled",!0),lD(this,"_deviceName","default"),lD(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(SI()||AI())&&!function(){const e=iI();if(e.os!==$R.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&RI()&&this._enabled&&!this._isClosed&&(dN.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=DN(this._config.encoderConfig),gD.on(AN.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),gD.on(AN.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(dN.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const t=await PD.getDeviceById(e),n={};n.video=uD({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await OD(n,this.getTrackId())}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await OD({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await PD.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}dN.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){dN.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:uD(uD({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await OD(t,this.getTrackId())}catch(t){throw dN.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),t.toString()),e=await OD({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=uD({},t.video),dN.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(dN.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await OD({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await fx(this,BN.NEED_ENABLE_TRACK,this)}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),dN.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await fx(this,BN.NEED_DISABLE_TRACK,this)}catch(e){throw dN.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}dN.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new jI(MI.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");e=DN(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate||e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate||e.bitrateMin);const n=bx(this._config);n.encoderConfig=e;const r=XD(n);(dI()||pI()||TI())&&(r.deviceId=void 0),dN.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new jI(MI.UNEXPECTED_ERROR,e.toString());throw dN.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),t}this._config=n,this._constraints=r,this._originalConstraints=r,this._encoderConfig=e,-1===this._hints.indexOf(FN.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await fx(this,BN.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw(dN)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((pI()||TI())&&this._enabled&&!this._isClosed&&gD.duringInterruption){const e=async()=>{gD.off(AN.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(dN.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};gD.on(AN.IOS_INTERRUPTION_END,e)}else dN.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(GN.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=PD.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await OD({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),gD.off(AN.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),gD.off(AN.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=uD(uD({},r),DN(t))),r=wx(r);const i=kx(8,"track-cam-cloned-"),o=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,wx(uD(uD({},this._config),{},{encoderConfig:r})),wx(this._constraints),wx(this._scalabilityMode),this._optimizationMode,i);return t&&r&&o.setEncoderConfiguration(r),dN.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(n)),o}bindProcessorContextEvents(){this.processorContext.on(tD.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(e){n(e)}})),this.processorContext.on(tD.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}},cD(OP.prototype,"setDevice",[wP,SP],Object.getOwnPropertyDescriptor(OP.prototype,"setDevice"),OP.prototype),cD(OP.prototype,"setEnabled",[AP,CP,TP],Object.getOwnPropertyDescriptor(OP.prototype,"setEnabled"),OP.prototype),cD(OP.prototype,"setEncoderConfiguration",[RP,IP],Object.getOwnPropertyDescriptor(OP.prototype,"setEncoderConfiguration"),OP.prototype),cD(OP.prototype,"close",[xP],Object.getOwnPropertyDescriptor(OP.prototype,"close"),OP.prototype),OP);function kP(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=uD(uD({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?dN.debug("[".concat(e,"] set content hint to"),n.optimizationMode):dN.debug("[".concat(e,"] set content hint failed")))):dN.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var PP,LP,MP,jP,UP,BP,FP,VP,WP,HP,zP,GP;class YP extends hD{getUserId(){return this._userId}constructor(e,t,n,r){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(r.clientId,"_").concat(kx(5,""))),lD(this,"_userId",void 0),lD(this,"_uintId",void 0),lD(this,"_isDestroyed",!1),lD(this,"store",void 0),lD(this,"processor",void 0),lD(this,"processorContext",void 0),this._userId=t,this._uintId=n,this.store=r}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,dN.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let KP=(PP=vN({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),LP=vN({argsMap:e=>[e.getTrackId()]}),MP=vN({argsMap:(e,t)=>[e.getTrackId(),t.name]}),jP=vN({argsMap:e=>[e.getTrackId()]}),cD((UP=class extends YP{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==iD.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),lD(this,"_videoVisibleTimer",null),lD(this,"_previousVideoVisibleStatus",void 0),lD(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),lD(this,"trackMediaType",KN.VIDEO),lD(this,"_videoWidth",void 0),lD(this,"_videoHeight",void 0),lD(this,"_player",void 0),lD(this,"processorDestination",void 0),lD(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new HD(this.getTrackId(),"remote"),this.processorDestination=new WD(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Ax((()=>{dN.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),mx(this,BN.GET_STATS)||uD({},$N)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(dN.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}dN.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=uD(uD({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new qk(n):this._player=new Jk(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(YN.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(YN.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(YN.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),LO("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,dN.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){qD(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(Lx)}_updatePlayerSource(){dN.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=qI.checkOneElementVisible(i),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=yN.reportApiInvoke(null,{tag:nx.TRACER,name:tx.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(e){throw new jI(MI.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new jI(MI.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(eD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(eD.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(zN.SEI_RECEIVED,e)}}).prototype,"play",[PP],Object.getOwnPropertyDescriptor(UP.prototype,"play"),UP.prototype),cD(UP.prototype,"stop",[LP],Object.getOwnPropertyDescriptor(UP.prototype,"stop"),UP.prototype),cD(UP.prototype,"pipe",[MP],Object.getOwnPropertyDescriptor(UP.prototype,"pipe"),UP.prototype),cD(UP.prototype,"unpipe",[jP],Object.getOwnPropertyDescriptor(UP.prototype,"unpipe"),UP.prototype),UP),qP=(BP=vN({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),FP=vN({argsMap:(e,t)=>[e.getTrackId(),t]}),VP=vN({argsMap:e=>[e.getTrackId()]}),WP=vN({argsMap:e=>[e.getTrackId()]}),HP=vN({argsMap:(e,t)=>[e.getTrackId(),t.name]}),zP=vN({argsMap:e=>[e.getTrackId()]}),cD((GP=class extends YP{get isPlaying(){return this._useAudioElement?FD.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),lD(this,"trackMediaType",KN.AUDIO),lD(this,"_source",void 0),lD(this,"_useAudioElement",!0),lD(this,"_volume",100),lD(this,"processorContext",void 0),lD(this,"processorDestination",void 0),lD(this,"_played",!1),lD(this,"_bypassWebAudio",!1),LO("DISABLE_WEBAUDIO")?(this._source=new YD,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new SD(e,!0),LO("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(qN.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(YN.FIRST_FRAME_DECODED)})),this.processorContext=new GD(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new zD(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(qN.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(qN.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(qN.ON_AUDIO_BUFFER),this._source.on(qN.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?FD.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!wN())throw new jI(MI.NOT_SUPPORTED,"your browser does not support setting the audio output device");await FD.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Ax((()=>{dN.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),mx(this,BN.GET_STATS)||uD({},QN)}play(){dN.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(dN.debug("[".concat(this.getTrackId(),"] use audio element to play")),FD.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){dN.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?FD.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];dN.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&FD.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new jI(MI.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new jI(MI.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new jI(MI.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(eD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(eD.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(eD.ON_TRACK),this.processorDestination.removeAllListeners(eD.ON_NODE)}}).prototype,"setVolume",[BP],Object.getOwnPropertyDescriptor(GP.prototype,"setVolume"),GP.prototype),cD(GP.prototype,"setPlaybackDevice",[FP],Object.getOwnPropertyDescriptor(GP.prototype,"setPlaybackDevice"),GP.prototype),cD(GP.prototype,"play",[VP],Object.getOwnPropertyDescriptor(GP.prototype,"play"),GP.prototype),cD(GP.prototype,"stop",[WP],Object.getOwnPropertyDescriptor(GP.prototype,"stop"),GP.prototype),cD(GP.prototype,"pipe",[HP],Object.getOwnPropertyDescriptor(GP.prototype,"pipe"),GP.prototype),cD(GP.prototype,"unpipe",[zP],Object.getOwnPropertyDescriptor(GP.prototype,"unpipe"),GP.prototype),GP);const XP=new class extends ZI{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),lD(this,"_lastHiddenTime",0),lD(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),dN.debug("current web page is ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};class JP extends ZI{constructor(e,t){super(),lD(this,"trackMediaType",KN.DATA),lD(this,"_version",1),lD(this,"_type",3),lD(this,"_config",void 0),lD(this,"_originDataChannel",void 0),lD(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),lD(this,"_dataStreamPacketHandler",{serialize:e=>e,deserialize:e=>e}),lD(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return LO("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new rp(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new jI(MI.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new jI(MI.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new jI(MI.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[aD.OPEN,aD.CLOSE,aD.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,r]=t;e.removeEventListener(n,r)})),this._datachannelEventMap.clear()}}class QP extends JP{constructor(e){super(e),lD(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(LO("SHOW_DATASTREAM2_LOG")&&dN.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let r=e.data.slice(this._dataStreamPacketHeader.byteLength);r=this._dataStreamPacketHandler.deserialize(r),this.emit(aD.MESSAGE,r)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class ZP extends JP{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}function $P(){const e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout((()=>Hv.revokeObjectURL(e)),0),new Worker(Hv.createObjectURL(e))}var eL=function(e){return e[e.AUDIO_LEVEL=1]="AUDIO_LEVEL",e[e.METADATA=2]="METADATA",e}(eL||{});function tL(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.getUint8(0);if(71!==n)return;const r=e.getUint16(1),i=3+r,o=new Uint8Array(e.byteLength-i);o.set(new Uint8Array(e.buffer,i,e.byteLength-i));const s={m:n,tlvLen:r,tlv:[],frame:o};let a=3;for(;a<i;){const n=e.getUint8(a),r=e.getUint16(a+1),i=3;if(n===eL.AUDIO_LEVEL){let o=e.getUint8(a+i);for(let t=1;t<r;t++)o=o<<8|e.getUint8(a+i+t);s.tlv.push({tag:n,length:r,value:t?127^o>>1:127&o})}else if(n===eL.METADATA){const t=new Uint8Array(r);for(let n=0;n<r;n++)t[n]=e.getUint8(a+i+n);s.tlv.push({tag:n,length:r,value:t})}a+=i+r}return s}const nL=new Map;async function rL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!bN().supportWebRTCEncodedTransform)return void dN.warning("browser not support audio encoded transform");if(nL.has(e))return;if(!e.track)return;const n={track:e.track};if(lI()){if(!e.createEncodedStreams)return void dN.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void dN.error("create audio-encoded-streams error",e&&e.message)}const o=new TransformStream({transform(i,o){n.controller||(n.controller=o),e.track&&e.track.id!==n.track.id&&(dN.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const s=t.metadata&&t.metadata();s?function(e,t){const{chunk:n,controller:r}=t;n.data=function(e,t,n){const r=n.byteLength,i=r+1+2,o=3+i,s=new ArrayBuffer(e.byteLength+o),a=new DataView(s);a.setUint8(0,71),a.setUint16(1,i),a.setUint8(3,t),a.setUint16(4,r);for(let l=0;l<r;l++)a.setUint8(6+l,n[l]);const c=new Uint8Array(a.buffer);return c.set(new Uint8Array(e),o),c.buffer}(n.data,eL.METADATA,e),r.enqueue(n)}(s,{sender:e,chunk:i,controller:o}):o.enqueue(i)}});i.readable.pipeThrough(o).pipeTo(i.writable)}else if(dI()){if("undefined"==typeof RTCRtpScriptTransform)return void dN.warning("browser not support RTCRtpScriptTransform");const t=$P(),i=new MessageChannel;await new rp((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"tx",port:i.port2},[i.port2]);e.transform=o,await new rp((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(dN.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=nL.get(e);if(t){nL.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){dN.warning(e&&e.message)}}}nL.set(e,n),e.track.addEventListener("ended",r)}const iL=127,oL=1e-10,sL=139/13,aL=new Map;function cL(e,t,n){const r="".concat(e,"-").concat(t,"-").concat(n);let i=0;if(aL.has(r))i=aL.get(r);else{const o=.5;i=Math.log(function(e,t){const n=e-t;t<n&&(t=n);let r=1;for(let i=e,o=1;i>t;i--,o++)r=r*i/o;return r}(t,e))+e*Math.log(o)+(t-e)*Math.log(1-o)-Math.log(n)+n*e,aL.set(r,i)}return i<oL&&(i=oL),i}function lL(e,t,n){const r=t.length,i=e.length/r;let o=!1;for(let s=0,a=0;s<r;s++){let r=0;for(let t=a+i;a<t;a++)e[a]>n&&r++;t[s]!==r&&(t[s]=r,o=!0)}return o}window.cache=aL;let dL=0;class uL{constructor(e){lD(this,"id",void 0),lD(this,"immediates",[]),lD(this,"lastNonSilence",-1),lD(this,"immediateSpeechActivityScore",oL),lD(this,"lastLevelChangedTime",Date.now()),lD(this,"levels",[]),lD(this,"longs",[]),lD(this,"longSpeechActivityScore",oL),lD(this,"mediums",[]),lD(this,"mediumSpeechActivityScore",oL),lD(this,"minLevel",0),lD(this,"nextMinLevel",0),lD(this,"nextMinLevelWindowLength",0),lD(this,"energyScore",0),this.id=e||"".concat(dL++),this.immediates.length=50,this.mediums.length=10,this.longs.length=1,this.levels.length=this.immediates.length}computeImmediates(){const e=this.immediates,t=this.levels,n=this.minLevel+sL;let r=!1;for(let i=0;i<e.length;++i){let o=t[i];o<n&&(o=0);const s=Math.floor(o/sL);e[i]!==s&&(e[i]=s,r=!0)}return r}computeLongs(){return lL(this.mediums,this.longs,4)}computeMediums(){return lL(this.immediates,this.mediums,7)}evaluateImmediateSpeechActivityScore(){this.immediateSpeechActivityScore=cL(this.immediates[0],13,.78)}evaluateLongSpeechActivityScore(e){this.longSpeechActivityScore=cL(this.longs[0],10,47),this.longSpeechActivityScore>oL&&(this.lastNonSilence=e)}evaluateMediumSpeechActivityScore(){this.mediumSpeechActivityScore=cL(this.mediums[0],5,24)}evaluateSpeechActivityScores(e){this.computeImmediates()&&(this.evaluateImmediateSpeechActivityScore(),this.computeMediums()&&(this.evaluateMediumSpeechActivityScore(),this.computeLongs()&&this.evaluateLongSpeechActivityScore(e)))}getLastLevelChangedTime(){return this.lastLevelChangedTime}getLevels(){var e;return"[".concat(yi(e=[...this.levels]).call(e).join(),"]")}getSpeechActivityScore(e){switch(e){case 0:return this.immediateSpeechActivityScore;case 1:return this.mediumSpeechActivityScore;case 2:return this.longSpeechActivityScore;default:throw new Error("interval "+e)}}levelChanged(e,t){if(this.lastLevelChangedTime<=t){this.lastLevelChangedTime=t;let n=e;return e<0&&(n=0),e>iL&&(n=iL),this.levels.unshift(n),this.levels.length>this.immediates.length&&this.levels.pop(),this.updateMinLevel(n),n>=this.minLevel+sL?n:n/2}return-1}levelTimedOut(){this.levelChanged(0,this.lastLevelChangedTime)}updateMinLevel(e){if(0!==e){if(0===this.minLevel||this.minLevel>e)return this.minLevel=e,this.nextMinLevel=0,void(this.nextMinLevelWindowLength=0);if(0===this.nextMinLevel)return this.nextMinLevel=e,void(this.nextMinLevelWindowLength=1);if(this.nextMinLevel>e&&(this.nextMinLevel=e),this.nextMinLevelWindowLength++,this.nextMinLevelWindowLength>=750){let e=Math.sqrt(this.minLevel*this.nextMinLevel);e<0?e=0:e>iL&&(e=iL),this.minLevel=e,this.nextMinLevel=0,this.nextMinLevelWindowLength=0}}}}class hL{constructor(e){lD(this,"algorithm",void 0),this.algorithm=e}execute(){let e=!this.algorithm;if(!e)try{const t=this.algorithm.runInDecisionMaker(this);t<=0?e=!0:setTimeout(this.execute.bind(this),t)}catch(t){e=!0}e&&this.algorithm&&this.algorithm.decisionMakerExited(this)}}class pL{constructor(e,t,n){lD(this,"isDominant",void 0),lD(this,"energyRanking",void 0),lD(this,"energyScore",void 0),this.isDominant=e,this.energyRanking=t,this.energyScore=n}}class fL extends ZI{constructor(e){super(),lD(this,"dominantId",null),lD(this,"lastDecisionTime",0),lD(this,"lastLevelChangedTime",0),lD(this,"lastLevelIdleTime",0),lD(this,"relativeSpeechActivities",[]),lD(this,"speakers",new Map),lD(this,"enableSilence",!1),lD(this,"timeoutToSilenceInterval",0),lD(this,"decisionMaker",null),lD(this,"loudest",[]),lD(this,"numLoudestToTrack",3),lD(this,"energyExpireTimeMs",250),lD(this,"energyAlphaPct",50),this.timeoutToSilenceInterval=e,this.enableSilence=e>0,this.relativeSpeechActivities.length=3}setLoudestConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.numLoudestToTrack=e,null!=t&&(this.energyExpireTimeMs=t),null!=n&&(this.energyAlphaPct=n),this.loudest.length>e&&this.loudest.splice(e)}getDominantSpeaker(){return this.dominantId}isAmongLoudest(e){return this.loudest.some((t=>t.id===e))}levelChanged(e,t){const n=Date.now(),r=this.getOrCreateSpeaker(e);this.lastLevelChangedTime<n&&(this.lastLevelChangedTime=n,this.maybeStartDecisionMaker());const i=r.levelChanged(t,n);return this.updateLoudestList(r,i,n)}runInDecisionMaker(e){return this.decisionMaker!==e||this.lastDecisionTime>0&&this.lastDecisionTime-this.lastLevelChangedTime>=15e3?-1:this._runInDecisionMaker()}decisionMakerExited(e){this.decisionMaker===e&&(this.decisionMaker=null)}destroy(){this.decisionMaker=null,this.loudest.length=0,this.speakers.clear(),this.removeAllListeners()}addSpeakers(e){e.forEach((e=>{this.speakers.has(e.id)||this.speakers.set(e.id,e)}))}removeSpeakers(e){e.forEach((e=>{this.speakers.delete(e.id)}))}getOrCreateSpeaker(e){let t=this.speakers.get(e);return t||(t=new uL(e),this.speakers.set(e,t),this.maybeStartDecisionMaker()),t}updateLoudestList(e,t,n){const r=e.id===this.dominantId;if(t<0){let t=0;for(;t<this.loudest.length&&this.loudest[t]!==e;)++t;return new pL(r,t,e.energyScore)}if(e.energyScore=Math.floor((this.energyAlphaPct*t+(100-this.energyAlphaPct)*e.energyScore+50)/100),0===this.numLoudestToTrack)return new pL(r,0,e.energyScore);const i=n-this.energyExpireTimeMs;let o=0;for(;o<this.loudest.length;){const t=this.loudest[o];if(t.getLastLevelChangedTime()<i&&this.loudest.length>=this.numLoudestToTrack)this.loudest.splice(o,1);else if(t.id!==e.id)++o;else if(this.loudest.splice(o,1),this.loudest.length<this.numLoudestToTrack)break}let s=0;for(;s<this.loudest.length&&!(this.loudest[s].energyScore<e.energyScore);)++s;return s<this.numLoudestToTrack&&(this.loudest.splice(s,0,e),this.loudest.length>this.numLoudestToTrack&&this.loudest.splice(this.numLoudestToTrack,1)),new pL(r,s,e.energyScore)}maybeStartDecisionMaker(){!this.decisionMaker&&this.speakers.size>0&&(this.decisionMaker=new hL(this),this.decisionMaker.execute())}makeDecision(e){let t=null,n=null;const r=this.speakers.size;let i=null;if(0===r)i=null;else if(1===r){var o;const t=hp(o=this.speakers).call(o).next().value;this.enableSilence&&t&&(i=t.id,t.evaluateSpeechActivityScores(e),e-t.lastNonSilence>this.timeoutToSilenceInterval&&(i=null))}else{let t=null==this.dominantId?null:this.speakers.get(this.dominantId);if(null==t){const e=this.speakers.entries().next();e.value&&(i=e.value[0],t=e.value[1])}else i=t.id;null!=t&&t.evaluateSpeechActivityScores(e);const n=this.relativeSpeechActivities;let r=2;for(const o of this.speakers.entries()){const[s,a]=o;if(a===t)continue;a.evaluateSpeechActivityScores(e);for(let e=0;e<n.length;++e){const r=null==t?oL:t.getSpeechActivityScore(e);n[e]=Math.log(a.getSpeechActivityScore(e)/r)}const c=n[0],l=n[1],d=n[2];c>3&&l>2&&d>0&&l>r&&(r=l,i=s)}this.enableSilence&&null!=t&&i===t.id&&e-t.lastNonSilence>this.timeoutToSilenceInterval&&(i=null)}null==i&&!this.enableSilence||i===this.dominantId||(t=this.dominantId,this.dominantId=i,n=this.dominantId),null==n&&!this.enableSilence||n===t||this.emit("ActiveSpeakerChanged",n)}_runInDecisionMaker(){const e=Date.now(),t=300-(e-this.lastLevelIdleTime);let n=0;t<=0?(0!==this.lastLevelIdleTime&&this.timeoutIdleLevels(e),this.lastLevelIdleTime=e):n=t;let r=300-(e-this.lastDecisionTime);return r<=0&&(this.lastDecisionTime=e,this.makeDecision(e),r=300-(Date.now()-e)),r>0&&n>r&&(n=r),n}timeoutIdleLevels(e){const t=[];for(const r of hp(n=this.speakers).call(n)){var n;const i=e-r.getLastLevelChangedTime();36e5<i&&(null==this.dominantId||r.id!==this.dominantId)?t.push(r.id):300<i&&r.levelTimedOut()}t.forEach((e=>this.speakers.delete(e)))}}const mL=new Map;let gL=null,vL=null,yL=[];const _L=1e3/15,EL=new Map,bL=new Map;class wL{get samples(){return this.actives+this.inactives}get activeRate(){return this.actives/this.samples}constructor(e,t){lD(this,"id",void 0),lD(this,"track",void 0),lD(this,"score",0),lD(this,"active",!0),lD(this,"muted",!1),lD(this,"timer",0),lD(this,"actives",0),lD(this,"inactives",0),this.id=e,this.track=t,this.setActive(EL.size<3)}autoCheckActive(){this.autoSetActive(),this.autoAdjustActive(),this.resetTimer(),this.actives=0,this.inactives=0}autoSetActive(){const e=this.active;this.active=this.activeRate>=.8;const{actives:t,inactives:n}=function(){const e=[],t=[];return Array.from(hp(EL).call(EL)).forEach((n=>{n.active?e.push(n):t.push(n)})),{actives:e,inactives:t}}();if(t.length>3){let e;t.forEach((t=>{(!e||e.score>t.score)&&(e=t)})),e&&e.setActive(!1)}if(t.length<3&&n.length>0){let t;n.forEach((e=>{(!t||t.score<e.score)&&e.id!==this.id&&(t=e)})),t&&e&&!this.active&&(t.samples>40&&t.activeRate-this.activeRate>.4?t.setActive(!0):this.active=!0)}this.setMuted(!this.active)}setActive(e){this.active=e,this.resetTimer(),this.setMuted(!e)}autoAdjustActive(){this.active?this.autoSwitchToInactive():this.autoSwitchToActive()}autoSwitchToActive(){const e=function(e){let t;return Array.from(hp(EL).call(EL)).forEach((n=>{!n.active||n.id===e||n.samples<40||(!t||n.score<t.score)&&(t=n)})),t}(this.id);e&&this.activeRate-e.activeRate>.4&&(e.setActive(!1),this.setActive(!0))}autoSwitchToInactive(){const e=function(e){let t;return Array.from(hp(EL).call(EL)).forEach((n=>{n.active||n.id===e||n.samples<40||(!t||n.score>t.score)&&(t=n)})),t}(this.id);e&&e.activeRate-this.activeRate>.4&&(e.setActive(!0),this.setActive(!1))}addSample(e){e?this.actives+=1:this.inactives+=1,this.samples>_L&&this.autoCheckActive()}setMuted(e){this.track&&(this.track.enabled=!e,this.muted=e)}resetTimer(){this.clearTimer(),this.timer=window.setTimeout((()=>{if(0!==this.samples)return this.samples<50?this.resetTimer():void this.autoCheckActive()}),1e3)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=0)}}let SL;function AL(e){const t=EL.get(e);t&&(EL.delete(e),t.clearTimer())}const CL=new Map,TL=new Map;async function RL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!bN().supportWebRTCEncodedTransform)return void dN.warning("browser not support audio encoded transform");if(CL.has(e))return;const n={track:e.track};if(lI()){if(!e.createEncodedStreams)return void dN.warning("browser not support createEncodedStreams() API");gI(eI.CHROME,87,116)||(t.enableTopn=!1);let i=null;try{i=e.createEncodedStreams()}catch(e){return void dN.error("create audio-encoded-streams error",e&&e.message)}const o=new TransformStream({transform(i,o){n.controller||(n.controller=o),e.track&&e.track.id!==n.track.id&&(dN.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)),t.enableTopn?function(e,t,n){var r;const i=tL(new DataView(t.data));if(!i)return n.enqueue(t);const o=e.track.id;TL.set(o,e.track);const s=null===(r=i.tlv.find((e=>e.tag===eL.AUDIO_LEVEL)))||void 0===r?void 0:r.value;let a=0;"number"==typeof s&&(a=127-s);const c=Math.round(Math.pow(10,a/60)-1),{selected:l,speaker:d}=function(e,t){let n=mL.get(e);if(n||(n=function(e){const t=new uL;return mL.set(e,t),gL||(gL=new fL(LO("TOPN_SILENCE_THRESHOLD")||500),gL.on("ActiveSpeakerChanged",(e=>{null!=e&&(vL=e)}))),gL.addSpeakers([t]),t}(e)),mL.size<=3)return{selected:!0,speaker:n};if(!gL)throw new Error("no active speaker detector");return gL.levelChanged(n.id,t),yL=gL.loudest.map((e=>e.id)),vL&&!Lr(yL).call(yL,vL)&&yL.length>=3&&yL.pop(),{selected:Lr(yL).call(yL,n.id)||n.id===vL,speaker:n}}(e,c),u=function(e,t,n){const r=EL.get(e)||new wL(e,t);return r.score=n,EL.set(e,r),function(e){if(bL.set(e,!0),!SL)return void(SL=Date.now());const t=Date.now();t-SL>1e3&&(bL.get(e)?bL.set(e,!1):(AL(e),bL.delete(e)),SL=t)}(e),r}(o,e.track,d.energyScore);u.addSample(l),u.active&&(t.data=i.frame.buffer,n.enqueue(t))}(e,i,o):t.enableMetadata?function(e,t,n){const r=tL(new DataView(e.data));if(!r)return t.enqueue(e);const i=r.tlv.find((e=>e.tag===eL.METADATA));i&&n&&i.value instanceof Uint8Array&&n(i.value),e.data=r.frame.buffer,t.enqueue(e)}(i,o,t.onMetadata):o.enqueue(i)}});i.readable.pipeThrough(o).pipeTo(i.writable)}else if(dI()){if("undefined"==typeof RTCRtpScriptTransform)return void dN.warning("browser not support RTCRtpScriptTransform");const t=$P(),i=new MessageChannel;await new rp((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new rp((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(dN.debug("audio track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=t}function r(){e.track.removeEventListener("ended",r),function(e){const t=CL.get(e);if(t){!function(e){const t=mL.get(e);t&&(mL.delete(e),gL&&(gL.removeSpeakers([t]),0===mL.size&&(gL.destroy(),gL=null)))}(e),AL(e.track.id),CL.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){dN.warning(e&&e.message)}}}(e)}CL.set(e,n),e.track.addEventListener("ended",r)}function IL(e,t,n){let r=new Uint8Array(e,t,n),i=[],o=0;for(;i.length<n;)o+3<n&&0===r[o]&&0===r[o+1]&&3===r[o+2]&&(0===r[o+3]||1===r[o+3]||2===r[o+3]||3===r[o+3])?(i.push(r[o],r[o+1],r[o+3]),o+=4):(i.push(r[o]),o++);return new Uint8Array(i)}const xL=new Map;async function OL(e,t){if(!bN().supportWebRTCEncodedTransform)return void dN.warning("browser not support video encoded transform");if(xL.has(e))return;if(!e.track)return;const n={track:e.track};if(lI()){if(!e.createEncodedStreams)return void dN.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(e){return void dN.error("create video-encoded-streams error",e&&e.message)}const o=[];t.on("sei-to-send",(e=>{o.push(e)}));const s=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(dN.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const s=o.shift();s&&(t.data=function(e,t){const n=function(e){const t=e.length;let n=[],r=0;for(;r<t;)r+2<t&&0===e[r]&&0===e[r+1]&&(0===e[r+2]||1===e[r+2]||2===e[r+2]||3===e[r+2])?(n.push(e[r],e[r+1],3,e[r+2]),r+=3):(n.push(e[r]),r++);return new Uint8Array(n)}(t),r=n.length,i=Math.floor(r/255),o=r%255,s=new Uint8Array(6+i+1+r+e.byteLength);s[0]=0,s[1]=0,s[2]=0,s[3]=1,s[4]=6,s[5]=101;let a=0;for(;a<i;)s[6+a]=255,a++;return s[6+a]=o,a++,s.set(n,6+a),s.set(new Uint8Array(e),6+a+r),s.buffer}(t.data,s)),i.enqueue(t)}});i.readable.pipeThrough(s).pipeTo(i.writable)}else{if(!dI())return;{if("undefined"==typeof RTCRtpScriptTransform)return void dN.warning("browser not support RTCRtpScriptTransform");const i=$P(),o=new MessageChannel;await new rp((e=>i.onmessage=t=>{"registered"===t.data&&e(void 0)}));const s=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=s,await new rp((e=>i.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{o.port1.postMessage({sei:e})})),o.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id&&(dN.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=i}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=xL.get(e);if(t){xL.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(e){dN.warning(e&&e.message)}}}xL.set(e,n),e.track.addEventListener("ended",r)}const NL=new Map;async function DL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!bN().supportWebRTCEncodedTransform)return void dN.warning("browser not support video encoded transform");if(!e.track)return;if(NL.has(e)){const n=NL.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(lI()){if(!e.createEncodedStreams)return void dN.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(e){return void dN.error("create video-encoded-streams error",e&&e.message)}const i=new TransformStream({transform(t,i){n.controller||(n.controller=i),e.track&&e.track.id!==n.track.id&&(dN.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const o=function(e){const t=new DataView(e.data);let n=0;for(;n+4<e.data.byteLength;){if(0===t.getUint8(n+0)&&0===t.getUint8(n+1)&&0===t.getUint8(n+2)&&1===t.getUint8(n+3)&&6===t.getUint8(n+4)){let r=n+6,i=0,o=0;for(;255===(o=t.getUint8(r++));)i+=255;i+=o;const s=IL(e.data,r,i);return new Uint8Array(s)}n++}return null}(t);o&&n.onSei&&n.onSei(o),i.enqueue(t)}});t.readable.pipeThrough(i).pipeTo(t.writable)}else if(dI()){if("undefined"==typeof RTCRtpScriptTransform)return void dN.warning("browser not support RTCRtpScriptTransform");const t=$P(),i=new MessageChannel;await new rp((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const o=new RTCRtpScriptTransform(t,{name:"rx",port:i.port2},[i.port2]);e.transform=o,await new rp((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),i.port1.onmessage=t=>{var i;t.data.transformed&&e.track&&(null===(i=e.track)||void 0===i?void 0:i.id)!==n.track.id?(dN.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}!function(e){const t=NL.get(e);if(t){NL.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(e){dN.warning(e&&e.message)}}}(e)}NL.set(e,n),e.track.addEventListener("ended",r)}!function(){const e=iI();EN.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),EN.getStreamFromExtension=e.name===eI.CHROME&&Number(e.version)>34,EN.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),EN.supportMinBitrate=e.name===eI.CHROME||e.name===eI.EDGE,EN.supportSetRtpSenderParameters=function(){const e=iI();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!OI()||!(!dI()&&!cI())||e.name===eI.FIREFOX&&Number(e.version)>=64)}(),e.name===eI.SAFARI&&(Number(e.version)>=14?EN.supportDualStream=!0:EN.supportDualStream=!1),EN.webAudioMediaStreamDest=function(){const e=iI();return!(e.name===eI.SAFARI&&Number(e.version)<12)}(),EN.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,EN.supportWebGL="undefined"!=typeof WebGLRenderingContext,EN.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,OI()||(EN.webAudioWithAEC=!0),EN.supportShareAudio=function(){const e=iI();return(e.os===$R.WIN_10||e.os===$R.WIN_81||e.os===$R.WIN_7||e.os===$R.LINUX||e.os===$R.MAC_OS||e.os===$R.CHROMIUM_OS)&&e.name===eI.CHROME&&Number(e.version)>=74}(),EN.supportDataChannel=!!(fI(76)||function(e){const t=iI();return!(t.name!==eI.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||yI(14)),EN.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!hI()&&!!e&&e.prototype.setConfiguration instanceof Function}(),EN.supportWebRTCEncodedTransform=function(){const e=iI();return"Chrome"===e.name&&Number(e.version)>=87||"Safari"===e.name&&Number(e.version)>=15}(),EN.supportWebRTCInsertableStream=function(){const e=iI();return(e.name===eI.CHROME||e.name===eI.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),EN.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,EN.supportWebCrypto="undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle,Ex((()=>{EN.supportDualStreamEncoding=function(){const e=iI();return!!LO("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&LO("CHROME_DUAL_STREAM_USE_ENCODING"))}(),dN.debug("browser ua: ",navigator.userAgent),dN.info("browser info: ",e),dN.info("browser compatibility: ",EN)}))}();const kL=["CHINA","GLOBAL"],PL=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],LL=[],ML=[];function jL(e,t){return!!t&&LL.some((n=>n.uid===e&&n.channelName===t))}function UL(){return ML.length>0}var BL=Uw.forEach,FL=Gr("forEach")?[].forEach:function(e){return BL(this,e,arguments.length>1?arguments[1]:void 0)};Dn({target:"Array",proto:!0,forced:[].forEach!==FL},{forEach:FL});var VL=tr("Array","forEach"),WL=vr,HL=tt,zL=u,GL=VL,YL=Array.prototype,KL={DOMTokenList:!0,NodeList:!0},qL=function(e){var t=e.forEach;return e===YL||zL(YL,e)&&t===YL.forEach||HL(KL,WL(e))?GL:t},XL=r(qL),JL=Ze,QL=fo;Dn({target:"Object",stat:!0,forced:i((function(){QL(1)}))},{keys:function(e){return QL(JL(e))}});var ZL=r(ee.Object.keys),$L=r(ii),eM=r(vi),tM=Dn,nM=ai,rM=Zc,iM=$,oM=Vn,sM=Yn,aM=Q,cM=mm,lM=mt,dM=al,uM=Zb("slice"),hM=lM("species"),pM=Array,fM=Math.max;tM({target:"Array",proto:!0,forced:!uM},{slice:function(e,t){var n,r,i,o=aM(this),s=sM(o),a=oM(e,s),c=oM(void 0===t?s:t,s);if(nM(o)&&(n=o.constructor,(rM(n)&&(n===pM||nM(n.prototype))||iM(n)&&null===(n=n[hM]))&&(n=void 0),n===pM||void 0===n))return dM(o,a,c);for(r=new(void 0===n?pM:n)(fM(c-a,0)),i=0;a<c;a++,i++)a in o&&cM(r,i,o[a]);return r.length=i,r}});var mM=tr("Array","slice"),gM=u,vM=mM,yM=Array.prototype,_M=function(e){var t=e.slice;return e===yM||gM(yM,e)&&t===yM.slice?vM:t},EM=r(_M);function bM(e,t,n,r,i){var o,s,a,c={};return XL(o=ZL(r)).call(o,(function(e){c[e]=r[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=$L(s=eM(a=EM(n).call(n)).call(a)).call(s,(function(n,r){return r(e,t,n)||n}),c),i&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),void 0===c.initializer&&(Fb(e,t,c),c=null),c}let wM=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),SM=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),AM=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),CM=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),TM=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.DATASTREAM2_NOT_AVAILABLE=27]="DATASTREAM2_NOT_AVAILABLE",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),RM=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),IM=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e.RECOVER_NOTIFICATION="recover_notification",e}({}),xM=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),OM=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),NM=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),DM=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),kM=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({});function PM(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw dN.error("Invalid Channel Name ".concat(e)),new _N(MI.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function LM(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||GI(e,1,255)))throw new _N(MI.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&dN.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let MM=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({});const jM={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},UM={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function BM(e,t){WI(e.url,"".concat(t,".url"),1,1e3,!1),zI(e.x)||FI(e.x,"".concat(t,".x"),0,1e4),zI(e.y)||FI(e.y,"".concat(t,".y"),0,1e4),zI(e.width)||FI(e.width,"".concat(t,".width"),0,1e4),zI(e.height)||FI(e.height,"".concat(t,".height"),0,1e4),zI(e.zOrder)||FI(e.zOrder,"".concat(t,".zOrder"),0,255),zI(e.alpha)||FI(e.alpha,"".concat(t,".alpha"),0,1,!1)}const FM={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let VM=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),WM=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),HM=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function zM(e){if(!e.channelName)throw new _N(MI.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new _N(MI.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&WI(e.token,"info.token",1,2047),LM(e.uid),PM(e.channelName),!0}let GM=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),YM=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),KM=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),qM=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),XM=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),JM=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e.UPDATE_GATEWAY_CONFIG="update-gateway-config",e}({}),QM=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),ZM=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),$M=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({});const ej=[$M.AFRICA,$M.ASIA,$M.CHINA,$M.EUROPE,$M.GLOBAL,$M.INDIA,$M.JAPAN,$M.NORTH_AMERICA,$M.OCEANIA,$M.OVERSEA,$M.SOUTH_AMERICA];let tj=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({});const nj={CHINA:{},ASIA:{CODE:tj.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:tj.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:tj.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:tj.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:tj.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:tj.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:tj.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:tj.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:tj.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:tj.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:tj.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:tj.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:tj.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};TO&&(nj.CHINA={CODE:tj.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let rj=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e.UPDATE_CLIENT_ROLE_OPTIONS="update_client_role_options",e}({});function ij(e){return!!e&&!(!e.uplink||!e.id)&&void 0!==e.uplink.max_bitrate&&void 0!==e.uplink.min_bitrate}class oj extends ZI{constructor(e,t){super(),wC(this,"onICEConnectionStateChange",void 0),wC(this,"onConnectionStateChange",void 0),wC(this,"onDTLSTransportStateChange",void 0),wC(this,"onDTLSTransportError",void 0),wC(this,"onICETransportStateChange",void 0),wC(this,"onFirstAudioReceived",void 0),wC(this,"onFirstVideoReceived",void 0),wC(this,"onFirstAudioDecoded",void 0),wC(this,"onFirstVideoDecoded",void 0),wC(this,"onFirstVideoDecodedTimeout",void 0),wC(this,"onSelectedLocalCandidateChanged",void 0),wC(this,"onSelectedRemoteCandidateChanged",void 0),wC(this,"onICECandidateError",void 0),wC(this,"getLocalVideoStats",void 0)}}class sj extends oj{constructor(e,t){super(e,t),wC(this,"establishPromise",void 0)}}let aj=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),cj=function(e){return e.UDP_RELAY="udp_relay",e.UDP_TCP_RELAY="udp_tcp_relay",e.TCP_RELAY="tcp_relay",e.RELAY="relay",e}({}),lj=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.UDP_TCP_RESTART=1]="UDP_TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.TCP_RESTART=3]="TCP_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({});const dj=["disconnected","failed"];let uj=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),hj=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),pj=function(e){return e.AudioMetadata="audioMetadata",e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),fj=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),mj=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),gj=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),vj=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),yj=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),_j=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Ej=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),bj=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),wj=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),Sj=function(e){return e.ABORT="abort",e}({}),Aj=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),Cj=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({});const Tj={[wM.ACCESS_POINT]:{[CM.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[CM.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[CM.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[CM.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[CM.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[CM.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[CM.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[wM.UNILBS]:{[AM.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[AM.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[AM.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[AM.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[AM.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[AM.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[AM.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[AM.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[AM.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[AM.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[AM.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[AM.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[wM.STRING_UID_ALLOCATOR]:{[SM.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[SM.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[SM.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function Rj(e){const t=Tj[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===wM.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return n}const Ij={[TM.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[TM.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[TM.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[TM.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[TM.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[TM.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[TM.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[TM.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[TM.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[TM.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[TM.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[TM.DATASTREAM2_NOT_AVAILABLE]:{desc:"DATASTREAM2_NOT_AVAILABLE",action:"quit"},[TM.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[TM.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[TM.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[TM.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[TM.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[TM.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[TM.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[TM.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[TM.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[TM.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[TM.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[TM.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[TM.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[TM.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[TM.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[TM.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[TM.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[TM.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[TM.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[TM.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[TM.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[TM.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[TM.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[TM.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[TM.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[TM.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[TM.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[TM.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[TM.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[TM.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[TM.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[TM.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[TM.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[TM.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[TM.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[TM.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[TM.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[TM.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[TM.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[TM.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[TM.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[TM.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[TM.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[TM.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[TM.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[TM.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[TM.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[TM.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[TM.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[TM.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[TM.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[TM.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function xj(e){return Ij[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function Oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oj(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dj(e,t){if("string"==typeof e)return e;const{proxy:n,host:r,port:i}=e;if(t){const e=LO("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(r,"/ws/?p=").concat(Number(i)+150):"wss://".concat(r,":").concat(e,"/ws/?p=").concat(Number(i)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(i):"wss://".concat(r,":").concat(i)}const kj=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,Pj=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,Lj=/wss:\/\/(.+):([0-9]+)\/?/,Mj=/wss:\/\/(.[^\/]+)\/?/;let jj=0;class Uj{constructor(e,t){wC(this,"id",0),wC(this,"store",void 0),wC(this,"recordIndex",void 0),wC(this,"websockets",[]),wC(this,"try443PortDuration",2e3),wC(this,"forceCloseWSDuration",5e3),wC(this,"try443PortTimeout",null),wC(this,"forceCloseTimeout",null),wC(this,"isTry443PortFailed",!1),wC(this,"isNormalPortFailed",!1),wC(this,"useDoubleDomain",!1),wC(this,"useProxy",!1),wC(this,"startTime",Date.now()),this.id=++jj,this.try443PortDuration=LO("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout),this.forceCloseTimeout=null,this.try443PortTimeout=null}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];dN.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...r)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const r=LO("GATEWAY_DOMAINS"),i=Date.now(),o=[],s=r.find((t=>{var n;return Lr(n=e.host).call(n,t)}));s||(this.useDoubleDomain=!1);const a=[];if(this.useDoubleDomain)r.forEach((n=>{a.push(Dj(Nj(Nj({},e),{},{host:e.host.replace(s,n)}),t))}));else{const n=Nj({},e);if(t&&s){const e=r.find((e=>e!==s));e&&(n.host=n.host.replace(s,e))}a.push(Dj(n,t))}try{a.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",o.push(t),this.logger("ws is connecting:",t.url)}))}catch(r){if(this.logger("ws create failed"),o.forEach((e=>e.close())),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new _N(MI.WS_ERR,"init websocket failed! Error: ".concat(r.toString()))}const c=XR();this.store&&this.store.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},this.recordIndex),o.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(e.readyState));const r=o.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING));this.logger("".concat(t?"443":"47xx"," websocket closed, all failed: ").concat(r)),r&&(t||this.isTry443PortFailed||this.useProxy)?(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:QM.A_ROUND_WS_FAILED})):!t&&r&&!this.isNormalPortFailed&&this.try443PortTimeout&&(this.logger("all 47xx websocket is closed, try 443 port"),this.clearTimeout(),d()),t?this.isTry443PortFailed=r:this.isNormalPortFailed=r},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...o);const l=()=>{this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))},d=()=>{if(c.isResolved)return l();iI().os===$R.MAC_OS&&hI()&&l(),this.createWebSocket(e,!0,!0).then((e=>{c.resolve(e)})).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout((()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.forceCloseTimeout=null,l()}),this.forceCloseWSDuration)};return n||(()=>{if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout((()=>{this.forceCloseTimeout=null,l()}),this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{this.logger("2s timeout, isWebsocket created: ",c.isResolved),this.try443PortTimeout=null,d()}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,r){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,r;return[,t,n,r]=e.match(kj)||[],t||([,n,r]=e.match(Pj)||[]),n&&r||([,n,r]=e.match(Lj)||[]),n&&r||([,n]=e.match(Mj)||[]),n||dN.warning("un-destructible url: ",e),{proxy:t,host:n,port:r||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(dN.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function Bj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class Fj extends ZI{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Lr(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(kM.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(kM.CONNECTED):"closed"===this._state?this.emit(kM.CLOSED):"failed"===this._state&&this.emit(kM.FAILED))}resetReconnectCount(e){dN.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),wC(this,"connectionID",0),wC(this,"currentURLIndex",0),wC(this,"urls",[]),wC(this,"_reconnectMode","tryNext"),wC(this,"reconnectReason",void 0),wC(this,"_initMutex",void 0),wC(this,"name",void 0),wC(this,"_state","closed"),wC(this,"reconnectInterrupter",void 0),wC(this,"websocket",void 0),wC(this,"retryConfig",void 0),wC(this,"reconnectCount",0),wC(this,"forceCloseTimeout",5e3),wC(this,"onlineReconnectListener",void 0),wC(this,"useCompress",void 0),wC(this,"tryDoubleDomain",!1),wC(this,"use443PortOnly",!1),wC(this,"wsInflateLength",0),wC(this,"wsDeflateLength",0),wC(this,"closeEstablishingWs",(()=>{})),wC(this,"store",void 0),wC(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bj(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=r,this.use443PortOnly=i,this._initMutex=new Gx("websocket",o?o.clientId:void 0);const{timeout:s,timeoutFactor:a}=t,c=Math.max(300,Math.floor(3*s/5)),l=Math.max(1.2,Math.floor(8*a)/10);ux.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),vx.on(hx.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===ux.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=s,this.retryConfig.timeoutFactor=a))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this._reconnectMode="tryNext",this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=XR(),t=this.urls[this.currentURLIndex];LO("ENABLE_PREALLOC_PC")&&this.emit(vj.PRE_CONNECT_PC),this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(kM.CLOSED,(()=>{e.reject(new jI(MI.WS_DISCONNECT))})),this.once(kM.CONNECTED,e.resolve),await e.promise}catch(e){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void dN.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),dN.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new jI(MI.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new jI(MI.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=XR();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const r=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),dN.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},i=async e=>{var t;if(dN.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new jI(MI.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=mx(this,kM.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void dN.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n.reject(new jI(MI.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},o=e=>{this.emit(kM.ON_MESSAGE,e)},s=e=>{dN.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),LO("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=LO("GATEWAY_WSS_ADDRESS")),dN.debug("[".concat(this.name,"] start connect, url:"),e);const a=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,r&&r(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=s,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},a),this.joinGatewayRecordIndex=a}catch(e){const t="closed"===this.state,r=e instanceof jI,o=r&&e.code===MI.WS_ABORT,s=r&&e.code===MI.WS_ERR,c=r?e.message:e&&(e.reason||e.toString());dN.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(c)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:o?"aborted":"error",errors:[e]},a),t||s?(n.reject(t?new jI(MI.WS_DISCONNECT,"websocket is closed: ".concat(c)):new jI(MI.WS_ERR,"init websocket failed: ".concat(c))),s&&dN.error("[".concat(this.name,"] init websocket failed: ").concat(c))):i&&i(e)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;dN.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||vx.isOnline||!vx.onlineWaiter||(this.onlineReconnectListener=vx.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=qx(this.reconnectCount,this.retryConfig);dN.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await rp.race([Dx(t),this.onlineReconnectListener||new rp((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const r=async(e,t)=>{this.emit(kM.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)await r(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);dN.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),await r(this.urls[this.currentURLIndex],e)}else"recover"===e&&(dN.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.urls=await px(this,kM.REQUEST_NEW_URLS),this.currentURLIndex=0,await r(this.urls[this.currentURLIndex],e))}catch(n){var i;dN.error("[".concat(this.name,"] reconnect failed ").concat(n&&n.toString()));const r=null==n||null===(i=n.data)||void 0===i?void 0:i.desc;return Array.isArray(r)&&Lr(r).call(r,"dynamic key expired")?(this.emit(kM.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class Vj extends Fj{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=XR(),r=function(e,t){return new Uj(e,t)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{dN.debug("[choose-best-ws] close establishing websockets"),r.closeAllWebsockets(),n.reject(new jI(MI.WS_ABORT,"choose best websocket aborted"))};const i=LO("GATEWAY_DOMAINS");return dN.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),r.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class Wj extends Fj{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new rp(((n,r)=>{let i=!1;const o=[];this.closeEstablishingWs=()=>{dN.debug("[choose-best-ws] close establishing websockets"),o.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),r(new jI(MI.WS_ABORT,"choose best websocket aborted"))};const s=LO("GATEWAY_DOMAINS");let a;const c=e.indexOf("?h="),l=s.find((t=>-1!==c?Lr(e).call(e,t,c):Lr(e).call(e,t)));dN.debug("[choose-best-ws] currentDomain: ",l,", domains: ",s);let d=!this.tryDoubleDomain||!l;if(!d&&l){var u;const h=Date.now();try{s.forEach((t=>{const n=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),r=new WebSocket(n);r.binaryType="arraybuffer",o.push(r),dN.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(e){for(dN.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach((e=>e.close()));o.length;)o.pop();d=!0}null===(u=this.store)||void 0===u||u.recordJoinChannelService({urls:o.map((e=>e.url)),service:"gateway"},t),o.forEach((e=>{e.onopen=()=>{if(i)return;const t=Date.now()-h;dN.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),o.filter((t=>t!==e)).forEach((e=>{dN.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),i=!0,n(e)},e.onclose=e=>{a=e,i||o.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(dN.debug("[choose-best-ws] all websocket is closed"),i=!0,r(a))},e.onmessage=t=>{dN.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),Dx(this.forceCloseTimeout).then((()=>{o.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(d){var h;let i;dN.debug("[choose-best-ws] use single url: ",e),null===(h=this.store)||void 0===h||h.recordJoinChannelService({urls:[e],service:"gateway"},t);try{i=new WebSocket(e),o.push(i),i.binaryType="arraybuffer"}catch(e){const n=new jI(MI.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return dN.error("[".concat(this.name,"]").concat(n)),void r(n)}i.onopen=()=>{n(i)},i.onclose=e=>{r(e)},i.onmessage=e=>{dN.debug("[choose-best-ws]".concat(i.url," onmessage: ").concat(e.data))},Dx(this.forceCloseTimeout).then((()=>{i&&i.readyState!==WebSocket.OPEN&&i.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class Hj extends ZI{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===RM.CONNECTED?this.emit(IM.WS_CONNECTED):e===RM.RECONNECTING?this.emit(IM.WS_RECONNECTING,this._websocketReconnectReason):e===RM.CLOSED&&this.emit(IM.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),wC(this,"_disconnectedReason",void 0),wC(this,"_websocketReconnectReason",void 0),wC(this,"_connectionState",RM.CLOSED),wC(this,"reconnectToken",void 0),wC(this,"websocket",void 0),wC(this,"openConnectionTime",void 0),wC(this,"clientId",void 0),wC(this,"lastMsgTime",Date.now()),wC(this,"uploadCache",[]),wC(this,"uploadCacheInterval",void 0),wC(this,"rttRolling",new Qx(5)),wC(this,"pingpongTimer",void 0),wC(this,"wsInflateDataTimer",void 0),wC(this,"pingpongTimeoutCount",0),wC(this,"joinResponse",void 0),wC(this,"multiIpOption",void 0),wC(this,"initError",void 0),wC(this,"spec",void 0),wC(this,"store",void 0),wC(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(IM.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===NM.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===NM.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(ox.UID_BANNED);break;case 15:this.close(ox.IP_BANNED);break;case 16:this.close(ox.CHANNEL_BANNED)}if(t._type===NM.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case TM.ERR_LICENSE_MISSING:this.close(ox.LICENSE_MISSING);break;case TM.ERR_LICENSE_EXPIRED:this.close(ox.LICENSE_EXPIRED);break;case TM.ERR_LICENSE_MINUTES_EXCEEDED:this.close(ox.LICENSE_MINUTES_EXCEEDED);break;case TM.ERR_LICENSE_PERIOD_INVALID:this.close(ox.LICENSE_PERIOD_INVALID);break;case TM.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(ox.LICENSE_MULTIPLE_SDK_SERVICE);break;case TM.ERR_LICENSE_ILLEGAL:this.close(ox.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new Vj("gateway-".concat(this.clientId),this.spec.retryConfig,!0,LO("JOIN_GATEWAY_USE_DUAL_DOMAIN"),LO("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===RM.CONNECTED&&this.reconnect("retry",dx.OFFLINE)}))}async request(e,t,n,r){const i=kx(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new rp(((t,n)=>{if(this.connectionState===RM.CONNECTED)return t();const r=()=>{this.off(IM.WS_CLOSED,i),t()},i=()=>{this.off(IM.WS_CONNECTED,r),n(new _N(MI.WS_ABORT))};this.once(IM.WS_CONNECTED,r),this.once(IM.WS_CLOSED,i),e!==xM.PUBLISH&&e!==xM.PUBLISH_DATASTREAM&&e!==xM.SUBSCRIBE&&e!==xM.SUBSCRIBE_DATASTREAM&&e!==xM.UNSUBSCRIBE&&e!==xM.UNSUBSCRIBE_DATASTREAM&&e!==xM.UNPUBLISH&&e!==xM.UNPUBLISH_DATASTREAM&&e!==xM.CONTROL&&e!==xM.RESTART_ICE||this.once(IM.DISCONNECT_P2P,(()=>{n(new _N(MI.DISCONNECT_P2P))})),e!==xM.PUBLISH&&e!==xM.RESTART_ICE||this.once(IM.ABORT_P2P_EXECUTION,(()=>{n(new _N(MI.DISCONNECT_P2P))}))}));if(this.connectionState!==RM.CONNECTING&&this.connectionState!==RM.RECONNECTING||e===xM.JOIN||e===xM.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new rp(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(IM.WS_CLOSED,c),this.off(IM.WS_RECONNECTING,c),this.emit(IM.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new _N(MI.WS_ABORT,"type: ".concat(e))),this.off(IM.WS_CLOSED,c),this.off(IM.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(IM.WS_CLOSED,c),this.once(IM.WS_RECONNECTING,c),Dx(LO("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(dN.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(IM.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===RM.CLOSED||e===xM.LEAVE)throw new _N(MI.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===xM.JOIN||e===xM.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=xj(d),h=new _N(MI.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message,desc:u.desc});return"success"===u.action?l.message:(dN.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===TM.ERR_TOO_MANY_BROADCASTERS?e===xM.JOIN||e===xM.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===TM.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,dN.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",dx.MULTI_IP)):this.reconnect(u.action,dx.SERVER_ERROR),e===xM.JOIN||e===xM.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new rp((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void dN.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(OM.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=LO("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==RM.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),LO("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new rp(((t,n)=>{this.once(IM.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(IM.WS_CLOSED,(e=>n(this.initError||new _N(MI.WS_ABORT,e)))),this.connectionState=RM.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||ox.LEAVE,this.connectionState=RM.CLOSED,dN.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(IM.ABORT_P2P_EXECUTION);const e=await px(this,IM.REQUEST_JOIN_INFO),t=await this.request(xM.JOIN,e);if(!t)return this.emit(IM.REPORT_JOIN_GATEWAY,QM.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(IM.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=RM.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new _N(MI.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=gx(this,IM.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(xM.REJOIN,e);return!!t&&(this.connectionState=RM.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(NM.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(NM.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(NM.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(NM.MUTE_AUDIO,{uid:e.uid}):this.emit(NM.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(NM.MUTE_VIDEO,{uid:e.uid}):this.emit(NM.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(NM.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(NM.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(NM.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(NM.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(NM.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){dN.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xj(e.code);if(28===e.code&&"detail"in e&&(dN.info("[".concat(this.clientId,"] receive recover notification: "),e.detail),this.emit(IM.RECOVER_NOTIFICATION,e.detail)),"success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(ox.UID_BANNED),void this.close()):void this.reconnect(t.action,dx.SERVER_ERROR);dN.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=LO("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(dN.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>LO("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",dx.TIMEOUT):this.request(xM.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),LO("REPORT_STATS")&&this.send(xM.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(OM.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(kM.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(IM.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(kM.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(kM.CLOSED,(()=>{this.connectionState=RM.CLOSED})),this.websocket.on(kM.FAILED,(()=>{this._disconnectedReason=ox.NETWORK_ERROR,this.connectionState=RM.CLOSED})),this.websocket.on(kM.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===RM.CONNECTED?this.connectionState=RM.RECONNECTING:this.connectionState=RM.CONNECTING})),this.websocket.on(kM.WILL_RECONNECT,((e,t,n)=>{const r=gx(this,IM.IS_P2P_DISCONNECTED),i=r||"retry"!==e;r&&"retry"===e&&(dN.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=QM.P2P_DISCONNECTED),i&&(dN.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(IM.REPORT_JOIN_GATEWAY,t||QM.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(IM.DISCONNECT_P2P)),n(e)})),this.websocket.on(kM.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{dN.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",dx.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(IM.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof _N){if(e.code===MI.UNEXPECTED_RESPONSE&&e.data.code===TM.ERR_NO_AUTHORIZED)return this.initError=new _N(MI.TOKEN_EXPIRE,"dynamic key expired"),void this.close(ox.TOKEN_EXPIRE);dN.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",dx.SERVER_ERROR):(this.initError=e,this.close())}}))})),this.websocket.on(kM.REQUEST_NEW_URLS,((e,t)=>{px(this,IM.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(kM.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(NM.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(vj.PRE_CONNECT_PC,(()=>{this.emit(IM.PRE_CONNECT_PC)}))}}let zj=function(e){return e.NATIVE_RTC="native_rtc",e.NATIVE_RTM="native_rtm",e.WEB_RTC="web_rtc",e.WEB_RTM="web_rtm",e}({}),Gj=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function Yj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yj(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qj(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(LO("TURN_DOMAIN")):(dN.debug("Cannot recognized as ip address: ".concat(e,", use as host")),e)}function Xj(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(LO("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=LO("GATEWAY_DOMAINS");let r=n[1]&&Lr(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:i,ip:o}=e;if(t)return{address:"".concat(t,".").concat(n[r++%n.length],":").concat(i)};const s=/^[\.\:\d]+$/.test(o),a=s?"".concat(o.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(i):"".concat(o,":").concat(i);return s||dN.debug("Cannot recognized as ip address: ".concat(o,", use as host")),{ip:o,port:i,address:a}}))}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&"string"==typeof r){const e=r.split(";");for(let t=0;t<e.length;t++){var i;const r=e_(i=e[t]).call(i);n[t]&&r&&(n[t].ip6=r)}}const o=e.detail&&e.detail.candidate;let s;if(o){const[e,t]=o.split(":");e&&t&&(s={port:Number(t),ip:e,address:"".concat(e,":").concat(t)})}return{gatewayAddrs:n,apGatewayAddress:s,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Jj(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function Qj(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(Jj(t.width),"x").concat(Jj(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function Zj(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function $j(e,t){let n,r,i;switch(t){case Gj.CHOOSE_SERVER:r=4096,i="choose server";break;case Gj.CLOUD_PROXY:r=1048576,i="proxy";break;case Gj.CLOUD_PROXY_5:r=4194304,i="proxy5";break;case Gj.CLOUD_PROXY_FALLBACK:r=4194310,i="proxy fallback";break;default:throw new _N(MI.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>Kj(Kj({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:Kj(Kj({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new _N(MI.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function eU(e,t){return await rp.all(e.addresses.map((async e=>({address:qj(e.ip),tcpport:e.port,udpport:e.port,username:t&&LO("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():IO.username,password:t&&LO("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await QI(t.toString()):IO.password}))))}function tU(e,t){const n=t.getMediaStreamTrack(!0).getSettings(),r=t.videoHeight||n.height,i=t.videoWidth||n.width;return r&&i?Math.max(Math.min(r,i)/Math.min(Jj(e.height),Jj(e.width)),1):(dN.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function nU(e){let{candidateType:t,relayProtocol:n,type:r,address:i,port:o,protocol:s}=e;const a={candidateType:t,relayProtocol:n,protocol:s};if("local-candidate"!==r){const e=i.split(".");e.length>=4&&(e[1]="*",e[2]="*"),a.address=e.join("."),a.port=o}return a}function rU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:LO("SVC_MODE");if(LO("ENABLE_SVC"))return function(e){return e in mO}(e)?e:mO.L1T3}const iU={[aj.VIDEO]:[{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"},{key:"video-orientation",extensionName:"urn:3gpp:video-orientation"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"playout-delay",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"},{key:"video-content-type",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type"},{key:"color-space",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/color-space"},{key:"video-timing",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing"}],[aj.AUDIO]:[{key:"ssrc-audio-level",extensionName:"urn:ietf:params:rtp-hdrext:ssrc-audio-level"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}]};function oU(e,t,n){t.forEach((t=>{var r;const i=iU[e].find((e=>{var n;let{key:r}=e;return Lr(n=t.extensionName).call(n,r)}));if(!i)return;const o=n.find((e=>{let{extensionName:t}=e;return Lr(t).call(t,i.key)}));o&&Lr(r=o.extensionName).call(r,"gdpr_forbidden")&&(t.extensionName=o.extensionName)}))}function sU(e,t){t.forEach((t=>{var n;const r=iU[e].find((e=>{var n;let{key:r}=e;return Lr(n=t.extensionName).call(n,r)}));Lr(n=t.extensionName).call(n,"gdpr_forbidden")&&r&&(t.extensionName=r.extensionName)}))}function aU(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e||Lr(e).call(e,"abs-send-time")}function cU(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e||Lr(e).call(e,"draft-holmer-rmcat-transport-wide-cc-extensions-01")}function lU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lU(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:i,filterVideoFec:o,filterAudioFec:s,filterAudioCodec:a,filterVideoCodec:c}=t,{useXR:l}=n;let d=[],u=[],h=[],p=[],f=!1,m=!1;if(HO(e).mediaDescriptions.forEach((e=>{r&&r!==e.attributes.direction||("video"!==e.media.mediaType||f||(u=e.attributes.payloads,p=e.attributes.extmaps,f=!0),"audio"!==e.media.mediaType||m||(d=e.attributes.payloads,h=e.attributes.extmaps,m=!0))})),!p||0===u.length)throw new Error("Cannot get video capabilities from SDP.");if(!h||0===d.length)throw new Error("Cannot get audio capabilities from SDP.");if(u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),d.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),i&&(d=d.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),u=u.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),o&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),s&&(d=d.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(null==a?void 0:a.length)>0&&(d=d.filter((e=>{var t;return Lr(a).call(a,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0){const e=u.filter((e=>{var t;return Lr(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}));u=e.concat(i?[]:xU(e,u))}const g=LO("UNSUPPORTED_VIDEO_CODEC");return g&&g.length>0&&(u=u.filter((e=>!(e.rtpMap&&Lr(g).call(g,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:d,videoCodecs:u,audioExtensions:h,videoExtensions:p}}function hU(e){const t=HO(e);let n,r;for(const i of t.mediaDescriptions){if(!n){const e=i.attributes.iceUfrag,t=i.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!r){const e=i.attributes.fingerprints;e.length>0&&(r={fingerprints:e})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function pU(e,t){const n=[],r=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),i=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((e=>{var i;const o=null===(i=r.find((t=>t.ssrcIds[0]===e)))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){const e=r[0].ssrcIds[0],i=r[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?i:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function fU(e,t,n){const{cname:r}=e;let i=[];t&&(i=mU(t)),0===i.length&&(i=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}))),dN.debug("Using candidates from gateway."));const o={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},s={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let a;switch(e.dtlsParameters.role){case"server":a="passive";break;case"client":a="active";break;case"auto":a="actpass"}const c=TU(e.rtpCapabilities),l=[];return Array.isArray(n)&&n.length>0&&n.forEach((e=>{l.push({kind:aj.VIDEO,ssrcId:e.v,rtx:e.v_rtx,mslabel:"".concat(e.v,"_").concat(e.a)},{kind:aj.AUDIO,ssrcId:e.a,mslabel:"".concat(e.v,"_").concat(e.a)})})),{dtlsParameters:o,iceParameters:s,candidates:i,rtpCapabilities:c,setup:a,cname:r,preSSRCs:l}}function mU(e){let t=[];return e.ip&&"number"==typeof e.port&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],dN.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),dN.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function gU(e,t,n){const r=[],i=[];return e.forEach((e=>{let{ssrcId:o,rtx:s}=e;const a=kx(8,"track-"),c={ssrcId:o,attributes:dU({label:a,mslabel:n=n||kx(10,""),msid:"".concat(n," ").concat(a)},t&&{cname:t})};if(r.push(c),void 0!==s){const e={ssrcId:s,attributes:dU({label:a,mslabel:n,msid:"".concat(n," ").concat(a)},t&&{cname:t})};r.push(e),i.push({semantic:"FID",ssrcIds:[o,s]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:r,ssrcGroups:i}}function vU(e,t){t instanceof Wk&&e.attributes.payloads.forEach((e=>{var n;const r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!r||-1===["opus","pcmu","pcma","g722"].indexOf(r))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!hI()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}))}function yU(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function _U(e,t){var n;if(!(t instanceof NP&&t._encoderConfig&&-1===t._hints.indexOf(FN.SCREEN_TRACK)))return;const r=t._encoderConfig;bN().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Lr(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),bN().supportMinBitrate&&!Lr(n=t._hints).call(n,FN.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Lr(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(LO("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}function EU(e){if("video"!==e.media.mediaType)return;const t=iI();if(t.name!==eI.SAFARI&&t.os!==$R.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function bU(e,t,n){if(!t)return;let r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){const t=r.find((e=>cU(e.extensionName)));if(t){const n=t.extensionName;e.attributes.extmaps.find((e=>cU(e.extensionName)))||e.attributes.extmaps.push({entry:t.entry,extensionName:n});const r=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))}(i,e.attributes.payloads);r.forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>cU(e.extensionName)));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){const t=r.find((e=>aU(e.extensionName)));if(t){const n=t.extensionName;e.attributes.extmaps.find((e=>e.extensionName===n))||e.attributes.extmaps.push({entry:t.entry,extensionName:n});const r=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(i,e.attributes.payloads);r.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>aU(e.extensionName)));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function wU(e,t,n){if(hI())return;if("video"!==e.media.mediaType)return;if(!(t instanceof NP))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!LO("SIMULCAST"))return;if("vp9"===n&&LO("ENABLE_SVC"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId)),s={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let a=1;a<r;a++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+a,attributes:bx(i.attributes)}),s.ssrcIds.push(i.ssrcId+a),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+a,attributes:bx(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+a,o.ssrcIds[1]+a]}));e.attributes.ssrcGroups.unshift(s)}async function SU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:i,recv:o,sendrecv:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=uU(n,e,t,"sendonly"),i=uU(n,e,t,"recvonly"),o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(CU(r,i,"videoExtensions",o,s,a),CU(r,i,"videoCodecs",o,s,a),CU(r,i,"audioExtensions",o,s,a),CU(r,i,"audioCodecs",o,s,a),LO("RAISE_H264_BASELINE_PRIORITY")){const e=[],t=[];a.videoCodecs.forEach(((n,r)=>{var i;if("h264"===(null===(i=n.rtpMap)||void 0===i?void 0:i.encodingName.toLocaleLowerCase())){var o,s;const i=a.videoCodecs[r+1],c=i&&PU(n,i),l=null===(o=n.fmtp)||void 0===o?void 0:o.parameters["profile-level-id"],d=null===(s=n.fmtp)||void 0===s?void 0:s.parameters["packetization-mode"];!l||l!==LO("FIRST_H264_PROFILE_LEVEL_ID")||LO("FIRST_PACKETIZATION_MODE")&&d!==LO("FIRST_PACKETIZATION_MODE")?c?t.push([n,i]):t.push([n]):c?e.push([n,i]):e.push([n])}})),e.length>0&&t.length>0&&(dN.debug("raising H264 baseline profile priority"),a.videoCodecs.forEach(((n,r)=>{var i;if("h264"===(null===(i=n.rtpMap)||void 0===i?void 0:i.encodingName.toLocaleLowerCase())){const i=PU(n,a.videoCodecs[r+1]),o=e.shift()||t.shift()||[];o.length>0&&(i?a.videoCodecs.splice(r,2,...o):a.videoCodecs.splice(r,1,...o))}})),s.videoCodecs=s.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])!==LO("FIRST_H264_PROFILE_LEVEL_ID"))})),LO("FILTER_SEND_H264_BASELINE")&&(o.videoCodecs=o.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])!==LO("FIRST_H264_PROFILE_LEVEL_ID"))}))))}return{send:o,recv:s,sendrecv:a}}(e,t,r);try{n.close()}catch(e){}return{send:i,recv:o,sendrecv:s}}function AU(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=uU(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(CU(e,t,"videoExtensions",n,r,i),CU(e,t,"videoCodecs",n,r,i),CU(e,t,"audioExtensions",n,r,i),CU(e,t,"audioCodecs",n,r,i),LO("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){dN.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&(r.videoCodecs=r.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}function CU(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const s=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===s.indexOf(t)&&i[n].push(e)}))}}function TU(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...r.audioCodecs],i.videoCodecs=[...t.videoCodecs,...r.videoCodecs],i.audioExtensions=[...t.audioExtensions,...r.audioExtensions],i.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):i=r,n?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...n.audioCodecs,...r.audioCodecs],o.videoCodecs=[...n.videoCodecs,...r.videoCodecs],o.audioExtensions=[...n.audioExtensions,...r.audioExtensions],o.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):o=r,{send:i,recv:o}}function RU(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function IU(e,t,n,r){let i=[];if(e===aj.VIDEO){if(LO("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(i=t.videoCodecs.filter((e=>{var t;return Lr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===LO("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(i)||0===i.length){let e=[];const o=[],s=[],a=[];if(n.videoCodecs.forEach((t=>{const n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"";Lr(n).call(n,r)?e.push(t):Lr(n).call(n,"vp9")?o.push(t):Lr(n).call(n,"vp8")?s.push(t):Lr(n).call(n,"h264")&&a.push(t)})),0===e.length){let t="";0!==o.length?(e=o,t="vp9"):0!==s.length?(e=s,t="vp8"):0!==a.length&&(e=a,t="h264"),dN.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t))}0!==e.length&&(i=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(0===i.length&&(dN.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),LO("USE_PUB_RTX")||LO("USE_SUB_RTX")){const e=xU(i,t.videoCodecs);i=[...i,...e]}}else i=t.audioCodecs.filter((e=>{var t;return Lr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)})),0===i.length&&(dN.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter((e=>{var t;return Lr(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return i}function xU(e,t){const n=e.map((e=>e.payloadType.toString()));return t.filter((e=>e.rtpMap&&"rtx"===e.rtpMap.encodingName&&e.fmtp&&e.fmtp.parameters.apt&&Lr(n).call(n,e.fmtp&&e.fmtp.parameters.apt)))}async function OU(e,t,n){const r=t.toString(),i=DU(r,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:r});const o=await e.createAnswer();if(!o.sdp)throw new Error("cannot get answer sdp");let s=o.sdp;s=NU(s,n||{}),null==i||i(s||""),await e.setLocalDescription({type:"answer",sdp:s})}function NU(e,t,n){const r=HO(e),{useXR:i}=t;return r.mediaDescriptions.forEach((e=>{var t;e.attributes.mid&&(Array.isArray(n)&&!Lr(n).call(n,e.attributes.mid)||("audio"===e.media.mediaType&&RU(e),i&&Lr(t=["audio","video"]).call(t,e.media.mediaType)&&e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))))})),zO(r)}function DU(e,t,n,r){if(LO("SDP_LOGGING"))return dN.upload("exchanging ".concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{DU(e,"answer","local"===n?"remote":"local",r)}:void 0}function kU(e){const t=LO("COMPATIBLE_SDP_EXTENSION");return!!(Array.isArray(t)&&t.length>0)&&t.some((t=>Lr(e).call(e,t)))}function PU(e,t){try{var n;return(null===(n=e.fmtp)||void 0===n?void 0:n.parameters.apt)===t.payloadType.toString()}catch(e){return!1}}function LU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MU(e,t){return typeof LO(e)===t?LO(e):void 0}function jU(){try{const e=LO("EXPERIMENTS")||{};return"string"==typeof e||Array.isArray(e)?{}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}catch(e){return dN.debug("handle gateway attributes failed: ",e),{}}}const UU={};function BU(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&dN.debug("install service ".concat(e.name)),UU[e.name]=e}function FU(e){const t=UU[e];if(!t)throw new jI(MI.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function VU(e,t){return FU("DataStream").create(e,t)}function WU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WU(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const zU=new Map;class GU extends ZI{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(JM.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(JM.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){dN.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){var n,r,i;super(),wC(this,"store",void 0),wC(this,"joinInfo",void 0),wC(this,"key",void 0),wC(this,"ntpOffset",0),wC(this,"signal",void 0),wC(this,"role",void 0),wC(this,"inChannelInfo",{joinAt:null,duration:0}),wC(this,"spec",void 0),wC(this,"_state","DISCONNECTED"),wC(this,"_statsCollector",void 0),wC(this,"_disconnectedReason",void 0),wC(this,"isSignalRecover",!1),wC(this,"hasChangeBGPAddress",!1),wC(this,"trafficStatsInterval",void 0),wC(this,"networkQualityInterval",void 0),wC(this,"_joinGatewayStartTime",0),wC(this,"_signalTimeout",!1),wC(this,"_clientRoleOptions",void 0),wC(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?(n={spec:HU(HU({},t),{},{retryConfig:t.websocketRetryConfig}),store:e},null===(r=(i=FU("P2PChannel")).createSubmodule)||void 0===r?void 0:r.call(i,n)):new Hj(HU(HU({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Date.now();let i=zU.get(e.cname);if(i||(i=new Map,zU.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){const t=new _N(MI.UID_CONFLICT);throw yN.joinGateway(e.sid,{lts:r,succ:!1,ec:t.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),t}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=r;const s=e.proxyServer;try{dN.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(o));const t=e.gatewayAddrs.map((t=>{let{address:n}=t;const[r,i]=n.split(":"),o={host:r,port:i};return e.proxyServer&&(o.proxy=e.proxyServer),o}));o=(await this.signal.init(t)).uid,dN.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(t){var a;throw dN.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),yN.joinGateway(e.sid,{lts:r,succ:!1,ec:(null===(a=t.data)||void 0===a?void 0:a.desc)||t.code,errorMsg:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s,signalChannel:"0",preload:e.preload}),i.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),dN.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{dN.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(JM.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(JM.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(JM.NETWORK_QUALITY,{uplinkNetworkQuality:Zj(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:Zj(this._statsCollector.trafficStats.B_dnq)}):this.emit(JM.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==ox.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==RM.CONNECTED||await function(e,t){return t===1/0?e:rp.race([e,Nx(t)])}(this.signal.request(xM.LEAVE,void 0,!0),3e3)}catch(e){dN.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(t),t!==ox.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:LO("PUB_EXTEND"),twcc:!!LO("PUBLISH_TWCC"),rtx:!!LO("USE_PUB_RTX")};try{return(await this.signal.request(xM.PUBLISH,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===TM.ERR_PUBLISH_REQUEST_INVALID)return dN.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),r.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw r}}async publishDataChannel(e,t,n){var r;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(r=t.maxRetransmits)&&void 0!==r?r:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(xM.PUBLISH_DATASTREAM,i,!0)}catch(r){if(n&&r.data&&r.data.code===TM.ERR_PUBLISH_REQUEST_INVALID)return dN.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),r.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw r}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(xM.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){dN.warning("[".concat(this.store.clientId,"] unpublish warning: "),e)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await rp.all(e.map((e=>this.signal.request(xM.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(e){dN.warning("unpublish datachannels warning: ",e)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!LO("SUBSCRIBE_TWCC"),rtx:!!LO("USE_SUB_RTX")||void 0,extend:LO("SUB_EXTEND"),svc:Array.isArray(LO("SVC"))&&0!==LO("SVC").length?LO("SVC"):void 0};try{return await this.signal.request(xM.PRE_SUBSCRIBE,r,!0)}catch(r){if(n&&r.data&&r.data.code===TM.ERR_SUBSCRIBE_REQUEST_INVALID)return dN.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),r.toString()),this.presubscribe(e,t,!1);throw r}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!LO("SUBSCRIBE_TWCC"),rtx:!!LO("USE_SUB_RTX"),extend:LO("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(LO("SVC"))&&0!==LO("SVC").length?LO("SVC"):void 0};try{return(await this.signal.request(xM.SUBSCRIBE,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===TM.ERR_SUBSCRIBE_REQUEST_INVALID)return dN.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),r.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw r}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const r={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(xM.SUBSCRIBE_DATASTREAM,r,!0)}catch(r){if(n&&r.data&&r.data.code===TM.ERR_SUBSCRIBE_REQUEST_INVALID)return dN.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),r.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw r}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!LO("USE_SUB_RTX"),twcc:!!LO("SUBSCRIBE_TWCC"),svc:Array.isArray(LO("SVC"))&&0!==LO("SVC").length?LO("SVC"):void 0};try{return await this.signal.request(xM.SUBSCRIBE_STREAMS,n,!0)}catch(n){if(t&&n.data&&n.data.code===TM.ERR_SUBSCRIBE_REQUEST_INVALID)return dN.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(i=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(xM.SET_VIDEO_PROFILE,t);dN.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(xM.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){dN.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new _N(MI.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await rp.all(e.map((e=>this.signal.request(xM.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(e){dN.warning("unsubscribeDataChannel warning: ",e)}}async massUnsubscribe(e){try{await this.signal.request(xM.UNSUBSCRIBE_STREAMS,e,!0)}catch(e){dN.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(xM.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(xM.GATEWAY_INFO)}async renewToken(e){await this.signal.request(xM.RENEW_TOKEN,e),this.key=e.token}updateClientRole(e,t){t&&(this._clientRoleOptions=Object.assign({},t)),LO("CLIENT_ROLE_OPTIONS")&&(dN.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(LO("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," ")),this._clientRoleOptions=Object.assign({},LO("CLIENT_ROLE_OPTIONS"))),this.role=e}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),LO("CLIENT_ROLE_OPTIONS")&&(this._clientRoleOptions=Object.assign({},LO("CLIENT_ROLE_OPTIONS")),dN.debug("[".concat(this.store.clientId,"] Set roleOptions for ").concat(JSON.stringify(LO("CLIENT_ROLE_OPTIONS"))," instead of ").concat(JSON.stringify(this._clientRoleOptions)," "))),"CONNECTED"!==this.state)return void(this.role=e);let n,r=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,r=1):r=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:r=0,await this.signal.request(xM.SET_CLIENT_ROLE,{role:e,level:r,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(xM.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(xM.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(xM.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(xM.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(xM.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.store.useP2P)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),HU({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(xM.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=zU.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:IO.username,password:IO.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(HU(HU({},IO),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(xM.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&Ex((()=>{this.emit(JM.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new _N(MI.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let n=LO("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}var r;n&&n.length>128&&(n=void 0),this.store.hasStartJoinChannel=!0,this.store.isABTestSuccess||this.emit(JM.UPDATE_GATEWAY_CONFIG),r=this.store.clientId,Lr(ML).call(ML,r)||ML.push(r);const i=!(hI()||mI(87)||SN())&&"boolean"==typeof LO("ENABLE_PRE_SUB")&&LO("ENABLE_PRE_SUB"),o=!SN()&&MU("ENABLE_PREALLOC_PC","boolean"),s=jU(),a=HU({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:CO,browser:navigator.userAgent,process_id:LO("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:LO("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:HU({enableEncodedTransform:!!LO("ENABLE_AUDIO_METADATA")&&fI(87)||!!LO("ENABLE_AUDIO_TOPN")&&gI(eI.CHROME,87,116)||void 0,enableAudioMetadata:!!LO("ENABLE_AUDIO_METADATA")&&fI(87),topnSmoothLevel:LO("TOPN_SMOOTH_LEVEL"),topnNewSpeakerDelay:LO("TOPN_NEW_SPEAKER_DELAY"),topnSwitchHoldMs:LO("TOPN_SWITCH_HOLD_MS"),topnAudioGain:LO("TOPN_AUDIO_GAIN"),enablePublishedUserList:LO("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:LO("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:MU("SUBSCRIBE_AUDIO_FILTER_TOPN","number"),enablePublishAudioFilter:MU("ENABLE_PUBLISH_AUDIO_FILTER","boolean"),enableUserLicenseCheck:MU("ENABLE_USER_LICENSE_CHECK","boolean"),enableRTX:!0===LO("USE_PUB_RTX")||!0===LO("USE_SUB_RTX")||void 0,disableFEC:LO("DISABLE_FEC"),enableNTPReport:!!LO("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!LO("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!LO("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:MU("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!LO("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!LO("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:MU("USE_XR","boolean"),enableLossbasedBwe:MU("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!LO("ENABLE_AUT_CC")||void 0,enableCCFallback:MU("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:o,preSubNum:i?MU("PRE_SUB_NUM","number"):void 0,enablePubTWCC:MU("PUBLISH_TWCC","boolean"),enableSubTWCC:MU("SUBSCRIBE_TWCC","boolean"),enablePubRTX:MU("USE_PUB_RTX","boolean"),enableSubRTX:MU("USE_SUB_RTX","boolean"),enableSubSVC:LO("ENABLE_SVC")?LO("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(LO("SVC"))&&0!==LO("SVC").length?LO("SVC"):void 0,enableSvcExtended:LO("ENABLE_SVC")&&Array.isArray(LO("SVC_EXTENDED"))&&0!==LO("SVC_EXTENDED").length?LO("SVC_EXTENDED"):void 0},s)},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(a.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(a.aes_mode=this.joinInfo.aesmode,LO("ENCRYPT_AES")?(a.aes_secret=this.joinInfo.aespassword,a.aes_encrypt=!0):a.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(a.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(a.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(a.default_video_stream=this.joinInfo.defaultVideoStream),a}getRejoinMessage(){if(!this.joinInfo)throw new _N(MI.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(IM.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(IM.WS_RECONNECTING,(e=>{this.joinInfo&&yN.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||dx.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",yN.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(IM.WS_CLOSED,(e=>{let t;switch(e){case ox.LEAVE:t=dx.LEAVE;break;case ox.UID_BANNED:case ox.IP_BANNED:case ox.CHANNEL_BANNED:case ox.SERVER_ERROR:t=dx.SERVER_ERROR;break;case ox.FALLBACK:t=dx.FALLBACK;break;case ox.LICENSE_MISSING:case ox.LICENSE_EXPIRED:case ox.LICENSE_MINUTES_EXCEEDED:case ox.LICENSE_PERIOD_INVALID:case ox.LICENSE_MULTIPLE_SDK_SERVICE:case ox.LICENSE_ILLEGAL:case ox.TOKEN_EXPIRE:t=e;break;default:t=dx.NETWORK_ERROR}dN.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+dx.NETWORK_ERROR)),this.joinInfo&&yN.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===ox.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==ox.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(IM.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo){if("audience"===this.role){const e=LO("CLIENT_ROLE_OPTIONS")||this._clientRoleOptions;e&&(e.level||e.delay)&&(dN.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(e.level,", delay: ").concat(e.delay)),this.setClientRole(this.role,e))}if(yN.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload,isABTestSuccess:this.store.isABTestSuccess}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void dN.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));PO("EVENT_REPORT_DOMAIN",e[1]),PO("EVENT_REPORT_BACKUP_DOMAIN",e[1]),PO("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}})),this.signal.on(NM.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(IM.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new _N(MI.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,px(this,JM.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(IM.REQUEST_JOIN_INFO,(async(e,t,n)=>{var r;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:i,dtlsParameters:o,rtpCapabilities:s}=await px(this,JM.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(r=this.joinInfo)||void 0===r?void 0:r.turnServer});try{e(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:o,rtpCapabilities:s,version:"2"}}))}catch(e){t(e)}})),this.signal.on(IM.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(IM.REPORT_JOIN_GATEWAY,((e,t)=>{if(!this.joinInfo)return;let n,r="";var i;e instanceof _N?(n=(null===(i=e.data)||void 0===i?void 0:i.desc)||e.code,r=e.message):n=e,yN.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:n,errorMsg:r,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload})})),this.signal.on(IM.IS_P2P_DISCONNECTED,(e=>{e(gx(this,JM.IS_P2P_DISCONNECTED))})),this.signal.on(IM.DISCONNECT_P2P,(()=>{this.emit(JM.DISCONNECT_P2P)})),this.signal.on(IM.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(IM.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(IM.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(JM.JOIN_RESPONSE,e,t)})),this.signal.on(IM.PRE_CONNECT_PC,(async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const e=this.getCurrentGatewayAddress(),t=LO("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){const n=mU(e);this.emit(JM.PRE_CONNECT_PC,{candidates:n,fingerprint:t})}}})),this.signal.on(IM.RECOVER_NOTIFICATION,(e=>{this.joinInfo&&"string"==typeof LO("AP_REQUEST_DETAIL")&&(this.joinInfo.apRequestDetail="".concat(LO("AP_REQUEST_DETAIL"),";").concat(e))}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(xM.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e),e}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(xM.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(e){throw dN.warning("unsubscribe datachannel warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(xM.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e),e}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(xM.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(e){throw dN.warning("unpublish datastream warning: ",e),e}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(xM.UNSUBSCRIBE_STREAMS,t,!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e),e}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===XM.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(xM.CONTROL,n,!0,!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e),e}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===XM.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(xM.CONTROL,n,!0,!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e),e}}async muteRemote(e,t){const n={action:e===aj.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(xM.CONTROL,n,!0,!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),e),e}}async unmuteRemote(e,t){const n={action:e===aj.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(xM.CONTROL,n,!0,!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),e),e}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(xM.RESTART_ICE,t,!0)}catch(e){throw dN.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e),e}}reconnect(e,t){"CONNECTED"===this.state&&this.signal.reconnect(e||void 0,t||dx.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!LO("GATEWAY_WSS_ADDRESS"))return LO("USE_CANDIDATE_FROM_AP_DETAIL")&&null!==(e=this.joinInfo)&&void 0!==e&&e.apGatewayAddress?(dN.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):null!==(t=this.joinInfo)&&void 0!==t&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(xM.SET_PARAMETER,{enablePublishAudioFilter:e})}}let YU=0,KU=0;function qU(e,t,n,r){return new rp(((i,o)=>{t.timeout=t.timeout||LO("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),YU+=xx(t.data)):n&&(t.data.size?YU+=t.data.size:t.data instanceof FormData?YU+=Ox(t.data):YU+=xx(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,KR.request(t).then((e=>{"string"==typeof e.data?KU+=xx(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?KU+=e.data.byteLength:KU+=xx(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((e=>{KR.isCancel(e)?o(new _N(MI.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new _N(MI.NETWORK_TIMEOUT,e.message)):e.response?o(new _N(MI.NETWORK_RESPONSE_ERROR,e.response.status)):o(new _N(MI.NETWORK_ERROR,e.message))}))}))}!function(){var e;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in n))break e;n=n[s]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(s("Symbol",(function(e){function t(e,t){this.A=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var s=o[t[r]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&i(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var l;e:{var d={};try{d.__proto__={a:!0},l=d.a;break e}catch(e){}l=!1}r=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var u=r;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function m(e){this.g=new h,this.G=e}function g(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),v(e)}return e.g.j=null,r.call(e.g,o),v(e)}function v(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var n=e.g.j;return n?g(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),v(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function _(e,t){return t=new y(new m(t)),u&&e.prototype&&u(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},m.prototype.o=function(e){return p(this.g),this.g.j?g(this,this.g.j.next,e,this.g.o):(this.g.o(e),v(this))},m.prototype.s=function(e){return p(this.g),this.g.j?g(this,this.g.j.throw,e,this.g.o):(this.g.s(e),v(this))},s("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var E=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},b=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},w=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},S=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},A="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,C=A.FormData,T=A.XMLHttpRequest&&A.XMLHttpRequest.prototype.send,R=A.Request&&A.fetch,I=A.navigator&&A.navigator.sendBeacon,x=A.Element&&A.Element.prototype,O=A.Symbol&&Symbol.toStringTag;O&&(Blob.prototype[O]||(Blob.prototype[O]="Blob"),"File"in A&&!File.prototype[O]&&(File.prototype[O]="File"));try{new File([],"")}catch(e){A.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),O&&Object.defineProperty(e,O,{value:"File"}),e}}var N=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},D=function(e){this.i=[];var t=this;e&&E(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];E(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?E(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?b(e.value):e.value,t.append(e.name,n))}))};if((e=D.prototype).append=function(e,t,n){S(arguments,2),this.i.push(w(e,t,n))},e.delete=function(e){S(arguments,1);var t=[];e=String(e),E(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return _(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){S(arguments,1);for(var n=c(this),r=n.next();!r.done;r=n.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){S(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){S(arguments,1);var t=[];return e=String(e),E(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){S(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return _(e,(function(e){if(1==e.h&&(t=c(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,f(e,c(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){S(arguments,2),e=String(e);var r=[],i=w(e,t,n),o=!0;E(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return _(e,(function(e){if(1==e.h&&(t=c(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=c(r)).next(),f(e,i.next().value));n=t.next(),e.h=2}))},D.prototype._asNative=function(){for(var e=new C,t=c(this),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},D.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+N(b(r))+'"\r\n\r\n'+b(e)+"\r\n"):t.push(n+N(b(r))+'"; filename="'+N(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},D.prototype[Symbol.iterator]=function(){return this.entries()},D.prototype.toString=function(){return"[object FormData]"},x&&!x.matches&&(x.matches=x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),O&&(D.prototype[O]="FormData"),T){var k=A.XMLHttpRequest.prototype.setRequestHeader;A.XMLHttpRequest.prototype.setRequestHeader=function(e,t){k.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},A.XMLHttpRequest.prototype.send=function(e){e instanceof D?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),T.call(this,e)):T.call(this,e)}}R&&(A.fetch=function(e,t){return t&&t.body&&t.body instanceof D&&(t.body=t.body._blob()),R.call(this,e,t)}),I&&(A.navigator.sendBeacon=function(e,t){return t instanceof D&&(t=t._asNative()),I.call(this,e,t)}),A.FormData=D}}();const XU=()=>{const e=LO("AREAS");return 0===e.length&&e.push($M.GLOBAL),oi(e).call(e,((e,t,n)=>{const r=JU(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},JU=e=>e===$M.OVERSEA?"".concat(tj.ASIA,",").concat(tj.EUROPE,",").concat(tj.AFRICA,",").concat(tj.NORTH_AMERICA,",").concat(tj.SOUTH_AMERICA,",").concat(tj.OCEANIA):tj[e],QU={GLOBAL:{ASIA:[$M.CHINA,$M.JAPAN,$M.INDIA,$M.KOREA,$M.HKMC],EUROPE:[],NORTH_AMERICA:[$M.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},ZU=Object.keys(QU[$M.GLOBAL]),$U=[$M.CHINA,$M.NORTH_AMERICA,$M.EUROPE,$M.ASIA,$M.JAPAN,$M.INDIA,$M.OCEANIA,$M.SOUTH_AMERICA,$M.AFRICA,$M.KOREA,$M.HKMC,$M.US],eB=function(e,t){let n=[];if(Lr(e).call(e,$M.GLOBAL)){const o=[$M.GLOBAL,$M.OVERSEA],s=Object.keys(nj);if(t===$M.GLOBAL)throw new _N(MI.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===$M.CHINA)n=[$M.OVERSEA];else if(i=t,Lr(ZU).call(ZU,i)){const e=(r=t,QU[$M.GLOBAL][r]||[]),i=[...o,t,...e];n=s.filter((e=>!Lr(i).call(i,e)))}else if(function(e){let t=!1;return ZU.forEach((n=>{var r;Lr(r=QU[$M.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return ZU.forEach((n=>{var r;Lr(r=QU[$M.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),r=[...o,e,t];n=s.filter((e=>!Lr(r).call(r,e)))}else n=e;n=function(e){const t=[];return $U.forEach((n=>{Lr(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Lr($U).call($U,e))))}(n)}else n=e;var r,i;return n};function tB(e){var t,n;if(!e&&Lr(t=LO("AREAS")).call(t,$M.EXTENSIONS))return dN.debug("update area from ap : reset"),void nB(kL,!0);if(!Lr(n=LO("AREAS")).call(n,$M.GLOBAL)||!e)return;let r=nj.EXTENSIONS;r&&(r={CODE:JU($M.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},dN.debug("update area from ap success: ".concat(e,",config is "),r),PO("AREAS",[$M.EXTENSIONS],!0),Object.keys(r).map((e=>{PO(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}function nB(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=yN.reportApiInvoke(null,{name:tx.SET_AREA,options:e,tag:nx.TRACER});try{let r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Lr(ej).call(ej,e))throw new _N(MI.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new _N(MI.INVALID_PARAMS,"area code is needed");let i=t;"string"==typeof t&&(i=[t]),r=n?eB(i,n):i}if(!t){if(jO.AREAS){const e=new _N(MI.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void dN.warning("setArea is prohibited because of config-distribute")}if(Lr(r).call(r,$M.GLOBAL)&&LO("AREAS")===$M.EXTENSIONS){const e=new _N(MI.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void dN.warning("setArea is prohibited because of ap extensions")}}PO("AREAS",r,t);const i=(e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=nj[e],r=Object.keys(n);r&&r.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t})(r);Object.keys(i).map((e=>{PO(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})),dN.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function rB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rB(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let oB=1;function sB(e,t,n,r,i){oB+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:oB,requestId:oB,version:CO,cname:n.cname},s={service_name:t,json_body:JSON.stringify(o)};let a,c,l=e[0];return Xx((async()=>{a=Date.now();const e=await qU(l,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-a,0!==e.code){const t=new _N(MI.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw dN.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new _N(MI.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw dN.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new _N(MI.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw dN.error(e.toString()),e}const i=function(e,t){return{addressList:e.servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(LO("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t)))),workerToken:e.workerToken,vid:e.vid}}(n,t);return LO("LIVE_STREAMING_ADDRESS")&&(i.addressList=LO("LIVE_STREAMING_ADDRESS")instanceof Array?LO("LIVE_STREAMING_ADDRESS"):[LO("LIVE_STREAMING_ADDRESS")]),iB(iB({},i),{},{responseTime:c})}),((r,i)=>(yN.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1)),((r,i)=>(yN.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==MI.OPERATION_ABORTED&&r.code!==MI.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0))),i)}let aB=1;function cB(e,t,n,r){let{url:i,areaCode:o}=e;const{clientId:s,sid:a}=t,c=Date.now();let l;const d=t.role,[u,h]=pB(t,o,[Gj.CHOOSE_SERVER]);let p=vx.networkState;return Xx((async()=>{p&&vx.networkState===ux.OFFLINE&&vx.onlineWaiter&&await rp.race([vx.onlineWaiter,Dx(r&&r.maxRetryTimeout||Kx.maxRetryTimeout)]),p=vx.networkState;const{data:e,headers:o}=await qU(i,{data:u,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l="1"===o.http3?1:-1,yN.reportResourceTiming(i,a),dB(e,i,t,c,[Gj.CHOOSE_SERVER],l);const s=$j(e,Gj.CHOOSE_SERVER);return uB(s),Xj(s,i)}),(e=>(e&&yN.joinChooseServer(a,{role:d,lts:c,succ:!0,csAddr:i,opid:h,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[Gj.CHOOSE_SERVER].toString(),isHttp3:l,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.res.detail&&e.res.detail[38]}),!1)),(e=>e.code!==MI.OPERATION_ABORTED&&(e.code===MI.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(yN.joinChooseServer(a,{role:d,lts:c,succ:!1,csAddr:i,serverList:null,opid:h,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[Gj.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:p}),isHttp3:l,corssRegionTagReq:t.apRequestDetail}),dN.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] Choose server network error, retry"),e),!0))),r)}function lB(e,t,n,r){let i,{url:o,areaCode:s,serviceIds:a}=e;const c=Date.now(),l=t.role,[d,u]=pB(t,s,a);let h;return Xx((async()=>{h&&vx.networkState===ux.OFFLINE&&vx.onlineWaiter&&await rp.race([vx.onlineWaiter,Dx(r&&r.maxRetryTimeout||Kx.maxRetryTimeout)]),h=vx.networkState;const{data:e,headers:s}=await qU(o,{data:d,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i="1"===s.http3?1:-1,yN.reportResourceTiming(o,t.sid),dB(e,o,t,c,a,i);const l=$j(e,Gj.CHOOSE_SERVER),u=$j(e,"proxy5"===t.cloudProxyServer?Gj.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?Gj.CLOUD_PROXY:Gj.CLOUD_PROXY_FALLBACK);return uB(l),{gatewayInfo:Xj(l,o),proxyInfo:u,url:o}}),(e=>(e.gatewayInfo&&yN.joinChooseServer(t.sid,{role:l,lts:c,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:u,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:a.toString(),isHttp3:i,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.gatewayInfo.res.detail&&e.gatewayInfo.res.detail[38]}),e.proxyInfo&&yN.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:a.toString()}),!1)),(e=>e.code!==MI.OPERATION_ABORTED&&(e.code===MI.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(yN.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:a.toString(),extend:JSON.stringify({networkState:h})}),dN.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),r)}const dB=(e,t,n,r,i,o)=>{const{sid:s,clientId:a,cloudProxyServer:c}=n,l=[],d=a=>{4096===a.flag?yN.joinChooseServer(s,{role:n.role,lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:a.error.message,csIp:a.error.data&&a.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o,corssRegionTagReq:n.apRequestDetail}):1048576!==a.flag&&4194304!==a.flag&&4194310!==a.flag||yN.joinWebProxyAP(s,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:a.error.code,eventType:c,unilbsServerIds:i.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)dN.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new _N(MI.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};l.push(n),d(n)}if(0!==n){const r=Rj(n),i={error:new _N(MI.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?dN.warning(i.error.toString()):l.push(i),d(i)}})),l.length)throw dN.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(l.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new _N(MI.CAN_NOT_GET_GATEWAY_SERVER,l.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!l.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(l.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},uB=e=>{var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new _N(MI.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(LO("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?tB(e.detail[23].toLowerCase()):tB()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let r=0;r<n.length;r++){var o;const t=e_(o=n[r]).call(o);e.addresses[r]&&n&&(e.addresses[r].fingerprint=t)}}if(LO("GATEWAY_ADDRESS")&&LO("GATEWAY_ADDRESS").length>0){dN.debug("assign gateway address to",LO("GATEWAY_ADDRESS"));const t=LO("GATEWAY_ADDRESS").map((t=>{var n,r;const i=null!==(n=null===(r=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=t}},hB=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=Rj(t.buffer.code);throw new _N(MI.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw dN.debug("update ticket request received ap response without response body:",t),new _N(MI.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},pB=(e,t,n)=>{const r=Math.floor(Math.random()*10**12),i="host"===e.role?"1":"audience"===e.role?"2":void 0,o={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:iB(iB(iB({6:e.stringUid,11:t,12:LO("USE_NEW_TOKEN")?"1":void 0},i?{17:i}:{}),{},{22:t},e.apRequestDetail?{33:e.apRequestDetail}:{}),e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};o.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const s=new FormData;return s.append("request",JSON.stringify(o)),[s,r]},fB=(e,t)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]};let mB=0;function gB(e){return rp.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const vB=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:i,promisesCollector:o}=e,s=0;const a=t;let c,l=0;const d=async()=>{const e=(()=>{const e=s*a,t=e+a;return n.slice(e,t).map(r)})();o&&o.push(...e);try{c=await gB(e)}catch(e){if(l+=a,s++,!(l>=n.length))return void await d();i(e)}e.forEach((e=>e.cancel()))};return await d(),c},yB=async e=>{let{referenceList:t,asyncMapHandler:n,closeFn:r}=e;const i=t.length;let o=0;const s=async()=>{const e=n(t.shift());try{return await e}catch(e){if(o++,o>=i||null!=r&&r(e))throw e;return s()}};return s()};async function _B(e,t,n,r){const i=async function(e,t,n,r){let i=null;const o=[],s=async()=>{const i=LO("WEBCS_DOMAIN").slice(0,LO("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:XU()}))),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),a=await vB({fragementLength:LO("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(dN.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),cB(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),a},a=async()=>{if(await Dx(1e3),null!==i)return i;const s=LO("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:XU()}))),a=r.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map((e=>e.url))}),c=await vB({fragementLength:LO("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(dN.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),cB(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:o});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c};try{return i=await gB([s(),a()]),o.length&&o.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),i}catch(e){throw e[0]}}(e,t,n,r);return{gatewayInfo:await i}}async function EB(e,t,n,r,i){const o=e.cloudProxyServer;if("disabled"===o){if(!r)return;if(e.useLocalAccessPoint)return await _B(e,t,n,i);if(LO("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:r,proxyInfo:o}=await CB(e,t,n,i);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:r};const a=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||IO.tcpport,udpport:e.udpport||IO.udpport,username:e.username||IO.username,password:e.password||IO.password,forceturn:!1,security:!0})));if(i.useP2P){var s;const t=null!==(s=e.uid)&&void 0!==s?s:r.uid,n="glb:".concat(t.toString()),i=await QI(n),c=o.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||IO.tcpport,udpport:e.udpport||IO.udpport,username:n,password:i,forceturn:!1,security:!0})));a.push(...c)}return e.turnServer={mode:"manual",servers:a},{gatewayInfo:r}}return await _B(e,t,n,i)}const{proxyInfo:a,gatewayInfo:c}=await CB(e,t,n,i),l={gatewayInfo:c},d=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport?e.tcpport:IO.tcpport,udpport:"proxy4"===o?void 0:e.udpport?e.udpport:IO.udpport,username:e.username||IO.username,password:e.password||IO.password,forceturn:"proxy4"!==o,security:"proxy5"===o})));if(i.useP2P){var u;const t=null!==(u=e.uid)&&void 0!==u?u:c.uid,n="glb:".concat(t.toString()),r=await QI(n),i=a.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===o?void 0:e.tcpport||IO.tcpport,udpport:"proxy4"===o?void 0:e.udpport||IO.udpport,username:n,password:r,forceturn:"proxy4"!==o,security:"proxy5"===o})));d.push(...i)}return e.turnServer={mode:"manual",servers:d},dN.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),l}async function bB(e,t,n,r,i){const o=LO("ACCOUNT_REGISTER").slice(0,LO("AJAX_REQUEST_CONCURRENT"));let s=[];s=t.proxyServer?o.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):o.map((e=>"https://".concat(e,"/api/v1")));const a=null==i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s});try{const o=await async function(e,t,n,r,i){const o=Date.now(),s={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await Xx((()=>qU(a+"".concat(-1===a.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw dN.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),yN.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:MI.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new _N(MI.INVALID_UINT_UID_FROM_STRING_UID);return yN.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:null,extend:s}),!1}const i=Rj(n.code);return i.retry&&(a=e[(r+1)%e.length]),yN.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:i.desc,extend:s}),i.retry}),((t,n)=>t.code!==MI.OPERATION_ABORTED&&(yN.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(n+1)%e.length],!0)),i);if(0!==c.code){const e=Rj(c.code);throw new _N(MI.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,n,r);return null==i||i.recordJoinChannelService({status:"success",endTs:Date.now()},a),o.uid}catch(e){throw null==i||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e]},a),e}}async function wB(e,t,n){const r=LO("ACCOUNT_REGISTER");let i=[];i=t.proxyServer?r.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):r.map((e=>"https://".concat(e,"/api/v1")));try{const r=await yB({referenceList:i,asyncMapHandler:r=>async function(e,t,n,r){const i=Date.now(),o={sid:n.sid,opid:10,appid:n.appId,string_uid:t};try{const t=await qU(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),{data:o,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(0!==t.code){const e=Rj(t.code);throw new _N(MI.UNEXPECTED_RESPONSE,"preload sua error:".concat(e.desc),e)}if(t.uid<=0||t.uid>=Math.pow(2,32))throw new _N(MI.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:i,url:e,req:o,uid:t.uid,elapse:Date.now()-i}}catch(e){throw e}}(r,e,t,n),closeFn:e=>e.code===MI.OPERATION_ABORTED||e.code===MI.UNEXPECTED_RESPONSE&&!e.data.retry});return r}catch(e){throw e}}async function SB(e,t,n){const r=LO("CDS_AP").slice(0,LO("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))),i=r.map((r=>function(e,t,n,r){const i=iI(),o={flag:64,cipher_method:0,features:iB(iB(iB(iB(iB({install_id:AO(),device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:CO,cname:t.cname,session_id:t.sid,proxyServer:t.proxyServer,sdk_type:zj.WEB_RTC,browser_name:i.name,browser_version:i.version,user_agent:navigator.userAgent,channel_name:t.cname},t.stringUid&&{string_uid:t.stringUid}),t.uid&&{uid:t.uid+""}),i.os&&{os_name:i.os}),i.osVersion&&{os_version:i.osVersion}),{},{detail:""})};return Xx((()=>qU(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==MI.OPERATION_ABORTED),r)}(r,e,t,n)));let o=null,s=null,a={};try{o=await gB(i)}catch(e){if(e.code===MI.OPERATION_ABORTED)throw e;s=e}if(i.forEach((e=>e.cancel())),yN.reportApiInvoke(e.sid,{name:tx.REQUEST_CONFIG_DISTRIBUTE,options:{error:s,res:o}}).onSuccess(),o&&o.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),r={};return n.forEach((e=>{var n;const i=e_(n=e.slice(4)).call(n),o=JSON.parse(t[e]),s=o[1];r[i]={tag:o[0]||"",value:s}})),r}(o)}catch(e){}return a}async function AB(e,t){const n=LO("WEBCS_DOMAIN").concat(LO("WEBCS_DOMAIN_BACKUP_LIST")).map((e=>({url:"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:XU(),serviceIds:[Gj.CHOOSE_SERVER,Gj.CLOUD_PROXY_FALLBACK]})));try{const r=await yB({referenceList:n,asyncMapHandler:n=>async function(e,t,n){let r,{url:i,areaCode:o,serviceIds:s}=e;const a=Date.now(),[c,l]=pB(t,o,s);let d=vx.networkState;try{d&&vx.networkState===ux.OFFLINE&&vx.onlineWaiter&&await rp.race([vx.onlineWaiter,Dx(Kx.maxRetryTimeout)]),d=vx.networkState;const{data:e,headers:t}=await qU(i,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);r="1"===t.http3?1:-1;const o=e=>{const t=[];if(e.response_body.forEach((n=>{const r=n.buffer.code;if(23===n.uri&&0===r&&!n.buffer.edges_services)if(4194310===n.buffer.flag)n.buffer.edges_services=[];else{const r={error:new _N(MI.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:n.buffer.flag};t.push(r)}if(0!==r){const i=Rj(r),o={error:new _N(MI.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{desc:i.desc,retry:i.retry,csIp:e.detail[502]}),flag:n.buffer.flag};4194310===n.buffer.flag?dN.warning(o.error.toString()):t.push(o)}})),t.length)throw new _N(MI.CAN_NOT_GET_GATEWAY_SERVER,t.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!t.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(t.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})};o(e);const s=$j(e,Gj.CHOOSE_SERVER),u=$j(e,Gj.CLOUD_PROXY_FALLBACK);return uB(s),{gatewayInfo:Xj(s,i),proxyInfo:u,opid:l,requestTime:a,url:i,isHttp3:r,elapse:Date.now()-a}}catch(e){throw e}}(n,e,t),closeFn:e=>e.code===MI.OPERATION_ABORTED||e.code===MI.CAN_NOT_GET_GATEWAY_SERVER&&!e.data.retry});return r}catch(e){throw e}}async function CB(e,t,n,r){const i=LO("PROXY_SERVER_TYPE3"),o=(e,t,n)=>{let r=n||i;return Array.isArray(r)&&(r=t%2==0?i[1]:i[0]),"https://".concat(r,"/ap/?url=").concat(e)};let s=null;const a=[],c=async()=>{const i=LO("WEBCS_DOMAIN").slice(0,LO("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:XU(),serviceIds:[Gj.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Gj.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?Gj.CLOUD_PROXY:Gj.CLOUD_PROXY_FALLBACK]}})),s=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),c=await vB({fragementLength:LO("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(dN.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),lB(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),c},l=async()=>{if(await Dx(1e3),null!==s)return s;const i=LO("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:XU(),serviceIds:[Gj.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Gj.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?Gj.CLOUD_PROXY:Gj.CLOUD_PROXY_FALLBACK]}})),c=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:i.map((e=>e.url))}),l=await vB({fragementLength:LO("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(dN.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),lB(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:a});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},c),l};let d,u,h;try{({gatewayInfo:d,proxyInfo:u,url:h}=await gB([c(),l()]))}catch(e){throw e[0]}if(a.length&&a.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!d||!u)throw new _N(MI.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=h,"disabled"!==e.cloudProxyServer&&Array.isArray(i)&&h){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(h)[1];Lr(i).call(i,t)&&(e.proxyServer=t,dN.setProxyServer(t),yN.setProxyServer(t))}return s={gatewayInfo:d,proxyInfo:await eU(u,d.uid)},s}async function TB(e,t,n){const r=LO("UAP_AP").slice(0,LO("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))),i=r.map((r=>function(e,t,n,r){const i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:CO,cname:t.cname,uid:t.uid.toString(),requestId:aB,seq:aB};aB+=1;const o={service_name:"tele_channel",json_body:JSON.stringify(i)};return Xx((async()=>{const t=await qU(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new _N(MI.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw dN.error(e.toString()),e}const r=JSON.parse(t.json_body);if(200!==r.code){const e=new _N(MI.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(r.code,", reason: ").concat(r.reason));throw dN.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new _N(MI.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw dN.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:(LO("CHANNEL_MEDIA_RELAY_SERVERS")||r.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(LO("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==MI.OPERATION_ABORTED&&e.code!==MI.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{const e=await gB(i);return i.forEach((e=>e.cancel())),e}catch(e){throw e[0]}}async function RB(e,t,n){let r=null;const i=[],o=async o=>{const s=LO(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return o&&(await Dx(1e3),null!==r)?r:await vB({fragementLength:LO("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>(dN.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(o?"backup":""," choose_server:"),r),function(e,t,n,r){const[i]=fB(t,[Gj.CHOOSE_SERVER]);let o=vx.networkState;return Xx((async()=>{o&&vx.networkState===ux.OFFLINE&&vx.onlineWaiter&&await rp.race([vx.onlineWaiter,Dx(r&&r.maxRetryTimeout||Kx.maxRetryTimeout)]),o=vx.networkState;const t=await qU(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return hB(t,e)}),(()=>!1),(e=>e.code!==MI.OPERATION_ABORTED&&(e.code===MI.UPDATE_TICKET_FAILED?e.data.retry:(dN.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),r)}(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:i})};try{return r=await gB([o(!1),o(!0)]),i.length&&i.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(e){throw e[0]}}function IB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IB(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class OB extends ZI{get isSuccess(){return!!this.configs}constructor(e,t){super(),wC(this,"configs",void 0),wC(this,"store",void 0),wC(this,"joinInfo",void 0),wC(this,"cancelToken",void 0),wC(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),wC(this,"interval",void 0),wC(this,"mutex",void 0),wC(this,"mutableParamsRead",!1),wC(this,"configCache",{}),wC(this,"limit_bitrate",void 0),this.mutex=new Gx("config-distribute",e),this.store=t}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),LO("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),LO("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0,this.configs=void 0,this.limit_bitrate=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,yN.reportApiInvoke(null,{options:void 0,name:tx.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:nx.TRACER}).onSuccess(JSON.stringify(jO))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void dN.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await SB(this.joinInfo,this.cancelToken,this.retryConfig),dN.debug("[config-distribute] get config distribute",JSON.stringify(e));const t=function(e){var t;const n=K_(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let o=0;o<n.length;o++)for(let t=n.length-1;t>o;t--){const r=n[t],i=e[r].value;if("number"==typeof i.__priority){const o=i.__priority,s=n[t-1],a=e[s].value;if("number"==typeof a.__priority){if(!(o>a.__priority))continue;{const e=r;n[t]=n[t-1],n[t-1]=e}}else{const e=r;n[t]=n[t-1],n[t-1]=e}}}const r=Date.now();let i={};return n.forEach((t=>{const n=e[t].value.__expires;n&&n<=r||(i[t]=e[t])})),i}(e);this.cacheGlobalParameterConfig(t),this.store.hasStartJoinChannel||(this.store.isABTestSuccess=!0),this.configs=t}catch(e){const t=new _N(MI.NETWORK_RESPONSE_ERROR,e);dN.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.limit_bitrate||void 0}handleBitrateLimit(e){ij(e)&&(this.limit_bitrate?this.limit_bitrate&&this.limit_bitrate.id!==e.id&&this.emit(rj.UPDATE_BITRATE_LIMIT,e):this.emit(rj.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.limit_bitrate&&xB({},this.limit_bitrate.low_stream_uplink)}handleABTestConfigDistribute(e){try{const t={},n=Object.keys(e),r=[];n.forEach((n=>{const i=e[n].value;t[n]=i;const o=i.__id;if(o&&this.configCache[n]&&this.configCache[n].__id===o)return;const s=i.__type,a=e[n].value,c=e[n].tag;let l=0;s?s===MO.REALTIME&&(l=1):Object.keys(a).some((e=>Object.prototype.hasOwnProperty.call(DO,e)||!UL()&&Object.prototype.hasOwnProperty.call(xO,e)?(l=1,!0):void 0)),r.push({tag:c,isApplied:l,feature:n,params:JSON.stringify(i)})})),r.forEach((e=>{let{tag:t,feature:n,params:r,isApplied:i}=e;this.store.sessionId&&yN.abTest(this.store.sessionId,{intSucc:1,isApplied:i,tag:t,feature:n,params:r,cid:this.store.cid,uid:this.store.intUid})})),this.configCache=t}catch(e){dN.debug("handleABTestConfigDistribute error",e)}}cacheGlobalParameterConfig(e){const t=function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n].value,i=r.__expires,o=r.__type;Object.keys(r).forEach((e=>{"__id"===e||"__type"===e||"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(t,e)||(t[e]=xB(xB({value:r[e]},i&&{expires:i}),o&&{type:o}))}))})),t}(e);try{var n;const r=null===(n=t.LIMIT_BITRATE)||void 0===n?void 0:n.value;delete t.LIMIT_BITRATE,r&&ij(r)&&this.handleBitrateLimit(r),this.limit_bitrate=r,this.handleGlobalParameterConfig(t),this.handleABTestConfigDistribute(e),function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{const{value:r,type:i,expires:o}=e[n];o&&o<=t||((i===MO.REALTIME||Object.prototype.hasOwnProperty.call(DO,n))&&(jO[n]=r,kO[n]=r,dN.debug("Update realtime parameters from config distribute",n,r)),i||UL()||!Object.prototype.hasOwnProperty.call(xO,n)||(jO[n]=r,kO[n]=r,dN.debug("Update gateway parameters from config distribute",n,r)))}))}catch(t){dN.error("Error update config immediately: ".concat(e),t.message)}}(t);const i=JSON.stringify(t),o=window.btoa(i);window.localStorage.setItem("websdk_ng_global_parameter",o),dN.debug("Caching global parameters ".concat(i))}catch(e){dN.error("Error caching global parameters:",e.message)}}handleGlobalParameterConfig(e){try{const t=Date.now();Object.keys(e).forEach((n=>{if("CLIENT_ROLE_OPTIONS"===n&&Object.prototype.hasOwnProperty.call(kO,n)){const{value:r,expires:i}=e[n];if(i&&i<=t)return;(function(e,t){try{return"object"==typeof e&&"object"==typeof t&&JSON.stringify(e)===JSON.stringify(t)}catch(e){return!1}})(kO[n],r)||(jO[n]=r,kO[n]=r,this.emit(rj.UPDATE_CLIENT_ROLE_OPTIONS,r),dN.debug("Updating client role options: ".concat(JSON.stringify(r))))}}))}catch(e){dN.error("Error handling global parameter config:",e.message)}}}class NB extends ZI{constructor(){super(...arguments),wC(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(LO("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=Lr(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",DB[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",DB[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof Gk&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=Jj(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof Gk&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const DB={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},kB=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function PB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PB(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class MB{constructor(e){wC(this,"store",void 0),wC(this,"onStatsException",void 0),wC(this,"onUploadPublishDuration",void 0),wC(this,"onStatsChanged",void 0),wC(this,"localStats",new Map),wC(this,"remoteStats",new Map),wC(this,"updateStatsInterval",void 0),wC(this,"trafficStats",void 0),wC(this,"trafficStatsPeerList",[]),wC(this,"uplinkStats",void 0),wC(this,"exceptionMonitor",void 0),wC(this,"p2pChannel",void 0),wC(this,"scalabilityMode",mO.L1T1),wC(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.exceptionMonitor=new NB,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(uj.LocalAudioTrack)||LB({},XN)}getLocalVideoTrackStats(){return this.localStats.get(uj.LocalVideoTrack)||LB({},JN)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{audioStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:r}]=e;r&&(t[n]=r)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;i&&(n[e]=t(e,i))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{videoStats:i}]=e;i&&(n[r]=t(r,i))}));return n}getRTCStats(){let e=0,t=0,n=0,r=0;const i=this.localStats.get(uj.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);const o=this.localStats.get(uj.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const s=this.localStats.get(uj.LocalVideoLowTrack);s&&(e+=s.sendBytes,t+=s.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:i}=e;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));let a=1;return this.trafficStats&&(a+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:a,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?kB.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,i=null!=n&&n.audioSSRC?kB.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>i?r:i),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&dN.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,r]=t;switch(n){case uj.LocalVideoTrack:case uj.LocalVideoLowTrack:{const t=r,o=LB({},JN),s=e.getStats(),a=e.getLocalMedia(n);if(s){const n=s.videoSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){const r=e.getLocalVideoSize(),i=e.getEncoderConfig(uj.LocalVideoTrack);"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(o.codecType=n.codec),o.sendBytes=n.bytes,o.sendBitrate=t?8*Math.max(0,o.sendBytes-t.sendBytes):0,n.inputFrame?(o.captureFrameRate=n.inputFrame.frameRate,o.captureResolutionHeight=n.inputFrame.height,o.captureResolutionWidth=n.inputFrame.width):r&&(o.captureResolutionWidth=r.width,o.captureResolutionHeight=r.height),n.sentFrame?(o.sendFrameRate=n.sentFrame.frameRate,o.sendResolutionHeight=n.sentFrame.height,o.sendResolutionWidth=n.sentFrame.width):r&&(o.sendResolutionWidth=r.width,o.sendResolutionHeight=r.height),n.avgEncodeMs&&(o.encodeDelay=n.avgEncodeMs),i&&i.bitrateMax&&(o.targetSendBitrate=1e3*i.bitrateMax),o.sendPackets=n.packets,o.sendPacketsLost=n.packetsLost,o.sendJitterMs=n.jitterMs,o.sendRttMs=n.rttMs,o.totalDuration=t?t.totalDuration+1:1,o.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(o.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(dN.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(o.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var i;this.localStats.set(n,o),((null==t?void 0:t.sendResolutionWidth)!==o.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==o.sendResolutionHeight)&&(null===(i=this.onStatsChanged)||void 0===i||i.call(this,"resolution",{width:o.sendResolutionWidth,height:o.sendResolutionHeight})),o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case uj.LocalAudioTrack:{const t=r,i=LB({},XN),o=e.getStats(),s=e.getLocalMedia(n);if(o){const n=o.audioSend.find((e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(i.codecType=n.codec),n.inputLevel)i.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(i.sendVolumeLevel=Math.round(32767*t))}i.sendBytes=n.bytes,i.sendPackets=n.packets,i.sendPacketsLost=n.packetsLost,i.sendJitterMs=n.jitterMs,i.sendRttMs=n.rttMs,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0}}this.trafficStats&&(i.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(uj.LocalAudioTrack,i),i&&s&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,s.track,i);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,r;let[i,{videoStats:o,audioStats:s,videoPcStats:a}]=t;const c=s,l=o,d=a,u=LB({},QN),h=LB({},$N),p=LB({},ZN),{audioTrack:f,videoTrack:m,audioSSRC:g,videoSSRC:v}=e.getRemoteMedia(i);let y;y=this.store.useP2P?e.getStats(!0):e.getStats();const _=null===(n=y)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===g)),E=null===(r=y)||void 0===r?void 0:r.videoRecv.find((e=>e.ssrc===v)),b=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===i));if(_&&("opus"!==_.codec&&"aac"!==_.codec&&"PCMU"!==_.codec&&"PCMA"!==_.codec&&"G722"!==_.codec||(u.codecType=_.codec),_.outputLevel?u.receiveLevel=Math.round(32767*_.outputLevel):f&&(u.receiveLevel=Math.round(32767*f.getVolumeLevel())),u.receiveBytes=_.bytes,u.receivePackets=_.packets,u.receivePacketsLost=_.packetsLost,u.receivePacketsDiscarded=_.packetsDiscarded,u.packetLossRate=u.receivePacketsLost/(u.receivePackets+u.receivePacketsLost),u.receiveBitrate=c?8*Math.max(0,u.receiveBytes-c.receiveBytes):0,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,u.freezeRate=u.totalFreezeTime/u.totalDuration,u.receiveDelay=_.jitterBufferMs,u.totalDuration>10&&MB.isRemoteAudioFreeze(f)&&(u.totalFreezeTime+=1)),E){var w;"H264"!==E.codec&&"H265"!==E.codec&&"VP8"!==E.codec&&"VP9"!==E.codec&&"AV1X"!==E.codec&&"AV1"!==E.codec||(h.codecType=E.codec),h.receiveBytes=E.bytes,h.receiveBitrate=l?8*Math.max(0,h.receiveBytes-l.receiveBytes):0,h.decodeFrameRate=E.decodeFrameRate<0?0:E.decodeFrameRate,h.renderFrameRate=E.decodeFrameRate<0?0:E.decodeFrameRate,E.outputFrame&&(h.renderFrameRate=E.outputFrame.frameRate),E.receivedFrame?(h.receiveFrameRate=E.receivedFrame.frameRate,h.receiveResolutionHeight=E.receivedFrame.height,h.receiveResolutionWidth=E.receivedFrame.width):m&&(h.receiveResolutionHeight=m._videoHeight||0,h.receiveResolutionWidth=m._videoWidth||0),void 0!==E.framesRateFirefox&&(h.receiveFrameRate=Math.round(E.framesRateFirefox)),h.receivePackets=E.packets,h.receivePacketsLost=E.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost);const t=l?l.totalFreezeTime:0,n=l?l.totalDuration:0;h.totalDuration=l?l.totalDuration+1:1,h.totalFreezeTime=null!==(w=E.totalFreezesDuration)&&void 0!==w?w:t||0,h.receiveDelay=E.jitterBufferMs||0;const r=!!v&&e.getRemoteVideoIsReady(v);void 0===E.totalFreezesDuration&&m&&r&&MB.isRemoteVideoFreeze(m,E,d)&&(h.totalFreezeTime+=1),h.freezeRate=Math.max(0,Math.min((h.totalFreezeTime-t)/(h.totalDuration-n),1))}b&&(u.end2EndDelay=b.B_ad,h.end2EndDelay=b.B_vd,u.transportDelay=b.B_ed,h.transportDelay=b.B_ed,u.currentPacketLossRate=b.B_ealr4/100,h.currentPacketLossRate=b.B_evlr4/100,p.uplinkNetworkQuality=b.B_punq?b.B_punq:0,p.downlinkNetworkQuality=b.B_pdnq?b.B_pdnq:0),this.remoteStats.set(i,{audioStats:u,videoStats:h,videoPcStats:E,networkStats:p}),f&&this.exceptionMonitor.setRemoteAudioStats(f,u),m&&this.exceptionMonitor.setRemoteVideoStats(m,h)}))}}class jB{constructor(){wC(this,"destChannelMediaInfos",new Map),wC(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){zM(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){zM(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){PM(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function UB(e){if(!(e instanceof jB))return new _N(MI.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new _N(MI.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new _N(MI.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class BB{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){wC(this,"uid",void 0),wC(this,"_uintid",void 0),wC(this,"_trust_in_room_",!0),wC(this,"_trust_audio_enabled_state_",!0),wC(this,"_trust_video_enabled_state_",!0),wC(this,"_trust_audio_mute_state_",!0),wC(this,"_trust_video_mute_state_",!0),wC(this,"_audio_muted_",!1),wC(this,"_video_muted_",!1),wC(this,"_audio_enabled_",!0),wC(this,"_video_enabled_",!0),wC(this,"_audio_added_",!1),wC(this,"_video_added_",!1),wC(this,"_is_pre_created",!1),wC(this,"_video_pre_subscribed",!1),wC(this,"_audio_pre_subscribed",!1),wC(this,"_trust_video_stream_added_state_",!0),wC(this,"_trust_audio_stream_added_state_",!0),wC(this,"_audioTrack",void 0),wC(this,"_videoTrack",void 0),wC(this,"_dataChannels",[]),wC(this,"_audioSSRC",void 0),wC(this,"_videoSSRC",void 0),wC(this,"_audioOrtc",void 0),wC(this,"_videoOrtc",void 0),wC(this,"_cname",void 0),wC(this,"_rtxSsrcId",void 0),wC(this,"_videoMid",void 0),wC(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}function FB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FB(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const WB="9",HB=4e4;let zB=class{get localCapabilities(){return bx(this._localCapabilities)}get rtpCapabilities(){return bx(this._rtpCapabilities)}get candidates(){return bx(this._candidates)}get iceParameters(){return bx(this._iceParameters)}get dtlsParameters(){return bx(this._dtlsParameters)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wC(this,"sessionDesc",void 0),wC(this,"_localCapabilities",void 0),wC(this,"_rtpCapabilities",void 0),wC(this,"_candidates",void 0),wC(this,"_originCandidates",void 0),wC(this,"_iceParameters",void 0),wC(this,"_isUseExtmapAllowMixed",void 0),wC(this,"_dtlsParameters",void 0),wC(this,"setup",void 0),wC(this,"currentMidIndex",void 0),wC(this,"cname",void 0),wC(this,"firefoxSsrcMidMap",new Map),this._isUseExtmapAllowMixed=t,e=bx(e);const{iceParameters:n,dtlsParameters:r,candidates:i,rtpCapabilities:o,setup:s,localCapabilities:a,cname:c}=e;this._rtpCapabilities=o,this._candidates=i,this._originCandidates=bx(i),this._iceParameters=n,this._dtlsParameters=r,this._localCapabilities=a,this.setup=s,this.cname=c,this.sessionDesc=this.updateRemoteRTPCapabilities(o),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send;let o=this.sessionDesc.mediaDescriptions.length-1;for(let s=1;s<e;s++){const e=2*s+2e4,a=2*s+HB,{ssrcs:c,ssrcGroups:l}=gU([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:u}=gU([{ssrcId:a,rtx:LO("USE_SUB_RTX")?a+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:WB,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:WB,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:l,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return zO(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=gU(t,this.cname,LO("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(i);if(s){if(hI()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i);let n;return-1===t||1===t&&(dI()||function(){const e=iI();return!(e.name!==eI.CHROME||!e.osVersion)&&Number(e.version)<=90}()||LO("ENABLE_ENCODED_TRANSFORM")&&lI())||0===t&&LO("USE_SUB_RTX")||wI()?(n=this.createOrRecycleSendMedia(e,i,o,"sendonly",r),this.updateBundleMids()):(n=bx(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),hI()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:i}=e;i&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||hI()||wI()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Lr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Lr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,i)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[i])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateRemoteRTPCapabilities(e){const t=this.sessionDesc||HO((n=this._isUseExtmapAllowMixed,"v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite".concat(n?"\na=extmap-allow-mixed":"","\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n")));var n;this._rtpCapabilities=e;const r=this.rtpCapabilities.send,i=this.localCapabilities.send;for(const o of t.mediaDescriptions){if(o.attributes.iceUfrag=this._iceParameters.iceUfrag,o.attributes.icePwd=this._iceParameters.icePwd,o.attributes.fingerprints=this._dtlsParameters.fingerprints,o.attributes.candidates=this._candidates,o.attributes.setup=this.setup,"application"===o.media.mediaType&&(o.attributes.sctpPort="5000"),"video"===o.media.mediaType)if(0===r.videoCodecs.length){const e=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Lr(n=t.encodingName.toLowerCase()).call(n,"vp8")}))||[i.videoCodecs[0]];o.media.fmts=e.map((e=>e.payloadType.toString(10))),o.attributes.payloads=e,o.attributes.extmaps=[]}else if(o.media.fmts=r.videoCodecs.map((e=>e.payloadType.toString(10))),o.attributes.payloads=r.videoCodecs,o.attributes.extmaps=r.videoExtensions,LO("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:e,ssrcGroups:t}=gU([{ssrcId:HB,rtx:LO("USE_SUB_RTX")?40001:void 0}],this.cname);o.attributes.ssrcs=e,o.attributes.ssrcGroups=t}if("audio"===o.media.mediaType)if(0===r.audioCodecs.length){const e=i.audioCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Lr(n=t.encodingName.toLowerCase()).call(n,"opus")}))||[i.audioCodecs[0]];o.media.fmts=e.map((e=>e.payloadType.toString(10))),o.attributes.payloads=e,o.attributes.extmaps=[]}else if(o.media.fmts=r.audioCodecs.map((e=>e.payloadType.toString(10))),o.attributes.payloads=r.audioCodecs,o.attributes.extmaps=r.audioExtensions,RU(o),LO("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:e,ssrcGroups:t}=gU([{ssrcId:2e4}],this.cname);o.attributes.ssrcs=e,o.attributes.ssrcGroups=t}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){const t=this._originCandidates.filter((e=>"udp"===e.transport)),n=[];if(t.forEach((e=>{n.push(VB(VB({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})),0!==t.length){switch(e){case cj.TCP_RELAY:this._candidates=n;break;case cj.UDP_TCP_RELAY:case cj.RELAY:this._candidates=[...t,...n];break;default:this._candidates=t}for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}}restartICE(e){e=bx(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if(hI()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleDataChannel(){for(const n of this.sessionDesc.mediaDescriptions)if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:WB,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,r,i,o){const s=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,c=IU(s,a,this.localCapabilities.send,s===aj.VIDEO?r:i),l=s===aj.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;const d="".concat(this.currentMidIndex);let u={media:{mediaType:s,port:WB,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};u=this.mungRecvMediaDsec(u,e,o);const h=this.findFirstClosedMedia(s);if(h){const e=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Lr(t=Object.keys(FO)).call(t,e)})))],i=new Set(t);if(r.every((e=>i.has(e))))return dN.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const o=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Lr(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===o.length)return dN.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const s=[...new Set(o.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let a;if(dN.debug("updateRemoteCodec, from ".concat(r," to ").concat(s)),0===e.length)a=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(a=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Lr(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),a.length!==e.length)return dN.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(LO("USE_PUB_RTX")||LO("USE_SUB_RTX")){const e=xU(o,this.rtpCapabilities.recv.videoCodecs);o.push(...e)}this._rtpCapabilities.recv.videoCodecs=o;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,d=IU(aj.VIDEO,l,c,n);return a.forEach((e=>{const t=d.map((e=>e.payloadType.toString(10)));dN.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from"),e.attributes.payloads,"to",d),e.attributes.payloads=d,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,i){const o=this.rtpCapabilities.send,s=e===aj.VIDEO?o.videoCodecs:o.audioCodecs,a=e===aj.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:WB,protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:a,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=bx(e);return yU(r),vU(r,t),_U(r,t),EU(r),bU(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=bx(e);return bU(n,t,this.localCapabilities.recv),RU(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>hI()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}};function GB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GB(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KB=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(KB||{});const qB=new Map;function XB(e,t,n,r){let{scale:i}=e;if(0===i&&r===KB.UP||i>=t.length-1&&r===KB.DOWN)return e;let o=YB(YB({},e),{},{scale:r===KB.DOWN?++i:--i});switch(n){case"maintain-framerate":o=YB(YB({},o),t[i].motion);break;case"maintain-resolution":o=YB(YB({},o),t[i].detail);break;case"balanced":o=YB(YB({},o),t[i].balanced)}return o}function JB(e,t){if(t){const n={overUse:0,underUse:0,adaptationList:QB(t)};qB.set(e,n)}else qB.delete(e)}function QB(e){const t=YB({},e),{bitrateMax:n,frameRate:r,scaleResolutionDownBy:i,bitrateMin:o}=t,{MIN_FRAME_RATE:s,MAX_THRESHOLD_FRAMERATE:a,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:l,BITRATE_MAX_THRESHOLD:d,BWE_SCALE_UP_THRESHOLD:u,BWE_SCALE_DOWN_THRESHOLD:h,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:f,BALANCE_BITRATE_FACTOR:m,BALANCE_FRAMERATE_FACTOR:g,BALANCE_RESOLUTION_FACTOR:v,MOTION_RESOLUTION_FACTOR:y,MOTION_BITRATE_FACTOR:_,DETAIL_FRAMERATE_FACTOR:E,DETAIL_BITRATE_FACTOR:b}=OO,w=Math.min(t.frameRate,a),S=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(h,1)*n),bwe_up:n,fps_down:Math.round(Math.pow(p,1)*w),fps_up:r},balanced:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:o}}];for(let A=1;A<=c;A++){const e={bwe_up:Math.round(Math.pow(u,A)*n),bwe_down:Math.round(Math.pow(h,A+1)*n),fps_up:Math.round(Math.pow(f,A)*w),fps_down:Math.round(Math.pow(p,A+1)*w)},t={scaleResolutionDownBy:i/Math.pow(v,A),frameRate:Math.max(Math.round(Math.pow(g,A)*r),s),bitrateMax:Math.max(Math.round(Math.pow(m,A)*n),d),bitrateMin:Math.max(Math.round(Math.pow(m,A)*o),l)},a={scaleResolutionDownBy:i/Math.pow(y,A),frameRate:r,bitrateMax:Math.max(Math.round(Math.pow(_,A)*n),d),bitrateMin:Math.max(Math.round(Math.pow(_,A)*o),l)},c={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(E,A)*r),s),bitrateMax:Math.max(Math.round(Math.pow(b,A)*n),d),bitrateMin:Math.max(Math.round(Math.pow(b,A)*o),l)};S.push({scale:A,threshold:e,balanced:t,motion:a,detail:c})}return S}function ZB(e,t,n,r,i,o){const s=qB.get(e)||{overUse:0,underUse:0,adaptationList:QB(i)},{adaptationList:a}=s;qB.set(e,s);const{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:l}=OO,{scale:d}=r;let u,h;return"number"==typeof t&&t>0&&function(e,t,n,r){if(t>=n.length)return!1;let{threshold:{fps_down:i}}=n[t];return LO("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(i=n[0].threshold.fps_down),e<i}(t,d,a,o)&&(s.overUse++,h=fO.CPU,s.overUse>c)||"number"==typeof n&&n>0&&function(e,t,n){if(t>=n.length)return!1;const{threshold:{bwe_down:r}}=n[t];return e<r}(n,d,a)&&(s.overUse++,h=fO.BANDWIDTH,s.overUse>c)?(s.overUse=0,s.underUse=0,u=XB(r,a,o,KB.DOWN),[u,h]):("number"==typeof t&&t>0&&"number"==typeof n&&n>0&&function(e,t,n,r){if(0===t)return;let{threshold:{fps_up:i}}=n[t];return LO("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(i=n[1].threshold.fps_up),e>i}(t,d,a,o)&&function(e,t,n){if(0===t)return;const{threshold:{bwe_up:r}}=n[t];return e>r}(n,d,a)&&(s.underUse++,s.underUse>l&&(s.overUse=0,s.underUse=0,u=XB(r,a,o,KB.UP),0===u.scale&&(h=fO.NONE))),[u,h])}function $B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$B(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tF(e){var t;return!!LO("ENABLE_AG_ADAPTATION")&&!!(e instanceof DP||Lr(t=e._hints).call(t,FN.CUSTOM_TRACK))&&(!!LO("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(e){const t=iI();if(t.os!==$R.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])>=e}(14)&&_I(17,4,!0)||yI(14)&&EI(17,4,!0)))}const nF=new Map;function rF(e,t){const n=nF.get(e);if(n){const{timer:t}=n;window.clearTimeout(t),nF.delete(e)}t.qualityLimitationReason=fO.NONE,JB(e)}function iF(e,t){var n;let r;switch(t){case uj.LocalAudioTrack:r=XM.Audio;break;case uj.LocalVideoTrack:r=Lr(n=e._hints).call(n,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalVideoLowTrack:r=XM.Low}return r}function oF(e){const t=bN();if(e.some((e=>e._bypassWebAudio)))throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function sF(e,t){oF(e);const n=t||new Gk;return e.forEach((e=>n.addAudioTrack(e))),n}const aF=!bN().supportUnifiedPlan||LO("CHROME_FORCE_PLAN_B")&&OI();function cF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return aF?(n={spec:t,store:e},FU("PlanBConnection").create(n)):new fF(t,e)}function lF(e){return e&&("disconnected"===e.iceConnectionState||"checking"===e.iceConnectionState||"failed"===e.iceConnectionState)}function dF(e){try{if(e.iceServers)return!1;if(e.turnServer&&"off"!==e.turnServer.mode){if(sx(e.turnServer.servers))return!1;if(LO("FORCE_TURN_TCP")||e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).some((e=>e.forceturn)))return!0}return!1}catch(e){return!1}}var uF;function hF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hF(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let fF=(uF=class e extends sj{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Lr(t=Object.keys(FO)).call(t,e)})))]}constructor(t,n){super(t,n),wC(this,"id",kx(5,"connection-")),wC(this,"store",void 0),wC(this,"peerConnection",void 0),wC(this,"forceTurn",!1),wC(this,"remoteSDP",void 0),wC(this,"initialOffer",void 0),wC(this,"transportEventReceiver",void 0),wC(this,"statsFilter",void 0),wC(this,"extension",{useXR:LO("USE_XR")}),wC(this,"localCapabilities",void 0),wC(this,"remoteCodecs",void 0),wC(this,"localCandidateCount",0),wC(this,"allCandidatesReceived",!1),wC(this,"isPreallocation",!1),wC(this,"preSSRCMap",new Map),wC(this,"dataStreamChannelMap",new Map),wC(this,"establishPromise",void 0),wC(this,"recoveredDataChannelIds",[]),wC(this,"currentDataChannelId",1),wC(this,"supportAV1RtpSpec",!1),wC(this,"mutex",void 0),wC(this,"qualityLimitationReason",fO.NONE),this.store=n,this.forceTurn=dF(t),this.mutex=new Gx("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=wO(this.peerConnection,LO("STATS_UPDATE_INTERVAL"),void 0,hI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(e){const t=this.preSSRCMap.get(e);if(void 0!==t){const e=this.peerConnection.getTransceivers().find((e=>e.mid===t));if(e)return{transceiver:e,track:e.receiver.track,id:t}}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else dN.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else dN.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const n=await this.peerConnection.createOffer();if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const r=hU(n.sdp),i=await SU({filterRTX:!LO("USE_PUB_RTX")&&!LO("USE_SUB_RTX"),filterVideoFec:LO("FILTER_VIDEO_FEC"),filterAudioFec:LO("FILTER_AUDIO_FEC"),filterVideoCodec:LO("FILTER_VIDEO_CODEC")},this.extension);if(this.localCapabilities=TU(i),this.initialOffer=n,LO("ENABLE_SVC")&&"av1"==this.store.codec){const t=await async function(){try{const e=new RTCPeerConnection;e.addTransceiver("video",{direction:"sendonly",sendEncodings:[{scalabilityMode:mO.L1T3}]});const t=await e.createOffer();if(!t.sdp)return void e.close();const n=HO(t.sdp).mediaDescriptions[0];if(!n)return;const r=n.attributes.extmaps.find((e=>"https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension"===e.extensionName));return e.close(),r}catch(e){return}}();var e;t&&(this.supportAV1RtpSpec=!0,null===(e=i.send)||void 0===e||e.videoExtensions.push(t))}let o;return n.sdp&&kU(n.sdp)&&(o=bx(i),(t=o).send&&(sU(aj.VIDEO,t.send.videoExtensions),sU(aj.AUDIO,t.send.audioExtensions)),t.recv&&(sU(aj.VIDEO,t.recv.videoExtensions),sU(aj.AUDIO,t.recv.audioExtensions)),t.sendrecv&&(sU(aj.VIDEO,t.sendrecv.videoExtensions),sU(aj.AUDIO,t.sendrecv.audioExtensions))),pF(pF({},r),{},{rtpCapabilities:o||i,offerSDP:n.sdp})}catch(e){throw new jI(MI.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}var t}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.initialOffer.sdp&&kU(this.initialOffer.sdp)&&(t=e.rtpCapabilities,n=this.localCapabilities,t.send&&(oU(aj.VIDEO,t.send.videoExtensions,n.send.videoExtensions),oU(aj.AUDIO,t.send.audioExtensions,n.send.audioExtensions)),t.recv&&(oU(aj.VIDEO,t.recv.videoExtensions,n.recv.videoExtensions),oU(aj.AUDIO,t.recv.audioExtensions,n.recv.audioExtensions))),this.remoteSDP=new zB(pF(pF({},e),{},{localCapabilities:this.localCapabilities}),this.supportAV1RtpSpec),e.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const r=this.remoteSDP.toString(),i=NU(this.initialOffer.sdp,this.extension),o=this.logSDPExchange(i||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r});const s=this.peerConnection.getTransceivers()[0];if(null!=s&&s.receiver&&this.tryBindTransportEvents(s.receiver),LO("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(LO("PRELOAD_MEDIA_COUNT"));const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}const{preSSRCs:a}=e;if(Array.isArray(a)&&a.length>0){const{mids:e}=this.remoteSDP.batchSend(a.map((e=>({kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(a[t].ssrcId,e)})),await OU(this.peerConnection,this.remoteSDP,this.extension),dN.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}var t,n}async updateRemoteConnect(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");const{rtpCapabilities:t}=e;this.remoteSDP.updateRemoteRTPCapabilities(t),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:n}=e;if(Array.isArray(n)&&n.length>0){const{mids:e}=this.remoteSDP.batchSend(n.map((e=>Object.assign({},{kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(n[t].ssrcId,e)}))}await OU(this.peerConnection,this.remoteSDP,this.extension),dN.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return sR((function*(){const i=yield aR(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[],s=rU();e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,pF({direction:"sendonly"},"video"===e.trackMediaType&&r.supportAV1RtpSpec&&s?{sendEncodings:[{scalabilityMode:s}]}:{}));o.push(t),e._updateRtpTransceiver(t)})),hI()&&!0===LO("SIMULCAST")&&(yield aR(r.applySimulcastForFirefox(o,e)));const a=yield aR(r.peerConnection.createOffer()),c=r.remoteSDP.predictReceivingMids(e.length),l=r.mungSendOfferSDP(a.sdp,e,c),d=HO(l),u=c.map((e=>{const t=d.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return pU(t,LO("USE_PUB_RTX"))}));let h;try{h=yield u}catch(i){h=[],r.remoteSDP.receive(e,t,n,h);const o=r.remoteSDP.toString();throw yield aR(r.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield aR(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield aR(r.stopSending(c,!0)),i}r.remoteSDP.receive(e,t,n,h);const p=r.remoteSDP.toString(),f=r.logSDPExchange(l,"offer","local","send");return yield aR(r.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield aR(r.applySimulcastEncodings(o,e)),yield aR(r.applySendEncodings(o,e)),null==f||f(p),yield aR(r.peerConnection.setRemoteDescription({type:"answer",sdp:p})),o.map(((e,t)=>{const n=c[t];return{localSSRC:u[t],id:n,transceiver:e}}))}catch(e){throw e instanceof jI?e:new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)dN.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:LO("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:r}=this.remoteSDP.sendDataChannel();if(r){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),dN.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else dN.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(e){throw e instanceof jI?e:new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(e.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(e){throw e instanceof jI?e:new jI(MI.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(e.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;rF(this.id+e.mid,this),e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);o&&(await OU(this.peerConnection,this.remoteSDP,this.extension),dN.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP.")));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:i,transceiver:s}}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);return n&&(await OU(this.peerConnection,this.remoteSDP,this.extension),dN.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");e.forEach((e=>{Array.from(this.preSSRCMap.entries()).some((t=>{let[n,r]=t;if(r===e)return this.preSSRCMap.delete(n),!0}))})),this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec(e,this.remoteCodecs,this.store.codec);const i=this.remoteSDP.toString();null==r||r(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return sR((function*(){const n=yield aR(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const n=bN().supportPCSetConfiguration,r=LO("FORCE_TURN_TCP")||t.forceTurn;if(e===cj.RELAY&&!n)return;if(n&&!r){const n=e===cj.RELAY?"relay":"all",r=t.peerConnection.getConfiguration();r.iceTransportPolicy!==n&&(dN.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(r.iceTransportPolicy,"] to [").concat(n,"]")),r.iceTransportPolicy=n,t.peerConnection.setConfiguration(r))}t.remoteSDP.updateCandidates(e);const i=yield aR(t.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const o=hU(i.sdp),{remoteIceParameters:s}=yield o.iceParameters;t.remoteSDP.restartICE(s);const a=t.remoteSDP.toString(),c=t.logSDPExchange(i.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield aR(t.peerConnection.setLocalDescription(i)),null==c||c(a),yield aR(t.peerConnection.setRemoteDescription({type:"answer",sdp:a}))}catch(e){dN.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.getTransceivers().forEach((e=>{rF(this.id+e.mid,this)})),this.preSSRCMap.clear(),this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return pF(pF({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?hI()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:pF(pF({},sO),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:pF(pF({},sO),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidateerror=e=>{if(e&&(e.errorCode||e.errorText)){var t;const n="code: ".concat(e.errorCode,", message: ").concat(e.errorText),r=e.port?"local: ".concat(e.port):"";dN.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICECandidateError(").concat(n,"), url: ").concat(e.url||"",", host_candidate:").concat(r)),null===(t=this.onICECandidateError)||void 0===t||t.call(this,n)}},this.peerConnection.onicegatheringstatechange=e=>{e&&e.target&&"iceGatheringState"in e.target&&dN.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] RTCPeerConnection.onicegatheringstatechange(").concat(e.target.iceGatheringState,")"))},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,dN.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,dN.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),LO("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[]};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(sx(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),LO("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),LO("FORCE_TURN_TCP")?n.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),LO("ENABLE_ENCODED_TRANSFORM")&&bN().supportWebRTCEncodedTransform&&(n.encodedInsertableStreams=!0),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(qj(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!LO("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();dN.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n,r;if(!t){const n=this.peerConnection.getSenders();t=n.find((t=>t.track===e._mediaStreamTrack))}if(!t)return dN.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return dN.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!bN().supportSetRtpSenderParameters)return dN.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const i={},o={};switch(e._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;case"balanced":i.degradationPreference="balanced"}const s=function(e,t){return e.getTransceivers().find((e=>e.sender.track===t||e.receiver.track===t))}(this.peerConnection,e._mediaStreamTrack),a=ZD(e);if(tF(e)&&s&&t&&a&&this.getLocalVideoStats&&Lr(n=["vp8","vp9"]).call(n,this.store.codec)){var c;const n=i.degradationPreference||(Lr(c=e._hints).call(c,FN.CUSTOM_TRACK)?LO("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");!function(e,t,n,r,i,o){if(rF(e,n),i(t),"balanced"!==r&&"maintain-framerate"!==r&&"maintain-resolution"!==r)return;let s=-1;JB(e,t);const a=window.setInterval((()=>{const a=nF.get(e);if(!LO("ENABLE_AG_ADAPTATION")||!a)return rF(e,n),void i(t);const c=o();if(c.sendPackets>0&&c.OutgoingAvailableBandwidth>0){if(-1===s)return void(s=Date.now());if(Date.now()-s<1e3)return;const o=c.sendFrameRate,l=c.OutgoingAvailableBandwidth,[d,u]=ZB(e,o,l,a.adaptationConfig,t,r);u&&(n.qualityLimitationReason=u),d&&a.adaptationConfig.scale!==d.scale&&(dN.debug("[".concat(e,"] applyAdaptation: ").concat(n.qualityLimitationReason,"\n           sendFps ").concat(o,", bwe ").concat(l,", switch from ").concat(a.adaptationConfig.scale," to ").concat(d.scale," ")),a.adaptationConfig=eF(eF({},a.adaptationConfig),d),i(d))}}),LO("CHECK_LOCAL_STATS_INTERVAL")),c=eF({},t);nF.set(e,{timer:a,adaptationConfig:c,originConfig:t,adaptationFunc:i}),dN.debug("[".concat(e,"] start adaptation, originConfig: ").concat(JSON.stringify(t),", degradationPreference: ").concat(r))}(this.id+s.mid,a,this,n,(e=>{t&&this.updateAdaptation(t,e)}),this.getLocalVideoStats.bind(this))}if(e._encoderConfig){var l;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(o.maxBitrate=1e3*t),(Lr(l=e._hints).call(l,FN.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(o.maxFramerate=Jj(n)),r&&r>=1&&(o.scaleResolutionDownBy=r))}const{maxFramerate:d}=LO("ENCODER_CONFIG_LIMIT");if(d&&"number"==typeof d&&(o.maxFramerate=o.maxFramerate?Math.min(o.maxFramerate,d):d),LO("DSCP_TYPE")&&OI()){var u;const e=LO("DSCP_TYPE");Lr(u=["very-low","low","medium","high"]).call(u,e)&&(o.networkPriority=e)}const h=t.getParameters(),p=null===(r=h.encodings)||void 0===r?void 0:r[0];hI()&&!p&&(i.encodings=[o]),p&&Object.assign(p,o),Object.assign(h,i),dN.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(h.encodings))),await t.setParameters(h),await async function(e,t,n){try{var r;if(!bN().supportSetRtpSenderParameters)return;if(!function(e){return"vp9"===e||"av1"===e}(e)||!LO("ENABLE_SVC"))return;const i={},o={},s=t.getParameters(),a=null===(r=s.encodings)||void 0===r?void 0:r[0];o.scalabilityMode=rU(n),a&&Object.assign(a,o),Object.assign(s,i),await t.setParameters(s),dN.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(s.encodings)))}catch(e){dN.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",e)}}(this.store.codec,t,LO("SVC_MODE"))}async updateAdaptation(e,t){var n,r;if(!e)return dN.debug("[updateAdaptation] no rtpSender found");if(!bN().supportSetRtpSenderParameters)return dN.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const i={},{bitrateMax:o,frameRate:s,scaleResolutionDownBy:a}=t;o&&(i.maxBitrate=1e3*o),s&&(i.maxFramerate=Jj(s)),a&&a>=1&&Lr(n=["vp8","vp9"]).call(n,this.store.codec)&&(i.scaleResolutionDownBy=a);const c=e.getParameters(),l=null===(r=c.encodings)||void 0===r?void 0:r[0];l&&Object.assign(l,i),Object.assign(c,{});try{await e.setParameters(c),dN.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(c.encodings)))}catch(t){!("transport"in e)||e.transport&&"connected"===e.transport.state?"connected"!==this.peerConnectionState?dN.debug("[updateAdaptation] peerConnection not connected}"):dN.debug("[updateAdaptation] updateRtpSenderEncodings failed",t):dN.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(e,t){try{if(!bN().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof NP&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){dN.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=HO(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(vU(o,e),wU(o,e,this.store.codec))})),zO(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof NP&&!Lr(n=l._hints).call(n,FN.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!hI()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof NP&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof NP&&LO("SIMULCAST")&&"vp8"===this.store.codec&&!Lr(t=e._hints).call(t,FN.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(LO("SDP_LOGGING"))return dN.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return t&&0!==t.length?t[0].ssrcId:void 0}setConfiguration(t){if(bN().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},bM(uF.prototype,"updateRemoteRTPCapabilities",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"updateRemoteRTPCapabilities"),uF.prototype),bM(uF.prototype,"connect",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"connect"),uF.prototype),bM(uF.prototype,"updateRemoteConnect",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"updateRemoteConnect"),uF.prototype),bM(uF.prototype,"createDataChannels",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"createDataChannels"),uF.prototype),bM(uF.prototype,"receive",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"receive"),uF.prototype),bM(uF.prototype,"batchReceive",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"batchReceive"),uF.prototype),bM(uF.prototype,"stopReceiving",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"stopReceiving"),uF.prototype),bM(uF.prototype,"muteRemote",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"muteRemote"),uF.prototype),bM(uF.prototype,"unmuteRemote",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"unmuteRemote"),uF.prototype),bM(uF.prototype,"muteLocal",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"muteLocal"),uF.prototype),bM(uF.prototype,"unmuteLocal",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"unmuteLocal"),uF.prototype),bM(uF.prototype,"close",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"close"),uF.prototype),bM(uF.prototype,"updateEncoderConfig",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"updateEncoderConfig"),uF.prototype),bM(uF.prototype,"updateSendParameters",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"updateSendParameters"),uF.prototype),bM(uF.prototype,"replaceTrack",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"replaceTrack"),uF.prototype),bM(uF.prototype,"updateAdaptation",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"updateAdaptation"),uF.prototype),bM(uF.prototype,"getRemoteSSRC",[mF],Object.getOwnPropertyDescriptor(uF.prototype,"getRemoteSSRC"),uF.prototype),uF);function mF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function gF(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=Jj(t.width),r.height=Jj(t.height);const i=Jj(t.framerate||15);document.body.append(n),document.body.append(r);let o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();const s=r.getContext("2d");if(!s)throw new _N(MI.UNEXPECTED_ERROR,"can not get canvas context");const a=bN(),c=r.captureStream(a.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,i=r.width*t;Math.abs(i-r.height)>=2&&(dN.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(i)),r.height=i)}s.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))},r.stopCapture=ED((()=>r.startCapture&&r.startCapture()),i);const l=c.stop;return c.stop=()=>{l.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),dN.debug("clean low stream renderer")},c}var vF=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(vF||{}),yF=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e[e.BYTES_RETRANSMIT=2173]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2172]="PACKAGES_RETRANSMIT",e[e.HUGE_FRAME_SENT=2174]="HUGE_FRAME_SENT",e[e.KEY_FRAMES_ENCODED=2207]="KEY_FRAMES_ENCODED",e}(yF||{}),_F=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(_F||{}),EF=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e[e.FRAMES_DROPPED=2181]="FRAMES_DROPPED",e[e.BYTES_RETRANSMIT=2175]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2176]="PACKAGES_RETRANSMIT",e[e.PACKAGES_DISCARDED=2198]="PACKAGES_DISCARDED",e[e.AVG_DECODE=2200]="AVG_DECODE",e[e.AVG_PROCESSING_DELAY=2202]="AVG_PROCESSING_DELAY",e[e.AVG_ASSEMBLY_TIME=2203]="AVG_ASSEMBLY_TIME",e[e.AVG_INTER_FRAME_DELAY=2204]="AVG_INTER_FRAME_DELAY",e[e.KEY_FRAMES_DECODED=2206]="KEY_FRAMES_DECODED",e}(EF||{}),bF=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(bF||{}),wF=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(wF||{}),SF=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e[e.BYTES_RETRANSMIT=2179]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2180]="PACKAGES_RETRANSMIT",e}(SF||{}),AF=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e[e.BYTES_RETRANSMIT=2178]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2177]="PACKAGES_RETRANSMIT",e[e.PACKAGES_DISCARDED=2199]="PACKAGES_DISCARDED",e[e.AVG_PROCESSING_DELAY=2201]="AVG_PROCESSING_DELAY",e}(AF||{}),CF=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(CF||{}),TF=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e[e.STATS_UPDATE_INTERVAL=2205]="STATS_UPDATE_INTERVAL",e}(TF||{}),RF=function(e){return e[e.RTC_PEER_CONNECTION_STATE=2219]="RTC_PEER_CONNECTION_STATE",e}(RF||{});const IF=1e3,xF=Math.max(6,3);function OF(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function NF(e){const t={[TF.CONN_TYPE]:0,[TF.RTT]:e.rtt,[TF.STATS_UPDATE_INTERVAL]:e.updateInterval?Math.round(Math.max(0,e.updateInterval)):void 0};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[TF.CONN_TYPE]=1),"tcp"===n&&(t[TF.CONN_TYPE]=3),"tls"===n&&(t[TF.CONN_TYPE]=4);break}case"srflx":t[TF.CONN_TYPE]=2;break;case"unknown":t[TF.CONN_TYPE]=5;break;default:t[TF.CONN_TYPE]=0}return t}function DF(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}class kF extends ZI{constructor(e){super(),wC(this,"store",void 0),wC(this,"uploadWRTCStatsTimer",void 0),wC(this,"uploadOutboundDenoiserStatsTimer",void 0),wC(this,"uploadExtStatsTimer",void 0),wC(this,"uploadExtUsageStatsTimer",void 0),wC(this,"uploadInboundExtStatsTimer",void 0),wC(this,"requestStats",void 0),wC(this,"requestTransportStats",void 0),wC(this,"requestLocalMedia",void 0),wC(this,"requestRemoteMedia",void 0),wC(this,"requestAllTracks",void 0),wC(this,"requestVideoIsReady",void 0),wC(this,"requestUploadStats",void 0),wC(this,"requestUpload",void 0),wC(this,"uploadOutboundStarted",!1),wC(this,"uploadInboundStarted",!1),wC(this,"uploadTransportStarted",!1),wC(this,"uploadBaseStatsStarted",!1),wC(this,"uploadExtensionUsageStarted",!1),wC(this,"lastRecvStats",void 0),wC(this,"lastSendStats",void 0),wC(this,"lastRefRecvStats",void 0),wC(this,"lastRefSendStats",void 0),wC(this,"lastFullRecvStats",void 0),wC(this,"lastFullSendStats",void 0),wC(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;const t=e%3==0,n=e%6==0;let r,i;if(this.uploadTransportStarted&&(r=this.requestStats(),this.store.useP2P&&(i=this.requestStats(!0))),!r&&this.uploadOutboundStarted&&(r=this.requestStats()),!i&&this.uploadInboundStarted&&(i=this.requestStats(!0)),r||i){var o;const e={};if(this.uploadTransportStarted&&r){const n=this.getTransportStats(r,i,t);n&&(e.misc=[n])}if(this.uploadOutboundStarted&&r){const i=this.getOutboundStats(r,n?this.lastFullSendStats:t?this.lastRefSendStats:this.lastSendStats,t,n);i&&(e.outbound=[i])}if(this.uploadInboundStarted&&i){const r=this.getInboundStats(i,n?this.lastFullRecvStats:t?this.lastRefRecvStats:this.lastRecvStats,t,n);r&&(e.inbound=r)}const s=null===(o=this.requestTransportStats)||void 0===o?void 0:o.call(this).connectState;s&&(Array.isArray(e.misc)?e.misc[0]&&e.misc[0].addition&&(e.misc[0].addition[RF.RTC_PEER_CONNECTION_STATE]=gO[s]):e.misc=[{addition:{[RF.RTC_PEER_CONNECTION_STATE]:gO[s]}}]),this.requestUploadStats(e)}this.lastRecvStats=i,this.lastSendStats=r,n&&(this.lastFullRecvStats=i,this.lastFullSendStats=r),t&&(this.lastRefRecvStats=i,this.lastRefSendStats=r)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;this.uploadBaseStatsStarted=!0;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted){if(this.uploadBaseStatsStarted){var t,n;const e=null===(t=this.requestTransportStats)||void 0===t?void 0:t.call(this);return void(e&&(null===(n=this.requestUploadStats)||void 0===n||n.call(this,{misc:[{addition:{[RF.RTC_PEER_CONNECTION_STATE]:gO[e.connectState]}}]})))}return this.stopUploadWRTCStats()}this.uploadWRTCStats(e),++e===xF+1&&(e=1)}),IF)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,n){if(!this.requestStats)return;if(!n)return null==e.rtt?void 0:{addition:{[TF.RTT]:e.rtt,[TF.CONN_TYPE]:void 0,[TF.STATS_UPDATE_INTERVAL]:e.updateInterval||void 0}};const r=NF(e);if(this.store.useP2P){if(t){const e=NF(t);r[TF.CONN_TYPE]+=e[TF.CONN_TYPE]<<3}r[TF.CONN_TYPE]+=110}else r[TF.CONN_TYPE]+=100;return{addition:r}}getOutboundStats(e,t,n,r){if(!this.requestUploadStats||!this.requestLocalMedia)return;const i=this.requestLocalMedia();if(!i||0===i.length)return;let o,s,a;return i.forEach((i=>{let[c,{track:l,ssrcs:d}]=i;switch(c){case uj.LocalVideoLowTrack:case uj.LocalVideoTrack:if(c===uj.LocalVideoTrack){const i=function(e,t,n,r,i,o){const s=t.videoSend.find((t=>t.ssrc===e));if(!s)return;const a={},{sentFrame:c,inputFrame:l}=s;if(o&&(OF(a,yF.QP_SUM,s.qpSumPerFrame),l&&c)){const e=l.frameRate,t=c.frameRate;a[yF.FREEZE]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0}if(i){switch(c&&(OF(a,yF.HEIGHT,c.height),OF(a,yF.WIDTH,c.width),OF(a,yF.FRAME_RATE,c.frameRate)),a[yF.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0,s.adaptionChangeReason){case"none":a[yF.ADAPTATION]=0;break;case"cpu":a[yF.ADAPTATION]=1;break;case"bandwidth":a[yF.ADAPTATION]=2;break;case"other":a[yF.ADAPTATION]=3}let o=0;s.adaptionChangeReason&&(o+=DF(s.adaptionChangeReason)),t.qualityLimitationReason&&(o+=DF(t.qualityLimitationReason)<<3),a[yF.ADAPTATION]=o,a[yF.PLAYER_STATUS]=sD[r._player?r._player.videoElementStatus:"uninit"],OF(a,yF.NACKS,s.nacksCount),OF(a,yF.PLIS,s.plisCount),OF(a,yF.FIRS,s.firsCount),OF(a,yF.AVG_ENCODE,s.avgEncodeMs),OF(a,yF.HUGE_FRAME_SENT,s.hugeFramesSent),OF(a,yF.BYTES_RETRANSMIT,s.retransmittedBytesSent),OF(a,yF.PACKAGES_RETRANSMIT,s.retransmittedPacketsSent),OF(a,yF.KEY_FRAMES_ENCODED,s.keyFramesEncoded);const l=n&&n.videoSend.find((t=>t.ssrc===e));if(l){let e=i?IF:6e3;l.timestamp&&s.timestamp&&(e=s.timestamp-l.timestamp),null!=l.packets&&null!=s.packets&&OF(a,yF.PACKAGE_RATE,1e3*(s.packets-l.packets)/e),null!=s.packetsLost&&null!=l.packetsLost&&OF(a,yF.PACKAGE_LOST,s.packetsLost-l.packetsLost),null!=l.bytes&&null!=s.bytes&&OF(a,yF.BITRATE,8*(s.bytes-l.bytes)/e)}}return a}(d[0].ssrcId,e,t,l,n,r),o=l&&function(e,t,n,r){const i=t.videoSend.find((t=>t.ssrc===e));if(!i)return null;const o={};if(r){const e=i.inputFrame,t=e&&e.height||n.videoHeight||0,r=e&&e.width||n.videoWidth||0,s=e&&e.frameRate||0;OF(o,vF.HEIGHT,t),OF(o,vF.WIDTH,r),OF(o,vF.FRAME_RATE,s)}return o}(d[0].ssrcId,e,l,n),a=function(e,t){const n={};return t&&(OF(n,yF.RETRANSMIT,e.bitrate.retransmit),OF(n,yF.TARGET_ENCODED,e.bitrate.targetEncoded),OF(n,yF.ACTUAL_ENCODED,e.bitrate.actualEncoded),OF(n,yF.TRANSMIT,e.bitrate.transmit),OF(n,yF.BANDWIDTH,e.sendBandwidth)),n}(e,n);s=Object.assign({},i,o,a)}else a=function(e,t,n,r){const i=t.videoSend.find((t=>t.ssrc===e));if(!i)return;const o={};if(r){const t=i.sentFrame;if(t&&(OF(o,_F.HEIGHT,t.height),OF(o,_F.WIDTH,t.width),OF(o,_F.FRAME_RATE,t.frameRate)),n){const t=n.videoSend.find((t=>t.ssrc===e));if(t){let e=6e3;t.timestamp&&i.timestamp&&(e=i.timestamp-t.timestamp),null!=t.packets&&null!=i.packets&&OF(o,_F.PACKAGE_RATE,1e3*(i.packets-t.packets)/e),null!=i.packetsLost&&null!=t.packetsLost&&OF(o,_F.PACKAGE_LOST,i.packetsLost-t.packetsLost),null!=t.bytes&&null!=i.bytes&&OF(o,_F.BITRATE,8*(i.bytes-t.bytes)/e)}}}return o}(d[0].ssrcId,e,t,n);break;case uj.LocalAudioTrack:o=l&&function(e,t,n,r,i){const o=t.audioSend.find((t=>t.ssrc===e));if(!o)return;const s={};if(i){s[SF.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0;const t=100*r._source.getAccurateVolumeLevel(),i=o.inputLevel;if(null!=i){const e=Math.ceil(50*Math.log10(100*i+1));OF(s,SF.LEVEL,e)}OF(s,wF.PCM_LEVEL,t),OF(s,SF.AEC_RETURN_LOSS,o.aecReturnLoss),OF(s,SF.AEC_RETURN_LOSS_ENH,o.aecReturnLossEnhancement),OF(s,SF.BYTES_RETRANSMIT,o.retransmittedBytesSent),OF(s,SF.PACKAGES_RETRANSMIT,o.retransmittedPacketsSent),s[SF.FREEZE]=0;const a=n&&n.audioSend.find((t=>t.ssrc===e));if(a){let e=6e3;a.timestamp&&o.timestamp&&(e=o.timestamp-a.timestamp),null!=a.bytes&&null!=o.bytes&&OF(s,SF.BITRATE,8*(o.bytes-a.bytes)/e),null!=a.packets&&null!=o.packets&&OF(s,SF.PACKAGE_RATE,1e3*(o.packets-a.packets)/e)}}return s}(d[0].ssrcId,e,t,l,n)}})),{high:s,low:a,audio:o}}getInboundStats(e,t,n,r){if(!this.requestRemoteMedia)return;const i=this.requestRemoteMedia()||[],o=[];return i.forEach((i=>{let[s,a]=i;const c={peer:s.uid};if(a.has(aj.VIDEO)&&s.videoTrack){const i=s._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(s._videoSSRC)||!1,o=s.videoTrack?function(e,t,n,r,i,o,s,a){const c=t.videoRecv.find((t=>t.ssrc===e));if(!c)return;const l={},{receivedFrame:d,outputFrame:u,decodeFrameRate:h}=c,p=n&&n.videoRecv.find((t=>t.ssrc===e));if(OF(l,bF.FRAME_RATE_DECODE,h),c.framesRateFirefox&&OF(l,EF.FRAME_RATE,c.framesRateFirefox),d&&OF(l,EF.FRAME_RATE,d.frameRate),OF(l,EF.FRAMES_DROPPED,c.framesDroppedCount),OF(l,EF.BYTES_RETRANSMIT,c.retransmittedBytesReceived),OF(l,EF.PACKAGES_RETRANSMIT,c.retransmittedPacketsReceived),OF(l,EF.PACKAGES_DISCARDED,c.packetsDiscarded),OF(l,EF.AVG_DECODE,c.avgDecodeMs),OF(l,EF.AVG_PROCESSING_DELAY,c.avgProcessingDelayMs),OF(l,EF.AVG_ASSEMBLY_TIME,c.avgFramesAssembledFromMultiplePacketsMs),OF(l,EF.AVG_INTER_FRAME_DELAY,c.avgInterFrameDelayMs),OF(l,EF.KEY_FRAMES_DECODED,c.keyFramesDecoded),p){const e=t.timestamp-n.timestamp||IF*(a?6:s?3:1);null!=c.packetsLost&&null!=p.packetsLost&&OF(l,EF.PACKAGE_LOST,c.packetsLost-p.packetsLost),null!=p.bytes&&null!=c.bytes&&OF(l,EF.BITRATE,8*(c.bytes-p.bytes)/e),null!=p.packets&&null!=c.packets&&OF(l,EF.PACKAGE_RATE,1e3*(c.packets-p.packets)/e)}if(a&&(OF(l,EF.QP_SUM,c.qpSumPerFrame),l[EF.FREEZE]=i&&MB.isRemoteVideoFreeze(r,c,p)?1:0),s){var f;d?(OF(l,EF.HEIGHT,d.height),OF(l,EF.WIDTH,d.width)):r&&(OF(l,EF.HEIGHT,r._videoHeight||0),OF(l,EF.WIDTH,r._videoWidth||0)),u&&OF(l,bF.FRAME_RATE_OUTPUT,u.frameRate);const e=null===(f=r._player)||void 0===f?void 0:f.rendFrameRate.toFixed(0);if(e&&OF(l,bF.FRAME_RATE_RENDER,+e),OF(l,EF.JITTER_BUFFER,c.jitterBufferMs),OF(l,EF.CURRENT_DELAY,c.currentDelayMs),OF(l,EF.FIRS,c.firsCount),OF(l,EF.NACKS,c.nacksCount),OF(l,EF.PLIS,c.plisCount),r){l[EF.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1;const e=r._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:n,videoElementStatus:r}=e;if(t&&t.length>0&&OF(l,bF.FREEZE_TIME,t.splice(0,1)[0]),o&&"visible"===XP.visibility&&r===iD.PLAYING&&bN().supportRequestVideoFrameCallback){const t=Math.min(6e3,n);e.renderFreezeAccTime=Math.max(0,n-t),OF(l,bF.FREEZE_TIME_RENDER,t)}if("number"==typeof c.totalFreezesDuration){const e=p&&p.totalFreezesDuration?c.totalFreezesDuration-p.totalFreezesDuration:c.totalFreezesDuration;OF(l,bF.FREEZE_DURATION,1e3*e)}}}if(l[EF.PLAYER_STATUS]=sD[r._player?r._player.videoElementStatus:"uninit"],p&&void 0!==c.totalInterFrameDelay&&void 0!==c.totalSquaredInterFrameDelay&&void 0!==p.totalInterFrameDelay&&void 0!==p.totalSquaredInterFrameDelay){const e=c.totalInterFrameDelay-p.totalInterFrameDelay,t=c.totalSquaredInterFrameDelay-p.totalSquaredInterFrameDelay,n=c.framesDecodeCount-p.framesDecodeCount,r=e/n*1e3,i=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/n)/n));!isNaN(i)&&r+i>Math.max(3*r,r+150)&&(l[EF.I_FRAME_DELAY]=i)}}return l}(s._videoSSRC,e,t,s.videoTrack,!0===i,this.needUploadRenderFreezeTime,n,r):void 0;o&&(c.video=o)}if(a.has(aj.AUDIO)&&s.audioTrack){const i=s.audioTrack?function(e,t,n,r,i,o){const s=t.audioRecv.find((t=>t.ssrc===e));if(!s)return;const a={},c=n&&n.audioRecv.find((t=>t.ssrc===e));if(OF(a,AF.JITTER,s.jitterMs),OF(a,AF.BYTES_RETRANSMIT,s.retransmittedBytesReceived),OF(a,AF.PACKAGES_RETRANSMIT,s.retransmittedPacketsReceived),OF(a,AF.PACKAGES_DISCARDED,s.packetsDiscarded),OF(a,AF.AVG_PROCESSING_DELAY,s.avgProcessingDelayMs),c){const e=t.timestamp-n.timestamp||IF*(o?6:i?3:1);null!=s.packets&&null!=c.packets&&OF(a,AF.PACKAGE_RATE,1e3*(s.packets-c.packets)/e),i&&null!=c.bytes&&null!=s.bytes&&OF(a,AF.BITRATE,8*(s.bytes-c.bytes)/e),null!=s.packetsLost&&null!=c.packetsLost&&OF(a,AF.PACKAGE_LOST,s.packetsLost-c.packetsLost)}if(o){const{receivedFrames:e,droppedFrames:t}=s;null!=e&&null!=t&&(a[AF.FREEZE]=0===(l=e)||100*t/l>20?1:0)}var l;if(i){const e=100*r._source.getAccurateVolumeLevel(),t=s.outputLevel;if(null!=t){const e=Math.ceil(50*Math.log10(100*t+1));OF(a,CF.LEVEL,e)}if(OF(a,AF.PCM_LEVEL,e),r&&(a[AF.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1),OF(a,AF.JITTER_BUFFER,s.jitterBufferMs),OF(a,AF.CURRENT_DELAY,s.jitterBufferMs),a[AF.PLAYER_STATUS]=sD[FD.getPlayerState(r.getTrackId())],c){const e=s.concealedSamples-c.concealedSamples;e>0&&OF(a,AF.CONCEALED_SAMPLES,e)}}return a}(s._audioSSRC,e,t,s.audioTrack,n,r):void 0;i&&(c.audio=i)}(c.video||c.audio)&&o.push(c)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,o}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof Hk));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(OM.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(aj.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(aj.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:LO("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let r=[];const i=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of i)!e.muted&&e.enabled&&(r=r.concat(await e.getProcessorUsage()));const o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,c]of o)c.has(aj.VIDEO)&&e.videoTrack&&(r=r.concat(await e.videoTrack.getProcessorUsage())),c.has(aj.AUDIO)&&e.audioTrack&&(r=r.concat(await e.audioTrack.getProcessorUsage()));if(0===r.length)return;n.details=function(e,t){const n={};for(const{id:s,value:a,level:c,direction:l}of e){var r;const e=null!==(r=t.get(s))&&void 0!==r?r:0,d=2===a?e+LO("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var i,o;t.set(s,d),n[s]?(2===a&&(n[s].value=a),c>n[s].level&&(n[s].level=c),"remote"===l&&(n[s].remoteUidCount+=1),n[s].totalTs=null!==(i=t.get(s))&&void 0!==i?i:0):n[s]={value:a,level:c,remoteUidCount:"local"===l?0:1,totalTs:null!==(o=t.get(s))&&void 0!==o?o:0}}return Object.keys(n).map((e=>{const{level:t,value:r,totalTs:i}=n[e];return{id:e,level:t,value:r,totalTs:i}}))}(r,e);const s=Date.now(),a=s>t?s:t+1;this.requestUpload&&this.requestUpload(OM.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:a})}),LO("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}stopUploadBaseStats(){this.uploadBaseStatsStarted=!1}}const PF=LO("ICE_RESTART_INTERVAL");let LF=new Map,MF=new Map,jF=[cj.UDP_TCP_RELAY,cj.TCP_RELAY,cj.RELAY],UF=LO("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&bN().supportPCSetConfiguration;function BF(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=LF.get(e.id);n&&(window.clearTimeout(n),LF.delete(e.id));const r=MF.get(e.id);t&&r&&r.index===jF.length-1&&(dN.debug("[".concat(e.id,"] reset ICE restart policy")),MF.delete(e.id))}function FF(e,t,n){if(0===LF.size&&0===MF.size&&(Array.isArray(LO("RESTART_SEQUENCE"))&&LO("RESTART_SEQUENCE").length>0&&!function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){const r=e[n];if(e.filter((e=>e===r)).length!==t.filter((e=>e===r)).length)return!1}return!0}(jF,LO("RESTART_SEQUENCE"))&&(jF=LO("RESTART_SEQUENCE").filter((e=>{var t;if(Lr(t=Object.values(cj)).call(t,e))return!0})),dN.debug("use reconnection policy from config distribution, queues: ".concat(jF.join(" => ")))),UF=LO("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&bN().supportPCSetConfiguration),0===jF.length)return void n();let r,{index:i=0,type:o}=MF.get(e.id)||{};if(UF&&o===cj.RELAY)return void n();let s=o&&i>=jF.length-1;if(UF)o=cj.RELAY;else{if(s)return void n();o?(i++,o=jF[i]):(o=jF[0],i=0)}dN.debug("[".concat(e.id,"] choose ICE restart policy: ").concat(o,", index: ").concat(i)),t(o),MF.set(e.id,{index:i,type:o}),r=window.setTimeout((()=>FF(e,t,n)),PF),LF.set(e.id,r)}var VF;function WF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WF(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=lR,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new GF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function GF(e){function t(e){if(Object(e)!==e)return rp.reject(new TypeError(e+" is not an object."));var t=e.done;return rp.resolve(e.value).then((function(e){return{value:e,done:t}}))}return GF=function(e){this.s=e,this.n=e.next},GF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?rp.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?rp.reject(e):t(n.apply(this.s,arguments))}},new GF(e)}let YF=(VF=class extends ZI{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(pj.StateChange,t,this._state)}constructor(e,t){super(),wC(this,"isPlanB",void 0),wC(this,"store",void 0),wC(this,"statsUploader",void 0),wC(this,"connection",void 0),wC(this,"localTrackMap",new Map),wC(this,"remoteUserMap",new Map),wC(this,"localDataChannels",[]),wC(this,"remoteDataChannelMap",new Map),wC(this,"pendingLocalTracks",[]),wC(this,"pendingRemoteTracks",[]),wC(this,"pendingLocalDataChannels",[]),wC(this,"pendingRemoteDataChannels",[]),wC(this,"statsCollector",void 0),wC(this,"shouldForwardP2PCreation",void 0),wC(this,"iceFailedCount",0),wC(this,"dtlsFailedCount",0),wC(this,"mutex",void 0),wC(this,"_state",hj.Disconnected),wC(this,"_pcStatsUploadType",LO("NEW_ICE_RESTART")?lj.FIRST_CONNECTION:lj.OLD_FIRST_CONNECTION),wC(this,"_isStartRestartIce",!1),wC(this,"_restartTimer",void 0),wC(this,"_isTryConnecting",!1),wC(this,"_iceError",null),wC(this,"_forceTurn",!1),wC(this,"_isWaitPcToRePub",!1),wC(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==hj.Connected)return void n(new jI(MI.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));i&&i[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createMuteMessage(r);await fx(this,pj.RequestMuteLocal,o),t()}catch(e){n(e)}finally{r()}})),wC(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==hj.Connected)return void n(new jI(MI.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const i=r.find((e=>"videoLowTrack"===e[0]));if(i){const t=i[1];if(t.track._originMediaStreamTrack.stop(),!LO("DISABLE_DUAL_STREAM_USE_ENCODING")&&bN().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=gF(e,gx(this,pj.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new rp(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r);await fx(this,pj.RequestUnmuteLocal,o),t()}catch(e){n(e)}finally{r()}})),wC(this,"handleUpdateVideoEncoder",(async(e,t,n,r)=>{let i;r||(i=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoEncoder"));try{const n=this.localTrackMap.get(uj.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==hj.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),await this.connection.updateEncoderConfig(r,i),this.emit(pj.UpdateVideoEncoder,i),t()}catch(e){n(e)}finally{var o;null===(o=i)||void 0===o||o()}})),wC(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(uj.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==hj.Connected)return void t();const{id:r,track:i}=n;await this.connection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),wC(this,"handleReplaceMixingTrack",(async(e,t,n,r)=>{if(!this.connection||this.state!==hj.Connected)return void t();const i=sF([e]);let o;dN.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(i.getTrackId(),"]")),"boolean"==typeof r&&r||(o=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,i),t()}catch(e){n(e)}finally{var s;null===(s=o)||void 0===s||s()}})),wC(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;dN.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==hj.Connected)return void t();if(await(null===(o=this.connection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===uj.LocalVideoTrack&&!LO("DISABLE_DUAL_STREAM_USE_ENCODING")&&bN().supportDualStreamEncoding){const t=this.localTrackMap.get(uj.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new rp(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),wC(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),wC(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),wC(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),wC(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),wC(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new kF(this.store),this.bindStatsUploaderEvents(),this.mutex=new Gx("P2PChannel-mutex",this.store.clientId),this.isPlanB=!bN().supportUnifiedPlan||LO("CHROME_FORCE_PLAN_B")&&OI(),this.shouldForwardP2PCreation=LO("FORWARD_P2P_CREATION")&&bN().supportPCSetConfiguration&&xI(),this.shouldForwardP2PCreation&&(this.connection=cF(this.store),this.emit(pj.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=hj.New,this._forceTurn=dF(e),dN.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] forceTurn: ").concat(this._forceTurn));const n=this.shouldForwardP2PCreation&&"closed"===(null===(t=this.connection)||void 0===t?void 0:t.peerConnectionState);if(this.shouldForwardP2PCreation&&!n||(n&&this.connection&&(dN.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.resetConnection(this.connection)),this.connection=cF(this.store,e),this.emit(pj.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),!this.connection)throw new jI(MI.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=LO("NEW_ICE_RESTART")?lj.FIRST_CONNECTION:lj.OLD_FIRST_CONNECTION,this._isTryConnecting=!0,this._isStartRestartIce=!1,this._iceError=null,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new jI(MI.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");LO("ENABLE_PREALLOC_PC")&&this.state===hj.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=hj.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Lr(t=[uj.LocalVideoLowTrack,uj.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),r=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof fF){if(yN.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Lr(e).call(e,this.store.codec)){const t=["vp9","vp8","h264"].find((t=>Lr(e).call(e,t)));t&&(this.store.codec=t,dN.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async getEstablishParams(){var e;if(this.connection instanceof fF&&"closed"!==this.connection.peerConnectionState&&Lr(e=[hj.New,hj.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==hj.Connected){if(this.state===hj.Disconnected)throw new jI(MI.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach((e=>{var t;Lr(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)})),[]}const t=this.filterTobePublishedDataChannels(e);return 0===t.length?[]:(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})),e.map((e=>({streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId}))))}publish(e,t,n){var r=this;return sR((function*(){const i=yield aR(r.mutex.lock("From P2PChannel.publish"));try{var o;const i=r.connection&&Lr(o=["disconnected","failed"]).call(o,r.connection.peerConnectionState);if(!r.connection||r.state!==hj.Connected||i){if(r.state===hj.Disconnected)throw new jI(MI.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return r.pendingLocalTracks=r.pendingLocalTracks.concat(t),void(i&&(r._isWaitPcToRePub=!0))}r.store.pubId=r.store.pubId+1,kB.markPublishStart(r.store.clientId,r.store.pubId);const s=r.filterTobePublishedTracks(e,t,n);if(0===s.length)return void(yield aR(r.tryToUnmuteAudio(e)));yield*cR(zF(r.doPublish(r.connection,s)))}finally{i()}}))()}doPublish(e,t){var n=this;return sR((function*(){t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===uj.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t);const r=t.map((e=>{let{track:t}=e;return t})),i=yield aR(e.send(r,n.store.codec,n.store.audioCodec)),o=(yield aR(i.next())).value,s=n.createGatewayPublishMessage(t,o);let a;try{a=yield s}catch(e){throw i.throw(e),(null==e?void 0:e.code)===MI.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),e}const c=n.mapPubResToRemoteConfig(s,a,r),l=(yield aR(i.next(c))).value;if(n.state===hj.Disconnected)throw new jI(MI.UNEXPECTED_ERROR,"PeerConnection already disconnected.");LO("ENABLE_VIDEO_SEI");const d=LO("ENABLE_ENCODED_TRANSFORM"),u=LO("ENABLE_AUDIO_METADATA");r.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&d&&(e.trackMediaType===aj.VIDEO?await OL(t.sender,e):e.trackMediaType===aj.AUDIO&&await rL(t.sender,{metadata:u?()=>{const t=e.metadata.shift();return t&&t.value}:void 0}))})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:r}=e;const i=Date.now();n.store.publish(t.getTrackId(),r===uj.LocalAudioTrack?"audio":"video",void 0,i)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n||!this.connection)return;if(!(n.track instanceof NP))return dN.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");const{track:r}=n,i=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=tU(e,t)),n.maxFramerate=e.framerate?Jj(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==uj.LocalVideoLowTrack||!LO("DISABLE_DUAL_STREAM_USE_ENCODING")&&bN().supportDualStreamEncoding)null!=i.scaleResolutionDownBy&&(r._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{const t=r._originMediaStreamTrack;if(!t.canvas)return dN.warn("[".concat(r.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=Jj(t.width)),t.height&&(n.height=Jj(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=ED((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),Jj(t.framerate)))}(t,e)}null!=i.maxBitrate&&(r._encoderConfig.bitrateMax=i.maxBitrate/1e3),null!=i.maxFramerate&&(r._encoderConfig.frameRate&&"object"==typeof r._encoderConfig.frameRate?r._encoderConfig.frameRate.max=i.maxFramerate:r._encoderConfig.frameRate={max:i.maxFramerate}),dN.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return sR((function*(){if(!t.connection||t.state!==hj.Connected)return;const n=yield aR(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(uj.LocalVideoTrack);if(!n)throw new jI(MI.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(uj.LocalVideoLowTrack))throw new jI(MI.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const i=[{track:t.getLowVideoTrack(n.track,e),type:uj.LocalVideoLowTrack}];if(yield*cR(zF(t.doPublish(t.connection,i))),n.track.muted||!n.track.enabled){var r;const e=null===(r=t.localTrackMap.get(uj.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield aR(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(dN.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await px(this,pj.RequestRePublish,this.pendingLocalTracks),this.emit(pj.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(dN.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await px(this,pj.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[]),this._isWaitPcToRePub=!1}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:e,kind:n}=this.pendingRemoteTracks[t];(n!==aj.AUDIO||e._audio_added_&&e._audioSSRC)&&(n!==aj.VIDEO||e._video_added_&&e._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await px(this,pj.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===aj.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(pj.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==hj.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==hj.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==hj.Connected)return;const e=this.localTrackMap.get(uj.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[uj.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==hj.Connected)throw new jI(MI.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const r=this.pendingRemoteDataChannels.findIndex((n=>{let{user:r,id:i}=n;return r.uid===e.uid&&i===t.id}));-1!==r&&this.pendingRemoteDataChannels.splice(r,1)})),n.map((e=>e.id))}async subscribe(e,t,n,r,i){var o;if(!this.connection||this.state!==hj.Connected)throw new jI(MI.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;let s,a,c;const l=this.connection.getPreMedia(n);if(l)dN.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(n,", no need to send sub to gateway.")),c=l.transceiver,s=l.track,a=l.id;else if(i){const n=i.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new jI(MI.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const r=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof fF&&(c=r.transceiver),s=r.track,a=r.id}else{const i=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof fF&&(c=i.transceiver),s=i.track,a=i.id}t===aj.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new qP(s,e.uid,e._uintid,this.store),dN.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new KP(s,e.uid,e._uintid,this.store),dN.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),c&&LO("ENABLE_ENCODED_TRANSFORM")&&(t==aj.VIDEO?await DL(c.receiver,{onSei:LO("ENABLE_VIDEO_SEI")&&(t=>{var n;return null===(n=e._videoTrack)||void 0===n?void 0:n._onSei(t)})}):t==aj.AUDIO&&await RL(c.receiver,{enableTopn:!!LO("ENABLE_AUDIO_TOPN"),enableMetadata:!!LO("ENABLE_AUDIO_METADATA"),onMetadata:e=>{this.safeEmit(pj.AudioMetadata,e)}}));const d=this.remoteUserMap.get(e);d?d.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const u=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==u&&(this.pendingRemoteTracks.splice(u,1),this.emit(pj.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==hj.Connected)throw new jI(MI.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:r}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(r))}));const t=[],n=new Map;e.forEach((e=>{if(!this.connection)return;const r=this.connection.getPreMedia(e.ssrcId);r?n.set(e.ssrcId,r):t.push(e)}));const r=await this.connection.batchReceive(t.map((e=>{let{user:t,mediaType:n,ssrcId:r,rtxSsrcId:i}=e;return{kind:n,ssrcMsg:[{ssrcId:r,rtx:i}],mslabel:String(t._uintid)}})));t.forEach(((e,t)=>{n.set(e.ssrcId,r[t])}));for(const{user:i,mediaType:o,ssrcId:s}of e){const e=n.get(s);if(!e)return void dN.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(i.uid," subscribe data,").concat(o,", ").concat(s));const{track:t,id:r,transceiver:a}=e;a&&LO("ENABLE_ENCODED_TRANSFORM")&&(o==aj.VIDEO?await DL(a.receiver,{onSei:LO("ENABLE_VIDEO_SEI")&&(e=>{var t;return null===(t=i._videoTrack)||void 0===t?void 0:t._onSei(e)})}):o==aj.AUDIO&&await RL(a.receiver,{enableTopn:!!LO("ENABLE_AUDIO_TOPN"),enableMetadata:!!LO("ENABLE_AUDIO_METADATA"),onMetadata:e=>{this.safeEmit(pj.AudioMetadata,e)}})),o===aj.AUDIO?(i._audioTrack?i._audioTrack._updateOriginMediaStreamTrack(t):(i._audioTrack=new qP(t,i.uid,i._uintid,this.store),dN.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(i._audioTrack.getTrackId()))),a&&i._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(i,i._audioTrack)):(i._videoTrack?i._videoTrack._updateOriginMediaStreamTrack(t):(i._videoTrack=new KP(t,i.uid,i._uintid,this.store),dN.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(i._videoTrack.getTrackId()))),a&&i._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(i,i._videoTrack)),LO("ENABLE_VIDEO_SEI")&&a&&(o==aj.VIDEO?await DL(a.receiver,{onSei:e=>{var t;null===(t=i._videoTrack)||void 0===t||t._onSei(e)}}):o==aj.AUDIO&&await RL(a.receiver));const c=this.remoteUserMap.get(i);c?c.set(o,r):this.remoteUserMap.set(i,new Map([[o,r]])),this.statsCollector.addRemoteStats(i.uid),this.statsUploader.startUploadInboundStats();const l=this.pendingRemoteTracks.findIndex((e=>{let{user:t,kind:n}=e;return t.uid===i.uid&&o===n}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(pj.MediaReconnectEnd,i.uid))}}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===hj.Connected||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aj.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aj.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==hj.Connected)return;const i=this.filterTobeUnSubscribedTracks(e,t);if(0===i.length)return;await this.connection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===aj.VIDEO&&t._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aj.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===aj.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),o}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const r=this.remoteDataChannelMap.get(e);return n.forEach((e=>{r&&r.delete(e.id)})),r&&0===r.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:i,mediaType:o}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:n}=e;return void 0!==o?t.uid===i.uid&&o===n:t.uid===i.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==hj.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var r;if(n===aj.AUDIO)null===(r=t._audioTrack)||void 0===r||r._destroy(),t._audioTrack=void 0;else if(n===aj.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}}));const n=oi(e).call(e,((e,t)=>{let{user:n,mediaType:r}=t;const i=this.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var r,i;if(n===aj.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===aj.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0;else if(n===aj.AUDIO){var o;this.unbindRemoteTrackEvents(t._audioTrack),null===(o=t._audioTrack)||void 0===o||o._destroy(),t._audioTrack=void 0}})),r}isPreSubScribe(e){return!(!this.connection||this.state!==hj.Connected)&&!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void dN.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void dN.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aj.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||dN.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):dN.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}addAudioMetadata(e){const t=this.localTrackMap.get(uj.LocalAudioTrack),n=t&&t.track;n&&n.metadata.push(e)}getAllTracks(e){const t=this.localTrackMap.get(uj.LocalAudioTrack);if((null==t?void 0:t.track)instanceof Gk){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==uj.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===uj.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===uj.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(uj.LocalAudioTrack),o=r?this.localTrackMap.get(uj.LocalVideoLowTrack):this.localTrackMap.get(uj.LocalVideoTrack);yN.publish(this.store.sessionId,{eventElapse:kB.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(FN.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof Wk)),a=r?null===(o=this.localTrackMap.get(uj.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof NP));yN.publish(this.store.sessionId,{eventElapse:kB.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(FN.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aj.VIDEO?n._videoSSRC:n._audioSSRC;i&&yN.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aj.VIDEO,audio:r===aj.AUDIO,peerid:n.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:kB.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){dN.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Gx("P2PChannel-mutex",this.store.clientId),this.connection&&(this.resetConnection(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=cF(this.store),this.emit(pj.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.statsUploader.stopUploadBaseStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(uj.LocalAudioTrack);if((null==e?void 0:e.track)instanceof Gk){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=hj.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(uj.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(uj.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof NP||t&&t.track instanceof Wk?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(uj.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=K_(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(dN.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=hj.Reconnecting,LO("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.resetConnection(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=cF(this.store),this.emit(pj.PeerConnectionStateChange,this.connection.peerConnectionState),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case uj.LocalVideoTrack:Lr(t=r._hints).call(t,FN.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case uj.LocalAudioTrack:r instanceof Gk?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case uj.LocalVideoLowTrack:}})),this.emit(pj.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from($O(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(pj.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from($O(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),dN.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:i}=n;if((e instanceof BB?e.uid:e)===r.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof BB?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return sR((function*(){if(!t.connection||t.state!==hj.Connected)return;const n=yield aR(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield aR(t.connection.restartICE(e));const n=yield aR(r.next());if(n.done)return;const i=n.value,o=yield i;switch(lF(t.connection)&&t.reportPCStats(Date.now(),!1,t._pcStatsUploadType),e){case cj.UDP_TCP_RELAY:t._pcStatsUploadType=lj.UDP_TCP_RESTART;break;case cj.TCP_RELAY:t._pcStatsUploadType=lj.TCP_RESTART;break;case cj.RELAY:t._pcStatsUploadType=lj.RELAY_RESTART;break;default:t._pcStatsUploadType=lj.OLD_RESTART}t._isTryConnecting=!0,r.next(o)}catch(e){var i;null===(i=r)||void 0===i||i.throw(e)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(uj.LocalVideoTrack),n=this.localTrackMap.get(uj.LocalAudioTrack),r=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),i=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!r||!i)return 1;const o=mx(this,pj.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(FN.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return PL[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=mx(this,pj.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*d/1500;u&&(p=.6*h*100/50+.2*d/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new rp(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(dN.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==hj.Connected)return;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!r)return;const i=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),r[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const e=r[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,e)}if(i===uj.LocalVideoTrack&&!LO("DISABLE_DUAL_STREAM_USE_ENCODING")&&bN().supportDualStreamEncoding){const t=this.localTrackMap.get(uj.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new rp(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const r=[],i=this.getAllTracks();e=_x(e=e.filter((e=>-1===i.indexOf(e))));let o,s=!1;const a=this.localTrackMap.get(uj.LocalAudioTrack);for(const c of e){if(c instanceof NP&&(this.localTrackMap.has(uj.LocalVideoTrack)||s?new jI(MI.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:uj.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:uj.LocalVideoLowTrack})}if(c instanceof Wk)if(a){const e=a.track;if(e instanceof Gk)oF([c]),e.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const t=sF([e,c]);dN.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else o instanceof Gk?(oF([c]),o.addAudioTrack(c)):o=o||!c._useAudioElement&&bN().webAudioMediaStreamDest&&!c._bypassWebAudio?sF(o?[c,o]:[c]):c}return o&&(dN.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),r.push({track:o,type:uj.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=_x(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof Wk){const e=this.localTrackMap.get(uj.LocalAudioTrack);if(!e)continue;e.track instanceof Gk?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([uj.LocalAudioTrack,e]),e.track.close())):t.push([uj.LocalAudioTrack,e])}if(r instanceof NP){const e=this.localTrackMap.get(uj.LocalVideoTrack);if(!e)continue;t.push([uj.LocalVideoTrack,e]);const n=this.localTrackMap.get(uj.LocalVideoLowTrack);n&&t.push([uj.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=_x(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=_x(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uj.LocalVideoTrack:t.addListener(BN.GET_STATS,this.handleGetLocalVideoStats),t.addListener(BN.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(BN.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(BN.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uj.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case uj.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof Gk?e.trackList.forEach((e=>{e.addListener(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BN.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(BN.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(BN.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uj.LocalVideoTrack:t.off(BN.GET_STATS,this.handleGetLocalVideoStats),t.off(BN.GET_RTC_STATS,this.handleGetRTCStats),t.off(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(BN.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(BN.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uj.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case uj.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof Gk?e.trackList.forEach((e=>{e.off(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BN.GET_STATS,this.handleGetLocalAudioStats),e.off(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(BN.GET_STATS,this.handleGetLocalAudioStats),e.off(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(BN.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof KP&&t.addListener(BN.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof qP&&t.addListener(BN.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(BN.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aj.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aj.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,o,{track:s,type:a}=e;switch(a){case uj.LocalAudioTrack:i=XM.Audio,o={dtx:s instanceof Hk&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case uj.LocalVideoTrack:i=Lr(r=s._hints).call(r,FN.SCREEN_TRACK)?XM.Screen:XM.High,o=HF(HF({},Qj(s)),{},{codec:this.store.codec,svc_mode:rU()});break;case uj.LocalVideoLowTrack:i=XM.Low,o=HF(HF({},Qj(s)),{},{codec:this.store.codec,svc_mode:rU()})}return{stream_type:i,attributes:o,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uj.LocalVideoTrack:n=Lr(t=i._hints).call(t,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalAudioTrack:n=XM.Audio;break;case uj.LocalVideoLowTrack:n=XM.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(pj.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(window.clearTimeout(this._restartTimer),this._restartTimer=void 0),e instanceof fF&&BF(e,!0),this._isTryConnecting&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isTryConnecting=!1,this._isStartRestartIce=!1,this._pcStatsUploadType=lj.DISCONNECTED_OR_FAILED,"CONNECTED"===mx(this,pj.QueryClientConnectionState)&&this._isWaitPcToRePub)){const e=this.pendingLocalTracks.map((e=>e.getTrackId())),t=this.pendingLocalDataChannels.map((e=>"dc_".concat(e.id)));yN.reportApiInvoke(this.store.sessionId,{name:tx.REPUB_AFTER_PC_CONNECTED,options:e.concat(t),tag:nx.TRACER}).onSuccess(),this.republish()}if(LO("NEW_ICE_RESTART")&&e instanceof fF&&!hI()&&!this._forceTurn){if(Lr(dj).call(dj,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{lF(e)&&(dN.debug("[".concat(this.store.clientId,"] [P2PChannel] try to restartICE, type is ").concat(t)),"CONNECTED"===mx(this,pj.QueryClientConnectionState)&&this.emit(pj.RequestRestartICE,t))},n=()=>{lF(e)&&(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),dN.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(pj.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())};return void(this._restartTimer=window.setTimeout((()=>{FF(e,t,n)}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&LO("ICE_RESTART")&&"CONNECTED"===mx(this,pj.QueryClientConnectionState)&&this.emit(pj.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(dN.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isTryConnecting=!1,setTimeout((()=>this.emit(pj.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(dN.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),setTimeout((()=>this.emit(pj.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),yN.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:nx.TRACER}).onSuccess(),this.emit(pj.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(YN.FIRST_FRAME_DECODED),yN.firstRemoteFrame(this.store.sessionId,fN.FIRST_AUDIO_DECODE,mN.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&yN.firstRemoteFrame(this.store.sessionId,fN.FIRST_AUDIO_RECEIVED,mN.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&yN.firstRemoteFrame(this.store.sessionId,fN.FIRST_VIDEO_RECEIVED,mN.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(pj.ConnectionTypeChange,n),dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(nU(t))," -> ").concat(JSON.stringify(nU(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(nU(t))," -> ").concat(JSON.stringify(nU(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const e=this.statsCollector.getLocalVideoTrackStats(),t=this.statsCollector.getRTCStats();return HF(HF({},e),t)},e.onICECandidateError=e=>{this._iceError=e}}resetConnection(e){e instanceof fF&&function(e){MF.delete(e.id),BF(e)}(e),e.close(),this.emit(pj.PeerConnectionStateChange,"closed"),function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}(e),this._isWaitPcToRePub=!1}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(uj.LocalAudioTrack);if(e instanceof Wk&&(null==n?void 0:n.track)instanceof Gk)return n.track.isActive||t.push([uj.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===uj.LocalVideoTrack)){const e=this.localTrackMap.get(uj.LocalVideoLowTrack);e&&t.push([uj.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(uj.LocalAudioTrack);if(e instanceof Wk&&(null==n?void 0:n.track)instanceof Gk)return n.track.isActive&&t.push([uj.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===uj.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(uj.LocalVideoLowTrack);e&&t.push([uj.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uj.LocalAudioTrack:n=XM.Audio;break;case uj.LocalVideoTrack:n=Lr(t=i._hints).call(t,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalVideoLowTrack:n=XM.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uj.LocalAudioTrack:n=XM.Audio;break;case uj.LocalVideoTrack:n=Lr(t=i._hints).call(t,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalVideoLowTrack:n=XM.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var r;null!==(r=this.remoteDataChannelMap.get(e))&&void 0!==r&&r.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aj.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aj.VIDEO,ssrcId:n._videoSSRC}));case aj.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aj.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:r}]=e;if(t.has(n)){let e=t.get(n);r===aj.VIDEO?e|=ZM.Video:e|=ZM.Audio,t.set(n,e)}else r===aj.VIDEO?t.set(n,ZM.Video):t.set(n,ZM.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(uj.LocalVideoTrack),n=this.localTrackMap.get(uj.LocalVideoLowTrack);t&&(await t.track.setBitrateLimit(e.uplink),await new rp(((e,n)=>{this.handleUpdateVideoEncoder(t.track,e,n,!0)}))),n&&e.low_stream_uplink&&(await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0}),await new rp(((e,t)=>{this.handleUpdateVideoEncoder(n.track,e,t,!0)})))}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t,n){return e.map(((e,r)=>{var i;let{stream_type:o}=e;const s=null===(i=t.find((e=>{let{stream_type:t}=e;return o===t})))||void 0===i?void 0:i.attributes;if(s&&LO("DISABLE_SCREEN_SHARE_REMB")){const e=n[r]._hints;(Lr(e).call(e,FN.SCREEN_TRACK)||Lr(e).call(e,FN.SCREEN_LOW_TRACK))&&(s.remb=!1,dN.debug("disable remb for screen share, hints:",e))}return s}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof Wk){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(0===r.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t}))));const i=this.createUnmuteMessage(r);return void await fx(this,pj.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(pj.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(pj.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks(),this.statsUploader.requestTransportStats=()=>{var e;return{connectState:(null===(e=this.connection)||void 0===e?void 0:e.peerConnectionState)||"closed"}}}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Dx(qx(this.dtlsFailedCount,Kx)),this.emit(pj.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await px(this,pj.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(pj.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(uj.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof NP))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof NP)).length>1)throw new jI(MI.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof Wk)).length>1&&(e.some((e=>e instanceof Wk&&e._bypassWebAudio))||!bN().webAudioMediaStreamDest))throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof NP&&this.pendingLocalTracks.some((e=>e instanceof NP)))throw new jI(MI.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Wk&&this.pendingLocalTracks.some((e=>e instanceof Wk))&&(!bN().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof Wk&&e._bypassWebAudio))))throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){var n;const r=!LO("DISABLE_DUAL_STREAM_USE_ENCODING")&&bN().supportDualStreamEncoding,i=HF(HF({},{width:160,height:120,framerate:15,bitrate:50}),t);let o;o=r?e._mediaStreamTrack.clone():gF(e,i);const s=kx(8,"track-low-"),a=new NP(o,HF(HF({},r&&{scaleResolutionDownBy:tU(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,s);return a.on(zN.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,VN.LOW_STREAM)})),a._hints.push(FN.LOW_STREAM),Lr(n=e._hints).call(n,FN.SCREEN_TRACK)&&a._hints.push(FN.SCREEN_LOW_TRACK),e.on("sei-to-send",(e=>{a.emit("sei-to-send",e)})),e.addListener(BN.NEED_CLOSE,(()=>{a.close()})),a}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof fF){var i,o,s,a;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:d,peerConnectionState:u}=this.connection,{local:h,remote:p}=await this.connection.getSelectedCandidatePair();yN.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:d,connectionstate:u,intSucc:t?1:2,error:this._iceError||r||"",selectedLocalCandidateProtocol:null!==(i=null==h?void 0:h.protocol)&&void 0!==i?i:"",selectedLocalCandidateType:null!==(o=h.candidateType)&&void 0!==o?o:"",selectedLocalCandidateAddress:"".concat(h.address,":").concat(h.port),selectedRemoteCandidateProtocol:null!==(s=p.protocol)&&void 0!==s?s:"",selectedRemoteCandidateType:null!==(a=p.candidateType)&&void 0!==a?a:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:n,preallocation:this.connection.isPreallocation}),this._iceError=null}}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from($O(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));yN.firstRemoteVideoDecode(this.store.sessionId,fN.FIRST_VIDEO_DECODE,mN.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0,firstFrame:(null==s?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.connection.getRemoteSSRC(i);return void 0!==o&&o!==n}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===uj.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,VN.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}},bM(VF.prototype,"startP2PConnection",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"startP2PConnection"),VF.prototype),bM(VF.prototype,"connect",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"connect"),VF.prototype),bM(VF.prototype,"updateRemoteRTPCapabilities",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"updateRemoteRTPCapabilities"),VF.prototype),bM(VF.prototype,"publishDataChannel",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"publishDataChannel"),VF.prototype),bM(VF.prototype,"unpublish",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"unpublish"),VF.prototype),bM(VF.prototype,"unpublishDataChannel",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"unpublishDataChannel"),VF.prototype),bM(VF.prototype,"unpublishLowStream",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"unpublishLowStream"),VF.prototype),bM(VF.prototype,"subscribeDataChannel",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"subscribeDataChannel"),VF.prototype),bM(VF.prototype,"subscribe",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"subscribe"),VF.prototype),bM(VF.prototype,"massSubscribe",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"massSubscribe"),VF.prototype),bM(VF.prototype,"unsubscribe",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"unsubscribe"),VF.prototype),bM(VF.prototype,"unsubscribeDataChannel",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"unsubscribeDataChannel"),VF.prototype),bM(VF.prototype,"massUnsubscribe",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"massUnsubscribe"),VF.prototype),bM(VF.prototype,"muteRemote",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"muteRemote"),VF.prototype),bM(VF.prototype,"unmuteRemote",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"unmuteRemote"),VF.prototype),bM(VF.prototype,"hasRemoteMediaWithLock",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"hasRemoteMediaWithLock"),VF.prototype),bM(VF.prototype,"disconnectForReconnect",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"disconnectForReconnect"),VF.prototype),bM(VF.prototype,"updateBitrateLimit",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"updateBitrateLimit"),VF.prototype),bM(VF.prototype,"remoteMediaSsrcChanged",[KF],Object.getOwnPropertyDescriptor(VF.prototype,"remoteMediaSsrcChanged"),VF.prototype),VF);function KF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}function qF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qF(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const JF=Date.now(),QF=new Map,ZF=new Map;async function $F(e){const t=QF.get(e),n=Array.isArray(t)&&t[t.length-1],r=ZF.get(e);if(!n)return void(r.isSyncing=!1);const i={uid:n.uid,payload:n.payload};0===r.firstRecvTs&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const o=n.sendTs-r.firstSendTs,s=o-(Date.now()-r.firstRecvTs);s>0&&(r.firstRecvTs=Date.now()-o);let a=n.mediaDelay+s;a<=0?(t.pop(),eV(n.context,i),a=0):a=Math.min(a,20),setTimeout((()=>t.length&&$F(e)),a)}function eV(e,t){e.safeEmit(lx.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function tV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return eV(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),i=QF.get(r)||[],o=i.findIndex((t=>e.sendTs>=t.sendTs)),s=XF(XF({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===o?i.push(s):i.splice(o,0,s),QF.set(r,i);let a=!1;var c;ZF.has(r)?a=!(null===(c=ZF.get(r))||void 0===c||!c.isSyncing):ZF.set(r,{isSyncing:a,firstRecvTs:0,firstSendTs:0}),a||$F(r)}const nV=iI().name;function rV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rV(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const oV="websdk_ng_cache_parameter",sV=LO("MAX_PRELOAD_ASYNC_LENGTH"),aV=new Map,cV=[];let lV=null,dV=0,uV=0;const hV=new Map,pV=function(e,t){const n=[];let r=0;const i=async()=>{const e=n.shift();e&&await e(),n.length>0&&r<t?i():r--};return async function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return new rp((async(o,a)=>{n.push((async()=>{try{const t=await e(...s);o(t)}catch(e){a(e)}})),r<t&&(r++,i())}))}}(mV,sV),fV=KR.CancelToken.source();async function mV(e,t,n,r,i,o){try{if(!LO("ENABLE_PRELOAD"))return;if(!bN().supportWebCrypto)return void Ax((()=>{dN.warn("Your browser does not support preloading, this feature  be run in a secure environment")}),"preload_webcrypto_not_supported");if(!n&&null!==n)throw new jI(MI.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&WI(n,"token",1,2047),WI(e,"appid",1,2047),PM(t),r&&LM(r);const s=Px();dN.debug("preload channel ".concat(t,", uid is ").concat(r));const a={appId:e,cname:t,token:n||e,uid:"string"!=typeof r?r:null,sid:s,proxyServer:i};let c,l;"string"==typeof r?(a.stringUid=r,[l,c]=await rp.all([wB(r,{sid:s,appId:e},fV.token),AB(iV(iV({},a),{},{token:n||e,uid:0}),fV.token)]),a.uid=l.uid,c.gatewayInfo.uid=a.uid,c.gatewayInfo.res.uid=a.uid):(o&&(a.stringUid=o),c=await AB(a,fV.token));const d={sid:s,appId:e,cname:t,token:n||e,uid:a.stringUid||r,intUid:a.uid||c.gatewayInfo.uid,stringUid:a.stringUid,ts:Date.now(),sua:l,ap:c};await async function(e){let t;try{e.uid&&vV({appId:e.appId,cname:e.cname,token:e.token,uid:e.uid,stringUid:e.stringUid});const n=SV(e),r=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",Rx(t),"AES-GCM",!1,["encrypt"]),r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,Cx(window.btoa(JSON.stringify(e))));return Tx(new Uint8Array(r))}catch(e){return}}(e,e.token||e.appId);if(!r)return;t=bV(oV);const i=t?JSON.parse(t):[];i.push({[n]:r}),i.length>LO("AP_CACHE_NUM")&&i.shift(),wV(oV,JSON.stringify(i))}catch(e){dN.warn("Error caching server parameters:",e.message),wV(oV,"")}}(d),dV++}catch(e){throw uV++,function(e){lV||(lV=window.setTimeout((()=>{let t="";hV.forEach(((e,n)=>{t+="".concat(n,": ").concat(e," ;")})),yN.reportApiInvoke(null,{name:tx.PRELOAD,options:{success:dV,failed:uV,err:t}}).onError(e),dV=0,uV=0,hV.clear(),lV=null}),1e4));const t=hV.get(e.code)||0;hV.set(e.code,t+1)}(e),e}}async function gV(e){try{if(LO("AP_REQUEST_DETAIL")||LO("ENABLE_ROLE_SELECT_EDGE"))return;const t=vV(e);if(!t||"disabled"!==e.cloudProxyServer)return;const n=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",Rx(t),"AES-GCM",!1,["decrypt"]),r=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,Cx(e));return JSON.parse(window.atob(Tx(new Uint8Array(r))))}catch(e){return}}(t,e.token||e.appId);if(!n)return;if(!function(e,t){return!(e.cname!==t.cname||e.appId!==t.appId||e.token!==t.token)&&(t.stringUid?e.stringUid===t.stringUid:"number"==typeof t.uid?e.uid===t.uid:e.uid==t.uid)}(n,e))return;if(n&&Date.now()-n.ts<LO("AP_CACHE_LIFETIME"))return n}catch(e){dN.warn("Error get preloadInfo",e.message)}}function vV(e){let t;try{if(t=bV(oV),!t)return;const n=JSON.parse(t),r=SV(e),i=function(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}(n,(e=>r in e));if(-1===i)return;const o=n.splice(i,1)[0];return wV(oV,JSON.stringify(n)),o[r]}catch(e){dN.warn("Error delete preload info: ".concat(t),e.message),wV(oV,"")}}function yV(e){if(e){let t=aV.get(e);t&&(window.clearTimeout(t),t=null,aV.delete(e)),Lr(cV).call(cV,e)||"disabled"!==e.cloudProxyServer||cV.push(e)}if(aV.size<LO("AP_CACHE_NUM")&&cV.length>0){const e=cV.shift();aV.set(e,window.setTimeout((async()=>{const{appId:t,cname:n,token:r,stringUid:i,uid:o,proxyServer:s}=e;try{await pV(t,n,r,o,s,i),aV.has(e)&&yV(e)}catch(t){dN.warn("update preload failed",t.message),_V(e)}}),LO("AP_UPDATE_INTERVAL")))}}function _V(e){const t=cV.indexOf(e);-1!==t&&cV.splice(t,1);let n=aV.get(e);n&&(window.clearTimeout(n),n=null,aV.delete(e),yV())}function EV(e,t){const n=e.sua,r=e.ap;t&&n&&yN.reqUserAccount(e.sid,{lts:n.requestTime,elapse:n.elapse,success:!0,serverAddr:n.url,stringUid:t,uid:e.intUid,errorCode:null,extend:n.req}),yN.reportResourceTiming(e.ap.url,e.sid),yN.joinWebProxyAP(e.sid,{lts:r.requestTime,elapse:r.elapse,sucess:1,apServerAddr:r.url,turnServerAddrList:r.proxyInfo.addresses.map((e=>e.ip)).join(","),eventType:"disabled",unilbsServerIds:[Gj.CHOOSE_SERVER,Gj.CLOUD_PROXY_FALLBACK].toString()}),yN.joinChooseServer(e.sid,{lts:r.requestTime,elapse:r.elapse,succ:!0,csAddr:r.url,opid:r.opid,serverList:r.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,cid:r.gatewayInfo.cid.toString(),uid:r.gatewayInfo.uid.toString(),csIp:r.gatewayInfo.csIp,unilbsServerIds:[Gj.CHOOSE_SERVER].toString(),isHttp3:r.isHttp3})}function bV(e){return window.atob(window.localStorage.getItem(e)||"")}function wV(e,t){window.localStorage.setItem(e,window.btoa(t))}function SV(e){let t="".concat(e.appId,"_").concat(e.cname);return"string"==typeof e.uid&&(t+="_s_".concat(e.uid)),"number"==typeof e.uid&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),Wx(t)}function AV(e){let t=function(){const e=IV.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(BV(t,10),LV(t,n));let r=e.cid;void 0!==r&&(BV(t,16),BV(t,r));let i=e.cname;void 0!==i&&(BV(t,26),LV(t,i));let o=e.deviceId;void 0!==o&&(BV(t,34),LV(t,o));let s=e.elapse;void 0!==s&&(BV(t,40),VV(t,s));let a=e.fileSize;void 0!==a&&(BV(t,48),VV(t,RV(a)));let c=e.height;void 0!==c&&(BV(t,56),VV(t,RV(c)));let l=e.jpg;void 0!==l&&(BV(t,66),BV(t,l.length),kV(t,l));let d=e.networkType;void 0!==d&&(BV(t,72),VV(t,RV(d)));let u=e.osType;void 0!==u&&(BV(t,80),VV(t,RV(u)));let h=e.requestId;void 0!==h&&(BV(t,90),LV(t,h));let p=e.sdkVersion;void 0!==p&&(BV(t,98),LV(t,p));let f=e.sequence;void 0!==f&&(BV(t,104),VV(t,RV(f)));let m=e.sid;void 0!==m&&(BV(t,114),LV(t,m));let g=e.timestamp;void 0!==g&&(BV(t,120),VV(t,g));let v=e.uid;void 0!==v&&(BV(t,128),BV(t,v));let y=e.vid;void 0!==y&&(BV(t,136),BV(t,y));let _=e.width;void 0!==_&&(BV(t,144),VV(t,RV(_)));let E=e.service;void 0!==E&&(BV(t,152),BV(t,E));let b=e.callbackData;void 0!==b&&(BV(t,162),BV(t,b.length),kV(t,b));let w=e.ticket;void 0!==w&&(BV(t,170),LV(t,w));let S=e.vendorConfigs;void 0!==S&&(BV(t,178),LV(t,S))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function CV(e){return function(e){let t={};e:for(;!OV(e);){let n=UV(e);switch(n>>>3){case 0:break e;case 1:t.code=UV(e);break;case 2:t.msg=PV(e,UV(e));break;case 3:t.requestId=PV(e,UV(e));break;case 4:t.timestamp=FV(e,!1);break;default:TV(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function TV(e,t){switch(t){case 0:for(;128&MV(e););break;case 2:xV(e,UV(e));break;case 5:xV(e,4);break;case 1:xV(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function RV(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let IV=[];function xV(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function OV(e){return e.offset>=e.limit}function NV(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function DV(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function kV(e,t){let n=NV(e,t.length);e.bytes.set(t,n)}function PV(e,t){let n=DV(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",s="";for(let a=0;a<t;a++){let e,c,l,d,u=i[a+n];128&u?192==(224&u)?a+1>=t?s+=o:(e=i[a+n+1],128!=(192&e)?s+=o:(d=(31&u)<<6|63&e,d<128?s+=o:(s+=r(d),a++))):224==(240&u)?a+2>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?s+=o:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?s+=o:(s+=r(d),a+=2))):240==(248&u)?a+3>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?s+=o:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?s+=o:(d-=65536,s+=r(55296+(d>>10),56320+(1023&d)),a+=3))):s+=o:s+=r(u)}return s}function LV(e,t){let n=t.length,r=0;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}BV(e,r);let i=NV(e,r),o=e.bytes;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function MV(e){return e.bytes[DV(e,1)]}function jV(e,t){let n=NV(e,1);e.bytes[n]=t}function UV(e){let t,n=0,r=0;do{t=MV(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function BV(e,t){for(t>>>=0;t>=128;)jV(e,127&t|128),t>>>=7;jV(e,t)}function FV(e,t){let n,r=0,i=0,o=0;return n=MV(e),r=127&n,128&n&&(n=MV(e),r|=(127&n)<<7,128&n&&(n=MV(e),r|=(127&n)<<14,128&n&&(n=MV(e),r|=(127&n)<<21,128&n&&(n=MV(e),i=127&n,128&n&&(n=MV(e),i|=(127&n)<<7,128&n&&(n=MV(e),i|=(127&n)<<14,128&n&&(n=MV(e),i|=(127&n)<<21,128&n&&(n=MV(e),o=127&n,128&n&&(n=MV(e),o|=(127&n)<<7))))))))),{low:r|i<<28,high:i>>>4|o<<24,unsigned:t}}function VV(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=NV(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}const WV={},HV={},zV=4294967296,GV=0x10000000000000000,YV=GV/2,KV=ZV(0,!0),qV=ZV(0),XV=$V(0,-2147483648,!1),JV=$V(-1,2147483647,!1),QV=$V(-1,-1,!0);function ZV(e,t){let n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=HV[e],r)?r:(n=$V(e,0,!0),i&&(HV[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=WV[e],r)?r:(n=$V(e,e<0?-1:0,!1),i&&(WV[e]=n),n)}function $V(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function eW(e,t){if(isNaN(e))return t?KV:qV;if(t){if(e<0)return KV;if(e>=GV)return QV}else{if(e<=-YV)return XV;if(e+1>=YV)return JV}return e<0?t?KV:qV:$V(e%zV|0,e/zV|0,t)}function tW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class nW extends ZI{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(Ej.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),wC(this,"name","AgoraRTCImageModeration"),wC(this,"_connectionState",_j.CONNECTING),wC(this,"_sequence",0),wC(this,"_moderationStartTime",void 0),wC(this,"_workerConnection",void 0),wC(this,"_workerMessageLengthLimit",void 0),wC(this,"_qualityRatio",void 0),wC(this,"_connectInfo",void 0),wC(this,"_cancelTokenSource",KR.CancelToken.source()),wC(this,"_retryConfig",void 0),wC(this,"_moderationInterval",void 0),wC(this,"_moderationTimer",null),wC(this,"_moderationMode",1),wC(this,"_quality",1),wC(this,"_qualityTimer",null),wC(this,"_ticket",void 0),wC(this,"_moderationIntervalMinimum",void 0),wC(this,"_uploadFailedNum",0),wC(this,"_uploadNum",0),wC(this,"_uploadTimer",null),wC(this,"_extraInfo",void 0),wC(this,"_vendor",""),wC(this,"_encoder",new TextEncoder),wC(this,"_moderationId",void 0),wC(this,"inspectImage",(()=>{if(this.connectionState!==_j.CONNECTED)throw new _N(MI.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===_j.CONNECTED?this.requestToInspectImage():dN.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=kx(5,"image-moderation-"),this._workerMessageLengthLimit=LO("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=LO("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=LO("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new Wj("worker-"+this._moderationId,Kx),this.on(Ej.STATE_CHANGE,((e,t)=>{dN.debug("[".concat(this._moderationId,"] Moderation operation :").concat(bj[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(Ej.STATE_CHANGE,bj.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new rp(((r,i)=>{this.on(Ej.CONNECTION_STATE_CHANGE,((e,t)=>{e===_j.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{i(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),dN.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===_j.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const r=LO("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:l}=t;mB++;const d="moderation_plugin",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:mB,seq:mB,sid:a,appToken:c,ts:Date.now(),uid:l+""})};let h,p,f=e[0];return Xx((async()=>{h=Date.now();const e=await qU(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new _N(MI.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:p});throw dN.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new _N(MI.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw dN.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new _N(MI.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:p});throw dN.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new _N(MI.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:p});throw dN.error(e.toString()),e}const r=LO("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,n)=>(yN.apworkerEvent(a,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(yN.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==MI.OPERATION_ABORTED&&t.code!==MI.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(Ej.STATE_CHANGE,bj.AP_CONNECTED);const{addressList:o,ticket:s}=i;return this._ticket=s,o}async connectWorker(e){this.emit(Ej.STATE_CHANGE,bj.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(kM.CONNECTED,(async()=>{this.emit(Ej.STATE_CHANGE,bj.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=_j.CONNECTED})),this._workerConnection.on(kM.CLOSED,(()=>{this.connectionState=_j.CLOSED})),this._workerConnection.on(kM.FAILED,(()=>{this.connectionState=_j.CLOSED})),this._workerConnection.on(kM.RECONNECTING,(()=>{this.connectionState=this.connectionState===_j.CONNECTED?_j.RECONNECTING:_j.CONNECTING})),this._workerConnection.on(kM.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=CV(new Uint8Array(e.data));LO("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&dN.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,dN.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{yN.reportApiInvoke(this._connectInfo.sid||null,{name:tx.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:nx.TRACER}).onError(new _N(MI.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),LO("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else dN.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(kM.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(kM.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=mx(this,Ej.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(LO("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&dN.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else LO("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&dN.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await $D(l,n,r),u=this._sequence+"-"+i+"-"+a+"-"+c+"-"+kx(12,""),h={appId:n,cid:i,cname:r,deviceId:"",elapse:nW.intToLong(Number(c-this._moderationStartTime)),fileSize:l.buffer.byteLength,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.23.1",sequence:this._sequence,sid:s,timestamp:eW(c),uid:a,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete h.callbackData;const p=AV(h);if(p.byteLength<this._workerMessageLengthLimit){if(LO("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tW(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,dN.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=KR.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=_j.CLOSED,this.emit(Ej.STATE_CHANGE,bj.CLOSED)}}function rW(e){if(FI(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new _N(MI.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new _N(MI.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const iW={name:"ImageModeration",create:function(e){let{config:t}=e;return rW(t),new nW(t)}};var oW,sW,aW,cW,lW,dW,uW,hW,pW,fW,mW,gW,vW,yW,_W,EW,bW,wW,SW,AW,CW,TW,RW,IW,xW,OW,NW,DW,kW,PW,LW,MW,jW,UW,BW,FW,VW,WW,HW,zW,GW,YW;function KW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KW(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Gx.setLogger(dN);let XW=(oW=vN(),sW=vN({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof pD))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),aW=vN({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==KN.DATA?(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))):[t.getChannelId()])}),cW=vN({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),lW=vN({argsMap:(e,t,n)=>[t,n]}),dW=vN({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),uW=vN({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),hW=vN({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),pW=vN(),fW=vN(),mW=vN(),gW=vN(),vW=vN(),yW=vN(),_W=vN(),EW=vN(),bW=vN(),wW=vN(),SW=vN(),AW=vN(),CW=vN(),TW=vN(),RW=vN(),IW=vN({argsMap:(e,t)=>[t]}),xW=vN(),OW=vN(),NW=vN(),DW=vN(),kW=vN(),PW=vN(),LW=vN(),MW=vN(),jW=vN({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),UW=vN(),BW=vN(),FW=vN(),VW=vN(),WW=vN(),HW=vN(),zW=vN({reportResult:!0}),GW=vN(),YW=class extends ZI{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e,t){let n;if(super(),wC(this,"store",void 0),wC(this,"_uid",void 0),wC(this,"_channelName",void 0),wC(this,"_uintUid",void 0),wC(this,"_users",[]),wC(this,"_config",void 0),wC(this,"_clientId",void 0),wC(this,"_appId",void 0),wC(this,"_sessionId",null),wC(this,"_key",void 0),wC(this,"_rtmConfig",{}),wC(this,"_joinInfo",void 0),wC(this,"_gateway",void 0),wC(this,"_statsCollector",void 0),wC(this,"_configDistribute",void 0),wC(this,"_leaveMutex",void 0),wC(this,"_publishMutex",void 0),wC(this,"_renewTokenMutex",void 0),wC(this,"_subscribeMutex",void 0),wC(this,"_encryptionMode","none"),wC(this,"_encryptionSecret",null),wC(this,"_encryptionSalt",null),wC(this,"_encryptDataStream",!1),wC(this,"_encryptDataStreamKey",null),wC(this,"_encryptDataStreamIv",null),wC(this,"_proxyServer",void 0),wC(this,"_turnServer",{servers:[],mode:"auto"}),wC(this,"_cloudProxyServerMode","disabled"),wC(this,"_isDualStreamEnabled",!1),wC(this,"_defaultStreamFallbackType",void 0),wC(this,"_lowStreamParameter",void 0),wC(this,"_streamFallbackTypeCacheMap",new Map),wC(this,"_remoteStreamTypeCacheMap",new Map),wC(this,"_axiosCancelSource",KR.CancelToken.source()),wC(this,"_audioVolumeIndicationInterval",void 0),wC(this,"_networkQualityInterval",void 0),wC(this,"_userOfflineTimeout",void 0),wC(this,"_streamRemovedTimeout",void 0),wC(this,"_liveTranscodeStreamingClient",void 0),wC(this,"_liveRawStreamingClient",void 0),wC(this,"_channelMediaRelayClient",void 0),wC(this,"_networkQualitySensitivity","normal"),wC(this,"_p2pChannel",void 0),wC(this,"_useLocalAccessPoint",!1),wC(this,"_setLocalAPVersion",void 0),wC(this,"_joinAndNotLeaveYet",!1),wC(this,"_numberOfJoinCount",0),wC(this,"_remoteDefaultVideoStreamType",void 0),wC(this,"_inspect",void 0),wC(this,"_moderation",void 0),wC(this,"_license",void 0),wC(this,"_pendingPublishedUsers",[]),wC(this,"ntpAlignErrorCount",0),wC(this,"remoteInboundOffset",0),wC(this,"_peerConnectionState",void 0),wC(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),wC(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),wC(this,"_handleUserOnline",(e=>{if(LO("BLOCK_LOCAL_CLIENT")&&jL(e.uid,this.channelName))return void dN.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&dN.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(lx.USER_JOINED,t));else{const t=new BB(e.uid,e.uint_id||e.uid);this._users.push(t),dN.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(lx.USER_JOINED,t)}})),wC(this,"_handleUserOffline",(e=>{if(LO("BLOCK_LOCAL_CLIENT")&&jL(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:yx(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),dN.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(lx.USER_LEAVED,t,e.reason))})),wC(this,"_handleAddAudioOrVideoStream",((e,t,n,r,i,o,s)=>{if(LO("BLOCK_LOCAL_CLIENT")&&jL(t,this.channelName))return;const a=this._users.find((e=>e.uid===t));if(!a)return void dN.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));dN.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(a.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?a.hasAudio:a.hasVideo;a._uintid||(a._uintid=i||t),"audio"===e?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,"audio"===e?(a._audio_added_=!0,void 0!==n&&(a._audioSSRC=n),void 0!==r&&(a._cname=r),o&&(a._audioOrtc=o)):(a._video_added_=!0,void 0!==n&&(a._videoSSRC=n),void 0!==r&&(a._cname=r),void 0!==s&&(a._rtxSsrcId=s),o&&(a._videoOrtc=o)),("audio"===e?a.hasAudio:a.hasVideo)&&!c&&(dN.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(e)),this.safeEmit(lx.USER_PUBLISHED,a,e)),"video"===e?yN.onGatewayStream(this._sessionId,fN.ON_ADD_VIDEO_STREAM,mN.ON_ADD_VIDEO_STREAM,{peer:i||t,ssrc:a._videoSSRC}):yN.onGatewayStream(this._sessionId,fN.ON_ADD_AUDIO_STREAM,mN.ON_ADD_AUDIO_STREAM,{peer:i||t,ssrc:a._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(a,e,n).then((t=>{if(t&&(dN.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof YF))return this._p2pChannel.unsubscribe(a,e,!0).then((()=>this._subscribe(a,e,!0).catch((e=>{dN.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(a,e)&&(dN.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,e,!0).catch((e=>{dN.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),wC(this,"_handleRemoveStream",(e=>{if(LO("BLOCK_LOCAL_CLIENT")&&jL(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void dN.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));dN.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{dN.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(lx.USER_UNPUBLISHED,t,"audio"),dN.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(lx.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{dN.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(lx.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{dN.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(lx.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof YF&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),yN.onGatewayStream(this._sessionId,fN.ON_REMOVE_STREAM,mN.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),wC(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(LO("BLOCK_LOCAL_CLIENT")&&jL(t,this.channelName))return;const r=this._users.find((e=>e.uid===t));if(!r)return void dN.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));dN.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const i="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;const e=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===e)return;{const e=r._audio_enabled_?"enable-local-audio":"disable-local-audio";dN.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(lx.USER_INFO_UPDATED,t,e)}}else{r._trust_video_enabled_state_=!0;const e=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===e)return;{const e=r._video_enabled_?"enable-local-video":"disable-local-video";dN.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(lx.USER_INFO_UPDATED,t,e)}}const o="audio"===e?r.hasAudio:r.hasVideo;return i!==o?!i&&o?(dN.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(lx.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,this._p2pChannel.muteRemote(r,e),dN.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(lx.USER_UNPUBLISHED,r,e)):void 0})),wC(this,"_handleMuteStream",((e,t,n)=>{if(LO("BLOCK_LOCAL_CLIENT")&&jL(e,this.channelName))return;dN.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const r=this._users.find((t=>t.uid===e));if(!r)return void dN.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const i="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===t)return;{const t=r._audio_muted_?"mute-audio":"unmute-audio";dN.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(lx.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=n,r._video_muted_===t)return;{const t=r._video_muted_?"mute-video":"unmute-video";dN.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(lx.USER_INFO_UPDATED,e,t)}}const o="audio"===t?r.hasAudio:r.hasVideo;if(i!==o){if(!i&&o)return("audio"===t?r._audioSSRC:r._videoSSRC)?(dN.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(lx.USER_PUBLISHED,r,t)):void dN.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&!r._video_pre_subscribed&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,this._p2pChannel.muteRemote(r,t),dN.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(lx.USER_UNPUBLISHED,r,t)}})),wC(this,"_handleP2PLost",(async e=>{dN.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():dN.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),wC(this,"_handleTokenWillExpire",(()=>{dN.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(lx.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),wC(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),dN.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),wC(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(lx.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(lx.NETWORK_QUALITY,e)})),wC(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,r)=>{const i=this._users.find((e=>e.uid===t));if(!i)return void dN.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));dN.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(i.uid,e,void 0,void 0,void 0,Date.now());const o="audio"===e?i.hasAudio:i.hasVideo;"audio"===e?i._trust_audio_stream_added_state_=!0:i._trust_video_stream_added_state_=!0,"audio"===e?(i._audio_added_=!0,void 0!==n&&(i._audioSSRC=n),void 0!==r&&(i._audioMid=r)):(i._video_added_=!0,void 0!==n&&(i._videoSSRC=n),void 0!==r&&(i._videoMid=r)),("audio"===e?i.hasAudio:i.hasVideo)&&!o&&(dN.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published ").concat(e)),this.safeEmit(lx.USER_PUBLISHED,i,e)),this._p2pChannel.hasPendingRemoteMedia(i,e)&&(dN.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(i.uid," after reconnect.")),this._subscribe(i,e,!0).catch((e=>{dN.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=t||kx(5,"client-"),this.store=new BO(e.codec,e.audioCodec,e.mode,this._clientId),this._leaveMutex=new Gx("client-leave",this._clientId),this._publishMutex=new Gx("client-publish",this._clientId),this._renewTokenMutex=new Gx("client-renewtoken",this._clientId),this._subscribeMutex=new Gx("client-subscribe",this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),dN.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(CO," build: ").concat(NO,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{cx(e.clientRoleOptions),n=Object.assign({},e.clientRoleOptions)}catch(e){dN.warning("[".concat(this._clientId,"] ").concat(e.toString()))}var r;this._statsCollector=new MB(this.store),this._statsCollector.onStatsException=(e,t,n)=>{dN.warn("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(lx.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{const i=this._users.find((t=>t.uid===e));i&&yN.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:i._uintid})},this.store.useP2P="p2p"===e.mode,this._gateway=new GU(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||Kx,httpRetryConfig:e.httpRetryConfig||Kx,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:n}),this._configDistribute=new OB(this._clientId,this.store),this.store.useP2P?(this._p2pChannel=(r={store:this.store,statsCollector:this._statsCollector},FU("P2PChannel").create(r)),this._handleP2PEvents()):this._p2pChannel=new YF(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];PO("JOIN_GATEWAY_USE_443PORT_ONLY",o),PO("JOIN_GATEWAY_USE_DUAL_DOMAIN",s);const a=this._gateway.signal.websocket;return a instanceof Vj&&(a.use443PortOnly=o,a.tryDoubleDomain=s),async function(e,t,n){JR.get(e)||JR.set(e,[]),QR.get(e)||QR.set(e,t),ZR.get(e)||ZR.set(e,0);const r=JR.get(e),i=QR.get(e);if(!r||!i)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(ZR.get(e)===i){const e=XR();r.push(e),await e.promise}ZR.set(e,ZR.get(e)+1);for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];const c=await n(...s);return ZR.set(e,ZR.get(e)-1),ZR.get(e)===i-1&&r.length>0&&(r[0].resolve(),r.shift()),0===ZR.get(e)&&(JR.set(e,[]),QR.set(e,0),ZR.set(e,0)),c}("client.join",LO("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,i)}async join(e,t,n,r,i){const o=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const s="HTTPS"===(Jx||Jx||(Jx=(window.location.protocol.split(":")[0]||"").toUpperCase(),Jx)),a=nO()?window.isSecureContext:"Browser Not Support";if(!nO()&&!s||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";dN.warning(e)}"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),dN.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),yN.setAppId(e);try{if(!n&&null!==n)throw new _N(MI.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&WI(n,"token",1,2047),WI(e,"appid",1,2047),PM(t),r&&LM(r),i&&WI(i,"optionalInfo",1,2047)}catch(i){throw yN.reportApiInvoke(Px(),{name:tx.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:nx.TRACER}).onError(i),i}if(this._leaveMutex.isLocked&&(dN.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),dN.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const i=new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw yN.reportApiInvoke(Px(),{name:tx.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:nx.TRACER}).onError(i),i}this._gateway.state="CONNECTING";const c=await gV({appId:e,cname:t,uid:r,stringUid:"string"==typeof r?r:void 0,token:n||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const l=(null==c?void 0:c.sid)||Px();dN.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._sessionId||(this._sessionId=l,this.store.sessionId=this._sessionId);const d=yN.reportApiInvoke(l,{id:this._clientId,name:tx.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:nx.TRACER}),u=qW(qW(qW({},this._rtmConfig),{},{role:this.role,clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),{},{apRequestDetail:LO("AP_REQUEST_DETAIL")||void 0});if(this._useLocalAccessPoint&&(u.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof r&&(u.stringUid=r,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await(async e=>{const t=function(){const e=window.atob("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}(),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=XI(e),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(i))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=LO("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(u.appId+this._encryptionSecret+this._encryptionSecret):e.encode(u.appId+u.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256,o=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:1e3,hash:"SHA-256",salt:n},r,i+96);return new Uint8Array(o).subarray(i/8)}(this._encryptionMode,t,Cx(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),i="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:1e3,hash:"SHA-256",salt:n},r,{name:"AES-GCM",length:i},!0,["encrypt","decrypt"])}(this._encryptionMode,t,Cx(this._encryptionSalt))}else a?dN.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):dN.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,dN.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:u.stringUid});const h=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&h===this._sessionId&&yN.joinChannelTimeout(this._sessionId,5)}),5e3);try{var p;let r;const i=u.cloudProxyServer;if(Lr(p=["proxy3","proxy4","proxy5"]).call(p,i)){const e=LO("PROXY_SERVER_TYPE3");Array.isArray(e)?u.proxyServer=e[0]:u.proxyServer=e}if(yN.setProxyServer(u.proxyServer),dN.setProxyServer(u.proxyServer),this.store.requestAPStart(),c){if(dN.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(u.stringUid?", ".concat(u.stringUid," => ").concat(c.intUid):""," ")),u.stringUid&&!u.uid&&(u.uid=c.intUid),r={gatewayInfo:c.ap.gatewayInfo},LO("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&"auto"===u.turnServer.mode)if(0===c.ap.proxyInfo.addresses.length)dN.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const e=(await eU(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map((e=>({turnServerURL:e.address,tcpport:e.tcpport||IO.tcpport,udpport:e.udpport||IO.udpport,username:e.username||IO.username,password:e.password||IO.password,forceturn:!1,security:!0})));u.turnServer={mode:"manual",servers:e}}EV(c,u.stringUid)}else{if(u.stringUid&&!u.uid){let e;[e,r]=await rp.all([bB(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||Kx,this.store),EB(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Kx,!0,this.store)]),dN.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(u.stringUid," => ").concat(e)),u.uid=e,r.gatewayInfo.uid=e,r.gatewayInfo.res.uid=e}else r=await EB(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Kx,!0,this.store);if(!this._joinAndNotLeaveYet)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(rj.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)})),this._configDistribute.on(rj.UPDATE_CLIENT_ROLE_OPTIONS,(e=>{this._setClientRoleOptions(e)}))}),0),this._key=n||e;const o=r.gatewayInfo,s=u.uid?u.uid:o.uid;this._joinInfo=qW(qW({},u),{},{cid:o.cid,uid:s,vid:o.vid,apResponse:o.res,apGatewayAddress:o.apGatewayAddress,uni_lbs_ip:o.uni_lbs_ip,gatewayAddrs:o.gatewayAddrs}),this.store.intUid=s,this.store.cid=o.cid;const a=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));d.onSuccess(a),this._appId=e,this._channelName=u.cname,this._uid=a,this.store.uid=a,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(dI()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()}),0);const l=u.stringUid?"string uid: ".concat(u.stringUid,",uid: ").concat(u.uid):"uid: ".concat(this._uid);return dN.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(l)),setTimeout((()=>{dN.startUpload()}),5e3),this.store.joinEnd(),f=this,Lr(LL).call(LL,f)||LL.push(f),"disabled"===this._cloudProxyServerMode&&bN().supportWebCrypto&&LO("ENABLE_PRELOAD")&&yV(this._joinInfo),a}catch(e){const t=Array.isArray(e)?e[0]:e;throw t&&t.code===MI.OPERATION_ABORTED?dN.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t):dN.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),t),t.code!==MI.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),d.onError(t),t}var f}_joinGateway(){if(!this._joinInfo||!this._key)throw new _N(MI.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!LO("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){dN.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(dI()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=LL.indexOf(e);-1!==t&&LL.splice(t,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return dN.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState,ox.LEAVE),dN.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof pD))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new _N(MI.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new _N(MI.INVALID_OPERATION,"audience can not publish stream");for(const i of n){if(!(i instanceof pD))throw new _N(MI.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new _N(MI.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}dN.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof NP&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),dN.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(e){throw dN.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{r()}}async _publishDataChannel(e){FI(e.id,"id",0,65535,!0),UI(e.ordered,"ordered"),WI(e.metadata,"metadata",0,512),dN.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new _N(MI.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new _N(MI.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&LO("FORCE_TURN")&&!LO("TURN_ENABLE_TCP")&&!LO("TURN_ENABLE_UDP"))throw new _N(MI.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=function(e){return VU(e,!1)}(e),n=await this._p2pChannel.publishDataChannel([t]);if(n.length>0){if("number"!=typeof t._originDataChannelId)throw dN.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new _N(MI.CREATE_DATACHANNEL_ERROR);try{await rp.all(n.map((e=>this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)))),await t._waitTillOpen()}catch(e){if(e.code!==MI.DISCONNECT_P2P)throw e}}return dN.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(e){throw dN.error("[".concat(this._clientId,"] publish datachannels error"),e.toString()),e}finally{t()}}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new _N(MI.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof pD))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);dN.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this.store.useP2P){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(wj.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),dN.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(e){throw dN.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),dN.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),dN.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(e){throw dN.error("[".concat(this._clientId,"] unpublish dataChannel error"),e.toString()),e}finally{t&&t()}}async subscribe(e,t,n){if(!(e instanceof BB)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");e=t}return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(BI(t,"mediaType",["audio","video"]),this.store.useP2P)throw new _N(MI.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===aj.AUDIO,r=t===aj.VIDEO,i=await this._subscribeMutex.lock();try{const{ssrcId:i,ortc:o,rtxSsrcId:s,cname:a,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==i)throw new _N(MI.UNEXPECTED_RESPONSE,"no ssrc id");let l=this._users.find((t=>t.uid===e));l||(l=new BB(e,c||e),l._is_pre_created=!0,this._users.push(l)),a&&(l._cname=a),l._uintid||(l._uintid=c||e),n&&(l._audioSSRC=i,l._audio_pre_subscribed=!0,o&&(l._audioOrtc=o)),r&&(l._videoSSRC=i,l._video_pre_subscribed=!0,o&&(l._videoOrtc=o),null!=s&&(l._rtxSsrcId=s)),dN.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(i)),await this._p2pChannel.subscribe(l,t,i,s,o);const d=n?l._audioTrack:l._videoTrack;if(!d)throw new _N(MI.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),r&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),d}catch(t){throw dN.error("[".concat(this._clientId,"] presub user ").concat(e," error"),t),t}finally{i()}}async _subscribeDataChannel(e,t){var n;if(FI(t,"channelId",0,65535,!0),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r)throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new _N(MI.INVALID_REMOTE_USER,"user is not published");const i=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!i)throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new _N(MI.REMOTE_USER_IS_NOT_PUBLISHED);const o=await this._subscribeMutex.lock();dN.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const n=await this._p2pChannel.subscribeDataChannel(e,[i]);if(n&&Lr(n).call(n,i.id))try{var s;if("number"!=typeof i._originDataChannelId)throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new _N(MI.CREATE_DATACHANNEL_ERROR);const t={id:i.id,datachannelId:i._originDataChannelId,ordered:i.ordered,maxRetransmits:i.maxRetransmits,metadata:null!==(s=i.metadata)&&void 0!==s?s:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await i._waitTillOpen()}catch(t){if((null==t?void 0:t.code)!==MI.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[i]),t;await this._p2pChannel.unsubscribeDataChannel(e,[i]),this._p2pChannel.setPendingRemoteDataChannel(e,i.id)}return dN.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),i}finally{o()}}async _p2pSubscribe(e,t,n){if(BI(t,"mediaType",["audio","video"]),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r){const t=new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new _N(MI.INVALID_REMOTE_USER,"user is not published");throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new _N(MI.REMOTE_USER_IS_NOT_PUBLISHED);throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const i=await this._subscribeMutex.lock();dN.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this.store.useP2P&&await this._p2pChannel.subscribe(e,t,n,r)}catch(e){throw e}dN.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{dN.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new _N(MI.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(t){throw dN.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{i()}}async _subscribe(e,t,n){if(this.store.useP2P)return this._p2pSubscribe(e,t);if(BI(t,"mediaType",["audio","video"]),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const r=this._users.find((t=>t===e));if(!r){const t=new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new _N(MI.INVALID_REMOTE_USER,"user is not published");throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new _N(MI.REMOTE_USER_IS_NOT_PUBLISHED);throw dN.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let i="audio"===t?e._audioSSRC:e._videoSSRC,o="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,a={stream_type:"audio"===t?aj.AUDIO:aj.VIDEO,ssrcId:i};const c=await this._subscribeMutex.lock();dN.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const r="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==r&&r!==i&&(i=r,o="audio"===t?e._audioOrtc:e._videoOrtc,s="video"===t?e._rtxSsrcId:void 0,a={stream_type:"audio"===t?aj.AUDIO:aj.VIDEO,ssrcId:i}),kB.markSubscribeStart(this.store.clientId,i),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,i,s,o);try{this._p2pChannel.isPreSubScribe(i)||await this._gateway.subscribe(e.uid,a,!0)}catch(n){if((null==n?void 0:n.code)!==MI.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),n;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){throw this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),n}dN.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{dN.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const r="audio"===t?e._audioTrack:e._videoTrack;if(!r)throw new _N(MI.UNEXPECTED_ERROR,"can not find remote track in user object");return r}catch(t){throw dN.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),t),t}finally{c()}}async massSubscribe(e){if(HI(e,"subscribeList"),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();dN.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const i=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),o=await this._p2pChannel.globalLock();try{var s;for(let t=e.length-1;t>=0;t--){const r=e[t],{user:o,mediaType:s}=r;if(BI(s,"mediaType",["audio","video"]),!o){const e=new _N(MI.INVALID_PARAMS,"user property does not exist in subscribeList item");throw dN.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}const a=this._users.find((e=>e===o));if(!a){const n=new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");dN.error("[".concat(this._clientId,"] can not massSubscribe ").concat(o.uid,", this user is not in the channel")),i[t].error=n,e.splice(t,1);continue}if("audio"===s&&(!o.hasAudio||void 0===o._audioSSRC)||"video"===s&&(!o.hasVideo||void 0===o._videoSSRC)){const n=new _N(MI.REMOTE_USER_IS_NOT_PUBLISHED);dN.error("[".concat(this._clientId,"] can not subscribe ").concat(o.uid," with mediaType ").concat(s,", remote user is not published")),i[t].error=n,e.splice(t,1);continue}const c=ZM.Video|ZM.LwoVideo,l=n.get(o);if(l){if("video"===s?l&c:l&ZM.Audio){e.splice(t,1),dN.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(o.uid,", mediaType:").concat(s," twice"));continue}n.set(o,l|("video"===s?c:ZM.Audio))}else n.set(o,"video"===s?c:ZM.Audio)}for(let t=e.length-1;t>=0;t--){const r=e[t],{user:i,mediaType:o}=r,s=ZM.Video|ZM.LwoVideo;if(this._p2pChannel.hasRemoteMedia(i,o)){await this._p2pChannel.unmuteRemoteNoLock(i,o);const r=n.get(i);n.set(i,"video"===o?r^s:r^ZM.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);let r=oi(s=Array.from(n.entries())).call(s,((e,t)=>{let[n,r]=t;if(0===r)return e;const i={stream_id:n.uid,stream_type:r};return r&ZM.Audio&&(i.audio_ssrc=n._audioSSRC),r&ZM.Video&&(i.video_ssrc=n._videoSSRC),e.push(i),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===aj.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===aj.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(r=r.filter((e=>e.video_ssrc&&!this._p2pChannel.isPreSubScribe(e.video_ssrc)||e.audio_ssrc&&!this._p2pChannel.isPreSubScribe(e.audio_ssrc)||!e.video_ssrc&&!e.audio_ssrc)),r.length>0){const e=await this._gateway.subscribeAll(r,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:r,audio_error_code:i,error_code:o}=e;(r||i||o)&&n.set(t,{video_error_code:r,audio_error_code:i,error_code:o})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,r]=t;const i=this.remoteUsers.find((e=>e.uid===n));if(i){let t;r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=aj.VIDEO:r.audio_error_code&&(t=aj.AUDIO),e.push({user:i,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of i){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=xj(n);dN.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new _N(MI.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(i.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),i.forEach((e=>{var n;yN.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===aj.VIDEO,audio:e.mediaType===aj.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===aj.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(e.user._videoSSRC)},!0)})),dN.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),i}catch(t){throw await this._p2pChannel.massUnsubscribeNoLock(e),t}}finally{o(),r()}}async unsubscribe(e,t,n){if(!(e instanceof BB)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");e=t}if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&BI(t,"mediaType",["audio","video"]),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const r=this._users.find((t=>t===e));if(!r){const t=new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");throw dN.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}dN.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const i=await this._subscribeMutex.lock();try{if(this.store.useP2P)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&yx(this._users,e),dN.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(t){if(t.code===MI.DISCONNECT_P2P)return void dN.warning("disconnecting p2p, abort unsubscribe request.");throw dN.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}finally{i()}}async _unsubscribeDataChannel(e,t){if(t&&FI(t,"id",0,65535,!0),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");const n=this._users.find((t=>t===e));if(!n){const t=new _N(MI.INVALID_REMOTE_USER,"user is not in the channel");throw dN.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let r;if("number"==typeof t){const n=e._dataChannels.find((e=>e.id===t));n&&(r=[n])}else r=e._dataChannels;if(void 0===r){const n=new _N(MI.REMOTE_USER_IS_NOT_PUBLISHED);throw dN.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}dN.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,r);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),dN.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(t){if(t.code===MI.DISCONNECT_P2P)return void dN.warning("disconnecting p2p, abort unsubscribe request.");throw dN.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),t.toString()),t}}async massUnsubscribe(e){if(HI(e,"unsubscribeList"),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");dN.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let n=e.length-1;n>=0;n--){const{user:r,mediaType:i}=e[n];if(!r){const e=new _N(MI.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw dN.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}BI(i,"mediaType",["video","audio",void 0]);const o=this._users.find((e=>e===r));if(!o){dN.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(r.uid,", user is not in the channel")),e.splice(n,1);continue}const s=ZM.Video|ZM.LwoVideo;if(t.has(r)){const o=t.get(r);let a;switch(i){case"video":a=o&s;break;case"audio":a=o&ZM.Audio;break;default:a=o&(ZM.Audio|s)}if(a){dN.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(r.uid,",mediaType:").concat(i," twice.")),e.splice(n,1);continue}i?"audio"===i?t.set(r,o|ZM.Audio):"video"===i&&t.set(r,o|s):t.set(r,o|ZM.Audio|s)}else i?"audio"===i?t.set(r,ZM.Audio):"video"===i&&t.set(r,s):t.set(r,ZM.Audio|s)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),dN.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(e){if(e.code===MI.DISCONNECT_P2P)return void dN.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw dN.error("[".concat(this._clientId,"] massUnsubscribe error"),e.toString()),e}}async setLowStreamParameter(e){!function(e){if(!e)throw new jI(MI.INVALID_PARAMS);zI(e.width)||VI(e.width,"streamParameter.width"),zI(e.height)||VI(e.height,"streamParameter.height"),zI(e.framerate)||VI(e.framerate,"streamParameter.framerate"),zI(e.bitrate)||FI(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&dN.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),dN.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,uj.LocalVideoLowTrack)}async enableDualStream(){if(!bN().supportDualStream)throw yN.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new _N(MI.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new _N(MI.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw yN.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,yN.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),dN.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(uj.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw yN.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,yN.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),dN.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(e){BI(e,"role",["audience","host"])}(e),t&&cx(t),"rtc"===this.mode||"p2p"===this.mode)throw dN.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new _N(MI.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new _N(MI.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new _N(MI.INVALID_OPERATION,"can not set client role to audience when publishing stream");const n=this._config.role;this._joinInfo&&(this._joinInfo.role=e),e!==n&&LO("ENABLE_ROLE_SELECT_EDGE")?(this._gateway.updateClientRole(e,t),this._config.role=e,this._gateway.reconnect("recover",dx.REGIONAL_DISTRIBUTION)):(await this._gateway.setClientRole(e,t),this._config.role=e),dN.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}async _setClientRoleOptions(e){if("rtc"===this.mode||"p2p"===this.mode)return;if("audience"!==this._config.role||this._p2pChannel.hasLocalMedia())return;let t=!1;try{e&&cx(e),await this._gateway.setClientRole(this._config.role,e),t=!0}catch(e){}finally{dN.info("[".concat(this._clientId,"] set client role options ").concat(t?"succeed":"failed",", options is ").concat(e))}}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(WI(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new _N(MI.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,yN.setProxyServer(this._proxyServer),dN.setProxyServer(this._proxyServer),dN.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new _N(MI.INVALID_OPERATION,"You have already set the proxy")}if(sx(e))return this._turnServer={servers:e,mode:"original-manual"},void dN.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>ax(e))),this._turnServer={servers:e,mode:"manual"},dN.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"you should set license before join channel");if(WI(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new _N(MI.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,dN.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new _N(MI.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new _N(MI.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new _N(MI.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,dN.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"Stop proxy server after leave channel");yN.setProxyServer(),dN.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",dN.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new _N(MI.INVALID_PARAMS,"accessPoints is required.");HI(e.accessPoints.serverList,"accessPoints.serverList"),WI(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{FI(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new _N(MI.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");LO("CLOSE_AFB_FOR_LOCAL_AP")&&(PO("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),PO("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((e=>r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e)),s=o.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,PO("WEBCS_DOMAIN",s),PO("WEBCS_DOMAIN_BACKUP_LIST",s),PO("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(HI(e.report.hostname,"report.hostname"),PO("EVENT_REPORT_DOMAIN",e.report.hostname[0]),PO("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(PO("EVENT_REPORT_DOMAIN",o[0]),PO("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let a=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),a=e.report.port),PO("STATS_COLLECTOR_PORT",a),e.report?PO("ENABLE_EVENT_REPORT",!0):PO("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(HI(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),PO("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let d=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(HI(e.cds.hostname,"cds.hostname"),d=e.cds.hostname):d=o;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),u=e.cds.port),PO("CDS_AP",d.map((e=>"".concat(e,":").concat(u)))),e.cds?PO("ENABLE_CONFIG_DISTRIBUTE",!0):PO("ENABLE_CONFIG_DISTRIBUTE",!1),dN.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(HI(e,"serverList"),WI(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new _N(MI.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,PO("WEBCS_DOMAIN",e),PO("WEBCS_DOMAIN_BACKUP_LIST",e),PO("GATEWAY_DOMAINS",[t]),PO("EVENT_REPORT_DOMAIN",e[0]),PO("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),PO("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),dN.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(BI(e,"streamType",[0,1,4,5,6,7,8,9]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(e){throw dN.error("[".concat(this._clientId,"] set default remote video stream type error"),e.toString()),e}else dN.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){BI(t,"streamType",[0,1,4,5,6,7,8,9]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(e){throw dN.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}dN.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){BI(t,"fallbackType",[0,1,2,3,4,5,6,7,8]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw dN.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}dN.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){!function(e){BI(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),WI(t,"secret");const i=["aes-128-gcm2","aes-256-gcm2"];if(Lr(i).call(i,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new _N(MI.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new _N(MI.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(UI(r,"encryptDataStream"),!Lr(i).call(i,e))throw new _N(MI.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||dN.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Tx(n))}async renewToken(e){if(WI(e,"token",1,2047),!this._key||!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(LO("USE_NEW_TOKEN")){dN.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await RB(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Kx);dN.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else dN.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});dN.debug("[".concat(this._clientId,"] renewToken success"))}catch(e){throw this._key=t,this._joinInfo.token=t,dN.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?dN.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(lx.VOLUME_INDICATOR,e)}),LO("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new _N(MI.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new _N(MI.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new _N(MI.LIVE_STREAMING_TASK_CONFLICT);const n=t?MM.TRANSCODE:MM.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(MM.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new _N(MI.INVALID_PARAMS,"can not find live streaming url to stop");await rp.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async startChannelMediaRelay(e){UB(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){UB(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendAudioMetadata(e){this._p2pChannel instanceof YF&&this._p2pChannel.addAudioMetadata(e)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Lr(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(e,t,n){var r;const i=oi(r=Array.from(n)).call(r,((e,t)=>e+t),0),o={serverTs:0,seq:VO++,length:n.length,checkSum:i},s=new Uint8Array(Fx(i,2)),a=new ArrayBuffer(10),c=new DataView(a);c.setUint32(0,o.serverTs),c.setUint16(4,o.seq),c.setUint16(6,o.length),c.setUint16(8,o.checkSum);const l=16-n.length%16;n=Ix(n,new Uint8Array(l));const d=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:128,additionalData:s},t,n);return Ix(new Uint8Array(a),new Uint8Array(d))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new _N(MI.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(xM.DATA_STREAM,{payload:Tx(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-JF},!n)}sendMetadata(e){if(!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new _N(MI.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(xM.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Tx(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(hN),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"can not send custom report, not joined");await yN.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){BI(t.spatialLayer,"spatialLayer",[0,1,2,3]),BI(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw dN.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(UI(t,"apRTM"),FI(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,dN.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(dN.debug("[".concat(this._clientId,"] reset client")),function(e){const t=ML.indexOf(e);-1!==t&&ML.splice(t,1)}(this._clientId),this.store.hasStartJoinChannel=!1,this.store.isABTestSuccess=!1,this._axiosCancelSource.cancel(),this._axiosCancelSource=KR.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&_V(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId&&yN.removeSid(this._sessionId),this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Gx("client-publish",this._clientId),this._subscribeMutex=new Gx("client-subscribe",this._clientId),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(e){}if(this._moderation)try{this.setImageModeration(!1)}catch(e){}}_startSession(e,t){var n;const r=e||Px();e?dN.debug("[".concat(this._clientId,"] new Session ").concat(r)):dN.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const i=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r,yN.addSid(r);const o={lts:(new Date).getTime(),mode:this.mode,buildFormat:1,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:"audience"===this.role?2:1};yN.sessionInit(this._sessionId,qW({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new _N(MI.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&LO("FORCE_TURN")&&!LO("TURN_ENABLE_TCP")&&!LO("TURN_ENABLE_UDP"))throw new _N(MI.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");dN.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this.store.useP2P){const t=(await n.next()).value;if(t){try{await this._gateway.sendExtensionMessage(wj.PUBLISH,t,!0)}catch(e){throw n.throw(e),e}await n.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(e){if(e.code!==MI.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=i)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof NP&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig).catch((e=>{dN.debug("[".concat(this._clientId,"] stop setVideoProfile, because websocket is closed"))})),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===MI.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new _N(MI.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));dN.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==MI.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=r)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===MI.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){const t=()=>{if(!this._joinInfo||!this._appId)return new _N(MI.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const e=(t={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},FU("LiveStreaming").create(t));var t;return e.onLiveStreamError=(e,t)=>{yN.reportApiInvoke(this._sessionId,{name:tx.ON_LIVE_STREAM_ERROR,options:[e,t],tag:nx.TRACER}).onSuccess(),this.safeEmit(lx.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{yN.reportApiInvoke(this._sessionId,{name:tx.ON_LIVE_STREAM_WARNING,options:[e,t],tag:nx.TRACER}).onSuccess(),this.safeEmit(lx.LIVE_STREAMING_WARNING,e,t)},e.on(WM.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new _N(MI.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(e,t,n,r){const i=LO("UAP_AP").slice(0,LO("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await sB(i,e,t,n,r)})(e,this._joinInfo,this._axiosCancelSource.token,Kx).then(t).catch(n)})),e};return e===MM.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new _N(MI.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:n}=this.getLocalVideoStats(),r=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:n}},FU("ChannelMediaRelay").create(e));r.on("state",(e=>{e===KM.RELAY_STATE_FAILURE&&r&&r.dispose(),this.safeEmit(lx.CHANNEL_MEDIA_RELAY_STATE,e)})),r.on("event",(e=>{this.safeEmit(lx.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient=r,this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,i=[];if(t){const e=[];this._users.forEach((t=>{t._dataChannels.forEach((r=>{n.every((e=>e.uid!==t._uintid||e.stream_id!==r.id))&&e.push({uid:t._uintid,stream_id:r.id,ordered:r.ordered,max_retrans_times:r.maxRetransmits,metadata:r.metadata})}))})),e.length>0&&this._handleUpdateDataChannel({added:[],deleted:e})}Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:r,ordered:o,max_retrans_times:s,metadata:a}=e,c=this._users.find((e=>e._uintid===n));if(c){if(dN.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Lr(i).call(i,c)||i.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:r,ordered:!!o,maxRetransmits:s,metadata:a},n=function(e){return VU(e,!0)}(e);c._dataChannels.push(n),dN.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(lx.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(dN.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{dN.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else dN.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(lx.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach((e=>{const{uid:t,stream_id:n}=e,r=this._users.find((e=>e._uintid===t));if(!r)return void dN.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const i=r._dataChannels.find((t=>t.id===e.stream_id));i&&(dN.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(r,[i]).then((e=>{if(r._dataChannels=r._dataChannels.filter((e=>e!==i)),e)return this._gateway.unsubscribeDataChannel(e,r.uid)})),dN.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(i.id)),this.safeEmit(lx.USER_UNPUBLISHED,r,"datachannel",i._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){dN.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{dN.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(lx.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else dN.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(JM.UPDATE_GATEWAY_CONFIG,(()=>{!function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void dN.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();Object.keys(t).forEach((e=>{const{value:r,type:i,expires:o}=t[e];o&&o<=n||i||UL()||!Object.prototype.hasOwnProperty.call(xO,e)||(jO[e]=r,kO[e]=r,dN.debug("Update gateway parameters from config distribute",e,r))}))}catch(e){dN.error("Error update config from local cache",e.message)}}()})),this._gateway.on(JM.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(JM.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r;if(n===ox.FALLBACK)return;const i=()=>{this.safeEmit(lx.CONNECTION_STATE_CHANGE,e,t,n)};if(yN.reportApiInvoke(this._sessionId||(null===(r=this._gateway.joinInfo)||void 0===r?void 0:r.sid)||null,{name:tx.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:nx.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),dN.info("[".concat(this._clientId,"] signal connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void i();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var o;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{dN.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{dN.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(o=this._joinInfo)||void 0===o?void 0:o.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{dN.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{dN.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{dN.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(dN.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aj.AUDIO,!1)),e._trust_video_mute_state_||(dN.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,aj.VIDEO,!1)),e._trust_audio_enabled_state_||(dN.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(dN.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(dN.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(dN.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(dN.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}i()})),this._gateway.on(JM.REQUEST_NEW_GATEWAY_LIST,(async(e,t)=>{if(!this._joinInfo)return t(new _N(MI.UNEXPECTED_ERROR,"can not recover, no join info"));try{let t;const n=await gV(qW(qW({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(t=n.ap,EV(n),this._joinInfo.preload=!0):(t=await _B(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Kx,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const r=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[n,i]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?r.push({proxy:this._joinInfo.proxyServer,host:n,port:i}):r.push({host:n,port:i})})),e(r)}catch(e){t(e)}})),this._gateway.on(JM.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(lx.NETWORK_QUALITY,e)})),this._gateway.on(JM.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(lx.STREAM_TYPE_CHANGED,e,t),yN.reportApiInvoke(this._sessionId,{name:tx.STREAM_TYPE_CHANGE,options:[e,t],tag:nx.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(JM.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(JM.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{let n=await this._p2pChannel.getEstablishParams();LO("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(e){n(e)}})),this._gateway.on(JM.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;let n;e.attributes?n=e.attributes.userAttributes.preSubSsrcs:dN.debug("no attributes in joinResponse");const r=fU(e.ortc,t,n);this._p2pChannel.connect(r)})),this._gateway.on(JM.PRE_CONNECT_PC,(async e=>{const{candidates:t,fingerprint:n}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var r;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:e,cid:i}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(i,"_").concat(e),icePwd:"".concat(i,"_").concat(e)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(r=LO("FINGERPRINT"))&&void 0!==r?r:n}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}}))}_handleGatewaySignalEvents(){this._gateway.signal.on(NM.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(NM.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(NM.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(NM.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(NM.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(NM.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)})),this._gateway.signal.on(NM.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(NM.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(NM.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aj.AUDIO,!0))),this._gateway.signal.on(NM.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,aj.AUDIO,!1))),this._gateway.signal.on(NM.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aj.VIDEO,!0))),this._gateway.signal.on(NM.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,aj.VIDEO,!1))),this._gateway.signal.on(NM.RECEIVE_METADATA,(e=>{const t=Cx(e.metadata);this.safeEmit(lx.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(NM.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=Cx(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Lr(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<10)throw new _N(MI.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(10));const t=await async function(e,t,n){const r=n.subarray(0,10),i=r.slice(8,10),o=(i[0]<<8)+i[1],s=(r[6]<<8)+r[7],a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:128,additionalData:new Uint8Array(Fx(o,2))},t,n.subarray(10));return new Uint8Array(a).subarray(0,s)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n);n=t}let r=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),i=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));r=null==i?void 0:i.jitterBufferMs}(null==r||Number.isNaN(r))&&(r=0),tV(qW(qW({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(NM.ON_CRYPT_ERROR,(()=>{Ax((()=>{dN.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(lx.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(NM.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(NM.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{dN.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,ox.TOKEN_EXPIRE),this.safeEmit(lx.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(NM.ON_STREAM_FALLBACK_UPDATE,(e=>{dN.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(lx.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(NM.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),dN.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(NM.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(NM.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(IM.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case xM.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,r;const i=e.some((e=>{let{stream_type:t}=e;return t===XM.Audio})),o=e.some((e=>{let{stream_type:t}=e;return t!==XM.Audio})),s=e.some((e=>{let{stream_type:t}=e;return t===XM.Screen||t===XM.ScreenLow}));"offer"===t.state&&yN.publish(this._joinInfo.sid,{eventElapse:kB.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:MI.TIMEOUT,audio:i,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:i?null===(n=e.find((e=>{let{stream_type:t}=e;return t===XM.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:o?null===(r=e.find((e=>{let{stream_type:t}=e;return t!==XM.Audio})))||void 0===r||null===(r=r.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0})}break}case xM.SUBSCRIBE:t&&yN.subscribe(this._joinInfo.sid,{succ:!1,ec:MI.TIMEOUT,audio:t.stream_type===aj.AUDIO,video:t.stream_type===aj.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:kB.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}})),this._gateway.signal.on(NM.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(NM.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;LO("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!jL(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const r of e.users){let e=this._users.find((e=>e._uintid===r.stream_id));e?e._trust_in_room_=!0:(e=new BB(r.string_id||r.stream_id,r.stream_id),this._users.push(e),0===this.getListeners(lx.PUBLISHED_USER_LIST).length&&(dN.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(lx.USER_JOINED,e)));const i=ZM.Audio&r.stream_type,o=(ZM.Video|ZM.LwoVideo)&r.stream_type,s=!!(65280&r.stream_type),a=i&&e.hasAudio,c=o&&e.hasVideo;o&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=r.video_ssrc,e._rtxSsrcId=r.video_rtx),i&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=r.audio_ssrc),i&&!a&&0===this.getListeners(lx.PUBLISHED_USER_LIST).length&&(dN.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(lx.USER_PUBLISHED,e,"audio")),o&&!c&&0===this.getListeners(lx.PUBLISHED_USER_LIST).length&&(dN.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(lx.USER_PUBLISHED,e,"video")),(i&&!a||o&&!c||s)&&t.push(e),o&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),i&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(dN.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{dN.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(lx.PUBLISHED_USER_LIST).length>0?LO("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(dN.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(lx.PUBLISHED_USER_LIST,t)):dN.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(NM.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof YF&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Lr(t=Object.keys(FO)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(NM.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(wj.PUBLISH,((e,t,n)=>{const{uid:r}=e;e.forEach((e=>{const{kind:i,ssrcs:o,mid:s,isMuted:a}=e;this._handleP2PAddAudioOrVideoStream(i,r,o[0].ssrcId,s);const c=this._users.find((e=>e.uid===r));return c&&this.store.useP2P?this._p2pChannel.mockSubscribe(c,i,o[0].ssrcId,s).then((()=>{t()})).catch(n):t(),this._handleMuteStream(r,i,!!a)}))})),this._gateway.signal.on(wj.CALL,(async(e,t,n)=>{if(this.store.useP2P)try{var r;t(await this._p2pChannel.startP2P({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},e))}catch(e){n(e)}})),this._gateway.signal.on(IM.P2P_CONNECTION,(async e=>{this.store.useP2P&&(await this._p2pChannel).p2pConnect(e)})),this._gateway.signal.on(wj.UNPUBLISH,(async(e,t,n)=>{if(this.store.useP2P){const{unpubMsg:r,uid:i}=e,o=this._users.find((e=>e.uid===i));if(!o)return dN.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{r.forEach((async e=>{let{stream_type:t}=e;const n=t===XM.Audio?aj.AUDIO:aj.VIDEO;await this._p2pChannel.unsubscribe(o,n),this._handleMuteStream(i,n,!0)})),t()}catch(e){n(e)}}})),this._gateway.signal.on(wj.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case Aj.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,aj.VIDEO,!0);break;case Aj.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,aj.AUDIO,!0);break;case Aj.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,aj.VIDEO,!1);break;case Aj.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,aj.AUDIO,!1)}})),this._gateway.signal.on(wj.RESTART_ICE,(async(e,t,n)=>{if(this.store.useP2P)try{const{direction:n,iceParameter:r}=e;n!==DM.SEND_ONLY||r?t(await this._p2pChannel.restartICE(n,r)):(this._p2pChannel.handleDisconnect(n),t())}catch(e){n(e)}})),this._gateway.signal.on(wj.CANDIDATE,(e=>{if(this.store.useP2P){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(pj.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(wj.RESTART_ICE,e,n===DM.SEND_ONLY))}catch(e){n(e)}})),this._p2pChannel.on(pj.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(wj.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(pj.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(wj.CONTROL,e,!0),t()}catch(e){n(e)}})),this._p2pChannel.on(pj.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===MI.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pj.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===MI.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pj.StateChange,((e,t)=>{t===hj.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(pj.PeerConnectionStateChange,(e=>{const t=this._peerConnectionState;e!==t&&(this.safeEmit(lx.PEERCONNECTION_STATE_CHANGE,e,t),this._peerConnectionState=e)})),this._p2pChannel.on(pj.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===MI.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pj.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===MI.DISCONNECT_P2P?t():n(e)}else t()})),this._p2pChannel.on(pj.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(pj.RequestRePublishDataChannel,((e,t,n)=>{rp.all(e.map((async e=>{const t=await this._p2pChannel.publishDataChannel([e]);try{t.forEach((e=>{this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)}))}catch(e){if(e.code!==MI.DISCONNECT_P2P)throw e}}))).then(t).catch(n)})),this._p2pChannel.on(pj.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===aj.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}})),this._p2pChannel.on(pj.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(pj.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(pj.MediaReconnectStart,(e=>{this.safeEmit(lx.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(pj.MediaReconnectEnd,(e=>{this.safeEmit(lx.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(pj.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(pj.RequestRestartICE,(async e=>{if(this.store.useP2P)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let i;try{i=await this._gateway.restartICE({iceParameters:r})}catch(e){return void t.throw(e)}const{iceParameters:o}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(i);await t.next({remoteIceParameters:o})})),this._p2pChannel.on(pj.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(pj.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),s=fU(i,o);await this._p2pChannel.connect(s),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(pj.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(pj.P2PLost,(()=>{this.safeEmit(lx.P2P_LOST,this.store.uid)})),this._p2pChannel.on(pj.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(pj.ConnectionTypeChange,(e=>{this.safeEmit(lx.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(pj.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(pj.QueryClientConnectionState,(e=>{e(this.connectionState)})),this._p2pChannel.on(pj.AudioMetadata,(e=>{this.safeEmit(lx.AUDIO_METADATA,e)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||"CONNECTED"!==this.connectionState)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const n=(t={config:e},FU("ContentInspect").create(t));this._inspect=n,this.handleVideoInspectEvents(n);const{appId:r,cname:i,sid:o,token:s,uid:a,cid:c,vid:l}=this._joinInfo;await n.init({appId:r,areaCode:"",cname:i,sid:o,token:s,uid:a,cid:c,vid:l?Number(l):0},Kx)}catch(e){throw Array.isArray(e)?e[0]:e}var t}handleVideoInspectEvents(e){e.on(gj.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(lx.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===fj.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(lx.CONTENT_INSPECT_ERROR,new _N(MI.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(gj.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===MI.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return dN.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(lx.CONTENT_INSPECT_RESULT,e,t)})),e.on(gj.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}async disableContentInspect(){if(!this._inspect)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(UI(e,"enabled"),e){if(!t)throw new _N(MI.INVALID_PARAMS,"config is required");if(rW(t),!this._joinInfo)throw new _N(MI.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{const e=(n={config:t},FU("ImageModeration").create(n));this._moderation=e,this.handleImageModerationEvents(e);const{appId:r,cname:i,sid:o,token:s,uid:a,cid:c,vid:l}=this._joinInfo;await e.init({appId:r,areaCode:"",cname:i,sid:o,token:s,uid:a,cid:c,vid:l?Number(l):0},Kx)}}catch(e){throw Array.isArray(e)?e[0]:e}}else{var n;if(!this._moderation)throw new _N(MI.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}}handleImageModerationEvents(e){e.on(Ej.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(lx.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===_j.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new _N(MI.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(Ej.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}setP2PTransport(e){if(function(e){BI(e,"transport",["default","auto","relay","sd-rtn"])}(e),"p2p"!==this.mode)throw new _N(MI.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,dN.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return dN.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){UI(e,"enabled"),PO("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},bM(YW.prototype,"leave",[oW],Object.getOwnPropertyDescriptor(YW.prototype,"leave"),YW.prototype),bM(YW.prototype,"publish",[sW],Object.getOwnPropertyDescriptor(YW.prototype,"publish"),YW.prototype),bM(YW.prototype,"unpublish",[aW],Object.getOwnPropertyDescriptor(YW.prototype,"unpublish"),YW.prototype),bM(YW.prototype,"subscribe",[cW],Object.getOwnPropertyDescriptor(YW.prototype,"subscribe"),YW.prototype),bM(YW.prototype,"presubscribe",[lW],Object.getOwnPropertyDescriptor(YW.prototype,"presubscribe"),YW.prototype),bM(YW.prototype,"massSubscribe",[dW],Object.getOwnPropertyDescriptor(YW.prototype,"massSubscribe"),YW.prototype),bM(YW.prototype,"unsubscribe",[uW],Object.getOwnPropertyDescriptor(YW.prototype,"unsubscribe"),YW.prototype),bM(YW.prototype,"massUnsubscribe",[hW],Object.getOwnPropertyDescriptor(YW.prototype,"massUnsubscribe"),YW.prototype),bM(YW.prototype,"setLowStreamParameter",[pW],Object.getOwnPropertyDescriptor(YW.prototype,"setLowStreamParameter"),YW.prototype),bM(YW.prototype,"enableDualStream",[fW],Object.getOwnPropertyDescriptor(YW.prototype,"enableDualStream"),YW.prototype),bM(YW.prototype,"disableDualStream",[mW],Object.getOwnPropertyDescriptor(YW.prototype,"disableDualStream"),YW.prototype),bM(YW.prototype,"setClientRole",[gW],Object.getOwnPropertyDescriptor(YW.prototype,"setClientRole"),YW.prototype),bM(YW.prototype,"_setClientRoleOptions",[vW],Object.getOwnPropertyDescriptor(YW.prototype,"_setClientRoleOptions"),YW.prototype),bM(YW.prototype,"setProxyServer",[yW],Object.getOwnPropertyDescriptor(YW.prototype,"setProxyServer"),YW.prototype),bM(YW.prototype,"setTurnServer",[_W],Object.getOwnPropertyDescriptor(YW.prototype,"setTurnServer"),YW.prototype),bM(YW.prototype,"setLicense",[EW],Object.getOwnPropertyDescriptor(YW.prototype,"setLicense"),YW.prototype),bM(YW.prototype,"startProxyServer",[bW],Object.getOwnPropertyDescriptor(YW.prototype,"startProxyServer"),YW.prototype),bM(YW.prototype,"stopProxyServer",[wW],Object.getOwnPropertyDescriptor(YW.prototype,"stopProxyServer"),YW.prototype),bM(YW.prototype,"setLocalAccessPointsV2",[SW],Object.getOwnPropertyDescriptor(YW.prototype,"setLocalAccessPointsV2"),YW.prototype),bM(YW.prototype,"setLocalAccessPoints",[AW],Object.getOwnPropertyDescriptor(YW.prototype,"setLocalAccessPoints"),YW.prototype),bM(YW.prototype,"setRemoteDefaultVideoStreamType",[CW],Object.getOwnPropertyDescriptor(YW.prototype,"setRemoteDefaultVideoStreamType"),YW.prototype),bM(YW.prototype,"setRemoteVideoStreamType",[TW],Object.getOwnPropertyDescriptor(YW.prototype,"setRemoteVideoStreamType"),YW.prototype),bM(YW.prototype,"setStreamFallbackOption",[RW],Object.getOwnPropertyDescriptor(YW.prototype,"setStreamFallbackOption"),YW.prototype),bM(YW.prototype,"setEncryptionConfig",[IW],Object.getOwnPropertyDescriptor(YW.prototype,"setEncryptionConfig"),YW.prototype),bM(YW.prototype,"renewToken",[xW],Object.getOwnPropertyDescriptor(YW.prototype,"renewToken"),YW.prototype),bM(YW.prototype,"enableAudioVolumeIndicator",[OW],Object.getOwnPropertyDescriptor(YW.prototype,"enableAudioVolumeIndicator"),YW.prototype),bM(YW.prototype,"startLiveStreaming",[NW],Object.getOwnPropertyDescriptor(YW.prototype,"startLiveStreaming"),YW.prototype),bM(YW.prototype,"setLiveTranscoding",[DW],Object.getOwnPropertyDescriptor(YW.prototype,"setLiveTranscoding"),YW.prototype),bM(YW.prototype,"stopLiveStreaming",[kW],Object.getOwnPropertyDescriptor(YW.prototype,"stopLiveStreaming"),YW.prototype),bM(YW.prototype,"startChannelMediaRelay",[PW],Object.getOwnPropertyDescriptor(YW.prototype,"startChannelMediaRelay"),YW.prototype),bM(YW.prototype,"updateChannelMediaRelay",[LW],Object.getOwnPropertyDescriptor(YW.prototype,"updateChannelMediaRelay"),YW.prototype),bM(YW.prototype,"stopChannelMediaRelay",[MW],Object.getOwnPropertyDescriptor(YW.prototype,"stopChannelMediaRelay"),YW.prototype),bM(YW.prototype,"sendCustomReportMessage",[jW],Object.getOwnPropertyDescriptor(YW.prototype,"sendCustomReportMessage"),YW.prototype),bM(YW.prototype,"pickSVCLayer",[UW],Object.getOwnPropertyDescriptor(YW.prototype,"pickSVCLayer"),YW.prototype),bM(YW.prototype,"setRTMConfig",[BW],Object.getOwnPropertyDescriptor(YW.prototype,"setRTMConfig"),YW.prototype),bM(YW.prototype,"enableContentInspect",[FW],Object.getOwnPropertyDescriptor(YW.prototype,"enableContentInspect"),YW.prototype),bM(YW.prototype,"disableContentInspect",[VW],Object.getOwnPropertyDescriptor(YW.prototype,"disableContentInspect"),YW.prototype),bM(YW.prototype,"setImageModeration",[WW],Object.getOwnPropertyDescriptor(YW.prototype,"setImageModeration"),YW.prototype),bM(YW.prototype,"setP2PTransport",[HW],Object.getOwnPropertyDescriptor(YW.prototype,"setP2PTransport"),YW.prototype),bM(YW.prototype,"getJoinChannelServiceRecords",[zW],Object.getOwnPropertyDescriptor(YW.prototype,"getJoinChannelServiceRecords"),YW.prototype),bM(YW.prototype,"setPublishAudioFilterEnabled",[GW],Object.getOwnPropertyDescriptor(YW.prototype,"setPublishAudioFilterEnabled"),YW.prototype),YW);class JW{constructor(e,t){wC(this,"id",0),wC(this,"element",void 0),wC(this,"peerPair",void 0),wC(this,"context",void 0),wC(this,"audioPlayerElement",void 0),wC(this,"audioTrack",void 0),JW.count+=1,this.id=JW.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new rp((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new _N(MI.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new _N(MI.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new _N(MI.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){dN.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}var QW,ZW;wC(JW,"count",0);const $W=window.AudioContext||window.webkitAudioContext,eH=new(QW=vN({report:yN}),bM((ZW=class{constructor(){wC(this,"units",[]),wC(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return dN.debug("the system does not need to process local aec"),-1;this.context||(this.context=new $W);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new JW(e,this.context),this.units.push(t)),t.startEchoCancellation(),dN.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return iI().name!==eI.SAFARI}}).prototype,"processExternalMediaAEC",[QW],Object.getOwnPropertyDescriptor(ZW.prototype,"processExternalMediaAEC"),ZW.prototype),ZW);function tH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rH=window||document;function iH(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!rH)return;const n=Eq._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=e=>{if(!(e&&e.blockedURI&&(Eq.onSecurityPolicyViolation||Eq.getListeners(yj.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;LO("CSP_DETECTED_HOSTNAME_LIST").some((e=>Lr(t).call(t,e)))&&(Eq.onSecurityPolicyViolation&&"function"==typeof Eq.onSecurityPolicyViolation&&Eq.onSecurityPolicyViolation(e),Eq.getListeners(yj.SECURITY_POLICY_VIOLATION).length>0&&Eq.safeEmit(yj.SECURITY_POLICY_VIOLATION,e))};n&&rH.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||Eq.getListeners(yj.SECURITY_POLICY_VIOLATION).length>0)&&rH.addEventListener("securitypolicyviolation",r),Eq._cspEventHandlerPointer=r}var oH=u,sH=BC,aH=RegExp.prototype,cH=function(e){return e===aH||oH(aH,e)?sH(e):e.flags},lH=r(cH);function dH(e){let t=e.length;for(;--t>=0;)e[t]=0}const uH=256,hH=286,pH=30,fH=15,mH=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),gH=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),vH=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),yH=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_H=new Array(576);dH(_H);const EH=new Array(60);dH(EH);const bH=new Array(512);dH(bH);const wH=new Array(256);dH(wH);const SH=new Array(29);dH(SH);const AH=new Array(pH);function CH(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let TH,RH,IH;function xH(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}dH(AH);const OH=e=>e<256?bH[e]:bH[256+(e>>>7)],NH=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},DH=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,NH(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},kH=(e,t,n)=>{DH(e,n[2*t],n[2*t+1])},PH=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},LH=(e,t,n)=>{const r=new Array(16);let i,o,s=0;for(i=1;i<=fH;i++)s=s+n[i-1]<<1,r[i]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=PH(r[t]++,t))}},MH=e=>{let t;for(t=0;t<hH;t++)e.dyn_ltree[2*t]=0;for(t=0;t<pH;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},jH=e=>{e.bi_valid>8?NH(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},UH=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},BH=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&UH(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!UH(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},FH=(e,t,n)=>{let r,i,o,s,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?kH(e,i,t):(o=wH[i],kH(e,o+uH+1,t),s=mH[o],0!==s&&(i-=SH[o],DH(e,i,s)),r--,o=OH(r),kH(e,o,n),s=gH[o],0!==s&&(r-=AH[o],DH(e,r,s)))}while(a<e.sym_next);kH(e,256,t)},VH=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)BH(e,n,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],BH(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,BH(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,d,u,h,p,f,m=0;for(h=0;h<=fH;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],h=n[2*n[2*d+1]+1]+1,h>c&&(h=c,m++),n[2*d+1]=h,d>r||(e.bl_count[h]++,p=0,d>=a&&(p=s[d-a]),f=n[2*d],e.opt_len+=f*(h+p),o&&(e.static_len+=f*(i[2*d+1]+p)));if(0!==m){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(h=c;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--l],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),LH(n,l,e.bl_count)},WH=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<c&&i===s||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4))},HH=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<c&&i===s)){if(a<l)do{kH(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(kH(e,i,e.bl_tree),a--),kH(e,16,e.bl_tree),DH(e,a-3,2)):a<=10?(kH(e,17,e.bl_tree),DH(e,a-3,3)):(kH(e,18,e.bl_tree),DH(e,a-11,7));a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4)}};let zH=!1;const GH=(e,t,n,r)=>{DH(e,0+(r?1:0),3),jH(e),NH(e,n),NH(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var YH=e=>{zH||((()=>{let e,t,n,r,i;const o=new Array(16);for(n=0,r=0;r<28;r++)for(SH[r]=n,e=0;e<1<<mH[r];e++)wH[n++]=r;for(wH[n-1]=r,i=0,r=0;r<16;r++)for(AH[r]=i,e=0;e<1<<gH[r];e++)bH[i++]=r;for(i>>=7;r<pH;r++)for(AH[r]=i<<7,e=0;e<1<<gH[r]-7;e++)bH[256+i++]=r;for(t=0;t<=fH;t++)o[t]=0;for(e=0;e<=143;)_H[2*e+1]=8,e++,o[8]++;for(;e<=255;)_H[2*e+1]=9,e++,o[9]++;for(;e<=279;)_H[2*e+1]=7,e++,o[7]++;for(;e<=287;)_H[2*e+1]=8,e++,o[8]++;for(LH(_H,287,o),e=0;e<pH;e++)EH[2*e+1]=5,EH[2*e]=PH(e,5);TH=new CH(_H,mH,257,hH,fH),RH=new CH(EH,gH,0,pH,fH),IH=new CH(new Array(0),vH,0,19,7)})(),zH=!0),e.l_desc=new xH(e.dyn_ltree,TH),e.d_desc=new xH(e.dyn_dtree,RH),e.bl_desc=new xH(e.bl_tree,IH),e.bi_buf=0,e.bi_valid=0,MH(e)},KH=(e,t,n,r)=>{let i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<uH;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),VH(e,e.l_desc),VH(e,e.d_desc),s=(e=>{let t;for(WH(e,e.dyn_ltree,e.l_desc.max_code),WH(e,e.dyn_dtree,e.d_desc.max_code),VH(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*yH[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?GH(e,t,n,r):4===e.strategy||o===i?(DH(e,2+(r?1:0),3),FH(e,_H,EH)):(DH(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(DH(e,t-257,5),DH(e,n-1,5),DH(e,r-4,4),i=0;i<r;i++)DH(e,e.bl_tree[2*yH[i]+1],3);HH(e,e.dyn_ltree,t-1),HH(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),FH(e,e.dyn_ltree,e.dyn_dtree)),MH(e),r&&jH(e)},qH=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(wH[n]+uH+1)]++,e.dyn_dtree[2*OH(t)]++),e.sym_next===e.sym_end),XH=e=>{DH(e,2,3),kH(e,256,_H),(e=>{16===e.bi_valid?(NH(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},JH={_tr_init:YH,_tr_stored_block:GH,_tr_flush_block:KH,_tr_tally:qH,_tr_align:XH},QH=(e,t,n,r)=>{let i=65535&e,o=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16};const ZH=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var $H=(e,t,n,r)=>{const i=ZH,o=r+n;e^=-1;for(let s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return~e},ez={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tz={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:nz,_tr_stored_block:rz,_tr_flush_block:iz,_tr_tally:oz,_tr_align:sz}=JH,{Z_NO_FLUSH:az,Z_PARTIAL_FLUSH:cz,Z_FULL_FLUSH:lz,Z_FINISH:dz,Z_BLOCK:uz,Z_OK:hz,Z_STREAM_END:pz,Z_STREAM_ERROR:fz,Z_DATA_ERROR:mz,Z_BUF_ERROR:gz,Z_DEFAULT_COMPRESSION:vz,Z_FILTERED:yz,Z_HUFFMAN_ONLY:_z,Z_RLE:Ez,Z_FIXED:bz,Z_DEFAULT_STRATEGY:wz,Z_UNKNOWN:Sz,Z_DEFLATED:Az}=tz,Cz=258,Tz=262,Rz=42,Iz=113,xz=666,Oz=(e,t)=>(e.msg=ez[t],t),Nz=e=>2*e-(e>4?9:0),Dz=e=>{let t=e.length;for(;--t>=0;)e[t]=0},kz=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let Pz=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Lz=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Mz=(e,t)=>{iz(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Lz(e.strm)},jz=(e,t)=>{e.pending_buf[e.pending++]=t},Uz=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Bz=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=QH(e.adler,t,i,n):2===e.state.wrap&&(e.adler=$H(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Fz=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-Tz?e.strstart-(e.w_size-Tz):0,l=e.window,d=e.w_mask,u=e.prev,h=e.strstart+Cz;let p=l[o+s-1],f=l[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+s]===f&&l[n+s-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=Cz-(h-o),o=h-Cz,r>s){if(e.match_start=t,s=r,r>=a)break;p=l[o+s-1],f=l[o+s]}}}while((t=u[t&d])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead},Vz=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Tz)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),kz(e),r+=t),0===e.strm.avail_in)break;if(n=Bz(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Pz(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Pz(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Tz&&0!==e.strm.avail_in)},Wz=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==dz||t===az||n!==r+e.strm.avail_in))break;s=t===dz&&n===r+e.strm.avail_in?1:0,rz(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Lz(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Bz(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==az&&t!==dz&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Bz(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=o||(r||t===dz)&&t!==az&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===dz&&0===e.strm.avail_in&&n===r?1:0,rz(e,e.block_start,n,s),e.block_start+=n,Lz(e.strm)),s?3:1)},Hz=(e,t)=>{let n,r;for(;;){if(e.lookahead<Tz){if(Vz(e),e.lookahead<Tz&&t===az)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Pz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Tz&&(e.match_length=Fz(e,n)),e.match_length>=3)if(r=oz(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Pz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Pz(e,e.ins_h,e.window[e.strstart+1]);else r=oz(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Mz(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===dz?(Mz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Mz(e,!1),0===e.strm.avail_out)?1:2},zz=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Tz){if(Vz(e),e.lookahead<Tz&&t===az)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Pz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Tz&&(e.match_length=Fz(e,n),e.match_length<=5&&(e.strategy===yz||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=oz(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Pz(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Mz(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=oz(e,0,e.window[e.strstart-1]),r&&Mz(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=oz(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===dz?(Mz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Mz(e,!1),0===e.strm.avail_out)?1:2};function Gz(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Yz=[new Gz(0,0,0,0,Wz),new Gz(4,4,8,4,Hz),new Gz(4,5,16,8,Hz),new Gz(4,6,32,32,Hz),new Gz(4,4,16,16,zz),new Gz(8,16,32,32,zz),new Gz(8,16,128,128,zz),new Gz(8,32,128,256,zz),new Gz(32,128,258,1024,zz),new Gz(32,258,258,4096,zz)];function Kz(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Az,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Dz(this.dyn_ltree),Dz(this.dyn_dtree),Dz(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Dz(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Dz(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const qz=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Rz&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Iz&&t.status!==xz?1:0},Xz=e=>{if(qz(e))return Oz(e,fz);e.total_in=e.total_out=0,e.data_type=Sz;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Rz:Iz,e.adler=2===t.wrap?0:1,t.last_flush=-2,nz(t),hz},Jz=e=>{const t=Xz(e);return t===hz&&(e=>{e.window_size=2*e.w_size,Dz(e.head),e.max_lazy_match=Yz[e.level].max_lazy,e.good_match=Yz[e.level].good_length,e.nice_match=Yz[e.level].nice_length,e.max_chain_length=Yz[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Qz=(e,t,n,r,i,o)=>{if(!e)return fz;let s=1;if(t===vz&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==Az||r<8||r>15||t<0||t>9||o<0||o>bz||8===r&&1!==s)return Oz(e,fz);8===r&&(r=9);const a=new Kz;return e.state=a,a.strm=e,a.status=Rz,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,Jz(e)};var Zz=(e,t)=>{if(qz(e)||t>uz||t<0)return e?Oz(e,fz):fz;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===xz&&t!==dz)return Oz(e,0===e.avail_out?gz:fz);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Lz(e),0===e.avail_out)return n.last_flush=-1,hz}else if(0===e.avail_in&&Nz(t)<=Nz(r)&&t!==dz)return Oz(e,gz);if(n.status===xz&&0!==e.avail_in)return Oz(e,gz);if(n.status===Rz&&0===n.wrap&&(n.status=Iz),n.status===Rz){let t=Az+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=_z||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Uz(n,t),0!==n.strstart&&(Uz(n,e.adler>>>16),Uz(n,65535&e.adler)),e.adler=1,n.status=Iz,Lz(e),0!==n.pending)return n.last_flush=-1,hz}if(57===n.status)if(e.adler=0,jz(n,31),jz(n,139),jz(n,8),n.gzhead)jz(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),jz(n,255&n.gzhead.time),jz(n,n.gzhead.time>>8&255),jz(n,n.gzhead.time>>16&255),jz(n,n.gzhead.time>>24&255),jz(n,9===n.level?2:n.strategy>=_z||n.level<2?4:0),jz(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(jz(n,255&n.gzhead.extra.length),jz(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=$H(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(jz(n,0),jz(n,0),jz(n,0),jz(n,0),jz(n,0),jz(n,9===n.level?2:n.strategy>=_z||n.level<2?4:0),jz(n,3),n.status=Iz,Lz(e),0!==n.pending)return n.last_flush=-1,hz;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=$H(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,Lz(e),0!==n.pending)return n.last_flush=-1,hz;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=$H(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=$H(e.adler,n.pending_buf,n.pending-r,r)),Lz(e),0!==n.pending)return n.last_flush=-1,hz;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,jz(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=$H(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=$H(e.adler,n.pending_buf,n.pending-r,r)),Lz(e),0!==n.pending)return n.last_flush=-1,hz;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,jz(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=$H(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Lz(e),0!==n.pending))return n.last_flush=-1,hz;jz(n,255&e.adler),jz(n,e.adler>>8&255),e.adler=0}if(n.status=Iz,Lz(e),0!==n.pending)return n.last_flush=-1,hz}if(0!==e.avail_in||0!==n.lookahead||t!==az&&n.status!==xz){let r=0===n.level?Wz(n,t):n.strategy===_z?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Vz(e),0===e.lookahead)){if(t===az)return 1;break}if(e.match_length=0,n=oz(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Mz(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===dz?(Mz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Mz(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Ez?((e,t)=>{let n,r,i,o;const s=e.window;for(;;){if(e.lookahead<=Cz){if(Vz(e),e.lookahead<=Cz&&t===az)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+Cz;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=Cz-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=oz(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=oz(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Mz(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===dz?(Mz(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Mz(e,!1),0===e.strm.avail_out)?1:2})(n,t):Yz[n.level].func(n,t);if(3!==r&&4!==r||(n.status=xz),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),hz;if(2===r&&(t===cz?sz(n):t!==uz&&(rz(n,0,0,!1),t===lz&&(Dz(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Lz(e),0===e.avail_out))return n.last_flush=-1,hz}return t!==dz?hz:n.wrap<=0?pz:(2===n.wrap?(jz(n,255&e.adler),jz(n,e.adler>>8&255),jz(n,e.adler>>16&255),jz(n,e.adler>>24&255),jz(n,255&e.total_in),jz(n,e.total_in>>8&255),jz(n,e.total_in>>16&255),jz(n,e.total_in>>24&255)):(Uz(n,e.adler>>>16),Uz(n,65535&e.adler)),Lz(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?hz:pz)},$z=(e,t)=>{let n=t.length;if(qz(e))return fz;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==Rz||r.lookahead)return fz;if(1===i&&(e.adler=QH(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Dz(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Vz(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Pz(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Vz(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,r.wrap=i,hz},eG={deflateInit:(e,t)=>Qz(e,t,Az,15,8,wz),deflateInit2:Qz,deflateReset:Jz,deflateResetKeep:Xz,deflateSetHeader:(e,t)=>qz(e)||2!==e.state.wrap?fz:(e.state.gzhead=t,hz),deflate:Zz,deflateEnd:e=>{if(qz(e))return fz;const t=e.state.status;return e.state=null,t===Iz?Oz(e,mz):hz},deflateSetDictionary:$z,deflateInfo:"pako deflate (from Nodeca project)"};const tG=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var nG=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)tG(n,t)&&(e[t]=n[t])}}return e},rG=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let t=e[r];n.set(t,i),i+=t.length}return n};let iG=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){iG=!1}const oG=new Uint8Array(256);for(let n=0;n<256;n++)oG[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;oG[254]=oG[254]=1;var sG=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},aG=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){o[i++]=t;continue}let s=oG[t];if(s>4)o[i++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&iG)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(o,i)},cG=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+oG[e[n]]>t?n:t},lG=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const dG=Object.prototype.toString,{Z_NO_FLUSH:uG,Z_SYNC_FLUSH:hG,Z_FULL_FLUSH:pG,Z_FINISH:fG,Z_OK:mG,Z_STREAM_END:gG,Z_DEFAULT_COMPRESSION:vG,Z_DEFAULT_STRATEGY:yG,Z_DEFLATED:_G}=tz;function EG(e){this.options=nG({level:vG,method:_G,chunkSize:16384,windowBits:15,memLevel:8,strategy:yG},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lG,this.strm.avail_out=0;let n=eG.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==mG)throw new Error(ez[n]);if(t.header&&eG.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?sG(t.dictionary):"[object ArrayBuffer]"===dG.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=eG.deflateSetDictionary(this.strm,e),n!==mG)throw new Error(ez[n]);this._dict_set=!0}}function bG(e,t){const n=new EG(t);if(n.push(e,!0),n.err)throw n.msg||ez[n.err];return n.result}EG.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?fG:uG,"string"==typeof e?n.input=sG(e):"[object ArrayBuffer]"===dG.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===hG||o===pG)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=eG.deflate(n,o),i===gG)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=eG.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===mG;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},EG.prototype.onData=function(e){this.chunks.push(e)},EG.prototype.onEnd=function(e){e===mG&&(this.result=rG(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var wG={Deflate:EG,deflate:bG,deflateRaw:function(e,t){return(t=t||{}).raw=!0,bG(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,bG(e,t)},constants:tz};const SG=16209;var AG=function(e,t){let n,r,i,o,s,a,c,l,d,u,h,p,f,m,g,v,y,_,E,b,w,S,A,C;const T=e.state;n=e.next_in,A=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=T.dmax,c=T.wsize,l=T.whave,d=T.wnext,u=T.window,h=T.hold,p=T.bits,f=T.lencode,m=T.distcode,g=(1<<T.lenbits)-1,v=(1<<T.distbits)-1;e:do{p<15&&(h+=A[n++]<<p,p+=8,h+=A[n++]<<p,p+=8),y=f[h&g];t:for(;;){if(_=y>>>24,h>>>=_,p-=_,_=y>>>16&255,0===_)C[i++]=65535&y;else{if(!(16&_)){if(64&_){if(32&_){T.mode=16191;break e}e.msg="invalid literal/length code",T.mode=SG;break e}y=f[(65535&y)+(h&(1<<_)-1)];continue t}for(E=65535&y,_&=15,_&&(p<_&&(h+=A[n++]<<p,p+=8),E+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=A[n++]<<p,p+=8,h+=A[n++]<<p,p+=8),y=m[h&v];;){if(_=y>>>24,h>>>=_,p-=_,_=y>>>16&255,16&_){if(b=65535&y,_&=15,p<_&&(h+=A[n++]<<p,p+=8,p<_&&(h+=A[n++]<<p,p+=8)),b+=h&(1<<_)-1,b>a){e.msg="invalid distance too far back",T.mode=SG;break e}if(h>>>=_,p-=_,_=i-o,b>_){if(_=b-_,_>l&&T.sane){e.msg="invalid distance too far back",T.mode=SG;break e}if(w=0,S=u,0===d){if(w+=c-_,_<E){E-=_;do{C[i++]=u[w++]}while(--_);w=i-b,S=C}}else if(d<_){if(w+=c+d-_,_-=d,_<E){E-=_;do{C[i++]=u[w++]}while(--_);if(w=0,d<E){_=d,E-=_;do{C[i++]=u[w++]}while(--_);w=i-b,S=C}}}else if(w+=d-_,_<E){E-=_;do{C[i++]=u[w++]}while(--_);w=i-b,S=C}for(;E>2;)C[i++]=S[w++],C[i++]=S[w++],C[i++]=S[w++],E-=3;E&&(C[i++]=S[w++],E>1&&(C[i++]=S[w++]))}else{w=i-b;do{C[i++]=C[w++],C[i++]=C[w++],C[i++]=C[w++],E-=3}while(E>2);E&&(C[i++]=C[w++],E>1&&(C[i++]=C[w++]))}break}if(64&_){e.msg="invalid distance code",T.mode=SG;break e}y=m[(65535&y)+(h&(1<<_)-1)]}}break}}while(n<r&&i<s);E=p>>3,n-=E,p-=E<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),T.hold=h,T.bits=p};const CG=15,TG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),RG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),IG=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xG=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var OG=(e,t,n,r,i,o,s,a)=>{const c=a.bits;let l,d,u,h,p,f,m=0,g=0,v=0,y=0,_=0,E=0,b=0,w=0,S=0,A=0,C=null;const T=new Uint16Array(16),R=new Uint16Array(16);let I,x,O,N=null;for(m=0;m<=CG;m++)T[m]=0;for(g=0;g<r;g++)T[t[n+g]]++;for(_=c,y=CG;y>=1&&0===T[y];y--);if(_>y&&(_=y),0===y)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(v=1;v<y&&0===T[v];v++);for(_<v&&(_=v),w=1,m=1;m<=CG;m++)if(w<<=1,w-=T[m],w<0)return-1;if(w>0&&(0===e||1!==y))return-1;for(R[1]=0,m=1;m<CG;m++)R[m+1]=R[m]+T[m];for(g=0;g<r;g++)0!==t[n+g]&&(s[R[t[n+g]]++]=g);if(0===e?(C=N=s,f=20):1===e?(C=TG,N=RG,f=257):(C=IG,N=xG,f=0),A=0,g=0,m=v,p=o,E=_,b=0,u=-1,S=1<<_,h=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){I=m-b,s[g]+1<f?(x=0,O=s[g]):s[g]>=f?(x=N[s[g]-f],O=C[s[g]-f]):(x=96,O=0),l=1<<m-b,d=1<<E,v=d;do{d-=l,i[p+(A>>b)+d]=I<<24|x<<16|O}while(0!==d);for(l=1<<m-1;A&l;)l>>=1;if(0!==l?(A&=l-1,A+=l):A=0,g++,0==--T[m]){if(m===y)break;m=t[n+s[g]]}if(m>_&&(A&h)!==u){for(0===b&&(b=_),p+=v,E=m-b,w=1<<E;E+b<y&&(w-=T[E+b],!(w<=0));)E++,w<<=1;if(S+=1<<E,1===e&&S>852||2===e&&S>592)return 1;u=A&h,i[u]=_<<24|E<<16|p-o}}return 0!==A&&(i[p+A]=m-b<<24|64<<16),a.bits=_,0};const{Z_FINISH:NG,Z_BLOCK:DG,Z_TREES:kG,Z_OK:PG,Z_STREAM_END:LG,Z_NEED_DICT:MG,Z_STREAM_ERROR:jG,Z_DATA_ERROR:UG,Z_MEM_ERROR:BG,Z_BUF_ERROR:FG,Z_DEFLATED:VG}=tz,WG=16180,HG=16190,zG=16191,GG=16192,YG=16194,KG=16199,qG=16200,XG=16206,JG=16209,QG=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function ZG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $G=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<WG||t.mode>16211?1:0},eY=e=>{if($G(e))return jG;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=WG,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,PG},tY=e=>{if($G(e))return jG;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,eY(e)},nY=(e,t)=>{let n;if($G(e))return jG;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?jG:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,tY(e))},rY=(e,t)=>{if(!e)return jG;const n=new ZG;e.state=n,n.strm=e,n.window=null,n.mode=WG;const r=nY(e,t);return r!==PG&&(e.state=null),r};let iY,oY,sY=!0;const aY=e=>{if(sY){iY=new Int32Array(512),oY=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(OG(1,e.lens,0,288,iY,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;OG(2,e.lens,0,32,oY,0,e.work,{bits:5}),sY=!1}e.lencode=iY,e.lenbits=9,e.distcode=oY,e.distbits=5},cY=(e,t,n,r)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var lY=(e,t)=>{let n,r,i,o,s,a,c,l,d,u,h,p,f,m,g,v,y,_,E,b,w,S,A=0;const C=new Uint8Array(4);let T,R;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($G(e)||!e.output||!e.input&&0!==e.avail_in)return jG;n=e.state,n.mode===zG&&(n.mode=GG),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,u=a,h=c,S=PG;e:for(;;)switch(n.mode){case WG:if(0===n.wrap){n.mode=GG;break}for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&l,C[1]=l>>>8&255,n.check=$H(n.check,C,2,0),l=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=JG;break}if((15&l)!==VG){e.msg="unknown compression method",n.mode=JG;break}if(l>>>=4,d-=4,w=8+(15&l),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=JG;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:zG,l=0,d=0;break;case 16181:for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(n.flags=l,(255&lH(n))!==VG){e.msg="unknown compression method",n.mode=JG;break}if(57344&lH(n)){e.msg="unknown header flags set",n.mode=JG;break}n.head&&(n.head.text=l>>8&1),512&lH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=$H(n.check,C,2,0)),l=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.head&&(n.head.time=l),512&lH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,n.check=$H(n.check,C,4,0)),l=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&lH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=$H(n.check,C,2,0)),l=0,d=0,n.mode=16184;case 16184:if(1024&lH(n)){for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.length=l,n.head&&(n.head.extra_len=l),512&lH(n)&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=$H(n.check,C,2,0)),l=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&lH(n)&&(p=n.length,p>a&&(p=a),p&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+p),w)),512&lH(n)&&4&n.wrap&&(n.check=$H(n.check,r,p,o)),a-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&lH(n)){if(0===a)break e;p=0;do{w=r[o+p++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&p<a);if(512&lH(n)&&4&n.wrap&&(n.check=$H(n.check,r,p,o)),a-=p,o+=p,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&lH(n)){if(0===a)break e;p=0;do{w=r[o+p++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&p<a);if(512&lH(n)&&4&n.wrap&&(n.check=$H(n.check,r,p,o)),a-=p,o+=p,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&lH(n)){for(;d<16;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=JG;break}l=0,d=0}n.head&&(n.head.hcrc=lH(n)>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=zG;break;case 16189:for(;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}e.adler=n.check=QG(l),l=0,d=0,n.mode=HG;case HG:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,MG;e.adler=n.check=1,n.mode=zG;case zG:if(t===DG||t===kG)break e;case GG:if(n.last){l>>>=7&d,d-=7&d,n.mode=XG;break}for(;d<3;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}switch(n.last=1&l,l>>>=1,d-=1,3&l){case 0:n.mode=16193;break;case 1:if(aY(n),n.mode=KG,t===kG){l>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=JG}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=JG;break}if(n.length=65535&l,l=0,d=0,n.mode=YG,t===kG)break e;case YG:n.mode=16195;case 16195:if(p=n.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,n.length-=p;break}n.mode=zG;break;case 16196:for(;d<14;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(n.nlen=257+(31&l),l>>>=5,d-=5,n.ndist=1+(31&l),l>>>=5,d-=5,n.ncode=4+(15&l),l>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=JG;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.lens[I[n.have++]]=7&l,l>>>=3,d-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},S=OG(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,S){e.msg="invalid code lengths set",n.mode=JG;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[l&(1<<n.lenbits)-1],g=A>>>24,v=A>>>16&255,y=65535&A,!(g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(y<16)l>>>=g,d-=g,n.lens[n.have++]=y;else{if(16===y){for(R=g+2;d<R;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(l>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=JG;break}w=n.lens[n.have-1],p=3+(3&l),l>>>=2,d-=2}else if(17===y){for(R=g+3;d<R;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=g,d-=g,w=0,p=3+(7&l),l>>>=3,d-=3}else{for(R=g+7;d<R;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=g,d-=g,w=0,p=11+(127&l),l>>>=7,d-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=JG;break}for(;p--;)n.lens[n.have++]=w}}if(n.mode===JG)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=JG;break}if(n.lenbits=9,T={bits:n.lenbits},S=OG(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,S){e.msg="invalid literal/lengths set",n.mode=JG;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},S=OG(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,S){e.msg="invalid distances set",n.mode=JG;break}if(n.mode=KG,t===kG)break e;case KG:n.mode=qG;case qG:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,AG(e,h),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,n.mode===zG&&(n.back=-1);break}for(n.back=0;A=n.lencode[l&(1<<n.lenbits)-1],g=A>>>24,v=A>>>16&255,y=65535&A,!(g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(v&&!(240&v)){for(_=g,E=v,b=y;A=n.lencode[b+((l&(1<<_+E)-1)>>_)],g=A>>>24,v=A>>>16&255,y=65535&A,!(_+g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=_,d-=_,n.back+=_}if(l>>>=g,d-=g,n.back+=g,n.length=y,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=zG;break}if(64&v){e.msg="invalid literal/length code",n.mode=JG;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(R=n.extra;d<R;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;A=n.distcode[l&(1<<n.distbits)-1],g=A>>>24,v=A>>>16&255,y=65535&A,!(g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(!(240&v)){for(_=g,E=v,b=y;A=n.distcode[b+((l&(1<<_+E)-1)>>_)],g=A>>>24,v=A>>>16&255,y=65535&A,!(_+g<=d);){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}l>>>=_,d-=_,n.back+=_}if(l>>>=g,d-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=JG;break}n.offset=y,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(R=n.extra;d<R;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=JG;break}n.mode=16204;case 16204:if(0===c)break e;if(p=h-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=JG;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,f=s-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{i[s++]=m[f++]}while(--p);0===n.length&&(n.mode=qG);break;case 16205:if(0===c)break e;i[s++]=n.length,c--,n.mode=qG;break;case XG:if(n.wrap){for(;d<32;){if(0===a)break e;a--,l|=r[o++]<<d,d+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=lH(n)?$H(n.check,i,h,s-h):QH(n.check,i,h,s-h)),h=c,4&n.wrap&&(lH(n)?l:QG(l))!==n.check){e.msg="incorrect data check",n.mode=JG;break}l=0,d=0}n.mode=16207;case 16207:if(n.wrap&&lH(n)){for(;d<32;){if(0===a)break e;a--,l+=r[o++]<<d,d+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=JG;break}l=0,d=0}n.mode=16208;case 16208:S=LG;break e;case JG:S=UG;break e;case 16210:return BG;default:return jG}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<JG&&(n.mode<XG||t!==NG))&&cY(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=lH(n)?$H(n.check,i,h,e.next_out-h):QH(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===zG?128:0)+(n.mode===KG||n.mode===YG?256:0),(0===u&&0===h||t===NG)&&S===PG&&(S=FG),S},dY={inflateReset:tY,inflateReset2:nY,inflateResetKeep:eY,inflateInit:e=>rY(e,15),inflateInit2:rY,inflate:lY,inflateEnd:e=>{if($G(e))return jG;let t=e.state;return t.window&&(t.window=null),e.state=null,PG},inflateGetHeader:(e,t)=>{if($G(e))return jG;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,PG):jG},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,o;return $G(e)?jG:(r=e.state,0!==r.wrap&&r.mode!==HG?jG:r.mode===HG&&(i=1,i=QH(i,t,n,0),i!==r.check)?UG:(o=cY(e,t,n,n),o?(r.mode=16210,BG):(r.havedict=1,PG)))},inflateInfo:"pako inflate (from Nodeca project)"},uY=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const hY=Object.prototype.toString,{Z_NO_FLUSH:pY,Z_FINISH:fY,Z_OK:mY,Z_STREAM_END:gY,Z_NEED_DICT:vY,Z_STREAM_ERROR:yY,Z_DATA_ERROR:_Y,Z_MEM_ERROR:EY}=tz;function bY(e){this.options=nG({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lG,this.strm.avail_out=0;let n=dY.inflateInit2(this.strm,t.windowBits);if(n!==mY)throw new Error(ez[n]);if(this.header=new uY,dY.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=sG(t.dictionary):"[object ArrayBuffer]"===hY.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=dY.inflateSetDictionary(this.strm,t.dictionary),n!==mY)))throw new Error(ez[n])}function wY(e,t){const n=new bY(t);if(n.push(e),n.err)throw n.msg||ez[n.err];return n.result}bY.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?fY:pY,"[object ArrayBuffer]"===hY.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=dY.inflate(n,s),o===vY&&i&&(o=dY.inflateSetDictionary(n,i),o===mY?o=dY.inflate(n,s):o===_Y&&(o=vY));n.avail_in>0&&o===gY&&n.state.wrap>0&&0!==e[n.next_in];)dY.inflateReset(n),o=dY.inflate(n,s);switch(o){case yY:case _Y:case vY:case EY:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===gY))if("string"===this.options.to){let e=cG(n.output,n.next_out),t=n.next_out-e,i=aG(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==mY||0!==a){if(o===gY)return o=dY.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},bY.prototype.onData=function(e){this.chunks.push(e)},bY.prototype.onEnd=function(e){e===mY&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=rG(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var SY={Inflate:bY,inflate:wY,inflateRaw:function(e,t){return(t=t||{}).raw=!0,wY(e,t)},ungzip:wY,constants:tz};const{Deflate:AY,deflate:CY,deflateRaw:TY,gzip:RY}=wG,{Inflate:IY,inflate:xY,inflateRaw:OY,ungzip:NY}=SY;var DY=CY,kY=xY,PY=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(PY||{});class LY{constructor(){wC(this,"_sequence",0),wC(this,"_startTime",Date.now()),wC(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const r={id:0,length:4,data:n.buffer},i={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=i,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;LO("SHOW_DATASTREAM2_LOG")&&dN.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),r=new Uint8Array(n),i=new DataView(n);let o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){const e=this.serializeExtension(t.extension);r.set(new Uint8Array(e),o),o+=e.byteLength}if(r.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const r=t.getUint16(n,!0);n+=2;const i={length:16383&r,reserved:(16384&r)>>14,extension:(32768&r)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let o,s;if(n+=4,LO("SHOW_DATASTREAM2_LOG")&&dN.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(n,!0),n+=2,i.extension){s=this.deserializeExtension(e.slice(n)),n+=2+s.length,o=e.slice(n);let t=!1;if(s.datas.length>0){const e=s.datas.find((e=>0===e.id));e&&(t=!(1&~new DataView(e.data).getUint32(0,!0)))}o=t?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){const{profile:t,length:n,datas:r}=e,i=new ArrayBuffer(n+2),o=new Uint8Array(i),s=new DataView(i);let a=0;if(s.setUint8(a++,t),s.setUint8(a++,n),r.forEach((e=>{t?(s.setUint8(a++,e.id),s.setUint8(a++,e.length),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength):(s.setUint8(a++,e.id|e.length<<4),o.set(new Uint8Array(e.data),a),a+=e.data.byteLength)})),a!==n+2)throw Error("serialize extension error, is ".concat(a,"!==").concat(n+2));return i}deserializeExtension(e){const t=new DataView(e);let n=0;const r=t.getUint8(n);n++;const i=t.getUint8(n);n++;const o=r===PY.TWO_BYTE,s=[],a=new DataView(e,2);let c=0;for(;c<i;){let e=0,t=0,n=new ArrayBuffer(0);o?(e=a.getUint8(c),c++,t=a.getUint8(c),c++):(e=15&a.getUint8(c),t=a.getUint8(c)>>4,c++),t>0&&(n=a.buffer.slice(c+2,c+2+t),c+=n.byteLength),s.push({id:e,length:t,data:n})}if(c!==i)throw Error("parse error");return{profile:r,length:i,datas:s}}decompress(e){return kY(new Uint8Array(e))}compress(e){return DY(new Uint8Array(e))}}const MY={name:"DataStream",create:(e,t)=>{const n=t?new QP(e):new ZP(e);return n.useDataStream(new LY),n}};class jY extends ZI{constructor(e,t,n){super(),wC(this,"ws",void 0),wC(this,"requestId",1),wC(this,"heartBeatTimer",void 0),wC(this,"joinInfo",void 0),wC(this,"clientId",void 0),wC(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),wC(this,"onClose",(e=>{this.emit("close"),this.dispose()})),wC(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new Wj("cross-channel-".concat(this.clientId),n),this.ws.on(kM.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(kM.CONNECTED,this.onOpen),this.ws.on(kM.ON_MESSAGE,this.onMessage),this.ws.on(kM.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new rp(((t,n)=>{const r=window.setTimeout((()=>{n(new _N(MI.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new _N(MI.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new _N(MI.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new _N(MI.WS_DISCONNECT);const t=()=>new rp(((e,t)=>{this.ws.once(kM.CLOSED,(()=>t(new _N(MI.WS_ABORT)))),this.ws.once(kM.CONNECTED,e)}));"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),r=new rp(((e,t)=>{const r=()=>{t(new _N(MI.WS_ABORT))};this.ws.once(kM.RECONNECTING,r),this.ws.once(kM.CLOSED,r),this.once("req_".concat(n),e),Dx(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(kM.RECONNECTING,r),this.ws.off(kM.CLOSED,r),t(new _N(MI.TIMEOUT,"cross channel ws request timeout"))}))})),i=await r;if(!i||200!==i.code)throw new _N(MI.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(kM.REQUEST_NEW_URLS),this.ws.on(kM.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class UY extends ZI{set state(e){e!==this._state&&(e!==KM.RELAY_STATE_FAILURE&&(this.errorCode=qM.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,r,i){super(),wC(this,"joinInfo",void 0),wC(this,"sid",void 0),wC(this,"clientId",void 0),wC(this,"cancelToken",KR.CancelToken.source()),wC(this,"workerToken",void 0),wC(this,"requestId",0),wC(this,"signal",void 0),wC(this,"prevChannelMediaConfig",void 0),wC(this,"httpRetryConfig",void 0),wC(this,"_resolution",void 0),wC(this,"_state",KM.RELAY_STATE_IDLE),wC(this,"errorCode",qM.RELAY_OK),wC(this,"onStatus",(e=>{dN.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",YM.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",YM.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=qM.SRC_TOKEN_EXPIRED,this.state=KM.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=qM.DEST_TOKEN_EXPIRED,this.state=KM.RELAY_STATE_FAILURE))})),wC(this,"onReconnect",(async()=>{dN.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",YM.NETWORK_DISCONNECTED),this.state=KM.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==KM.RELAY_STATE_IDLE&&(dN.error("auto restart channel media relay failed",e.toString()),this.errorCode=qM.SERVER_CONNECTION_LOST,this.state=KM.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=Px(),this.signal=new jY(this.joinInfo,this.clientId,n),this.httpRetryConfig=r,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==KM.RELAY_STATE_IDLE)throw new _N(MI.INVALID_OPERATION);this.state=KM.RELAY_STATE_CONNECTING,await this.connect(),dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new _N(MI.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new _N(MI.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new _N(MI.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==KM.RELAY_STATE_RUNNING)throw new _N(MI.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==KM.RELAY_STATE_RUNNING)throw new _N(MI.INVALID_OPERATION);const t=this.genMessage(GM.SetVideoProfile);await this.signal.request(t),dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),dN.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=KM.RELAY_STATE_IDLE,this.dispose()}dispose(){dN.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=KR.CancelToken.source(),this.state=KM.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await TB(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",YM.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(GM.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(GM.SetSdkProfile,e);await this.signal.request(n),dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(GM.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",YM.PACKET_JOINED_SRC_CHANNEL),dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const i=this.genMessage(GM.SetSourceUserId,e);await this.signal.request(i),dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(GM.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",YM.PACKET_JOINED_DEST_CHANNEL),dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(GM.StartPacketTransfer,e);await this.signal.request(s),this.emit("event",YM.PACKET_SENT_TO_DEST_CHANNEL),this.state=KM.RELAY_STATE_RUNNING,dN.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(GM.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",YM.PACKET_UPDATE_DEST_CHANNEL),dN.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(GM.StopPacketTransfer);await this.signal.request(e),dN.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],i=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:CO,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.23.1"===o.sdkVersion&&(o.sdkVersion="0.0.1");let s=null,a=null;switch(e){case GM.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case GM.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new _N(MI.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case GM.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new _N(MI.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:a.uid+""},o;case GM.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new _N(MI.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},o;case GM.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case GM.Reconnect:return o.clientRequest={command:"Reconnect"},o;case GM.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case GM.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new _N(MI.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},o;case GM.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}}const BY={name:"ChannelMediaRelay",create:function(e){return new UY(e.joinInfo,e.clientId,e.websocketRetryConfig||Kx,e.httpRetryConfig||Kx,e.resolution)}};function FY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FY(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class WY extends ZI{constructor(e,t,n,r){super(),wC(this,"spec",void 0),wC(this,"token",void 0),wC(this,"websocket",void 0),wC(this,"pingpongTimer",void 0),wC(this,"reconnectMode","retry"),wC(this,"serviceMode",void 0),wC(this,"reqId",0),wC(this,"commandReqId",0),wC(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),wC(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):(yN.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===MM.TRANSCODE?1:2}),this.emit(VM.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new Wj("live-streaming",n),this.websocket.on(kM.CONNECTED,this.handleWebSocketOpen),this.websocket.on(kM.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(kM.REQUEST_NEW_URLS,((e,t)=>{px(this,VM.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(kM.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new _N(MI.UNEXPECTED_ERROR);const s=VY({command:e,sdkVersion:"4.23.1"===CO?"0.0.1":CO,seq:o,requestId:o,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new _N(MI.WS_DISCONNECT);const a=()=>new rp(((e,t)=>{this.websocket.once(kM.CLOSED,(()=>t(new _N(MI.WS_ABORT)))),this.websocket.once(kM.CONNECTED,e)}));"connected"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new rp(((e,t)=>{const n=()=>{t(new _N(MI.WS_ABORT))};this.websocket.once(kM.RECONNECTING,n),this.websocket.once(kM.CLOSED,n),this.once("@".concat(o,"-").concat(this.spec.sid),(t=>{e(t)}))}));r&&yN.workerEvent(this.spec.sid,VY(VY({},r),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const l=Date.now();this.websocket.sendMessage(s);let d=null;try{d=await c}catch(r){if("closed"===this.websocket.state)throw r;return await a(),await this.request(e,t,n)}return r&&yN.workerEvent(this.spec.sid,VY(VY({},r),{},{requestId:i,actionType:"response",payload:JSON.stringify(d.serverResponse),serverCode:d.code,success:200===d.code,responseTime:Date.now()-l})),200!==d.code&&this.handleResponseError(d),d}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.23.1"===CO?"0.0.1":CO;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case HM.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void dN.warning("live stream response already exists stream");case HM.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case HM.LIVE_STREAM_RESPONSE_BAD_STREAM:case HM.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new _N(MI.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case HM.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command)return;throw new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case HM.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new _N(MI.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case HM.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new _N(MI.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(VM.WARNING,t,e.serverResponse.url)}case HM.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new _N(MI.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(VM.WARNING,t,e.serverResponse.url)}case HM.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case HM.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new _N(MI.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case HM.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new _N(MI.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(VM.WARNING,t,e.serverResponse.url)}case HM.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case HM.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case HM.LIVE_STREAM_RESPONSE_WORKER_LOST:case HM.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command)return;throw new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case HM.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case HM.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case HM.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case HM.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case HM.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new _N(MI.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(Lx)}),6e3)}}function HY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HY(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class GY extends ZI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kx,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kx;super(),wC(this,"onLiveStreamWarning",void 0),wC(this,"onLiveStreamError",void 0),wC(this,"spec",void 0),wC(this,"retryTimeout",1e4),wC(this,"connection",void 0),wC(this,"httpRetryConfig",void 0),wC(this,"wsRetryConfig",void 0),wC(this,"streamingTasks",new Map),wC(this,"isStartingStreamingTask",!1),wC(this,"taskMutex",new Gx("live-streaming")),wC(this,"cancelToken",KR.CancelToken.source()),wC(this,"transcodingConfig",void 0),wC(this,"uapResponse",void 0),wC(this,"lastTaskId",1),wC(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=zY(zY({},FM),e);66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(dN.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>zY(zY(zY({},jM),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){zI(e.width)||FI(e.width,"config.width",0,1e4),zI(e.height)||FI(e.height,"config.height",0,1e4),zI(e.videoBitrate)||FI(e.videoBitrate,"config.videoBitrate",1,1e6),zI(e.videoFrameRate)||FI(e.videoFrameRate,"config.videoFrameRate"),zI(e.lowLatency)||UI(e.lowLatency,"config.lowLatency"),zI(e.audioSampleRate)||BI(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),zI(e.audioBitrate)||FI(e.audioBitrate,"config.audioBitrate",1,128),zI(e.audioChannels)||BI(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),zI(e.videoGop)||FI(e.videoGop,"config.videoGop"),zI(e.videoCodecProfile)||BI(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),zI(e.userCount)||FI(e.userCount,"config.userCount",0,17),zI(e.backgroundColor)||FI(e.backgroundColor,"config.backgroundColor",0,16777215),zI(e.userConfigExtraInfo)||WI(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!zI(e.transcodingUsers)&&(HI(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach(((e,t)=>{LM(e.uid),zI(e.x)||FI(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),zI(e.y)||FI(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),zI(e.width)||FI(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),zI(e.height)||FI(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),zI(e.zOrder)||FI(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),zI(e.alpha)||FI(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),zI(e.watermark)||BM(e.watermark,"watermark"),zI(e.backgroundImage)||BM(e.backgroundImage,"backgroundImage"),e.images&&!zI(e.images)&&(HI(e.images,"config.images"),e.images.forEach(((e,t)=>{BM(e,"images[".concat(t,"]"))})))}(t);const n=[];t.images&&n.push(...t.images.map((e=>zY(zY(zY({},UM),e),{},{zOrder:255})))),t.backgroundImage&&(n.push(zY(zY(zY({},UM),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(n.push(zY(zY(zY({},UM),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=n,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>zY({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const r=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?rp.resolve(e.uid):bB(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await rp.all(r)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var i;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(hp(i=this.streamingTasks).call(i)).map((e=>e.taskId)).join("#")});dN.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(e){if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((t=>{dN.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then((()=>{dN.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((e=>{dN.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)}))}))}}async startLiveStreamingTask(e,t,n){if(!this.transcodingConfig&&t===MM.TRANSCODE)throw new _N(MI.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const r={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};dN.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const i=await this.taskMutex.lock();if(!this.connection&&n)return void i();if(this.streamingTasks.get(e)&&!n)return i(),new _N(MI.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw i(),e}switch(t){case MM.TRANSCODE:r.transcodingConfig=zY({},this.transcodingConfig);case MM.RAW:}this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const o=this.lastTaskId++;try{const s=new rp(((t,r)=>{Dx(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),a=await rp.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===MM.TRANSCODE?1:2,requestByUser:!n,tid:o.toString()}),s]);this.isStartingStreamingTask=!1,dN.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(a.code)),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:o}),i()}catch(r){if(i(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}stopLiveStreamingTask(e){return new rp(((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new _N(MI.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const i=r.mode;r.abortTask=()=>{dN.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===MM.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{dN.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&(this.connection&&this.connection.close(),this.connection=void 0),t()})).catch(n)}))}resetAllTask(){var e;const t=Array.from(hp(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=KR.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new _N(MI.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await px(this,WM.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new WY(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(VM.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(VM.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(VM.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new _N(MI.UNEXPECTED_ERROR,"can not get new live streaming address list"));px(this,WM.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case HM.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case HM.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case HM.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case HM.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new _N(MI.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return dN.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case HM.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new _N(MI.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case HM.LIVE_STREAM_RESPONSE_WORKER_LOST:case HM.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(hp(i=this.streamingTasks).call(i));for(const n of t)n.abortTask?n.abortTask():(dN.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new _N(MI.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{dN.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{dN.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}hasUrl(e){return this.streamingTasks.has(e)}}const YY={name:"LiveStreaming",create:function(e){return new GY(e.joinInfo,e.websocketRetryConfig||Kx,e.httpRetryConfig||Kx)}};function KY(e){let t=iK();return function(e,t){let n=e.appId;void 0!==n&&(yK(t,10),uK(t,n));let r=e.cid;void 0!==r&&(yK(t,16),yK(t,r));let i=e.cname;void 0!==i&&(yK(t,26),uK(t,i));let o=e.deviceId;void 0!==o&&(yK(t,34),uK(t,o));let s=e.elapse;void 0!==s&&(yK(t,40),_K(t,s));let a=e.fileSize;void 0!==a&&(yK(t,48),_K(t,nK(a)));let c=e.height;void 0!==c&&(yK(t,56),_K(t,nK(c)));let l=e.jpg;void 0!==l&&(yK(t,66),yK(t,l.length),function(e,t){let n=cK(e,t.length);e.bytes.set(t,n)}(t,l));let d=e.networkType;void 0!==d&&(yK(t,72),_K(t,nK(d)));let u=e.osType;void 0!==u&&(yK(t,80),_K(t,nK(u)));let h=e.requestId;void 0!==h&&(yK(t,90),uK(t,h));let p=e.sdkVersion;void 0!==p&&(yK(t,98),uK(t,p));let f=e.sequence;void 0!==f&&(yK(t,104),_K(t,nK(f)));let m=e.sid;void 0!==m&&(yK(t,114),uK(t,m));let g=e.timestamp;void 0!==g&&(yK(t,120),_K(t,g));let v=e.uid;void 0!==v&&(yK(t,128),yK(t,v));let y=e.vid;void 0!==y&&(yK(t,136),yK(t,y));let _=e.width;void 0!==_&&(yK(t,144),_K(t,nK(_)));let E=e.service;void 0!==E&&(yK(t,152),yK(t,E));let b=e.callbackData;void 0!==b&&(yK(t,162),uK(t,b));let w=e.jpgEncryption;void 0!==w&&(yK(t,168),yK(t,w));let S=e.requestType;void 0!==S&&(yK(t,176),yK(t,S));let A=e.scorePorn;void 0!==A&&(yK(t,185),gK(t,A));let C=e.scoreSexy;void 0!==C&&(yK(t,193),gK(t,C));let T=e.scoreNeutral;void 0!==T&&(yK(t,201),gK(t,T));let R=e.scene;void 0!==R&&(yK(t,208),yK(t,R));let I=e.ossFilePrefix;void 0!==I&&(yK(t,218),uK(t,I));let x=e.serviceVendor;if(void 0!==x)for(let O of x){yK(t,226);let e=iK();JY(O,e),yK(t,e.limit),hK(t,e),oK(e)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function qY(e){return function(e){let t={};e:for(;!aK(e);){let n=vK(e);switch(n>>>3){case 0:break e;case 1:t.code=vK(e);break;case 2:t.msg=dK(e,vK(e));break;case 3:{let n=QY(e);t.data=XY(e),e.limit=n;break}default:ZY(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function XY(e){let t={};e:for(;!aK(e);){let n=vK(e);switch(n>>>3){case 0:break e;case 1:t.requestId=dK(e,vK(e));break;case 2:t.requestType=vK(e)>>>0;break;case 3:t.scorePorn=mK(e);break;case 4:t.scoreSexy=mK(e);break;case 5:t.scoreNeutral=mK(e);break;case 6:t.requestScene=vK(e)>>>0;break;case 7:t.scene=vK(e)>>>0;break;default:ZY(e,7&n)}}return t}function JY(e,t){let n=e.service;void 0!==n&&(yK(t,8),yK(t,n));let r=e.vendor;void 0!==r&&(yK(t,16),yK(t,r));let i=e.token;void 0!==i&&(yK(t,26),uK(t,i));let o=e.callbackUrl;void 0!==o&&(yK(t,34),uK(t,o))}function QY(e){let t=vK(e),n=e.limit;return e.limit=e.offset+t,n}function ZY(e,t){switch(t){case 0:for(;128&pK(e););break;case 2:sK(e,vK(e));break;case 5:sK(e,4);break;case 1:sK(e,8);break;default:throw new Error("Unimplemented type: "+t)}}let $Y=new Float32Array(1);new Uint8Array($Y.buffer);let eK=new Float64Array(1),tK=new Uint8Array(eK.buffer);function nK(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let rK=[];function iK(){const e=rK.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function oK(e){rK.push(e)}function sK(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function aK(e){return e.offset>=e.limit}function cK(e,t){let n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){let t=new Uint8Array(2*o);t.set(n),e.bytes=t}return e.offset=o,o>i&&(e.limit=o),r}function lK(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function dK(e,t){let n=lK(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",s="";for(let a=0;a<t;a++){let e,c,l,d,u=i[a+n];128&u?192==(224&u)?a+1>=t?s+=o:(e=i[a+n+1],128!=(192&e)?s+=o:(d=(31&u)<<6|63&e,d<128?s+=o:(s+=r(d),a++))):224==(240&u)?a+2>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],32896!=(49344&(e|c<<8))?s+=o:(d=(15&u)<<12|(63&e)<<6|63&c,d<2048||d>=55296&&d<=57343?s+=o:(s+=r(d),a+=2))):240==(248&u)?a+3>=t?s+=o:(e=i[a+n+1],c=i[a+n+2],l=i[a+n+3],8421504!=(12632256&(e|c<<8|l<<16))?s+=o:(d=(7&u)<<18|(63&e)<<12|(63&c)<<6|63&l,d<65536||d>1114111?s+=o:(d-=65536,s+=r(55296+(d>>10),56320+(1023&d)),a+=3))):s+=o:s+=r(u)}return s}function uK(e,t){let n=t.length,r=0;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}yK(e,r);let i=cK(e,r),o=e.bytes;for(let s=0;s<n;s++){let e=t.charCodeAt(s);e>=55296&&e<=56319&&s+1<n&&(e=(e<<10)+t.charCodeAt(++s)-56613888),e<128?o[i++]=e:(e<2048?o[i++]=e>>6&31|192:(e<65536?o[i++]=e>>12&15|224:(o[i++]=e>>18&7|240,o[i++]=e>>12&63|128),o[i++]=e>>6&63|128),o[i++]=63&e|128)}}function hK(e,t){let n=cK(e,t.limit),r=e.bytes,i=t.bytes;for(let o=0,s=t.limit;o<s;o++)r[o+n]=i[o]}function pK(e){return e.bytes[lK(e,1)]}function fK(e,t){let n=cK(e,1);e.bytes[n]=t}function mK(e){let t=lK(e,8),n=e.bytes;return tK[0]=n[t++],tK[1]=n[t++],tK[2]=n[t++],tK[3]=n[t++],tK[4]=n[t++],tK[5]=n[t++],tK[6]=n[t++],tK[7]=n[t++],eK[0]}function gK(e,t){let n=cK(e,8),r=e.bytes;eK[0]=t,r[n++]=tK[0],r[n++]=tK[1],r[n++]=tK[2],r[n++]=tK[3],r[n++]=tK[4],r[n++]=tK[5],r[n++]=tK[6],r[n++]=tK[7]}function vK(e){let t,n=0,r=0;do{t=pK(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function yK(e,t){for(t>>>=0;t>=128;)fK(e,127&t|128),t>>>=7;fK(e,t)}function _K(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,s=cK(e,o),a=e.bytes;switch(o){case 10:a[s+9]=i>>>7&1;case 9:a[s+8]=9!==o?128|i:127&i;case 8:a[s+7]=8!==o?r>>>21|128:r>>>21&127;case 7:a[s+6]=7!==o?r>>>14|128:r>>>14&127;case 6:a[s+5]=6!==o?r>>>7|128:r>>>7&127;case 5:a[s+4]=5!==o?128|r:127&r;case 4:a[s+3]=4!==o?n>>>21|128:n>>>21&127;case 3:a[s+2]=3!==o?n>>>14|128:n>>>14&127;case 2:a[s+1]=2!==o?n>>>7|128:n>>>7&127;case 1:a[s]=1!==o?128|n:127&n}}function EK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const bK=new Map([["moderation",1],["supervise",2]]);class wK extends ZI{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(gj.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=oi(t=e.map((e=>bK.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),wC(this,"name","AgoraRTCVideoContentInspect"),wC(this,"_connectionState",fj.CONNECTING),wC(this,"_innerConnectionState",void 0),wC(this,"sequence",0),wC(this,"inspectStartTime",void 0),wC(this,"workerManagerConnection",void 0),wC(this,"workerConnection",void 0),wC(this,"workerMessageLengthLimit",void 0),wC(this,"inspectIntervalMinimum",void 0),wC(this,"qualityRatio",void 0),wC(this,"_connectInfo",void 0),wC(this,"_cancelTokenSource",KR.CancelToken.source()),wC(this,"_retryConfig",void 0),wC(this,"wmSequence",0),wC(this,"inspectInterval",void 0),wC(this,"inspectTimer",null),wC(this,"ossFilePrefix",void 0),wC(this,"extraInfo",void 0),wC(this,"_inspectType",void 0),wC(this,"_inspectMode",void 0),wC(this,"_quality",1),wC(this,"qualityTimer",null),wC(this,"_inspectId",void 0),wC(this,"_needWorkUrlOnly",!1),wC(this,"inspectImage",(()=>{if(this.connectionState!==fj.CONNECTED)throw new _N(MI.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===fj.CONNECTED?this.requestToInspectImage():dN.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=kx(5,"inspect-"),this.workerMessageLengthLimit=LO("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=LO("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=LO("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new Wj("worker-manager-"+this._inspectId,Kx),this.on(gj.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,dN.debug("[".concat(this._inspectId,"] Inspect operation :").concat(mj[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new Wj("worker-"+this._inspectId,Kx),this.handleWorkerEvents()}async init(e,t){this.emit(gj.STATE_CHANGE,mj.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new rp(((r,i)=>{this.on(gj.CONNECTION_STATE_CHANGE,((e,t)=>{t===fj.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{i(e)}))}))}async requestAP(e,t,n){const r=LO("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),i=await function(e,t,n,r){let{appId:i,areaCode:o,cname:s,sid:a,token:c,uid:l}=t;mB++;const d="image_moderation_api",u={service_name:d,json_body:JSON.stringify({appId:i,areaCode:o,cname:s,command:"allocateEdge",requestId:mB,seq:mB,sid:a,token:c,ts:Date.now(),uid:l+""})};let h,p,f=e[0];return Xx((async()=>{h=Date.now();const e=await qU(f,{data:u,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-h,0!==e.code){const t=new _N(MI.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:p});throw dN.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new _N(MI.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw dN.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new _N(MI.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:p});throw dN.error(e.toString()),e}const r=LO("VIDEO_INSPECT_WORKER_MANAGER_HOST"),i=LO("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(i||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,n)=>(yN.apworkerEvent(a,{success:!0,sc:200,serviceName:d,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(yN.apworkerEvent(a,{success:!1,sc:t.data&&t.data.code||200,serviceName:d,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==MI.OPERATION_ABORTED&&t.code!==MI.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(f=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(gj.STATE_CHANGE,mj.AP_CONNECTED);const{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(gj.STATE_CHANGE,mj.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(kM.CONNECTED,(async()=>{this.emit(gj.STATE_CHANGE,mj.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.23.1",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(kM.CLOSED,(()=>{this._innerConnectionState<mj.GET_WORKER_MANAGER_RESPONSE&&dN.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(kM.FAILED,(()=>{this._innerConnectionState<mj.GET_WORKER_MANAGER_RESPONSE&&dN.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(kM.RECONNECTING,(()=>{this._innerConnectionState<mj.GET_WORKER_MANAGER_RESPONSE&&dN.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(kM.ON_MESSAGE,(async e=>{this.emit(gj.STATE_CHANGE,mj.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw dN.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new _N(MI.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw dN.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new _N(MI.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=LO("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,r=t.replace(/:\d+\/?$/,":".concat(e));this.emit(gj.STATE_CHANGE,mj.CONNECT_WORKER,r),this._needWorkUrlOnly?this.emit(gj.REQUEST_NEW_WORKER_URL,r):await this.connectWorker(r)}})),this.workerManagerConnection.on(kM.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(kM.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(kM.CONNECTED,(async()=>{this.emit(gj.STATE_CHANGE,mj.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=fj.CONNECTED})),this.workerConnection.on(kM.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=qY(new Uint8Array(e.data));if(LO("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&dN.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(gj.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},r=oi(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),i=Object.keys(e).find((e=>e===r));this.emit(gj.INSPECT_RESULT,i)}else this.emit(gj.INSPECT_RESULT,void 0,new _N(MI.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(gj.INSPECT_RESULT,void 0,new _N(MI.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else dN.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(gj.INSPECT_RESULT,void 0,new _N(MI.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(kM.CLOSED,(()=>{this.connectionState=fj.CLOSED})),this.workerConnection.on(kM.FAILED,(()=>{this.connectionState=fj.CLOSED})),this.workerConnection.on(kM.RECONNECTING,(()=>{this.connectionState=this.connectionState===fj.CONNECTED?fj.RECONNECTING:fj.CONNECTING})),this.workerConnection.on(kM.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(kM.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(gj.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}async requestToInspectImage(){this.sequence++;const e=mx(this,gj.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(gj.INSPECT_RESULT,void 0,new _N(MI.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(gj.INSPECT_RESULT,void 0,new _N(MI.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await $D(l,n,r),u=this.sequence+"-"+i+"-"+a+"-"+c+"-"+kx(12,""),h={appId:n,cid:i,cname:r,deviceId:"",elapse:(p=Number(c-this.inspectStartTime),{low:p|=0,high:p>>31,unsigned:p>=0}),fileSize:d.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.23.1",sequence:this.sequence,sid:s,timestamp:eW(c),uid:a,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};var p;void 0===this.extraInfo&&delete h.callbackData,void 0===this.ossFilePrefix&&delete h.ossFilePrefix;const f=KY(h);if(f.byteLength<this.workerMessageLengthLimit){if(LO("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EK(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h);delete e.jpg,dN.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return f}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:i,vid:o,sid:s,uid:a})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=KR.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=fj.CLOSED,this.emit(gj.STATE_CHANGE,mj.CLOSED)}}const SK={name:"ContentInspect",create:function(e){let{config:t}=e;return function(e){if(!e)throw new _N(MI.INVALID_PARAMS,"inspectConfig is necessary.");if(!e.inspectType||!Array.isArray(e.inspectType))throw new _N(MI.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Lr(t=["supervise","moderation"]).call(t,e))throw new _N(MI.INVALID_PARAMS,"".concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new _N(MI.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new wK(t)}};var AK=r(ee.Object.getOwnPropertySymbols),CK=Dn,TK=Qn.indexOf,RK=Gr,IK=C([].indexOf),xK=!!IK&&1/IK([1],1,-0)<0;CK({target:"Array",proto:!0,forced:xK||!RK("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return xK?IK(this,e,t)||0:TK(this,e,t)}});var OK=tr("Array","indexOf"),NK=u,DK=OK,kK=Array.prototype,PK=function(e){var t=e.indexOf;return e===kK||NK(kK,e)&&t===kK.indexOf?DK:t},LK=r(PK);function MK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=ZL(e);for(r=0;r<o.length;r++)n=o[r],LK(t).call(t,n)>=0||(i[n]=e[n]);return i}(e,t);if(AK){var o=AK(e);for(r=0;r<o.length;r++)n=o[r],LK(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}let jK=class{get localCapabilities(){return bx(this._localCapabilities)}get rtpCapabilities(){return bx(this._rtpCapabilities)}get candidates(){return bx(this._candidates)}get iceParameters(){return bx(this._iceParameters)}get dtlsParameters(){return bx(this._dtlsParameters)}constructor(e){wC(this,"sessionDesc",void 0),wC(this,"_localCapabilities",void 0),wC(this,"_rtpCapabilities",void 0),wC(this,"_candidates",void 0),wC(this,"_iceParameters",void 0),wC(this,"_dtlsParameters",void 0),wC(this,"setup",void 0),wC(this,"currentMidIndex",void 0),wC(this,"cname","o/i14u9pJrxRKAsu"),wC(this,"firefoxSsrcMidMap",new Map),e=bx(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,localCapabilities:o,direction:s,setup:a,videoCodec:c,audioCodec:l}=e;let d;this.setup=a,d=s===DM.RECEIVE_ONLY?HO("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):HO("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=o;const u=s===DM.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,h=s===DM.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=s===DM.RECEIVE_ONLY?i.send.videoCodecs:IU(aj.VIDEO,u,h,c),f=s===DM.RECEIVE_ONLY?i.send.audioCodecs:IU(aj.AUDIO,u,h,l);for(const m of d.mediaDescriptions)m.attributes.iceUfrag=t.iceUfrag,m.attributes.icePwd=t.icePwd,m.attributes.fingerprints=n.fingerprints,m.attributes.candidates=r,m.attributes.setup=this.setup,"application"===m.media.mediaType&&(m.attributes.sctpPort="5000"),"video"===m.media.mediaType&&(m.media.fmts=p.map((e=>e.payloadType.toString(10))),m.attributes.payloads=p,m.attributes.extmaps=u.videoExtensions),"audio"===m.media.mediaType&&(m.media.fmts=f.map((e=>e.payloadType.toString(10))),m.attributes.payloads=f,m.attributes.extmaps=u.audioExtensions,RU(m));this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return zO(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,r,i){n=n.replace(/ /g,"-");const{ssrcs:o,ssrcGroups:s}=gU(t,this.cname,LO("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(o);if(a){if(hI()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,a.attributes.mid),i&&(i.twcc||i.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,i),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o,r);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,o,s,"sendonly",r,i),this.updateBundleMids()):(n=bx(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=o,n.attributes.ssrcGroups=s,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,i)),hI()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach((e=>{const i=e._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(i);let s,a=!1;-1===o?(a=!0,s=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(s=bx(this.sessionDesc.mediaDescriptions[o]),s.attributes.direction="recvonly"),r.push({mid:s.attributes.mid,needCreateTransceiver:a})})),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:i,type:o,relatedAddress:s,relatedPort:a,priority:c}=new RTCIceCandidate(e),l={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=r?r:"",port:i?i+"":"",type:o?o+"":"",relAddr:null!=s?s:"",relPort:a?a+"":"",extension:{}};this.candidates.some((e=>e.priority===l.priority&&e.connectionAddress===l.connectionAddress&&e.port===l.port))||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,i){const o=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,a=IU(o,s,this.localCapabilities.send,o===aj.AUDIO?i:r),c=o===aj.VIDEO?s.videoExtensions:s.audioExtensions,l="".concat(++this.currentMidIndex);let d={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};d=this.mungRecvMediaDsec(d,e);const u=this.findFirstClosedMedia(o);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Lr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Lr(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((r=>{const i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(hI()){if(i){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!e||e!==r.attributes.mid)}return!1}return i&&r.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=bx(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,r,i,o){const s=this.rtpCapabilities.send,a=e===aj.VIDEO?s.videoCodecs:s.audioCodecs,c=e===aj.VIDEO?s.videoExtensions:s.audioExtensions;hI()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,o);const d=this.findFirstClosedMedia(e);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,n){const r=bx(e);return yU(r),vU(r,t),_U(r,t),EU(r),bU(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=bx(e);return bU(n,t,this.localCapabilities.recv),RU(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>hI()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const UK=["sdp"];var BK;function FK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FK(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let WK=(BK=class e extends oj{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),wC(this,"direction",void 0),wC(this,"name",void 0),wC(this,"store",void 0),wC(this,"spec",void 0),wC(this,"peerConnection",void 0),wC(this,"initialOffer",void 0),wC(this,"transport",void 0),wC(this,"statsFilter",void 0),wC(this,"localCandidateCount",0),wC(this,"_isInRestartIce",!1),wC(this,"mutex",void 0),wC(this,"onLocalCandidate",void 0),wC(this,"remoteSDP",void 0),wC(this,"pendingCandidates",[]),wC(this,"localCapabilities",void 0),wC(this,"isReady",!1),wC(this,"restartCnt",0),wC(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.mutex=new Gx("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=r?r:DM.SEND_ONLY,this.name=this.direction===DM.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=wO(this.peerConnection,LO("STATS_UPDATE_INTERVAL"),void 0,hI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await SU();if(this.localCapabilities=TU(t),e){const{sdp:t}=e,n=MK(e,UK),r=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=uU(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(CU(t,e,"videoExtensions",n,r,i),CU(t,e,"videoCodecs",n,r,i),CU(t,e,"audioExtensions",n,r,i),CU(t,e,"audioCodecs",n,r,i),LO("RAISE_H264_BASELINE_PRIORITY")){const e=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=i.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){dN.debug("raising H264 baseline profile priority");const n=i.videoCodecs[e];i.videoCodecs.splice(e,1),i.videoCodecs.splice(t,0,n)}-1!==t&&LO("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:i}}({},{},t);this.remoteSDP=new jK({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const i=await this.peerConnection.createAnswer();if(!i.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const o=hU(i.sdp);await this.peerConnection.setLocalDescription(i);const s=await AU({},{},i.sdp);this.localCapabilities=TU(s);const a=this.peerConnection.getTransceivers()[0];return null!=a&&a.receiver&&a.receiver.transport&&this.tryBindTransportEvents(a.receiver.transport),VK(VK({},o),{},{sdp:i.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=hU(e.sdp);return this.initialOffer=e,VK(VK({},t),{},{sdp:e.sdp})}}catch(e){throw new jI(MI.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:r}=e,i=await AU({},{},t);this.remoteSDP=new jK({remoteIceParameters:n,remoteDtlsParameters:r,candidates:[],remoteRTPCapabilities:i,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const o=this.peerConnection.getTransceivers()[0];null!=o&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(e){throw new jI(MI.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(e.toString()))}}send(e,t,n){var r=this;return sR((function*(){const i=yield aR(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=[],o=r.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(o[t].needCreateTransceiver){const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});i.push(t),e._updateRtpTransceiver(t)}else{const n=r.peerConnection.getTransceivers().find((e=>e.mid===o[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(o[t].mid));i.push(n),e._updateRtpTransceiver(n)}})),hI()&&!0===LO("SIMULCAST")&&(yield aR(r.applySimulcastForFirefox(i,e)));const s=o.map((e=>e.mid)),a=yield aR(r.peerConnection.createOffer()),c=r.mungSendOfferSDP(a.sdp,e,s),l=HO(c),d=s.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return pU(t,LO("USE_PUB_RTX"))})),u=i.map(((e,t)=>{const n=s[t];return{localSSRC:d[t],id:n}}));yield aR(r.peerConnection.setLocalDescription({type:"offer",sdp:c}));try{yield u}catch(e){const n=r.remoteSDP.toString();throw yield aR(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield aR(r.peerConnection.setRemoteDescription({type:"answer",sdp:n})),yield aR(r.stopSending(s,!0)),e}yield aR(r.applySimulcastEncodings(i,e)),yield aR(r.applySendEncodings(i,e));const h=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return null==p||p(h),yield aR(r.setRemoteDescription({type:"answer",sdp:h})),i.map(((e,t)=>{const n=s[t];return{localSSRC:d[t],id:n}}))}catch(e){throw e instanceof jI?e:new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{i()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),dN.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else dN.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const s=this.peerConnection.getTransceivers().find((e=>e.mid===i));if(!s||null===s.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async mockReceive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:i,needExchangeSDP:o}=this.remoteSDP.send(e,t,n,r);if(o){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),o=this.mungReceiveAnswerSDP(r.sdp,i,e);null==n||n(o||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:o}),dN.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else dN.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===RO.Auto&&(this.store.p2pTransport=RO.SdRtn,bN().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,bN().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=hU(e.sdp);return this.store.descriptionStart(),this.direction===DM.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===DM.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=hU(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?hI()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:VK(VK({},sO),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:VK(VK({},sO),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Lr(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):dN.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(sx(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,r)),LO("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Lr(o=[RO.Relay,RO.SdRtn]).call(o,n)&&(i.iceTransportPolicy="relay"),LO("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(i.iceTransportPolicy="relay")})))),LO("ENABLE_ENCODED_TRANSFORM")&&bN().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),dN.debug("P2PConnection p2pTransport is ".concat(n)),i}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[],i=e.filter((e=>e.tcpport));dN.debug("P2PConnection turnServers is ".concat(i,", current index is ").concat(n));const o=i.length>n?i[n]:i[0];switch(t){case RO.SdRtn:const t=e.filter((e=>{var t;return Lr(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),i=t.length>n?t[n]:t[0];i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(qj(i.turnServerURL),":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(qj(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}));break;case RO.Relay:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(qj(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}));break;default:o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(qj(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"stun:".concat(o.turnServerURL,":").concat(o.tcpport)}))}return r}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();dN.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return dN.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return dN.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!bN().supportSetRtpSenderParameters)return dN.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},i={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var o;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),Lr(o=e._hints).call(o,FN.LOW_STREAM)&&(n&&(i.maxFramerate=Jj(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}if(LO("DSCP_TYPE")&&OI()){var s;const e=LO("DSCP_TYPE");Lr(s=["very-low","low","medium","high"]).call(s,e)&&(i.networkPriority=e)}const a=t.getParameters(),c=null===(n=a.encodings)||void 0===n?void 0:n[0];hI()&&!c&&(r.encodings=[i]),c&&Object.assign(c,i),Object.assign(a,r),dN.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!bN().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];i instanceof NP&&!this.isVP8Simulcast(i)&&await this.updateRtpSenderEncodings(i,r.sender)}}catch(e){dN.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=HO(e);return t.forEach(((e,t)=>{const i=n[t],o=r.mediaDescriptions.find((e=>e.attributes.mid===i));o&&(vU(o,e),wU(o,e,this.store.codec))})),zO(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof NP&&!Lr(n=l._hints).call(n,FN.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabilityMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!hI()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof NP&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(Object.assign(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return!!(e instanceof NP&&LO("SIMULCAST")&&"vp8"===this.store.codec&&!Lr(t=e._hints).call(t,FN.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(i=e._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(o=e._scalabilityMode)||void 0===o?void 0:o.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(LO("SDP_LOGGING"))return dN.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const i=this.remoteSDP.toString();null==r||r(i),await this.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async getRemoteSSRC(e,t){var n,r;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentRemoteDescription)||void 0===r?void 0:r.sdp){var i;const n=null===(i=HO(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===i?void 0:i.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Lr(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const r=HO(e),i=r.mediaDescriptions.find((e=>e.attributes.mid===t));return i&&n===aj.AUDIO&&"audio"===i.media.mediaType&&RU(i),zO(r)}},bM(BK.prototype,"establish",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"establish"),BK.prototype),bM(BK.prototype,"connect",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"connect"),BK.prototype),bM(BK.prototype,"receive",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"receive"),BK.prototype),bM(BK.prototype,"mockReceive",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"mockReceive"),BK.prototype),bM(BK.prototype,"stopReceiving",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"stopReceiving"),BK.prototype),bM(BK.prototype,"restartICE",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"restartICE"),BK.prototype),bM(BK.prototype,"close",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"close"),BK.prototype),bM(BK.prototype,"updateEncoderConfig",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"updateEncoderConfig"),BK.prototype),bM(BK.prototype,"updateSendParameters",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"updateSendParameters"),BK.prototype),bM(BK.prototype,"replaceTrack",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"replaceTrack"),BK.prototype),bM(BK.prototype,"muteLocal",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"muteLocal"),BK.prototype),bM(BK.prototype,"unmuteLocal",[HK],Object.getOwnPropertyDescriptor(BK.prototype,"unmuteLocal"),BK.prototype),BK);function HK(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}let zK=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});var GK,YK,KK,qK,XK,JK,QK,ZK,$K,eq,tq,nq;function rq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rq(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let oq=(GK=sq(zK.SEND_ONLY),YK=sq(zK.SEND_ONLY),KK=sq(),qK=sq(zK.RECEIVE_ONLY),XK=sq(zK.RECEIVE_ONLY),JK=sq(zK.RECEIVE_ONLY),QK=sq(zK.RECEIVE_ONLY),ZK=sq(zK.RECEIVE_ONLY),$K=sq(zK.RECEIVE_ONLY),eq=sq(),tq=sq(zK.RECEIVE_ONLY),nq=class extends ZI{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(pj.StateChange,t,this._state)}constructor(e,t){super(),wC(this,"isPlanB",!1),wC(this,"store",void 0),wC(this,"statsUploader",void 0),wC(this,"sendConnection",void 0),wC(this,"recvConnection",void 0),wC(this,"localTrackMap",new Map),wC(this,"remoteUserMap",new Map),wC(this,"localDataChannels",[]),wC(this,"pendingLocalTracks",[]),wC(this,"pendingRemoteTracks",[]),wC(this,"statsCollector",void 0),wC(this,"dtlsFailedCount",0),wC(this,"sendMutex",void 0),wC(this,"recvMutex",void 0),wC(this,"_state",hj.Disconnected),wC(this,"_restartStates",["disconnected","failed"]),wC(this,"reconnectInterval",void 0),wC(this,"uploadUnplinkStarted",!1),wC(this,"uploadDownlinkStarted",!1),wC(this,"uplinkStateUploadInterval",void 0),wC(this,"downlinkStatsUploadInterval",void 0),wC(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==hj.Connected)return void n(new jI(MI.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const s=r.find((e=>"videoLowTrack"===e[0]));s&&s[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));let a=!1;var i,o;a="video"===e.trackMediaType?!(null===(i=this.localTrackMap.get(uj.LocalAudioTrack))||void 0===i||!i.track._muted):void 0===(null===(o=this.localTrackMap.get(uj.LocalVideoTrack))||void 0===o?void 0:o.id);const c=this.createMuteMessage(r);await fx(this,pj.RequestMuteLocal,c);const l="video"===e.trackMediaType?Aj.MUTE_LOCAL_VIDEO:Aj.MUTE_LOCAL_AUDIO;await fx(this,pj.RequestP2PMuteLocal,{action:l,message:c,isMuteAll:a}),t()}catch(e){n(e)}finally{r()}})),wC(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==hj.Connected)return void n(new jI(MI.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnmuteMessage(r),o="video"===e.trackMediaType?Aj.UNMUTE_LOCAL_VIDEO:Aj.UNMUTE_LOCAL_AUDIO;await fx(this,pj.RequestP2PMuteLocal,{action:o,message:i}),t()}catch(e){n(e)}finally{r()}})),wC(this,"handleUpdateVideoEncoder",(async(e,t,n,r)=>{let i;"boolean"==typeof r&&r||(i=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoEncoder"));try{const n=this.localTrackMap.get(uj.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==hj.Connected)return void t();const{id:r,track:i}=n;r&&(await this.sendConnection.updateSendParameters(r,i),await this.sendConnection.updateEncoderConfig(r,i),this.emit(pj.UpdateVideoEncoder,i)),t()}catch(e){n(e)}finally{var o;null===(o=i)||void 0===o||o()}})),wC(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(uj.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==hj.Connected)return void t();const{id:r,track:i}=n;r&&await this.sendConnection.updateSendParameters(r,i),t()}catch(e){n(e)}finally{r()}})),wC(this,"handleReplaceTrack",(async(e,t,n,r)=>{let i;dN.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var o;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==hj.Connected)return void t();if(await(null===(o=this.sendConnection)||void 0===o?void 0:o.replaceTrack(e,n[1].id)),n[0]===uj.LocalVideoTrack&&bN().supportDualStreamEncoding){const t=this.localTrackMap.get(uj.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new rp(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(e){n(e)}finally{var s;null===(s=i)||void 0===s||s()}})),wC(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),wC(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),wC(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),wC(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new kF(e),this.bindStatsUploaderEvents(),this.sendMutex=new Gx("P2PChannel2-send-mutex",e.clientId),this.recvMutex=new Gx("P2PChannel2-recv-mutex",e.clientId),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),LO("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(dN.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new WK(e,this.store,DM.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=hj.New,this.sendConnection&&(dN.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new WK(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new jI(MI.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=hj.Connected}async addRemoteCandidate(e,t){if(t===DM.RECEIVE_ONLY){if(!this.sendConnection)throw new jI(MI.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new jI(MI.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return sR((function*(){const i=yield aR(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==hj.Connected){r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,kB.markPublishStart(r.store.clientId,r.store.pubId);const i=r.filterTobePublishedTracks(e,t,n);if(0===i.length)return void(yield aR(r.tryToUnmuteAudio(e)));i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===uj.LocalAudioTrack?"audio":"video",i)})),r.bindLocalTrackEvents(i);const o=yield aR(r.sendConnection.send(i.map((e=>{let{track:t}=e;return t})),r.store.codec,r.store.audioCodec)),s=(yield aR(o.next())).value,a=r.createGatewayPublishMessage(i,s);try{yield a}catch(e){throw o.throw(e),(null==e?void 0:e.code)===MI.WS_ABORT&&i.forEach((e=>{let{track:t}=e;-1===r.pendingLocalTracks.indexOf(t)&&r.pendingLocalTracks.push(t)})),r.unbindLocalTrackEvents(i),e}yield aR(o.next()),i.forEach((e=>{let{type:t}=e;r.statsCollector.addLocalStats(t)})),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(i,s),i.forEach((e=>{let{track:t,type:n}=e;const i=Date.now();r.store.publish(t.getTrackId(),n===uj.LocalAudioTrack?"audio":"video",void 0,i)})),r.startUploadUplinkState()}finally{i()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==hj.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Lr(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===hj.Connected)return n&&n[1].track.close(),r;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[r,{track:i,ssrcs:o}]=n;const s={stream_type:iF(i,r),ssrcs:o};i._muted||!i._enabled?e.push(s):t.push(s)})),e.length>0&&e.forEach((e=>{fx(this,pj.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{fx(this,pj.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return sR((function*(){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(dN.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await px(this,pj.RequestRePublish,this.pendingLocalTracks),this.emit(pj.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var i;if(!this.recvConnection)throw new jI(MI.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;const{track:o,mid:s,transceiver:a}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===aj.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new qP(o,e.uid,e._uintid,this.store),dN.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),a&&e._audioTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new KP(o,e.uid,e._uintid,this.store),dN.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),a&&e._videoTrack._updateRtpTransceiver(a),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const l=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:i}=n;return r.uid===e.uid&&t===i}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(pj.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new jI(MI.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:i}=n;return void 0!==t?r.uid===e.uid&&t===i:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===aj.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===aj.VIDEO){var i;null===(i=e._videoTrack)||void 0===i||i._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const i=this.filterTobeUnSubscribedTracks(e,t);0!==i.length&&(await this.recvConnection.stopReceiving(i.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach((e=>{let[t,{kind:r}]=e;var i,o;if(r===aj.VIDEO&&t._videoSSRC&&(null===(i=this.recvConnection)||void 0===i||i.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===aj.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0);else if(r===aj.AUDIO){var s;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(s=t._audioTrack)||void 0===s||s._destroy(),t._audioTrack=void 0)}})),i.forEach((e=>{let[,{kind:t}]=e;fx(this,pj.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[aj.VIDEO,aj.AUDIO].forEach((e=>{t.has(e)?fx(this,pj.RequestP2PUnmuteRemote,e):fx(this,pj.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new jI(MI.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void dN.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void dN.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===aj.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||dN.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):dN.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(uj.LocalAudioTrack);if((null==t?void 0:t.track)instanceof Gk){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==uj.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===uj.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===uj.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,r,i){if(e){const n=this.localTrackMap.get(uj.LocalAudioTrack),o=r?this.localTrackMap.get(uj.LocalVideoLowTrack):this.localTrackMap.get(uj.LocalVideoTrack);yN.publish(this.store.sessionId,{eventElapse:kB.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==o?void 0:o.track.getTrackLabel(),screenshare:-1!==(null==o?void 0:o.track._hints.indexOf(FN.SCREEN_TRACK)),audio:!!n,video:!!o,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;n||(n=[]);const s=n.find((e=>e instanceof Wk)),a=r?null===(o=this.localTrackMap.get(uj.LocalVideoTrack))||void 0===o?void 0:o.track:n.find((e=>e instanceof NP));yN.publish(this.store.sessionId,{eventElapse:kB.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==s?void 0:s.getTrackLabel(),videoName:null==a?void 0:a.getTrackLabel(),screenshare:-1!==(null==a?void 0:a._hints.indexOf(FN.SCREEN_TRACK)),audio:!!s,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===aj.VIDEO?n._videoSSRC:n._audioSSRC;i&&yN.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===aj.VIDEO,audio:r===aj.AUDIO,peerid:n.uid,subscribeRequestid:r===aj.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:kB.measureFromSubscribeStart(this.store.clientId,i)})}reset(){dN.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new Gx("P2PChannel2-send-mutex",this.store.clientId),this.sendMutex=new Gx("P2PChannel2-recv-mutex",this.store.clientId),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(uj.LocalAudioTrack);if((null==e?void 0:e.track)instanceof Gk){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=hj.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(uj.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(uj.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof NP||t&&t.track instanceof Wk?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(uj.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=K_(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(dN.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=hj.Reconnecting,LO("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case uj.LocalVideoTrack:Lr(t=r._hints).call(t,FN.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case uj.LocalAudioTrack:r instanceof Gk?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case uj.LocalVideoLowTrack:}})),this.emit(pj.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from($O(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(pj.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),dN.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof BB?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===DM.SEND_ONLY){if(!this.sendConnection)throw new jI(MI.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new jI(MI.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const e=await r.restartICE(t);return r.isInRestartIce=!1,e}{const e=await r.restartICE();if(e){const t=await px(this,pj.RequestP2PRestartICE,{direction:DM.RECEIVE_ONLY,iceParameter:e});await r.restartICE(t),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(uj.LocalVideoTrack),n=this.localTrackMap.get(uj.LocalAudioTrack),r=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),i=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!i)return 1;const o=mx(this,pj.NeedSignalRTT),s=r?r.rttMs:void 0,a=i?i.rttMs:void 0,c=s&&a?(s+a)/2:s||a,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(FN.SCREEN_TRACK)){const t=h._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return PL[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const i=r._audioSSRC,o=r._videoSSRC,s=e.audioRecv.find((e=>e.ssrc===i)),a=e.videoRecv.find((e=>e.ssrc===o));if(!s&&!a)return void(t+=1);const c=mx(this,pj.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=s?s.jitterMs:void 0,h=e.recvPacketLossRate;let p=.7*h*100/50+.3*d/1500;u&&(p=.6*h*100/50+.2*d/1500+.2*u/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new rp(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const r=[],i=bN(),o=this.getAllTracks();e=_x(e=e.filter((e=>-1===o.indexOf(e))));let s=!1,a=!1;for(const c of e){if(c instanceof NP&&(this.localTrackMap.has(uj.LocalVideoTrack)||s?new jI(MI.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:uj.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:uj.LocalVideoLowTrack})}if(c instanceof Wk){const e=this.localTrackMap.get(uj.LocalAudioTrack);if(e){if(!(e.track instanceof Gk))throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(a){const e=r.find((e=>{let{type:t}=e;return t===uj.LocalAudioTrack}));if(!(e.track instanceof Gk))throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof Gk||c._bypassWebAudio)r.push({track:c,type:uj.LocalAudioTrack});else{const e=new Gk;e.addAudioTrack(c),r.push({track:e,type:uj.LocalAudioTrack})}a=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=_x(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof Wk){const e=this.localTrackMap.get(uj.LocalAudioTrack);if(!e)continue;e.track instanceof Gk?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([uj.LocalAudioTrack,e]),e.track.close())):t.push([uj.LocalAudioTrack,e])}if(r instanceof NP){const e=this.localTrackMap.get(uj.LocalVideoTrack);if(!e)continue;t.push([uj.LocalVideoTrack,e]);const n=this.localTrackMap.get(uj.LocalVideoLowTrack);n&&t.push([uj.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uj.LocalVideoTrack:t.addListener(BN.GET_STATS,this.handleGetLocalVideoStats),t.addListener(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(BN.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(BN.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uj.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case uj.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof Gk?e.trackList.forEach((e=>{e.addListener(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BN.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(BN.GET_STATS,this.handleGetLocalAudioStats),e.addListener(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case uj.LocalVideoTrack:t.off(BN.GET_STATS,this.handleGetLocalVideoStats),t.off(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(BN.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(BN.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case uj.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case uj.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof Gk?e.trackList.forEach((e=>{e.off(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BN.GET_STATS,this.handleGetLocalAudioStats),e.off(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(BN.GET_STATS,this.handleGetLocalAudioStats),e.off(BN.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(BN.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(BN.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(BN.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof KP&&t.addListener(BN.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof qP&&t.addListener(BN.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(BN.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(aj.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(aj.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let i,{track:o,type:s}=e;switch(s){case uj.LocalAudioTrack:i=XM.Audio;break;case uj.LocalVideoTrack:i=Lr(r=o._hints).call(r,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalVideoLowTrack:i=XM.Low}return{kind:s===uj.LocalAudioTrack?aj.AUDIO:aj.VIDEO,stream_type:i,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:o.muted||!o.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uj.LocalVideoTrack:n=Lr(t=i._hints).call(t,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalAudioTrack:n=XM.Audio;break;case uj.LocalVideoLowTrack:n=XM.Low}return{stream_type:n,ssrcs:o,mid:s}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:i}=e;this.localTrackMap.set(i,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(pj.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Lr(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await Dx(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),yN.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:nx.TRACER}).onSuccess(),this.emit(pj.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(YN.FIRST_FRAME_DECODED),yN.firstRemoteFrame(this.store.sessionId,fN.FIRST_AUDIO_DECODE,mN.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&yN.firstRemoteFrame(this.store.sessionId,fN.FIRST_AUDIO_RECEIVED,mN.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from($O(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&yN.firstRemoteFrame(this.store.sessionId,fN.FIRST_VIDEO_RECEIVED,mN.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(pj.ConnectionTypeChange,n),dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(nU(t))," -> ").concat(JSON.stringify(nU(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{dN.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(nU(t))," -> ").concat(JSON.stringify(nU(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(pj.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===DM.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,dN.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===DM.SEND_ONLY?this.restartICE(e):px(this,pj.RequestP2PRestartICE,{direction:DM.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(uj.LocalAudioTrack);if(e instanceof Wk&&(null==n?void 0:n.track)instanceof Gk)return n.track.isActive||t.push([uj.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===uj.LocalVideoTrack)){const e=this.localTrackMap.get(uj.LocalVideoLowTrack);e&&t.push([uj.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(uj.LocalAudioTrack);if(e instanceof Wk&&(null==n?void 0:n.track)instanceof Gk)return n.track.isActive&&t.push([uj.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===uj.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(uj.LocalVideoLowTrack);e&&t.push([uj.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uj.LocalAudioTrack:n=XM.Audio;break;case uj.LocalVideoTrack:n=Lr(t=i._hints).call(t,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalVideoLowTrack:n=XM.Low}return{stream_type:n,ssrcs:o,mid:s}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:i,ssrcs:o,id:s}]=e;switch(r){case uj.LocalAudioTrack:n=XM.Audio;break;case uj.LocalVideoTrack:n=Lr(t=i._hints).call(t,FN.SCREEN_TRACK)?XM.Screen:XM.High;break;case uj.LocalVideoLowTrack:n=XM.Low}return{stream_type:n,ssrcs:o,mid:s}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((t=>{let[r,i]=t;n.push([e,{kind:r,id:i}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:i}]=e;switch(r){case aj.VIDEO:return void(n._videoSSRC&&t.push({stream_type:aj.VIDEO,ssrcId:n._videoSSRC}));case aj.AUDIO:return void(n._audioSSRC&&t.push({stream_type:aj.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(uj.LocalVideoTrack),n=this.localTrackMap.get(uj.LocalVideoLowTrack);t&&(await t.track.setBitrateLimit(e.uplink),await new rp(((e,n)=>{this.handleUpdateVideoEncoder(t.track,e,n,!0)}))),n&&e.low_stream_uplink&&(await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0}),await new rp(((e,t)=>{this.handleUpdateVideoEncoder(n.track,e,t,!0)})))}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof Wk){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const r=this.createUnmuteMessage(n);return void await fx(this,pj.RequestUnmuteLocal,r)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(pj.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(pj.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Dx(qx(this.dtlsFailedCount,Kx)),this.emit(pj.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(uj.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof NP))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof NP)).length>1)throw new jI(MI.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof Wk)).length>1&&(e.some((e=>e instanceof Wk&&e._bypassWebAudio))||!bN().webAudioMediaStreamDest))throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof NP&&this.pendingLocalTracks.some((e=>e instanceof NP)))throw new jI(MI.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Wk&&this.pendingLocalTracks.some((e=>e instanceof Wk))&&(!bN().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof Wk&&e._bypassWebAudio))))throw new jI(MI.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!LO("DISABLE_DUAL_STREAM_USE_ENCODING")&&bN().supportDualStreamEncoding,r=iq(iq({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=n?e._mediaStreamTrack.clone():gF(e,r);const o=kx(8,"track-low-"),s=new NP(i,iq(iq({},n&&{scaleResolutionDownBy:tU(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,o);return s.on(zN.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,VN.LOW_STREAM)})),s._hints.push(FN.LOW_STREAM),e.addListener(BN.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var i;const o=Array.from($O(i=this.remoteUserMap).call(i)).find((t=>t._videoSSRC===e));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());const i=this.store.keyMetrics,s=i.subscribe.find((e=>e.userId===o.uid&&"video"===e.type));yN.firstRemoteVideoDecode(this.store.sessionId,fN.FIRST_VIDEO_DECODE,mN.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:kB.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:i.requestAPEnd||0,apStart:i.requestAPStart||0,joinGwEnd:i.joinGatewayEnd||0,joinGwStart:i.joinGatewayStart||0,pcEnd:i.peerConnectionEnd||0,pcStart:i.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const i=r.get(t);if(!i)return!1;const o=await this.recvConnection.getRemoteSSRC(i);return void 0!==o&&o!==n}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new jI(MI.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new jI(MI.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new jI(MI.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new jI(MI.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new jI(MI.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new jI(MI.NOT_SUPPORTED)}async preConnect(e){throw new jI(MI.NOT_SUPPORTED)}getEstablishParams(){throw new jI(MI.NOT_SUPPORTED)}async reSubscribe(e){throw new jI(MI.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new jI(MI.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===uj.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,VN.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}},bM(nq.prototype,"p2pConnect",[GK],Object.getOwnPropertyDescriptor(nq.prototype,"p2pConnect"),nq.prototype),bM(nq.prototype,"unpublish",[YK],Object.getOwnPropertyDescriptor(nq.prototype,"unpublish"),nq.prototype),bM(nq.prototype,"unpublishLowStream",[KK],Object.getOwnPropertyDescriptor(nq.prototype,"unpublishLowStream"),nq.prototype),bM(nq.prototype,"subscribe",[qK],Object.getOwnPropertyDescriptor(nq.prototype,"subscribe"),nq.prototype),bM(nq.prototype,"mockSubscribe",[XK],Object.getOwnPropertyDescriptor(nq.prototype,"mockSubscribe"),nq.prototype),bM(nq.prototype,"unsubscribe",[JK],Object.getOwnPropertyDescriptor(nq.prototype,"unsubscribe"),nq.prototype),bM(nq.prototype,"muteRemote",[QK],Object.getOwnPropertyDescriptor(nq.prototype,"muteRemote"),nq.prototype),bM(nq.prototype,"unmuteRemote",[ZK],Object.getOwnPropertyDescriptor(nq.prototype,"unmuteRemote"),nq.prototype),bM(nq.prototype,"hasRemoteMediaWithLock",[$K],Object.getOwnPropertyDescriptor(nq.prototype,"hasRemoteMediaWithLock"),nq.prototype),bM(nq.prototype,"disconnectForReconnect",[eq],Object.getOwnPropertyDescriptor(nq.prototype,"disconnectForReconnect"),nq.prototype),bM(nq.prototype,"remoteMediaSsrcChanged",[tq],Object.getOwnPropertyDescriptor(nq.prototype,"remoteMediaSsrcChanged"),nq.prototype),nq);function sq(e){return function(t,n,r){const i=t[n];if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];switch(e){case zK.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}case zK.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await i.apply(this,r)}finally{e(),t()}}}},r}}class aq extends ZI{constructor(e,t){super(),wC(this,"signal",void 0),wC(this,"token",void 0),wC(this,"tokenTimeout",void 0),wC(this,"tokenInterval",void 0),wC(this,"_sequence",0),wC(this,"userMap",new Map),wC(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===RM.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*LO("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,r,i){var o,s,a;if(0===this.userMap.size)return;const c=Array.from(hp(o=this.userMap).call(o))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),r=null!==(s=r)&&void 0!==s?s:kx(6,""),i=null!==(a=i)&&void 0!==a?a:this._sequence++;const l={_id:r,_type:e,_seq:i,_message:t,token:"".concat(this.token,"_").concat(c)};LO("SHOW_P2P_LOG")&&dN.debug("send message",l,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(l)).forEach((e=>{this.signal.request(xM.DATA_STREAM,{payload:Tx(this.encoder.encode(e))})}));const d=new rp(((t,i)=>{const o=window.setTimeout((()=>{this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),this.off(Sj.ABORT,a),dN.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(r)),0===this.userMap.size?i(new jI(MI.INVALID_REMOTE_USER)):i(new jI(MI.TIMEOUT))}),LO("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),s=()=>{o&&window.clearTimeout(o),this.off(Sj.ABORT,a),n&&t()},a=()=>{o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off("res-@".concat(r),c),i(new jI(MI.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(r)))};this.once(Sj.ABORT,a),this.once("res-@".concat(r,"_ack"),s);const c=(n,c)=>{d=!0,o&&window.clearTimeout(o),this.off("res-@".concat(r,"_ack"),s),this.off(Sj.ABORT,a),"success"===n?t(c):i(new jI(MI.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(r)))};let d=!1;n||(this.once("res-@".concat(r),c),Dx(LO("SIGNAL_REQUEST_TIMEOUT")).then((()=>{d||dN.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(r,", ").concat(l))})))}));try{return await d}catch(o){if(o.code===MI.TIMEOUT)return await this.send(e,t,n,r,i);throw o}}onMessage(e){var t;const{_uid:n}=e;let r,i=this.userMap.get(n);if(i)r=i.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==wj.CHECK)return;const{token:t}=e;r=new Map,i={uid:n,isStart:!0,token:t,splitMessageMap:r,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,i),this.signal.emit(NM.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var o;const{id:t,total:i}=e,s=null!==(o=r.get(t))&&void 0!==o?o:[];if(s.push(e),r.has(t)||r.set(t,s),s.length!==i)return;{const i=K_(s).call(s,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");r.delete(t),(e=JSON.parse(i))._uid=n}}const{_type:s,token:a}=e;if(Lr(t=[wj.ACK,wj.CHECK]).call(t,s))return s===wj.CHECK&&this.handleCheckToken(i,a),void this.receiveMessage(e);a==="".concat(i.token,"_").concat(this.token)?this.handleReceivedMessage(e):dN.debug('Receive unexpected message", '.concat(a,", cur_token: ").concat(i.token,"_").concat(this.token),e)}check(){const e={_id:kx(6,""),token:this.token,_type:wj.CHECK};LO("SHOW_P2P_LOG")&&dN.debug("send message",e),this.signal.request(xM.DATA_STREAM,{payload:Tx(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:wj.ACK,token:this.token};LO("SHOW_P2P_LOG")&&dN.debug("send message",t),this.signal.request(xM.DATA_STREAM,{payload:Tx(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(wj.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const r=t.get(n);t.delete(n),this.receiveMessage(r),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:r}=e,i=this.userMap.get(n),{receivedMessagesMap:o,isStart:s,nextExpectedSequenceNumber:a}=i;if(r<a)return this.ack(e._id),void dN.debug("[external-signal] receive old message, seq: ".concat(r,", ").concat(e._message));o.set(r,e),s&&r===a&&(this.receiveMessage(e),o.delete(a),i.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:r,_uid:i}=e;if(LO("SHOW_P2P_LOG")&&dN.debug("receive message",e),t){let o;switch(e._type!==wj.ACK&&(r&&(o=JSON.parse(r)),this.ack(e._id)),e._type){case wj.CANDIDATE:case wj.CONTROL:this.signal.emit(n,o,i);break;case wj.PUBLISH:case wj.UNPUBLISH:case wj.RESTART_ICE:case wj.CALL:o.uid=i,px(this.signal,n,o).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case wj.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case wj.RESPONSE:{const{success:e,message:n}=o;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<aq.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),r=kx(6,"");let i=0,o=800;const s=Math.ceil(e.length/o);for(;e.length>0;){i++;const a={id:r,index:i,total:s,payload:e.slice(0,o),token:"".concat(this.token,"_").concat(n)};JSON.stringify(a).length>aq.MAX_MESSAGE_SIZE?o-=50:(t.push(a),e=e.slice(o))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(dN.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{dN.debug("token timeout, ".concat(t)),this.reset(e.uid)}),LO("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await px(this.signal,wj.CALL,void 0),t=await this.send(wj.CALL,e);this.signal.emit(IM.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(Sj.ABORT),this.signal.emit(NM.ON_USER_OFFLINE,{uid:n.uid,reason:Cj.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(dN.debug("change local token from ".concat(t," to ").concat(t)),this.token=kx(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(Sj.ABORT)}}wC(aq,"MAX_SIZE",1),wC(aq,"MAX_MESSAGE_SIZE",1024);class cq extends ZI{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===RM.CONNECTED?this.emit(IM.WS_CONNECTED):e===RM.RECONNECTING?this.emit(IM.WS_RECONNECTING,this._websocketReconnectReason):e===RM.CLOSED&&this.emit(IM.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),wC(this,"_disconnectedReason",void 0),wC(this,"_websocketReconnectReason",void 0),wC(this,"_connectionState",RM.CLOSED),wC(this,"reconnectToken",void 0),wC(this,"p2pToken",void 0),wC(this,"websocket",void 0),wC(this,"openConnectionTime",void 0),wC(this,"clientId",void 0),wC(this,"lastMsgTime",Date.now()),wC(this,"uploadCache",[]),wC(this,"uploadCacheInterval",void 0),wC(this,"rttRolling",new Qx(5)),wC(this,"pingpongTimer",void 0),wC(this,"pingpongTimeoutCount",0),wC(this,"joinResponse",void 0),wC(this,"multiIpOption",void 0),wC(this,"initError",void 0),wC(this,"spec",void 0),wC(this,"store",void 0),wC(this,"_external_signal",void 0),wC(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(IM.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case NM.ON_DATA_STREAM:return void this.handleDataStream(t._message);case NM.MUTE_AUDIO:case NM.MUTE_VIDEO:case NM.ON_P2P_LOST:case NM.ON_USER_ONLINE:return;case NM.ON_USER_OFFLINE:const{uid:e}=t._message;return dN.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===NM.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===NM.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(ox.UID_BANNED);break;case 15:this.close(ox.IP_BANNED);break;case 16:this.close(ox.CHANNEL_BANNED)}if(t._type===NM.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case TM.ERR_LICENSE_MISSING:this.close(ox.LICENSE_MISSING);break;case TM.ERR_LICENSE_EXPIRED:this.close(ox.LICENSE_EXPIRED);break;case TM.ERR_LICENSE_MINUTES_EXCEEDED:this.close(ox.LICENSE_MINUTES_EXCEEDED);break;case TM.ERR_LICENSE_PERIOD_INVALID:this.close(ox.LICENSE_PERIOD_INVALID);break;case TM.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(ox.LICENSE_MULTIPLE_SDK_SERVICE);break;case TM.ERR_LICENSE_ILLEGAL:this.close(ox.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new Vj("gateway-".concat(this.clientId),this.spec.retryConfig,!0,LO("JOIN_GATEWAY_USE_DUAL_DOMAIN"),LO("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===RM.CONNECTED&&this.reconnect("retry",dx.OFFLINE)})),this.p2pToken=kx(6,""),this._external_signal=new aq(this,this.p2pToken)}async request(e,t,n,r){const i=kx(6,""),o={_id:i,_type:e,_message:t},s=this.websocket.connectionID,a=()=>new rp(((e,t)=>{if(this.connectionState===RM.CONNECTED)return e();const n=()=>{this.off(IM.WS_CLOSED,r),e()},r=()=>{this.off(IM.WS_CONNECTED,n),t(new jI(MI.WS_ABORT))};this.once(IM.WS_CONNECTED,n),this.once(IM.WS_CLOSED,r)}));if(this.connectionState!==RM.CONNECTING&&this.connectionState!==RM.RECONNECTING||e===xM.JOIN||e===xM.REJOIN||await a(),this.websocket.sendMessage(o,!0),r)return;const c=new rp(((n,r)=>{let o=!1;const a=(r,i)=>{o=!0,n({isSuccess:"success"===r,message:i||{}}),this.off(IM.WS_CLOSED,c),this.off(IM.WS_RECONNECTING,c),this.emit(IM.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),a);const c=()=>{r(new jI(MI.WS_ABORT,"type: ".concat(e))),this.off(IM.WS_CLOSED,c),this.off(IM.WS_RECONNECTING,c),this.off("res-@".concat(i),a)};this.once(IM.WS_CLOSED,c),this.once(IM.WS_RECONNECTING,c),Dx(LO("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==s||o||(dN.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(IM.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(r){if(this.connectionState===RM.CLOSED||e===xM.LEAVE)throw new jI(MI.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===xM.JOIN||e===xM.REJOIN?null:(await a(),await this.request(e,t))}if(l.isSuccess)return l.message;const d=Number(l.message.error_code||l.message.code),u=xj(d),h=new jI(MI.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message,desc:u.desc});return"success"===u.action?l.message:(dN.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===TM.ERR_TOO_MANY_BROADCASTERS?e===xM.JOIN||e===xM.REJOIN?(this.initError=h,this.close(),h.throw()):h.throw():"failed"===u.action?h.throw():"quit"===u.action?(this.initError=h,this.close(),h.throw()):(d===TM.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,dN.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",dx.MULTI_IP)):this.reconnect(u.action,dx.SERVER_ERROR),e===xM.JOIN||e===xM.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new rp((n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void dN.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(OM.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=LO("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>t&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==RM.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),LO("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new rp(((t,n)=>{this.once(IM.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(IM.WS_CLOSED,(()=>n(this.initError||new jI(MI.WS_ABORT)))),this.connectionState=RM.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||ox.LEAVE,this.connectionState=RM.CLOSED,dN.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=kx(6,""),this._external_signal.clear(),this._external_signal=new aq(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(IM.ABORT_P2P_EXECUTION);const e=await px(this,IM.REQUEST_JOIN_INFO),t=await this.request(xM.JOIN,e);if(!t)return this.emit(IM.REPORT_JOIN_GATEWAY,MI.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(IM.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=RM.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=Cx(e.payload),r=(new TextDecoder).decode(n),i=JSON.parse(r);"total"in i&&"id"in i||Lr(t=Object.values(wj)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(NM.ON_DATA_STREAM,e)}catch(t){this.emit(NM.ON_DATA_STREAM,e)}}handleNotification(e){dN.debug("[".concat(this.clientId,"] receive notification: "),e);const t=xj(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(ox.UID_BANNED),void this.close()):void this.reconnect(t.action,dx.SERVER_ERROR);dN.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=LO("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(dN.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>LO("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",dx.TIMEOUT):this.request(xM.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),LO("REPORT_STATS")&&this.send(xM.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(kM.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(IM.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(kM.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(kM.CLOSED,(()=>{this.connectionState=RM.CLOSED})),this.websocket.on(kM.FAILED,(()=>{this._disconnectedReason=ox.NETWORK_ERROR,this.connectionState=RM.CLOSED})),this.websocket.on(kM.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===RM.CONNECTED?this.connectionState=RM.RECONNECTING:this.connectionState=RM.CONNECTING})),this.websocket.on(kM.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(dN.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):dN.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(kM.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(IM.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof jI&&e.code===MI.UNEXPECTED_RESPONSE&&e.data.code===TM.ERR_NO_AUTHORIZED)return dN.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",dx.SERVER_ERROR);dN.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",dx.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(kM.REQUEST_NEW_URLS,((e,t)=>{px(this,IM.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(kM.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(NM.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}const lq={name:"P2PChannel",create:function(e){let{store:t,statsCollector:n}=e;return new oq(t,n)},createSubmodule:function(e){let{store:t,spec:n}=e;return new cq(n,t)}};function dq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dq(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class hq{constructor(e){wC(this,"sessionDesc",void 0),wC(this,"localCapabilities",void 0),wC(this,"rtpCapabilities",void 0),wC(this,"candidates",void 0),wC(this,"_originCandidates",void 0),wC(this,"iceParameters",void 0),wC(this,"dtlsParameters",void 0),wC(this,"setup",void 0),wC(this,"currentMidIndex",void 0),wC(this,"cname",void 0),e=bx(e);const{iceParameters:t,dtlsParameters:n,candidates:r,rtpCapabilities:i,setup:o,localCapabilities:s,sdkCodec:a,cname:c}=e,l=HO("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=i,this.candidates=r,this._originCandidates=bx(r),this.iceParameters=t,this.dtlsParameters=n,this.setup=o,this.localCapabilities=s,this.cname=c;for(let d=0;d<l.mediaDescriptions.length;d++){const e=l.mediaDescriptions[d];if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=o,"video"===e.media.mediaType){e.media.fmts=i.videoCodecs.map((e=>e.payloadType.toString(10)));let t=i.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Lr(n=t.encodingName.toLowerCase()).call(n,a)}));0===t.length&&(t=i.videoCodecs),e.attributes.payloads=t,e.attributes.extmaps=i.videoExtensions}"audio"===e.media.mediaType&&(e.media.fmts=i.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions),l.mediaDescriptions[d]=this.mungMediaDesc(e)}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return zO(this.sessionDesc)}send(e,t,n){const{ssrcs:r,ssrcGroups:i}=gU(t,this.cname),o=this.sessionDesc.mediaDescriptions.find((t=>e===aj.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),s=r[0].attributes.label,a=r[0].attributes.mslabel;return o.attributes.ssrcs=o.attributes.ssrcs.concat(r),o.attributes.ssrcGroups=o.attributes.ssrcGroups.concat(i),{id:s,mslabel:a}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],r=[],i=[];t.attributes.ssrcs.forEach((t=>{Lr(e).call(e,t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Lr(t=i.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),i=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=i}))}stopReceiving(e){}updateCandidates(e){const t=this._originCandidates.filter((e=>"udp"===e.transport)),n=[];if(t.forEach((e=>{n.push(uq(uq({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})),0!==t.length){switch(e){case cj.TCP_RELAY:this.candidates=n;break;case cj.UDP_TCP_RELAY:case cj.RELAY:this.candidates=[...t,...n];break;default:this.candidates=t}for(const e of this.sessionDesc.mediaDescriptions)e.attributes.candidates=this.candidates}}restartICE(e){e=bx(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=bx(e);return vU(n,t),_U(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const r=this.sessionDesc.mediaDescriptions.find((t=>e===aj.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(r){const e=r.attributes.ssrcs.find((e=>e.attributes.label===t));var i;e&&(e.attributes.label=n,null===(i=e.attributes.msid)||void 0===i||i.replace(t,n))}}mungMediaDesc(e){const t=bx(e);return yU(t),function(e){const t=e.attributes.extmaps.find((e=>cU(e.extensionName)));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}var pq;function fq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fq(Object(n),!0).forEach((function(t){wC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let gq=(pq=class e extends sj{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Lr(t=Object.keys(FO)).call(t,e)})))]}constructor(t,n){super(t,n),wC(this,"store",void 0),wC(this,"peerConnection",void 0),wC(this,"remoteSDP",void 0),wC(this,"initialOffer",void 0),wC(this,"statsFilter",void 0),wC(this,"useRTX",!1),wC(this,"localCapabilities",void 0),wC(this,"localCandidateCount",0),wC(this,"allCandidatesReceived",!1),wC(this,"establishPromise",void 0),wC(this,"mutex",void 0),this.store=n,this.mutex=new Gx("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=wO(this.peerConnection,LO("STATS_UPDATE_INTERVAL"),void 0,hI()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=hU(e.sdp),n=uU(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:LO("FILTER_VIDEO_FEC"),filterAudioFec:LO("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,mq(mq({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new jI(MI.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async updateRemoteConnect(){}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new hq(mq(mq({},e),{},{rtpCapabilities:e.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const t=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:t})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new jI(MI.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(e){}send(e,t){var n=this;return sR((function*(){const r=yield aR(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),i=yield aR(n.peerConnection.createOffer()),o=HO(i.sdp),s=e.map((e=>{const t=e._mediaStreamTrack,r=o.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const r=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){const e=i.find((e=>-1!==e.ssrcIds.indexOf(r[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)}));let a;try{a=yield s}catch(e){throw r.forEach((e=>{dI()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),e}const c=n.mungSendOfferSDP(i.sdp,e);n.remoteSDP.receive(e,t,a);const l=n.remoteSDP.toString();return yield aR(n.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield aR(n.applySendEncodings(r,e)),yield aR(n.peerConnection.setRemoteDescription({type:"answer",sdp:l})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:s[t],id:n}}))}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{dI()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:i}=this.remoteSDP.send(e,t,r),o=new rp(((t,r)=>{const o=setTimeout((()=>{r(new Error("Cannot receive track, id: ".concat(n)))}),1e4),s=r=>{const a=iI();if(("Safari"===a.name&&11===Number(a.version)||pI())&&r.track.id!==n&&r.streams[0].id===i){var c;const i=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(i)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(r.track)};this.peerConnection.addEventListener("track",s)})),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await o,id:n}}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if(dI()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if(dI()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}restartICE(e){var t=this;return sR((function*(){const n=yield aR(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");const n=bN().supportPCSetConfiguration;if(e===cj.RELAY&&!n)return;if(n){const n=t.peerConnection.getConfiguration(),r=e===cj.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(dN.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}e!==cj.RELAY&&t.remoteSDP.updateCandidates(e);const r=yield aR(t.peerConnection.createOffer({iceRestart:!0}));if(!r.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const i=hU(r.sdp),{remoteIceParameters:o}=yield i.iceParameters;t.remoteSDP.restartICE(o);const s=t.remoteSDP.toString();yield aR(t.peerConnection.setLocalDescription(r)),yield aR(t.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(e){dN.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),e)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new jI(MI.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new jI(MI.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,dN.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,dN.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),LO("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(sx(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),LO("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return dN.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!bN().supportSetRtpSenderParameters)return dN.warn("Browser not support set rtp-sender parameters");const r={},i={};if(e instanceof NP)switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(LO("DSCP_TYPE")&&OI()){var o;const e=LO("DSCP_TYPE");Lr(o=["very-low","low","medium","high"]).call(o,e)&&(i.networkPriority=e)}const s=t.getParameters(),a=null===(n=s.encodings)||void 0===n?void 0:n[0];a&&Object.assign(a,i),Object.assign(s,r),dN.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!bN().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r&&i&&await this.updateRtpSenderEncodings(i,r)}}catch(e){dN.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=HO(e);return t.forEach(((e,t)=>{const r=e._mediaStreamTrack,i=n.mediaDescriptions.find((e=>e.attributes.mid===r.kind));i&&vU(i,e)})),zO(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:r,mslabel:i}=t;const{kind:o}=e[n];return new rp(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),s=t=>{const a=iI();if("Safari"===a.name&&11===Number(a.version)&&t.track.id!==r&&t.streams[0].id===i){var c;const i=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(o,r,t.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:i,id:r})}if(t.track.id===r)return this.peerConnection.removeEventListener("track",s),clearTimeout(n),void e({track:t.track,id:r})};this.peerConnection.addEventListener("track",s)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(r),await rp.all(t)}catch(e){throw new jI(MI.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(bN().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}},bM(pq.prototype,"connect",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"connect"),pq.prototype),bM(pq.prototype,"stopSending",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"stopSending"),pq.prototype),bM(pq.prototype,"receive",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"receive"),pq.prototype),bM(pq.prototype,"stopReceiving",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"stopReceiving"),pq.prototype),bM(pq.prototype,"muteRemote",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"muteRemote"),pq.prototype),bM(pq.prototype,"unmuteRemote",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"unmuteRemote"),pq.prototype),bM(pq.prototype,"muteLocal",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"muteLocal"),pq.prototype),bM(pq.prototype,"unmuteLocal",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"unmuteLocal"),pq.prototype),bM(pq.prototype,"close",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"close"),pq.prototype),bM(pq.prototype,"updateEncoderConfig",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"updateEncoderConfig"),pq.prototype),bM(pq.prototype,"updateSendParameters",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"updateSendParameters"),pq.prototype),bM(pq.prototype,"replaceTrack",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"replaceTrack"),pq.prototype),bM(pq.prototype,"getRemoteSSRC",[vq],Object.getOwnPropertyDescriptor(pq.prototype,"getRemoteSSRC"),pq.prototype),pq);function vq(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return await r.apply(this,o)}finally{n()}},n}const yq={name:"PlanBConnection",create:function(e){let{store:t,spec:n}=e;return new gq(n,t)}};AO(),PO("PROCESS_ID","process-".concat(kx(8,""),"-").concat(kx(4,""),"-").concat(kx(4,""),"-").concat(kx(4,""),"-").concat(kx(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void dN.error("Error loading sdk config",e.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();dN.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(kO,e)){const{value:r,expires:i}=t[e];if(i&&i<=n)return;jO[e]=r,kO[e]=r}}))}catch(t){dN.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(jO.AREAS)&&jO.AREAS.length>0&&nB(jO.AREAS,!0);const _q=(e,t,n)=>{dN.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),PO(e,t,n)};BU(BY,!1),BU(YY,!1),BU(iW,!1),BU(SK,!1),BU(MY,!1),BU(lq,!1),BU(yq,!1);const Eq=function(e){const t=new ZI,n=e,r={getListeners:t.getListeners.bind(t),on:(e,n)=>(function(e,t){e===yj.SECURITY_POLICY_VIOLATION&&iH(t,!0)}(e,n),t.on.bind(t)(e,n)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return nH(nH({},n),r)}({__TRACK_LIST__:jN,VERSION:CO,BUILD:NO,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:_q,getParameter:LO,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;const n=await async function(e){let t;return bN().supportUnifiedPlan?(e.addTransceiver("video",{direction:"recvonly"}),e.addTransceiver("audio",{direction:"recvonly"}),t=(await e.createOffer()).sdp):t=(await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,t}(t);if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(e){throw new _N(MI.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e},checkSystemRequirements:function(){const e=yN.reportApiInvoke(null,{name:tx.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:nx.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r),t&&xI()&&mI(75)&&(new e).close()}catch(e){return dN.error("check system requirement failed: ",e),!1}let n=!1;const r=iI();r.name===eI.CHROME&&Number(r.version)>=58&&("WebKit"!==nI.engine.name||function(){const e=iI();if(cI()){if(e.os===$R.MAC_OS)return!0;if(e.os===$R.IOS){const e=nI.os.version&&nI.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}())&&(n=!0),(r.name===eI.FIREFOX&&Number(r.version)>=56||r.name===eI.OPERA&&Number(r.version)>=45||r.name===eI.SAFARI&&Number(r.version)>=11||"WebKit"===r.name&&(pI()||TI())&&r.osVersion&&Number(r.osVersion.split(".")[0])>=11||RI()||iI().name===eI.QQ)&&(n=!0),dN.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i},getDevices:function(e){return PD.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return PD.getRecordingDevices(e)},getCameras:function(e){return PD.getCamerasDevices(e)},getElectronScreenSources:TD,getPlaybackDevices:function(e){return PD.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=kx(5,"client-"),r=yN.reportApiInvoke(null,{id:n,name:tx.CREATE_CLIENT,options:[t],tag:nx.TRACER});try{!function(e){BI(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),BI(e.mode,"config.mode",["rtc","live","p2p"]),void 0!==e.audioCodec&&BI(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&WI(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&ax(e.turnServer),void 0!==e.httpRetryConfig&&rx(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&rx(e.websocketRetryConfig)}(t)}catch(e){throw r.onError(e),e}return(_I(16,0,!0)||EI(16,0,!0))&&("vp9"===t.codec&&(t.codec="vp8",dN.debug("browser not support vp9, force use vp8")),PO("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),r.onSuccess(),new XW(qW(qW({forceWaitGatewayResponse:!0},t),{},{role:Lr(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}),n)},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=LO("CAMERA_CAPTURE_CONFIG"),n=kx(8,"track-cam-"),r=yN.reportApiInvoke(null,{id:n,tag:nx.TRACER,name:tx.CREATE_CAM_VIDEO_TRACK,options:[uD({},e),t]});t&&(e.encoderConfig=t);const i=XD(e);let o=null;dN.info("start create camera video track with config",JSON.stringify(e),"trackId",n);try{o=(await OD({video:i},n)).getVideoTracks()[0]||null}catch(e){throw r.onError(e),e}if(!o){const e=new jI(MI.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(e),e.throw(dN)}e.optimizationMode&&kP(n,o,e,DN(e.encoderConfig));const s=new DP(o,e,i,e.scalabiltyMode?PN(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,n);return r.onSuccess(s.getTrackId()),dN.info("create camera video success, trackId:",n),s},createCustomVideoTrack:function(e){const t=kx(8,"track-cus-"),n=yN.reportApiInvoke(null,{id:t,tag:nx.TRACER,name:tx.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),r=new NP(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?PN(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,t,[FN.CUSTOM_TRACK]);return n.onSuccess(r.getTrackId()),dN.info("create custom video track success with config",e,"trackId",r.getTrackId()),r},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n="object"==typeof t?function(e){return JD(e)}(t):void 0;n&&(t="auto");const r=kx(8,"track-scr-v-"),i=yN.reportApiInvoke(null,{id:r,tag:nx.TRACER,name:tx.CREATE_SCREEN_VIDEO_TRACK,options:[uD({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const o=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&lI()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:r,surfaceSwitching:i,systemAudio:o,preferCurrentTab:s}=e;(fI(107)||vI(107)||bI(93))&&(n&&(BI(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(BI(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(BI(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(fI(105)||vI(105)||bI(91))&&o&&(BI(o,"systemAudio",["exclude","include"]),t.systemAudio=o),(fI(94)||vI(94)||bI(80))&&s&&(t.preferCurrentTab=!0),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const a=e.encoderConfig?kN(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:a?a.width:void 0,maxHeight:a?a.height:void 0},a&&(a.frameRate&&("number"==typeof a.frameRate?(t.mandatory.maxFrameRate=a.frameRate,t.mandatory.minFrameRate=a.frameRate):(t.mandatory.maxFrameRate=a.frameRate.max||a.frameRate.ideal||a.frameRate.exact||void 0,t.mandatory.minFrameRate=a.frameRate.min||a.frameRate.ideal||a.frameRate.exact||void 0),t.frameRate=a.frameRate),a.width&&(t.width=a.width),a.height&&(t.height=a.height)),t}(e);let s=null,a=null;const c=bN();if(!c.supportShareAudio&&"enable"===t){const e=new jI(MI.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(e),e.throw(dN)}dN.info("start create screen video track with config",e,"withAudio",t,"trackId",r);const l=c.supportShareAudio&&"disable"!==t;try{const e=await OD({screen:o,screenAudio:l?n||!0:void 0},r);s=e.getVideoTracks()[0]||null,a=e.getAudioTracks()[0]||null}catch(e){throw i.onError(e),e}if(!s){const e=new jI(MI.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(e),e.throw(dN)}if(!a&&"enable"===t){s&&s.stop();const e=new jI(MI.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw(dN)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(kP(r,s,e,e.encoderConfig&&kN(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const d=new NP(s,e.encoderConfig?kN(e.encoderConfig):{},e.scalabiltyMode?PN(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r,[FN.SCREEN_TRACK]);if(!a)return i.onSuccess(d.getTrackId()),dN.info("create screen video track success","video:",d.getTrackId()),d;const u=new Wk(a,void 0,kx(8,"track-scr-a-"),!1);return i.onSuccess([d.getTrackId(),u.getTrackId()]),dN.info("create screen video track success","video:",d.getTrackId(),"audio:",u.getTrackId()),[d,u]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=LO("CAMERA_CAPTURE_CONFIG"),r=kx(8,"track-mic-"),i=kx(8,"track-cam-"),o=yN.reportApiInvoke(null,{id:"".concat(r,"-").concat(i),tag:nx.TRACER,name:tx.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,n]});n&&(t.encoderConfig=n);const s=XD(t),a=QD(e);let c=null,l=null;dN.info("start create camera video track(".concat(i,") and microphone audio track(").concat(r,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await OD({audio:a,video:s},"".concat(r,"-").concat(i));c=e.getAudioTracks()[0],l=e.getVideoTracks()[0]}catch(e){throw o.onError(e),e}if(!c||!l){const e=new jI(MI.UNEXPECTED_ERROR,"can not find tracks in media stream");return o.onError(e),e.throw(dN)}t.optimizationMode&&kP(i,l,t,DN(t.encoderConfig));const d=new Hk(c,e,a,r),u=new DP(l,t,s,t.scalabiltyMode?PN(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,i);return o.onSuccess([d.getTrackId(),u.getTrackId()]),dN.info("create camera video track(".concat(i,") and microphone audio track(").concat(r,") success")),[d,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=kx(8,"track-mic-"),n=yN.reportApiInvoke(null,{id:t,tag:nx.TRACER,name:tx.CREATE_MIC_AUDIO_TRACK,options:[e]}),r=QD(e);let i=null;dN.info("start create microphone audio track with config",JSON.stringify(e),"trackId",t);try{i=(await OD({audio:r},t)).getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!i){const e=new jI(MI.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(dN)}const o=new Hk(i,e,r,t);return n.onSuccess(o.getTrackId()),dN.info("create microphone audio track success, trackId:",t),o},createCustomAudioTrack:function(e){const t=kx(8,"track-cus-"),n=yN.reportApiInvoke(null,{id:t,tag:nx.TRACER,name:tx.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),r=new Wk(e.mediaStreamTrack,e.encoderConfig?MN(e.encoderConfig):{},t,!1);return dN.info("create custom audio track success with config",e,"trackId",r.getTrackId()),n.onSuccess(r.getTrackId()),r},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:i}=e;const o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":i,cacheOnlineFile:n,encoderConfig:r},s=kx(8,"track-buf-"),a=yN.reportApiInvoke(null,{id:s,tag:nx.TRACER,name:tx.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(LO("DISABLE_WEBAUDIO"))throw new jI(MI.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");dN.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",s);const c=i;if(!(i instanceof AudioBuffer))try{i=await async function(e,t){let n=null;if("string"==typeof e){const t=Kk.get(e);if(t)return dN.debug("use cached audio resource: ",e),t;try{n=(await Xx((()=>KR.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new jI(MI.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new rp(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new jI(MI.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new jI(MI.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));n=await t}const r=await function(e){const t=vD();return new rp(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new jI(MI.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&Kk.set(e,r),r}(i,n)}catch(e){return a.onError(e),e.throw(dN)}const l=new Yk(i),d=new zk(c,l,r?MN(r):{},s);return dN.info("create buffer source audio track success, trackId:",s),a.onSuccess(d.getTrackId()),d},setAppType:function(e){if(dN.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw dN.debug("Invalid appType"),new _N(MI.INVALID_PARAMS,"invalid app type",e);PO("APP_TYPE",Math.floor(e))},setLogLevel:function(e){dN.setLogLevel(e)},enableLogUpload:function(){LO("USE_NEW_LOG")?PO("UPLOAD_LOG",!0):dN.enableLogUpload()},disableLogUpload:function(){LO("USE_NEW_LOG")?PO("UPLOAD_LOG",!1):dN.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new jB},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=yN.reportApiInvoke(null,{tag:nx.TRACER,name:tx.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Wk||e instanceof qP)){const e=new _N(MI.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof Wk?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,s=i;const a=Date.now();return new rp((i=>{const c=setInterval((()=>{const l=e.getVolumeLevel();o=l>o?l:o,s=l<s?l:s;const d=o-s>1e-4,u=Date.now()-a;if(d||u>t){clearInterval(c);const t=d,s={duration:u,deviceLabel:r,maxVolumeLevel:o,result:t};dN.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(s))),n.onSuccess(s),i(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=yN.reportApiInvoke(null,{tag:nx.TRACER,name:tx.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof NP||e instanceof KP)){const e=new _N(MI.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof NP?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(dI()||cI())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();const s=document.createElement("canvas");s.width=160,s.height=120;let a=0,c=0;try{const e=Date.now();a=await function(e,t,n,r){let i,o=0,s=null;return new rp(((a,c)=>{function l(){o>r&&i&&(i(),a(o));const t=n.getContext("2d");if(!t){const e=new _N(MI.UNEXPECTED_ERROR,"can not get canvas 2d context.");return dN.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),d=Math.floor(l.data.length/3);if(s){for(let e=0;e<d;e+=3)if(l.data[e]!==s[e])return o+=1,void(s=l.data);s=l.data}else s=l.data}setTimeout((()=>{i&&(i(),a(o))}),t),i=ED((()=>{l()}),30)}))}(o,t,s,4),c=Date.now()-e}catch(e){throw n.onError(e),e}nV===eI.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;const l=a>4,d={duration:c,changedPicNum:a,deviceLabel:r,result:l};return dN.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(d))),n.onSuccess(d),l},setArea:nB,audioElementPlayCenter:FD,resumeAudioContext:function(){FD.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){eH.processExternalMediaAEC(e)},registerExtensions:function(e){const t=LO("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Lr(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=dN.extLog,n.reporter.hookApiInvoke=yN.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=LO(e)}))})),_q("PLUGIN_INFO",t)},ChannelMediaRelayError:qM,ChannelMediaRelayEvent:YM,ChannelMediaRelayState:KM,RemoteStreamFallbackType:HN,RemoteStreamType:WN,ConnectionDisconnectedReason:ox,AudienceLatencyLevelType:ix,AREAS:$M,preload:async function(e,t,n,r){return mV(e,t,n,r)}});return Object.defineProperties(Eq,{onAudioAutoplayFailed:{get:()=>MD.onAudioAutoplayFailed,set:e=>{MD.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>MD.onAutoplayFailed,set:e=>{MD.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Eq._onSecurityPolicyViolation,set(e){Eq._onSecurityPolicyViolation=e,iH(e)}},__CLIENT_LIST__:{get:()=>LO("SHOW_GLOBAL_CLIENT_LIST")?LL:[]}}),PD.on(rD.CAMERA_DEVICE_CHANGED,(e=>{dN.info("camera device changed",JSON.stringify(e)),Eq.onCameraChanged&&Eq.onCameraChanged(e),Eq.safeEmit(yj.CAMERA_CHANGED,e)})),PD.on(rD.RECORDING_DEVICE_CHANGED,(e=>{dN.info("microphone device changed",JSON.stringify(e)),Eq.onMicrophoneChanged&&Eq.onMicrophoneChanged(e),Eq.safeEmit(yj.MICROPHONE_CHANGED,e)})),PD.on(rD.PLAYOUT_DEVICE_CHANGED,(e=>{dN.debug("playout device changed",JSON.stringify(e)),Eq.onPlaybackDeviceChanged&&Eq.onPlaybackDeviceChanged(e),Eq.safeEmit(yj.PLAYBACK_DEVICE_CHANGED,e)})),FD.onAutoplayFailed=()=>{dN.info("detect audio element autoplay failed"),MD.onAudioAutoplayFailed&&MD.onAudioAutoplayFailed()},gD.on("autoplay-failed",(()=>{dN.info("detect webaudio autoplay failed"),MD.onAudioAutoplayFailed&&MD.onAudioAutoplayFailed(),Eq.safeEmit(yj.AUTOPLAY_FAILED)})),gD.on(AN.STATE_CHANGE,((e,t)=>{dN.info("audio context state changed: ".concat(t," => ").concat(e)),Eq.onAudioContextStateChanged&&Eq.onAudioContextStateChanged(e,t),Eq.safeEmit(yj.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),vx.on(hx.NETWORK_STATE_CHANGE,((e,t)=>{dN.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=Eq),Eq}()},2110:(e,t,n)=>{"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var l=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var s=d(n);u&&(s=s.concat(u(n)));for(var a=c(t),m=c(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(n,v);try{l(t,v,y)}catch(_){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,E=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case g:case m:case c:return e;default:return t}}case i:return t}}}function w(e){return b(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||b(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===o},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===u||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===_||e.$$typeof===E||e.$$typeof===v)},t.typeOf=b},8309:(e,t,n)=>{"use strict";e.exports=n(746)},3484:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function s(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var a,c=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),o(r,n.prototype),s(r),r}return i(t,e),t}(Error);class l extends c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}l.kind="Exception";class d extends l{}d.kind="ArgumentException";class u extends l{}u.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new u("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new h(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class p extends l{static getChecksumInstance(){return new p}}p.kind="ChecksumException";class f{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class m{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class g extends l{}g.kind="IndexOutOfBoundsException";class v extends g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}v.kind="ArrayIndexOutOfBoundsException";class y{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){y.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new u("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new v(t);if(n>e)throw new v(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map((e=>Array.from({length:t}).fill(n)))}static createInt32Array(e,t,n){return Array.from({length:e}).map((e=>Int32Array.from({length:t}).fill(n)))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return m.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=y.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const o=i+r>>1,s=n(t,e[o]);if(s>0)r=o+1;else{if(!(s<0))return o;i=o-1}}return-r-1}static numberComparator(e,t){return e-t}}class _{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}_.MIN_VALUE_32_BITS=-2147483648,_.MAX_VALUE=Number.MAX_SAFE_INTEGER;class E{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?E.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=E.makeArray(e);m.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=n[r]}const s=32*r+_.numberOfTrailingZeros(i);return s>t?t:s}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=~n[r]}const s=32*r+_.numberOfTrailingZeros(i);return s>t?t:s}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new u;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let o=n;o<=r;o++){const s=(2<<(o<r?31:31&t))-(1<<(o>n?0:31&e));i[o]|=s}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new u;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let s=r;s<=i;s++){const a=(2<<(s<i?31:31&t))-(1<<(s>r?0:31&e))&4294967295;if((o[s]&a)!==(n?a:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new u("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new u("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let i=1;i<n;i++){const n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof E))return!1;const t=e;return this.size===t.size&&y.equals(this.bits,t.bits)}hashCode(){return 31*this.size+y.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new E(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(a||(a={}));var b,w=a;class S extends l{static getFormatInstance(){return new S}}S.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(b||(b={}));class A{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];this.otherEncodingNames=i,A.VALUE_IDENTIFIER_TO_ECI.set(e,this),A.NAME_TO_ECI.set(n,this);const s=this.values;for(let a=0,c=s.length;a!==c;a++){const e=s[a];A.VALUES_TO_ECI.set(e,this)}for(const a of i)A.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new S("incorect value");const t=A.VALUES_TO_ECI.get(e);if(void 0===t)throw new S("incorect value");return t}static getCharacterSetECIByName(e){const t=A.NAME_TO_ECI.get(e);if(void 0===t)throw new S("incorect value");return t}equals(e){if(!(e instanceof A))return!1;const t=e;return this.getName()===t.getName()}}A.VALUE_IDENTIFIER_TO_ECI=new Map,A.VALUES_TO_ECI=new Map,A.NAME_TO_ECI=new Map,A.Cp437=new A(b.Cp437,Int32Array.from([0,2]),"Cp437"),A.ISO8859_1=new A(b.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),A.ISO8859_2=new A(b.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),A.ISO8859_3=new A(b.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),A.ISO8859_4=new A(b.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),A.ISO8859_5=new A(b.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),A.ISO8859_6=new A(b.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),A.ISO8859_7=new A(b.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),A.ISO8859_8=new A(b.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),A.ISO8859_9=new A(b.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),A.ISO8859_10=new A(b.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),A.ISO8859_11=new A(b.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),A.ISO8859_13=new A(b.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),A.ISO8859_14=new A(b.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),A.ISO8859_15=new A(b.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),A.ISO8859_16=new A(b.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),A.SJIS=new A(b.SJIS,20,"SJIS","Shift_JIS"),A.Cp1250=new A(b.Cp1250,21,"Cp1250","windows-1250"),A.Cp1251=new A(b.Cp1251,22,"Cp1251","windows-1251"),A.Cp1252=new A(b.Cp1252,23,"Cp1252","windows-1252"),A.Cp1256=new A(b.Cp1256,24,"Cp1256","windows-1256"),A.UnicodeBigUnmarked=new A(b.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),A.UTF8=new A(b.UTF8,26,"UTF8","UTF-8"),A.ASCII=new A(b.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),A.Big5=new A(b.Big5,28,"Big5"),A.GB18030=new A(b.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),A.EUC_KR=new A(b.EUC_KR,30,"EUC_KR","EUC-KR");class C extends l{}C.kind="UnsupportedOperationException";class T{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!T.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof A?e:A.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(T.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(A.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new C("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(A.UTF8)||e.equals(A.ISO8859_1)||e.equals(A.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class R{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return T.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(w.CHARACTER_SET))return t.get(w.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,o=!0,s=0,a=0,c=0,l=0,d=0,u=0,h=0,p=0,f=0,m=0,g=0;const v=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let y=0;y<n&&(r||i||o);y++){const t=255&e[y];o&&(s>0?0===(128&t)?o=!1:s--:0!==(128&t)&&(0===(64&t)?o=!1:(s++,0===(32&t)?a++:(s++,0===(16&t)?c++:(s++,0===(8&t)?l++:o=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&g++),i&&(d>0?t<64||127===t||t>252?i=!1:d--:128===t||160===t||t>239?i=!1:t>160&&t<224?(u++,p=0,h++,h>f&&(f=h)):t>127?(d++,h=0,p++,p>m&&(m=p)):(h=0,p=0))}return o&&s>0&&(o=!1),i&&d>0&&(i=!1),o&&(v||a+c+l>0)?R.UTF8:i&&(R.ASSUME_SHIFT_JIS||f>=3||m>=3)?R.SHIFT_JIS:r&&i?2===f&&2===u||10*g>=n?R.SHIFT_JIS:R.ISO88591:r?R.ISO88591:i?R.SHIFT_JIS:o?R.UTF8:R.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=-1;function o(e,t,r,o,s,a){if("%%"===e)return"%";if(void 0===n[++i])return;e=o?parseInt(o.substr(1)):void 0;let c,l=s?parseInt(s.substr(1)):void 0;switch(a){case"s":c=n[i];break;case"c":c=n[i][0];break;case"f":c=parseFloat(n[i]).toFixed(e);break;case"p":c=parseFloat(n[i]).toPrecision(e);break;case"e":c=parseFloat(n[i]).toExponential(e);break;case"x":c=parseInt(n[i]).toString(l||16);break;case"d":c=parseFloat(parseInt(n[i],l||10).toPrecision(e)).toFixed(0)}c="object"===typeof c?JSON.stringify(c):(+c).toString(l);let d=parseInt(r),u=r&&r[0]+""==="0"?"0":" ";for(;c.length<d;)c=void 0!==t?c+u:u+c;return c}let s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)}static getBytes(e,t){return T.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}R.SHIFT_JIS=A.SJIS.getName(),R.GB2312="GB2312",R.ISO88591=A.ISO8859_1.getName(),R.EUC_JP="EUC_JP",R.UTF8=A.UTF8.getName(),R.PLATFORM_DEFAULT_ENCODING=R.UTF8,R.ASSUME_SHIFT_JIS=!1;class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=R.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class x{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new u("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new x(n,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new u("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,o=0,s=-1,a=0,c=0;for(;c<e.length;)if("\n"===e.charAt(c)||"\r"===e.charAt(c)){if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new u("row lengths do not match");o=i,a++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,r[i]=!0,i++;else{if(e.substring(c,c+n.length)!==n)throw new u("illegal character encountered: "+e.substring(c));c+=n.length,r[i]=!1,i++}if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new u("row lengths do not match");a++}const l=new x(s,a);for(let d=0;d<i;d++)r[d]&&l.set(Math.floor(d%s),Math.floor(d/s));return l}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new u("input matrix dimensions do not match");const t=new E(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*n,s=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[o+e]^=s[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new u("Left and top must be nonnegative");if(r<1||n<1)throw new u("Height and width must be at least 1");const i=e+n,o=t+r;if(o>this.height||i>this.width)throw new u("The region must fit inside the matrix");const s=this.rowSize,a=this.bits;for(let c=t;c<o;c++){const t=c*s;for(let n=e;n<i;n++)a[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new E(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let o=0;o<n;o++)t.setBulk(32*o,r[i+o]);return t}setRow(e,t){m.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new E(e),r=new E(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,o=t,s=-1,a=-1;for(let c=0;c<t;c++)for(let e=0;e<n;e++){const t=r[c*n+e];if(0!==t){if(c<o&&(o=c),c>a&&(a=c),32*e<i){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<i&&(i=32*e+n)}if(32*e+31>s){let n=31;for(;t>>>n===0;)n--;32*e+n>s&&(s=32*e+n)}}}return s<i||a<o?null:Int32Array.from([i,o,s-i+1,a-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const o=t[n];let s=0;for(;0===(o<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const o=t[n];let s=31;for(;o>>>s===0;)s--;return i+=s,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof x))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&y.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+y.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new I;for(let i=0,o=this.height;i<o;i++){for(let n=0,o=this.width;n<o;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new x(this.width,this.height,this.rowSize,this.bits.slice())}}class O extends l{static getNotFoundInstance(){return new O}}O.kind="NotFoundException";class N extends f{constructor(e){super(e),this.luminances=N.EMPTY,this.buckets=new Int32Array(N.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new E(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),o=this.buckets;for(let a=0;a<r;a++)o[(255&i[a])>>N.LUMINANCE_SHIFT]++;const s=N.estimateBlackPoint(o);if(r<3)for(let a=0;a<r;a++)(255&i[a])<s&&t.set(a);else{let e=255&i[0],n=255&i[1];for(let o=1;o<r-1;o++){const r=255&i[o+1];(4*n-e-r)/2<s&&t.set(o),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new x(t,n);this.initArrays(t);const i=this.buckets;for(let a=1;a<5;a++){const r=Math.floor(n*a/5),o=e.getRow(r,this.luminances),s=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<s;e++)i[(255&o[e])>>N.LUMINANCE_SHIFT]++}const o=N.estimateBlackPoint(i),s=e.getMatrix();for(let a=0;a<n;a++){const e=a*t;for(let n=0;n<t;n++)(255&s[e+n])<o&&r.set(n,a)}return r}createBinarizer(e){return new N(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<N.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let l=0;l<t;l++)e[l]>i&&(r=l,i=e[l]),e[l]>n&&(n=e[l]);let o=0,s=0;for(let l=0;l<t;l++){const t=l-r,n=e[l]*t*t;n>s&&(o=l,s=n)}if(r>o){const e=r;r=o,o=e}if(o-r<=t/16)throw new O;let a=o-1,c=-1;for(let l=o-1;l>r;l--){const t=l-r,i=t*t*(o-l)*(n-e[l]);i>c&&(a=l,c=i)}return a<<N.LUMINANCE_SHIFT}}N.LUMINANCE_BITS=5,N.LUMINANCE_SHIFT=8-N.LUMINANCE_BITS,N.LUMINANCE_BUCKETS=1<<N.LUMINANCE_BITS,N.EMPTY=Uint8ClampedArray.from([0]);class D extends N{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=D.MINIMUM_DIMENSION&&n>=D.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>D.BLOCK_SIZE_POWER;0!==(t&D.BLOCK_SIZE_MASK)&&i++;let o=n>>D.BLOCK_SIZE_POWER;0!==(n&D.BLOCK_SIZE_MASK)&&o++;const s=D.calculateBlackPoints(r,i,o,t,n),a=new x(t,n);D.calculateThresholdForBlock(r,i,o,t,n,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new D(e)}static calculateThresholdForBlock(e,t,n,r,i,o,s){const a=i-D.BLOCK_SIZE,c=r-D.BLOCK_SIZE;for(let l=0;l<n;l++){let i=l<<D.BLOCK_SIZE_POWER;i>a&&(i=a);const d=D.cap(l,2,n-3);for(let n=0;n<t;n++){let a=n<<D.BLOCK_SIZE_POWER;a>c&&(a=c);const l=D.cap(n,2,t-3);let u=0;for(let e=-2;e<=2;e++){const t=o[d+e];u+=t[l-2]+t[l-1]+t[l]+t[l+1]+t[l+2]}const h=u/25;D.thresholdBlock(e,a,i,h,r,s)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,o){for(let s=0,a=n*i+t;s<D.BLOCK_SIZE;s++,a+=i)for(let i=0;i<D.BLOCK_SIZE;i++)(255&e[a+i])<=r&&o.set(t+i,n+s)}static calculateBlackPoints(e,t,n,r,i){const o=i-D.BLOCK_SIZE,s=r-D.BLOCK_SIZE,a=new Array(n);for(let c=0;c<n;c++){a[c]=new Int32Array(t);let n=c<<D.BLOCK_SIZE_POWER;n>o&&(n=o);for(let i=0;i<t;i++){let t=i<<D.BLOCK_SIZE_POWER;t>s&&(t=s);let o=0,l=255,d=0;for(let i=0,s=n*r+t;i<D.BLOCK_SIZE;i++,s+=r){for(let t=0;t<D.BLOCK_SIZE;t++){const n=255&e[s+t];o+=n,n<l&&(l=n),n>d&&(d=n)}if(d-l>D.MIN_DYNAMIC_RANGE)for(i++,s+=r;i<D.BLOCK_SIZE;i++,s+=r)for(let t=0;t<D.BLOCK_SIZE;t++)o+=255&e[s+t]}let u=o>>2*D.BLOCK_SIZE_POWER;if(d-l<=D.MIN_DYNAMIC_RANGE&&(u=l/2,c>0&&i>0)){const e=(a[c-1][i]+2*a[c][i-1]+a[c-1][i-1])/4;l<e&&(u=e)}a[c][i]=u}}return a}}D.BLOCK_SIZE_POWER=3,D.BLOCK_SIZE=1<<D.BLOCK_SIZE_POWER,D.BLOCK_SIZE_MASK=D.BLOCK_SIZE-1,D.MINIMUM_DIMENSION=5*D.BLOCK_SIZE,D.MIN_DYNAMIC_RANGE=24;class k{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new C("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new C("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new C("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new I;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let i;i=n<64?"#":n<128?"+":n<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class P extends k{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new P(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new P(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new P(this.delegate.rotateCounterClockwise45())}}class L extends k{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=L.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return L.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,o=0,s=e.length;i<s;i+=4,o++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[o]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*L.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return t.width=s,t.height=a,n.translate(s/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=L.makeBufferFromCanvasImageData(t),this}invert(){return new P(this)}}L.DEGREE_TO_RADIANS=Math.PI/180;class M{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var j,U=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?n(e.value):i(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return U(this,void 0,void 0,(function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t}))}getVideoInputDevices(){return U(this,void 0,void 0,(function*(){return(yield this.listVideoInputDevices()).map((e=>new M(e.deviceId,e.label)))}))}findDeviceById(e){return U(this,void 0,void 0,(function*(){const t=yield this.listVideoInputDevices();return t?t.find((t=>t.deviceId===e)):null}))}decodeFromInputVideoDevice(e,t){return U(this,void 0,void 0,(function*(){return yield this.decodeOnceFromVideoDevice(e,t)}))}decodeOnceFromVideoDevice(e,t){return U(this,void 0,void 0,(function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)}))}decodeOnceFromConstraints(e,t){return U(this,void 0,void 0,(function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)}))}decodeOnceFromStream(e,t){return U(this,void 0,void 0,(function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)}))}decodeFromInputVideoDeviceContinuously(e,t,n){return U(this,void 0,void 0,(function*(){return yield this.decodeFromVideoDevice(e,t,n)}))}decodeFromVideoDevice(e,t,n){return U(this,void 0,void 0,(function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)}))}decodeFromConstraints(e,t,n){return U(this,void 0,void 0,(function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)}))}decodeFromStream(e,t,n){return U(this,void 0,void 0,(function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)}))}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return U(this,void 0,void 0,(function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n}))}playVideoOnLoadAsync(e){return new Promise(((t,n)=>this.playVideoOnLoad(e,(()=>t()))))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return U(this,void 0,void 0,(function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}}))}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new d("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new d("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new d("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new d("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new d("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new d("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new d("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new d("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new d("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new d("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise(((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)}))}_decodeOnLoadVideo(e){return U(this,void 0,void 0,(function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)}))}_decodeOnLoadVideoContinuously(e,t){return U(this,void 0,void 0,(function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)}))}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode)return o(new O("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(s){if(t&&s instanceof O||(s instanceof p||s instanceof S)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise(((e,t)=>r(e,t)))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof p||r instanceof S||r instanceof O)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new L(t),r=new D(n);return new h(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach((e=>e.stop())),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class F{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?m.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);m.arraycopy(t,0,n,0,t.length),m.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(j||(j={}));var V,W=j;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(V||(V={}));var H,z,G,Y,K,q,X=V;class J{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Q{exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Z{constructor(e,t){if(0===t.length)throw new u;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=Q.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,i=this.field;for(let o=1;o<r;o++)n=Q.addOrSubtract(i.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const i=n.length-t.length;m.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=Q.addOrSubtract(t[o-i],n[o]);return new Z(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1),s=this.field;for(let a=0;a<n;a++){const e=t[a];for(let t=0;t<i;t++)o[a+t]=Q.addOrSubtract(o[a+t],s.multiply(e,r[t]))}return new Z(s,o)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(i[o],e);return new Z(n,r)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),o=this.field;for(let s=0;s<r;s++)i[s]=o.multiply(n[s],t);return new Z(o,i)}divide(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new u("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const i=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),o),a=e.multiplyByMonomial(i,s),c=t.buildMonomial(i,s);n=n.addOrSubtract(c),r=r.addOrSubtract(a)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class $ extends l{}$.kind="ArithmeticException";class ee extends Q{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let s=0;s<t;s++)r[s]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const o=new Int32Array(t);for(let s=0;s<t-1;s++)o[r[s]]=s;this.logTable=o,this.zero=new Z(this,Int32Array.from([0])),this.one=new Z(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new Z(this,n)}inverse(e){if(0===e)throw new $;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+_.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends l{}te.kind="ReedSolomonException";class ne extends l{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new Z(n,e),i=new Int32Array(t);let o=!0;for(let h=0;h<t;h++){const e=r.evaluateAt(n.exp(h+n.getGeneratorBase()));i[i.length-1-h]=e,0!==e&&(o=!1)}if(o)return;const s=new Z(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),s,t),c=a[0],l=a[1],d=this.findErrorLocations(c),u=this.findErrorMagnitudes(l,d);for(let h=0;h<d.length;h++){const t=e.length-1-n.log(d[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],u[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let i=e,o=t,s=r.getZero(),a=r.getOne();for(;o.getDegree()>=(n/2|0);){let e=i,t=s;if(i=o,s=a,i.isZero())throw new te("r_{i-1} was zero");o=e;let n=r.getZero();const c=i.getCoefficient(i.getDegree()),l=r.inverse(c);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const e=o.getDegree()-i.getDegree(),t=r.multiply(o.getCoefficient(o.getDegree()),l);n=n.addOrSubtract(r.buildMonomial(e,t)),o=o.addOrSubtract(i.multiplyByMonomial(e,t))}if(a=n.multiply(s).addOrSubtract(t),o.getDegree()>=i.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const c=a.getCoefficient(0);if(0===c)throw new te("sigmaTilde(0) was zero");const l=r.inverse(c);return[a.multiplyScalar(l),o.multiplyScalar(l)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const s=i.inverse(t[o]);let a=1;for(let e=0;e<n;e++)if(o!==e){const n=i.multiply(t[e],s),r=0===(1&n)?1|n:-2&n;a=i.multiply(a,r)}r[o]=i.multiply(e.evaluateAt(s),i.inverse(a)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],s))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(H||(H={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=ie.convertBoolArrayToByteArray(r),o=ie.getEncodedData(r),s=new J(i,o,null,null);return s.setNumBits(r.length),s}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=H.UPPER,r=H.UPPER,i="",o=0;for(;o<t;)if(r===H.BINARY){if(t-o<5)break;let s=ie.readCode(e,o,5);if(o+=5,0===s){if(t-o<11)break;s=ie.readCode(e,o,11)+31,o+=11}for(let n=0;n<s;n++){if(t-o<8){o=t;break}const n=ie.readCode(e,o,8);i+=R.castAsNonUtf8Char(n),o+=8}r=n}else{let s=r===H.DIGIT?4:5;if(t-o<s)break;let a=ie.readCode(e,o,s);o+=s;let c=ie.getCharacter(r,a);c.startsWith("CTRL_")?(n=r,r=ie.getTable(c.charAt(5)),"L"===c.charAt(6)&&(n=r)):(i+=c,r=n)}return i}static getTable(e){switch(e){case"L":return H.LOWER;case"P":return H.PUNCT;case"M":return H.MIXED;case"D":return H.DIGIT;case"B":return H.BINARY;default:return H.UPPER}}static getCharacter(e,t){switch(e){case H.UPPER:return ie.UPPER_TABLE[t];case H.LOWER:return ie.LOWER_TABLE[t];case H.MIXED:return ie.MIXED_TABLE[t];case H.PUNCT:return ie.PUNCT_TABLE[t];case H.DIGIT:return ie.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new S;let o=e.length%n,s=new Int32Array(i);for(let h=0;h<i;h++,o+=n)s[h]=ie.readCode(e,o,n);try{new re(t).decode(s,i-r)}catch(u){throw new S(u)}let a=(1<<n)-1,c=0;for(let h=0;h<r;h++){let e=s[h];if(0===e||e===a)throw new S;1!==e&&e!==a-1||c++}let l=new Array(r*n-c),d=0;for(let h=0;h<r;h++){let e=s[h];if(1===e||e===a-1)l.fill(e>1,d,d+n-1),d+=n-1;else for(let t=n-1;t>=0;--t)l[d++]=0!==(e&1<<t)}return l}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(let s=0;s<i.length;s++)i[s]=s;else{let e=r+1+2*_.truncDivision(_.truncDivision(r,2)-1,15),t=r/2,n=_.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+_.truncDivision(r,15);i[t-r-1]=n-e-1,i[t+r]=n+e+1}}for(let s=0,a=0;s<n;s++){let c=4*(n-s)+(t?9:12),l=2*s,d=r-1-l;for(let t=0;t<c;t++){let n=2*t;for(let r=0;r<2;r++)o[a+n+r]=e.get(i[l+r],i[l+t]),o[a+2*c+n+r]=e.get(i[l+t],i[d-r]),o[a+4*c+n+r]=e.get(i[d-r],i[d-t]),o[a+6*c+n+r]=e.get(i[d-t],i[l+r])}a+=8*c}return o}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ie.readCode(e,t,8):ie.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ie.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class oe{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class se{static floatToIntBits(e){return e}}se.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ae){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*se.floatToIntBits(this.x)+se.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,o,s;if(n>=t&&n>=r?(o=e[0],i=e[1],s=e[2]):r>=n&&r>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){const e=i;i=s,s=e}e[0]=i,e[1]=o,e[2]=s}static distance(e,t){return oe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class ce{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class le extends ce{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class de{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=de.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new O}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,s=!1,a=!1,c=!1,l=!1,d=!1;const u=this.width,h=this.height;for(;o;){o=!1;let p=!0;for(;(p||!a)&&t<u;)p=this.containsBlackPoint(n,r,t,!1),p?(t++,o=!0,a=!0):a||t++;if(t>=u){i=!0;break}let f=!0;for(;(f||!c)&&r<h;)f=this.containsBlackPoint(e,t,r,!0),f?(r++,o=!0,c=!0):c||r++;if(r>=h){i=!0;break}let m=!0;for(;(m||!l)&&e>=0;)m=this.containsBlackPoint(n,r,e,!1),m?(e--,o=!0,l=!0):l||e--;if(e<0){i=!0;break}let g=!0;for(;(g||!d)&&n>=0;)g=this.containsBlackPoint(e,t,n,!0),g?(n--,o=!0,d=!0):d||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){const i=t-e;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==o)throw new O;let s=null;for(let t=1;null===s&&t<i;t++)s=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==s)throw new O;let a=null;for(let e=1;null===a&&e<i;e++)a=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==a)throw new O;let c=null;for(let e=1;null===c&&e<i;e++)c=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==c)throw new O;return this.centerEdges(c,o,a,s)}throw new O}getBlackPointOnSegment(e,t,n,r){const i=oe.round(oe.distance(e,t,n,r)),o=(n-e)/i,s=(r-t)/i,a=this.image;for(let c=0;c<i;c++){const n=oe.round(e+c*o),r=oe.round(t+c*s);if(a.get(n,r))return new ae(n,r)}return null}centerEdges(e,t,n,r){const i=e.getX(),o=e.getY(),s=t.getX(),a=t.getY(),c=n.getX(),l=n.getY(),d=r.getX(),u=r.getY(),h=de.CORR;return i<this.width/2?[new ae(d-h,u+h),new ae(s+h,a+h),new ae(c-h,l-h),new ae(i+h,o-h)]:[new ae(d+h,u+h),new ae(s+h,a-h),new ae(c-h,l+h),new ae(i-h,o-h)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let o=e;o<=t;o++)if(i.get(o,n))return!0}else for(let o=e;o<=t;o++)if(i.get(n,o))return!0;return!1}}de.INIT_SIZE=10,de.CORR=1;class ue{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const e=Math.floor(t[o]),s=Math.floor(t[o+1]);if(e<-1||e>n||s<-1||s>r)throw new O;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===r&&(t[o+1]=r-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const e=Math.floor(t[o]),s=Math.floor(t[o+1]);if(e<-1||e>n||s<-1||s>r)throw new O;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===r&&(t[o+1]=r-1,i=!0)}}}class he{constructor(e,t,n,r,i,o,s,a,c){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=s,this.a23=a,this.a33=c}static quadrilateralToQuadrilateral(e,t,n,r,i,o,s,a,c,l,d,u,h,p,f,m){const g=he.quadrilateralToSquare(e,t,n,r,i,o,s,a);return he.squareToQuadrilateral(c,l,d,u,h,p,f,m).times(g)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,l=this.a32,d=this.a33;for(let u=0;u<t;u+=2){const t=e[u],h=e[u+1],p=i*t+a*h+d;e[u]=(n*t+o*h+c)/p,e[u+1]=(r*t+s*h+l)/p}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,l=this.a32,d=this.a33,u=e.length;for(let h=0;h<u;h++){const u=e[h],p=t[h],f=i*u+a*p+d;e[h]=(n*u+o*p+c)/f,t[h]=(r*u+s*p+l)/f}}static squareToQuadrilateral(e,t,n,r,i,o,s,a){const c=e-n+i-s,l=t-r+o-a;if(0===c&&0===l)return new he(n-e,i-n,e,r-t,o-r,t,0,0,1);{const d=n-i,u=s-i,h=r-o,p=a-o,f=d*p-u*h,m=(c*p-u*l)/f,g=(d*l-c*h)/f;return new he(n-e+m*n,s-e+g*s,e,r-t+m*r,a-t+g*a,t,m,g,1)}}static quadrilateralToSquare(e,t,n,r,i,o,s,a){return he.squareToQuadrilateral(e,t,n,r,i,o,s,a).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class pe extends ue{sampleGrid(e,t,n,r,i,o,s,a,c,l,d,u,h,p,f,m,g,v,y){const _=he.quadrilateralToQuadrilateral(r,i,o,s,a,c,l,d,u,h,p,f,m,g,v,y);return this.sampleGridWithTransform(e,t,n,_)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new O;const i=new x(t,n),o=new Float32Array(2*t);for(let a=0;a<n;a++){const t=o.length,n=a+.5;for(let e=0;e<t;e+=2)o[e]=e/2+.5,o[e+1]=n;r.transformPoints(o),ue.checkAndNudgePoints(e,o);try{for(let n=0;n<t;n+=2)e.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,a)}catch(s){throw new O}}return i}}class fe{static setGridSampler(e){fe.gridSampler=e}static getInstance(){return fe.gridSampler}}fe.gridSampler=new pe;class me{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ge{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new le(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new O;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let e=n[(this.shift+o)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach(((e,r,i)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)})),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(_.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new O}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let c=n-1;c>=0;--c)o[c]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(o,i)}catch(a){throw new O}let s=0;for(let c=0;c<r;c++)s=(s<<4)+o[c];return s}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,o,1,-1),s=this.getFirstDifferent(n,o,1,1),a=this.getFirstDifferent(r,o,-1,1),c=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(c,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,s,a,c))break}t=e,n=s,r=a,i=c,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new O;this.compact=5===this.nbCenterLayers;let s=new ae(t.getX()+.5,t.getY()-.5),a=new ae(n.getX()+.5,n.getY()+.5),c=new ae(r.getX()-.5,r.getY()+.5),l=new ae(i.getX()-.5,i.getY()-.5);return this.expandSquare([s,a,c,l],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new de(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(s){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new me(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new me(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new me(i-7,o-7),!1,-1,-1).toResultPoint()}let i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let s=new de(this.image,15,i,o).detect();e=s[0],t=s[1],n=s[2],r=s[3]}catch(s){e=this.getFirstDifferent(new me(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new me(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new me(i-7,o-7),!1,-1,-1).toResultPoint()}return i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new me(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let o=fe.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,a,a,c,a,c,c,a,c,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),o=i/n,s=e.getX(),a=e.getY(),c=o*(t.getX()-e.getX())/i,l=o*(t.getY()-e.getY())/i;for(let d=0;d<n;d++)this.image.get(oe.round(s+d*c),oe.round(a+d*l))&&(r|=1<<n-d-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new me(e.getX()-i,e.getY()+i),t=new me(t.getX()-i,t.getY()-i),n=new me(n.getX()+i,n.getY()-i),r=new me(r.getX()+i,r.getY()+i);let o=this.getColor(r,e);if(0===o)return!1;let s=this.getColor(e,t);return s===o&&(s=this.getColor(t,n),s===o&&(s=this.getColor(n,r),s===o))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,s=e.getX(),a=e.getY(),c=this.image.get(e.getX(),e.getY()),l=Math.ceil(n);for(let u=0;u<l;u++)s+=r,a+=i,this.image.get(oe.round(s),oe.round(a))!==c&&o++;let d=o/n;return d>.1&&d<.9?0:d<=.1===c?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,o=e.getY()+r;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return o-=r,new me(i,o)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,c=new ae(s+r*i,a+r*o),l=new ae(s-r*i,a-r*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2,[c,new ae(s+r*i,a+r*o),l,new ae(s-r*i,a-r*o)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=oe.round(e.getX()),n=oe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_.truncDivision(this.nbLayers-4,8)+1)+15}}class ve{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new ge(e.getBlackMatrix()),i=null,o=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(l){n=l}if(null==o)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(l){if(null!=n)throw n;throw l}let s=new F(o.getText(),o.getRawBytes(),o.getNumBits(),i,W.AZTEC,m.currentTimeMillis()),a=o.getByteSegments();null!=a&&s.putMetadata(X.BYTE_SEGMENTS,a);let c=o.getECLevel();return null!=c&&s.putMetadata(X.ERROR_CORRECTION_LEVEL,c),s}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(w.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach(((e,t,r)=>{n.foundPossibleResultPoint(e)}))}}reset(){}}class ye extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ve,e)}}class _e{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(w.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata();let o=270;null!==i&&!0===i.get(X.ORIENTATION)&&(o+=i.get(X.ORIENTATION)%360),r.putMetadata(X.ORIENTATION,o);const s=r.getResultPoints();if(null!==s){const e=n.getHeight();for(let t=0;t<s.length;t++)s[t]=new ae(e-s[t].getY()-1,s[t].getX())}return r}throw new O}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new E(n);const o=t&&!0===t.get(w.TRY_HARDER),s=Math.max(1,r>>(o?8:5));let a;a=o?r:15;const c=Math.trunc(r/2);for(let u=0;u<a;u++){const o=Math.trunc((u+1)/2),a=c+s*(0===(1&u)?o:-o);if(a<0||a>=r)break;try{i=e.getBlackRow(a,i)}catch(l){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(w.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach(((t,n)=>e.set(n,t))),e.delete(w.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(a,i,t);if(1===e){r.putMetadata(X.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new ae(n-e[0].getX()-1,e[0].getY()),e[1]=new ae(n-e[1].getX()-1,e[1].getY()))}return r}catch(d){}}}throw new O}static recordPattern(e,t,n){const r=n.length;for(let c=0;c<r;c++)n[c]=0;const i=e.getSize();if(t>=i)throw new O;let o=!e.get(t),s=0,a=t;for(;a<i;){if(e.get(a)!==o)n[s]++;else{if(++s===r)break;n[s]=1,o=!o}a++}if(s!==r&&(s!==r-1||a!==i))throw new O}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new O;_e.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,o=0;for(let c=0;c<r;c++)i+=e[c],o+=t[c];if(i<o)return Number.POSITIVE_INFINITY;const s=i/o;n*=s;let a=0;for(let c=0;c<r;c++){const r=e[c],i=t[c]*s,o=r>i?r-i:i-r;if(o>n)return Number.POSITIVE_INFINITY;a+=o}return a/i}}class Ee extends _e{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,s=!1;const a=6;for(let c=n;c<t;c++)if(e.get(c)!==s)i[r]++;else{if(r===a-1){let t=Ee.MAX_AVG_VARIANCE,n=-1;for(let e=Ee.CODE_START_A;e<=Ee.CODE_START_C;e++){const r=_e.patternMatchVariance(i,Ee.CODE_PATTERNS[e],Ee.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,o-(c-o)/2),o,!1))return Int32Array.from([o,c,n]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,s=!s}throw new O}static decodeCode(e,t,n){_e.recordPattern(e,n,t);let r=Ee.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<Ee.CODE_PATTERNS.length;o++){const e=Ee.CODE_PATTERNS[o],n=this.patternMatchVariance(t,e,Ee.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=o)}if(i>=0)return i;throw new O}decodeRow(e,t,n){const r=n&&!0===n.get(w.ASSUME_GS1),i=Ee.findStartPattern(t),o=i[2];let s=0;const a=new Uint8Array(20);let c;switch(a[s++]=o,o){case Ee.CODE_START_A:c=Ee.CODE_CODE_A;break;case Ee.CODE_START_B:c=Ee.CODE_CODE_B;break;case Ee.CODE_START_C:c=Ee.CODE_CODE_C;break;default:throw new S}let l=!1,d=!1,u="",h=i[0],f=i[1];const m=Int32Array.from([0,0,0,0,0,0]);let g=0,v=0,y=o,_=0,E=!0,b=!1,A=!1;for(;!l;){const e=d;switch(d=!1,g=v,v=Ee.decodeCode(t,m,f),a[s++]=v,v!==Ee.CODE_STOP&&(E=!0),v!==Ee.CODE_STOP&&(_++,y+=_*v),h=f,f+=m.reduce(((e,t)=>e+t),0),v){case Ee.CODE_START_A:case Ee.CODE_START_B:case Ee.CODE_START_C:throw new S}switch(c){case Ee.CODE_CODE_A:if(v<64)u+=A===b?String.fromCharCode(" ".charCodeAt(0)+v):String.fromCharCode(" ".charCodeAt(0)+v+128),A=!1;else if(v<96)u+=A===b?String.fromCharCode(v-64):String.fromCharCode(v+64),A=!1;else switch(v!==Ee.CODE_STOP&&(E=!1),v){case Ee.CODE_FNC_1:r&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case Ee.CODE_FNC_2:case Ee.CODE_FNC_3:break;case Ee.CODE_FNC_4_A:!b&&A?(b=!0,A=!1):b&&A?(b=!1,A=!1):A=!0;break;case Ee.CODE_SHIFT:d=!0,c=Ee.CODE_CODE_B;break;case Ee.CODE_CODE_B:c=Ee.CODE_CODE_B;break;case Ee.CODE_CODE_C:c=Ee.CODE_CODE_C;break;case Ee.CODE_STOP:l=!0}break;case Ee.CODE_CODE_B:if(v<96)u+=A===b?String.fromCharCode(" ".charCodeAt(0)+v):String.fromCharCode(" ".charCodeAt(0)+v+128),A=!1;else switch(v!==Ee.CODE_STOP&&(E=!1),v){case Ee.CODE_FNC_1:r&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case Ee.CODE_FNC_2:case Ee.CODE_FNC_3:break;case Ee.CODE_FNC_4_B:!b&&A?(b=!0,A=!1):b&&A?(b=!1,A=!1):A=!0;break;case Ee.CODE_SHIFT:d=!0,c=Ee.CODE_CODE_A;break;case Ee.CODE_CODE_A:c=Ee.CODE_CODE_A;break;case Ee.CODE_CODE_C:c=Ee.CODE_CODE_C;break;case Ee.CODE_STOP:l=!0}break;case Ee.CODE_CODE_C:if(v<100)v<10&&(u+="0"),u+=v;else switch(v!==Ee.CODE_STOP&&(E=!1),v){case Ee.CODE_FNC_1:r&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case Ee.CODE_CODE_A:c=Ee.CODE_CODE_A;break;case Ee.CODE_CODE_B:c=Ee.CODE_CODE_B;break;case Ee.CODE_STOP:l=!0}}e&&(c=c===Ee.CODE_CODE_A?Ee.CODE_CODE_B:Ee.CODE_CODE_A)}const C=f-h;if(f=t.getNextUnset(f),!t.isRange(f,Math.min(t.getSize(),f+(f-h)/2),!1))throw new O;if(y-=_*g,y%103!==g)throw new p;const T=u.length;if(0===T)throw new O;T>0&&E&&(u=c===Ee.CODE_CODE_C?u.substring(0,T-2):u.substring(0,T-1));const R=(i[1]+i[0])/2,I=h+C/2,x=a.length,N=new Uint8Array(x);for(let p=0;p<x;p++)N[p]=a[p];const D=[new ae(R,e),new ae(I,e)];return new F(u,N,0,D,W.CODE_128,(new Date).getTime())}}Ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ee.MAX_AVG_VARIANCE=.25,Ee.MAX_INDIVIDUAL_VARIANCE=.7,Ee.CODE_SHIFT=98,Ee.CODE_CODE_C=99,Ee.CODE_CODE_B=100,Ee.CODE_CODE_A=101,Ee.CODE_FNC_1=102,Ee.CODE_FNC_2=97,Ee.CODE_FNC_3=96,Ee.CODE_FNC_4_A=101,Ee.CODE_FNC_4_B=100,Ee.CODE_START_A=103,Ee.CODE_START_B=104,Ee.CODE_START_C=105,Ee.CODE_STOP=106;class be extends _e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,o,s=be.findAsteriskPattern(t,r),a=t.getNextSet(s[1]),c=t.getSize();do{be.recordPattern(t,a,r);let e=be.toNarrowWidePattern(r);if(e<0)throw new O;i=be.patternToChar(e),this.decodeRowResult+=i,o=a;for(let t of r)a+=t;a=t.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let l,d=0;for(let p of r)d+=p;if(a!==c&&2*(a-o-d)<d)throw new O;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=be.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==be.ALPHABET_STRING.charAt(t%43))throw new p;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new O;l=this.extendedMode?be.decodeExtended(this.decodeRowResult):this.decodeRowResult;let u=(s[1]+s[0])/2,h=o+d/2;return new F(l,null,0,[new ae(u,e),new ae(h,e)],W.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,o=r,s=!1,a=t.length;for(let c=r;c<n;c++)if(e.get(c)!==s)t[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(t)===be.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((c-o)/2)),o,!1))return[o,c];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,s=!s}throw new O}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=2147483647;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let o=0,s=0;for(let a=0;a<n;a++){let i=e[a];i>r&&(s|=1<<n-1-a,t++,o+=i)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=o))return-1}return s}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<be.CHARACTER_ENCODINGS.length;t++)if(be.CHARACTER_ENCODINGS[t]===e)return be.ALPHABET_STRING.charAt(t);if(e===be.ASTERISK_ENCODING)return"*";throw new O}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),o="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new S;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new S;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new S;o="\x7f"}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new S;o=":"}}n+=o,r++}else n+=t}return n}}be.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",be.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],be.ASTERISK_ENCODING=148;class we extends _e{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),o=new I;we.decodeMiddle(t,r[1],i[0],o);let s=o.toString(),a=null;null!=n&&(a=n.get(w.ALLOWED_LENGTHS)),null==a&&(a=we.DEFAULT_ALLOWED_LENGTHS);let c=s.length,l=!1,d=0;for(let h of a){if(c===h){l=!0;break}h>d&&(d=h)}if(!l&&c>d&&(l=!0),!l)throw new S;const u=[new ae(r[1],e),new ae(i[0],e)];return new F(s,null,0,u,W.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),o.fill(0),s.fill(0);t<n;){_e.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;o[e]=i[t],s[e]=i[t+1]}let n=we.decodeDigit(o);r.append(n.toString()),n=this.decodeDigit(s),r.append(n.toString()),i.forEach((function(e){t+=e}))}}decodeStart(e){let t=we.skipWhiteSpace(e),n=we.findGuardPattern(e,t,we.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new O}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new O;return n}decodeEnd(e){e.reverse();try{let n,r=we.skipWhiteSpace(e);try{n=we.findGuardPattern(e,r,we.END_PATTERN_REVERSED[0])}catch(t){t instanceof O&&(n=we.findGuardPattern(e,r,we.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),o=e.getSize(),s=!1,a=0,c=t;i.fill(0);for(let l=t;l<o;l++)if(e.get(l)!==s)i[a]++;else{if(a===r-1){if(_e.patternMatchVariance(i,n,we.MAX_INDIVIDUAL_VARIANCE)<we.MAX_AVG_VARIANCE)return[c,l];c+=i[0]+i[1],m.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new O}static decodeDigit(e){let t=we.MAX_AVG_VARIANCE,n=-1,r=we.PATTERNS.length;for(let i=0;i<r;i++){let r=we.PATTERNS[i],o=_e.patternMatchVariance(e,r,we.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,n=i):o===t&&(n=-1)}if(n>=0)return n%10;throw new O}}we.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],we.MAX_AVG_VARIANCE=.38,we.MAX_INDIVIDUAL_VARIANCE=.5,we.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],we.START_PATTERN=Int32Array.from([1,1,1,1]),we.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Se extends _e{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]),t=Se.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let o=t[0];r=t[1];let s=o-(r-o);s>=0&&(n=e.isRange(s,o,!1))}return t}static checkChecksum(e){return Se.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Se.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Se.findGuardPattern(e,t,!1,Se.START_END_PATTERN,new Int32Array(Se.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let o=e.getSize(),s=0,a=t=n?e.getNextUnset(t):e.getNextSet(t),c=r.length,l=n;for(let d=t;d<o;d++)if(e.get(d)!==l)i[s]++;else{if(s===c-1){if(_e.patternMatchVariance(i,r,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return Int32Array.from([a,d]);a+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<s-1;t++)i[t]=e[t];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,l=!l}throw new O}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,o=-1,s=r.length;for(let a=0;a<s;a++){let e=r[a],n=_e.patternMatchVariance(t,e,Se.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,o=a)}if(o>=0)return o;throw new O}}Se.MAX_AVG_VARIANCE=.48,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.START_END_PATTERN=Int32Array.from([1,1,1]),Se.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Se.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Se.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ae{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),s=Ae.parseExtensionString(o),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],c=new F(o,null,0,a,W.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let c=0;c<5&&o<i;c++){let t=Se.decodeDigit(e,r,o,Se.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<4-c),4!==c&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(5!==n.length)throw new O;let a=this.determineCheckDigit(s);if(Ae.extensionChecksum(n.toString())!==a)throw new O;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new O}static parseExtensionString(e){if(5!==e.length)return null;let t=Ae.parseExtension5String(e);return null==t?null:new Map([[X.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ce{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),s=Ce.parseExtensionString(o),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],c=new F(o,null,0,a,W.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let a=0;a<2&&o<i;a++){let t=Se.decodeDigit(e,r,o,Se.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<1-a),1!==a&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(2!==n.length)throw new O;if(parseInt(n.toString())%4!==s)throw new O;return o}static parseExtensionString(e){return 2!==e.length?null:new Map([[X.ISSUE_NUMBER,parseInt(e)]])}}class Te{static decodeRow(e,t,n){let r=Se.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ae).decodeRow(e,t,r)}catch(i){return(new Ce).decodeRow(e,t,r)}}}Te.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Re extends Se{constructor(){super(),this.decodeRowStringBuffer="",Re.L_AND_G_PATTERNS=Re.L_PATTERNS.map((e=>Int32Array.from(e)));for(let e=10;e<20;e++){let t=Re.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];Re.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Re.findStartGuardPattern(t),i=null==n?null:n.get(w.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new ae((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),s=o.rowOffset,a=o.resultString;if(null!=i){const t=new ae(s,e);i.foundPossibleResultPoint(t)}let c=this.decodeEnd(t,s);if(null!=i){const t=new ae((c[0]+c[1])/2,e);i.foundPossibleResultPoint(t)}let l=c[1],d=l+(l-c[0]);if(d>=t.getSize()||!t.isRange(l,d,!1))throw new O;let u=a.toString();if(u.length<8)throw new S;if(!Re.checkChecksum(u))throw new p;let h=(r[1]+r[0])/2,f=(c[1]+c[0])/2,m=this.getBarcodeFormat(),g=[new ae(h,e),new ae(f,e)],v=new F(u,null,0,g,m,(new Date).getTime()),y=0;try{let n=Te.decodeRow(e,t,c[1]);v.putMetadata(X.UPC_EAN_EXTENSION,n.getText()),v.putAllMetadata(n.getResultMetadata()),v.addResultPoints(n.getResultPoints()),y=n.getText().length}catch(E){}let _=null==n?null:n.get(w.ALLOWED_EAN_EXTENSIONS);if(null!=_){let e=!1;for(let t in _)if(y.toString()===t){e=!0;break}if(!e)throw new O}return v}decodeEnd(e,t){return Re.findGuardPattern(e,t,!1,Re.START_END_PATTERN,new Int32Array(Re.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Re.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Re.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}return(1e3-n)%10}}class Ie extends Re{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let a=0;a<6&&o<i;a++){let t=Re.decodeDigit(e,r,o,Re.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<5-a)}n=Ie.determineFirstDigit(n,s),o=Re.findGuardPattern(e,o,!0,Re.MIDDLE_PATTERN,new Int32Array(Re.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&o<i;a++){let t=Re.decodeDigit(e,r,o,Re.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return W.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new O}}Ie.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class xe extends Re{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1];for(let s=0;s<4&&o<i;s++){let t=Re.decodeDigit(e,r,o,Re.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}o=Re.findGuardPattern(e,o,!0,Re.MIDDLE_PATTERN,new Int32Array(Re.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<4&&o<i;s++){let t=Re.decodeDigit(e,r,o,Re.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return W.EAN_8}}class Oe extends Re{constructor(){super(...arguments),this.ean13Reader=new Ie}getBarcodeFormat(){return W.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new F(t.substring(1),null,null,e.getResultPoints(),W.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new O}reset(){this.ean13Reader.reset()}}class Ne extends Re{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map((e=>e));r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let o=t[1],s=0;for(let a=0;a<6&&o<i;a++){const t=Ne.decodeDigit(e,r,o,Ne.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<5-a)}return{rowOffset:o,resultString:Ne.determineNumSysAndCheckDigit(n,s)}}decodeEnd(e,t){return Ne.findGuardPatternWithoutCounters(e,t,!0,Ne.MIDDLE_END_PATTERN)}checkChecksum(e){return Re.checkChecksum(Ne.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw O.getNotFoundInstance()}getBarcodeFormat(){return W.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map((e=>e.charCodeAt(0))),n=new I;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Ne.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ne.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class De extends _e{constructor(e){super();let n=null==e?null:e.get(w.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Ie),r.push(new Oe),r.push(new xe),r.push(new Ne)):(n.indexOf(W.EAN_13)>-1&&r.push(new Ie),n.indexOf(W.UPC_A)>-1&&r.push(new Oe),n.indexOf(W.EAN_8)>-1&&r.push(new xe),n.indexOf(W.UPC_E)>-1&&r.push(new Ne)),this.readers=r}decodeRow(e,t,n){for(let i of this.readers)try{const r=i.decodeRow(e,t,n),o=r.getBarcodeFormat()===W.EAN_13&&"0"===r.getText().charAt(0),s=null==n?null:n.get(w.POSSIBLE_FORMATS),a=null==s||s.includes(W.UPC_A);if(o&&a){const e=r.getRawBytes(),t=new F(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),W.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new O}reset(){for(let e of this.readers)e.reset()}}class ke extends _e{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(_e.patternMatchVariance(e,t[n],ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return n;throw new O}static count(e){return oe.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=ke.MIN_FINDER_PATTERN_RATIO&&n<=ke.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}ke.MAX_AVG_VARIANCE=.2,ke.MAX_INDIVIDUAL_VARIANCE=.45,ke.MIN_FINDER_PATTERN_RATIO=9.5/12,ke.MAX_FINDER_PATTERN_RATIO=12.5/14;class Pe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Pe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Le{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ae(n,i)),this.resultPoints.push(new ae(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Le))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Me{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let a of e)r+=a;let i=0,o=0,s=e.length;for(let a=0;a<s-1;a++){let c;for(c=1,o|=1<<a;c<e[a];c++,o&=~(1<<a)){let e=Me.combins(r-c-1,s-a-2);if(n&&0===o&&r-c-(s-a-1)>=s-a-1&&(e-=Me.combins(r-c-(s-a),s-a-2)),s-a-1>1){let n=0;for(let e=r-c-(s-a-2);e>t;e--)n+=Me.combins(r-c-e-1,s-a-3);e-=n*(s-1-a)}else r-c>t&&e--;i+=e}r-=c}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,o=1;for(let s=e;s>n;s--)i*=s,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i}}class je{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new E(12*t),r=0,i=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)0!=(i&1<<o)&&n.set(r),r++;for(let o=1;o<e.length;++o){let t=e[o],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class Ue{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Be{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Fe extends Be{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Fe.FNC1}}Fe.FNC1="$";class Ve extends Be{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class We extends Be{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new S;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===We.FNC1}isSecondDigitFNC1(){return this.secondDigit===We.FNC1}isAnyFNC1(){return this.firstDigit===We.FNC1||this.secondDigit===We.FNC1}}We.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new O;let t=e.substring(0,2);for(let i of He.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,i[2],e):He.processFixedAI(2,i[1],e);if(e.length<3)throw new O;let n=e.substring(0,3);for(let i of He.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,i[2],e):He.processFixedAI(3,i[1],e);for(let i of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);if(e.length<4)throw new O;let r=e.substring(0,4);for(let i of He.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);throw new O}static processFixedAI(e,t,n){if(n.length<e)throw new O;let r=n.substring(0,e);if(n.length<e+t)throw new O;let i=n.substring(e,e+t),o=n.substring(e+t),s="("+r+")"+i,a=He.parseFieldsInGeneralPurpose(o);return null==a?s:s+a}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let o=n.substring(e,r),s=n.substring(r),a="("+i+")"+o,c=He.parseFieldsInGeneralPurpose(s);return null==c?a:a+c}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class ze{constructor(e){this.buffer=new I,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=He.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new We(this.information.getSize(),0===t?We.FNC1:t-1,We.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new We(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return ze.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ve(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ve(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new Ve(this.current.getPosition(),this.buffer.toString()):new Ve(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ue(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Ue(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ue(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Ue(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ue(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Ue(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ue(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Fe(e+5,Fe.FNC1);if(t>=5&&t<15)return new Fe(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Fe(e+7,""+(r+1));if(r>=90&&r<116)return new Fe(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new S}return new Fe(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Fe(e+5,Fe.FNC1);if(t>=5&&t<15)return new Fe(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Fe(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new Fe(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ge{constructor(e){this.information=e,this.generalDecoder=new ze(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ye extends Ge{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ye.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),e.append(n)}}Ye.GTIN_SIZE=40;class Ke extends Ye{constructor(e){super(e)}parseInformation(){let e=new I;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ke.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Ke.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Ke.HEADER_SIZE+44)}}Ke.HEADER_SIZE=4;class qe extends Ge{constructor(e){super(e)}parseInformation(){let e=new I;return this.getGeneralDecoder().decodeAllCodes(e,qe.HEADER_SIZE)}}qe.HEADER_SIZE=5;class Xe extends Ye{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),o=1e5;for(let s=0;s<5;++s)i/o===0&&e.append("0"),o/=10;e.append(i)}}class Je extends Xe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Je.HEADER_SIZE+Xe.GTIN_SIZE+Je.WEIGHT_SIZE)throw new O;let e=new I;return this.encodeCompressedGtin(e,Je.HEADER_SIZE),this.encodeCompressedWeight(e,Je.HEADER_SIZE+Xe.GTIN_SIZE,Je.WEIGHT_SIZE),e.toString()}}Je.HEADER_SIZE=5,Je.WEIGHT_SIZE=15;class Qe extends Je{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ze extends Je{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class $e extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$e.HEADER_SIZE+Ye.GTIN_SIZE)throw new O;let e=new I;this.encodeCompressedGtin(e,$e.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+Ye.GTIN_SIZE,$e.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField($e.HEADER_SIZE+Ye.GTIN_SIZE+$e.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}$e.HEADER_SIZE=8,$e.LAST_DIGIT_SIZE=2;class et extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ye.GTIN_SIZE)throw new O;let e=new I;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Xe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new O;let e=new I;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Ke(e);if(!e.get(2))return new qe(e);switch(ze.extractNumericValueFromBitArray(e,1,4)){case 4:return new Qe(e);case 5:return new Ze(e)}switch(ze.extractNumericValueFromBitArray(e,1,5)){case 12:return new $e(e);case 13:return new et(e)}switch(ze.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach(((e,r)=>{t.forEach((t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)}))})),n}}class ot extends ke{constructor(e){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof O){if(!this.pairs.length)throw new O;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new O}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new O}static isValidSequence(e){for(let t of ot.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(je.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new F(t,null,null,i,W.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let e=this.pairs.get(o);r+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i=t.length%2==0;this.startFromEven&&(i=!i);let o=!0,s=-1;do{this.findNextPair(e,t,s),r=this.parseFoundFinderPattern(e,n,i),null==r?s=ot.getNextSecondBar(e,this.startEnd[0]):o=!1}while(o);let a,c=this.decodeDataCharacter(e,r,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new O;try{a=this.decodeDataCharacter(e,r,i,!1)}catch(l){a=null,this.verbose&&console.log(l)}return new rt(c,a,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,o=e.getSize();i=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let s=t.length%2!=0;this.startFromEven&&(s=!s);let a=!1;for(;i<o&&(a=!e.get(i),a);)i++;let c=0,l=i;for(let d=i;d<o;d++)if(e.get(d)!=a)r[c]++;else{if(3==c){if(s&&ot.reverseCounters(r),ot.isFinderPattern(r))return this.startEnd[0]=l,void(this.startEnd[1]=d);s&&ot.reverseCounters(r),l+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,c--}else c++;r[c]=1,a=!a}throw new O}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,o;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let s,a=this.getDecodeFinderCounters();m.arraycopy(a,0,a,1,a.length-1),a[0]=r;try{s=this.parseFinderValue(a,ot.FINDER_PATTERNS)}catch(c){return null}return new Le(s,[i,o],i,o,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let A=0;A<i.length;A++)i[A]=0;if(r)ot.recordPatternInReverse(e,t.getStartEnd()[0],i);else{ot.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let o=17,s=oe.sum(new Int32Array(i))/o,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(s-a)/a>.3)throw new O;let c=this.getOddCounts(),l=this.getEvenCounts(),d=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let A=0;A<i.length;A++){let e=1*i[A]/s,t=e+.5;if(t<1){if(e<.3)throw new O;t=1}else if(t>8){if(e>8.7)throw new O;t=8}let n=A/2;0==(1&A)?(c[n]=t,d[n]=e-t):(l[n]=t,u[n]=e-t)}this.adjustOddEvenCounts(o);let h=4*t.getValue()+(n?0:2)+(r?0:1)-1,p=0,f=0;for(let A=c.length-1;A>=0;A--){if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[h][2*A];f+=c[A]*e}p+=c[A]}let m=0;for(let A=l.length-1;A>=0;A--)if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[h][2*A+1];m+=l[A]*e}let g=f+m;if(0!=(1&p)||p>13||p<4)throw new O;let v=(13-p)/2,y=ot.SYMBOL_WIDEST[v],_=9-y,E=Me.getRSSvalue(c,y,!0),b=Me.getRSSvalue(l,_,!1),w=ot.EVEN_TOTAL_SUBSET[v],S=ot.GSUM[v];return new Pe(E*w+b+S,g)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=oe.sum(new Int32Array(this.getOddCounts())),n=oe.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);let a=t+n-e,c=1==(1&t),l=0==(1&n);if(1==a)if(c){if(l)throw new O;i=!0}else{if(!l)throw new O;s=!0}else if(-1==a)if(c){if(l)throw new O;r=!0}else{if(!l)throw new O;o=!0}else{if(0!=a)throw new O;if(c){if(!l)throw new O;t<n?(r=!0,s=!0):(i=!0,o=!0)}else if(l)throw new O}if(r){if(i)throw new O;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new O;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class st extends Pe{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class at extends ke{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);at.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);at.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&at.checkChecksum(o,e))return at.constructResult(o,e);throw new O}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new I;for(let c=13-r.length;c>0;c--)i.append("0");i.append(r);let o=0;for(let c=0;c<13;c++){let e=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&c)?3*e:e}o=10-o%10,10===o&&(o=0),i.append(o.toString());let s=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new F(i.toString(),null,0,[s[0],s[1],a[0],a[1]],W.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),s=null==r?null:r.get(w.NEED_RESULT_POINT_CALLBACK);if(null!=s){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),s.foundPossibleResultPoint(new ae(r,n))}let a=this.decodeDataCharacter(e,o,!0),c=this.decodeDataCharacter(e,o,!1);return new st(1597*a.getValue()+c.getValue(),a.getChecksumPortion()+4*c.getChecksumPortion(),o)}catch(i){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let m=0;m<r.length;m++)r[m]=0;if(n)_e.recordPatternInReverse(e,t.getStartEnd()[0],r);else{_e.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,o=oe.sum(new Int32Array(r))/i,s=this.getOddCounts(),a=this.getEvenCounts(),c=this.getOddRoundingErrors(),l=this.getEvenRoundingErrors();for(let m=0;m<r.length;m++){let e=r[m]/o,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(m/2);0===(1&m)?(s[n]=t,c[n]=e-t):(a[n]=t,l[n]=e-t)}this.adjustOddEvenCounts(n,i);let d=0,u=0;for(let m=s.length-1;m>=0;m--)u*=9,u+=s[m],d+=s[m];let h=0,p=0;for(let m=a.length-1;m>=0;m--)h*=9,h+=a[m],p+=a[m];let f=u+3*h;if(n){if(0!==(1&d)||d>12||d<4)throw new O;let e=(12-d)/2,t=at.OUTSIDE_ODD_WIDEST[e],n=9-t,r=Me.getRSSvalue(s,t,!1),i=Me.getRSSvalue(a,n,!0),o=at.OUTSIDE_EVEN_TOTAL_SUBSET[e],c=at.OUTSIDE_GSUM[e];return new Pe(r*o+i+c,f)}{if(0!==(1&p)||p>10||p<4)throw new O;let e=(10-p)/2,t=at.INSIDE_ODD_WIDEST[e],n=9-t,r=Me.getRSSvalue(s,t,!0),i=Me.getRSSvalue(a,n,!1),o=at.INSIDE_ODD_TOTAL_SUBSET[e],c=at.INSIDE_GSUM[e];return new Pe(i*o+r+c,f)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,o=0;for(;o<r&&(i=!e.get(o),t!==i);)o++;let s=0,a=o;for(let c=o;c<r;c++)if(e.get(c)!==i)n[s]++;else{if(3===s){if(ke.isFinderPattern(n))return[a,c];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,s--}else s++;n[s]=1,i=!i}throw new O}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),o=r[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const s=r[0]-o,a=this.getDecodeFinderCounters(),c=new Int32Array(a.length);m.arraycopy(a,0,c,1,a.length-1),c[0]=s;const l=this.parseFinderValue(c,at.FINDER_PATTERNS);let d=o,u=r[1];return n&&(d=e.getSize()-1-d,u=e.getSize()-1-u),new Le(l,[o,r[1]],d,u,t)}adjustOddEvenCounts(e,t){let n=oe.sum(new Int32Array(this.getOddCounts())),r=oe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,s=!1,a=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(s=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(s=!0));let c=n+r-t,l=(1&n)===(e?1:0),d=1===(1&r);if(1===c)if(l){if(d)throw new O;o=!0}else{if(!d)throw new O;a=!0}else if(-1===c)if(l){if(d)throw new O;i=!0}else{if(!d)throw new O;s=!0}else{if(0!==c)throw new O;if(l){if(!d)throw new O;n<r?(i=!0,a=!0):(o=!0,s=!0)}else if(d)throw new O}if(i){if(o)throw new O;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new O;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],at.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],at.OUTSIDE_GSUM=[0,161,961,2015,2715],at.INSIDE_GSUM=[0,336,1036,1516],at.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],at.INSIDE_ODD_WIDEST=[2,4,6,8],at.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ct extends _e{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(w.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(w.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(W.EAN_13)||n.includes(W.UPC_A)||n.includes(W.EAN_8)||n.includes(W.UPC_E))&&this.readers.push(new De(e)),n.includes(W.CODE_39)&&this.readers.push(new be(r)),n.includes(W.CODE_128)&&this.readers.push(new Ee),n.includes(W.ITF)&&this.readers.push(new we),n.includes(W.RSS_14)&&this.readers.push(new at),n.includes(W.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new De(e)),this.readers.push(new be),this.readers.push(new De(e)),this.readers.push(new Ee),this.readers.push(new we),this.readers.push(new at),this.readers.push(new ot(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch(r){}throw new O}reset(){this.readers.forEach((e=>e.reset()))}}class lt extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new ct(t),e,t)}}class dt{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,r,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let s=0;const a=o.getECCodewords(),c=o.getECBlocks();for(let l of c)s+=l.getCount()*(l.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new S;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new S}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new dt(5,new ut(1,3))),new ht(2,12,12,10,10,new dt(7,new ut(1,5))),new ht(3,14,14,12,12,new dt(10,new ut(1,8))),new ht(4,16,16,14,14,new dt(12,new ut(1,12))),new ht(5,18,18,16,16,new dt(14,new ut(1,18))),new ht(6,20,20,18,18,new dt(18,new ut(1,22))),new ht(7,22,22,20,20,new dt(20,new ut(1,30))),new ht(8,24,24,22,22,new dt(24,new ut(1,36))),new ht(9,26,26,24,24,new dt(28,new ut(1,44))),new ht(10,32,32,14,14,new dt(36,new ut(1,62))),new ht(11,36,36,16,16,new dt(42,new ut(1,86))),new ht(12,40,40,18,18,new dt(48,new ut(1,114))),new ht(13,44,44,20,20,new dt(56,new ut(1,144))),new ht(14,48,48,22,22,new dt(68,new ut(1,174))),new ht(15,52,52,24,24,new dt(42,new ut(2,102))),new ht(16,64,64,14,14,new dt(56,new ut(2,140))),new ht(17,72,72,16,16,new dt(36,new ut(4,92))),new ht(18,80,80,18,18,new dt(48,new ut(4,114))),new ht(19,88,88,20,20,new dt(56,new ut(4,144))),new ht(20,96,96,22,22,new dt(68,new ut(4,174))),new ht(21,104,104,24,24,new dt(56,new ut(6,136))),new ht(22,120,120,18,18,new dt(68,new ut(6,175))),new ht(23,132,132,20,20,new dt(62,new ut(8,163))),new ht(24,144,144,22,22,new dt(62,new ut(8,156),new ut(2,155))),new ht(25,8,18,6,16,new dt(7,new ut(1,5))),new ht(26,8,32,6,14,new dt(11,new ut(1,10))),new ht(27,12,26,10,24,new dt(14,new ut(1,16))),new ht(28,12,36,10,16,new dt(18,new ut(1,22))),new ht(29,16,36,14,16,new dt(24,new ut(1,32))),new ht(30,16,48,14,22,new dt(28,new ut(1,49)))]}}ht.VERSIONS=ht.buildVersions();class pt{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new S;this.version=pt.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new x(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let s=!1,a=!1,c=!1,l=!1;do{if(n!==i||0!==r||s)if(n!==i-2||0!==r||0===(3&o)||a)if(n!==i+4||2!==r||0!==(7&o)||c)if(n!==i-2||0!==r||4!==(7&o)||l){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,o),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner3(i,o),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner2(i,o),n-=2,r+=2,a=!0;else e[t++]=255&this.readCorner1(i,o),n-=2,r+=2,s=!0}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new S;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new u("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,s=n/i|0,a=new x(s*i,o*r);for(let c=0;c<o;++c){const t=c*r;for(let n=0;n<s;++n){const o=n*i;for(let s=0;s<r;++s){const l=c*(r+2)+1+s,d=t+s;for(let t=0;t<i;++t){const r=n*(i+2)+1+t;if(e.get(r,l)){const e=o+t;a.set(e,d)}}}}}return a}}class ft{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let u of i)r+=u.getCount();const o=new Array(r);let s=0;for(let u of i)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=n.getECCodewords()+e;o[s++]=new ft(e,new Uint8Array(t))}const a=o[0].codewords.length-n.getECCodewords(),c=a-1;let l=0;for(let u=0;u<c;u++)for(let t=0;t<s;t++)o[t].codewords[u]=e[l++];const d=24===t.getVersionNumber(),h=d?8:s;for(let u=0;u<h;u++)o[u].codewords[a-1]=e[l++];const p=o[0].codewords.length;for(let u=a;u<p;u++)for(let t=0;t<s;t++){const n=d?(t+8)%s:t,r=d&&n>7?u-1:u;o[n].codewords[r]=e[l++]}if(l!==e.length)throw new u;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new u(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,s=e<o?e:o,a=o-s,c=255>>8-s<<a;t=(i[r]&c)>>a,e-=s,n+=s,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const o=8-e,s=255>>o<<o;t=t<<e|(i[r]&s)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(z||(z={}));class gt{static decode(e){const t=new mt(e),n=new I,r=new I,i=new Array;let o=z.ASCII_ENCODE;do{if(o===z.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case z.C40_ENCODE:this.decodeC40Segment(t,n);break;case z.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case z.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case z.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case z.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new S}o=z.ASCII_ENCODE}}while(o!==z.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new J(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new S;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),z.ASCII_ENCODE;if(129===i)return z.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return z.C40_ENCODE;case 231:return z.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return z.ANSIX12_ENCODE;case 239:return z.TEXT_ENCODE;case 240:return z.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new S}}while(e.available()>0);return z.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new S;{const e=this.C40_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new S}i=0;break;case 3:n?(t.append(String.fromCharCode(o+224)),n=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new S}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new S;{const e=this.TEXT_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new S}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new S;{const e=this.TEXT_SHIFT3_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}break;default:throw new S}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new S;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let o;if(o=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new S;const s=new Uint8Array(o);for(let c=0;c<o;c++){if(e.available()<8)throw new S;s[c]=this.unrandomize255State(e.readBits(8),r++)}n.push(s);try{t.append(T.decode(s,R.ISO88591))}catch(a){throw new ne("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}gt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],gt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],gt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],gt.TEXT_SHIFT2_SET_CHARS=gt.C40_SHIFT2_SET_CHARS,gt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class vt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new pt(e),n=t.getVersion(),r=t.readCodewords(),i=ft.getDataBlocks(r,n);let o=0;for(let c of i)o+=c.getNumDataCodewords();const s=new Uint8Array(o),a=i.length;for(let c=0;c<a;c++){const e=i[c],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)s[r*a+c]=t[r]}return gt.decode(s)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new p}for(let i=0;i<t;i++)e[i]=n[i]}}class yt{constructor(e){this.image=e,this.rectangleDetector=new de(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new O;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],o=t[3];let s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1;1===(1&s)&&(s+=1),1===(1&a)&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let c=yt.sampleGrid(this.image,n,r,i,o,s,a);return new ce(c,[n,r,i,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new ae(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new ae(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,t),l=o,d=[i,t,n,r];return l>s&&(l=s,d[0]=t,d[1]=n,d[2]=r,d[3]=i),l>a&&(l=a,d[0]=n,d[1]=r,d[2]=i,d[3]=t),l>c&&(d[0]=r,d[1]=i,d[2]=t,d[3]=n),d}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),s=yt.shiftPoint(n,r,4*(o+1)),a=yt.shiftPoint(r,n,4*(o+1));return this.transitionsBetween(s,t)<this.transitionsBetween(a,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(n,i),a=yt.shiftPoint(t,n,4*(s+1)),c=yt.shiftPoint(r,n,4*(o+1));o=this.transitionsBetween(a,i),s=this.transitionsBetween(c,i);let l=new ae(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),d=new ae(i.getX()+(t.getX()-n.getX())/(s+1),i.getY()+(t.getY()-n.getY())/(s+1));return this.isValid(l)?this.isValid(d)?this.transitionsBetween(a,l)+this.transitionsBetween(c,l)>this.transitionsBetween(a,d)+this.transitionsBetween(c,d)?l:d:l:this.isValid(d)?d:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(r,i)+1,a=yt.shiftPoint(t,n,4*s),c=yt.shiftPoint(r,n,4*o);o=this.transitionsBetween(a,i)+1,s=this.transitionsBetween(c,i)+1,1===(1&o)&&(o+=1),1===(1&s)&&(s+=1);let l,d,u=(t.getX()+n.getX()+r.getX()+i.getX())/4,h=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=yt.moveAway(t,u,h),n=yt.moveAway(n,u,h),r=yt.moveAway(r,u,h),i=yt.moveAway(i,u,h),a=yt.shiftPoint(t,n,4*s),a=yt.shiftPoint(a,i,4*o),l=yt.shiftPoint(n,t,4*s),l=yt.shiftPoint(l,r,4*o),c=yt.shiftPoint(r,i,4*s),c=yt.shiftPoint(c,n,4*o),d=yt.shiftPoint(i,r,4*s),d=yt.shiftPoint(d,t,4*o),[a,l,c,d]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,o,s){return fe.getInstance().sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-r)>Math.abs(i-n);if(s){let e=n;n=r,r=e,e=i,i=o,o=e}let a=Math.abs(i-n),c=Math.abs(o-r),l=-a/2,d=r<o?1:-1,u=n<i?1:-1,h=0,p=this.image.get(s?r:n,s?n:r);for(let f=n,m=r;f!==i;f+=u){let e=this.image.get(s?m:f,s?f:m);if(e!==p&&(h++,p=e),l+=c,l>0){if(m===o)break;m+=d,l-=a}}return h}}class _t{constructor(){this.decoder=new vt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(w.PURE_BARCODE)){const r=_t.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=_t.NO_POINTS}else{const r=new yt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const i=t.getRawBytes(),o=new F(t.getText(),i,8*i.length,n,W.DATA_MATRIX,m.currentTimeMillis()),s=t.getByteSegments();null!=s&&o.putMetadata(X.BYTE_SEGMENTS,s);const a=t.getECLevel();return null!=a&&o.putMetadata(X.ERROR_CORRECTION_LEVEL,a),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new O;const r=this.moduleSize(t,e);let i=t[1];const o=n[1];let s=t[0];const a=(n[0]-s+1)/r,c=(o-i+1)/r;if(a<=0||c<=0)throw new O;const l=r/2;i+=l,s+=l;const d=new x(a,c);for(let u=0;u<c;u++){const t=i+u*r;for(let n=0;n<a;n++)e.get(s+n*r,t)&&d.set(n,u)}return d}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new O;const o=r-e[0];if(0===o)throw new O;return o}}_t.NO_POINTS=[];class Et extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new _t,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(G||(G={}));class bt{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,bt.FOR_BITS.set(n,this),bt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new d(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof bt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=bt.FOR_BITS.size)throw new u;return bt.FOR_BITS.get(e)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(G.L,"L",1),bt.M=new bt(G.M,"M",0),bt.Q=new bt(G.Q,"Q",3),bt.H=new bt(G.H,"H",2);class wt{constructor(e){this.errorCorrectionLevel=bt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return _.bitCount(e^t)}static decodeFormatInformation(e,t){const n=wt.doDecodeFormatInformation(e,t);return null!==n?n:wt.doDecodeFormatInformation(e^wt.FORMAT_INFO_MASK_QR,t^wt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of wt.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new wt(i[1]);let s=wt.numBitsDiffering(e,o);s<n&&(r=i[1],n=s),e!==t&&(s=wt.numBitsDiffering(t,o),s<n&&(r=i[1],n=s))}return n<=3?new wt(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof wt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}wt.FORMAT_INFO_MASK_QR=21522,wt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class St{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class At{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.ecBlocks=r;let o=0;const s=r[0].getECCodewordsPerBlock(),a=r[0].getECBlocks();for(const c of a)o+=c.getCount()*(c.getDataCodewords()+s);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new S;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new S}}static getVersionForNumber(e){if(e<1||e>40)throw new u;return Ct.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<Ct.VERSION_DECODE_INFO.length;r++){const i=Ct.VERSION_DECODE_INFO[r];if(i===e)return Ct.getVersionForNumber(r+7);const o=wt.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?Ct.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new x(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Ct.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ct.VERSIONS=[new Ct(1,new Int32Array(0),new St(7,new At(1,19)),new St(10,new At(1,16)),new St(13,new At(1,13)),new St(17,new At(1,9))),new Ct(2,Int32Array.from([6,18]),new St(10,new At(1,34)),new St(16,new At(1,28)),new St(22,new At(1,22)),new St(28,new At(1,16))),new Ct(3,Int32Array.from([6,22]),new St(15,new At(1,55)),new St(26,new At(1,44)),new St(18,new At(2,17)),new St(22,new At(2,13))),new Ct(4,Int32Array.from([6,26]),new St(20,new At(1,80)),new St(18,new At(2,32)),new St(26,new At(2,24)),new St(16,new At(4,9))),new Ct(5,Int32Array.from([6,30]),new St(26,new At(1,108)),new St(24,new At(2,43)),new St(18,new At(2,15),new At(2,16)),new St(22,new At(2,11),new At(2,12))),new Ct(6,Int32Array.from([6,34]),new St(18,new At(2,68)),new St(16,new At(4,27)),new St(24,new At(4,19)),new St(28,new At(4,15))),new Ct(7,Int32Array.from([6,22,38]),new St(20,new At(2,78)),new St(18,new At(4,31)),new St(18,new At(2,14),new At(4,15)),new St(26,new At(4,13),new At(1,14))),new Ct(8,Int32Array.from([6,24,42]),new St(24,new At(2,97)),new St(22,new At(2,38),new At(2,39)),new St(22,new At(4,18),new At(2,19)),new St(26,new At(4,14),new At(2,15))),new Ct(9,Int32Array.from([6,26,46]),new St(30,new At(2,116)),new St(22,new At(3,36),new At(2,37)),new St(20,new At(4,16),new At(4,17)),new St(24,new At(4,12),new At(4,13))),new Ct(10,Int32Array.from([6,28,50]),new St(18,new At(2,68),new At(2,69)),new St(26,new At(4,43),new At(1,44)),new St(24,new At(6,19),new At(2,20)),new St(28,new At(6,15),new At(2,16))),new Ct(11,Int32Array.from([6,30,54]),new St(20,new At(4,81)),new St(30,new At(1,50),new At(4,51)),new St(28,new At(4,22),new At(4,23)),new St(24,new At(3,12),new At(8,13))),new Ct(12,Int32Array.from([6,32,58]),new St(24,new At(2,92),new At(2,93)),new St(22,new At(6,36),new At(2,37)),new St(26,new At(4,20),new At(6,21)),new St(28,new At(7,14),new At(4,15))),new Ct(13,Int32Array.from([6,34,62]),new St(26,new At(4,107)),new St(22,new At(8,37),new At(1,38)),new St(24,new At(8,20),new At(4,21)),new St(22,new At(12,11),new At(4,12))),new Ct(14,Int32Array.from([6,26,46,66]),new St(30,new At(3,115),new At(1,116)),new St(24,new At(4,40),new At(5,41)),new St(20,new At(11,16),new At(5,17)),new St(24,new At(11,12),new At(5,13))),new Ct(15,Int32Array.from([6,26,48,70]),new St(22,new At(5,87),new At(1,88)),new St(24,new At(5,41),new At(5,42)),new St(30,new At(5,24),new At(7,25)),new St(24,new At(11,12),new At(7,13))),new Ct(16,Int32Array.from([6,26,50,74]),new St(24,new At(5,98),new At(1,99)),new St(28,new At(7,45),new At(3,46)),new St(24,new At(15,19),new At(2,20)),new St(30,new At(3,15),new At(13,16))),new Ct(17,Int32Array.from([6,30,54,78]),new St(28,new At(1,107),new At(5,108)),new St(28,new At(10,46),new At(1,47)),new St(28,new At(1,22),new At(15,23)),new St(28,new At(2,14),new At(17,15))),new Ct(18,Int32Array.from([6,30,56,82]),new St(30,new At(5,120),new At(1,121)),new St(26,new At(9,43),new At(4,44)),new St(28,new At(17,22),new At(1,23)),new St(28,new At(2,14),new At(19,15))),new Ct(19,Int32Array.from([6,30,58,86]),new St(28,new At(3,113),new At(4,114)),new St(26,new At(3,44),new At(11,45)),new St(26,new At(17,21),new At(4,22)),new St(26,new At(9,13),new At(16,14))),new Ct(20,Int32Array.from([6,34,62,90]),new St(28,new At(3,107),new At(5,108)),new St(26,new At(3,41),new At(13,42)),new St(30,new At(15,24),new At(5,25)),new St(28,new At(15,15),new At(10,16))),new Ct(21,Int32Array.from([6,28,50,72,94]),new St(28,new At(4,116),new At(4,117)),new St(26,new At(17,42)),new St(28,new At(17,22),new At(6,23)),new St(30,new At(19,16),new At(6,17))),new Ct(22,Int32Array.from([6,26,50,74,98]),new St(28,new At(2,111),new At(7,112)),new St(28,new At(17,46)),new St(30,new At(7,24),new At(16,25)),new St(24,new At(34,13))),new Ct(23,Int32Array.from([6,30,54,78,102]),new St(30,new At(4,121),new At(5,122)),new St(28,new At(4,47),new At(14,48)),new St(30,new At(11,24),new At(14,25)),new St(30,new At(16,15),new At(14,16))),new Ct(24,Int32Array.from([6,28,54,80,106]),new St(30,new At(6,117),new At(4,118)),new St(28,new At(6,45),new At(14,46)),new St(30,new At(11,24),new At(16,25)),new St(30,new At(30,16),new At(2,17))),new Ct(25,Int32Array.from([6,32,58,84,110]),new St(26,new At(8,106),new At(4,107)),new St(28,new At(8,47),new At(13,48)),new St(30,new At(7,24),new At(22,25)),new St(30,new At(22,15),new At(13,16))),new Ct(26,Int32Array.from([6,30,58,86,114]),new St(28,new At(10,114),new At(2,115)),new St(28,new At(19,46),new At(4,47)),new St(28,new At(28,22),new At(6,23)),new St(30,new At(33,16),new At(4,17))),new Ct(27,Int32Array.from([6,34,62,90,118]),new St(30,new At(8,122),new At(4,123)),new St(28,new At(22,45),new At(3,46)),new St(30,new At(8,23),new At(26,24)),new St(30,new At(12,15),new At(28,16))),new Ct(28,Int32Array.from([6,26,50,74,98,122]),new St(30,new At(3,117),new At(10,118)),new St(28,new At(3,45),new At(23,46)),new St(30,new At(4,24),new At(31,25)),new St(30,new At(11,15),new At(31,16))),new Ct(29,Int32Array.from([6,30,54,78,102,126]),new St(30,new At(7,116),new At(7,117)),new St(28,new At(21,45),new At(7,46)),new St(30,new At(1,23),new At(37,24)),new St(30,new At(19,15),new At(26,16))),new Ct(30,Int32Array.from([6,26,52,78,104,130]),new St(30,new At(5,115),new At(10,116)),new St(28,new At(19,47),new At(10,48)),new St(30,new At(15,24),new At(25,25)),new St(30,new At(23,15),new At(25,16))),new Ct(31,Int32Array.from([6,30,56,82,108,134]),new St(30,new At(13,115),new At(3,116)),new St(28,new At(2,46),new At(29,47)),new St(30,new At(42,24),new At(1,25)),new St(30,new At(23,15),new At(28,16))),new Ct(32,Int32Array.from([6,34,60,86,112,138]),new St(30,new At(17,115)),new St(28,new At(10,46),new At(23,47)),new St(30,new At(10,24),new At(35,25)),new St(30,new At(19,15),new At(35,16))),new Ct(33,Int32Array.from([6,30,58,86,114,142]),new St(30,new At(17,115),new At(1,116)),new St(28,new At(14,46),new At(21,47)),new St(30,new At(29,24),new At(19,25)),new St(30,new At(11,15),new At(46,16))),new Ct(34,Int32Array.from([6,34,62,90,118,146]),new St(30,new At(13,115),new At(6,116)),new St(28,new At(14,46),new At(23,47)),new St(30,new At(44,24),new At(7,25)),new St(30,new At(59,16),new At(1,17))),new Ct(35,Int32Array.from([6,30,54,78,102,126,150]),new St(30,new At(12,121),new At(7,122)),new St(28,new At(12,47),new At(26,48)),new St(30,new At(39,24),new At(14,25)),new St(30,new At(22,15),new At(41,16))),new Ct(36,Int32Array.from([6,24,50,76,102,128,154]),new St(30,new At(6,121),new At(14,122)),new St(28,new At(6,47),new At(34,48)),new St(30,new At(46,24),new At(10,25)),new St(30,new At(2,15),new At(64,16))),new Ct(37,Int32Array.from([6,28,54,80,106,132,158]),new St(30,new At(17,122),new At(4,123)),new St(28,new At(29,46),new At(14,47)),new St(30,new At(49,24),new At(10,25)),new St(30,new At(24,15),new At(46,16))),new Ct(38,Int32Array.from([6,32,58,84,110,136,162]),new St(30,new At(4,122),new At(18,123)),new St(28,new At(13,46),new At(32,47)),new St(30,new At(48,24),new At(14,25)),new St(30,new At(42,15),new At(32,16))),new Ct(39,Int32Array.from([6,26,54,82,110,138,166]),new St(30,new At(20,117),new At(4,118)),new St(28,new At(40,47),new At(7,48)),new St(30,new At(43,24),new At(22,25)),new St(30,new At(10,15),new At(67,16))),new Ct(40,Int32Array.from([6,30,58,86,114,142,170]),new St(30,new At(19,118),new At(6,119)),new St(28,new At(18,47),new At(31,48)),new St(30,new At(34,24),new At(34,25)),new St(30,new At(20,15),new At(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Y||(Y={}));class Tt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Tt.values=new Map([[Y.DATA_MASK_000,new Tt(Y.DATA_MASK_000,((e,t)=>0===(e+t&1)))],[Y.DATA_MASK_001,new Tt(Y.DATA_MASK_001,((e,t)=>0===(1&e)))],[Y.DATA_MASK_010,new Tt(Y.DATA_MASK_010,((e,t)=>t%3===0))],[Y.DATA_MASK_011,new Tt(Y.DATA_MASK_011,((e,t)=>(e+t)%3===0))],[Y.DATA_MASK_100,new Tt(Y.DATA_MASK_100,((e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1)))],[Y.DATA_MASK_101,new Tt(Y.DATA_MASK_101,((e,t)=>e*t%6===0))],[Y.DATA_MASK_110,new Tt(Y.DATA_MASK_110,((e,t)=>e*t%6<3))],[Y.DATA_MASK_111,new Tt(Y.DATA_MASK_111,((e,t)=>0===(e+t+e*t%3&1)))]]);class Rt{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new S;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=wt.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new S}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ct.getVersionForNumber(t);let n=0;const r=e-11;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,o,n);let i=Ct.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(o,t,n);if(i=Ct.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new S}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Tt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let o=!0;const s=new Uint8Array(t.getTotalCodewords());let a=0,c=0,l=0;for(let d=r-1;d>0;d-=2){6===d&&d--;for(let e=0;e<r;e++){const t=o?r-1-e:e;for(let e=0;e<2;e++)i.get(d-e,t)||(l++,c<<=1,this.bitMatrix.get(d-e,t)&&(c|=1),8===l&&(s[a++]=c,l=0,c=0))}o=!o}if(a!==t.getTotalCodewords())throw new S;return s}remask(){if(null===this.parsedFormatInfo)return;const e=Tt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class It{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new u;const r=t.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const u of o)i+=u.getCount();const s=new Array(i);let a=0;for(const u of o)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;s[a++]=new It(e,new Uint8Array(t))}const c=s[0].codewords.length;let l=s.length-1;for(;l>=0&&s[l].codewords.length!==c;)l--;l++;const d=c-r.getECCodewordsPerBlock();let h=0;for(let u=0;u<d;u++)for(let t=0;t<a;t++)s[t].codewords[u]=e[h++];for(let u=l;u<a;u++)s[u].codewords[d]=e[h++];const p=s[0].codewords.length;for(let u=d;u<p;u++)for(let t=0;t<a;t++){const n=t<l?u:u+1;s[t].codewords[n]=e[h++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(K||(K={}));class xt{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,xt.FOR_BITS.set(r,this),xt.FOR_VALUE.set(e,this)}static forBits(e){const t=xt.FOR_BITS.get(e);if(void 0===t)throw new u;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof xt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}xt.FOR_BITS=new Map,xt.FOR_VALUE=new Map,xt.TERMINATOR=new xt(K.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),xt.NUMERIC=new xt(K.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),xt.ALPHANUMERIC=new xt(K.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),xt.STRUCTURED_APPEND=new xt(K.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),xt.BYTE=new xt(K.BYTE,"BYTE",Int32Array.from([8,16,16]),4),xt.ECI=new xt(K.ECI,"ECI",Int32Array.from([0,0,0]),7),xt.KANJI=new xt(K.KANJI,"KANJI",Int32Array.from([8,10,12]),8),xt.FNC1_FIRST_POSITION=new xt(K.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),xt.FNC1_SECOND_POSITION=new xt(K.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),xt.HANZI=new xt(K.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ot{static decode(e,t,n,r){const i=new mt(e);let o=new I;const s=new Array;let a=-1,c=-1;try{let e,n=null,l=!1;do{if(i.available()<4)e=xt.TERMINATOR;else{const t=i.readBits(4);e=xt.forBits(t)}switch(e){case xt.TERMINATOR:break;case xt.FNC1_FIRST_POSITION:case xt.FNC1_SECOND_POSITION:l=!0;break;case xt.STRUCTURED_APPEND:if(i.available()<16)throw new S;a=i.readBits(8),c=i.readBits(8);break;case xt.ECI:const d=Ot.parseECIValue(i);if(n=A.getCharacterSetECIByValue(d),null===n)throw new S;break;case xt.HANZI:const u=i.readBits(4),h=i.readBits(e.getCharacterCountBits(t));u===Ot.GB2312_SUBSET&&Ot.decodeHanziSegment(i,o,h);break;default:const p=i.readBits(e.getCharacterCountBits(t));switch(e){case xt.NUMERIC:Ot.decodeNumericSegment(i,o,p);break;case xt.ALPHANUMERIC:Ot.decodeAlphanumericSegment(i,o,p,l);break;case xt.BYTE:Ot.decodeByteSegment(i,o,p,n,s,r);break;case xt.KANJI:Ot.decodeKanjiSegment(i,o,p);break;default:throw new S}}}while(e!==xt.TERMINATOR)}catch(l){throw new S}return new J(e,o.toString(),0===s.length?null:s,null===n?null:n.toString(),a,c)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new S;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/96<<8&4294967295|t%96;o+=o<959?41377:42657,r[i]=o>>8&255,r[i+1]=255&o,i+=2,n--}try{t.append(T.decode(r,R.GB2312))}catch(o){throw new S(o)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new S;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/192<<8&4294967295|t%192;o+=o<7936?33088:49472,r[i]=o>>8,r[i+1]=o,i+=2,n--}try{t.append(T.decode(r,R.SHIFT_JIS))}catch(o){throw new S(o)}}static decodeByteSegment(e,t,n,r,i,o){if(8*n>e.available())throw new S;const s=new Uint8Array(n);for(let l=0;l<n;l++)s[l]=e.readBits(8);let a;a=null===r?R.guessEncoding(s,o):r.getName();try{t.append(T.decode(s,a))}catch(c){throw new S(c)}i.push(s)}static toAlphaNumericChar(e){if(e>=Ot.ALPHANUMERIC_CHARS.length)throw new S;return Ot.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new S;const r=e.readBits(11);t.append(Ot.toAlphaNumericChar(Math.floor(r/45))),t.append(Ot.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new S;t.append(Ot.toAlphaNumericChar(e.readBits(6)))}if(r)for(let o=i;o<t.length();o++)"%"===t.charAt(o)&&(o<t.length()-1&&"%"===t.charAt(o+1)?t.deleteCharAt(o+1):t.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new S;const r=e.readBits(10);if(r>=1e3)throw new S;t.append(Ot.toAlphaNumericChar(Math.floor(r/100))),t.append(Ot.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(Ot.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new S;const n=e.readBits(7);if(n>=100)throw new S;t.append(Ot.toAlphaNumericChar(Math.floor(n/10))),t.append(Ot.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new S;const n=e.readBits(4);if(n>=10)throw new S;t.append(Ot.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new S}}Ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ot.GB2312_SUBSET=1;class Nt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Dt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(x.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new Rt(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Nt(!0)),e}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=It.getDataBlocks(i,n,r);let s=0;for(const l of o)s+=l.getNumDataCodewords();const a=new Uint8Array(s);let c=0;for(const l of o){const e=l.getCodewords(),t=l.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)a[c++]=e[n]}return Ot.decode(a,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new p}for(let i=0;i<t;i++)e[i]=n[i]}}class kt extends ae{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new kt(r,i,o)}}class Pt{constructor(e,t,n,r,i,o,s){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),o=this.image;for(let s=0;s<t;s++){const t=r+(0===(1&s)?Math.floor((s+1)/2):-Math.floor((s+1)/2));i[0]=0,i[1]=0,i[2]=0;let a=e;for(;a<n&&!o.get(a,t);)a++;let c=0;for(;a<n;){if(o.get(a,t))if(1===c)i[1]++;else if(2===c){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,a);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,c=1}else i[++c]++;else 1===c&&c++,i[c]++;a++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new O}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&!i.get(t,a)&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=e+1;a<o&&i.get(t,a)&&s[1]<=n;)s[1]++,a++;if(a===o||s[1]>n)return NaN;for(;a<o&&!i.get(t,a)&&s[2]<=n;)s[2]++,a++;if(s[2]>n)return NaN;const c=s[0]+s[1]+s[2];return 5*Math.abs(c-r)>=2*r?NaN:this.foundPatternCross(s)?Pt.centerFromEnd(s,a):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Pt.centerFromEnd(e,n),o=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(o)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,o,i))return e.combineEstimate(o,i,t);const n=new kt(i,o,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Lt extends ae{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,s=(this.count*this.estimatedModuleSize+n)/r;return new Lt(i,o,s,r)}}class Mt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(w.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(w.PURE_BARCODE),r=this.image,i=r.getHeight(),o=r.getWidth();let s=Math.floor(3*i/(4*jt.MAX_MODULES));(s<jt.MIN_SKIP||t)&&(s=jt.MIN_SKIP);let a=!1;const c=new Int32Array(5);for(let d=s-1;d<i&&!a;d+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;let e=0;for(let t=0;t<o;t++)if(r.get(t,d))1===(1&e)&&e++,c[e]++;else if(0===(1&e))if(4===e)if(jt.foundPatternCross(c)){if(!0!==this.handlePossibleCenter(c,d,t,n)){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,e=3;continue}if(s=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>c[2]&&(d+=e-c[2]-s,t=o-1)}e=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,e=3;else c[++e]++;else c[e]++;jt.foundPatternCross(c)&&!0===this.handlePossibleCenter(c,d,o,n)&&(s=c[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const l=this.selectBestPatterns();return ae.orderBestPatterns(l),new Mt(l)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const n=e[i];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let o=0;const s=this.image;for(;e>=o&&t>=o&&s.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;const a=s.getHeight(),c=s.getWidth();for(o=1;e+o<a&&t+o<c&&s.get(t+o,e+o);)i[2]++,o++;if(e+o>=a||t+o>=c)return!1;for(;e+o<a&&t+o<c&&!s.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=a||t+o>=c||i[3]>=n)return!1;for(;e+o<a&&t+o<c&&s.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;const l=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(l-r)<2*r&&jt.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(t,a);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(t,a)&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&i.get(t,a)&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=e+1;a<o&&i.get(t,a);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(t,a)&&s[3]<n;)s[3]++,a++;if(a===o||s[3]>=n)return NaN;for(;a<o&&i.get(t,a)&&s[4]<n;)s[4]++,a++;if(s[4]>=n)return NaN;const c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-r)>=2*r?NaN:jt.foundPatternCross(s)?jt.centerFromEnd(s,a):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(a,t);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,t)&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&i.get(a,t)&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=e+1;a<o&&i.get(a,t);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(a,t)&&s[3]<n;)s[3]++,a++;if(a===o||s[3]>=n)return NaN;for(;a<o&&i.get(a,t)&&s[4]<n;)s[4]++,a++;if(s[4]>=n)return NaN;const c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-r)>=r?NaN:jt.foundPatternCross(s)?jt.centerFromEnd(s,a):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=jt.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){const e=i/7;let t=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(e,s,o)){n[r]=i.combineEstimate(s,o,e),t=!0;break}}if(!t){const t=new Lt(o,s,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=jt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=jt.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new O;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,i+=t*t}n=r/e;let o=Math.sqrt(i/e-n*n);t.sort(((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0}));const s=Math.max(.2*n,o);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>s&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort(((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return t.getCount()-e.getCount()})),t.splice(3)}return[t[0],t[1],t[2]]}}jt.CENTER_QUORUM=2,jt.MIN_SKIP=3,jt.MAX_MODULES=57;class Ut{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(w.NEED_RESULT_POINT_CALLBACK);const t=new jt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new O("No pattern found in proccess finder.");const o=Ut.computeDimension(t,n,r,i),s=Ct.getProvisionalVersionForDimension(o),a=s.getDimensionForVersion()-7;let c=null;if(s.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),o=n.getY()-t.getY()+r.getY(),s=1-3/a,l=Math.floor(t.getX()+s*(e-t.getX())),d=Math.floor(t.getY()+s*(o-t.getY()));for(let t=4;t<=16;t<<=1)try{c=this.findAlignmentInRegion(i,l,d,t);break}catch(h){if(!(h instanceof O))throw h}}const l=Ut.createTransform(t,n,r,c,o),d=Ut.sampleGrid(this.image,l,o);let u;return u=null===c?[r,t,n]:[r,t,n,c],new ce(d,u)}static createTransform(e,t,n,r,i){const o=i-3.5;let s,a,c,l;return null!==r?(s=r.getX(),a=r.getY(),c=o-3,l=c):(s=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),c=o,l=o),he.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,l,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return fe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=oe.round(ae.distance(e,t)/r),o=oe.round(ae.distance(e,n)/r);let s=Math.floor((i+o)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new O("Dimensions could be not found.")}return s}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);let a=Math.floor(t-(r-t)*o);return o=1,a<0?(o=t/(t-a),a=0):a>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,a),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}const o=Math.abs(n-e),s=Math.abs(r-t);let a=-o/2;const c=e<n?1:-1,l=t<r?1:-1;let d=0;const u=n+c;for(let h=e,p=t;h!==u;h+=c){const n=i?p:h,c=i?h:p;if(1===d===this.image.get(n,c)){if(2===d)return oe.distance(h,p,e,t);d++}if(a+=s,a>0){if(p===r)break;p+=l,a-=o}}return 2===d?oe.distance(n+c,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<3*e)throw new O("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-a<3*e)throw new O("Alignment bottom exceeds estimated module size.");return new Pt(this.image,o,a,s-o,c-a,e,this.resultPointCallback).find()}}class Bt{constructor(){this.decoder=new Dt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(w.PURE_BARCODE)){const i=Bt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=Bt.NO_POINTS}else{const i=new Ut(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof Nt&&n.getOther().applyMirroredCorrection(r);const i=new F(n.getText(),n.getRawBytes(),void 0,r,W.QR_CODE,void 0),o=n.getByteSegments();null!==o&&i.putMetadata(X.BYTE_SEGMENTS,o);const s=n.getECLevel();return null!==s&&i.putMetadata(X.ERROR_CORRECTION_LEVEL,s),n.hasStructuredAppend()&&(i.putMetadata(X.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(X.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new O;const r=this.moduleSize(t,e);let i=t[1],o=n[1],s=t[0],a=n[0];if(s>=a||i>=o)throw new O;if(o-i!==a-s&&(a=s+(o-i),a>=e.getWidth()))throw new O;const c=Math.round((a-s+1)/r),l=Math.round((o-i+1)/r);if(c<=0||l<=0)throw new O;if(l!==c)throw new O;const d=Math.floor(r/2);i+=d,s+=d;const u=s+Math.floor((c-1)*r)-a;if(u>0){if(u>d)throw new O;s-=u}const h=i+Math.floor((l-1)*r)-o;if(h>0){if(h>d)throw new O;i-=h}const p=new x(c,l);for(let f=0;f<l;f++){const t=i+Math.floor(f*r);for(let n=0;n<c;n++)e.get(s+Math.floor(n*r),t)&&p.set(n,f)}return p}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],o=e[1],s=!0,a=0;for(;i<r&&o<n;){if(s!==t.get(i,o)){if(5===++a)break;s=!s}i++,o++}if(i===r||o===n)throw new O;return(i-e[0])/7}}Bt.NO_POINTS=new Array;class Ft{PDF417Common(){}static getBitCountSum(e){return oe.sum(e)}static toIntArray(e){if(null==e||!e.length)return Ft.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=y.binarySearch(Ft.SYMBOL_TABLE,262143&e);return t<0?-1:(Ft.CODEWORD_TABLE[t]-1)%Ft.NUMBER_OF_CODEWORDS}}Ft.NUMBER_OF_CODEWORDS=929,Ft.MAX_CODEWORDS_IN_BARCODE=Ft.NUMBER_OF_CODEWORDS-1,Ft.MIN_ROWS_IN_BARCODE=3,Ft.MAX_ROWS_IN_BARCODE=90,Ft.MODULES_IN_CODEWORD=17,Ft.MODULES_IN_STOP_PATTERN=18,Ft.BARS_IN_MODULE=8,Ft.EMPTY_INT_ARRAY=new Int32Array([]),Ft.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ft.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Vt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Wt{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Wt.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Wt.detect(n,r)),new Vt(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,o=!1;for(;r<t.getHeight();){const s=Wt.findVertices(t,r,i);if(null!=s[0]||null!=s[3]){if(o=!0,n.push(s),!e)break;null!=s[2]?(i=Math.trunc(s[2].getX()),r=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY()))}else{if(!o)break;o=!1,i=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Wt.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),o=new Array(8);return Wt.copyToResult(o,Wt.findRowsWithPattern(e,r,i,t,n,Wt.START_PATTERN),Wt.INDEXES_START_PATTERN),null!=o[4]&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),Wt.copyToResult(o,Wt.findRowsWithPattern(e,r,i,t,n,Wt.STOP_PATTERN),Wt.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,o){const s=new Array(4);let a=!1;const c=new Int32Array(o.length);for(;r<t;r+=Wt.ROW_STEP){let t=Wt.findGuardPattern(e,i,r,n,!1,o,c);if(null!=t){for(;r>0;){const s=Wt.findGuardPattern(e,i,--r,n,!1,o,c);if(null==s){r++;break}t=s}s[0]=new ae(t[0],r),s[1]=new ae(t[1],r),a=!0;break}}let l=r+1;if(a){let r=0,i=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;l<t;l++){const t=Wt.findGuardPattern(e,i[0],l,n,!1,o,c);if(null!=t&&Math.abs(i[0]-t[0])<Wt.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Wt.MAX_PATTERN_DRIFT)i=t,r=0;else{if(r>Wt.SKIPPED_ROW_COUNT_MAX)break;r++}}l-=r+1,s[2]=new ae(i[0],l),s[3]=new ae(i[1],l)}return l-r<Wt.BARCODE_MIN_HEIGHT&&y.fill(s,null),s}static findGuardPattern(e,t,n,r,i,o,s){y.fillWithin(s,0,s.length,0);let a=t,c=0;for(;e.get(a,n)&&a>0&&c++<Wt.MAX_PIXEL_DRIFT;)a--;let l=a,d=0,u=o.length;for(let h=i;l<r;l++)if(e.get(l,n)!==h)s[d]++;else{if(d===u-1){if(Wt.patternMatchVariance(s,o,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return new Int32Array([a,l]);a+=s[0]+s[1],m.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,h=!h}return d===u-1&&Wt.patternMatchVariance(s,o,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE?new Int32Array([a,l-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let c=0;c<r;c++)i+=e[c],o+=t[c];if(i<o)return 1/0;let s=i/o;n*=s;let a=0;for(let c=0;c<r;c++){let r=e[c],i=t[c]*s,o=r>i?r-i:i-r;if(o>n)return 1/0;a+=o}return a/i}}Wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Wt.MAX_AVG_VARIANCE=.42,Wt.MAX_INDIVIDUAL_VARIANCE=.8,Wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Wt.MAX_PIXEL_DRIFT=3,Wt.MAX_PATTERN_DRIFT=5,Wt.SKIPPED_ROW_COUNT_MAX=25,Wt.ROW_STEP=5,Wt.BARCODE_MIN_HEIGHT=10;class Ht{constructor(e,t){if(0===t.length)throw new u;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;m.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(t[o-i],n[o]);return new Ht(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Ht?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Ht(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let s=0;s<n;s++){let e=t[s];for(let t=0;t<i;t++)o[s+t]=this.field.add(o[s+t],this.field.multiply(e,r[t]))}return new Ht(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Ht(this.field,t)}multiplyScalar(e){if(0===e)return new Ht(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Ht(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return new Ht(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Ht(this.field,r)}toString(){let e=new I;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class zt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}inverse(e){if(0===e)throw new $;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Gt extends zt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Ht(this,new Int32Array([0])),this.one=new Ht(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Ht(this,n)}}Gt.PDF417_GF=new Gt(Ft.NUMBER_OF_CODEWORDS,3);class Yt{constructor(){this.field=Gt.PDF417_GF}decode(e,t,n){let r=new Ht(this.field,e),i=new Int32Array(t),o=!1;for(let p=t;p>0;p--){let e=r.evaluateAt(this.field.exp(p));i[t-p]=e,0!==e&&(o=!0)}if(!o)return 0;let s=this.field.getOne();if(null!=n)for(const p of n){let t=this.field.exp(e.length-1-p),n=new Ht(this.field,new Int32Array([this.field.subtract(0,t),1]));s=s.multiply(n)}let a=new Ht(this.field,i),c=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),l=c[0],d=c[1],u=this.findErrorLocations(l),h=this.findErrorMagnitudes(d,l,u);for(let f=0;f<u.length;f++){let t=e.length-1-this.field.log(u[f]);if(t<0)throw p.getChecksumInstance();e[t]=this.field.subtract(e[t],h[f])}return u.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,o=this.field.getZero(),s=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=o;if(r=i,o=s,r.isZero())throw p.getChecksumInstance();i=e;let n=this.field.getZero(),a=r.getCoefficient(r.getDegree()),c=this.field.inverse(a);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),c);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}s=n.multiply(o).subtract(t).negative()}let a=s.getCoefficient(0);if(0===a)throw p.getChecksumInstance();let c=this.field.inverse(a);return[s.multiply(c),i.multiply(c)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw p.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let c=1;c<=r;c++)i[r-c]=this.field.multiply(c,t.getCoefficient(c));let o=new Ht(this.field,i),s=n.length,a=new Int32Array(s);for(let c=0;c<s;c++){let t=this.field.inverse(n[c]),r=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(o.evaluateAt(t));a[c]=this.field.multiply(r,i)}return a}}class Kt{constructor(e,t,n,r,i){e instanceof Kt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const o=null==t||null==n,s=null==r||null==i;if(o&&s)throw new O;o?(t=new ae(0,r.getY()),n=new ae(0,i.getY())):s&&(r=new ae(e.getWidth()-1,t.getY()),i=new ae(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Kt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let s=new ae(t.getX(),i);n?r=s:o=s}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let o=new ae(e.getX(),r);n?i=o:s=o}return new Kt(this.image,r,i,o,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class qt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,i,o,s,a){if("%%"===e)return"%";if(void 0===t[++n])return;e=o?parseInt(o.substr(1)):void 0;let c,l=s?parseInt(s.substr(1)):void 0;switch(a){case"s":c=t[n];break;case"c":c=t[n][0];break;case"f":c=parseFloat(t[n]).toFixed(e);break;case"p":c=parseFloat(t[n]).toPrecision(e);break;case"e":c=parseFloat(t[n]).toExponential(e);break;case"x":c=parseInt(t[n]).toString(l||16);break;case"d":c=parseFloat(parseInt(t[n],l||10).toPrecision(e)).toFixed(0)}c="object"===typeof c?JSON.stringify(c):(+c).toString(l);let d=parseInt(i),u=i&&i[0]+""==="0"?"0":" ";for(;c.length<d;)c=void 0!==r?c+u:u+c;return c}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=Xt.form(e,n)}toString(){return this.buffer}}class Jt{constructor(e){this.boundingBox=new Kt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Jt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Xt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Jt.MAX_NEARBY_DISTANCE=5;class Qt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Ft.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Zt extends Jt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,c=1,l=0;for(let d=o;d<s;d++){if(null==t[d])continue;let n=t[d],r=n.getRowNumber()-a;if(0===r)l++;else if(1===r)c=Math.max(c,l),l=1,a=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>d)t[d]=null;else{let e;e=c>2?(c-2)*r:r;let i=e>=d;for(let n=1;n<=e&&!i;n++)i=null!=t[d-n];i?t[d]=null:(a=n.getRowNumber(),l=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.getCodewords(),a=-1;for(let c=i;c<o;c++){if(null==s[c])continue;let t=s[c];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-a;0===n||(1===n?a=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?s[c]=null:a=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Qt,n=new Qt,r=new Qt,i=new Qt;for(let s of e){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let e=s.getValue()%30,o=s.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<Ft.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>Ft.MAX_ROWS_IN_BARCODE)return null;let o=new qt(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount())e[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class $t{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Ft.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=$t.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=$t.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;null!=this.detectionResultColumns[e+1]&&(o=this.detectionResultColumns[e+1].getCodewords());let s=new Array(14);s[2]=i[t],s[3]=o[t],t>0&&(s[0]=n[t-1],s[4]=i[t-1],s[5]=o[t-1]),t>1&&(s[8]=n[t-2],s[10]=i[t-2],s[11]=o[t-2]),t<n.length-1&&(s[1]=n[t+1],s[6]=i[t+1],s[7]=o[t+1]),t<n.length-2&&(s[9]=n[t+2],s[12]=i[t+2],s[13]=o[t+2]);for(let a of s)if($t.adjustRowNumber(r,a))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Xt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Ft.SYMBOL_TABLE.length;e++){let t=Ft.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<Ft.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Ft.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Ft.BARS_IN_MODULE-r-1]=Math.fround(i/Ft.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=oe.sum(e),n=new Int32Array(Ft.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<Ft.MODULES_IN_CODEWORD;o++){let s=t/(2*Ft.MODULES_IN_CODEWORD)+o*t/Ft.MODULES_IN_CODEWORD;i+e[r]<=s&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Ft.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=oe.sum(e),n=new Array(Ft.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=se.MAX_VALUE,i=-1;this.bSymbolTableReady||tn.initialize();for(let o=0;o<tn.RATIOS_TABLE.length;o++){let e=0,t=tn.RATIOS_TABLE[o];for(let i=0;i<Ft.BARS_IN_MODULE;i++){let o=Math.fround(t[i]-n[i]);if(e+=Math.fround(o*o),e>=r)break}e<r&&(r=e,i=Ft.SYMBOL_TABLE[o])}return i}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Ft.SYMBOL_TABLE.length).map((e=>new Array(Ft.BARS_IN_MODULE)));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class on extends l{}on.kind="NullPointerException";class sn{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new on;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new g;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class an extends l{}class cn extends sn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new u("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new an;t=_.MAX_VALUE}this.buf=y.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new g;this.ensureCapacity(this.count+n),m.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return y.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function ln(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let dn;function un(e){if("undefined"===typeof dn&&(dn=ln()),null===dn)throw new Error("BigInt is not supported!");return dn(e)}function hn(){let e=[];e[0]=un(1);let t=un(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(q||(q={}));class pn{static decode(e,t){let n=new I(""),r=A.ISO8859_1;n.enableDecoding(r);let i=1,o=e[i++],s=new nn;for(;i<e[0];){switch(o){case pn.TEXT_COMPACTION_MODE_LATCH:i=pn.textCompaction(e,i,n);break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:i=pn.byteCompaction(o,e,r,i,n);break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case pn.NUMERIC_COMPACTION_MODE_LATCH:i=pn.numericCompaction(e,i,n);break;case pn.ECI_CHARSET:A.getCharacterSetECIByValue(e[i++]);break;case pn.ECI_GENERAL_PURPOSE:i+=2;break;case pn.ECI_USER_DEFINED:i++;break;case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=pn.decodeMacroBlock(e,i,s);break;case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:throw new S;default:i--,i=pn.textCompaction(e,i,n)}if(!(i<e.length))throw S.getFormatInstance();o=e[i++]}if(0===n.length())throw S.getFormatInstance();let a=new J(null,n.toString(),null,t);return a.setOther(s),a}static decodeMacroBlock(e,t,n){if(t+pn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw S.getFormatInstance();let r=new Int32Array(pn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<pn.NUMBER_OF_SEQUENCE_CODEWORDS;s++,t++)r[s]=e[t];n.setSegmentIndex(_.parseInt(pn.decodeBase900toBase10(r,pn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new I;t=pn.textCompaction(e,t,i),n.setFileId(i.toString());let o=-1;for(e[t]===pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new I;t=pn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new I;t=pn.textCompaction(e,t+1,i),n.setSender(i.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new I;t=pn.textCompaction(e,t+1,o),n.setAddressee(o.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let s=new I;t=pn.numericCompaction(e,t+1,s),n.setSegmentCount(_.parseInt(s.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new I;t=pn.numericCompaction(e,t+1,a),n.setTimestamp(rn.parseLong(a.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let c=new I;t=pn.numericCompaction(e,t+1,c),n.setChecksum(_.parseInt(c.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let l=new I;t=pn.numericCompaction(e,t+1,l),n.setFileSize(rn.parseLong(l.toString()));break;default:throw S.getFormatInstance()}break;case pn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw S.getFormatInstance()}if(-1!==o){let r=t-o;n.isLastSegment()&&r--,n.setOptionalData(y.copyOfRange(e,o,o+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),o=0,s=!1;for(;t<e[0]&&!s;){let n=e[t++];if(n<pn.TEXT_COMPACTION_MODE_LATCH)r[o]=n/30,r[o+1]=n%30,o+=2;else switch(n){case pn.TEXT_COMPACTION_MODE_LATCH:r[o++]=pn.TEXT_COMPACTION_MODE_LATCH;break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[o]=n,o++}}return pn.decodeTextCompaction(r,i,o,n),t}static decodeTextCompaction(e,t,n,r){let i=q.ALPHA,o=q.ALPHA,s=0;for(;s<n;){let n=e[s],a="";switch(i){case q.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case pn.LL:i=q.LOWER;break;case pn.ML:i=q.MIXED;break;case pn.PS:o=i,i=q.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case pn.AS:o=i,i=q.ALPHA_SHIFT;break;case pn.ML:i=q.MIXED;break;case pn.PS:o=i,i=q.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.MIXED:if(n<pn.PL)a=pn.MIXED_CHARS[n];else switch(n){case pn.PL:i=q.PUNCT;break;case 26:a=" ";break;case pn.LL:i=q.LOWER;break;case pn.AL:i=q.ALPHA;break;case pn.PS:o=i,i=q.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.PUNCT:if(n<pn.PAL)a=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:i=q.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.ALPHA_SHIFT:if(i=o,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case pn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}break;case q.PUNCT_SHIFT:if(i=o,n<pn.PAL)a=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:i=q.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=q.ALPHA}}""!==a&&r.append(a),s++}}static byteCompaction(e,t,n,r,i){let o=new cn,s=0,a=0,c=!1;switch(e){case pn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!c;)switch(e[s++]=n,a=900*a+n,n=t[r++],n){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:r--,c=!0;break;default:if(s%5===0&&s>0){for(let e=0;e<6;++e)o.write(Number(un(a)>>un(8*(5-e))));a=0,s=0}}r===t[0]&&n<pn.TEXT_COMPACTION_MODE_LATCH&&(e[s++]=n);for(let t=0;t<s;t++)o.write(e[t]);break;case pn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!c;){let e=t[r++];if(e<pn.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+e;else switch(e){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:r--,c=!0}if(s%5===0&&s>0){for(let e=0;e<6;++e)o.write(Number(un(a)>>un(8*(5-e))));a=0,s=0}}}return i.append(T.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,o=new Int32Array(pn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let s=e[t++];if(t===e[0]&&(i=!0),s<pn.TEXT_COMPACTION_MODE_LATCH)o[r]=s,r++;else switch(s){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%pn.MAX_NUMERIC_CODEWORDS===0||s===pn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(pn.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=un(0);for(let i=0;i<t;i++)n+=pn.EXP900[t-i-1]*un(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new S;return r.substring(1)}}pn.TEXT_COMPACTION_MODE_LATCH=900,pn.BYTE_COMPACTION_MODE_LATCH=901,pn.NUMERIC_COMPACTION_MODE_LATCH=902,pn.BYTE_COMPACTION_MODE_LATCH_6=924,pn.ECI_USER_DEFINED=925,pn.ECI_GENERAL_PURPOSE=926,pn.ECI_CHARSET=927,pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pn.MACRO_PDF417_TERMINATOR=922,pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pn.MAX_NUMERIC_CODEWORDS=15,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pn.PL=25,pn.LL=27,pn.AS=27,pn.ML=28,pn.AL=28,pn.PS=29,pn.PAL=29,pn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",pn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",pn.EXP900=ln()?hn():[],pn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class fn{constructor(){}static decode(e,t,n,r,i,o,s){let a,c=new Kt(e,t,n,r,i),l=null,d=null;for(let p=!0;;p=!1){if(null!=t&&(l=fn.getRowIndicatorColumn(e,c,t,!0,o,s)),null!=r&&(d=fn.getRowIndicatorColumn(e,c,r,!1,o,s)),a=fn.merge(l,d),null==a)throw O.getNotFoundInstance();let n=a.getBoundingBox();if(!p||null==n||!(n.getMinY()<c.getMinY()||n.getMaxY()>c.getMaxY()))break;c=n}a.setBoundingBox(c);let u=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,l),a.setDetectionResultColumn(u,d);let h=null!=l;for(let p=1;p<=u;p++){let t,n=h?p:u-p;if(void 0!==a.getDetectionResultColumn(n))continue;t=0===n||n===u?new Zt(c,0===n):new Jt(c),a.setDetectionResultColumn(n,t);let r=-1,i=r;for(let l=c.getMinY();l<=c.getMaxY();l++){if(r=fn.getStartColumn(a,n,l,h),r<0||r>c.getMaxX()){if(-1===i)continue;r=i}let d=fn.detectCodeword(e,c.getMinX(),c.getMaxX(),h,r,l,o,s);null!=d&&(t.setCodeword(l,d),i=r,o=Math.min(o,d.getWidth()),s=Math.max(s,d.getWidth()))}}return fn.createDecoderResult(a)}static merge(e,t){if(null==e&&null==t)return null;let n=fn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Kt.merge(fn.adjustBoundingBox(e),fn.adjustBoundingBox(t));return new $t(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=fn.getMax(t),r=0;for(let s of t)if(r+=n-s,s>0)break;let i=e.getCodewords();for(let s=0;r>0&&null==i[s];s++)r--;let o=0;for(let s=t.length-1;s>=0&&(o+=n-t[s],!(t[s]>0));s--);for(let s=i.length-1;o>0&&null==i[s];s--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,o){let s=new Zt(t,r);for(let a=0;a<2;a++){let c=0===a?1:-1,l=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=t.getMaxY()&&a>=t.getMinY();a+=c){let t=fn.detectCodeword(e,0,e.getWidth(),r,l,a,i,o);null!=t&&(s.setCodeword(a,t),l=r?t.getStartX():t.getEndX())}}return s}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-fn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>Ft.MAX_CODEWORDS_IN_BARCODE)throw O.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=fn.createBarcodeMatrix(e);fn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let s=0;s<e.getBarcodeColumnCount();s++){let c=t[a][s+1].getValue(),l=a*e.getBarcodeColumnCount()+s;0===c.length?n.push(l):1===c.length?r[l]=c[0]:(o.push(l),i.push(c))}let s=new Array(i.length);for(let a=0;a<s.length;a++)s[a]=i[a];return fn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,Ft.toIntArray(n),Ft.toIntArray(o),s)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let o=new Int32Array(r.length),s=100;for(;s-- >0;){for(let e=0;e<o.length;e++)t[r[e]]=i[e][o[e]];try{return fn.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof p))throw a}if(0===o.length)throw p.getChecksumInstance();for(let e=0;e<o.length;e++){if(o[e]<i[e].length-1){o[e]++;break}if(o[e]=0,e===o.length-1)throw p.getChecksumInstance()}}throw p.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},(()=>new Array(e.getBarcodeColumnCount()+2)));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Qt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,o=null;if(fn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=o)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=o)return r?o.getStartX():o.getEndX();if(fn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=o)return r?o.getEndX():o.getStartX();let s=0;for(;fn.isValidBarcodeColumn(e,t-i);){t-=i;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*s*(n.getEndX()-n.getStartX());s++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,o,s,a){i=fn.adjustCodewordStartColumn(e,t,n,r,i,o);let c,l=fn.getModuleBitCount(e,t,n,r,i,o);if(null==l)return null;let d=oe.sum(l);if(r)c=i+d;else{for(let e=0;e<l.length/2;e++){let t=l[e];l[e]=l[l.length-1-e],l[l.length-1-e]=t}c=i,i=c-d}if(!fn.checkCodewordSkew(d,s,a))return null;let u=tn.getDecodedValue(l),h=Ft.getCodeword(u);return-1===h?null:new en(i,c,fn.getCodewordBucketNumber(u),h)}static getModuleBitCount(e,t,n,r,i,o){let s=i,a=new Int32Array(8),c=0,l=r?1:-1,d=r;for(;(r?s<n:s>=t)&&c<a.length;)e.get(s,o)===d?(a[c]++,s+=l):(c++,d=!d);return c===a.length||s===(r?n:t)&&c===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,o){let s=i,a=r?-1:1;for(let c=0;c<2;c++){for(;(r?s>=t:s<n)&&r===e.get(s,o);){if(Math.abs(i-s)>fn.CODEWORD_SKEW_SIZE)return i;s+=a}a=-a,r=!r}return s}static checkCodewordSkew(e,t,n){return t-fn.CODEWORD_SKEW_SIZE<=e&&e<=n+fn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw S.getFormatInstance();let r=1<<t+1,i=fn.correctErrors(e,n,r);fn.verifyCodewordCount(e,r);let o=pn.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+fn.MAX_ERRORS||n<0||n>fn.MAX_EC_CODEWORDS)throw p.getChecksumInstance();return fn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw S.getFormatInstance();let n=e[0];if(n>e.length)throw S.getFormatInstance();if(0===n){if(!(t<e.length))throw S.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return fn.getCodewordBucketNumber(fn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Xt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}fn.CODEWORD_SKEW_SIZE=2,fn.MAX_ERRORS=3,fn.MAX_EC_CODEWORDS=512,fn.errorCorrection=new Yt;class mn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=mn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw O.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return mn.decode(e,t,!0)}catch(n){if(n instanceof S||n instanceof p)throw O.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,i=Wt.detectMultiple(e,t,n);for(const o of i.getPoints()){const e=fn.decode(i.getBits(),o[4],o[5],o[6],o[7],mn.getMinCodewordWidth(o),mn.getMaxCodewordWidth(o)),t=new F(e.getText(),e.getRawBytes(),void 0,o,W.PDF_417);t.putMetadata(X.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(X.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map((e=>e))}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?_.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(mn.getMaxWidth(e[0],e[4]),mn.getMaxWidth(e[6],e[2])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN),Math.max(mn.getMaxWidth(e[1],e[5]),mn.getMaxWidth(e[7],e[3])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(mn.getMinWidth(e[0],e[4]),mn.getMinWidth(e[6],e[2])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN),Math.min(mn.getMinWidth(e[1],e[5]),mn.getMinWidth(e[7],e[3])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN)))}reset(){}}class gn extends l{}gn.kind="ReaderException";class vn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(w.TRY_HARDER),r=t(e)?null:e.get(w.POSSIBLE_FORMATS),i=new Array;if(!t(r)){const t=r.some((e=>e===W.UPC_A||e===W.UPC_E||e===W.EAN_13||e===W.EAN_8||e===W.CODABAR||e===W.CODE_39||e===W.CODE_93||e===W.CODE_128||e===W.ITF||e===W.RSS_14||e===W.RSS_EXPANDED));t&&!n&&i.push(new ct(e,this.verbose)),r.includes(W.QR_CODE)&&i.push(new Bt),r.includes(W.DATA_MATRIX)&&i.push(new _t),r.includes(W.AZTEC)&&i.push(new ve),r.includes(W.PDF_417)&&i.push(new mn),t&&n&&i.push(new ct(e,this.verbose))}0===i.length&&(n||i.push(new ct(e,this.verbose)),i.push(new Bt),i.push(new _t),i.push(new ve),i.push(new mn),n&&i.push(new ct(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new gn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof gn)continue}throw new O("No MultiFormat Readers were able to detect the code.")}}class yn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new vn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class _n extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new mn,e)}}class En extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Bt,e)}}var bn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(bn||(bn={}));var wn=bn;class Sn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Z(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const e=n.multiply(new Z(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new u("No error correction bytes");const n=e.length-t;if(n<=0)throw new u("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);m.arraycopy(e,0,i,0,n);let o=new Z(this.field,i);o=o.multiplyByMonomial(t,1);const s=o.divide(r)[1].getCoefficients(),a=t-s.length;for(let c=0;c<a;c++)e[n+c]=0;m.arraycopy(s,0,e,n+a,s.length)}}class An{constructor(){}static applyMaskPenaltyRule1(e){return An.applyMaskPenaltyRule1Internal(e,!0)+An.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const e=n[o];for(let i=0;i<r-1;i++){const r=e[i];r===e[i+1]&&r===n[o+1][i]&&r===n[o+1][i+1]&&t++}}return An.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let e=0;e<r;e++){const s=n[o];e+6<r&&1===s[e]&&0===s[e+1]&&1===s[e+2]&&1===s[e+3]&&1===s[e+4]&&0===s[e+5]&&1===s[e+6]&&(An.isWhiteHorizontal(s,e-4,e)||An.isWhiteHorizontal(s,e+7,e+11))&&t++,o+6<i&&1===n[o][e]&&0===n[o+1][e]&&1===n[o+2][e]&&1===n[o+3][e]&&1===n[o+4][e]&&0===n[o+5][e]&&1===n[o+6][e]&&(An.isWhiteVertical(n,e,o-4,o)||An.isWhiteVertical(n,e,o+7,o+11))&&t++}return t*An.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++){const e=n[s];for(let n=0;n<r;n++)1===e[n]&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-o)/o)*An.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(1&i)+i%3;break;case 6:i=n*t,r=(1&i)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new u("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let s=0;s<r;s++){let e=0,r=-1;for(let a=0;a<i;a++){const i=t?o[s][a]:o[a][s];i===r?e++:(e>=5&&(n+=An.N1+(e-5)),e=1,r=i)}e>=5&&(n+=An.N1+(e-5))}return n}}An.N1=3,An.N2=3,An.N3=40,An.N4=10;class Cn{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)y.fill(t,e)}equals(e){if(!(e instanceof Cn))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new I;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class Tn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new I;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Tn.NUM_MASK_PATTERNS}}Tn.NUM_MASK_PATTERNS=8;class Rn extends l{}Rn.kind="WriterException";class In{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){In.clearMatrix(i),In.embedBasicPatterns(n,i),In.embedTypeInfo(t,r,i),In.maybeEmbedVersionInfo(n,i),In.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){In.embedPositionDetectionPatternsAndSeparators(t),In.embedDarkDotAtLeftBottomCorner(t),In.maybeEmbedPositionAdjustmentPatterns(e,t),In.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new E;In.makeTypeInfoBits(e,t,r);for(let i=0,o=r.getSize();i<o;++i){const e=r.get(r.getSize()-1-i),t=In.TYPE_INFO_COORDINATES[i],o=t[0],s=t[1];if(n.setBoolean(o,s,e),i<8){const t=n.getWidth()-i-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(i-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new E;In.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const o=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+e,o),t.setBoolean(t.getHeight()-11+e,i,o)}}static embedDataBits(e,t,n){let r=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);s>=0&&s<n.getHeight();){for(let i=0;i<2;++i){const a=o-i;if(!In.isEmpty(n.get(a,s)))continue;let c;r<e.getSize()?(c=e.get(r),++r):c=!1,255!==t&&An.getDataMaskBit(t,a,s)&&(c=!c),n.setBoolean(a,s,c)}s+=i}i=-i,s+=i,o-=2}if(r!==e.getSize())throw new Rn("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-_.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new u("0 polynomial");const n=In.findMSBSet(t);for(e<<=n-1;In.findMSBSet(e)>=n;)e^=t<<In.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Tn.isValidMaskPattern(t))throw new Rn("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=In.calculateBCHCode(r,In.TYPE_INFO_POLY);n.appendBits(i,10);const o=new E;if(o.appendBits(In.TYPE_INFO_MASK_PATTERN,15),n.xor(o),15!==n.getSize())throw new Rn("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=In.calculateBCHCode(e.getVersionNumber(),In.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new Rn("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;In.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),In.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new Rn;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!In.isEmpty(n.get(e+r,t)))throw new Rn;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!In.isEmpty(n.get(e,t+r)))throw new Rn;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=In.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=In.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=In.POSITION_DETECTION_PATTERN[0].length;In.embedPositionDetectionPattern(0,0,e),In.embedPositionDetectionPattern(e.getWidth()-t,0,e),In.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;In.embedHorizontalSeparationPattern(0,n-1,e),In.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),In.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;In.embedVerticalSeparationPattern(r,0,e),In.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),In.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=In.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const e=r[i];if(e>=0)for(let n=0;n!==o;n++){const i=r[n];i>=0&&In.isEmpty(t.get(i,e))&&In.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}In.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),In.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),In.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),In.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),In.VERSION_INFO_POLY=7973,In.TYPE_INFO_POLY=1335,In.TYPE_INFO_MASK_PATTERN=21522;class xn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class On{constructor(){}static calculateMaskPenalty(e){return An.applyMaskPenaltyRule1(e)+An.applyMaskPenaltyRule2(e)+An.applyMaskPenaltyRule3(e)+An.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=On.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(wn.CHARACTER_SET);i&&(r=n.get(wn.CHARACTER_SET).toString());const o=this.chooseMode(e,r),s=new E;if(o===xt.BYTE&&(i||On.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=A.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,s)}this.appendModeInfo(o,s);const a=new E;let c;if(this.appendBytes(e,o,a,r),null!==n&&void 0!==n.get(wn.QR_VERSION)){const e=Number.parseInt(n.get(wn.QR_VERSION).toString(),10);c=Ct.getVersionForNumber(e);const r=this.calculateBitsNeeded(o,s,a,c);if(!this.willFit(r,c,t))throw new Rn("Data too big for requested version")}else c=this.recommendVersion(t,o,s,a);const l=new E;l.appendBitArray(s);const d=o===xt.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(d,c,o,l),l.appendBitArray(a);const u=c.getECBlocksForLevel(t),h=c.getTotalCodewords()-u.getTotalECCodewords();this.terminateBits(h,l);const p=this.interleaveWithECBytes(l,c.getTotalCodewords(),h,u.getNumBlocks()),f=new Tn;f.setECLevel(t),f.setMode(o),f.setVersion(c);const m=c.getDimensionForVersion(),g=new Cn(m,m),v=this.chooseMaskPattern(p,t,c,g);return f.setMaskPattern(v),In.buildMatrix(p,t,c,v,g),f.setMatrix(g),f}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,Ct.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(s,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<On.ALPHANUMERIC_TABLE.length?On.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(A.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return xt.KANJI;let n=!1,r=!1;for(let i=0,o=e.length;i<o;++i){const t=e.charAt(i);if(On.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return xt.BYTE;r=!0}}return r?xt.ALPHANUMERIC:n?xt.NUMERIC:xt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=T.encode(e,A.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let s=0;s<Tn.NUM_MASK_PATTERNS;s++){In.buildMatrix(e,t,n,s,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,o=s)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=Ct.getVersionForNumber(n);if(On.willFit(e,r,t))return r}throw new Rn("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new Rn("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits(0===(1&o)?236:17,8);if(t.getSize()!==n)throw new Rn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,o){if(r>=n)throw new Rn("Block ID too large");const s=e%n,a=n-s,c=Math.floor(e/n),l=c+1,d=Math.floor(t/n),u=d+1,h=c-d,p=l-u;if(h!==p)throw new Rn("EC bytes mismatch");if(n!==a+s)throw new Rn("RS blocks mismatch");if(e!==(d+h)*a+(u+p)*s)throw new Rn("Total bytes mismatch");r<a?(i[0]=d,o[0]=h):(i[0]=u,o[0]=p)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Rn("Number of bits and data bytes does not match");let i=0,o=0,s=0;const a=new Array;for(let l=0;l<r;++l){const c=new Int32Array(1),d=new Int32Array(1);On.getNumDataBytesAndNumECBytesForBlockID(t,n,r,l,c,d);const u=c[0],h=new Uint8Array(u);e.toBytes(8*i,h,0,u);const p=On.generateECBytes(h,d[0]);a.push(new xn(h,p)),o=Math.max(o,u),s=Math.max(s,p.length),i+=c[0]}if(n!==i)throw new Rn("Data bytes does not match offset");const c=new E;for(let l=0;l<o;++l)for(const e of a){const t=e.getDataBytes();l<t.length&&c.appendBits(t[l],8)}for(let l=0;l<s;++l)for(const e of a){const t=e.getErrorCorrectionBytes();l<t.length&&c.appendBits(t[l],8)}if(t!==c.getSizeInBytes())throw new Rn("Interleaving error: "+t+" and "+c.getSizeInBytes()+" differ.");return c}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=255&e[o];new Sn(ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=r[n+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Rn(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case xt.NUMERIC:On.appendNumericBytes(e,n);break;case xt.ALPHANUMERIC:On.appendAlphanumericBytes(e,n);break;case xt.BYTE:On.append8BitBytes(e,n,r);break;case xt.KANJI:On.appendKanjiBytes(e,n);break;default:throw new Rn("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=On.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=On.getDigit(e.charAt(r));if(r+2<n){const n=On.getDigit(e.charAt(r+1)),o=On.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+o,10),r+=3}else if(r+1<n){const n=On.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=On.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new Rn;if(r+1<n){const n=On.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new Rn;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=T.encode(e,n)}catch(i){throw new Rn(i)}for(let o=0,s=r.length;o!==s;o++){const e=r[o];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=T.encode(e,A.SJIS)}catch(i){throw new Rn(i)}const r=n.length;for(let o=0;o<r;o+=2){const e=(255&n[o])<<8&4294967295|255&n[o+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new Rn("Invalid byte sequence");const i=192*(r>>8)+(255&r);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(xt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}On.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),On.DEFAULT_BYTE_MODE_ENCODING=A.UTF8.getName();class Nn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new u("Found empty contents");if(t<0||n<0)throw new u("Requested dimensions are too small: "+t+"x"+n);let i=bt.L,o=Nn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(wn.ERROR_CORRECTION)&&(i=bt.fromString(r.get(wn.ERROR_CORRECTION).toString())),void 0!==r.get(wn.MARGIN)&&(o=Number.parseInt(r.get(wn.MARGIN).toString(),10)));const s=On.encode(e,i,r);return this.renderResult(s,t,n,o)}writeToDom(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const o=this.write(t,n,r,i);e&&e.appendChild(o)}renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,c=s+2*r,l=Math.max(t,a),d=Math.max(n,c),u=Math.min(Math.floor(l/a),Math.floor(d/c)),h=Math.floor((l-o*u)/2),p=Math.floor((d-s*u)/2),f=this.createSVGElement(l,d);for(let m=0,g=p;m<s;m++,g+=u)for(let e=0,t=h;e<o;e++,t+=u)if(1===i.get(e,m)){const e=this.createSvgRectElement(t,g,u,u);f.appendChild(e)}return f}createSVGElement(e,t){const n=document.createElementNS(Nn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Nn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Nn.QUIET_ZONE_SIZE=4,Nn.SVG_NS="http://www.w3.org/2000/svg";class Dn{encode(e,t,n,r,i){if(0===e.length)throw new u("Found empty contents");if(t!==W.QR_CODE)throw new u("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new u("Requested dimensions are too small: ".concat(n,"x").concat(r));let o=bt.L,s=Dn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(wn.ERROR_CORRECTION)&&(o=bt.fromString(i.get(wn.ERROR_CORRECTION).toString())),void 0!==i.get(wn.MARGIN)&&(s=Number.parseInt(i.get(wn.MARGIN).toString(),10)));const a=On.encode(e,o,i);return Dn.renderResult(a,n,r,s)}static renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,c=s+2*r,l=Math.max(t,a),d=Math.max(n,c),u=Math.min(Math.floor(l/a),Math.floor(d/c)),h=Math.floor((l-o*u)/2),p=Math.floor((d-s*u)/2),f=new x(l,d);for(let m=0,g=p;m<s;m++,g+=u)for(let e=0,t=h;e<o;e++,t+=u)1===i.get(e,m)&&f.setRegion(t,g,u,u);return f}}Dn.QUIET_ZONE_SIZE=4;class kn{encode(e,t,n,r,i){let o;if(t!==W.QR_CODE)throw new u("No encoder available for format "+t);return o=new Dn,o.encode(e,t,n,r,i)}}class Pn extends k{constructor(e,t,n,r,i,o,s,a){if(super(o,s),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+o>t||i+s>n)throw new u("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(o,s)}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;m.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Pn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/Pn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Pn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const t=o*e;for(let o=0;o<e;o++){const e=255&r[i+o*Pn.THUMBNAIL_SCALE_FACTOR];n[t+o]=4278190080|65793*e}i+=this.dataWidth*Pn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Pn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const t=i+e/2;for(let r=i,o=i+e-1;r<t;r++,o--){const e=n[r];n[r]=n[o],n[o]=e}}}invert(){return new P(this)}}Pn.THUMBNAIL_SCALE_FACTOR=2;class Ln extends k{constructor(e,t,n,r,i,o,s){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=s,4===e.BYTES_PER_ELEMENT){const r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,o=n>>7&510,s=255&n;i[t]=(r+o+s)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===o&&(this.left=0),void 0===s&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new u("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;m.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ln(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new P(this)}}class Mn extends A{static forName(e){return this.getCharacterSetECIByName(e)}}class jn{}jn.ISO_8859_1=A.ISO8859_1;class Un{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Bn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Fn{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Vn extends Fn{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Vn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+_.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Wn extends Vn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Wn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hn(e,t,n){return new Wn(e,t,n)}function zn(e,t,n){return new Vn(e,t,n)}const Gn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yn=0,Kn=1,qn=2,Xn=3,Jn=4,Qn=new Vn(null,0,0),Zn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function $n(e){for(let t of e)y.fill(t,-1);return e[Yn][Jn]=0,e[Kn][Jn]=0,e[Kn][Yn]=28,e[Xn][Jn]=0,e[qn][Jn]=0,e[qn][Yn]=15,e}const er=$n(y.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=Zn[this.mode][e];r=zn(r,65535&t,t>>16),n+=t>>16}let i=e===qn?4:5;return r=zn(r,t,i),new tr(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===qn?4:5;return n=zn(n,er[this.mode][e],r),n=zn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Jn||this.mode===qn){let e=Zn[n][Yn];t=zn(t,65535&e,e>>16),r+=e>>16,n=Yn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new tr(t,n,this.binaryShiftByteCount+1,r+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Hn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Zn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new E;for(const r of t)r.appendTo(n,e);return n}toString(){return R.format("%s bits=%d bytes=%d",Gn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=R.getCharCode(" "),n=R.getCharCode("."),r=R.getCharCode(",");e[Yn][t]=1;const i=R.getCharCode("Z"),o=R.getCharCode("A");for(let h=o;h<=i;h++)e[Yn][h]=h-o+2;e[Kn][t]=1;const s=R.getCharCode("z"),a=R.getCharCode("a");for(let h=a;h<=s;h++)e[Kn][h]=h-a+2;e[qn][t]=1;const c=R.getCharCode("9"),l=R.getCharCode("0");for(let h=l;h<=c;h++)e[qn][h]=h-l+2;e[qn][r]=12,e[qn][n]=13;const d=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<d.length;h++)e[Xn][R.getCharCode(d[h])]=h;const u=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<u.length;h++)R.getCharCode(u[h])>0&&(e[Jn][R.getCharCode(u[h])]=h);return e}tr.INITIAL_STATE=new tr(Qn,Yn,0,0);const rr=nr(y.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=R.getCharCode(" "),t=R.getCharCode("\n");let n=Bn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,o=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case R.getCharCode("\r"):i=o===t?2:0;break;case R.getCharCode("."):i=o===e?3:0;break;case R.getCharCode(","):i=o===e?4:0;break;case R.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=ir.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return Bn.min(n,((e,t)=>e.getBitCount()-t.getBitCount())).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=rr[e.getMode()][r]>0,o=null;for(let s=0;s<=Jn;s++){let a=rr[s][r];if(a>0){if(null==o&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===qn){const e=o.latchAndAppend(s,a);n.push(e)}if(!i&&er[e.getMode()][s]>=0){const e=o.shiftAndAppend(s,a);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Jn,n)),e.getMode()!==Jn&&r.push(i.shiftAndAppend(Jn,n)),3===n||4===n){let e=i.latchAndAppend(qn,16-n).latchAndAppend(qn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter((e=>e!==r)))}e&&t.push(n)}return t}}class or{constructor(){}static encodeBytes(e){return or.encode(e,or.DEFAULT_EC_PERCENT,or.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,o,s,a,c=new ir(e).encode(),l=_.truncDivision(c.getSize()*t,100)+11,d=c.getSize()+l;if(n!==or.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?or.MAX_NB_BITS_COMPACT:or.MAX_NB_BITS))throw new u(R.format("Illegal value %s for layers",n));o=or.totalBitsInLayer(i,r),s=or.WORD_SIZE[i];let e=o-o%s;if(a=or.stuffBits(c,s),a.getSize()+l>e)throw new u("Data to large for user specified layer");if(r&&a.getSize()>64*s)throw new u("Data to large for user specified layer")}else{s=0,a=null;for(let e=0;;e++){if(e>or.MAX_NB_BITS)throw new u("Data too large for an Aztec code");if(r=e<=3,i=r?e+1:e,o=or.totalBitsInLayer(i,r),d>o)continue;null!=a&&s===or.WORD_SIZE[i]||(s=or.WORD_SIZE[i],a=or.stuffBits(c,s));let t=o-o%s;if(!(r&&a.getSize()>64*s)&&a.getSize()+l<=t)break}}let h,p=or.generateCheckWords(a,o,s),f=a.getSize()/s,m=or.generateModeMessage(r,i,f),g=(r?11:14)+4*i,v=new Int32Array(g);if(r){h=g;for(let e=0;e<v.length;e++)v[e]=e}else{h=g+1+2*_.truncDivision(_.truncDivision(g,2)-1,15);let e=_.truncDivision(g,2),t=_.truncDivision(h,2);for(let n=0;n<e;n++){let r=n+_.truncDivision(n,15);v[e-n-1]=t-r-1,v[e+n]=t+r+1}}let y=new x(h);for(let u=0,_=0;u<i;u++){let e=4*(i-u)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)p.get(_+n+r)&&y.set(v[2*u+r],v[2*u+t]),p.get(_+2*e+n+r)&&y.set(v[2*u+t],v[g-1-2*u-r]),p.get(_+4*e+n+r)&&y.set(v[g-1-2*u-r],v[g-1-2*u-t]),p.get(_+6*e+n+r)&&y.set(v[g-1-2*u-t],v[2*u+r])}_+=8*e}if(or.drawModeMessage(y,r,h,m),r)or.drawBullsEye(y,_.truncDivision(h,2),5);else{or.drawBullsEye(y,_.truncDivision(h,2),7);for(let e=0,t=0;e<_.truncDivision(g,2)-1;e+=15,t+=16)for(let n=1&_.truncDivision(h,2);n<h;n+=2)y.set(_.truncDivision(h,2)-t,n),y.set(_.truncDivision(h,2)+t,n),y.set(n,_.truncDivision(h,2)-t),y.set(n,_.truncDivision(h,2)+t)}let E=new Un;return E.setCompact(r),E.setSize(h),E.setLayers(i),E.setCodeWords(f),E.setMatrix(y),E}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new E;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=or.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=or.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=_.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let t=i-3+o;r.get(o)&&e.set(t,i-5),r.get(o+7)&&e.set(i+5,t),r.get(20-o)&&e.set(t,i+5),r.get(27-o)&&e.set(i-5,t)}else for(let o=0;o<10;o++){let t=i-5+o+_.truncDivision(o,5);r.get(o)&&e.set(t,i-7),r.get(o+10)&&e.set(i+7,t),r.get(29-o)&&e.set(t,i+7),r.get(39-o)&&e.set(i-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new Sn(or.getGF(n)),o=_.truncDivision(t,n),s=or.bitsToWords(e,n,o);i.encode(s,o-r);let a=t%n,c=new E;c.appendBits(0,a);for(const l of Array.from(s))c.appendBits(l,n);return c}static bitsToWords(e,t,n){let r,i,o=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;o[r]=n}return o}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new u("Unsupported word size "+e)}}static stuffBits(e,t){let n=new E,r=e.getSize(),i=(1<<t)-2;for(let o=0;o<r;o+=t){let s=0;for(let n=0;n<t;n++)(o+n>=r||e.get(o+n))&&(s|=1<<t-1-n);(s&i)===i?(n.appendBits(s&i,t),o--):0===(s&i)?(n.appendBits(1|s,t),o--):n.appendBits(s,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}or.DEFAULT_EC_PERCENT=33,or.DEFAULT_AZTEC_LAYERS=0,or.MAX_NB_BITS=32,or.MAX_NB_BITS_COMPACT=4,or.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class sr{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let o=jn.ISO_8859_1,s=or.DEFAULT_EC_PERCENT,a=or.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(wn.CHARACTER_SET)&&(o=Mn.forName(i.get(wn.CHARACTER_SET).toString())),i.has(wn.ERROR_CORRECTION)&&(s=_.parseInt(i.get(wn.ERROR_CORRECTION).toString())),i.has(wn.AZTEC_LAYERS)&&(a=_.parseInt(i.get(wn.AZTEC_LAYERS).toString()))),sr.encodeLayers(e,t,n,r,o,s,a)}static encodeLayers(e,t,n,r,i,o,s){if(t!==W.AZTEC)throw new u("Can only encode AZTEC, but got "+t);let a=or.encode(R.getBytes(e,i),o,s);return sr.renderResult(a,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let i=r.getWidth(),o=r.getHeight(),s=Math.max(t,i),a=Math.max(n,o),c=Math.min(s/i,a/o),l=(s-i*c)/2,d=(a-o*c)/2,u=new x(s,a);for(let h=0,p=d;h<o;h++,p+=c)for(let e=0,t=l;e<i;e++,t+=c)r.get(e,h)&&u.setRegion(t,p,c,c);return u}}e.AbstractExpandedDecoder=Ge,e.ArgumentException=d,e.ArithmeticException=$,e.AztecCode=Un,e.AztecCodeReader=ve,e.AztecCodeWriter=sr,e.AztecDecoder=ie,e.AztecDetector=ge,e.AztecDetectorResult=le,e.AztecEncoder=or,e.AztecHighLevelEncoder=ir,e.AztecPoint=me,e.BarcodeFormat=W,e.Binarizer=f,e.BinaryBitmap=h,e.BitArray=E,e.BitMatrix=x,e.BitSource=mt,e.BrowserAztecCodeReader=ye,e.BrowserBarcodeReader=lt,e.BrowserCodeReader=B,e.BrowserDatamatrixCodeReader=Et,e.BrowserMultiFormatReader=yn,e.BrowserPDF417Reader=_n,e.BrowserQRCodeReader=En,e.BrowserQRCodeSvgWriter=Nn,e.CharacterSetECI=A,e.ChecksumException=p,e.Code128Reader=Ee,e.Code39Reader=be,e.DataMatrixDecodedBitStreamParser=gt,e.DataMatrixReader=_t,e.DecodeHintType=w,e.DecoderResult=J,e.DefaultGridSampler=pe,e.DetectorResult=ce,e.EAN13Reader=Ie,e.EncodeHintType=wn,e.Exception=l,e.FormatException=S,e.GenericGF=ee,e.GenericGFPoly=Z,e.GlobalHistogramBinarizer=N,e.GridSampler=ue,e.GridSamplerInstance=fe,e.HTMLCanvasElementLuminanceSource=L,e.HybridBinarizer=D,e.ITFReader=we,e.IllegalArgumentException=u,e.IllegalStateException=ne,e.InvertedLuminanceSource=P,e.LuminanceSource=k,e.MathUtils=oe,e.MultiFormatOneDReader=ct,e.MultiFormatReader=vn,e.MultiFormatWriter=kn,e.NotFoundException=O,e.OneDReader=_e,e.PDF417DecodedBitStreamParser=pn,e.PDF417DecoderErrorCorrection=Yt,e.PDF417Reader=mn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=Pn,e.QRCodeByteMatrix=Cn,e.QRCodeDataMask=Tt,e.QRCodeDecodedBitStreamParser=Ot,e.QRCodeDecoderErrorCorrectionLevel=bt,e.QRCodeDecoderFormatInformation=wt,e.QRCodeEncoder=On,e.QRCodeEncoderQRCode=Tn,e.QRCodeMaskUtil=An,e.QRCodeMatrixUtil=In,e.QRCodeMode=xt,e.QRCodeReader=Bt,e.QRCodeVersion=Ct,e.QRCodeWriter=Dn,e.RGBLuminanceSource=Ln,e.RSS14Reader=at,e.RSSExpandedReader=ot,e.ReaderException=gn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=Sn,e.ReedSolomonException=te,e.Result=F,e.ResultMetadataType=X,e.ResultPoint=ae,e.StringUtils=R,e.UnsupportedOperationException=C,e.VideoInputDevice=M,e.WhiteRectangleDetector=de,e.WriterException=Rn,e.ZXingArrays=y,e.ZXingCharset=Mn,e.ZXingInteger=_,e.ZXingStandardCharsets=jn,e.ZXingStringBuilder=I,e.ZXingStringEncoding=T,e.ZXingSystem=m,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2534:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},763:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,l=32,d=64,u=128,h=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",d],["rearg",h]],y="[object Arguments]",_="[object Array]",E="[object Boolean]",b="[object Date]",w="[object Error]",S="[object Function]",A="[object GeneratorFunction]",C="[object Map]",T="[object Number]",R="[object Object]",I="[object Promise]",x="[object RegExp]",O="[object Set]",N="[object String]",D="[object Symbol]",k="[object WeakMap]",P="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",j="[object Float64Array]",U="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",V="[object Uint8Array]",W="[object Uint8ClampedArray]",H="[object Uint16Array]",z="[object Uint32Array]",G=/\b__p \+= '';/g,Y=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,J=RegExp(q.source),Q=RegExp(X.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),se=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ae="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="['\u2019]",De="["+Ae+"]",ke="["+Oe+"]",Pe="["+Ce+"]",Le="\\d+",Me="["+Te+"]",je="["+Re+"]",Ue="[^"+Ae+Oe+Le+Te+Re+Ie+"]",Be="\\ud83c[\\udffb-\\udfff]",Fe="[^"+Ae+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Ie+"]",ze="\\u200d",Ge="(?:"+je+"|"+Ue+")",Ye="(?:"+He+"|"+Ue+")",Ke="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Pe+"|"+Be+")"+"?",Je="["+xe+"]?",Qe=Je+Xe+("(?:"+ze+"(?:"+[Fe,Ve,We].join("|")+")"+Je+Xe+")*"),Ze="(?:"+[Me,Ve,We].join("|")+")"+Qe,$e="(?:"+[Fe+Pe+"?",Pe,Ve,We,De].join("|")+")",et=RegExp(Ne,"g"),tt=RegExp(Pe,"g"),nt=RegExp(Be+"(?="+Be+")|"+$e+Qe,"g"),rt=RegExp([He+"?"+je+"+"+Ke+"(?="+[ke,He,"$"].join("|")+")",Ye+"+"+qe+"(?="+[ke,He+Ge,"$"].join("|")+")",He+"?"+Ge+"+"+Ke,He+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Ze].join("|"),"g"),it=RegExp("["+ze+Ae+Ce+xe+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ct={};ct[M]=ct[j]=ct[U]=ct[B]=ct[F]=ct[V]=ct[W]=ct[H]=ct[z]=!0,ct[y]=ct[_]=ct[P]=ct[E]=ct[L]=ct[b]=ct[w]=ct[S]=ct[C]=ct[T]=ct[R]=ct[x]=ct[O]=ct[N]=ct[k]=!1;var lt={};lt[y]=lt[_]=lt[P]=lt[L]=lt[E]=lt[b]=lt[M]=lt[j]=lt[U]=lt[B]=lt[F]=lt[C]=lt[T]=lt[R]=lt[x]=lt[O]=lt[N]=lt[D]=lt[V]=lt[W]=lt[H]=lt[z]=!0,lt[w]=lt[S]=lt[k]=!1;var dt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===gt,_t=yt&&pt.process,Et=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||_t&&_t.binding&&_t.binding("util")}catch(t){}}(),bt=Et&&Et.isArrayBuffer,wt=Et&&Et.isDate,St=Et&&Et.isMap,At=Et&&Et.isRegExp,Ct=Et&&Et.isSet,Tt=Et&&Et.isTypedArray;function Rt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function It(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function kt(e,t){return!!(null==e?0:e.length)&&Ht(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Mt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Ut(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Kt("length");function Vt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Wt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Ht(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Wt(e,Gt,n)}function zt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Gt(e){return e!==e}function Yt(e,t){var n=null==e?0:e.length;return n?Jt(e,t)/n:m}function Kt(e){return function(t){return null==t?i:t[e]}}function qt(e){return function(t){return null==e?i:e[t]}}function Xt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Jt(e,t){for(var n,r=-1,o=e.length;++r<o;){var s=t(e[r]);s!==i&&(n=n===i?s:n+s)}return n}function Qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,gn(e)+1).replace(se,""):e}function $t(e){return function(t){return e(t)}}function en(e,t){return Lt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var on=qt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),sn=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+dt[e]}function cn(e){return it.test(e)}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function dn(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return cn(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Ft(e)}function mn(e){return cn(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var vn=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,st))).Array,r=t.Date,ae=t.Error,Ae=t.Function,Ce=t.Math,Te=t.Object,Re=t.RegExp,Ie=t.String,xe=t.TypeError,Oe=n.prototype,Ne=Ae.prototype,De=Te.prototype,ke=t["__core-js_shared__"],Pe=Ne.toString,Le=De.hasOwnProperty,Me=0,je=function(){var e=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ue=De.toString,Be=Pe.call(Te),Fe=mt._,Ve=Re("^"+Pe.call(Le).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=yt?t.Buffer:i,He=t.Symbol,ze=t.Uint8Array,Ge=We?We.allocUnsafe:i,Ye=dn(Te.getPrototypeOf,Te),Ke=Te.create,qe=De.propertyIsEnumerable,Xe=Oe.splice,Je=He?He.isConcatSpreadable:i,Qe=He?He.iterator:i,Ze=He?He.toStringTag:i,$e=function(){try{var e=ho(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,it=r&&r.now!==mt.Date.now&&r.now,dt=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=Ce.ceil,ft=Ce.floor,gt=Te.getOwnPropertySymbols,vt=We?We.isBuffer:i,_t=t.isFinite,Et=Oe.join,Ft=dn(Te.keys,Te),qt=Ce.max,_n=Ce.min,En=r.now,bn=t.parseInt,wn=Ce.random,Sn=Oe.reverse,An=ho(t,"DataView"),Cn=ho(t,"Map"),Tn=ho(t,"Promise"),Rn=ho(t,"Set"),In=ho(t,"WeakMap"),xn=ho(Te,"create"),On=In&&new In,Nn={},Dn=Uo(An),kn=Uo(Cn),Pn=Uo(Tn),Ln=Uo(Rn),Mn=Uo(In),jn=He?He.prototype:i,Un=jn?jn.valueOf:i,Bn=jn?jn.toString:i;function Fn(e){if(ta(e)&&!zs(e)&&!(e instanceof zn)){if(e instanceof Hn)return e;if(Le.call(e,"__wrapped__"))return Bo(e)}return new Hn(e)}var Vn=function(){function e(){}return function(t){if(!ea(t))return{};if(Ke)return Ke(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Wn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Kn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Yn(e);this.size=t.size}function Jn(e,t){var n=zs(e),r=!n&&Hs(e),i=!n&&!r&&qs(e),o=!n&&!r&&!i&&la(e),s=n||r||i||o,a=s?Qt(e.length,Ie):[],c=a.length;for(var l in e)!t&&!Le.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||_o(l,c))||a.push(l);return a}function Qn(e){var t=e.length;return t?e[qr(0,t-1)]:i}function Zn(e,t){return Lo(xi(e),ar(t,0,e.length))}function $n(e){return Lo(xi(e))}function er(e,t,n){(n!==i&&!Fs(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function tr(e,t,n){var r=e[t];Le.call(e,t)&&Fs(r,n)&&(n!==i||t in e)||or(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Fs(e[n][0],t))return n;return-1}function rr(e,t,n,r){return hr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ir(e,t){return e&&Oi(t,Na(t),e)}function or(e,t,n){"__proto__"==t&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,o=t.length,s=n(o),a=null==e;++r<o;)s[r]=a?i:Ta(e,t[r]);return s}function ar(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function cr(e,t,n,r,o,s){var a,c=1&t,l=2&t,d=4&t;if(n&&(a=o?n(e,r,o,s):n(e)),a!==i)return a;if(!ea(e))return e;var u=zs(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return xi(e,a)}else{var h=mo(e),p=h==S||h==A;if(qs(e))return Si(e,c);if(h==R||h==y||p&&!o){if(a=l||p?{}:vo(e),!c)return l?function(e,t){return Oi(e,fo(e),t)}(e,function(e,t){return e&&Oi(t,Da(t),e)}(a,e)):function(e,t){return Oi(e,po(e),t)}(e,ir(a,e))}else{if(!lt[h])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case P:return Ai(e);case E:case b:return new r(+e);case L:return function(e,t){var n=t?Ai(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case j:case U:case B:case F:case V:case W:case H:case z:return Ci(e,n);case C:return new r;case T:case N:return new r(e);case x:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new r;case D:return i=e,Un?Te(Un.call(i)):{}}var i}(e,h,c)}}s||(s=new Xn);var f=s.get(e);if(f)return f;s.set(e,a),sa(e)?e.forEach((function(r){a.add(cr(r,t,n,r,e,s))})):na(e)&&e.forEach((function(r,i){a.set(i,cr(r,t,n,i,e,s))}));var m=u?i:(d?l?io:ro:l?Da:Na)(e);return xt(m||e,(function(r,i){m&&(r=e[i=r]),tr(a,i,cr(r,t,n,i,e,s))})),a}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var o=n[r],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new xe(o);return No((function(){e.apply(i,n)}),t)}function ur(e,t,n,r){var i=-1,o=kt,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=Lt(t,$t(n))),r?(o=Pt,s=!1):t.length>=200&&(o=tn,s=!1,t=new qn(t));e:for(;++i<a;){var d=e[i],u=null==n?d:n(d);if(d=r||0!==d?d:0,s&&u===u){for(var h=l;h--;)if(t[h]===u)continue e;c.push(d)}else o(t,u,r)||c.push(d)}return c}Fn.templateSettings={escape:Z,evaluate:$,interpolate:ee,variable:"",imports:{_:Fn}},Fn.prototype=Wn.prototype,Fn.prototype.constructor=Fn,Hn.prototype=Vn(Wn.prototype),Hn.prototype.constructor=Hn,zn.prototype=Vn(Wn.prototype),zn.prototype.constructor=zn,Gn.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},Gn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gn.prototype.get=function(e){var t=this.__data__;if(xn){var n=t[e];return n===s?i:n}return Le.call(t,e)?t[e]:i},Gn.prototype.has=function(e){var t=this.__data__;return xn?t[e]!==i:Le.call(t,e)},Gn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xn&&t===i?s:t,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},Yn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Yn.prototype.has=function(e){return nr(this.__data__,e)>-1},Yn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Cn||Yn),string:new Gn}},Kn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Kn.prototype.get=function(e){return lo(this,e).get(e)},Kn.prototype.has=function(e){return lo(this,e).has(e)},Kn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(e){return this.__data__.set(e,s),this},qn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!Cn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(e,t),this.size=n.size,this};var hr=ki(Er),pr=ki(br,!0);function fr(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var s=e[r],a=t(s);if(null!=a&&(c===i?a===a&&!ca(a):n(a,c)))var c=a,l=s}return l}function gr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=yo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?vr(a,t-1,n,r,i):Mt(i,a):r||(i[i.length]=a)}return i}var yr=Pi(),_r=Pi(!0);function Er(e,t){return e&&yr(e,t,Na)}function br(e,t){return e&&_r(e,t,Na)}function wr(e,t){return Dt(t,(function(t){return Qs(e[t])}))}function Sr(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[jo(t[n++])];return n&&n==r?e:i}function Ar(e,t,n){var r=t(e);return zs(e)?r:Mt(r,n(e))}function Cr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Ze&&Ze in Te(e)?function(e){var t=Le.call(e,Ze),n=e[Ze];try{e[Ze]=i;var r=!0}catch(s){}var o=Ue.call(e);r&&(t?e[Ze]=n:delete e[Ze]);return o}(e):function(e){return Ue.call(e)}(e)}function Tr(e,t){return e>t}function Rr(e,t){return null!=e&&Le.call(e,t)}function Ir(e,t){return null!=e&&t in Te(e)}function xr(e,t,r){for(var o=r?Pt:kt,s=e[0].length,a=e.length,c=a,l=n(a),d=1/0,u=[];c--;){var h=e[c];c&&t&&(h=Lt(h,$t(t))),d=_n(h.length,d),l[c]=!r&&(t||s>=120&&h.length>=120)?new qn(c&&h):i}h=e[0];var p=-1,f=l[0];e:for(;++p<s&&u.length<d;){var m=h[p],g=t?t(m):m;if(m=r||0!==m?m:0,!(f?tn(f,g):o(u,g,r))){for(c=a;--c;){var v=l[c];if(!(v?tn(v,g):o(e[c],g,r)))continue e}f&&f.push(g),u.push(m)}}return u}function Or(e,t,n){var r=null==(e=Io(e,t=_i(t,e)))?e:e[jo(Jo(t))];return null==r?i:Rt(r,e,n)}function Nr(e){return ta(e)&&Cr(e)==y}function Dr(e,t,n,r,o){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:function(e,t,n,r,o,s){var a=zs(e),c=zs(t),l=a?_:mo(e),d=c?_:mo(t),u=(l=l==y?R:l)==R,h=(d=d==y?R:d)==R,p=l==d;if(p&&qs(e)){if(!qs(t))return!1;a=!0,u=!1}if(p&&!u)return s||(s=new Xn),a||la(e)?to(e,t,n,r,o,s):function(e,t,n,r,i,o,s){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!o(new ze(e),new ze(t)));case E:case b:case T:return Fs(+e,+t);case w:return e.name==t.name&&e.message==t.message;case x:case N:return e==t+"";case C:var a=ln;case O:var c=1&r;if(a||(a=hn),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;r|=2,s.set(e,t);var d=to(a(e),a(t),r,i,o,s);return s.delete(e),d;case D:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,l,n,r,o,s);if(!(1&n)){var f=u&&Le.call(e,"__wrapped__"),m=h&&Le.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return s||(s=new Xn),o(g,v,n,r,s)}}if(!p)return!1;return s||(s=new Xn),function(e,t,n,r,o,s){var a=1&n,c=ro(e),l=c.length,d=ro(t),u=d.length;if(l!=u&&!a)return!1;var h=l;for(;h--;){var p=c[h];if(!(a?p in t:Le.call(t,p)))return!1}var f=s.get(e),m=s.get(t);if(f&&m)return f==t&&m==e;var g=!0;s.set(e,t),s.set(t,e);var v=a;for(;++h<l;){var y=e[p=c[h]],_=t[p];if(r)var E=a?r(_,y,p,t,e,s):r(y,_,p,e,t,s);if(!(E===i?y===_||o(y,_,n,r,s):E)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return s.delete(e),s.delete(t),g}(e,t,n,r,o,s)}(e,t,n,r,Dr,o))}function kr(e,t,n,r){var o=n.length,s=o,a=!r;if(null==e)return!s;for(e=Te(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var l=(c=n[o])[0],d=e[l],u=c[1];if(a&&c[2]){if(d===i&&!(l in e))return!1}else{var h=new Xn;if(r)var p=r(d,u,l,e,t,h);if(!(p===i?Dr(u,d,3,r,h):p))return!1}}return!0}function Pr(e){return!(!ea(e)||(t=e,je&&je in t))&&(Qs(e)?Ve:ye).test(Uo(e));var t}function Lr(e){return"function"==typeof e?e:null==e?rc:"object"==typeof e?zs(e)?Vr(e[0],e[1]):Fr(e):hc(e)}function Mr(e){if(!Ao(e))return Ft(e);var t=[];for(var n in Te(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!ea(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=Ao(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function Br(e,t){var r=-1,i=Ys(e)?n(e.length):[];return hr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Fr(e){var t=uo(e);return 1==t.length&&t[0][2]?To(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Vr(e,t){return bo(e)&&Co(t)?To(jo(e),t):function(n){var r=Ta(n,e);return r===i&&r===t?Ra(n,e):Dr(t,r,3)}}function Wr(e,t,n,r,o){e!==t&&yr(t,(function(s,a){if(o||(o=new Xn),ea(s))!function(e,t,n,r,o,s,a){var c=xo(e,n),l=xo(t,n),d=a.get(l);if(d)return void er(e,n,d);var u=s?s(c,l,n+"",e,t,a):i,h=u===i;if(h){var p=zs(l),f=!p&&qs(l),m=!p&&!f&&la(l);u=l,p||f||m?zs(c)?u=c:Ks(c)?u=xi(c):f?(h=!1,u=Si(l,!0)):m?(h=!1,u=Ci(l,!0)):u=[]:ia(l)||Hs(l)?(u=c,Hs(c)?u=va(c):ea(c)&&!Qs(c)||(u=vo(l))):h=!1}h&&(a.set(l,u),o(u,l,r,s,a),a.delete(l));er(e,n,u)}(e,t,a,n,Wr,r,o);else{var c=r?r(xo(e,a),s,a+"",e,t,o):i;c===i&&(c=s),er(e,a,c)}}),Da)}function Hr(e,t){var n=e.length;if(n)return _o(t+=t<0?n:0,n)?e[t]:i}function zr(e,t,n){t=t.length?Lt(t,(function(e){return zs(e)?function(t){return Sr(t,1===e.length?e[0]:e)}:e})):[rc];var r=-1;t=Lt(t,$t(co()));var i=Br(e,(function(e,n,i){var o=Lt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var c=Ti(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Gr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Sr(e,s);n(a,s)&&$r(o,_i(s,e),a)}return o}function Yr(e,t,n,r){var i=r?zt:Ht,o=-1,s=t.length,a=e;for(e===t&&(t=xi(t)),n&&(a=Lt(e,$t(n)));++o<s;)for(var c=0,l=t[o],d=n?n(l):l;(c=i(a,d,c,r))>-1;)a!==e&&Xe.call(a,c,1),Xe.call(e,c,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;_o(i)?Xe.call(e,i,1):ui(e,i)}}return e}function qr(e,t){return e+ft(wn()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Do(Ro(e,t,rc),e+"")}function Qr(e){return Qn(Fa(e))}function Zr(e,t){var n=Fa(e);return Lo(n,ar(t,0,n.length))}function $r(e,t,n,r){if(!ea(e))return e;for(var o=-1,s=(t=_i(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var l=jo(t[o]),d=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=c[l];(d=r?r(u,l,c):i)===i&&(d=ea(u)?u:_o(t[o+1])?[]:{})}tr(c,l,d),c=c[l]}return e}var ei=On?function(e,t){return On.set(e,t),e}:rc,ti=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:ec(t),writable:!0})}:rc;function ni(e){return Lo(Fa(e))}function ri(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=n(o);++i<o;)s[i]=e[i+t];return s}function ii(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!ca(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return si(e,t,rc,n)}function si(e,t,n,r){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!==t,c=null===t,l=ca(t),d=t===i;o<s;){var u=ft((o+s)/2),h=n(e[u]),p=h!==i,f=null===h,m=h===h,g=ca(h);if(a)var v=r||m;else v=d?m&&(r||p):c?m&&p&&(r||!f):l?m&&p&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);v?o=u+1:s=u}return _n(s,4294967294)}function ai(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!Fs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function ci(e){return"number"==typeof e?e:ca(e)?m:+e}function li(e){if("string"==typeof e)return e;if(zs(e))return Lt(e,li)+"";if(ca(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=kt,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=Pt;else if(o>=200){var l=t?null:Xi(e);if(l)return hn(l);s=!1,i=tn,c=new qn}else c=t?[]:a;e:for(;++r<o;){var d=e[r],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u===u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),a.push(d)}else i(c,u,n)||(c!==a&&c.push(u),a.push(d))}return a}function ui(e,t){return null==(e=Io(e,t=_i(t,e)))||delete e[jo(Jo(t))]}function hi(e,t,n,r){return $r(e,t,n(Sr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ri(e,r?0:o,r?o+1:i):ri(e,r?o+1:0,r?i:o)}function fi(e,t){var n=e;return n instanceof zn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?di(e[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=ur(s[o]||a,e[c],t,r));return di(vr(s,1),t,r)}function gi(e,t,n){for(var r=-1,o=e.length,s=t.length,a={};++r<o;){var c=r<s?t[r]:i;n(a,e[r],c)}return a}function vi(e){return Ks(e)?e:[]}function yi(e){return"function"==typeof e?e:rc}function _i(e,t){return zs(e)?e:bo(e,t)?[e]:Mo(ya(e))}var Ei=Jr;function bi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var wi=nt||function(e){return mt.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var n=e.length,r=Ge?Ge(n):new e.constructor(n);return e.copy(r),r}function Ai(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function Ci(e,t){var n=t?Ai(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,s=ca(e),a=t!==i,c=null===t,l=t===t,d=ca(t);if(!c&&!d&&!s&&e>t||s&&a&&l&&!c&&!d||r&&a&&l||!n&&l||!o)return 1;if(!r&&!s&&!d&&e<t||d&&n&&o&&!r&&!s||c&&n&&o||!a&&o||!l)return-1}return 0}function Ri(e,t,r,i){for(var o=-1,s=e.length,a=r.length,c=-1,l=t.length,d=qt(s-a,0),u=n(l+d),h=!i;++c<l;)u[c]=t[c];for(;++o<a;)(h||o<s)&&(u[r[o]]=e[o]);for(;d--;)u[c++]=e[o++];return u}function Ii(e,t,r,i){for(var o=-1,s=e.length,a=-1,c=r.length,l=-1,d=t.length,u=qt(s-c,0),h=n(u+d),p=!i;++o<u;)h[o]=e[o];for(var f=o;++l<d;)h[f+l]=t[l];for(;++a<c;)(p||o<s)&&(h[f+r[a]]=e[o++]);return h}function xi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Oi(e,t,n,r){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],l=r?r(n[c],e[c],c,n,e):i;l===i&&(l=e[c]),o?or(n,c,l):tr(n,c,l)}return n}function Ni(e,t){return function(n,r){var i=zs(n)?It:rr,o=t?t():{};return i(n,e,co(r,2),o)}}function Di(e){return Jr((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&Eo(n[0],n[1],a)&&(s=o<3?i:s,o=1),t=Te(t);++r<o;){var c=n[r];c&&e(t,c,r,s)}return t}))}function ki(e,t){return function(n,r){if(null==n)return n;if(!Ys(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Te(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Pi(e){return function(t,n,r){for(var i=-1,o=Te(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}function Li(e){return function(t){var n=cn(t=ya(t))?mn(t):i,r=n?n[0]:t.charAt(0),o=n?bi(n,1).join(""):t.slice(1);return r[e]()+o}}function Mi(e){return function(t){return jt(Qa(Ha(t).replace(et,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return ea(r)?r:n}}function Ui(e){return function(t,n,r){var o=Te(t);if(!Ys(t)){var s=co(n,3);t=Na(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[s?t[a]:a]:i}}function Bi(e){return no((function(t){var n=t.length,r=n,s=Hn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new xe(o);if(s&&!c&&"wrapper"==so(a))var c=new Hn([],!0)}for(r=c?r:n;++r<n;){var l=so(a=t[r]),d="wrapper"==l?oo(a):i;c=d&&wo(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[so(d[0])].apply(c,d[3]):1==a.length&&wo(a)?c[l]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&zs(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Fi(e,t,r,o,s,a,c,l,d,h){var p=t&u,f=1&t,m=2&t,g=24&t,v=512&t,y=m?i:ji(e);return function u(){for(var _=arguments.length,E=n(_),b=_;b--;)E[b]=arguments[b];if(g)var w=ao(u),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(E,w);if(o&&(E=Ri(E,o,s,g)),a&&(E=Ii(E,a,c,g)),_-=S,g&&_<h){var A=un(E,w);return Ki(e,t,Fi,u.placeholder,r,E,A,l,d,h-_)}var C=f?r:this,T=m?C[e]:e;return _=E.length,l?E=function(e,t){var n=e.length,r=_n(t.length,n),o=xi(e);for(;r--;){var s=t[r];e[r]=_o(s,n)?o[s]:i}return e}(E,l):v&&_>1&&E.reverse(),p&&d<_&&(E.length=d),this&&this!==mt&&this instanceof u&&(T=y||ji(T)),T.apply(C,E)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return Er(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Wi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=li(n),r=li(r)):(n=ci(n),r=ci(r)),o=e(n,r)}return o}}function Hi(e){return no((function(t){return t=Lt(t,$t(co())),Jr((function(n){var r=this;return e(t,(function(e){return Rt(e,r,n)}))}))}))}function zi(e,t){var n=(t=t===i?" ":li(t)).length;if(n<2)return n?Xr(t,e):t;var r=Xr(t,pt(e/fn(t)));return cn(t)?bi(mn(r),0,e).join(""):r.slice(0,e)}function Gi(e){return function(t,r,o){return o&&"number"!=typeof o&&Eo(t,r,o)&&(r=o=i),t=pa(t),r===i?(r=t,t=0):r=pa(r),function(e,t,r,i){for(var o=-1,s=qt(pt((t-e)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=e,e+=r;return a}(t,r,o=o===i?t<r?1:-1:pa(o),e)}}function Yi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ga(t),n=ga(n)),e(t,n)}}function Ki(e,t,n,r,o,s,a,c,u,h){var p=8&t;t|=p?l:d,4&(t&=~(p?d:l))||(t&=-4);var f=[e,t,o,p?s:i,p?a:i,p?i:s,p?i:a,c,u,h],m=n.apply(i,f);return wo(e)&&Oo(m,f),m.placeholder=r,ko(m,e,t)}function qi(e){var t=Ce[e];return function(e,n){if(e=ga(e),(n=null==n?0:_n(fa(n),292))&&_t(e)){var r=(ya(e)+"e").split("e");return+((r=(ya(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=Rn&&1/hn(new Rn([,-0]))[1]==p?function(e){return new Rn(e)}:cc;function Ji(e){return function(t){var n=mo(t);return n==C?ln(t):n==O?pn(t):function(e,t){return Lt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qi(e,t,r,s,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new xe(o);var y=s?s.length:0;if(y||(t&=-97,s=p=i),m=m===i?m:qt(fa(m),0),g=g===i?g:fa(g),y-=p?p.length:0,t&d){var _=s,E=p;s=p=i}var b=v?i:oo(e),w=[e,t,r,s,p,_,E,f,m,g];if(b&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==u&&8==n||r==u&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Ri(l,c,t[4]):c,e[4]=l?un(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Ii(l,c,t[6]):c,e[6]=l?un(e[5],a):t[6]);(c=t[7])&&(e[7]=c);r&u&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,b),e=w[0],t=w[1],r=w[2],s=w[3],p=w[4],!(g=w[9]=w[9]===i?v?0:e.length:qt(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==c?function(e,t,r){var o=ji(e);return function s(){for(var a=arguments.length,c=n(a),l=a,d=ao(s);l--;)c[l]=arguments[l];var u=a<3&&c[0]!==d&&c[a-1]!==d?[]:un(c,d);return(a-=u.length)<r?Ki(e,t,Fi,s.placeholder,i,c,u,i,i,r-a):Rt(this&&this!==mt&&this instanceof s?o:e,this,c)}}(e,t,g):t!=l&&33!=t||p.length?Fi.apply(i,w):function(e,t,r,i){var o=1&t,s=ji(e);return function t(){for(var a=-1,c=arguments.length,l=-1,d=i.length,u=n(d+c),h=this&&this!==mt&&this instanceof t?s:e;++l<d;)u[l]=i[l];for(;c--;)u[l++]=arguments[++a];return Rt(h,o?r:this,u)}}(e,t,r,s);else var S=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return ko((b?ei:Oo)(S,w),e,t)}function Zi(e,t,n,r){return e===i||Fs(e,De[n])&&!Le.call(r,n)?t:e}function $i(e,t,n,r,o,s){return ea(e)&&ea(t)&&(s.set(t,e),Wr(e,t,i,$i,s),s.delete(t)),e}function eo(e){return ia(e)?i:e}function to(e,t,n,r,o,s){var a=1&n,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var h=-1,p=!0,f=2&n?new qn:i;for(s.set(e,t),s.set(t,e);++h<c;){var m=e[h],g=t[h];if(r)var v=a?r(g,m,h,t,e,s):r(m,g,h,e,t,s);if(v!==i){if(v)continue;p=!1;break}if(f){if(!Bt(t,(function(e,t){if(!tn(f,t)&&(m===e||o(m,e,n,r,s)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!o(m,g,n,r,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function no(e){return Do(Ro(e,i,Go),e+"")}function ro(e){return Ar(e,Na,po)}function io(e){return Ar(e,Da,fo)}var oo=On?function(e){return On.get(e)}:cc;function so(e){for(var t=e.name+"",n=Nn[t],r=Le.call(Nn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function ao(e){return(Le.call(Fn,"placeholder")?Fn:e).placeholder}function co(){var e=Fn.iteratee||ic;return e=e===ic?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function uo(e){for(var t=Na(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Co(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Pr(n)?n:i}var po=gt?function(e){return null==e?[]:(e=Te(e),Dt(gt(e),(function(t){return qe.call(e,t)})))}:mc,fo=gt?function(e){for(var t=[];e;)Mt(t,po(e)),e=Ye(e);return t}:mc,mo=Cr;function go(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,o=!1;++r<i;){var s=jo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&$s(i)&&_o(s,i)&&(zs(e)||Hs(e))}function vo(e){return"function"!=typeof e.constructor||Ao(e)?{}:Vn(Ye(e))}function yo(e){return zs(e)||Hs(e)||!!(Je&&e&&e[Je])}function _o(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&Ee.test(e))&&e>-1&&e%1==0&&e<t}function Eo(e,t,n){if(!ea(n))return!1;var r=typeof t;return!!("number"==r?Ys(n)&&_o(t,n.length):"string"==r&&t in n)&&Fs(n[t],e)}function bo(e,t){if(zs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ca(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Te(t))}function wo(e){var t=so(e),n=Fn[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=oo(n);return!!r&&e===r[0]}(An&&mo(new An(new ArrayBuffer(1)))!=L||Cn&&mo(new Cn)!=C||Tn&&mo(Tn.resolve())!=I||Rn&&mo(new Rn)!=O||In&&mo(new In)!=k)&&(mo=function(e){var t=Cr(e),n=t==R?e.constructor:i,r=n?Uo(n):"";if(r)switch(r){case Dn:return L;case kn:return C;case Pn:return I;case Ln:return O;case Mn:return k}return t});var So=ke?Qs:gc;function Ao(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function Co(e){return e===e&&!ea(e)}function To(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Te(n)))}}function Ro(e,t,r){return t=qt(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=qt(i.length-t,0),a=n(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=n(t+1);++o<t;)c[o]=i[o];return c[t]=r(a),Rt(e,this,c)}}function Io(e,t){return t.length<2?e:Sr(e,ri(t,0,-1))}function xo(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Oo=Po(ei),No=dt||function(e,t){return mt.setTimeout(e,t)},Do=Po(ti);function ko(e,t,n){var r=t+"";return Do(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return xt(v,(function(n){var r="_."+n[0];t&n[1]&&!kt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(de):[]}(r),n)))}function Po(e){var t=0,n=0;return function(){var r=En(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Lo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var s=qr(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Mo=function(e){var t=Ps(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function jo(e){if("string"==typeof e||ca(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Uo(e){if(null!=e){try{return Pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Bo(e){if(e instanceof zn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=xi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fo=Jr((function(e,t){return Ks(e)?ur(e,vr(t,1,Ks,!0)):[]})),Vo=Jr((function(e,t){var n=Jo(t);return Ks(n)&&(n=i),Ks(e)?ur(e,vr(t,1,Ks,!0),co(n,2)):[]})),Wo=Jr((function(e,t){var n=Jo(t);return Ks(n)&&(n=i),Ks(e)?ur(e,vr(t,1,Ks,!0),i,n):[]}));function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fa(n);return i<0&&(i=qt(r+i,0)),Wt(e,co(t,3),i)}function zo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fa(n),o=n<0?qt(r+o,0):_n(o,r-1)),Wt(e,co(t,3),o,!0)}function Go(e){return(null==e?0:e.length)?vr(e,1):[]}function Yo(e){return e&&e.length?e[0]:i}var Ko=Jr((function(e){var t=Lt(e,vi);return t.length&&t[0]===e[0]?xr(t):[]})),qo=Jr((function(e){var t=Jo(e),n=Lt(e,vi);return t===Jo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?xr(n,co(t,2)):[]})),Xo=Jr((function(e){var t=Jo(e),n=Lt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?xr(n,i,t):[]}));function Jo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Qo=Jr(Zo);function Zo(e,t){return e&&e.length&&t&&t.length?Yr(e,t):e}var $o=no((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Kr(e,Lt(t,(function(e){return _o(e,n)?+e:e})).sort(Ti)),r}));function es(e){return null==e?e:Sn.call(e)}var ts=Jr((function(e){return di(vr(e,1,Ks,!0))})),ns=Jr((function(e){var t=Jo(e);return Ks(t)&&(t=i),di(vr(e,1,Ks,!0),co(t,2))})),rs=Jr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,di(vr(e,1,Ks,!0),i,t)}));function is(e){if(!e||!e.length)return[];var t=0;return e=Dt(e,(function(e){if(Ks(e))return t=qt(e.length,t),!0})),Qt(t,(function(t){return Lt(e,Kt(t))}))}function os(e,t){if(!e||!e.length)return[];var n=is(e);return null==t?n:Lt(n,(function(e){return Rt(t,i,e)}))}var ss=Jr((function(e,t){return Ks(e)?ur(e,t):[]})),as=Jr((function(e){return mi(Dt(e,Ks))})),cs=Jr((function(e){var t=Jo(e);return Ks(t)&&(t=i),mi(Dt(e,Ks),co(t,2))})),ls=Jr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,mi(Dt(e,Ks),i,t)})),ds=Jr(is);var us=Jr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,os(e,n)}));function hs(e){var t=Fn(e);return t.__chain__=!0,t}function ps(e,t){return t(e)}var fs=no((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof zn&&_o(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ps,args:[o],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ms=Ni((function(e,t,n){Le.call(e,n)?++e[n]:or(e,n,1)}));var gs=Ui(Ho),vs=Ui(zo);function ys(e,t){return(zs(e)?xt:hr)(e,co(t,3))}function _s(e,t){return(zs(e)?Ot:pr)(e,co(t,3))}var Es=Ni((function(e,t,n){Le.call(e,n)?e[n].push(t):or(e,n,[t])}));var bs=Jr((function(e,t,r){var i=-1,o="function"==typeof t,s=Ys(e)?n(e.length):[];return hr(e,(function(e){s[++i]=o?Rt(t,e,r):Or(e,t,r)})),s})),ws=Ni((function(e,t,n){or(e,n,t)}));function Ss(e,t){return(zs(e)?Lt:Br)(e,co(t,3))}var As=Ni((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Cs=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Eo(e,t[0],t[1])?t=[]:n>2&&Eo(t[0],t[1],t[2])&&(t=[t[0]]),zr(e,vr(t,1),[])})),Ts=it||function(){return mt.Date.now()};function Rs(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Qi(e,u,i,i,i,i,t)}function Is(e,t){var n;if("function"!=typeof t)throw new xe(o);return e=fa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var xs=Jr((function(e,t,n){var r=1;if(n.length){var i=un(n,ao(xs));r|=l}return Qi(e,r,t,n,i)})),Os=Jr((function(e,t,n){var r=3;if(n.length){var i=un(n,ao(Os));r|=l}return Qi(t,r,e,n,i)}));function Ns(e,t,n){var r,s,a,c,l,d,u=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new xe(o);function m(t){var n=r,o=s;return r=s=i,u=t,c=e.apply(o,n)}function g(e){var n=e-d;return d===i||n>=t||n<0||p&&e-u>=a}function v(){var e=Ts();if(g(e))return y(e);l=No(v,function(e){var n=t-(e-d);return p?_n(n,a-(e-u)):n}(e))}function y(e){return l=i,f&&r?m(e):(r=s=i,c)}function _(){var e=Ts(),n=g(e);if(r=arguments,s=this,d=e,n){if(l===i)return function(e){return u=e,l=No(v,t),h?m(e):c}(d);if(p)return wi(l),l=No(v,t),m(d)}return l===i&&(l=No(v,t)),c}return t=ga(t)||0,ea(n)&&(h=!!n.leading,a=(p="maxWait"in n)?qt(ga(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),_.cancel=function(){l!==i&&wi(l),u=0,r=d=s=l=i},_.flush=function(){return l===i?c:y(Ts())},_}var Ds=Jr((function(e,t){return dr(e,1,t)})),ks=Jr((function(e,t,n){return dr(e,ga(t)||0,n)}));function Ps(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new xe(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ps.Cache||Kn),n}function Ls(e){if("function"!=typeof e)throw new xe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ps.Cache=Kn;var Ms=Ei((function(e,t){var n=(t=1==t.length&&zs(t[0])?Lt(t[0],$t(co())):Lt(vr(t,1),$t(co()))).length;return Jr((function(r){for(var i=-1,o=_n(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Rt(e,this,r)}))})),js=Jr((function(e,t){var n=un(t,ao(js));return Qi(e,l,i,t,n)})),Us=Jr((function(e,t){var n=un(t,ao(Us));return Qi(e,d,i,t,n)})),Bs=no((function(e,t){return Qi(e,h,i,i,i,t)}));function Fs(e,t){return e===t||e!==e&&t!==t}var Vs=Yi(Tr),Ws=Yi((function(e,t){return e>=t})),Hs=Nr(function(){return arguments}())?Nr:function(e){return ta(e)&&Le.call(e,"callee")&&!qe.call(e,"callee")},zs=n.isArray,Gs=bt?$t(bt):function(e){return ta(e)&&Cr(e)==P};function Ys(e){return null!=e&&$s(e.length)&&!Qs(e)}function Ks(e){return ta(e)&&Ys(e)}var qs=vt||gc,Xs=wt?$t(wt):function(e){return ta(e)&&Cr(e)==b};function Js(e){if(!ta(e))return!1;var t=Cr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ia(e)}function Qs(e){if(!ea(e))return!1;var t=Cr(e);return t==S||t==A||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zs(e){return"number"==typeof e&&e==fa(e)}function $s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}var na=St?$t(St):function(e){return ta(e)&&mo(e)==C};function ra(e){return"number"==typeof e||ta(e)&&Cr(e)==T}function ia(e){if(!ta(e)||Cr(e)!=R)return!1;var t=Ye(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Be}var oa=At?$t(At):function(e){return ta(e)&&Cr(e)==x};var sa=Ct?$t(Ct):function(e){return ta(e)&&mo(e)==O};function aa(e){return"string"==typeof e||!zs(e)&&ta(e)&&Cr(e)==N}function ca(e){return"symbol"==typeof e||ta(e)&&Cr(e)==D}var la=Tt?$t(Tt):function(e){return ta(e)&&$s(e.length)&&!!ct[Cr(e)]};var da=Yi(Ur),ua=Yi((function(e,t){return e<=t}));function ha(e){if(!e)return[];if(Ys(e))return aa(e)?mn(e):xi(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=mo(e);return(t==C?ln:t==O?hn:Fa)(e)}function pa(e){return e?(e=ga(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fa(e){var t=pa(e),n=t%1;return t===t?n?t-n:t:0}function ma(e){return e?ar(fa(e),0,g):0}function ga(e){if("number"==typeof e)return e;if(ca(e))return m;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=ve.test(e);return n||_e.test(e)?ht(e.slice(2),n?2:8):ge.test(e)?m:+e}function va(e){return Oi(e,Da(e))}function ya(e){return null==e?"":li(e)}var _a=Di((function(e,t){if(Ao(t)||Ys(t))Oi(t,Na(t),e);else for(var n in t)Le.call(t,n)&&tr(e,n,t[n])})),Ea=Di((function(e,t){Oi(t,Da(t),e)})),ba=Di((function(e,t,n,r){Oi(t,Da(t),e,r)})),wa=Di((function(e,t,n,r){Oi(t,Na(t),e,r)})),Sa=no(sr);var Aa=Jr((function(e,t){e=Te(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&Eo(t[0],t[1],o)&&(r=1);++n<r;)for(var s=t[n],a=Da(s),c=-1,l=a.length;++c<l;){var d=a[c],u=e[d];(u===i||Fs(u,De[d])&&!Le.call(e,d))&&(e[d]=s[d])}return e})),Ca=Jr((function(e){return e.push(i,$i),Rt(Pa,i,e)}));function Ta(e,t,n){var r=null==e?i:Sr(e,t);return r===i?n:r}function Ra(e,t){return null!=e&&go(e,t,Ir)}var Ia=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),ec(rc)),xa=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),co),Oa=Jr(Or);function Na(e){return Ys(e)?Jn(e):Mr(e)}function Da(e){return Ys(e)?Jn(e,!0):jr(e)}var ka=Di((function(e,t,n){Wr(e,t,n)})),Pa=Di((function(e,t,n,r){Wr(e,t,n,r)})),La=no((function(e,t){var n={};if(null==e)return n;var r=!1;t=Lt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Oi(e,io(e),n),r&&(n=cr(n,7,eo));for(var i=t.length;i--;)ui(n,t[i]);return n}));var Ma=no((function(e,t){return null==e?{}:function(e,t){return Gr(e,t,(function(t,n){return Ra(e,n)}))}(e,t)}));function ja(e,t){if(null==e)return{};var n=Lt(io(e),(function(e){return[e]}));return t=co(t),Gr(e,n,(function(e,n){return t(e,n[0])}))}var Ua=Ji(Na),Ba=Ji(Da);function Fa(e){return null==e?[]:en(e,Na(e))}var Va=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?Wa(t):t)}));function Wa(e){return Ja(ya(e).toLowerCase())}function Ha(e){return(e=ya(e))&&e.replace(be,on).replace(tt,"")}var za=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ga=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ya=Li("toLowerCase");var Ka=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var qa=Mi((function(e,t,n){return e+(n?" ":"")+Ja(t)}));var Xa=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ja=Li("toUpperCase");function Qa(e,t,n){return e=ya(e),(t=n?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Za=Jr((function(e,t){try{return Rt(e,i,t)}catch(n){return Js(n)?n:new ae(n)}})),$a=no((function(e,t){return xt(t,(function(t){t=jo(t),or(e,t,xs(e[t],e))})),e}));function ec(e){return function(){return e}}var tc=Bi(),nc=Bi(!0);function rc(e){return e}function ic(e){return Lr("function"==typeof e?e:cr(e,1))}var oc=Jr((function(e,t){return function(n){return Or(n,e,t)}})),sc=Jr((function(e,t){return function(n){return Or(e,n,t)}}));function ac(e,t,n){var r=Na(t),i=wr(t,r);null!=n||ea(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Na(t)));var o=!(ea(n)&&"chain"in n)||!!n.chain,s=Qs(e);return xt(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=xi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Mt([this.value()],arguments))})})),e}function cc(){}var lc=Hi(Lt),dc=Hi(Nt),uc=Hi(Bt);function hc(e){return bo(e)?Kt(jo(e)):function(e){return function(t){return Sr(t,e)}}(e)}var pc=Gi(),fc=Gi(!0);function mc(){return[]}function gc(){return!1}var vc=Wi((function(e,t){return e+t}),0),yc=qi("ceil"),_c=Wi((function(e,t){return e/t}),1),Ec=qi("floor");var bc=Wi((function(e,t){return e*t}),1),wc=qi("round"),Sc=Wi((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new xe(o);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Rs,Fn.assign=_a,Fn.assignIn=Ea,Fn.assignInWith=ba,Fn.assignWith=wa,Fn.at=Sa,Fn.before=Is,Fn.bind=xs,Fn.bindAll=$a,Fn.bindKey=Os,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return zs(e)?e:[e]},Fn.chain=hs,Fn.chunk=function(e,t,r){t=(r?Eo(e,t,r):t===i)?1:qt(fa(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=n(pt(o/t));s<o;)c[a++]=ri(e,s,s+=t);return c},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Mt(zs(r)?xi(r):[r],vr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=co();return e=t?Lt(e,(function(e){if("function"!=typeof e[1])throw new xe(o);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Rt(i[0],this,n))return Rt(i[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Na(e);return function(n){return lr(n,e,t)}}(cr(e,1))},Fn.constant=ec,Fn.countBy=ms,Fn.create=function(e,t){var n=Vn(e);return null==t?n:ir(n,t)},Fn.curry=function e(t,n,r){var o=Qi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Fn.curryRight=function e(t,n,r){var o=Qi(t,c,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Fn.debounce=Ns,Fn.defaults=Aa,Fn.defaultsDeep=Ca,Fn.defer=Ds,Fn.delay=ks,Fn.difference=Fo,Fn.differenceBy=Vo,Fn.differenceWith=Wo,Fn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:fa(t))<0?0:t,r):[]},Fn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:fa(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!0):[]},Fn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Eo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=fa(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fa(r))<0&&(r+=o),r=n>r?0:ma(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Fn.filter=function(e,t){return(zs(e)?Dt:gr)(e,co(t,3))},Fn.flatMap=function(e,t){return vr(Ss(e,t),1)},Fn.flatMapDeep=function(e,t){return vr(Ss(e,t),p)},Fn.flatMapDepth=function(e,t,n){return n=n===i?1:fa(n),vr(Ss(e,t),n)},Fn.flatten=Go,Fn.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,p):[]},Fn.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:fa(t)):[]},Fn.flip=function(e){return Qi(e,512)},Fn.flow=tc,Fn.flowRight=nc,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Fn.functions=function(e){return null==e?[]:wr(e,Na(e))},Fn.functionsIn=function(e){return null==e?[]:wr(e,Da(e))},Fn.groupBy=Es,Fn.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},Fn.intersection=Ko,Fn.intersectionBy=qo,Fn.intersectionWith=Xo,Fn.invert=Ia,Fn.invertBy=xa,Fn.invokeMap=bs,Fn.iteratee=ic,Fn.keyBy=ws,Fn.keys=Na,Fn.keysIn=Da,Fn.map=Ss,Fn.mapKeys=function(e,t){var n={};return t=co(t,3),Er(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Fn.mapValues=function(e,t){var n={};return t=co(t,3),Er(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Fn.matches=function(e){return Fr(cr(e,1))},Fn.matchesProperty=function(e,t){return Vr(e,cr(t,1))},Fn.memoize=Ps,Fn.merge=ka,Fn.mergeWith=Pa,Fn.method=oc,Fn.methodOf=sc,Fn.mixin=ac,Fn.negate=Ls,Fn.nthArg=function(e){return e=fa(e),Jr((function(t){return Hr(t,e)}))},Fn.omit=La,Fn.omitBy=function(e,t){return ja(e,Ls(co(t)))},Fn.once=function(e){return Is(2,e)},Fn.orderBy=function(e,t,n,r){return null==e?[]:(zs(t)||(t=null==t?[]:[t]),zs(n=r?i:n)||(n=null==n?[]:[n]),zr(e,t,n))},Fn.over=lc,Fn.overArgs=Ms,Fn.overEvery=dc,Fn.overSome=uc,Fn.partial=js,Fn.partialRight=Us,Fn.partition=As,Fn.pick=Ma,Fn.pickBy=ja,Fn.property=hc,Fn.propertyOf=function(e){return function(t){return null==e?i:Sr(e,t)}},Fn.pull=Qo,Fn.pullAll=Zo,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,co(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,i,n):e},Fn.pullAt=$o,Fn.range=pc,Fn.rangeRight=fc,Fn.rearg=Bs,Fn.reject=function(e,t){return(zs(e)?Dt:gr)(e,Ls(co(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=co(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Kr(e,i),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new xe(o);return Jr(e,t=t===i?t:fa(t))},Fn.reverse=es,Fn.sampleSize=function(e,t,n){return t=(n?Eo(e,t,n):t===i)?1:fa(t),(zs(e)?Zn:Zr)(e,t)},Fn.set=function(e,t,n){return null==e?e:$r(e,t,n)},Fn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:$r(e,t,n,r)},Fn.shuffle=function(e){return(zs(e)?$n:ni)(e)},Fn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Eo(e,t,n)?(t=0,n=r):(t=null==t?0:fa(t),n=n===i?r:fa(n)),ri(e,t,n)):[]},Fn.sortBy=Cs,Fn.sortedUniq=function(e){return e&&e.length?ai(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?ai(e,co(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&Eo(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=li(t))&&cn(e)?bi(mn(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new xe(o);return t=null==t?0:qt(fa(t),0),Jr((function(n){var r=n[t],i=bi(n,0,t);return r&&Mt(i,r),Rt(e,this,i)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:fa(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:fa(t)))<0?0:t,r):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?pi(e,co(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new xe(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ns(e,t,{leading:r,maxWait:t,trailing:i})},Fn.thru=ps,Fn.toArray=ha,Fn.toPairs=Ua,Fn.toPairsIn=Ba,Fn.toPath=function(e){return zs(e)?Lt(e,jo):ca(e)?[e]:xi(Mo(ya(e)))},Fn.toPlainObject=va,Fn.transform=function(e,t,n){var r=zs(e),i=r||qs(e)||la(e);if(t=co(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ea(e)&&Qs(o)?Vn(Ye(e)):{}}return(i?xt:Er)(e,(function(e,r,i){return t(n,e,r,i)})),n},Fn.unary=function(e){return Rs(e,1)},Fn.union=ts,Fn.unionBy=ns,Fn.unionWith=rs,Fn.uniq=function(e){return e&&e.length?di(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?di(e,co(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?di(e,i,t):[]},Fn.unset=function(e,t){return null==e||ui(e,t)},Fn.unzip=is,Fn.unzipWith=os,Fn.update=function(e,t,n){return null==e?e:hi(e,t,yi(n))},Fn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:hi(e,t,yi(n),r)},Fn.values=Fa,Fn.valuesIn=function(e){return null==e?[]:en(e,Da(e))},Fn.without=ss,Fn.words=Qa,Fn.wrap=function(e,t){return js(yi(t),e)},Fn.xor=as,Fn.xorBy=cs,Fn.xorWith=ls,Fn.zip=ds,Fn.zipObject=function(e,t){return gi(e||[],t||[],tr)},Fn.zipObjectDeep=function(e,t){return gi(e||[],t||[],$r)},Fn.zipWith=us,Fn.entries=Ua,Fn.entriesIn=Ba,Fn.extend=Ea,Fn.extendWith=ba,ac(Fn,Fn),Fn.add=vc,Fn.attempt=Za,Fn.camelCase=Va,Fn.capitalize=Wa,Fn.ceil=yc,Fn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ga(n))===n?n:0),t!==i&&(t=(t=ga(t))===t?t:0),ar(ga(e),t,n)},Fn.clone=function(e){return cr(e,4)},Fn.cloneDeep=function(e){return cr(e,5)},Fn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:i)},Fn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:i)},Fn.conformsTo=function(e,t){return null==t||lr(e,t,Na(t))},Fn.deburr=Ha,Fn.defaultTo=function(e,t){return null==e||e!==e?t:e},Fn.divide=_c,Fn.endsWith=function(e,t,n){e=ya(e),t=li(t);var r=e.length,o=n=n===i?r:ar(fa(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Fn.eq=Fs,Fn.escape=function(e){return(e=ya(e))&&Q.test(e)?e.replace(X,sn):e},Fn.escapeRegExp=function(e){return(e=ya(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Fn.every=function(e,t,n){var r=zs(e)?Nt:fr;return n&&Eo(e,t,n)&&(t=i),r(e,co(t,3))},Fn.find=gs,Fn.findIndex=Ho,Fn.findKey=function(e,t){return Vt(e,co(t,3),Er)},Fn.findLast=vs,Fn.findLastIndex=zo,Fn.findLastKey=function(e,t){return Vt(e,co(t,3),br)},Fn.floor=Ec,Fn.forEach=ys,Fn.forEachRight=_s,Fn.forIn=function(e,t){return null==e?e:yr(e,co(t,3),Da)},Fn.forInRight=function(e,t){return null==e?e:_r(e,co(t,3),Da)},Fn.forOwn=function(e,t){return e&&Er(e,co(t,3))},Fn.forOwnRight=function(e,t){return e&&br(e,co(t,3))},Fn.get=Ta,Fn.gt=Vs,Fn.gte=Ws,Fn.has=function(e,t){return null!=e&&go(e,t,Rr)},Fn.hasIn=Ra,Fn.head=Yo,Fn.identity=rc,Fn.includes=function(e,t,n,r){e=Ys(e)?e:Fa(e),n=n&&!r?fa(n):0;var i=e.length;return n<0&&(n=qt(i+n,0)),aa(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fa(n);return i<0&&(i=qt(r+i,0)),Ht(e,t,i)},Fn.inRange=function(e,t,n){return t=pa(t),n===i?(n=t,t=0):n=pa(n),function(e,t,n){return e>=_n(t,n)&&e<qt(t,n)}(e=ga(e),t,n)},Fn.invoke=Oa,Fn.isArguments=Hs,Fn.isArray=zs,Fn.isArrayBuffer=Gs,Fn.isArrayLike=Ys,Fn.isArrayLikeObject=Ks,Fn.isBoolean=function(e){return!0===e||!1===e||ta(e)&&Cr(e)==E},Fn.isBuffer=qs,Fn.isDate=Xs,Fn.isElement=function(e){return ta(e)&&1===e.nodeType&&!ia(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Ys(e)&&(zs(e)||"string"==typeof e||"function"==typeof e.splice||qs(e)||la(e)||Hs(e)))return!e.length;var t=mo(e);if(t==C||t==O)return!e.size;if(Ao(e))return!Mr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Dr(e,t)},Fn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Dr(e,t,i,n):!!r},Fn.isError=Js,Fn.isFinite=function(e){return"number"==typeof e&&_t(e)},Fn.isFunction=Qs,Fn.isInteger=Zs,Fn.isLength=$s,Fn.isMap=na,Fn.isMatch=function(e,t){return e===t||kr(e,t,uo(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,kr(e,t,uo(t),n)},Fn.isNaN=function(e){return ra(e)&&e!=+e},Fn.isNative=function(e){if(So(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=ra,Fn.isObject=ea,Fn.isObjectLike=ta,Fn.isPlainObject=ia,Fn.isRegExp=oa,Fn.isSafeInteger=function(e){return Zs(e)&&e>=-9007199254740991&&e<=f},Fn.isSet=sa,Fn.isString=aa,Fn.isSymbol=ca,Fn.isTypedArray=la,Fn.isUndefined=function(e){return e===i},Fn.isWeakMap=function(e){return ta(e)&&mo(e)==k},Fn.isWeakSet=function(e){return ta(e)&&"[object WeakSet]"==Cr(e)},Fn.join=function(e,t){return null==e?"":Et.call(e,t)},Fn.kebabCase=za,Fn.last=Jo,Fn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fa(n))<0?qt(r+o,0):_n(o,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Wt(e,Gt,o,!0)},Fn.lowerCase=Ga,Fn.lowerFirst=Ya,Fn.lt=da,Fn.lte=ua,Fn.max=function(e){return e&&e.length?mr(e,rc,Tr):i},Fn.maxBy=function(e,t){return e&&e.length?mr(e,co(t,2),Tr):i},Fn.mean=function(e){return Yt(e,rc)},Fn.meanBy=function(e,t){return Yt(e,co(t,2))},Fn.min=function(e){return e&&e.length?mr(e,rc,Ur):i},Fn.minBy=function(e,t){return e&&e.length?mr(e,co(t,2),Ur):i},Fn.stubArray=mc,Fn.stubFalse=gc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=bc,Fn.nth=function(e,t){return e&&e.length?Hr(e,fa(t)):i},Fn.noConflict=function(){return mt._===this&&(mt._=Fe),this},Fn.noop=cc,Fn.now=Ts,Fn.pad=function(e,t,n){e=ya(e);var r=(t=fa(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return zi(ft(i),n)+e+zi(pt(i),n)},Fn.padEnd=function(e,t,n){e=ya(e);var r=(t=fa(t))?fn(e):0;return t&&r<t?e+zi(t-r,n):e},Fn.padStart=function(e,t,n){e=ya(e);var r=(t=fa(t))?fn(e):0;return t&&r<t?zi(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(ya(e).replace(se,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Eo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=pa(e),t===i?(t=e,e=0):t=pa(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=wn();return _n(e+o*(t-e+ut("1e-"+((o+"").length-1))),t)}return qr(e,t)},Fn.reduce=function(e,t,n){var r=zs(e)?jt:Xt,i=arguments.length<3;return r(e,co(t,4),n,i,hr)},Fn.reduceRight=function(e,t,n){var r=zs(e)?Ut:Xt,i=arguments.length<3;return r(e,co(t,4),n,i,pr)},Fn.repeat=function(e,t,n){return t=(n?Eo(e,t,n):t===i)?1:fa(t),Xr(ya(e),t)},Fn.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var r=-1,o=(t=_i(t,e)).length;for(o||(o=1,e=i);++r<o;){var s=null==e?i:e[jo(t[r])];s===i&&(r=o,s=n),e=Qs(s)?s.call(e):s}return e},Fn.round=wc,Fn.runInContext=e,Fn.sample=function(e){return(zs(e)?Qn:Qr)(e)},Fn.size=function(e){if(null==e)return 0;if(Ys(e))return aa(e)?fn(e):e.length;var t=mo(e);return t==C||t==O?e.size:Mr(e).length},Fn.snakeCase=Ka,Fn.some=function(e,t,n){var r=zs(e)?Bt:ii;return n&&Eo(e,t,n)&&(t=i),r(e,co(t,3))},Fn.sortedIndex=function(e,t){return oi(e,t)},Fn.sortedIndexBy=function(e,t,n){return si(e,t,co(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Fs(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return oi(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return si(e,t,co(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Fs(e[n],t))return n}return-1},Fn.startCase=qa,Fn.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:ar(fa(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},Fn.subtract=Sc,Fn.sum=function(e){return e&&e.length?Jt(e,rc):0},Fn.sumBy=function(e,t){return e&&e.length?Jt(e,co(t,2)):0},Fn.template=function(e,t,n){var r=Fn.templateSettings;n&&Eo(e,t,n)&&(t=i),e=ya(e),t=ba({},t,r,Zi);var o,s,a=ba({},t.imports,r.imports,Zi),c=Na(a),l=en(a,c),d=0,u=t.interpolate||we,h="__p += '",p=Re((t.escape||we).source+"|"+u.source+"|"+(u===ee?fe:we).source+"|"+(t.evaluate||we).source+"|$","g"),f="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(p,(function(t,n,r,i,a,c){return r||(r=i),h+=e.slice(d,c).replace(Se,an),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),h+="';\n";var m=Le.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new ae("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(G,""):h).replace(Y,"$1").replace(K,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Za((function(){return Ae(c,f+"return "+h).apply(i,l)}));if(g.source=h,Js(g))throw g;return g},Fn.times=function(e,t){if((e=fa(e))<1||e>f)return[];var n=g,r=_n(e,g);t=co(t),e-=g;for(var i=Qt(r,t);++n<e;)t(n);return i},Fn.toFinite=pa,Fn.toInteger=fa,Fn.toLength=ma,Fn.toLower=function(e){return ya(e).toLowerCase()},Fn.toNumber=ga,Fn.toSafeInteger=function(e){return e?ar(fa(e),-9007199254740991,f):0===e?e:0},Fn.toString=ya,Fn.toUpper=function(e){return ya(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=ya(e))&&(n||t===i))return Zt(e);if(!e||!(t=li(t)))return e;var r=mn(e),o=mn(t);return bi(r,nn(r,o),rn(r,o)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=li(t)))return e;var r=mn(e);return bi(r,0,rn(r,mn(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.replace(se,"");if(!e||!(t=li(t)))return e;var r=mn(e);return bi(r,nn(r,mn(t))).join("")},Fn.truncate=function(e,t){var n=30,r="...";if(ea(t)){var o="separator"in t?t.separator:o;n="length"in t?fa(t.length):n,r="omission"in t?li(t.omission):r}var s=(e=ya(e)).length;if(cn(e)){var a=mn(e);s=a.length}if(n>=s)return e;var c=n-fn(r);if(c<1)return r;var l=a?bi(a,0,c).join(""):e.slice(0,c);if(o===i)return l+r;if(a&&(c+=l.length-c),oa(o)){if(e.slice(c).search(o)){var d,u=l;for(o.global||(o=Re(o.source,ya(me.exec(o))+"g")),o.lastIndex=0;d=o.exec(u);)var h=d.index;l=l.slice(0,h===i?c:h)}}else if(e.indexOf(li(o),c)!=c){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+r},Fn.unescape=function(e){return(e=ya(e))&&J.test(e)?e.replace(q,vn):e},Fn.uniqueId=function(e){var t=++Me;return ya(e)+t},Fn.upperCase=Xa,Fn.upperFirst=Ja,Fn.each=ys,Fn.eachRight=_s,Fn.first=Yo,ac(Fn,function(){var e={};return Er(Fn,(function(t,n){Le.call(Fn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Fn.VERSION="4.17.21",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),xt(["drop","take"],(function(e,t){zn.prototype[e]=function(n){n=n===i?1:qt(fa(n),0);var r=this.__filtered__&&!t?new zn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,g),type:e+(r.__dir__<0?"Right":"")}),r},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),xt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:co(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),xt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),xt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(rc)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Or(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(Ls(co(e)))},zn.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(g)},Er(zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Fn[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);o&&(Fn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,c=t instanceof zn,l=a[0],d=c||zs(t),u=function(e){var t=o.apply(Fn,Mt([e],a));return r&&h?t[0]:t};d&&n&&"function"==typeof l&&1!=l.length&&(c=d=!1);var h=this.__chain__,p=!!this.__actions__.length,f=s&&!h,m=c&&!p;if(!s&&d){t=m?t:new zn(this);var g=e.apply(t,a);return g.__actions__.push({func:ps,args:[u],thisArg:i}),new Hn(g,h)}return f&&m?e.apply(this,a):(g=this.thru(u),f?r?g.value()[0]:g.value():g)})})),xt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Oe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(zs(i)?i:[],e)}return this[n]((function(n){return t.apply(zs(n)?n:[],e)}))}})),Er(zn.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";Le.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:t,func:n})}})),Nn[Fi(i,2).name]=[{name:"wrapper",func:i}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=xi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=xi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=xi(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=zs(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=_n(t,e+s);break;case"takeRight":e=qt(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,l=r?a:s-1,d=this.__iteratees__,u=d.length,h=0,p=_n(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return fi(e,this.__actions__);var f=[];e:for(;c--&&h<p;){for(var m=-1,g=e[l+=t];++m<u;){var v=d[m],y=v.iteratee,_=v.type,E=y(g);if(2==_)g=E;else if(!E){if(1==_)continue e;break e}}f[h++]=g}return f},Fn.prototype.at=fs,Fn.prototype.chain=function(){return hs(this)},Fn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof Wn;){var r=Bo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:ps,args:[es],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(es)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Qe&&(Fn.prototype[Qe]=function(){return this}),Fn}();mt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},2426:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(a(e,t))return!1;return!0}function l(e){return void 0===e}function d(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function p(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return qn(e,t,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(e){return null==e._pf&&(e._pf=m()),e._pf}function v(e){var t=null,r=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=g(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function y(e){var t=f(NaN);return null!=e?p(g(t),e):g(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var _=r.momentProperties=[],E=!1;function b(e,t){var n,r,i,o=_.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)l(i=t[r=_[n]])||(e[r]=i);return e}function w(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===E&&(E=!0,r.updateOffset(this),E=!1)}function S(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function A(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var n=!0;return p((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,s,c=[],l=arguments.length;for(o=0;o<l;o++){if(i="","object"===typeof arguments[o]){for(s in i+="\n["+o+"] ",arguments[0])a(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[o];c.push(i)}A(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var T,R={};function I(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),R[e]||(A(t),R[e]=!0)}function x(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e){var t,n;for(n in e)a(e,n)&&(x(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function N(e,t){var n,r=p({},e);for(n in t)a(t,n)&&(s(e[n])&&s(t[n])?(r[n]={},p(r[n],e[n]),p(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)a(e,n)&&!a(t,n)&&s(e[n])&&(r[n]=p({},r[n]));return r}function D(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)a(e,t)&&n.push(t);return n};var k={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function P(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return x(r)?r.call(t,n):r}function L(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},B={};function F(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(B[e]=i),t&&(B[t[0]]=function(){return L(i.apply(this,arguments),t[1],t[2])}),n&&(B[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t,n,r=e.match(M);for(t=0,n=r.length;t<n;t++)B[r[t]]?r[t]=B[r[t]]:r[t]=V(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=x(r[i])?r[i].call(t,e):r[i];return o}}function H(e,t){return e.isValid()?(t=z(t,e.localeData()),U[t]=U[t]||W(t),U[t](e)):e.localeData().invalidDate()}function z(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(j.lastIndex=0;n>=0&&j.test(e);)e=e.replace(j,r),j.lastIndex=0,n-=1;return e}var G={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Y(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(M).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var K="Invalid date";function q(){return this._invalidDate}var X="%d",J=/\d{1,2}/;function Q(e){return this._ordinal.replace("%d",e)}var Z={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(e,t,n,r){var i=this._relativeTime[n];return x(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return x(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,r={};for(n in e)a(e,n)&&(t=ne(n))&&(r[t]=e[n]);return r}var ie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function oe(e){var t,n=[];for(t in e)a(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var se,ae=/\d/,ce=/\d\d/,le=/\d{3}/,de=/\d{4}/,ue=/[+-]?\d{6}/,he=/\d\d?/,pe=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ge=/\d{1,4}/,ve=/[+-]?\d{1,6}/,ye=/\d+/,_e=/[+-]?\d+/,Ee=/Z|[+-]\d\d:?\d\d/gi,be=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[+-]?\d+(\.\d{1,3})?/,Se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ae=/^[1-9]\d?/,Ce=/^([1-9]\d|\d)/;function Te(e,t,n){se[e]=x(t)?t:function(e,r){return e&&n?n:t}}function Re(e,t){return a(se,e)?se[e](t._strict,t._locale):new RegExp(Ie(e))}function Ie(e){return xe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function xe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Oe(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ne(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Oe(t)),n}se={};var De={};function ke(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),d(t)&&(i=function(e,n){n[t]=Ne(e)}),r=e.length,n=0;n<r;n++)De[e[n]]=i}function Pe(e,t){ke(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Le(e,t,n){null!=t&&a(De,e)&&De[e](t,n._a,n,e)}function Me(e){return e%4===0&&e%100!==0||e%400===0}var je=0,Ue=1,Be=2,Fe=3,Ve=4,We=5,He=6,ze=7,Ge=8;function Ye(e){return Me(e)?366:365}F("Y",0,0,(function(){var e=this.year();return e<=9999?L(e,4):"+"+e})),F(0,["YY",2],0,(function(){return this.year()%100})),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),Te("Y",_e),Te("YY",he,ce),Te("YYYY",ge,de),Te("YYYYY",ve,ue),Te("YYYYYY",ve,ue),ke(["YYYYY","YYYYYY"],je),ke("YYYY",(function(e,t){t[je]=2===e.length?r.parseTwoDigitYear(e):Ne(e)})),ke("YY",(function(e,t){t[je]=r.parseTwoDigitYear(e)})),ke("Y",(function(e,t){t[je]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return Ne(e)+(Ne(e)>68?1900:2e3)};var Ke,qe=Je("FullYear",!0);function Xe(){return Me(this.year())}function Je(e,t){return function(n){return null!=n?(Ze(this,e,n),r.updateOffset(this,t),this):Qe(this,e)}}function Qe(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Ze(e,t,n){var r,i,o,s,a;if(e.isValid()&&!isNaN(n)){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}o=n,s=e.month(),a=29!==(a=e.date())||1!==s||Me(o)?a:28,i?r.setUTCFullYear(o,s,a):r.setFullYear(o,s,a)}}function $e(e){return x(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var n,r=oe(e=re(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(x(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Me(e)?29:28:31-n%7%2}Ke=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",(function(){return this.month()+1})),F("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),F("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),Te("M",he,Ae),Te("MM",he,ce),Te("MMM",(function(e,t){return t.monthsShortRegex(e)})),Te("MMMM",(function(e,t){return t.monthsRegex(e)})),ke(["M","MM"],(function(e,t){t[Ue]=Ne(e)-1})),ke(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Ue]=i:g(n).invalidMonth=e}));var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ot=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,st=Se,at=Se;function ct(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ot).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function lt(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ot.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function dt(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ke.call(this._shortMonthsParse,s))?i:null:-1!==(i=Ke.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=Ke.call(this._shortMonthsParse,s))||-1!==(i=Ke.call(this._longMonthsParse,s))?i:null:-1!==(i=Ke.call(this._longMonthsParse,s))||-1!==(i=Ke.call(this._shortMonthsParse,s))?i:null}function ut(e,t,n){var r,i,o;if(this._monthsParseExact)return dt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ht(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=Ne(t);else if(!d(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function pt(e){return null!=e?(ht(this,e),r.updateOffset(this,!0),this):Qe(this,"Month")}function ft(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||vt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=st),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function gt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||vt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=at),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function vt(){function e(e,t){return t.length-e.length}var t,n,r,i,o=[],s=[],a=[];for(t=0;t<12;t++)n=f([2e3,t]),r=xe(this.monthsShort(n,"")),i=xe(this.months(n,"")),o.push(r),s.push(i),a.push(i),a.push(r);o.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function yt(e,t,n,r,i,o,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,o,s),a}function _t(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Et(e,t,n){var r=7+t-n;return-(7+_t(e,0,r).getUTCDay()-t)%7+r-1}function bt(e,t,n,r,i){var o,s,a=1+7*(t-1)+(7+n-r)%7+Et(e,r,i);return a<=0?s=Ye(o=e-1)+a:a>Ye(e)?(o=e+1,s=a-Ye(e)):(o=e,s=a),{year:o,dayOfYear:s}}function wt(e,t,n){var r,i,o=Et(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?r=s+St(i=e.year()-1,t,n):s>St(e.year(),t,n)?(r=s-St(e.year(),t,n),i=e.year()+1):(i=e.year(),r=s),{week:r,year:i}}function St(e,t,n){var r=Et(e,t,n),i=Et(e+1,t,n);return(Ye(e)-r+i)/7}function At(e){return wt(e,this._week.dow,this._week.doy).week}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),Te("w",he,Ae),Te("ww",he,ce),Te("W",he,Ae),Te("WW",he,ce),Pe(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=Ne(e)}));var Ct={dow:0,doy:6};function Tt(){return this._week.dow}function Rt(){return this._week.doy}function It(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function xt(e){var t=wt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ot(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Nt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Dt(e,t){return e.slice(t,7).concat(e.slice(0,t))}F("d",0,"do","day"),F("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),F("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),F("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),Te("d",he),Te("e",he),Te("E",he),Te("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Te("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Te("dddd",(function(e,t){return t.weekdaysRegex(e)})),Pe(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e})),Pe(["d","e","E"],(function(e,t,n,r){t[r]=Ne(e)}));var kt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=Se,jt=Se,Ut=Se;function Bt(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Dt(n,this._week.dow):e?n[e.day()]:n}function Ft(e){return!0===e?Dt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Vt(e){return!0===e?Dt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Wt(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ke.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=Ke.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=Ke.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=Ke.call(this._weekdaysParse,s))||-1!==(i=Ke.call(this._shortWeekdaysParse,s))||-1!==(i=Ke.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=Ke.call(this._shortWeekdaysParse,s))||-1!==(i=Ke.call(this._weekdaysParse,s))||-1!==(i=Ke.call(this._minWeekdaysParse,s))?i:null:-1!==(i=Ke.call(this._minWeekdaysParse,s))||-1!==(i=Ke.call(this._weekdaysParse,s))||-1!==(i=Ke.call(this._shortWeekdaysParse,s))?i:null}function Ht(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Wt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function zt(e){if(!this.isValid())return null!=e?this:NaN;var t=Qe(this,"Day");return null!=e?(e=Ot(e,this.localeData()),this.add(e-t,"d")):t}function Gt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Yt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Nt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Kt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Mt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function qt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ut),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Jt(){function e(e,t){return t.length-e.length}var t,n,r,i,o,s=[],a=[],c=[],l=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=xe(this.weekdaysMin(n,"")),i=xe(this.weekdaysShort(n,"")),o=xe(this.weekdays(n,"")),s.push(r),a.push(i),c.push(o),l.push(r),l.push(i),l.push(o);s.sort(e),a.sort(e),c.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Qt(){return this.hours()%12||12}function Zt(){return this.hours()||24}function $t(e,t){F(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Qt),F("k",["kk",2],0,Zt),F("hmm",0,0,(function(){return""+Qt.apply(this)+L(this.minutes(),2)})),F("hmmss",0,0,(function(){return""+Qt.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)})),F("Hmm",0,0,(function(){return""+this.hours()+L(this.minutes(),2)})),F("Hmmss",0,0,(function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)})),$t("a",!0),$t("A",!1),Te("a",en),Te("A",en),Te("H",he,Ce),Te("h",he,Ae),Te("k",he,Ae),Te("HH",he,ce),Te("hh",he,ce),Te("kk",he,ce),Te("hmm",pe),Te("hmmss",fe),Te("Hmm",pe),Te("Hmmss",fe),ke(["H","HH"],Fe),ke(["k","kk"],(function(e,t,n){var r=Ne(e);t[Fe]=24===r?0:r})),ke(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ke(["h","hh"],(function(e,t,n){t[Fe]=Ne(e),g(n).bigHour=!0})),ke("hmm",(function(e,t,n){var r=e.length-2;t[Fe]=Ne(e.substr(0,r)),t[Ve]=Ne(e.substr(r)),g(n).bigHour=!0})),ke("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Fe]=Ne(e.substr(0,r)),t[Ve]=Ne(e.substr(r,2)),t[We]=Ne(e.substr(i)),g(n).bigHour=!0})),ke("Hmm",(function(e,t,n){var r=e.length-2;t[Fe]=Ne(e.substr(0,r)),t[Ve]=Ne(e.substr(r))})),ke("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Fe]=Ne(e.substr(0,r)),t[Ve]=Ne(e.substr(r,2)),t[We]=Ne(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=Je("Hours",!0);function on(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var sn,an={calendar:k,longDateFormat:G,invalidDate:K,ordinal:X,dayOfMonthOrdinalParse:J,relativeTime:Z,months:rt,monthsShort:it,week:Ct,weekdays:kt,weekdaysMin:Lt,weekdaysShort:Pt,meridiemParse:nn},cn={},ln={};function dn(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function un(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=un(e[o]).split("-")).length,n=(n=un(e[o+1]))?n.split("-"):null;t>0;){if(r=fn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&dn(i,n)>=t-1)break;t--}o++}return sn}function pn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function fn(t){var n=null;if(void 0===cn[t]&&e&&e.exports&&pn(t))try{n=sn._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(r){cn[t]=null}return cn[t]}function mn(e,t){var n;return e&&((n=l(t)?yn(e):gn(e,t))?sn=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),sn._abbr}function gn(e,t){if(null!==t){var n,r=an;if(t.abbr=e,null!=cn[e])I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])r=cn[t.parentLocale]._config;else{if(null==(n=fn(t.parentLocale)))return ln[t.parentLocale]||(ln[t.parentLocale]=[]),ln[t.parentLocale].push({name:e,config:t}),null;r=n._config}return cn[e]=new D(N(r,t)),ln[e]&&ln[e].forEach((function(e){gn(e.name,e.config)})),mn(e),cn[e]}return delete cn[e],null}function vn(e,t){if(null!=t){var n,r,i=an;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(N(cn[e]._config,t)):(null!=(r=fn(e))&&(i=r._config),t=N(i,t),null==r&&(t.abbr=e),(n=new D(t)).parentLocale=cn[e],cn[e]=n),mn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===mn()&&mn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return sn;if(!o(e)){if(t=fn(e))return t;e=[e]}return hn(e)}function _n(){return T(cn)}function En(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[Ue]<0||n[Ue]>11?Ue:n[Be]<1||n[Be]>nt(n[je],n[Ue])?Be:n[Fe]<0||n[Fe]>24||24===n[Fe]&&(0!==n[Ve]||0!==n[We]||0!==n[He])?Fe:n[Ve]<0||n[Ve]>59?Ve:n[We]<0||n[We]>59?We:n[He]<0||n[He]>999?He:-1,g(e)._overflowDayOfYear&&(t<je||t>Be)&&(t=Be),g(e)._overflowWeeks&&-1===t&&(t=ze),g(e)._overflowWeekday&&-1===t&&(t=Ge),g(e).overflow=t),e}var bn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,An=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Cn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Tn=/^\/?Date\((-?\d+)/i,Rn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,In={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function xn(e){var t,n,r,i,o,s,a=e._i,c=bn.exec(a)||wn.exec(a),l=An.length,d=Cn.length;if(c){for(g(e).iso=!0,t=0,n=l;t<n;t++)if(An[t][1].exec(c[1])){i=An[t][0],r=!1!==An[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=d;t<n;t++)if(Cn[t][1].exec(c[3])){o=(c[2]||" ")+Cn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(c[4]){if(!Sn.exec(c[4]))return void(e._isValid=!1);s="Z"}e._f=i+(o||"")+(s||""),Vn(e)}else e._isValid=!1}function On(e,t,n,r,i,o){var s=[Nn(e),it.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}function Nn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function kn(e,t,n){return!e||Pt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Pn(e,t,n){if(e)return In[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Ln(e){var t,n=Rn.exec(Dn(e._i));if(n){if(t=On(n[4],n[3],n[2],n[5],n[6],n[7]),!kn(n[1],t,e))return;e._a=t,e._tzm=Pn(n[8],n[9],n[10]),e._d=_t.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Mn(e){var t=Tn.exec(e._i);null===t?(xn(e),!1===e._isValid&&(delete e._isValid,Ln(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function jn(e,t,n){return null!=e?e:null!=t?t:n}function Un(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Bn(e){var t,n,r,i,o,s=[];if(!e._d){for(r=Un(e),e._w&&null==e._a[Be]&&null==e._a[Ue]&&Fn(e),null!=e._dayOfYear&&(o=jn(e._a[je],r[je]),(e._dayOfYear>Ye(o)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=_t(o,0,e._dayOfYear),e._a[Ue]=n.getUTCMonth(),e._a[Be]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Fe]&&0===e._a[Ve]&&0===e._a[We]&&0===e._a[He]&&(e._nextDay=!0,e._a[Fe]=0),e._d=(e._useUTC?_t:yt).apply(null,s),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Fe]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}function Fn(e){var t,n,r,i,o,s,a,c,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,s=4,n=jn(t.GG,e._a[je],wt(Xn(),1,4).year),r=jn(t.W,1),((i=jn(t.E,1))<1||i>7)&&(c=!0)):(o=e._locale._week.dow,s=e._locale._week.doy,l=wt(Xn(),o,s),n=jn(t.gg,e._a[je],l.year),r=jn(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(c=!0)):i=o),r<1||r>St(n,o,s)?g(e)._overflowWeeks=!0:null!=c?g(e)._overflowWeekday=!0:(a=bt(n,r,i,o,s),e._a[je]=a.year,e._dayOfYear=a.dayOfYear)}function Vn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],g(e).empty=!0;var t,n,i,o,s,a,c,l=""+e._i,d=l.length,u=0;for(c=(i=z(e._f,e._locale).match(M)||[]).length,t=0;t<c;t++)o=i[t],(n=(l.match(Re(o,e))||[])[0])&&((s=l.substr(0,l.indexOf(n))).length>0&&g(e).unusedInput.push(s),l=l.slice(l.indexOf(n)+n.length),u+=n.length),B[o]?(n?g(e).empty=!1:g(e).unusedTokens.push(o),Le(o,n,e)):e._strict&&!n&&g(e).unusedTokens.push(o);g(e).charsLeftOver=d-u,l.length>0&&g(e).unusedInput.push(l),e._a[Fe]<=12&&!0===g(e).bigHour&&e._a[Fe]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[Fe]=Wn(e._locale,e._a[Fe],e._meridiem),null!==(a=g(e).era)&&(e._a[je]=e._locale.erasConvertYear(a,e._a[je])),Bn(e),En(e)}else Ln(e);else xn(e)}function Wn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Hn(e){var t,n,r,i,o,s,a=!1,c=e._f.length;if(0===c)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<c;i++)o=0,s=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Vn(t),v(t)&&(s=!0),o+=g(t).charsLeftOver,o+=10*g(t).unusedTokens.length,g(t).score=o,a?o<r&&(r=o,n=t):(null==r||o<r||s)&&(r=o,n=t,s&&(a=!0));p(e,n||t)}function zn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Bn(e)}}function Gn(e){var t=new w(En(Yn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Yn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new w(En(t)):(u(t)?e._d=t:o(n)?Hn(e):n?Vn(e):Kn(e),v(e)||(e._d=null),e))}function Kn(e){var t=e._i;l(t)?e._d=new Date(r.now()):u(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Mn(e):o(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),Bn(e)):s(t)?zn(e):d(t)?e._d=new Date(t):r.createFromInputFallback(e)}function qn(e,t,n,r,i){var a={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(s(e)&&c(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=r,Gn(a)}function Xn(e,t,n,r){return qn(e,t,n,r,!1)}r.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Jn=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Xn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Qn=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Xn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Zn(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Xn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function $n(){return Zn("isBefore",[].slice.call(arguments,0))}function er(){return Zn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(a(e,t)&&(-1===Ke.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==Ne(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function or(){return Ir(NaN)}function sr(e){var t=re(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,a=t.hour||0,c=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+d+1e3*l+6e4*c+1e3*a*60*60,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function ar(e){return e instanceof sr}function cr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function lr(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&Ne(e[r])!==Ne(t[r]))&&s++;return s+o}function dr(e,t){F(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+L(~~(e/60),2)+t+L(~~e%60,2)}))}dr("Z",":"),dr("ZZ",""),Te("Z",be),Te("ZZ",be),ke(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=hr(be,e)}));var ur=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(ur)||["-",0,0])[1]+Ne(n[2]))?0:"+"===n[0]?r:-r}function pr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(S(e)||u(e)?e.valueOf():Xn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Xn(e).local()}function fr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=hr(be,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=fr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?kr(this,Ir(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:fr(this)}function gr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function vr(e){return this.utcOffset(0,e)}function yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(fr(this),"m")),this}function _r(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=hr(Ee,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Er(e){return!!this.isValid()&&(e=e?Xn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function br(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wr(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=Yn(t))._a?(e=t._isUTC?f(t._a):Xn(t._a),this._isDSTShifted=this.isValid()&&lr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sr(){return!!this.isValid()&&!this._isUTC}function Ar(){return!!this.isValid()&&this._isUTC}function Cr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Tr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ir(e,t){var n,r,i,o=e,s=null;return ar(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:d(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(s=Tr.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:Ne(s[Be])*n,h:Ne(s[Fe])*n,m:Ne(s[Ve])*n,s:Ne(s[We])*n,ms:Ne(cr(1e3*s[He]))*n}):(s=Rr.exec(e))?(n="-"===s[1]?-1:1,o={y:xr(s[2],n),M:xr(s[3],n),w:xr(s[4],n),d:xr(s[5],n),h:xr(s[6],n),m:xr(s[7],n),s:xr(s[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=Nr(Xn(o.from),Xn(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new sr(o),ar(e)&&a(e,"_locale")&&(r._locale=e._locale),ar(e)&&a(e,"_isValid")&&(r._isValid=e._isValid),r}function xr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Or(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Nr(e,t){var n;return e.isValid()&&t.isValid()?(t=pr(t,e),e.isBefore(t)?n=Or(e,t):((n=Or(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Dr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(I(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),kr(this,Ir(n,r),e),this}}function kr(e,t,n,i){var o=t._milliseconds,s=cr(t._days),a=cr(t._months);e.isValid()&&(i=null==i||i,a&&ht(e,Qe(e,"Month")+a*n),s&&Ze(e,"Date",Qe(e,"Date")+s*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,s||a))}Ir.fn=sr.prototype,Ir.invalid=or;var Pr=Dr(1,"add"),Lr=Dr(-1,"subtract");function Mr(e){return"string"===typeof e||e instanceof String}function jr(e){return S(e)||u(e)||Mr(e)||d(e)||Br(e)||Ur(e)||null===e||void 0===e}function Ur(e){var t,n,r=s(e)&&!c(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=o.length;for(t=0;t<l;t+=1)n=o[t],i=i||a(e,n);return r&&i}function Br(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!d(t)&&Mr(e)})).length),t&&n}function Fr(e){var t,n,r=s(e)&&!c(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],i=i||a(e,n);return r&&i}function Vr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Wr(e,t){1===arguments.length&&(arguments[0]?jr(arguments[0])?(e=arguments[0],t=void 0):Fr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Xn(),i=pr(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",s=t&&(x(t[o])?t[o].call(this,n):t[o]);return this.format(s||this.localeData().calendar(o,this,Xn(n)))}function Hr(){return new w(this)}function zr(e,t){var n=S(e)?e:Xn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Gr(e,t){var n=S(e)?e:Xn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Yr(e,t,n,r){var i=S(e)?e:Xn(e),o=S(t)?t:Xn(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Kr(e,t){var n,r=S(e)?e:Xn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function qr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Xr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Jr(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=pr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=ne(t)){case"year":o=Qr(this,r)/12;break;case"month":o=Qr(this,r);break;case"quarter":o=Qr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:Oe(o)}function Qr(e,t){if(e.date()<t.date())return-Qr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Zr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $r(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(S(e)&&e.isValid()||Xn(e).isValid())?Ir({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Xn(),e)}function ii(e,t){return this.isValid()&&(S(e)&&e.isValid()||Xn(e).isValid())?Ir({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function oi(e){return this.to(Xn(),e)}function si(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ai=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ci(){return this._locale}var li=1e3,di=60*li,ui=60*di,hi=3506328*ui;function pi(e,t){return(e%t+t)%t}function fi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function gi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=pi(t+(this._isUTC?0:this.utcOffset()*di),ui);break;case"minute":t=this._d.valueOf(),t-=pi(t,di);break;case"second":t=this._d.valueOf(),t-=pi(t,li)}return this._d.setTime(t),r.updateOffset(this,!0),this}function vi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:fi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ui-pi(t+(this._isUTC?0:this.utcOffset()*di),ui)-1;break;case"minute":t=this._d.valueOf(),t+=di-pi(t,di)-1;break;case"second":t=this._d.valueOf(),t+=li-pi(t,li)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function yi(){return this._d.valueOf()-6e4*(this._offset||0)}function _i(){return Math.floor(this.valueOf()/1e3)}function Ei(){return new Date(this.valueOf())}function bi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Si(){return this.isValid()?this.toISOString():null}function Ai(){return v(this)}function Ci(){return p({},g(this))}function Ti(){return g(this).overflow}function Ri(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ii(e,t){var n,i,o,s=this._eras||yn("en")._eras;for(n=0,i=s.length;n<i;++n)switch("string"===typeof s[n].since&&(o=r(s[n].since).startOf("day"),s[n].since=o.valueOf()),typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=r(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf()}return s}function xi(e,t,n){var r,i,o,s,a,c=this.eras();for(e=e.toUpperCase(),r=0,i=c.length;r<i;++r)if(o=c[r].name.toUpperCase(),s=c[r].abbr.toUpperCase(),a=c[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return c[r];break;case"NNNN":if(o===e)return c[r];break;case"NNNNN":if(a===e)return c[r]}else if([o,s,a].indexOf(e)>=0)return c[r]}function Oi(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Ni(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Di(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function ki(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Pi(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()}function Li(e){return a(this,"_erasNameRegex")||Wi.call(this),e?this._erasNameRegex:this._erasRegex}function Mi(e){return a(this,"_erasAbbrRegex")||Wi.call(this),e?this._erasAbbrRegex:this._erasRegex}function ji(e){return a(this,"_erasNarrowRegex")||Wi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ui(e,t){return t.erasAbbrRegex(e)}function Bi(e,t){return t.erasNameRegex(e)}function Fi(e,t){return t.erasNarrowRegex(e)}function Vi(e,t){return t._eraYearOrdinalRegex||ye}function Wi(){var e,t,n,r,i,o=[],s=[],a=[],c=[],l=this.eras();for(e=0,t=l.length;e<t;++e)n=xe(l[e].name),r=xe(l[e].abbr),i=xe(l[e].narrow),s.push(n),o.push(r),a.push(i),c.push(n),c.push(r),c.push(i);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function Hi(e,t){F(0,[e,e.length],0,t)}function zi(e){return Ji.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Gi(e){return Ji.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Yi(){return St(this.year(),1,4)}function Ki(){return St(this.isoWeekYear(),1,4)}function qi(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function Xi(){var e=this.localeData()._week;return St(this.weekYear(),e.dow,e.doy)}function Ji(e,t,n,r,i){var o;return null==e?wt(this,r,i).year:(t>(o=St(e,r,i))&&(t=o),Qi.call(this,e,t,n,r,i))}function Qi(e,t,n,r,i){var o=bt(e,t,n,r,i),s=_t(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Zi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),Te("N",Ui),Te("NN",Ui),Te("NNN",Ui),Te("NNNN",Bi),Te("NNNNN",Fi),ke(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?g(n).era=i:g(n).invalidEra=e})),Te("y",ye),Te("yy",ye),Te("yyy",ye),Te("yyyy",ye),Te("yo",Vi),ke(["y","yy","yyy","yyyy"],je),ke(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[je]=n._locale.eraYearOrdinalParse(e,i):t[je]=parseInt(e,10)})),F(0,["gg",2],0,(function(){return this.weekYear()%100})),F(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Hi("gggg","weekYear"),Hi("ggggg","weekYear"),Hi("GGGG","isoWeekYear"),Hi("GGGGG","isoWeekYear"),Te("G",_e),Te("g",_e),Te("GG",he,ce),Te("gg",he,ce),Te("GGGG",ge,de),Te("gggg",ge,de),Te("GGGGG",ve,ue),Te("ggggg",ve,ue),Pe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=Ne(e)})),Pe(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),F("Q",0,"Qo","quarter"),Te("Q",ae),ke("Q",(function(e,t){t[Ue]=3*(Ne(e)-1)})),F("D",["DD",2],"Do","date"),Te("D",he,Ae),Te("DD",he,ce),Te("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ke(["D","DD"],Be),ke("Do",(function(e,t){t[Be]=Ne(e.match(he)[0])}));var $i=Je("Date",!0);function eo(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}F("DDD",["DDDD",3],"DDDo","dayOfYear"),Te("DDD",me),Te("DDDD",le),ke(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Ne(e)})),F("m",["mm",2],0,"minute"),Te("m",he,Ce),Te("mm",he,ce),ke(["m","mm"],Ve);var to=Je("Minutes",!1);F("s",["ss",2],0,"second"),Te("s",he,Ce),Te("ss",he,ce),ke(["s","ss"],We);var no,ro,io=Je("Seconds",!1);for(F("S",0,0,(function(){return~~(this.millisecond()/100)})),F(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),F(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),F(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),F(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),F(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),F(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Te("S",me,ae),Te("SS",me,ce),Te("SSS",me,le),no="SSSS";no.length<=9;no+="S")Te(no,ye);function oo(e,t){t[He]=Ne(1e3*("0."+e))}for(no="S";no.length<=9;no+="S")ke(no,oo);function so(){return this._isUTC?"UTC":""}function ao(){return this._isUTC?"Coordinated Universal Time":""}ro=Je("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var co=w.prototype;function lo(e){return Xn(1e3*e)}function uo(){return Xn.apply(null,arguments).parseZone()}function ho(e){return e}co.add=Pr,co.calendar=Wr,co.clone=Hr,co.diff=Jr,co.endOf=vi,co.format=ti,co.from=ni,co.fromNow=ri,co.to=ii,co.toNow=oi,co.get=$e,co.invalidAt=Ti,co.isAfter=zr,co.isBefore=Gr,co.isBetween=Yr,co.isSame=Kr,co.isSameOrAfter=qr,co.isSameOrBefore=Xr,co.isValid=Ai,co.lang=ai,co.locale=si,co.localeData=ci,co.max=Qn,co.min=Jn,co.parsingFlags=Ci,co.set=et,co.startOf=gi,co.subtract=Lr,co.toArray=bi,co.toObject=wi,co.toDate=Ei,co.toISOString=$r,co.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(co[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),co.toJSON=Si,co.toString=Zr,co.unix=_i,co.valueOf=yi,co.creationData=Ri,co.eraName=Ni,co.eraNarrow=Di,co.eraAbbr=ki,co.eraYear=Pi,co.year=qe,co.isLeapYear=Xe,co.weekYear=zi,co.isoWeekYear=Gi,co.quarter=co.quarters=Zi,co.month=pt,co.daysInMonth=ft,co.week=co.weeks=It,co.isoWeek=co.isoWeeks=xt,co.weeksInYear=qi,co.weeksInWeekYear=Xi,co.isoWeeksInYear=Yi,co.isoWeeksInISOWeekYear=Ki,co.date=$i,co.day=co.days=zt,co.weekday=Gt,co.isoWeekday=Yt,co.dayOfYear=eo,co.hour=co.hours=rn,co.minute=co.minutes=to,co.second=co.seconds=io,co.millisecond=co.milliseconds=ro,co.utcOffset=mr,co.utc=vr,co.local=yr,co.parseZone=_r,co.hasAlignedHourOffset=Er,co.isDST=br,co.isLocal=Sr,co.isUtcOffset=Ar,co.isUtc=Cr,co.isUTC=Cr,co.zoneAbbr=so,co.zoneName=ao,co.dates=C("dates accessor is deprecated. Use date instead.",$i),co.months=C("months accessor is deprecated. Use month instead",pt),co.years=C("years accessor is deprecated. Use year instead",qe),co.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gr),co.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wr);var po=D.prototype;function fo(e,t,n,r){var i=yn(),o=f().set(r,t);return i[n](o,e)}function mo(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return fo(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fo(e,r,n,"month");return i}function go(e,t,n,r){"boolean"===typeof e?(d(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,d(t)&&(n=t,t=void 0),t=t||"");var i,o=yn(),s=e?o._week.dow:0,a=[];if(null!=n)return fo(t,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=fo(t,(i+s)%7,r,"day");return a}function vo(e,t){return mo(e,t,"months")}function yo(e,t){return mo(e,t,"monthsShort")}function _o(e,t,n){return go(e,t,n,"weekdays")}function Eo(e,t,n){return go(e,t,n,"weekdaysShort")}function bo(e,t,n){return go(e,t,n,"weekdaysMin")}po.calendar=P,po.longDateFormat=Y,po.invalidDate=q,po.ordinal=Q,po.preparse=ho,po.postformat=ho,po.relativeTime=$,po.pastFuture=ee,po.set=O,po.eras=Ii,po.erasParse=xi,po.erasConvertYear=Oi,po.erasAbbrRegex=Mi,po.erasNameRegex=Li,po.erasNarrowRegex=ji,po.months=ct,po.monthsShort=lt,po.monthsParse=ut,po.monthsRegex=gt,po.monthsShortRegex=mt,po.week=At,po.firstDayOfYear=Rt,po.firstDayOfWeek=Tt,po.weekdays=Bt,po.weekdaysMin=Vt,po.weekdaysShort=Ft,po.weekdaysParse=Ht,po.weekdaysRegex=Kt,po.weekdaysShortRegex=qt,po.weekdaysMinRegex=Xt,po.isPM=tn,po.meridiem=on,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Ne(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=C("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=C("moment.langData is deprecated. Use moment.localeData instead.",yn);var wo=Math.abs;function So(){var e=this._data;return this._milliseconds=wo(this._milliseconds),this._days=wo(this._days),this._months=wo(this._months),e.milliseconds=wo(e.milliseconds),e.seconds=wo(e.seconds),e.minutes=wo(e.minutes),e.hours=wo(e.hours),e.months=wo(e.months),e.years=wo(e.years),this}function Ao(e,t,n,r){var i=Ir(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Co(e,t){return Ao(this,e,t,1)}function To(e,t){return Ao(this,e,t,-1)}function Ro(e){return e<0?Math.floor(e):Math.ceil(e)}function Io(){var e,t,n,r,i,o=this._milliseconds,s=this._days,a=this._months,c=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*Ro(Oo(a)+s),s=0,a=0),c.milliseconds=o%1e3,e=Oe(o/1e3),c.seconds=e%60,t=Oe(e/60),c.minutes=t%60,n=Oe(t/60),c.hours=n%24,s+=Oe(n/24),a+=i=Oe(xo(s)),s-=Ro(Oo(i)),r=Oe(a/12),a%=12,c.days=s,c.months=a,c.years=r,this}function xo(e){return 4800*e/146097}function Oo(e){return 146097*e/4800}function No(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+xo(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Oo(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Do(e){return function(){return this.as(e)}}var ko=Do("ms"),Po=Do("s"),Lo=Do("m"),Mo=Do("h"),jo=Do("d"),Uo=Do("w"),Bo=Do("M"),Fo=Do("Q"),Vo=Do("y"),Wo=ko;function Ho(){return Ir(this)}function zo(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Go(e){return function(){return this.isValid()?this._data[e]:NaN}}var Yo=Go("milliseconds"),Ko=Go("seconds"),qo=Go("minutes"),Xo=Go("hours"),Jo=Go("days"),Qo=Go("months"),Zo=Go("years");function $o(){return Oe(this.days()/7)}var es=Math.round,ts={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ns(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function rs(e,t,n,r){var i=Ir(e).abs(),o=es(i.as("s")),s=es(i.as("m")),a=es(i.as("h")),c=es(i.as("d")),l=es(i.as("M")),d=es(i.as("w")),u=es(i.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||l<=1&&["M"]||l<n.M&&["MM",l]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=r,ns.apply(null,h)}function is(e){return void 0===e?es:"function"===typeof e&&(es=e,!0)}function os(e,t){return void 0!==ts[e]&&(void 0===t?ts[e]:(ts[e]=t,"s"===e&&(ts.ss=t-1),!0))}function ss(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=ts;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(o=Object.assign({},ts,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=rs(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var as=Math.abs;function cs(e){return(e>0)-(e<0)||+e}function ls(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,s,a,c=as(this._milliseconds)/1e3,l=as(this._days),d=as(this._months),u=this.asSeconds();return u?(e=Oe(c/60),t=Oe(e/60),c%=60,e%=60,n=Oe(d/12),d%=12,r=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=u<0?"-":"",o=cs(this._months)!==cs(u)?"-":"",s=cs(this._days)!==cs(u)?"-":"",a=cs(this._milliseconds)!==cs(u)?"-":"",i+"P"+(n?o+n+"Y":"")+(d?o+d+"M":"")+(l?s+l+"D":"")+(t||e||c?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(c?a+r+"S":"")):"P0D"}var ds=sr.prototype;return ds.isValid=ir,ds.abs=So,ds.add=Co,ds.subtract=To,ds.as=No,ds.asMilliseconds=ko,ds.asSeconds=Po,ds.asMinutes=Lo,ds.asHours=Mo,ds.asDays=jo,ds.asWeeks=Uo,ds.asMonths=Bo,ds.asQuarters=Fo,ds.asYears=Vo,ds.valueOf=Wo,ds._bubble=Io,ds.clone=Ho,ds.get=zo,ds.milliseconds=Yo,ds.seconds=Ko,ds.minutes=qo,ds.hours=Xo,ds.days=Jo,ds.weeks=$o,ds.months=Qo,ds.years=Zo,ds.humanize=ss,ds.toISOString=ls,ds.toString=ls,ds.toJSON=ls,ds.locale=si,ds.localeData=ci,ds.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ls),ds.lang=ai,F("X",0,0,"unix"),F("x",0,0,"valueOf"),Te("x",_e),Te("X",we),ke("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ke("x",(function(e,t,n){n._d=new Date(Ne(e))})),r.version="2.30.1",i(Xn),r.fn=co,r.min=$n,r.max=er,r.now=tr,r.utc=f,r.unix=lo,r.months=vo,r.isDate=u,r.locale=mn,r.invalid=y,r.duration=Ir,r.isMoment=S,r.weekdays=_o,r.parseZone=uo,r.localeData=yn,r.isDuration=ar,r.monthsShort=yo,r.weekdaysMin=bo,r.defineLocale=gn,r.updateLocale=vn,r.locales=_n,r.weekdaysShort=Eo,r.normalizeUnits=ne,r.relativeTimeRounding=is,r.relativeTimeThreshold=os,r.calendarFormat=Vr,r.prototype=co,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},6962:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!==typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!==r&&undefined!==r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),s=r(t[2]);null===o||null===s||o in i||(i[o]=s)}return i}},4463:(e,t,n)=>{"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),R=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,j=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var B=!1;function F(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case A:return"StrictMode";case x:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function oe(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ae=null;function Ce(e){if(e=_i(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Te(e){Se?Ae?Ae.push(e):Ae=[e]:Se=e}function Re(){if(Se){var e=Se,t=Ae;if(Ae=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function xe(){}var Oe=!1;function Ne(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ie(e,t,n)}finally{Oe=!1,(null!==Se||null!==Ae)&&(xe(),Re())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var ke=!1;if(d)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(de){ke=!1}function Le(e,t,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(d){this.onError(d)}}var Me=!1,je=null,Ue=!1,Be=null,Fe={onError:function(e){Me=!0,je=e}};function Ve(e,t,n,r,i,o,s,a,c){Me=!1,je=null,Le.apply(Fe,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(We(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ze(i),e;if(s===r)return ze(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ut(a):0!==(o&=s)&&(r=ut(o))}else 0!==(s=n&~i)?r=ut(s):0!==o&&(r=ut(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,St,At,Ct,Tt=!1,Rt=[],It=null,xt=null,Ot=null,Nt=new Map,Dt=new Map,kt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function Bt(e,t,n){Ut(e)&&n.delete(t)}function Ft(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==xt&&Ut(xt)&&(xt=null),null!==Ot&&Ut(Ot)&&(Ot=null),Nt.forEach(Bt),Dt.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Wt(e){function t(t){return Vt(t,e)}if(0<Rt.length){Vt(Rt[0],e);for(var n=1;n<Rt.length;n++){var r=Rt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==xt&&Vt(xt,e),null!==Ot&&Vt(Ot,e),Nt.forEach(t),Dt.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)jt(n),null===n.blockedOn&&kt.shift()}var Ht=E.ReactCurrentBatchConfig,zt=!0;function Gt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function Yt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function Kt(e,t,n,r){if(zt){var i=Xt(e,t,n,r);if(null===i)zr(e,t,r,qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return xt=Mt(xt,e,t,n,r,i),!0;case"mouseover":return Ot=Mt(Ot,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Mt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dt.set(o,Mt(Dt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&bt(o),null===(o=Xt(e,t,n,r))&&zr(e,t,r,qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=yi(e=be(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(ln),un=j({},ln,{view:0,detail:0}),hn=on(un),pn=j({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(j({},pn,{dataTransfer:0})),gn=on(j({},un,{relatedTarget:0})),vn=on(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(yn),En=on(j({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return An}var Tn=j({},un,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=on(Tn),In=on(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=on(j({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=on(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Nn),kn=[9,13,27,32],Pn=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var Mn=d&&"TextEvent"in window&&!Ln,jn=d&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Bn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Yr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Kn=null;function qn(e){Ur(e,0)}function Xn(e){if(K(Ei(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(d){var Zn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Kn=Yn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Gn(t,Kn,e,be(e)),Ne(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function or(e,t){if("click"===e)return Xn(t)}function sr(e,t){if("input"===e||"change"===e)return Xn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=dr(n,o);var s=dr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Yr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Sr={},Ar={};function Cr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return Sr[e]=n[t];return e}d&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Cr("animationend"),Rr=Cr("animationiteration"),Ir=Cr("animationstart"),xr=Cr("transitionend"),Or=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Or.set(e,t),c(t,[e])}for(var kr=0;kr<Nr.length;kr++){var Pr=Nr[kr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Rr,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(xr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,l){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(o(198));var d=je;Me=!1,je=null,Ue||(Ue=!0,Be=d)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;jr(i,a,l),o=c}else for(s=0;s<r.length;s++){if(c=(a=r[s]).instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;jr(i,a,l),o=c}}}if(Ue)throw e=Be,Ue=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Fr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Yt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(c=s.tag)||6===c){r=o=s;continue e}a=a.parentNode}}r=r.return}Ne((function(){var r=o,i=be(n),s=[];e:{var a=Or.get(e);if(void 0!==a){var c=dn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Rn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case Tr:case Rr:case Ir:c=vn;break;case xr:c=On;break;case"scroll":c=hn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=In}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==a?a+"Capture":null:a;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=De(f,h))&&d.push(Gr(f,m,p)))),u)break;f=f.return}0<d.length&&(a=new c(a,l,null,n,i),s.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Ee||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[fi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(u=We(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=In,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==c?a:Ei(c),p=null==l?a:Ei(l),(a=new d(m,f+"leave",c,n,i)).target=u,a.relatedTarget=p,m=null,yi(i)===r&&((d=new d(h,f+"enter",l,n,i)).target=p,d.relatedTarget=u,m=d),u=m,c&&l)e:{for(h=l,f=0,p=d=c;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)d=Kr(d),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kr(d),h=Kr(h)}d=null}else d=null;null!==c&&qr(s,a,c,d,!1),null!==l&&null!==u&&qr(s,u,l,d,!0)}if("select"===(c=(a=r?Ei(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Jn;else if(zn(a))if(Qn)g=sr;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?Ei(r):window,e){case"focusin":(zn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Er(s,n,i)}var y;if(Pn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Wn?Fn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Wn&&(y=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,Wn=!0)),0<(v=Yr(r,_)).length&&(_=new En(_,e,null,n,i),s.push({event:_,listeners:v}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Un);case"textInput":return(e=t.data)===Un&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Pn&&Fn(e,t)?(e=en(),$t=Zt=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=De(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=De(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=De(n,o))&&s.unshift(Gr(n,c,a)):i||null!=(c=De(n,o))&&s.push(Gr(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,fi="__reactContainer$"+ui,mi="__reactEvents$"+ui,gi="__reactListeners$"+ui,vi="__reactHandles$"+ui;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function bi(e){return e[pi]||null}var wi=[],Si=-1;function Ai(e){return{current:e}}function Ci(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Ti(e,t){Si++,wi[Si]=e.current,e.current=t}var Ri={},Ii=Ai(Ri),xi=Ai(!1),Oi=Ri;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ri;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ki(){Ci(xi),Ci(Ii)}function Pi(e,t,n){if(Ii.current!==Ri)throw Error(o(168));Ti(Ii,t),Ti(xi,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ri,Oi=Ii.current,Ti(Ii,e),Ti(xi,xi.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ci(xi),Ci(Ii),Ti(Ii,e)):Ci(xi),Ti(xi,n)}var Ui=null,Bi=!1,Fi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Wi(){if(!Fi&&null!==Ui){Fi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Bi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke($e,Wi),i}finally{_t=t,Fi=!1}}return null}var Hi=[],zi=0,Gi=null,Yi=0,Ki=[],qi=0,Xi=null,Ji=1,Qi="";function Zi(e,t){Hi[zi++]=Yi,Hi[zi++]=Gi,Gi=e,Yi=t}function $i(e,t,n){Ki[qi++]=Ji,Ki[qi++]=Qi,Ki[qi++]=Xi,Xi=e;var r=Ji;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ji=1<<32-st(t)+i|n<<i|r,Qi=o+e}else Ji=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function to(e){for(;e===Gi;)Gi=Hi[--zi],Hi[zi]=null,Yi=Hi[--zi],Hi[zi]=null;for(;e===Xi;)Xi=Ki[--qi],Ki[qi]=null,Qi=Ki[--qi],Ki[qi]=null,Ji=Ki[--qi],Ki[qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Nl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Ji,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(co(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(co(e))throw po(),Error(o(418));for(;t;)so(e,t),t=li(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=li(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=E.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _o(e){return(0,e._init)(e._payload)}function Eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=kl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===S?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&_o(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case w:return(t=Ul(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?l(e,t,n,r):null;case w:return n.key===i?d(e,t,n,r):null;case D:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:u(e,t,n,r,null);yo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return u(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,c){for(var l=null,d=null,u=o,m=o=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(i,u,a[m],c);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(i,u),o=s(v,o,m),null===d?l=v:d.sibling=v,d=v,u=g}if(m===a.length)return n(i,u),io&&Zi(i,m),l;if(null===u){for(;m<a.length;m++)null!==(u=h(i,a[m],c))&&(o=s(u,o,m),null===d?l=u:d.sibling=u,d=u);return io&&Zi(i,m),l}for(u=r(i,u);m<a.length;m++)null!==(g=f(u,i,m,a[m],c))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),o=s(g,o,m),null===d?l=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(i,e)})),io&&Zi(i,m),l}function g(i,a,c,l){var d=L(c);if("function"!==typeof d)throw Error(o(150));if(null==(c=d.call(c)))throw Error(o(151));for(var u=d=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=p(i,m,y.value,l);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),a=s(_,a,g),null===u?d=_:u.sibling=_,u=_,m=v}if(y.done)return n(i,m),io&&Zi(i,g),d;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=h(i,y.value,l))&&(a=s(y,a,g),null===u?d=y:u.sibling=y,u=y);return io&&Zi(i,g),d}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=f(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===u?d=y:u.sibling=y,u=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Zi(i,g),d}return function e(r,o,s,c){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case b:e:{for(var l=s.key,d=o;null!==d;){if(d.key===l){if((l=s.type)===S){if(7===d.tag){n(r,d.sibling),(o=i(d,s.props.children)).return=r,r=o;break e}}else if(d.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&_o(l)===d.type){n(r,d.sibling),(o=i(d,s.props)).ref=vo(r,d,s),o.return=r,r=o;break e}n(r,d);break}t(r,d),d=d.sibling}s.type===S?((o=Ll(s.props.children,r.mode,c,s.key)).return=r,r=o):((c=Pl(s.type,s.key,s.props,null,r.mode,c)).ref=vo(r,o,s),c.return=r,r=c)}return a(r);case w:e:{for(d=s.key;null!==o;){if(o.key===d){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Ul(s,r.mode,c)).return=r,r=o}return a(r);case D:return e(r,o,(d=s._init)(s._payload),c)}if(te(s))return m(r,o,s,c);if(L(s))return g(r,o,s,c);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=jl(s,r.mode,c)).return=r,r=o),a(r)):n(r,o)}}var bo=Eo(!0),wo=Eo(!1),So=Ai(null),Ao=null,Co=null,To=null;function Ro(){To=Co=Ao=null}function Io(e){var t=So.current;Ci(So),e._currentValue=t}function xo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Oo(e,t){Ao=e,To=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===Ao)throw Error(o(308));Co=e,Ao.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Do=null;function ko(e){null===Do?Do=[e]:Do.push(e)}function Po(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ko(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ic)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,ko(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Wo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===a?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=c))}if(null!==o){var u=i.baseState;for(s=0,d=l=c=null,a=o;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=j({},u,h);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(l=d=p,c=u):d=d.next=p,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(c=u),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Mc|=s,e.lanes=s,e.memoizedState=u}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Yo=Ai(Go),Ko=Ai(Go),qo=Ai(Go);function Xo(e){if(e===Go)throw Error(o(174));return e}function Jo(e,t){switch(Ti(qo,t),Ti(Ko,e),Ti(Yo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Yo),Ti(Yo,t)}function Qo(){Ci(Yo),Ci(Ko),Ci(qo)}function Zo(e){Xo(qo.current);var t=Xo(Yo.current),n=ce(t,e.type);t!==n&&(Ti(Ko,e),Ti(Yo,n))}function $o(e){Ko.current===e&&(Ci(Yo),Ci(Ko))}var es=Ai(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=E.ReactCurrentDispatcher,os=E.ReactCurrentBatchConfig,ss=0,as=null,cs=null,ls=null,ds=!1,us=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?$s:ea,e=n(r,i),us){s=0;do{if(us=!1,hs=0,25<=s)throw Error(o(301));s+=1,ls=cs=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(us)}if(is.current=Zs,t=null!==cs&&null!==cs.next,ss=0,ls=cs=as=null,ds=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?as.memoizedState=ls=e:ls=ls.next=e,ls}function _s(){if(null===cs){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=cs.next;var t=null===ls?as.memoizedState:ls.next;if(null!==t)ls=t,cs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(cs=e).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===ls?as.memoizedState=ls=e:ls=ls.next=e}return ls}function Es(e,t){return"function"===typeof t?t(e):t}function bs(e){var t=_s(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=cs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var c=a=null,l=null,d=s;do{var u=d.lane;if((ss&u)===u)null!==l&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===l?(c=l=h,a=r):l=l.next=h,as.lanes|=u,Mc|=u}d=d.next}while(null!==d&&d!==s);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Mc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=_s(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(_a=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function As(e,t){var n=as,r=_s(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,_a=!0),r=r.queue,Ms(Rs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Ns(9,Ts.bind(null,n,r,i,t),void 0,null),null===xc)throw Error(o(349));0!==(30&ss)||Cs(n,t,i)}return i}function Cs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ts(e,t,n,r){t.value=n,t.getSnapshot=r,Is(t)&&xs(e)}function Rs(e,t,n){return n((function(){Is(t)&&xs(e)}))}function Is(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function xs(e){var t=Lo(e,1);null!==t&&nl(t,e,1,-1)}function Os(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:e},t.queue=e,e=e.dispatch=qs.bind(null,as,e),[t.memoizedState,e]}function Ns(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ds(){return _s().memoizedState}function ks(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ns(1|t,n,void 0,void 0===r?null:r)}function Ps(e,t,n,r){var i=_s();r=void 0===r?null:r;var o=void 0;if(null!==cs){var s=cs.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ns(t,n,o,r))}as.flags|=e,i.memoizedState=Ns(1|t,n,o,r)}function Ls(e,t){return ks(8390656,8,e,t)}function Ms(e,t){return Ps(2048,8,e,t)}function js(e,t){return Ps(4,2,e,t)}function Us(e,t){return Ps(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4,4,Bs.bind(null,t,e),n)}function Vs(){}function Ws(e,t){var n=_s();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=_s();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Mc|=n,e.baseState=!0),t)}function Gs(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{_t=n,os.transition=r}}function Ys(){return _s().memoizedState}function Ks(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xs(e))Js(t,n);else if(null!==(n=Po(e,t,n,r))){nl(n,e,r,el()),Qs(n,t,r)}}function qs(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xs(e))Js(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var c=t.interleaved;return null===c?(i.next=i,ko(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Po(e,t,i,r))&&(nl(n,e,r,i=el()),Qs(n,t,r))}}function Xs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Js(e,t){us=ds=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Zs={readContext:No,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},$s={readContext:No,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:Ls,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ks(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ks(4194308,4,e,t)},useInsertionEffect:function(e,t){return ks(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ks.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Os,useDebugValue:Vs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Os(!1),t=e[0];return e=Gs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===xc)throw Error(o(349));0!==(30&ss)||Cs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ls(Rs.bind(null,r,s,e),[e]),r.flags|=2048,Ns(9,Ts.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=xc.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:No,useCallback:Ws,useContext:No,useEffect:Ms,useImperativeHandle:Fs,useInsertionEffect:js,useLayoutEffect:Us,useMemo:Hs,useReducer:bs,useRef:Ds,useState:function(){return bs(Es)},useDebugValue:Vs,useDeferredValue:function(e){return zs(_s(),cs.memoizedState,e)},useTransition:function(){return[bs(Es)[0],_s().memoizedState]},useMutableSource:Ss,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1},ta={readContext:No,useCallback:Ws,useContext:No,useEffect:Ms,useImperativeHandle:Fs,useInsertionEffect:js,useLayoutEffect:Us,useMemo:Hs,useReducer:ws,useRef:Ds,useState:function(){return ws(Es)},useDebugValue:Vs,useDeferredValue:function(e){var t=_s();return null===cs?t.memoizedState=e:zs(t,cs.memoizedState,e)},useTransition:function(){return[ws(Es)[0],_s().memoizedState]},useMutableSource:Ss,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=Bo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Fo(e,o,i))&&(nl(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=Bo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Fo(e,o,i))&&(nl(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Bo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fo(e,i,r))&&(nl(t,e,r,n),Vo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function sa(e,t,n){var r=!1,i=Ri,o=t.contextType;return"object"===typeof o&&null!==o?o=No(o):(i=Di(t)?Oi:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ri),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=No(o):(o=Di(t)?Oi:Ii.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Ho(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function la(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zc||(zc=!0,Gc=r),ua(0,t)},n}function fa(e,t,n){(n=Bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ua(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ua(0,t),"function"!==typeof r&&(null===Yc?Yc=new Set([this]):Yc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Fo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=E.ReactCurrentOwner,_a=!1;function Ea(e,t,n,r){t.child=null===e?wo(t,null,n,r):bo(t,e.child,n,r)}function ba(e,t,n,r,i){n=n.render;var o=t.ref;return Oo(t,i),r=gs(e,t,n,r,o,i),n=vs(),null===e||_a?(io&&n&&eo(t),t.flags|=1,Ea(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,za(e,t,i))}function wa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Dl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(s,r)&&e.ref===t.ref)return za(e,t,i)}return t.flags|=1,(e=kl(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(cr(o,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,za(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ta(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(kc,Dc),Dc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(kc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(kc,Dc),Dc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(kc,Dc),Dc|=r;return Ea(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var o=Di(n)?Oi:Ii.current;return o=Ni(t,o),Oo(t,i),n=gs(e,t,n,r,o,i),r=vs(),null===e||_a?(io&&r&&eo(t),t.flags|=1,Ea(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,za(e,t,i))}function Ra(e,t,n,r,i){if(Di(n)){var o=!0;Mi(t)}else o=!1;if(Oo(t,i),null===t.stateNode)Ha(e,t),sa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=No(l):l=Ni(t,l=Di(n)?Oi:Ii.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==l)&&aa(t,s,r,l),Mo=!1;var h=t.memoizedState;s.state=h,Ho(t,r,s,i),c=t.memoizedState,a!==r||h!==c||xi.current||Mo?("function"===typeof d&&(ra(t,n,d,r),c=t.memoizedState),(a=Mo||oa(t,n,a,r,h,c,l))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:na(t.type,a),s.props=l,u=t.pendingProps,h=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=No(c):c=Ni(t,c=Di(n)?Oi:Ii.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==u||h!==c)&&aa(t,s,r,c),Mo=!1,h=t.memoizedState,s.state=h,Ho(t,r,s,i);var f=t.memoizedState;a!==u||h!==f||xi.current||Mo?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(l=Mo||oa(t,n,l,r,h,f,c)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,o,i)}function Ia(e,t,n,r,i,o){Ca(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&ji(t,n,!1),za(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=bo(t,e.child,null,o),t.child=bo(t,null,a,o)):Ea(e,t,a,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function xa(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Jo(e,t.containerInfo)}function Oa(e,t,n,r,i){return fo(),mo(i),t.flags|=256,Ea(e,t,n,r),t.child}var Na,Da,ka,Pa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(es,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ml(c,i,0,null),e=Ll(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,c));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=da(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(s=Ll(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&bo(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Ba(e,t,a,r=da(s=Error(o(419)),r,void 0))}if(c=0!==(a&e.childLanes),_a||c){if(null!==(r=xc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Lo(e,i),nl(r,e,i,-1))}return ml(),Ba(e,t,a,r=da(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rl.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[qi++]=Ji,Ki[qi++]=Qi,Ki[qi++]=Xi,Ji=e.id,Qi=e.overflow,Xi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,s,n);if(a){a=i.fallback,c=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=kl(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=kl(r,a):(a=Ll(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Ma(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=kl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&mo(r),bo(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xo(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Wa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ea(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fa(e,n,t);else if(19===e.tag)Fa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function za(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=kl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=kl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Di(t.type)&&ki(),Ya(t),null;case 3:return r=t.stateNode,Qo(),Ci(xi),Ci(Ii),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),Da(e,t),Ya(t),null;case 5:$o(t);var i=Xo(qo.current);if(n=t.type,null!==e&&null!=t.stateNode)ka(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ya(t),null}if(e=Xo(Yo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":J(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":ie(r,s),Br("invalid",r)}for(var c in ye(n,s),i=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Br("scroll",r)}switch(n){case"input":Y(r),$(r,s,!0);break;case"textarea":Y(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[hi]=t,e[pi]=r,Na(e,t,!1,!1),t.stateNode=e;e:{switch(c=_e(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":J(e,r),i=X(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(s in ye(n,i),l=i)if(l.hasOwnProperty(s)){var d=l[s];"style"===s?ge(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Br("scroll",e):null!=d&&_(e,s,d,c))}switch(n){case"input":Y(e),$(e,r,!1);break;case"textarea":Y(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Xo(qo.current),Xo(Yo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ya(t),null;case 13:if(Ci(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),s=!1}else null!==oo&&(sl(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Pc&&(Pc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return Qo(),Da(e,t),null===e&&Wr(t.stateNode.containerInfo),Ya(t),null;case 10:return Io(t.type._context),Ya(t),null;case 19:if(Ci(es),null===(s=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(c=s.rendering))if(r)Ga(s,!1);else{if(0!==Pc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ts(e))){for(t.flags|=128,Ga(s,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Wc&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!io)return Ya(t),null}else 2*Qe()-s.renderingStartTime>Wc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=es.current,Ti(es,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return ul(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function qa(e,t){switch(to(t),t.tag){case 1:return Di(t.type)&&ki(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ci(xi),Ci(Ii),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Ci(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(es),null;case 4:return Qo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return ul(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},ka=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xo(Yo.current);var o,s=null;switch(n){case"input":i=X(e,i),r=X(e,r),s=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in ye(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(c=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(null!=l||null!=c))if("style"===d)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&Br("scroll",e),s||c===l||(s=[])):(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Ja=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Za=null;function $a(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Al(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Al(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ec(t,n,o)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var dc=null,uc=!1;function hc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||$a(n,t);case 6:var r=dc,i=uc;dc=null,hc(e,t,n),uc=i,null!==(dc=r)&&(uc?(e=dc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dc.removeChild(n.stateNode));break;case 18:null!==dc&&(uc?(e=dc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Wt(e)):ci(dc,n.stateNode));break;case 4:r=dc,i=uc,dc=n.stateNode.containerInfo,uc=!0,hc(e,t,n),dc=r,uc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&ec(n,t,s),i=i.next}while(i!==r)}hc(e,t,n);break;case 1:if(!Ja&&($a(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Al(n,t,a)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,hc(e,t,n),Ja=r):hc(e,t,n);break;default:hc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:dc=c.stateNode,uc=!1;break e;case 3:case 4:dc=c.stateNode.containerInfo,uc=!0;break e}c=c.return}if(null===dc)throw Error(o(160));pc(s,a,i),dc=null,uc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(d){Al(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(g){Al(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Al(e,e.return,g)}}break;case 1:mc(t,e),vc(e),512&r&&null!==n&&$a(n,n.return);break;case 5:if(mc(t,e),vc(e),512&r&&null!==n&&$a(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Al(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===s.type&&null!=s.name&&Q(i,s),_e(c,a);var d=_e(c,s);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):_(i,u,h,d)}switch(c){case"input":Z(i,s);break;case"textarea":oe(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){Al(e,e.return,g)}}break;case 6:if(mc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Al(e,e.return,g)}}break;case 3:if(mc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Al(e,e.return,g)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vc=Qe())),4&r&&fc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(d=Ja)||u,mc(t,e),Ja=d):mc(t,e),vc(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Za=e,u=e.child;null!==u;){for(h=Za=u;null!==Za;){switch(f=(p=Za).child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:$a(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Al(r,n,g)}}break;case 5:$a(p,p.return);break;case 22:if(null!==p.memoizedState){bc(h);continue}}null!==f?(f.return=p,Za=f):bc(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=h.stateNode,a=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Al(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Al(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mc(t,e),vc(e),4&r&&fc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lc(e,ac(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cc(e,ac(e),s);break;default:throw Error(o(161))}}catch(a){Al(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Za=e,_c(e,t,n)}function _c(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Xa;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=Xa;var l=Ja;if(Xa=s,(Ja=c)&&!l)for(Za=i;null!==Za;)c=(s=Za).child,22===s.tag&&null!==s.memoizedState?wc(i):null!==c?(c.return=s,Za=c):wc(i);for(;null!==o;)Za=o,_c(o,t,n),o=o.sibling;Za=i,Xa=a,Ja=l}Ec(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):Ec(e)}}function Ec(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&zo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&ic(t)}catch(p){Al(t,t.return,p)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function bc(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function wc(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Al(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Al(t,i,c)}}var o=t.return;try{ic(t)}catch(c){Al(t,o,c)}break;case 5:var s=t.return;try{ic(t)}catch(c){Al(t,s,c)}}}catch(c){Al(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sc,Ac=Math.ceil,Cc=E.ReactCurrentDispatcher,Tc=E.ReactCurrentOwner,Rc=E.ReactCurrentBatchConfig,Ic=0,xc=null,Oc=null,Nc=0,Dc=0,kc=Ai(0),Pc=0,Lc=null,Mc=0,jc=0,Uc=0,Bc=null,Fc=null,Vc=0,Wc=1/0,Hc=null,zc=!1,Gc=null,Yc=null,Kc=!1,qc=null,Xc=0,Jc=0,Qc=null,Zc=-1,$c=0;function el(){return 0!==(6&Ic)?Qe():-1!==Zc?Zc:Zc=Qe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Ic)&&0!==Nc?Nc&-Nc:null!==go.transition?(0===$c&&($c=mt()),$c):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nl(e,t,n,r){if(50<Jc)throw Jc=0,Qc=null,Error(o(185));vt(e,n,r),0!==(2&Ic)&&e===xc||(e===xc&&(0===(2&Ic)&&(jc|=n),4===Pc&&al(e,Nc)),rl(e,r),1===n&&0===Ic&&0===(1&t.mode)&&(Wc=Qe()+500,Bi&&Wi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=i[s];-1===c?0!==(a&n)&&0===(a&r)||(i[s]=pt(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===xc?Nc:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Bi=!0,Vi(e)}(cl.bind(null,e)):Vi(cl.bind(null,e)),si((function(){0===(6&Ic)&&Wi()})),n=null;else{switch(Et(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=xl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Zc=-1,$c=0,0!==(6&Ic))throw Error(o(327));var n=e.callbackNode;if(wl()&&e.callbackNode!==n)return null;var r=ht(e,e===xc?Nc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=Ic;Ic|=2;var s=fl();for(xc===e&&Nc===t||(Hc=null,Wc=Qe()+500,hl(e,t));;)try{yl();break}catch(c){pl(e,c)}Ro(),Cc.current=s,Ic=i,null!==Oc?t=0:(xc=null,Nc=0,t=Pc)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ol(e,i))),1===t)throw n=Lc,hl(e,0),al(e,r),rl(e,Qe()),n;if(6===t)al(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&(0!==(s=ft(e))&&(r=s,t=ol(e,s))),1===t))throw n=Lc,hl(e,0),al(e,r),rl(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:bl(e,Fc,Hc);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=Vc+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bl.bind(null,e,Fc,Hc),t);break}bl(e,Fc,Hc);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ac(r/1960))-r)){e.timeoutHandle=ri(bl.bind(null,e,Fc,Hc),r);break}bl(e,Fc,Hc);break;default:throw Error(o(329))}}}return rl(e,Qe()),e.callbackNode===n?il.bind(null,e):null}function ol(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Fc,Fc=n,null!==t&&sl(t)),e}function sl(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function al(e,t){for(t&=~Uc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&Ic))throw Error(o(327));wl();var t=ht(e,0);if(0===(1&t))return rl(e,Qe()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Lc,hl(e,0),al(e,t),rl(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bl(e,Fc,Hc),rl(e,Qe()),null}function ll(e,t){var n=Ic;Ic|=1;try{return e(t)}finally{0===(Ic=n)&&(Wc=Qe()+500,Bi&&Wi())}}function dl(e){null!==qc&&0===qc.tag&&0===(6&Ic)&&wl();var t=Ic;Ic|=1;var n=Rc.transition,r=_t;try{if(Rc.transition=null,_t=1,e)return e()}finally{_t=r,Rc.transition=n,0===(6&(Ic=t))&&Wi()}}function ul(){Dc=kc.current,Ci(kc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Oc)for(n=Oc.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ki();break;case 3:Qo(),Ci(xi),Ci(Ii),rs();break;case 5:$o(r);break;case 4:Qo();break;case 13:case 19:Ci(es);break;case 10:Io(r.type._context);break;case 22:case 23:ul()}n=n.return}if(xc=e,Oc=e=kl(e.current,null),Nc=Dc=t,Pc=0,Lc=null,Uc=jc=Mc=0,Fc=Bc=null,null!==Do){for(t=0;t<Do.length;t++)if(null!==(r=(n=Do[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Do=null}return e}function pl(e,t){for(;;){var n=Oc;try{if(Ro(),is.current=Zs,ds){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ds=!1}if(ss=0,ls=cs=as=null,us=!1,hs=0,Tc.current=null,null===n||null===n.return){Pc=1,Lc=t,Oc=null;break}e:{var s=e,a=n.return,c=n,l=t;if(t=Nc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var d=l,u=c,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,c,0,t),1&f.mode&&ma(s,d,t),l=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ma(s,d,t),ml();break e}l=Error(o(426))}else if(io&&1&c.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,c,0,t),mo(la(l,c));break e}}s=l=la(l,c),4!==Pc&&(Pc=2),null===Bc?Bc=[s]:Bc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Wo(s,pa(0,l,t));break e;case 1:c=l;var y=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yc||!Yc.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,Wo(s,fa(s,c,t));break e}}s=s.return}while(null!==s)}El(n)}catch(E){t=E,Oc===n&&null!==n&&(Oc=n=n.return);continue}break}}function fl(){var e=Cc.current;return Cc.current=Zs,null===e?Zs:e}function ml(){0!==Pc&&3!==Pc&&2!==Pc||(Pc=4),null===xc||0===(268435455&Mc)&&0===(268435455&jc)||al(xc,Nc)}function gl(e,t){var n=Ic;Ic|=2;var r=fl();for(xc===e&&Nc===t||(Hc=null,hl(e,t));;)try{vl();break}catch(i){pl(e,i)}if(Ro(),Ic=n,Cc.current=r,null!==Oc)throw Error(o(261));return xc=null,Nc=0,Pc}function vl(){for(;null!==Oc;)_l(Oc)}function yl(){for(;null!==Oc&&!Xe();)_l(Oc)}function _l(e){var t=Sc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?El(e):Oc=t,Tc.current=null}function El(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Dc)))return void(Oc=n)}else{if(null!==(n=qa(n,t)))return n.flags&=32767,void(Oc=n);if(null===e)return Pc=6,void(Oc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Oc=t);Oc=t=e}while(null!==t);0===Pc&&(Pc=5)}function bl(e,t,n){var r=_t,i=Rc.transition;try{Rc.transition=null,_t=1,function(e,t,n,r){do{wl()}while(null!==qc);if(0!==(6&Ic))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===xc&&(Oc=xc=null,Nc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kc||(Kc=!0,xl(tt,(function(){return wl(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Rc.transition,Rc.transition=null;var a=_t;_t=1;var c=Ic;Ic|=4,Tc.current=null,function(e,t){if(ei=zt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(b){n=null;break e}var a=0,c=-1,l=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(c=a+i),h!==s||0!==r&&3!==h.nodeType||(l=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===i&&(c=a),p===s&&++u===r&&(l=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(o(163))}}catch(b){Al(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=tc,tc=!1}(e,n),gc(n,e),fr(ti),zt=!!ei,ti=ei=null,e.current=n,yc(n,e,i),Je(),Ic=c,_t=a,Rc.transition=s}else e.current=n;if(Kc&&(Kc=!1,qc=e,Xc=i),s=e.pendingLanes,0===s&&(Yc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,e=Gc,Gc=null,e;0!==(1&Xc)&&0!==e.tag&&wl(),s=e.pendingLanes,0!==(1&s)?e===Qc?Jc++:(Jc=0,Qc=e):Jc=0,Wi()}(e,t,n,r)}finally{Rc.transition=i,_t=r}return null}function wl(){if(null!==qc){var e=Et(Xc),t=Rc.transition,n=_t;try{if(Rc.transition=null,_t=16>e?16:e,null===qc)var r=!1;else{if(e=qc,qc=null,Xc=0,0!==(6&Ic))throw Error(o(331));var i=Ic;for(Ic|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var c=s.deletions;if(null!==c){for(var l=0;l<c.length;l++){var d=c[l];for(Za=d;null!==Za;){var u=Za;switch(u.tag){case 0:case 11:case 15:nc(8,u,s)}var h=u.child;if(null!==h)h.return=u,Za=h;else for(;null!==Za;){var p=(u=Za).sibling,f=u.return;if(oc(u),u===d){Za=null;break}if(null!==p){p.return=f,Za=p;break}Za=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:nc(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Za=y;break e}Za=s.return}}var _=e.current;for(Za=_;null!==Za;){var E=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==E)E.return=a,Za=E;else e:for(a=_;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(w){Al(c,c.return,w)}if(c===a){Za=null;break e}var b=c.sibling;if(null!==b){b.return=c.return,Za=b;break e}Za=c.return}}if(Ic=i,Wi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{_t=n,Rc.transition=t}}return!1}function Sl(e,t,n){e=Fo(e,t=pa(0,t=la(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function Al(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yc||!Yc.has(r))){t=Fo(t,e=fa(t,e=la(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,xc===e&&(Nc&n)===n&&(4===Pc||3===Pc&&(130023424&Nc)===Nc&&500>Qe()-Vc?hl(e,0):Uc|=n),rl(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=el();null!==(e=Lo(e,t))&&(vt(e,t,n),rl(e,n))}function Rl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tl(e,n)}function xl(e,t){return Ke(e,t)}function Ol(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nl(e,t,n,r){return new Ol(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function kl(e,t){var n=e.alternate;return null===n?((n=Nl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Dl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ll(n.children,i,s,t);case A:a=8,i|=8;break;case C:return(e=Nl(12,n,t,2|i)).elementType=C,e.lanes=s,e;case x:return(e=Nl(13,n,t,i)).elementType=x,e.lanes=s,e;case O:return(e=Nl(19,n,t,i)).elementType=O,e.lanes=s,e;case k:return Ml(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case R:a=9;break e;case I:a=11;break e;case N:a=14;break e;case D:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ll(e,t,n,r){return(e=Nl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Nl(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Nl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Nl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fl(e,t,n,r,i,o,s,a,c){return e=new Bl(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(o),e}function Vl(e){if(!e)return Ri;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Wl(e,t,n,r,i,o,s,a,c){return(e=Fl(n,r,!0,e,0,o,0,a,c)).context=Vl(null),n=e.current,(o=Bo(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Fo(n,o,i),e.current.lanes=i,vt(e,i,r),rl(e,r),e}function Hl(e,t,n,r){var i=t.current,o=el(),s=tl(i);return n=Vl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fo(i,t,s))&&(nl(e,i,s,o),Vo(e,i,s)),s}function zl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:xa(t),fo();break;case 5:Zo(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Ti(es,1&es.current),null!==(e=za(e,t,n))?e.sibling:null);Ti(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return za(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,io&&0!==(1048576&t.flags)&&$i(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ni(t,Ii.current);Oo(t,n),i=gs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,jo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=Ia(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),Ea(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ra(null,t,r,e,n);break e;case 11:t=ba(null,t,r,e,n);break e;case 14:t=wa(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(xa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),Ho(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Oa(e,t,r,n,i=la(Error(o(423)),t));break e}if(r!==i){t=Oa(e,t,r,n,i=la(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=wo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=za(e,t,n);break e}Ea(e,t,r,n)}t=t.child}return t;case 5:return Zo(t),null===e&&lo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ca(e,t),Ea(e,t,a,n),t.child;case 6:return null===e&&lo(t),null;case 13:return ja(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bo(t,null,r,n):Ea(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return Ea(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ti(So,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!xi.current){t=za(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=Bo(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),d.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xo(s.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),xo(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Ea(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Oo(t,n),r=r(i=No(i)),t.flags|=1,Ea(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),wa(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Oo(t,n),sa(t,r,i),ca(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Kl="function"===typeof reportError?reportError:function(e){console.error(e)};function ql(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function $l(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=zl(s);a.call(e)}}Hl(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=zl(s);o.call(e)}}var s=Wl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=s,e[fi]=s.current,Wr(8===e.nodeType?e.parentNode:e),dl(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=zl(c);a.call(e)}}var c=Fl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[fi]=c.current,Wr(8===e.nodeType?e.parentNode:e),dl((function(){Hl(t,c,n,r)})),c}(n,t,e,i,r);return zl(s)}Xl.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hl(e,t,null,null)},Xl.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dl((function(){Hl(null,e,null,null)})),t[fi]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Qe()),0===(6&Ic)&&(Wc=Qe()+500,Wi()))}break;case 13:dl((function(){var t=Lo(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Yl(e,1)}},wt=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)nl(t,e,134217728,el());Yl(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),n=Lo(e,t);if(null!==n)nl(n,e,t,el());Yl(e,t)}},At=function(){return _t},Ct=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(o(90));K(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,xe=dl;var ed={usingClientEntryPoint:!1,Events:[_i,Ei,bi,Te,Re,ll]},td={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{it=rd.inject(nd),ot=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(o(299));var n=!1,r="",i=Kl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fl(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dl(e)},t.hydrate=function(e,t,n){if(!Ql(t))throw Error(o(200));return $l(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Kl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wl(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)},t.render=function(e,t,n){if(!Ql(t))throw Error(o(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ql(e))throw Error(o(40));return!!e._reactRootContainer&&(dl((function(){$l(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ql(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return $l(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},1250:(e,t,n)=>{"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6431:function(e,t,n){e.exports=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){e.exports=n(3)()},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=n(4);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r,i,o,s,a;s=this,a=function(e){var t=!1,n=!1,r=!1,i=!1,o="escape years months weeks days hours minutes seconds milliseconds general".split(" "),s=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function a(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function c(e){for(var t="";e;)t+="0",e-=1;return t}function l(e,t){var n=e+"+"+y(T(t).sort(),(function(e){return e+":"+t[e]})).join(",");return l.cache[n]||(l.cache[n]=Intl.NumberFormat(e,t)),l.cache[n]}function d(e,t,o){var s,a,u,h=t.useToLocaleString,p=t.useGrouping,f=p&&t.grouping.slice(),m=t.maximumSignificantDigits,g=t.minimumIntegerDigits||1,v=t.fractionDigits||0,y=t.groupingSeparator,_=t.decimalSeparator;if(h&&o){var E,b={minimumIntegerDigits:g,useGrouping:p};return v&&(b.maximumFractionDigits=v,b.minimumFractionDigits=v),m&&e>0&&(b.maximumSignificantDigits=m),r?(i||((E=C({},t)).useGrouping=!1,E.decimalSeparator=".",e=parseFloat(d(e,E),10)),l(o,b).format(e)):(n||((E=C({},t)).useGrouping=!1,E.decimalSeparator=".",e=parseFloat(d(e,E),10)),e.toLocaleString(o,b))}var w=(m?e.toPrecision(m+1):e.toFixed(v+1)).split("e");u=w[1]||"",a=(w=w[0].split("."))[1]||"";var S=(s=w[0]||"").length,A=a.length,T=S+A,R=s+a;(m&&T===m+1||!m&&A===v+1)&&((R=function(e){for(var t=e.split("").reverse(),n=0,r=!0;r&&n<t.length;)n?"9"===t[n]?t[n]="0":(t[n]=(parseInt(t[n],10)+1).toString(),r=!1):(parseInt(t[n],10)<5&&(r=!1),t[n]="0"),n+=1;return r&&t.push("1"),t.reverse().join("")}(R)).length===T+1&&(S+=1),A&&(R=R.slice(0,-1)),s=R.slice(0,S),a=R.slice(S)),m&&(a=a.replace(/0*$/,""));var I=parseInt(u,10);I>0?a.length<=I?(s+=a+=c(I-a.length),a=""):(s+=a.slice(0,I),a=a.slice(I)):I<0&&(a=c(Math.abs(I)-s.length)+s+a,s="0"),m||((a=a.slice(0,v)).length<v&&(a+=c(v-a.length)),s.length<g&&(s=c(g-s.length)+s));var x,O="";if(p)for(w=s;w.length;)f.length&&(x=f.shift()),O&&(O=y+O),O=w.slice(-x)+O,w=w.slice(0,-x);else O=s;return a&&(O=O+_+a),O}function u(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function h(e,t){var n=[];return v(T(t),(function(r){if("_durationLabels"===r.slice(0,15)){var i=r.slice(15).toLowerCase();v(T(t[r]),(function(o){o.slice(0,1)===e&&n.push({type:i,key:o,label:t[r][o]})}))}})),n}l.cache={};var p={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,n){return 1===t&&null===n?e:e+e}};function f(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e,t){var n,r=0,i=e&&e.length||0;for("function"!=typeof t&&(n=t,t=function(e){return e===n});r<i;){if(t(e[r]))return e[r];r+=1}}function v(e,t){var n=0,r=e.length;if(e&&r)for(;n<r;){if(!1===t(e[n],n))return;n+=1}}function y(e,t){var n=0,r=e.length,i=[];if(!e||!r)return i;for(;n<r;)i[n]=t(e[n],n),n+=1;return i}function _(e,t){return y(e,(function(e){return e[t]}))}function E(e){var t=[];return v(e,(function(e){e&&t.push(e)})),t}function b(e){var t=[];return v(e,(function(e){g(t,e)||t.push(e)})),t}function w(e,t){var n=[];return v(e,(function(e){v(t,(function(t){e===t&&n.push(e)}))})),b(n)}function S(e,t){var n=[];return v(e,(function(r,i){if(!t(r))return n=e.slice(i),!1})),n}function A(e,t){return S(e.slice().reverse(),t).reverse()}function C(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function T(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function R(e,t){var n=0,r=e.length;if(!e||!r)return!1;for(;n<r;){if(!0===t(e[n],n))return!0;n+=1}return!1}function I(e){var t=[];return v(e,(function(e){t=t.concat(e)})),t}function x(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function O(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function N(){var e,t=[].slice.call(arguments),n={};if(v(t,(function(t,r){if(!r){if(!f(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?m(t)&&C(n,t):n.precision=t:n.template=t})),!e||!e.length)return[];n.returnMomentTypes=!0;var r=y(e,(function(e){return e.format(n)})),i=w(o,b(_(I(r),"type"))),s=n.largest;return s&&(i=i.slice(0,s)),n.returnMomentTypes=!1,n.outputTypes=i,y(e,(function(e){return e.format(n)}))}function D(){var n=[].slice.call(arguments),i=C({},this.format.defaults),c=this.asMilliseconds(),l=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(c=0,l=0);var I=c<0,x=e.duration(Math.abs(c),"milliseconds"),O=e.duration(Math.abs(l),"months");v(n,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?m(e)&&C(i,e):i.precision=e:i.template=e}));var N={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},D={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};i.types=o;var k=function(e){return g(o,(function(t){return D[t].test(e)}))},P=new RegExp(y(o,(function(e){return D[e].source})).join("|"),"g");i.duration=this;var L="function"==typeof i.template?i.template.apply(i):i.template,M=i.outputTypes,j=i.returnMomentTypes,U=i.largest,B=[];M||(f(i.stopTrim)&&(i.stopTrim=i.stopTrim.join("")),i.stopTrim&&v(i.stopTrim.match(P),(function(e){var t=k(e);"escape"!==t&&"general"!==t&&B.push(t)})));var F=e.localeData();F||(F={}),v(T(p),(function(e){"function"!=typeof p[e]?F["_"+e]||(F["_"+e]=p[e]):F[e]||(F[e]=p[e])})),v(T(F._durationTimeTemplates),(function(e){L=L.replace("_"+e+"_",F._durationTimeTemplates[e])}));var V=i.userLocale||e.locale(),W=i.useLeftUnits,H=i.usePlural,z=i.precision,G=i.forceLength,Y=i.useGrouping,K=i.trunc,q=i.useSignificantDigits&&z>0,X=q?i.precision:0,J=X,Q=i.minValue,Z=!1,$=i.maxValue,ee=!1,te=i.useToLocaleString,ne=i.groupingSeparator,re=i.decimalSeparator,ie=i.grouping;te=te&&(t||r);var oe=i.trim;f(oe)&&(oe=oe.join(" ")),null===oe&&(U||$||q)&&(oe="all"),null!==oe&&!0!==oe&&"left"!==oe&&"right"!==oe||(oe="large"),!1===oe&&(oe="");var se=function(e){return e.test(oe)},ae=/small/,ce=/both/,le=/mid/,de=/^all|[^sm]all/,ue=/final/,he=U>0||R([/large/,ce,de],se),pe=R([ae,ce,de],se),fe=R([le,de],se),me=R([ue,de],se),ge=y(L.match(P),(function(e,t){var n=k(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==n&&"general"!==n&&B.push(n)),{index:t,length:e.length,text:"",token:"escape"===n?e.replace(D.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}})),ve={index:0,length:0,token:"",text:"",type:null},ye=[];W&&ge.reverse(),v(ge,(function(e){if(e.type)return(ve.type||ve.text)&&ye.push(ve),void(ve=e);W?ve.text=e.token+ve.text:ve.text+=e.token})),(ve.type||ve.text)&&ye.push(ve),W&&ye.reverse();var _e=w(o,b(E(_(ye,"type"))));if(!_e.length)return _(ye,"text").join("");_e=y(_e,(function(e,t){var n,r=t+1===_e.length,o=!t;n="years"===e||"months"===e?O.as(e):x.as(e);var s=Math.floor(n),a=n-s,c=g(ye,(function(t){return e===t.type}));return o&&$&&n>$&&(ee=!0),r&&Q&&Math.abs(i.duration.as(e))<Q&&(Z=!0),o&&null===G&&c.length>1&&(G=!0),x.subtract(s,e),O.subtract(s,e),{rawValue:n,wholeValue:s,decimalValue:r?a:0,isSmallest:r,isLargest:o,type:e,tokenLength:c.length}}));var Ee=K?Math.floor:Math.round,be=function(e,t){var n=Math.pow(10,t);return Ee(e*n)/n},we=!1,Se=!1,Ae=function(e,t){var n={useGrouping:Y,groupingSeparator:ne,decimalSeparator:re,grouping:ie,useToLocaleString:te};return q&&(X<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(n.maximumSignificantDigits=X,e.significantDigits=X)),ee&&!Se&&(e.isLargest?(e.wholeValue=$,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),Z&&!Se&&(e.isSmallest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?z<0?e.value=be(e.wholeValue,z):0===z?e.value=Ee(e.wholeValue+e.decimalValue):q?(e.value=K?be(e.rawValue,X-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(X-=e.wholeValue.toString().length)):(n.fractionDigits=z,e.value=K?e.wholeValue+be(e.decimalValue,z):e.wholeValue+e.decimalValue):q&&e.wholeValue?(e.value=Math.round(be(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),X-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(G||we)&&(n.minimumIntegerDigits=e.tokenLength,Se&&n.maximumSignificantDigits<e.tokenLength&&delete n.maximumSignificantDigits),!we&&(e.value>0||""===oe||g(B,e.type)||g(M,e.type))&&(we=!0),e.formattedValue=d(e.value,n,V),n.useGrouping=!1,n.decimalSeparator=".",e.formattedValueEn=d(e.value,n,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=d(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((_e=E(_e=y(_e,Ae))).length>1){var Ce=function(e){return g(_e,(function(t){return t.type===e}))},Te=function(e){var t=Ce(e.type);t&&v(e.targets,(function(e){var n=Ce(e.type);n&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,n.rawValue+=1,n.wholeValue+=1,n.decimalValue=0,n.formattedValueEn=n.wholeValue.toString(),Se=!0)}))};v(s,Te)}return Se&&(we=!1,X=J,_e=E(_e=y(_e,Ae))),!M||ee&&!i.trim?(he&&(_e=S(_e,(function(e){return!e.isSmallest&&!e.wholeValue&&!g(B,e.type)}))),U&&_e.length&&(_e=_e.slice(0,U)),pe&&_e.length>1&&(_e=A(_e,(function(e){return!e.wholeValue&&!g(B,e.type)&&!e.isLargest}))),fe&&(_e=E(_e=y(_e,(function(e,t){return t>0&&t<_e.length-1&&!e.wholeValue?null:e})))),!me||1!==_e.length||_e[0].wholeValue||!K&&_e[0].isSmallest&&_e[0].rawValue<Q||(_e=[])):_e=E(_e=y(_e,(function(e){return g(M,(function(t){return e.type===t}))?e:null}))),j?_e:(v(ye,(function(e){var t=N[e.type],n=g(_e,(function(t){return t.type===e.type}));if(t&&n){var r=n.formattedValueEn.split(".");r[0]=parseInt(r[0],10),r[1]?r[1]=parseFloat("0."+r[1],10):r[1]=null;var i=F.durationPluralKey(t,r[0],r[1]),o=h(t,F),s=!1,c={};v(F._durationLabelTypes,(function(t){var n=g(o,(function(e){return e.type===t.type&&e.key===i}));n&&(c[n.type]=n.label,a(e.text,t.string)&&(e.text=e.text.replace(t.string,n.label),s=!0))})),H&&!s&&(o.sort(u),v(o,(function(t){return c[t.type]===t.label?!a(e.text,t.label)&&void 0:a(e.text,t.label)?(e.text=e.text.replace(t.label,c[t.type]),!1):void 0})))}})),(ye=y(ye,(function(e){if(!e.type)return e.text;var t=g(_e,(function(t){return t.type===e.type}));if(!t)return"";var n="";return W&&(n+=e.text),(I&&ee||!I&&Z)&&(n+="< ",ee=!1,Z=!1),(I&&Z||!I&&ee)&&(n+="> ",ee=!1,Z=!1),I&&(t.value>0||""===oe||g(B,t.type)||g(M,t.type))&&(n+="-",I=!1),"milliseconds"===e.type&&t.formattedValueMS?n+=t.formattedValueMS:n+=t.formattedValue,W||(n+=e.text),n}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function k(){var e=this.duration,t=function(t){return e._data[t]},n=g(this.types,t),r=function(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}(this.types,t);switch(n){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(n===r)return"d __";case"weeks":return n===r?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(n===r)return"M __";case"years":return n===r?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function P(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=N,e.duration.fn.format=D,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:k,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",p)}var L=function(e,t,n){return e.toLocaleString(t,n)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&O(L),n=t&&x(L);var M=function(e,t,n){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,n).format(e)};return r=O(M),i=r&&x(M),P(e),P},i=[n(1)],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o),s&&(s.momentDurationFormatSetup=s.moment?a(s.moment):a)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n(2),i=n.n(r),o=n(0),s=n.n(o),a=n(1),c=n.n(a);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(5);var E=[s.a.string,s.a.number,s.a.array,s.a.object],b=[s.a.string,s.a.array],w=[s.a.object,s.a.bool],S=[s.a.string,s.a.bool],A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,e);var t=m(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),_(v(r=t.call(this,e)),"setTimer",(function(){var e=r.props.interval;r.clearTimer(),n.pooledTimer||0===e||(r.timer=setInterval((function(){r.update(r.props)}),e))})),_(v(r),"getTitle",(function(){var e=r.props.titleFormat,t=n.getDatetime(r.props),i=e||n.globalFormat;return t.format(i)})),_(v(r),"clearTimer",(function(){!n.pooledTimer&&r.timer&&(clearInterval(r.timer),r.timer=null),n.pooledTimer&&!r.timer&&n.removePooledElement(v(r))})),n.globalMoment||(n.globalMoment=c.a),r.state={content:""},r.timer=null,r}return p(n,null,[{key:"startPooledTimer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;n.clearPooledTimer(),n.pooledTimer=setInterval((function(){n.pooledElements.forEach((function(e){0!==e.props.interval&&e.update()}))}),e)}},{key:"clearPooledTimer",value:function(){n.pooledTimer&&(clearInterval(n.pooledTimer),n.pooledTimer=null,n.pooledElements=[])}},{key:"pushPooledElement",value:function(e){e instanceof n?-1===n.pooledElements.indexOf(e)&&n.pooledElements.push(e):console.error("Element not an instance of Moment.")}},{key:"removePooledElement",value:function(e){var t=n.pooledElements.indexOf(e);-1!==t&&n.pooledElements.splice(t,1)}},{key:"getDatetime",value:function(e){var t=e.utc,r=e.unix,i=e.date,o=e.locale,s=e.parse,a=e.tz,c=e.local;i=i||e.children,s=s||n.globalParse,c=c||n.globalLocal,a=a||n.globalTimezone,o=n.globalLocale?n.globalLocale:o||n.globalMoment.locale();var l=null;return l=t?n.globalMoment.utc(i,s,o):r?n.globalMoment(1e3*i,s,o):n.globalMoment(i,s,o),a?l=l.tz(a):c&&(l=l.local()),l}},{key:"getContent",value:function(e){var t=e.fromNow,r=e.fromNowDuring,i=e.from,o=e.add,s=e.subtract,a=e.toNow,l=e.to,d=e.ago,u=e.calendar,h=e.diff,p=e.duration,f=e.durationFromNow,m=e.unit,g=e.decimal,v=e.trim,y=e.format;y=y||n.globalFormat;var _=n.getDatetime(e);o&&_.add(o),s&&_.subtract(s);var E=Boolean(r)&&-_.diff(c()())<r,b="";return b=!y||E||f||p?i?_.from(i,d):t||E?_.fromNow(d):l?_.to(l,d):a?_.toNow(d):u?_.calendar(null,u):h?_.diff(h,m,g):p?_.diff(p):f?c()().diff(_):_.toString():_.format(y),(p||f)&&(b=(b=c.a.duration(b)).format(y,{trim:v})),(n.globalFilter||e.filter)(b)}}]),p(n,[{key:"componentDidMount",value:function(){this.setTimer(),n.pooledTimer&&n.pushPooledElement(this)}},{key:"componentDidUpdate",value:function(e){var t=this.props.interval;e.interval!==t&&this.setTimer()}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"update",value:function(e){var t=e||this.props,r=t.onChange,i=n.getContent(t);this.setState({content:i},(function(){r(i)}))}},{key:"render",value:function(){var e,t,r,o,s=this.props,a=s.withTitle,c=s.element,l=u(s,["withTitle","element"]),h=this.state.content,p=(e=l,t=n.propTypes,r=Object.keys(t),o=Object.assign({},e),Object.keys(o).filter((function(e){return-1!==r.indexOf(e)})).forEach((function(e){return delete o[e]})),o);return a&&(p.title=this.getTitle()),i.a.createElement(c||n.globalElement,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dateTime:n.getDatetime(this.props)},p),h)}}],[{key:"getDerivedStateFromProps",value:function(e){return{content:n.getContent(e)}}}]),n}(i.a.Component);_(A,"propTypes",{element:s.a.any,date:s.a.oneOfType(E),parse:s.a.oneOfType(b),format:s.a.string,add:s.a.object,subtract:s.a.object,ago:s.a.bool,fromNow:s.a.bool,fromNowDuring:s.a.number,from:s.a.oneOfType(E),toNow:s.a.bool,to:s.a.oneOfType(E),calendar:s.a.oneOfType(w),unix:s.a.bool,utc:s.a.bool,local:s.a.bool,tz:s.a.string,withTitle:s.a.bool,titleFormat:s.a.string,locale:s.a.string,interval:s.a.number,diff:s.a.oneOfType(E),duration:s.a.oneOfType(E),durationFromNow:s.a.bool,trim:s.a.oneOfType(S),unit:s.a.string,decimal:s.a.bool,filter:s.a.func,onChange:s.a.func}),_(A,"defaultProps",{element:null,fromNow:!1,toNow:!1,calendar:!1,ago:!1,unix:!1,utc:!1,local:!1,unit:null,withTitle:!1,trim:!1,decimal:!1,titleFormat:"",interval:6e4,filter:function(e){return e},onChange:function(){}}),_(A,"globalMoment",null),_(A,"globalLocale",null),_(A,"globalLocal",null),_(A,"globalFormat",null),_(A,"globalParse",null),_(A,"globalFilter",null),_(A,"globalElement","time"),_(A,"globalTimezone",null),_(A,"pooledElements",[]),_(A,"pooledTimer",null)}])}(n(2426),n(2791))},6490:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function c(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function l(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},6374:(e,t,n)=>{"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,d=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:d,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},9117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var E=_.prototype=new y;E.constructor=_,m(E,v.prototype),E.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,i)&&!A.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===o?"."+I(c,0):o,b(s)?(i="",null!=e&&(i=e.replace(R,"$&/")+"/"),x(s,t,i,"",(function(e){return e}))):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(R,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",b(e))for(var l=0;l<e.length;l++){var d=o+I(a=e[l],l);c+=x(a,t,i,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),l=0;!(a=e.next()).done;)c+=x(a=a.value,t,i,d=o+I(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function O(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},k={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=o,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!A.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},3841:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,c=e[a],l=a+1,d=e[l];if(0>o(c,n))l<i&&0>o(d,c)?(e[r]=d,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>o(d,n)))break e;e[r]=d,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(l,t)}t=r(d)}}function b(e){if(g=!1,E(e),!m)if(null!==r(l))m=!0,k(w);else{var t=r(d);null!==t&&P(b,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(T),T=-1),f=!0;var o=p;try{for(E(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!x());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(l)&&i(l),E(n)}else i(l);h=r(l)}if(null!==h)var c=!0;else{var u=r(d);null!==u&&P(b,u.startTime-n),c=!1}return c}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,C=null,T=-1,R=5,I=-1;function x(){return!(t.unstable_now()-I<R)}function O(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?S():(A=!1,C=null)}}else A=!1}if("function"===typeof _)S=function(){_(O)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=O,S=function(){D.postMessage(null)}}else S=function(){v(O,0)};function k(e){C=e,A||(A=!0,S())}function P(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,k(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(d,e),null===r(l)&&e===r(d)&&(g?(y(T),T=-1):g=!0,P(b,o-s))):(e.sortIndex=a,n(l,e),m||f||(m=!0,k(w))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)},9613:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var l=o[c];if(!a(l))return!1;var d=e[l],u=t[l];if(!1===(i=n?n.call(r,d,u,l):void 0)||void 0===i&&d!==u)return!1}return!0}},2506:(e,t,n)=>{"use strict";var r=n(9296);e.exports=n(1732)(r),"_sockjs_onload"in n.g&&setTimeout(n.g._sockjs_onload,1)},5002:(e,t,n)=>{"use strict";var r=n(2534),i=n(797);function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(o,i),e.exports=o},1227:(e,t,n)=>{"use strict";var r=n(2534),i=n(9375);function o(){i.call(this)}r(o,i),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var n=this,r=!1;this.on(e,(function i(){n.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}))},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,e.exports.v=o},797:e=>{"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},9375:e=>{"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},t.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],i=0;i<r.length;i++)r[i].apply(this,n)},e.exports=t},3231:(e,t,n)=>{"use strict";var r=n(2534),i=n(797);function o(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}r(o,i),e.exports=o},8143:(e,t,n)=>{"use strict";var r=n(8136);function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){r.postMessage("c",JSON.stringify([e,t]))},i.prototype._transportMessage=function(e){r.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=i},7405:(e,t,n)=>{"use strict";var r=n(1793),i=n(2856),o=n(8143),s=n(7836),a=n(8136),c=n(7448);e.exports=function(e,t){var n,l={};t.forEach((function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)})),l[s.transportName]=s,e.bootstrap_iframe=function(){var t;a.currentWindowId=c.hash.slice(1);i.attachEvent("message",(function(i){if(i.source===parent&&("undefined"===typeof n&&(n=i.origin),i.origin===n)){var s;try{s=JSON.parse(i.data)}catch(m){return void i.data}if(s.windowId===a.currentWindowId)switch(s.type){case"s":var d;try{d=JSON.parse(s.data)}catch(m){s.data;break}var u=d[0],h=d[1],p=d[2],f=d[3];if(u!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+u+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(p,c.href)||!r.isOriginEqual(f,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+p+", "+f+")");t=new o(new l[h](p,f));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}})),a.postMessage("s")}}},6693:(e,t,n)=>{"use strict";var r=n(1227).v,i=n(2534),o=n(3617);function s(e,t){r.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var r,s;if(200===e){if(s=+new Date-i,t)try{r=JSON.parse(t)}catch(a){}o.isObject(r)||(r={})}n.emit("finish",r,s),n.removeAllListeners()}))}i(s,r),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=s},7836:(e,t,n)=>{"use strict";var r=n(2534),i=n(1227).v,o=n(1494),s=n(6693);function a(e){var t=this;i.call(this),this.ir=new s(e,o),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",JSON.stringify([e,n]))}))}r(a,i),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=a},64:(e,t,n)=>{"use strict";var r=n(1227).v,i=n(2534),o=n(2856),s=n(192),a=n(7836);function c(e,t){var i=this;r.call(this);var c=function(){var n=i.ifr=new s(a.transportName,t,e);n.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(o){return i.emit("finish"),void i.close()}var n=t[0],r=t[1];i.emit("finish",n,r)}i.close()})),n.once("close",(function(){i.emit("finish"),i.close()}))};n.g.document.body?c():o.attachEvent("load",c)}i(c,r),c.enabled=function(){return s.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=c},7996:(e,t,n)=>{"use strict";var r=n(1227).v,i=n(2534),o=n(1793),s=n(1212),a=n(6742),c=n(1494),l=n(7455),d=n(64),u=n(6693);function h(e,t){var n=this;r.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}i(h,r),h._getReceiver=function(e,t,n){return n.sameOrigin?new u(t,c):a.enabled?new u(t,a):s.enabled&&n.sameScheme?new u(t,s):d.enabled()?new d(e,t):new u(t,l)},h.prototype.doXhr=function(e,t){var n=this,r=o.addPath(e,"/info");this.xo=h._getReceiver(e,r,t),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),h.timeout),this.xo.once("finish",(function(e,t){n._cleanup(!0),n.emit("finish",e,t)}))},h.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,e.exports=h},7448:(e,t,n)=>{"use strict";e.exports=n.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},1732:(e,t,n)=>{"use strict";n(7814);var r,i=n(5915),o=n(2534),s=n(1503),a=n(4419),c=n(1793),l=n(2856),d=n(5936),u=n(3617),h=n(5859),p=n(2159),f=n(797),m=n(9375),g=n(7448),v=n(5002),y=n(3231),_=n(7996);function E(e,t,n){if(!(this instanceof E))return new E(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=E.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&p.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"===typeof r)this._generateSessionId=r;else{if("number"!==typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(r)}}this._server=n.server||s.numberString(1e3);var o=new i(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a="https:"===o.protocol;if("https:"===g.protocol&&!a&&!c.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var d=c.getOrigin(g.href);this._origin=d?d.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this.url,this._urlInfo={nullOrigin:!h.hasDomain(),sameOrigin:c.isOriginEqual(this.url,g.href),sameScheme:c.isSchemeEqual(this.url,g.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function b(e){return 1e3===e||e>=3e3&&e<=4999}o(E,m),E.prototype.close=function(e,t){if(e&&!b(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==E.CLOSING&&this.readyState!==E.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},E.prototype.send=function(e){if("string"!==typeof e&&(e=""+e),this.readyState===E.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===E.OPEN&&this._transport.send(a.quote(e))},E.version=n(3273),E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=u.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},E.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!n.g.document.body||"undefined"!==typeof n.g.document.readyState&&"complete"!==n.g.document.readyState&&"interactive"!==n.g.document.readyState))return this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var r=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName],o=new e(r,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},E.prototype._transportTimeout=function(){this.readyState===E.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},E.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),i=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void this.transport}if(i)try{t=JSON.parse(i)}catch(o){}if("undefined"!==typeof t)switch(r){case"a":Array.isArray(t)&&t.forEach((function(e){n.transport,n.dispatchEvent(new y(e))}));break;case"m":this.transport,this.dispatchEvent(new y(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},E.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),b(e)||2e3===e||this.readyState!==E.CONNECTING?this._close(e,t):this._connect()},E.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===E.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=E.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),this.transport):this._close(1006,"Server lost session")},E.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===E.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=E.CLOSING,setTimeout(function(){this.readyState=E.CLOSED,r&&this.dispatchEvent(new f("error"));var i=new v("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},E.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=d(e),n(7405)(E,e),E}},7814:()=>{"use strict";var e,t=Array.prototype,n=Object.prototype,r=Function.prototype,i=String.prototype,o=t.slice,s=n.toString,a=function(e){return"[object Function]"===n.toString.call(e)},c=function(e){return"[object String]"===s.call(e)},l=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=l?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var d=function(t,r,i){for(var o in r)n.hasOwnProperty.call(r,o)&&e(t,o,r[o],i)},u=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function h(){}d(r,{bind:function(e){var t=this;if(!a(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=o.call(arguments,1),r=Math.max(0,t.length-n.length),i=[],s=0;s<r;s++)i.push("$"+s);var c=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof c){var r=t.apply(this,n.concat(o.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(o.call(arguments)))}));return t.prototype&&(h.prototype=t.prototype,c.prototype=new h,h.prototype=null),c}}),d(Array,{isArray:function(e){return"[object Array]"===s.call(e)}});var p=Object("a"),f="a"!==p[0]||!(0 in p);d(t,{forEach:function(e){var t=u(this),n=f&&c(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if(!a(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}},!function(e){var t=!0,n=!0;return e&&(e.call("foo",(function(e,n,r){"object"!==typeof r&&(t=!1)})),e.call([1],(function(){n="string"===typeof this}),"x")),!!e&&t&&n}(t.forEach));var m=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);d(t,{indexOf:function(e){var t=f&&c(this)?this.split(""):u(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=function(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}},m);var g=i.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1];i.split=function(n,r){var i=this;if(void 0===n&&0===r)return[];if("[object RegExp]"!==s.call(n))return g.call(this,n,r);var o,a,c,l,d=[],u=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.extended?"x":"")+(n.sticky?"y":""),h=0;for(n=new RegExp(n.source,u+"g"),i+="",e||(o=new RegExp("^"+n.source+"$(?!\\s)",u)),r=void 0===r?-1>>>0:r>>>0;(a=n.exec(i))&&!((c=a.index+a[0].length)>h&&(d.push(i.slice(h,a.index)),!e&&a.length>1&&a[0].replace(o,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)})),a.length>1&&a.index<i.length&&t.push.apply(d,a.slice(1)),l=a[0].length,h=c,d.length>=r));)n.lastIndex===a.index&&n.lastIndex++;return h===i.length?!l&&n.test("")||d.push(""):d.push(i.slice(h)),d.length>r?d.slice(0,r):d}}():"0".split(void 0,0).length&&(i.split=function(e,t){return void 0===e&&0===t?[]:g.call(this,e,t)});var v=i.substr,y="".substr&&"b"!=="0b".substr(-1);d(i,{substr:function(e,t){return v.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},y)},9296:(e,t,n)=>{"use strict";e.exports=[n(5383),n(8605),n(1339),n(3759),n(4100)(n(3759)),n(9451),n(4100)(n(9451)),n(1383),n(4218),n(4100)(n(1383)),n(3639)]},700:(e,t,n)=>{"use strict";var r=n(1227).v,i=n(2534),o=n(2856),s=n(1793),a=n.g.XMLHttpRequest;function c(e,t,n,i){var o=this;r.call(this),setTimeout((function(){o._start(e,t,n,i)}),0)}i(c,r),c.prototype._start=function(e,t,n,r){var i=this;try{this.xhr=new a}catch(d){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(u){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var l in r.headers)this.xhr.setRequestHeader(l,r.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(u){}1223===t&&(t=204),200===t&&e&&e.length>0&&i.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(u){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var l=["Active"].concat("Object").join("X");!c.enabled&&l in n.g&&(a=function(){try{return new n.g[l]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new a);var d=!1;try{d="withCredentials"in new a}catch(u){}c.supportsCORS=d,e.exports=c},9931:(e,t,n)=>{e.exports=n.g.EventSource},7501:(e,t,n)=>{"use strict";var r=n.g.WebSocket||n.g.MozWebSocket;e.exports=r?function(e){return new r(e)}:void 0},3759:(e,t,n)=>{"use strict";var r=n(2534),i=n(3475),o=n(6860),s=n(6742),a=n(9931);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",o,s)}r(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},9451:(e,t,n)=>{"use strict";var r=n(2534),i=n(6733),o=n(1494),s=n(3475);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,o)}r(a,s),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},192:(e,t,n)=>{"use strict";var r=n(2534),i=n(1227).v,o=n(3273),s=n(1793),a=n(8136),c=n(2856),l=n(1503);function d(e,t,n){if(!d.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var o=s.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=a.createIframe(o,(function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}r(d,i),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(e.data,!s.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(r){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch(r){return void t.data}this.emit("close",n[0],n[1]),this.close()}},d.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){this.postMessage("m",e)},d.enabled=function(){return a.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},3639:(e,t,n)=>{"use strict";var r=n(2534),i=n(1153),o=n(1646),s=n(6173);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,o)}r(a,i),a.enabled=function(){return!!n.g.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a},3475:(e,t,n)=>{"use strict";var r=n(2534),i=n(1793),o=n(1153),s=function(){};function a(e,t,n,r){o.call(this,e,t,function(e){return function(t,n,r){s("create ajax sender",t,n);var o={};"string"===typeof n&&(o.headers={"Content-type":"text/plain"});var a=i.addPath(t,"/xhr_send"),c=new e("POST",a,n,o);return c.once("finish",(function(e){if(s("finish",e),c=null,200!==e&&204!==e)return r(new Error("http status "+e));r()})),function(){s("abort"),c.close(),c=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(a,o),e.exports=a},282:(e,t,n)=>{"use strict";var r=n(2534),i=n(1227).v;function o(e,t){i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(o,i),o.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},o.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=o},4100:(e,t,n)=>{"use strict";var r=n(2534),i=n(192),o=n(3617);e.exports=function(e){function t(t,n){i.call(this,e.transportName,t,n)}return r(t,i),t.enabled=function(t,r){if(!n.g.document)return!1;var s=o.extend({},r);return s.sameOrigin=!0,e.enabled(s)&&i.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=i.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},7973:(e,t,n)=>{"use strict";var r=n(2534),i=n(1227).v;function o(e,t,n){i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(o,i),o.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))}))},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=o},1153:(e,t,n)=>{"use strict";var r=n(2534),i=n(1793),o=n(282),s=n(7973);function a(e,t,n,r,a){var c=i.addPath(e,t),l=this;o.call(this,e,n),this.poll=new s(r,c,a),this.poll.on("message",(function(e){l.emit("message",e)})),this.poll.once("close",(function(e,t){l.poll=null,l.emit("close",e,t),l.close()}))}r(a,o),a.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},6860:(e,t,n)=>{"use strict";var r=n(2534),i=n(1227).v,o=n(9931);function s(e){i.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(s,i),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},s.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=s},6733:(e,t,n)=>{"use strict";var r=n(2534),i=n(8136),o=n(1793),s=n(1227).v,a=n(1503);function c(e){s.call(this);var t=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=o.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;n.g[i.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=r(e,(function(){t._cleanup(),t._close("permanent")}))}r(c,s),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n.g[i.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in n.g)try{c.htmlfileEnabled=!!new n.g[l]("htmlfile")}catch(d){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,e.exports=c},1646:(e,t,n)=>{"use strict";var r=n(8136),i=n(1503),o=n(5859),s=n(1793),a=n(2534),c=n(1227).v;function l(e){var t=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=s.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n.g[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),l.timeout)}a(l,c),l.prototype.abort=function(){if(n.g[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n.g[r.WPrefix][this.id]},l.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),l.scriptErrorTimeout))},l.prototype._createScript=function(e){var t,r=this,s=this.script=n.g.document.createElement("script");if(s.id="a"+i.string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=this._scriptError.bind(this),s.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(s.readyState,/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){r.loadedOkay=!0;try{s.onclick()}catch(e){}}s&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"===typeof s.async&&n.g.document.attachEvent)if(o.isOpera())(t=this.script2=n.g.document.createElement("script")).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=t.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(c){}s.async=!0}"undefined"!==typeof s.async&&(s.async=!0);var a=n.g.document.getElementsByTagName("head")[0];a.insertBefore(s,a.firstChild),t&&a.insertBefore(t,a.firstChild)},e.exports=l},3138:(e,t,n)=>{"use strict";var r=n(2534),i=n(1227).v;function o(e,t){i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(o,i),o.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var i=r.slice(0,n);i&&this.emit("message",i)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=o},6173:(e,t,n)=>{"use strict";var r,i,o=n(1503),s=n(1793);e.exports=function(e,t,a){r||((r=n.g.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(i=n.g.document.createElement("textarea")).name="d",r.appendChild(i),n.g.document.body.appendChild(r));var c="a"+o.string(8);r.target=c,r.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+c);var l=function(e){try{return n.g.document.createElement('<iframe name="'+e+'">')}catch(r){var t=n.g.document.createElement("iframe");return t.name=e,t}}(c);l.id=c,l.style.display="none",r.appendChild(l);try{i.value=t}catch(u){}r.submit();var d=function(e){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout((function(){l.parentNode.removeChild(l),l=null}),500),i.value="",a(e))};return l.onerror=function(){d()},l.onload=function(){d()},l.onreadystatechange=function(e){l.readyState,"complete"===l.readyState&&d()},function(){d(new Error("Aborted"))}}},1212:(e,t,n)=>{"use strict";var r=n(1227).v,i=n(2534),o=n(2856),s=n(5859),a=n(1793);function c(e,t,n){var i=this;r.call(this),setTimeout((function(){i._start(e,t,n)}),0)}i(c,r),c.prototype._start=function(e,t,r){var i=this,s=new n.g.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),s.onerror=function(){i._error()},s.ontimeout=function(){i._error()},s.onprogress=function(){s.responseText,i.emit("chunk",200,s.responseText)},s.onload=function(){i.emit("finish",200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(c){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!n.g.XDomainRequest||!s.hasDomain()),e.exports=c},6742:(e,t,n)=>{"use strict";var r=n(2534),i=n(700);function o(e,t,n,r){i.call(this,e,t,n,r)}r(o,i),o.enabled=i.enabled&&i.supportsCORS,e.exports=o},7455:(e,t,n)=>{"use strict";var r=n(1227).v;function i(){var e=this;r.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),i.timeout)}n(2534)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},1494:(e,t,n)=>{"use strict";var r=n(2534),i=n(700);function o(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}r(o,i),o.enabled=i.enabled,e.exports=o},5383:(e,t,n)=>{"use strict";var r=n(2856),i=n(1793),o=n(2534),s=n(1227).v,a=n(7501);function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");s.call(this);var o=this,l=i.addPath(e,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new a(this.url,[],n),this.ws.onmessage=function(e){e.data,o.emit("message",e.data)},this.unloadRef=r.unloadAdd((function(){o.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(c,s),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,e.exports=c},4218:(e,t,n)=>{"use strict";var r=n(2534),i=n(3475),o=n(1339),s=n(3138),a=n(1212);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,a)}r(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},1339:(e,t,n)=>{"use strict";var r=n(2534),i=n(3475),o=n(3138),s=n(1212);function a(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(s.enabled&&e.sameScheme)},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},1383:(e,t,n)=>{"use strict";var r=n(2534),i=n(3475),o=n(3138),s=n(6742),a=n(1494);function c(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,s)}r(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||s.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},8605:(e,t,n)=>{"use strict";var r=n(2534),i=n(3475),o=n(3138),s=n(6742),a=n(1494),c=n(5859);function l(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(l,i),l.enabled=function(e){return!e.nullOrigin&&(!c.isOpera()&&s.enabled)},l.transportName="xhr-streaming",l.roundTrips=2,l.needBody=!!n.g.document,e.exports=l},3306:(e,t,n)=>{"use strict";n.g.crypto&&n.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return n.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}},5859:(e,t,n)=>{"use strict";e.exports={isOpera:function(){return n.g.navigator&&/opera/i.test(n.g.navigator.userAgent)},isKonqueror:function(){return n.g.navigator&&/konqueror/i.test(n.g.navigator.userAgent)},hasDomain:function(){if(!n.g.document)return!0;try{return!!n.g.document.domain}catch(e){return!1}}}},4419:e=>{"use strict";var t,n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var r=JSON.stringify(e);return n.lastIndex=0,n.test(r)?(t||(t=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(n)),r.replace(n,(function(e){return t[e]}))):r}}},2856:(e,t,n)=>{"use strict";var r=n(1503),i={},o=!1,s=n.g.chrome&&n.g.chrome.app&&n.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){"undefined"!==typeof n.g.addEventListener?n.g.addEventListener(e,t,!1):n.g.document&&n.g.attachEvent&&(n.g.document.attachEvent("on"+e,t),n.g.attachEvent("on"+e,t))},detachEvent:function(e,t){"undefined"!==typeof n.g.addEventListener?n.g.removeEventListener(e,t,!1):n.g.document&&n.g.detachEvent&&(n.g.document.detachEvent("on"+e,t),n.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(s)return null;var t=r.string(8);return i[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}};s||e.exports.attachEvent("unload",(function(){o||(o=!0,e.exports.triggerUnloadCallbacks())}))},8136:(e,t,n)=>{"use strict";var r=n(2856),i=n(5859);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in n.g||(n.g[e.exports.WPrefix]={})},postMessage:function(t,r){n.g.parent!==n.g&&n.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:r||""}),"*")},createIframe:function(e,t){var i,o,s=n.g.document.createElement("iframe"),a=function(){clearTimeout(i);try{s.onload=null}catch(e){}s.onerror=null},c=function(){s&&(a(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),r.unloadDel(o))},l=function(e){s&&(c(),t(e))};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){l("onerror")},s.onload=function(){clearTimeout(i),i=setTimeout((function(){l("onload timeout")}),2e3)},n.g.document.body.appendChild(s),i=setTimeout((function(){l("timeout")}),15e3),o=r.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(n){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(t,i){var o,s,a,c=["Active"].concat("Object").join("X"),l=new n.g[c]("htmlfile"),d=function(){clearTimeout(o),a.onerror=null},u=function(){l&&(d(),r.unloadDel(s),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},h=function(e){l&&(u(),i(e))};l.open(),l.write('<html><script>document.domain="'+n.g.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=n.g[e.exports.WPrefix];var p=l.createElement("div");return l.body.appendChild(p),a=l.createElement("iframe"),p.appendChild(a),a.src=t,a.onerror=function(){h("onerror")},o=setTimeout((function(){h("timeout")}),15e3),s=r.unloadAdd(u),{post:function(e,t){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}),0)}catch(n){}},cleanup:u,loaded:d}}},e.exports.iframeEnabled=!1,n.g.document&&(e.exports.iframeEnabled=("function"===typeof n.g.postMessage||"object"===typeof n.g.postMessage)&&!i.isKonqueror())},2159:(e,t,n)=>{"use strict";var r={};["log","debug","warn"].forEach((function(e){var t;try{t=n.g.console&&n.g.console[e]&&n.g.console[e].apply}catch(i){}r[e]=t?function(){return n.g.console[e].apply(n.g.console,arguments)}:"log"===e?function(){}:r.log})),e.exports=r},3617:e=>{"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},1503:(e,t,n)=>{"use strict";var r=n(3306),i="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=r.randomBytes(e),n=[],o=0;o<e;o++)n.push(i.substr(t[o]%32,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},5936:e=>{"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"===typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))})),r}}}},1793:(e,t,n)=>{"use strict";var r=n(5915);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},3273:e=>{e.exports="1.6.1"},1830:function(e){e.exports=function(){"use strict";function e(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function t(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n(t,n){return t.get(e(t,n))}function r(e,n,r){t(e,n),n.set(e,r)}function i(t,n,r){return t.set(e(t,n),r),r}const o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},c=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;s.restoreFocusTimeout=setTimeout((()=>{a(),t()}),o),window.scrollTo(n,r)})),l="swal2-",d=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(((e,t)=>(e[t]=l+t,e)),{}),u=["success","warning","info","question","error"].reduce(((e,t)=>(e[t]=l+t,e)),{}),h="SweetAlert2:",p=e=>e.charAt(0).toUpperCase()+e.slice(1),f=e=>{console.warn("".concat(h," ").concat("object"===typeof e?e.join(" "):e))},m=e=>{console.error("".concat(h," ").concat(e))},g=[],v=e=>{g.includes(e)||(g.push(e),f(e))},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v('"'.concat(e,'" is deprecated and will be removed in the next major release.').concat(t?' Use "'.concat(t,'" instead.'):""))},_=e=>"function"===typeof e?e():e,E=e=>e&&"function"===typeof e.toPromise,b=e=>E(e)?e.toPromise():Promise.resolve(e),w=e=>e&&Promise.resolve(e)===e,S=()=>document.body.querySelector(".".concat(d.container)),A=e=>{const t=S();return t?t.querySelector(e):null},C=e=>A(".".concat(e)),T=()=>C(d.popup),R=()=>C(d.icon),I=()=>C(d["icon-content"]),x=()=>C(d.title),O=()=>C(d["html-container"]),N=()=>C(d.image),D=()=>C(d["progress-steps"]),k=()=>C(d["validation-message"]),P=()=>A(".".concat(d.actions," .").concat(d.confirm)),L=()=>A(".".concat(d.actions," .").concat(d.cancel)),M=()=>A(".".concat(d.actions," .").concat(d.deny)),j=()=>C(d["input-label"]),U=()=>A(".".concat(d.loader)),B=()=>C(d.actions),F=()=>C(d.footer),V=()=>C(d["timer-progress-bar"]),W=()=>C(d.close),H='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',z=()=>{const e=T();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")||"0"),r=parseInt(t.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=e.querySelectorAll(H),i=Array.from(r).filter((e=>"-1"!==e.getAttribute("tabindex")));return[...new Set(n.concat(i))].filter((e=>de(e)))},G=()=>X(document.body,d.shown)&&!X(document.body,d["toast-shown"])&&!X(document.body,d["no-backdrop"]),Y=()=>{const e=T();return!!e&&X(e,d.toast)},K=()=>{const e=T();return!!e&&e.hasAttribute("data-loading")},q=(e,t)=>{if(e.textContent="",t){const n=(new DOMParser).parseFromString(t,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((t=>{e.appendChild(t)}));const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},X=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},J=(e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(d).includes(n)||Object.values(u).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))},Q=(e,t,n)=>{if(J(e,t),!t.customClass)return;const r=t.customClass[n];r&&("string"===typeof r||r.forEach?te(e,r):f("Invalid type of customClass.".concat(n,'! Expected string or iterable object, got "').concat(typeof r,'"')))},Z=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(".".concat(d.popup," > .").concat(d[t]));case"checkbox":return e.querySelector(".".concat(d.popup," > .").concat(d.checkbox," input"));case"radio":return e.querySelector(".".concat(d.popup," > .").concat(d.radio," input:checked"))||e.querySelector(".".concat(d.popup," > .").concat(d.radio," input:first-child"));case"range":return e.querySelector(".".concat(d.popup," > .").concat(d.range," input"));default:return e.querySelector(".".concat(d.popup," > .").concat(d.input))}},$=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},ee=(e,t,n)=>{e&&t&&("string"===typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},te=(e,t)=>{ee(e,t,!0)},ne=(e,t)=>{ee(e,t,!1)},re=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const e=n[r];if(e instanceof HTMLElement&&X(e,t))return e}},ie=(e,t,n)=>{n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"===typeof n?"".concat(n,"px"):n):e.style.removeProperty(t)},oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},se=e=>{e&&(e.style.display="none")},ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver((()=>{le(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},ce=(e,t,n,r)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,r)},le=function(e,t){t?oe(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):se(e)},de=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),ue=()=>!de(P())&&!de(M())&&!de(L()),he=e=>!!(e.scrollHeight>e.clientHeight),pe=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},fe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=V();n&&de(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition="width ".concat(e/1e3,"s linear"),n.style.width="0%"}),10))},me=()=>{const e=V();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width="".concat(n,"%")},ge=()=>"undefined"===typeof window||"undefined"===typeof document,ve='\n <div aria-labelledby="'.concat(d.title,'" aria-describedby="').concat(d["html-container"],'" class="').concat(d.popup,'" tabindex="-1">\n   <button type="button" class="').concat(d.close,'"></button>\n   <ul class="').concat(d["progress-steps"],'"></ul>\n   <div class="').concat(d.icon,'"></div>\n   <img class="').concat(d.image,'" />\n   <h2 class="').concat(d.title,'" id="').concat(d.title,'"></h2>\n   <div class="').concat(d["html-container"],'" id="').concat(d["html-container"],'"></div>\n   <input class="').concat(d.input,'" id="').concat(d.input,'" />\n   <input type="file" class="').concat(d.file,'" />\n   <div class="').concat(d.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(d.select,'" id="').concat(d.select,'"></select>\n   <div class="').concat(d.radio,'"></div>\n   <label class="').concat(d.checkbox,'">\n     <input type="checkbox" id="').concat(d.checkbox,'" />\n     <span class="').concat(d.label,'"></span>\n   </label>\n   <textarea class="').concat(d.textarea,'" id="').concat(d.textarea,'"></textarea>\n   <div class="').concat(d["validation-message"],'" id="').concat(d["validation-message"],'"></div>\n   <div class="').concat(d.actions,'">\n     <div class="').concat(d.loader,'"></div>\n     <button type="button" class="').concat(d.confirm,'"></button>\n     <button type="button" class="').concat(d.deny,'"></button>\n     <button type="button" class="').concat(d.cancel,'"></button>\n   </div>\n   <div class="').concat(d.footer,'"></div>\n   <div class="').concat(d["timer-progress-bar-container"],'">\n     <div class="').concat(d["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),ye=()=>{const e=S();return!!e&&(e.remove(),ne([document.documentElement,document.body],[d["no-backdrop"],d["toast-shown"],d["has-column"]]),!0)},_e=()=>{s.currentInstance.resetValidationMessage()},Ee=()=>{const e=T(),t=re(e,d.input),n=re(e,d.file),r=e.querySelector(".".concat(d.range," input")),i=e.querySelector(".".concat(d.range," output")),o=re(e,d.select),s=e.querySelector(".".concat(d.checkbox," input")),a=re(e,d.textarea);t.oninput=_e,n.onchange=_e,o.onchange=_e,s.onchange=_e,a.oninput=_e,r.oninput=()=>{_e(),i.value=r.value},r.onchange=()=>{_e(),i.value=r.value}},be=e=>"string"===typeof e?document.querySelector(e):e,we=e=>{const t=T();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},Se=e=>{"rtl"===window.getComputedStyle(e).direction&&te(S(),d.rtl)},Ae=e=>{const t=ye();if(ge())return void m("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=d.container,t&&te(n,d["no-transition"]),q(n,ve);const r=be(e.target);r.appendChild(n),we(e),Se(r),Ee()},Ce=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"===typeof e?Te(e,t):e&&q(t,e)},Te=(e,t)=>{e.jquery?Re(t,e):q(t,e.toString())},Re=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},Ie=(e,t)=>{const n=B(),r=U();n&&r&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?oe(n):se(n),Q(n,t,"actions"),xe(n,r,t),q(r,t.loaderHtml||""),Q(r,t,"loader"))};function xe(e,t,n){const r=P(),i=M(),o=L();r&&i&&o&&(Ne(r,"confirm",n),Ne(i,"deny",n),Ne(o,"cancel",n),Oe(r,i,o,n),n.reverseButtons&&(n.toast?(e.insertBefore(o,r),e.insertBefore(i,r)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(r,t))))}function Oe(e,t,n,r){r.buttonsStyling?(te([e,t,n],d.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,te(e,d["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,te(t,d["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,te(n,d["default-outline"]))):ne([e,t,n],d.styled)}function Ne(e,t,n){const r=p(t);le(e,n["show".concat(r,"Button")],"inline-block"),q(e,n["".concat(t,"ButtonText")]||""),e.setAttribute("aria-label",n["".concat(t,"ButtonAriaLabel")]||""),e.className=d[t],Q(e,n,"".concat(t,"Button"))}const De=(e,t)=>{const n=W();n&&(q(n,t.closeButtonHtml||""),Q(n,t,"closeButton"),le(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},ke=(e,t)=>{const n=S();n&&(Pe(n,t.backdrop),Le(n,t.position),Me(n,t.grow),Q(n,t,"container"))};function Pe(e,t){"string"===typeof t?e.style.background=t:t||te([document.documentElement,document.body],d["no-backdrop"])}function Le(e,t){t&&(t in d?te(e,d[t]):(f('The "position" parameter is not valid, defaulting to "center"'),te(e,d.center)))}function Me(e,t){t&&te(e,d["grow-".concat(t)])}var je={innerParams:new WeakMap,domCache:new WeakMap};const Ue=["input","file","range","select","radio","checkbox","textarea"],Be=(e,t)=>{const n=T();if(!n)return;const r=je.innerParams.get(e),i=!r||t.input!==r.input;Ue.forEach((e=>{const r=re(n,d[e]);r&&(We(e,t.inputAttributes),r.className=d[e],i&&se(r))})),t.input&&(i&&Fe(t),He(t))},Fe=e=>{if(!e.input)return;if(!qe[e.input])return void m("Unexpected type of input! Expected ".concat(Object.keys(qe).join(" | "),', got "').concat(e.input,'"'));const t=Ye(e.input);if(!t)return;const n=qe[e.input](t,e);oe(t),e.inputAutoFocus&&setTimeout((()=>{$(n)}))},Ve=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},We=(e,t)=>{const n=T();if(!n)return;const r=Z(n,e);if(r){Ve(r);for(const e in t)r.setAttribute(e,t[e])}},He=e=>{if(!e.input)return;const t=Ye(e.input);t&&Q(t,e,"input")},ze=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Ge=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=d["input-label"];r.setAttribute("for",e.id),r.className=i,"object"===typeof n.customClass&&te(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},Ye=e=>{const t=T();if(t)return re(t,d[e]||d.input)},Ke=(e,t)=>{["string","number"].includes(typeof t)?e.value="".concat(t):w(t)||f('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof t,'"'))},qe={};qe.text=qe.email=qe.password=qe.number=qe.tel=qe.url=qe.search=qe.date=qe["datetime-local"]=qe.time=qe.week=qe.month=(e,t)=>(Ke(e,t.inputValue),Ge(e,e,t),ze(e,t),e.type=t.input,e),qe.file=(e,t)=>(Ge(e,e,t),ze(e,t),e),qe.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Ke(n,t.inputValue),n.type=t.input,Ke(r,t.inputValue),Ge(n,e,t),e},qe.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");q(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Ge(e,e,t),e},qe.radio=e=>(e.textContent="",e),qe.checkbox=(e,t)=>{const n=Z(T(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return q(r,t.inputPlaceholder||t.inputLabel),n},qe.textarea=(e,t)=>{Ke(e,t.inputValue),ze(e,t),Ge(e,e,t);const n=e=>parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight);return setTimeout((()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(T()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?T().style.width="".concat(i,"px"):ie(T(),"width",t.width)})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const Xe=(e,t)=>{const n=O();n&&(ae(n),Q(n,t,"htmlContainer"),t.html?(Ce(t.html,n),oe(n,"block")):t.text?(n.textContent=t.text,oe(n,"block")):se(n),Be(e,t))},Je=(e,t)=>{const n=F();n&&(ae(n),le(n,t.footer,"block"),t.footer&&Ce(t.footer,n),Q(n,t,"footer"))},Qe=(e,t)=>{const n=je.innerParams.get(e),r=R();if(r){if(n&&t.icon===n.icon)return nt(r,t),void Ze(r,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(u).indexOf(t.icon))return m('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"')),void se(r);oe(r),nt(r,t),Ze(r,t),te(r,t.showClass&&t.showClass.icon)}else se(r)}},Ze=(e,t)=>{for(const[n,r]of Object.entries(u))t.icon!==n&&ne(e,r);te(e,t.icon&&u[t.icon]),rt(e,t),$e(),Q(e,t,"icon")},$e=()=>{const e=T();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},et='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',tt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',nt=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=it(t.iconHtml):"success"===t.icon?(r=et,n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?r=tt:t.icon&&(r=it({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&q(e,r)},rt=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])ce(e,n,"background-color",t.iconColor);ce(e,".swal2-success-ring","border-color",t.iconColor)}},it=e=>'<div class="'.concat(d["icon-content"],'">').concat(e,"</div>"),ot=(e,t)=>{const n=N();n&&(t.imageUrl?(oe(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),ie(n,"width",t.imageWidth),ie(n,"height",t.imageHeight),n.className=d.image,Q(n,t,"image")):se(n))},st=(e,t)=>{const n=S(),r=T();if(n&&r){if(t.toast){ie(n,"width",t.width),r.style.width="100%";const e=U();e&&r.insertBefore(e,R())}else ie(r,"width",t.width);ie(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),se(k()),at(r,t)}},at=(e,t)=>{const n=t.showClass||{};e.className="".concat(d.popup," ").concat(de(e)?n.popup:""),t.toast?(te([document.documentElement,document.body],d["toast-shown"]),te(e,d.toast)):te(e,d.modal),Q(e,t,"popup"),"string"===typeof t.customClass&&te(e,t.customClass),t.icon&&te(e,d["icon-".concat(t.icon)])},ct=(e,t)=>{const n=D();if(!n)return;const{progressSteps:r,currentProgressStep:i}=t;r&&0!==r.length&&void 0!==i?(oe(n),n.textContent="",i>=r.length&&f("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((e,o)=>{const s=lt(e);if(n.appendChild(s),o===i&&te(s,d["active-progress-step"]),o!==r.length-1){const e=dt(t);n.appendChild(e)}}))):se(n)},lt=e=>{const t=document.createElement("li");return te(t,d["progress-step"]),q(t,e),t},dt=e=>{const t=document.createElement("li");return te(t,d["progress-step-line"]),e.progressStepsDistance&&ie(t,"width",e.progressStepsDistance),t},ut=(e,t)=>{const n=x();n&&(ae(n),le(n,t.title||t.titleText,"block"),t.title&&Ce(t.title,n),t.titleText&&(n.innerText=t.titleText),Q(n,t,"title"))},ht=(e,t)=>{st(e,t),ke(e,t),ct(e,t),Qe(e,t),ot(e,t),ut(e,t),De(e,t),Xe(e,t),Ie(e,t),Je(e,t);const n=T();"function"===typeof t.didRender&&n&&t.didRender(n),s.eventEmitter.emit("didRender",n)},pt=()=>de(T()),ft=()=>{var e;return null===(e=P())||void 0===e?void 0:e.click()},mt=()=>{var e;return null===(e=M())||void 0===e?void 0:e.click()},gt=()=>{var e;return null===(e=L())||void 0===e?void 0:e.click()},vt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),yt=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},_t=(e,t,n)=>{yt(e),t.toast||(e.keydownHandler=e=>St(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:T(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Et=(e,t)=>{var n;const r=z();if(r.length)return(e+=t)===r.length?e=0:-1===e&&(e=r.length-1),void r[e].focus();null===(n=T())||void 0===n||n.focus()},bt=["ArrowRight","ArrowDown"],wt=["ArrowLeft","ArrowUp"],St=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?At(t,e):"Tab"===t.key?Ct(t):[...bt,...wt].includes(t.key)?Tt(t.key):"Escape"===t.key&&Rt(t,e,n)))},At=(e,t)=>{if(!_(t.allowEnterKey))return;const n=Z(T(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;ft(),e.preventDefault()}},Ct=e=>{const t=e.target,n=z();let r=-1;for(let i=0;i<n.length;i++)if(t===n[i]){r=i;break}e.shiftKey?Et(r,-1):Et(r,1),e.stopPropagation(),e.preventDefault()},Tt=e=>{const t=B(),n=P(),r=M(),i=L();if(!t||!n||!r||!i)return;const o=[n,r,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const s=bt.includes(e)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let e=0;e<t.children.length;e++){if(a=a[s],!a)return;if(a instanceof HTMLButtonElement&&de(a))break}a instanceof HTMLButtonElement&&a.focus()}},Rt=(e,t,n)=>{_(t.allowEscapeKey)&&(e.preventDefault(),n(vt.esc))};var It={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const xt=()=>{const e=S();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))}))},Ot=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},Nt="undefined"!==typeof window&&!!window.GestureEvent,Dt=()=>{if(Nt&&!X(document.body,d.iosfix)){const e=document.body.scrollTop;document.body.style.top="".concat(-1*e,"px"),te(document.body,d.iosfix),kt()}},kt=()=>{const e=S();if(!e)return;let t;e.ontouchstart=e=>{t=Pt(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Pt=e=>{const t=e.target,n=S(),r=O();return!(!n||!r)&&!Lt(e)&&!Mt(e)&&(t===n||!he(n)&&t instanceof HTMLElement&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&(!he(r)||!r.contains(t)))},Lt=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Mt=e=>e.touches&&e.touches.length>1,jt=()=>{if(X(document.body,d.iosfix)){const e=parseInt(document.body.style.top,10);ne(document.body,d.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},Ut=()=>{const e=document.createElement("div");e.className=d["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Bt=null;const Ft=e=>{null===Bt&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(Bt=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Bt+Ut(),"px"))},Vt=()=>{null!==Bt&&(document.body.style.paddingRight="".concat(Bt,"px"),Bt=null)};function Wt(e,t,n,r){Y()?Qt(e,r):(c(n).then((()=>Qt(e,r))),yt(s)),Nt?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),G()&&(Vt(),jt(),Ot()),Ht()}function Ht(){ne([document.documentElement,document.body],[d.shown,d["height-auto"],d["no-backdrop"],d["toast-shown"]])}function zt(e){e=qt(e);const t=It.swalPromiseResolve.get(this),n=Gt(this);this.isAwaitingPromise?e.isDismissed||(Kt(this),t(e)):n&&t(e)}const Gt=e=>{const t=T();if(!t)return!1;const n=je.innerParams.get(e);if(!n||X(t,n.hideClass.popup))return!1;ne(t,n.showClass.popup),te(t,n.hideClass.popup);const r=S();return ne(r,n.showClass.backdrop),te(r,n.hideClass.backdrop),Xt(e,t,n),!0};function Yt(e){const t=It.swalPromiseReject.get(this);Kt(this),t&&t(e)}const Kt=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,je.innerParams.get(e)||e._destroy())},qt=e=>"undefined"===typeof e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),Xt=(e,t,n)=>{var r;const i=S(),o=pe(t);"function"===typeof n.willClose&&n.willClose(t),null===(r=s.eventEmitter)||void 0===r||r.emit("willClose",t),o?Jt(e,t,i,n.returnFocus,n.didClose):Wt(e,i,n.returnFocus,n.didClose)},Jt=(e,t,n,r,i)=>{s.swalCloseEventFinishedCallback=Wt.bind(null,e,n,r,i);const o=function(e){var n;e.target===t&&(null===(n=s.swalCloseEventFinishedCallback)||void 0===n||n.call(s),delete s.swalCloseEventFinishedCallback,t.removeEventListener("animationend",o),t.removeEventListener("transitionend",o))};t.addEventListener("animationend",o),t.addEventListener("transitionend",o)},Qt=(e,t)=>{setTimeout((()=>{var n;"function"===typeof t&&t.bind(e.params)(),null===(n=s.eventEmitter)||void 0===n||n.emit("didClose"),e._destroy&&e._destroy()}))},Zt=e=>{let t=T();if(t||new ni,t=T(),!t)return;const n=U();Y()?se(R()):$t(t,e),oe(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},$t=(e,t)=>{const n=B(),r=U();n&&r&&(!t&&de(P())&&(t=P()),oe(n),t&&(se(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),te([e,n],d.loading))},en=(e,t)=>{"select"===t.input||"radio"===t.input?sn(e,t):["text","email","number","tel","textarea"].some((e=>e===t.input))&&(E(t.inputValue)||w(t.inputValue))&&(Zt(P()),an(e,t))},tn=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return nn(n);case"radio":return rn(n);case"file":return on(n);default:return t.inputAutoTrim?n.value.trim():n.value}},nn=e=>e.checked?1:0,rn=e=>e.checked?e.value:null,on=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,sn=(e,t)=>{const n=T();if(!n)return;const r=e=>{"select"===t.input?cn(n,dn(e),t):"radio"===t.input&&ln(n,dn(e),t)};E(t.inputOptions)||w(t.inputOptions)?(Zt(P()),b(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"===typeof t.inputOptions?r(t.inputOptions):m("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof t.inputOptions))},an=(e,t)=>{const n=e.getInput();n&&(se(n),b(t.inputValue).then((r=>{n.value="number"===t.input?"".concat(parseFloat(r)||0):"".concat(r),oe(n),n.focus(),e.hideLoading()})).catch((t=>{m("Error in inputValue promise: ".concat(t)),n.value="",oe(n),n.focus(),e.hideLoading()})))};function cn(e,t,n){const r=re(e,d.select);if(!r)return;const i=(e,t,r)=>{const i=document.createElement("option");i.value=r,q(i,t),i.selected=un(r,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach((t=>i(e,t[1],t[0])))}else i(r,n,t)})),r.focus()}function ln(e,t,n){const r=re(e,d.radio);if(!r)return;t.forEach((e=>{const t=e[0],i=e[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=d.radio,o.value=t,un(t,n.inputValue)&&(o.checked=!0);const a=document.createElement("span");q(a,i),a.className=d.label,s.appendChild(o),s.appendChild(a),r.appendChild(s)}));const i=r.querySelectorAll("input");i.length&&i[0].focus()}const dn=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"===typeof r&&(r=dn(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"===typeof r&&(r=dn(r)),t.push([n,r])})),t},un=(e,t)=>!!t&&t.toString()===e.toString(),hn=e=>{const t=je.innerParams.get(e);e.disableButtons(),t.input?mn(e,"confirm"):En(e,!0)},pn=e=>{const t=je.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?mn(e,"deny"):vn(e,!1)},fn=(e,t)=>{e.disableButtons(),t(vt.cancel)},mn=(e,t)=>{const n=je.innerParams.get(e);if(!n.input)return void m('The "input" parameter is needed to be set when using returnInputValueOn'.concat(p(t)));const r=e.getInput(),i=tn(e,n);n.inputValidator?gn(e,i,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===t?vn(e,i):En(e,i)},gn=(e,t,n)=>{const r=je.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>b(r.inputValidator(t,r.validationMessage)))).then((r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?vn(e,t):En(e,t)}))},vn=(e,t)=>{const n=je.innerParams.get(e||void 0);n.showLoaderOnDeny&&Zt(M()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((()=>b(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),Kt(e)):e.close({isDenied:!0,value:"undefined"===typeof n?t:n})})).catch((t=>_n(e||void 0,t)))):e.close({isDenied:!0,value:t})},yn=(e,t)=>{e.close({isConfirmed:!0,value:t})},_n=(e,t)=>{e.rejectPromise(t)},En=(e,t)=>{const n=je.innerParams.get(e||void 0);n.showLoaderOnConfirm&&Zt(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((()=>b(n.preConfirm(t,n.validationMessage)))).then((n=>{de(k())||!1===n?(e.hideLoading(),Kt(e)):yn(e,"undefined"===typeof n?t:n)})).catch((t=>_n(e||void 0,t)))):yn(e,t)};function bn(){const e=je.innerParams.get(this);if(!e)return;const t=je.domCache.get(this);se(t.loader),Y()?e.icon&&oe(R()):wn(t),ne([t.popup,t.actions],d.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const wn=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?oe(t[0],"inline-block"):ue()&&se(e.actions)};function Sn(){const e=je.innerParams.get(this),t=je.domCache.get(this);return t?Z(t.popup,e.input):null}function An(e,t,n){const r=je.domCache.get(e);t.forEach((e=>{r[e].disabled=n}))}function Cn(e,t){const n=T();if(n&&e)if("radio"===e.type){const e=n.querySelectorAll('[name="'.concat(d.radio,'"]'));for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function Tn(){An(this,["confirmButton","denyButton","cancelButton"],!1)}function Rn(){An(this,["confirmButton","denyButton","cancelButton"],!0)}function In(){Cn(this.getInput(),!1)}function xn(){Cn(this.getInput(),!0)}function On(e){const t=je.domCache.get(this),n=je.innerParams.get(this);q(t.validationMessage,e),t.validationMessage.className=d["validation-message"],n.customClass&&n.customClass.validationMessage&&te(t.validationMessage,n.customClass.validationMessage),oe(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",d["validation-message"]),$(r),te(r,d.inputerror))}function Nn(){const e=je.domCache.get(this);e.validationMessage&&se(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),ne(t,d.inputerror))}const Dn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},kn=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Pn={allowEnterKey:void 0},Ln=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Mn=e=>Object.prototype.hasOwnProperty.call(Dn,e),jn=e=>-1!==kn.indexOf(e),Un=e=>Pn[e],Bn=e=>{Mn(e)||f('Unknown parameter "'.concat(e,'"'))},Fn=e=>{Ln.includes(e)&&f('The parameter "'.concat(e,'" is incompatible with toasts'))},Vn=e=>{const t=Un(e);t&&y(e,t)},Wn=e=>{!1===e.backdrop&&e.allowOutsideClick&&f('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)Bn(t),e.toast&&Fn(t),Vn(t)};function Hn(e){const t=T(),n=je.innerParams.get(this);if(!t||X(t,n.hideClass.popup))return void f("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r=zn(e),i=Object.assign({},n,r);ht(this,i),je.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const zn=e=>{const t={};return Object.keys(e).forEach((n=>{jn(n)?t[n]=e[n]:f("Invalid parameter to update: ".concat(n))})),t};function Gn(){const e=je.domCache.get(this),t=je.innerParams.get(this);t?(e.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),"function"===typeof t.didDestroy&&t.didDestroy(),s.eventEmitter.emit("didDestroy"),Yn(this)):Kn(this)}const Yn=e=>{Kn(e),delete e.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},Kn=e=>{e.isAwaitingPromise?(qn(je,e),e.isAwaitingPromise=!0):(qn(It,e),qn(je,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},qn=(e,t)=>{for(const n in e)e[n].delete(t)};var Xn=Object.freeze({__proto__:null,_destroy:Gn,close:zt,closeModal:zt,closePopup:zt,closeToast:zt,disableButtons:Rn,disableInput:xn,disableLoading:bn,enableButtons:Tn,enableInput:In,getInput:Sn,handleAwaitingPromise:Kt,hideLoading:bn,rejectPromise:Yt,resetValidationMessage:Nn,showValidationMessage:On,update:Hn});const Jn=(e,t,n)=>{e.toast?Qn(e,t,n):(er(t),tr(t),nr(e,t,n))},Qn=(e,t,n)=>{t.popup.onclick=()=>{e&&(Zn(e)||e.timer||e.input)||n(vt.close)}},Zn=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let $n=!1;const er=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&($n=!0)}}},tr=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&($n=!0)}}},nr=(e,t,n)=>{t.container.onclick=r=>{$n?$n=!1:r.target===t.container&&_(e.allowOutsideClick)&&n(vt.backdrop)}},rr=e=>"object"===typeof e&&e.jquery,ir=e=>e instanceof Element||rr(e),or=e=>{const t={};return"object"!==typeof e[0]||ir(e[0])?["title","html","icon"].forEach(((n,r)=>{const i=e[r];"string"===typeof i||ir(i)?t[n]=i:void 0!==i&&m("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(typeof i))})):Object.assign(t,e[0]),t};function sr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function ar(e){class t extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}return t}const cr=()=>s.timeout&&s.timeout.getTimerLeft(),lr=()=>{if(s.timeout)return me(),s.timeout.stop()},dr=()=>{if(s.timeout){const e=s.timeout.start();return fe(e),e}},ur=()=>{const e=s.timeout;return e&&(e.running?lr():dr())},hr=e=>{if(s.timeout){const t=s.timeout.increase(e);return fe(t,!0),t}},pr=()=>!(!s.timeout||!s.timeout.isRunning());let fr=!1;const mr={};function gr(){mr[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,fr||(document.body.addEventListener("click",vr),fr=!0)}const vr=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in mr){const n=t.getAttribute(e);if(n)return void mr[e].fire({template:n})}};class yr{constructor(){this.events={}}_getHandlersByEventName(e){return"undefined"===typeof this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const r=function(){n.removeListener(e,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];t.apply(n,o)};this.on(e,r)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,n)}catch(m){console.error(m)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}}s.eventEmitter=new yr;const _r=(e,t)=>{s.eventEmitter.on(e,t)},Er=(e,t)=>{s.eventEmitter.once(e,t)},br=(e,t)=>{e?t?s.eventEmitter.removeListener(e,t):s.eventEmitter.removeAllListeners(e):s.eventEmitter.reset()};var wr=Object.freeze({__proto__:null,argsToParams:or,bindClickHandler:gr,clickCancel:gt,clickConfirm:ft,clickDeny:mt,enableLoading:Zt,fire:sr,getActions:B,getCancelButton:L,getCloseButton:W,getConfirmButton:P,getContainer:S,getDenyButton:M,getFocusableElements:z,getFooter:F,getHtmlContainer:O,getIcon:R,getIconContent:I,getImage:N,getInputLabel:j,getLoader:U,getPopup:T,getProgressSteps:D,getTimerLeft:cr,getTimerProgressBar:V,getTitle:x,getValidationMessage:k,increaseTimer:hr,isDeprecatedParameter:Un,isLoading:K,isTimerRunning:pr,isUpdatableParameter:jn,isValidParameter:Mn,isVisible:pt,mixin:ar,off:br,on:_r,once:Er,resumeTimer:dr,showLoading:Zt,stopTimer:lr,toggleTimer:ur});class Sr{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Ar=["swal-title","swal-html","swal-footer"],Cr=e=>{const t="string"===typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return kr(n),Object.assign(Tr(n),Rr(n),Ir(n),xr(n),Or(n),Nr(n),Dr(n,Ar))},Tr=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach((e=>{Pr(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&("boolean"===typeof Dn[n]?t[n]="false"!==r:"object"===typeof Dn[n]?t[n]=JSON.parse(r):t[n]=r)})),t},Rr=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]=new Function("return ".concat(r))())})),t},Ir=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach((e=>{Pr(e,["type","color","aria-label"]);const n=e.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(t["".concat(n,"ButtonText")]=e.innerHTML,t["show".concat(p(n),"Button")]=!0,e.hasAttribute("color")&&(t["".concat(n,"ButtonColor")]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t["".concat(n,"ButtonAriaLabel")]=e.getAttribute("aria-label")))})),t},xr=e=>{const t={},n=e.querySelector("swal-image");return n&&(Pr(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},Or=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Pr(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},Nr=e=>{const t={},n=e.querySelector("swal-input");n&&(Pr(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach((e=>{Pr(e,["value"]);const n=e.getAttribute("value");if(!n)return;const r=e.innerHTML;t.inputOptions[n]=r}))),t},Dr=(e,t)=>{const n={};for(const r in t){const i=t[r],o=e.querySelector(i);o&&(Pr(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n},kr=e=>{const t=Ar.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||f("Unrecognized element <".concat(n,">"))}))},Pr=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&f(['Unrecognized attribute "'.concat(n.name,'" on <').concat(e.tagName.toLowerCase(),">."),"".concat(t.length?"Allowed attributes are: ".concat(t.join(", ")):"To set the value, use HTML within the element.")])}))},Lr=10,Mr=e=>{const t=S(),n=T();"function"===typeof e.willOpen&&e.willOpen(n),s.eventEmitter.emit("willOpen",n);const r=window.getComputedStyle(document.body).overflowY;Fr(t,n,e),setTimeout((()=>{Ur(t,n)}),Lr),G()&&(Br(t,e.scrollbarPadding,r),xt()),Y()||s.previousActiveElement||(s.previousActiveElement=document.activeElement),"function"===typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),s.eventEmitter.emit("didOpen",n),ne(t,d["no-transition"])},jr=e=>{const t=T();if(e.target!==t)return;const n=S();t.removeEventListener("animationend",jr),t.removeEventListener("transitionend",jr),n.style.overflowY="auto"},Ur=(e,t)=>{pe(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",jr),t.addEventListener("transitionend",jr)):e.style.overflowY="auto"},Br=(e,t,n)=>{Dt(),t&&"hidden"!==n&&Ft(n),setTimeout((()=>{e.scrollTop=0}))},Fr=(e,t,n)=>{te(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),oe(t,"grid"),setTimeout((()=>{te(t,n.showClass.popup),t.style.removeProperty("opacity")}),Lr)):oe(t,"grid"),te([document.documentElement,document.body],d.shown),n.heightAuto&&n.backdrop&&!n.toast&&te([document.documentElement,document.body],d["height-auto"])};var Vr={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Wr(e){e.inputValidator||("email"===e.input&&(e.inputValidator=Vr.email),"url"===e.input&&(e.inputValidator=Vr.url))}function Hr(e){(!e.target||"string"===typeof e.target&&!document.querySelector(e.target)||"string"!==typeof e.target&&!e.target.appendChild)&&(f('Target parameter is not valid, defaulting to "body"'),e.target="body")}function zr(e){Wr(e),e.showLoaderOnConfirm&&!e.preConfirm&&f("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),Hr(e),"string"===typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Ae(e)}let Gr;var Yr=new WeakMap;class Kr{constructor(){if(r(this,Yr,void 0),"undefined"===typeof window)return;Gr=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=Object.freeze(this.constructor.argsToParams(t));this.params=o,this.isAwaitingPromise=!1,i(Yr,this,this._main(Gr.params))}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Wn(Object.assign({},t,e)),s.currentInstance){const e=It.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:t}=s.currentInstance;s.currentInstance._destroy(),t||e({isDismissed:!0}),G()&&Ot()}s.currentInstance=Gr;const n=Xr(e,t);zr(n),Object.freeze(n),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);const r=Jr(Gr);return ht(Gr,n),je.innerParams.set(Gr,n),qr(Gr,r,n)}then(e){return n(Yr,this).then(e)}finally(e){return n(Yr,this).finally(e)}}const qr=(e,t,n)=>new Promise(((r,i)=>{const o=t=>{e.close({isDismissed:!0,dismiss:t})};It.swalPromiseResolve.set(e,r),It.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{hn(e)},t.denyButton.onclick=()=>{pn(e)},t.cancelButton.onclick=()=>{fn(e,o)},t.closeButton.onclick=()=>{o(vt.close)},Jn(n,t,o),_t(s,n,o),en(e,n),Mr(n),Qr(s,n,o),Zr(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),Xr=(e,t)=>{const n=Cr(e),r=Object.assign({},Dn,t,n,e);return r.showClass=Object.assign({},Dn.showClass,r.showClass),r.hideClass=Object.assign({},Dn.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},Jr=e=>{const t={popup:T(),container:S(),actions:B(),confirmButton:P(),denyButton:M(),cancelButton:L(),loader:U(),closeButton:W(),validationMessage:k(),progressSteps:D()};return je.domCache.set(e,t),t},Qr=(e,t,n)=>{const r=V();se(r),t.timer&&(e.timeout=new Sr((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(oe(r),Q(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&fe(t.timer)}))))},Zr=(e,t)=>{if(!t.toast)return _(t.allowEnterKey)?void($r(e)||ei(e,t)||Et(-1,1)):(y("allowEnterKey"),void ti())},$r=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&de(n))return n.focus(),!0;return!1},ei=(e,t)=>t.focusDeny&&de(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&de(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!de(e.confirmButton))&&(e.confirmButton.focus(),!0),ti=()=>{document.activeElement instanceof HTMLElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!==typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation","".concat(e))}Kr.prototype.disableButtons=Rn,Kr.prototype.enableButtons=Tn,Kr.prototype.getInput=Sn,Kr.prototype.disableInput=xn,Kr.prototype.enableInput=In,Kr.prototype.hideLoading=bn,Kr.prototype.disableLoading=bn,Kr.prototype.showValidationMessage=On,Kr.prototype.resetValidationMessage=Nn,Kr.prototype.close=zt,Kr.prototype.closePopup=zt,Kr.prototype.closeModal=zt,Kr.prototype.closeToast=zt,Kr.prototype.rejectPromise=Yt,Kr.prototype.update=Hn,Kr.prototype._destroy=Gn,Object.assign(Kr,wr),Object.keys(Xn).forEach((e=>{Kr[e]=function(){return Gr&&Gr[e]?Gr[e](...arguments):null}})),Kr.DismissReason=vt,Kr.version="11.14.5";const ni=Kr;return ni.default=ni,ni}(),"undefined"!==typeof this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},1643:(e,t,n)=>{const r=n(8083);e.exports={recognize:async(e,t,n)=>{const i=await r(t,1,n);return i.recognize(e).finally((async()=>{await i.terminate()}))},detect:async(e,t)=>{const n=await r("osd",0,t);return n.detect(e).finally((async()=>{await n.terminate()}))}}},2304:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},2039:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},1139:e=>{e.exports={workerBlobURL:!0,logger:()=>{}}},6982:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},638:(e,t,n)=>{const r=n(2709);let i=0;e.exports=e=>{let{id:t,action:n,payload:o={}}=e,s=t;return"undefined"===typeof s&&(s=r("Job",i),i+=1),{id:s,action:n,payload:o}}},2086:function(e,t,n){const r=n(638),{log:i}=n(287),o=n(2709);let s=0;e.exports=()=>{const e=o("Scheduler",s),t={},n={};let a=[];s+=1;const c=()=>Object.keys(t).length,l=()=>{if(0!==a.length){const e=Object.keys(t);for(let r=0;r<e.length;r+=1)if("undefined"===typeof n[e[r]]){a[0](t[e[r]]);break}}},d=(t,o)=>new Promise(((s,c)=>{const d=r({action:t,payload:o});a.push((async e=>{a.shift(),n[e.id]=d;try{s(await e[t].apply(this,[...o,d.id]))}catch(r){c(r)}finally{delete n[e.id],l()}})),i("[".concat(e,"]: Add ").concat(d.id," to JobQueue")),i("[".concat(e,"]: JobQueue length=").concat(a.length)),l()}));return{addWorker:n=>(t[n.id]=n,i("[".concat(e,"]: Add ").concat(n.id)),i("[".concat(e,"]: Number of workers=").concat(c())),l(),n.id),addJob:async function(t){if(0===c())throw Error("[".concat(e,"]: You need to have at least one worker before adding jobs"));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return d(t,r)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),a=[]},getQueueLen:()=>a.length,getNumWorkers:c}}},8083:(e,t,n)=>{var r=n(2122).default,i=n(215).default;const o=["logger","errorHandler"],s=n(6220),a=n(638),{log:c}=n(287),l=n(2709),d=n(2304),{defaultOptions:u,spawnWorker:h,terminateWorker:p,onMessage:f,loadImage:m,send:g}=n(1516);let v=0;e.exports=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.LSTM_ONLY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const _=l("Worker",v),E=s(r(r({},u),n)),{logger:b,errorHandler:w}=E,S=i(E,o),A={},C="string"===typeof e?e.split("+"):e;let T=t,R=y;const I=[d.DEFAULT,d.LSTM_ONLY].includes(t)&&!S.legacyCore;let x,O;const N=new Promise(((e,t)=>{O=e,x=t}));let D=h(S);D.onerror=e=>{x(e.message)},v+=1;const k=e=>{let{id:t,action:n,payload:r}=e;return new Promise(((e,i)=>{c("[".concat(_,"]: Start ").concat(t,", action=").concat(n));const o="".concat(n,"-").concat(t);A[o]={resolve:e,reject:i},g(D,{workerId:_,jobId:t,action:n,payload:r})}))},P=(e,t)=>k(a({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:S.langPath,dataPath:S.dataPath,cachePath:S.cachePath,cacheMethod:S.cacheMethod,gzip:S.gzip,lstmOnly:[d.DEFAULT,d.LSTM_ONLY].includes(T)&&!S.legacyLang}}})),L=(e,t,n,r)=>k(a({id:r,action:"initialize",payload:{langs:e,oem:t,config:n}}));f(D,(e=>{let{workerId:t,jobId:n,status:i,action:o,data:s}=e;const a="".concat(o,"-").concat(n);if("resolve"===i)c("[".concat(t,"]: Complete ").concat(n)),A[a].resolve({jobId:n,data:s}),delete A[a];else if("reject"===i){if(A[a].reject(s),delete A[a],"load"===o&&x(s),!w)throw Error(s);w(s)}else"progress"===i&&b(r(r({},s),{},{userJobId:n}))}));const M={id:_,worker:D,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,n)=>k(a({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>k(a({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>k(a({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>k(a({id:n,action:"FS",payload:{method:e,args:t}})),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(I&&[d.TESSERACT_ONLY,d.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const i=t||T;T=i;const o=n||R;R=o;const s=("string"===typeof e?e.split("+"):e).filter((e=>!C.includes(e)));return C.push(...s),s.length>0?P(s,r).then((()=>L(e,i,o,r))):L(e,i,o,r)},setParameters:function(){return k(a({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},recognize:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{text:!0};return k(a({id:arguments.length>3?arguments[3]:void 0,action:"recognize",payload:{image:await m(e),options:t,output:n}}))},detect:async(e,t)=>{if(I)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return k(a({id:t,action:"detect",payload:{image:await m(e)}}))},terminate:async()=>(null!==D&&(p(D),D=null),Promise.resolve())};var j;return k(a({id:j,action:"load",payload:{options:{lstmOnly:I,corePath:S.corePath,logging:S.logging}}})).then((()=>P(e))).then((()=>L(e,t,y))).then((()=>O(M))).catch((()=>{})),N}},1362:(e,t,n)=>{var r=n(2122).default;const i=n(2086),o=n(8083),s=n(1643),a=n(6982),c=n(2304),l=n(2039),{setLogging:d}=n(287);e.exports=r({languages:a,OEM:c,PSM:l,createScheduler:i,createWorker:o,setLogging:d},s)},7291:e=>{e.exports=e=>{const t={};return"undefined"!==typeof WorkerGlobalScope?t.type="webworker":"object"===typeof document?t.type="browser":"object"===typeof process&&(t.type="node"),"undefined"===typeof e?t:t[e]}},2709:e=>{e.exports=(e,t)=>"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8))},287:function(e,t){var n=this;let r=!1;t.logging=r,t.setLogging=e=>{r=e},t.log=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r?console.log.apply(n,t):null}},6220:(e,t,n)=>{var r=n(2122).default;const i="browser"===n(7291)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t=r({},e);return["corePath","workerPath","langPath"].forEach((n=>{e[n]&&(t[n]=i(t[n]))})),t}},2993:(e,t,n)=>{var r=n(2122).default;const i=n(4547).i8,o=n(1139);e.exports=r(r({},o),{},{workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js@v".concat(i,"/dist/worker.min.js")})},1516:(e,t,n)=>{const r=n(2993),i=n(778),o=n(6821),s=n(3183),a=n(3766),c=n(1752);e.exports={defaultOptions:r,spawnWorker:i,terminateWorker:o,onMessage:s,send:a,loadImage:c}},1752:e=>{const t=e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=e=>{let{target:{error:{code:t}}}=e;n(Error("File could not be read! Code=".concat(t)))},r.readAsArrayBuffer(e)})),n=async e=>{let r=e;if("undefined"===typeof e)return"undefined";if("string"===typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))r=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const t=await fetch(e);r=await t.arrayBuffer()}else if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(r=await n(e.src)),"VIDEO"===e.tagName&&(r=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise((n=>{e.toBlob((async e=>{r=await t(e),n()}))}));else if("undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();r=await t(n)}else(e instanceof File||e instanceof Blob)&&(r=await t(e));return new Uint8Array(r)};e.exports=n},3183:e=>{e.exports=(e,t)=>{e.onmessage=e=>{let{data:n}=e;t(n)}}},3766:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},778:e=>{e.exports=e=>{let t,{workerPath:n,workerBlobURL:r}=e;if(Blob&&URL&&r){const e=new Blob(['importScripts("'.concat(n,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(n);return t}},6821:e=>{e.exports=e=>{e.terminate()}},5915:(e,t,n)=>{"use strict";var r=n(3841),i=n(6962),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function u(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,r=("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"===o)for(t in i=new v(e,{}),p)delete i[t];else if("object"===o){for(t in e)t in p||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=u(e)).replace(s,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],c=0;return o?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):m(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||m(i),slashesCount:c,rest:n}}function v(e,t,n){if(e=(e=u(e)).replace(s,""),!(this instanceof v))return new v(e,t,n);var o,a,c,l,p,y,_=h.slice(),E=typeof t,b=this,w=0;for("object"!==E&&"string"!==E&&(n=t,t=null),n&&"function"!==typeof n&&(n=i.parse),o=!(a=g(e||"",t=f(t))).protocol&&!a.slashes,b.slashes=a.slashes||o&&t.slashes,b.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||d.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(b.protocol)))&&(_[3]=[/(.*)/,"pathname"]);w<_.length;w++)"function"!==typeof(l=_[w])?(c=l[0],y=l[1],c!==c?b[y]=e:"string"===typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"===typeof l[2]?(b[y]=e.slice(0,p),e=e.slice(p+l[2])):(b[y]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(b[y]=p[1],e=e.slice(0,p.index)),b[y]=b[y]||o&&l[3]&&t[y]||"",l[4]&&(b[y]=b[y].toLowerCase())):e=l(e,b);n&&(b.query=n(b.query)),o&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&m(b.protocol)&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(p=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,p),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(p+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&m(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<h.length;l++){var d=h[l];d[4]&&(o[d[1]]=o[d[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"===typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(s+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,(t="object"===typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},v.extractProtocol=g,v.location=f,v.trimLeft=u,v.qs=i,e.exports=v},8637:(e,t,n)=>{"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,s=r.useRef,a=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,d){var u=s(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=c((function(){function e(e){if(!a){if(a=!0,o=e,e=r(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==d&&d(t,n)?t:(o=e,s=n)}var o,s,a=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,d]);var p=o(e,u[0],u[1]);return a((function(){h.hasValue=!0,h.value=p}),[p]),l(p),p}},7995:(e,t,n)=>{"use strict";e.exports=n(8637)},8416:(e,t,n)=>{var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},2122:(e,t,n)=>{var r=n(8416);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},215:(e,t,n)=>{var r=n(7071);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},7071:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},5036:(e,t,n)=>{var r=n(8698).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:(e,t,n)=>{var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6075:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o.call(this,n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return this&&this[e]||e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(this,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,this&&this[n]||n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},4547:e=>{"use strict";e.exports={i8:"6.0.0"}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".00ca179d.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/FE_AUCTIONONLINE/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],c=r[2],l=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)c(n)}for(t&&t(r);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>dr,hasStandardBrowserEnv:()=>hr,hasStandardBrowserWebWorkerEnv:()=>pr,navigator:()=>ur,origin:()=>fr});var t=n(2791),r=n.t(t,2),i=n(1250);function o(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function s(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(6490);const h=["page"],p=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function y(){return C((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return w("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:S(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function _(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function E(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function b(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?A(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function A(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function C(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",c=null,l=d();function d(){return(s.state||{idx:null}).idx}function h(){a="POP";let e=d(),t=null==e?null:e-l;l=e,c&&c({action:a,location:f.location,delta:t})}function p(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:S(e);return n=n.replace(/ $/,"%20"),_(t,"No window.location.(origin|href) available to create URL for href: ".concat(n)),new URL(n,t)}null==l&&(l=0,s.replaceState(u(u({},s.state),{},{idx:l}),""));let f={get action(){return a},get location(){return e(i,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(v,h),c=e,()=>{i.removeEventListener(v,h),c=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=w(f.location,e,t);n&&n(r,e),l=d()+1;let u=b(r,l),h=f.createHref(r);try{s.pushState(u,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(h)}o&&c&&c({action:a,location:f.location,delta:1})},replace:function(e,t){a="REPLACE";let r=w(f.location,e,t);n&&n(r,e),l=d();let i=b(r,l),u=f.createHref(r);s.replaceState(i,"",u),o&&c&&c({action:a,location:f.location,delta:0})},go:e=>s.go(e)};return f}function T(e,t){return R(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function R(e,t,n,r){let i=V(("string"===typeof t?A(t):t).pathname||"/",n);if(null==i)return null;let o=I(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=F(i);s=U(o[a],e,r)}return s}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(_(s.relativePath.startsWith(r),'Absolute route path "'.concat(s.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),s.relativePath=s.relativePath.slice(r.length));let a=Y([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(_(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(a,'".')),I(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:j(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of x(e.path))i(e,t,r);else i(e,t)})),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=x(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var O=/^:[\w-]+$/,N=3,D=2,k=1,P=10,L=-2,M=e=>"*"===e;function j(e,t){let n=e.split("/"),r=n.length;return n.some(M)&&(r+=L),t&&(r+=D),n.filter((e=>!M(e))).reduce(((e,t)=>e+(O.test(t)?N:""===t?k:P)),r)}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],c=a===r.length-1,l="/"===o?t:t.slice(o.length)||"/",d=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),u=e.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Y([o,d.pathname]),pathnameBase:K(Y([o,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(o=Y([o,d.pathnameBase]))}return s}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];E("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),c=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{});return{params:c,pathname:o,pathnameBase:s,pattern:e}}function F(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return E(!1,'The URL path "'.concat(e,'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function W(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function z(e){let t=H(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function G(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=A(e):(r=u({},e),_(!r.pathname||!r.pathname.includes("?"),W("?","pathname","search",r)),_(!r.pathname||!r.pathname.includes("#"),W("#","pathname","hash",r)),_(!r.search||!r.search.includes("#"),W("#","search","hash",r)));let o,s=""===e||""===r.pathname,a=s?"/":r.pathname;if(null==a)o=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?A(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:q(r),hash:X(i)}}(r,o),l=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!l&&!d||(c.pathname+="/"),c}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),K=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function J(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Q=["POST","PUT","PATCH","DELETE"],Z=(new Set(Q),["GET",...Q]);new Set(Z),Symbol("ResetLoaderData");var $=t.createContext(null);$.displayName="DataRouter";var ee=t.createContext(null);ee.displayName="DataRouterState";var te=t.createContext({isTransitioning:!1});te.displayName="ViewTransition";var ne=t.createContext(new Map);ne.displayName="Fetchers";var re=t.createContext(null);re.displayName="Await";var ie=t.createContext(null);ie.displayName="Navigation";var oe=t.createContext(null);oe.displayName="Location";var se=t.createContext({outlet:null,matches:[],isDataRoute:!1});se.displayName="Route";var ae=t.createContext(null);ae.displayName="RouteError";var ce=!0;function le(){return null!=t.useContext(oe)}function de(){return _(le(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(oe).location}var ue="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function he(e){t.useContext(ie).static||t.useLayoutEffect(e)}function pe(){let{isDataRoute:e}=t.useContext(se);return e?function(){let{router:e}=Se("useNavigate"),n=Ce("useNavigate"),r=t.useRef(!1);he((()=>{r.current=!0}));let i=t.useCallback((async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(r.current,ue),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,u({fromRouteId:n},i)))}),[e,n]);return i}():function(){_(le(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext($),{basename:n,navigator:r}=t.useContext(ie),{matches:i}=t.useContext(se),{pathname:o}=de(),s=JSON.stringify(z(i)),a=t.useRef(!1);he((()=>{a.current=!0}));let c=t.useCallback((function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(E(a.current,ue),!a.current)return;if("number"===typeof t)return void r.go(t);let c=G(t,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==n&&(c.pathname="/"===c.pathname?n:Y([n,c.pathname])),(i.replace?r.replace:r.push)(c,i.state,i)}),[n,r,s,o,e]);return c}()}t.createContext(null);function fe(){let{matches:e}=t.useContext(se),n=e[e.length-1];return n?n.params:{}}function me(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(se),{pathname:i}=de(),o=JSON.stringify(z(r));return t.useMemo((()=>G(e,JSON.parse(o),i,"path"===n)),[e,o,i,n])}function ge(e,n,r,i){_(le(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=t.useContext(ie),{matches:s}=t.useContext(se),a=s[s.length-1],c=a?a.params:{},l=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;if(ce){let e=h&&h.path||"";Ie(l,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(l,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=de();if(n){var m;let e="string"===typeof n?A(n):n;_("/"===d||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let g=p.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=T(e,{pathname:v});ce&&(E(h||null!=y,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),E(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.')));let b=be(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Y([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Y([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r,i);return n&&b?t.createElement(oe.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},b):b}function ve(){let e=Te(),n=J(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return ce&&(console.error("Error handled by React Router default ErrorBoundary:",e),a=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:s},"ErrorBoundary")," or"," ",t.createElement("code",{style:s},"errorElement")," prop on your route."))),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,a)}var ye=t.createElement(ve,null),_e=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(se.Provider,{value:this.props.routeContext},t.createElement(ae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ee(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext($);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(se.Provider,{value:n},i)}function be(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let i=e,o=null===r||void 0===r?void 0:r.errors;if(null!=o){let e=i.findIndex((e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id])));_(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,a=-1;if(r)for(let t=0;t<i.length;t++){let e=i[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=t),e.route.id){let{loaderData:t,errors:n}=r,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||o){s=!0,i=a>=0?i.slice(0,a+1):[i[0]];break}}}return i.reduceRight(((e,c,l)=>{let d,u=!1,h=null,p=null;r&&(d=o&&c.route.id?o[c.route.id]:void 0,h=c.route.errorElement||ye,s&&(a<0&&0===l?(Ie("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,p=null):a===l&&(u=!0,p=c.route.hydrateFallbackElement||null)));let f=n.concat(i.slice(0,l+1)),m=()=>{let n;return n=d?h:u?p:c.route.Component?t.createElement(c.route.Component,null):c.route.element?c.route.element:e,t.createElement(Ee,{match:c,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:n})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===l)?t.createElement(_e,{location:r.location,revalidation:r.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Se(e){let n=t.useContext($);return _(n,we(e)),n}function Ae(e){let n=t.useContext(ee);return _(n,we(e)),n}function Ce(e){let n=function(e){let n=t.useContext(se);return _(n,we(e)),n}(e),r=n.matches[n.matches.length-1];return _(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function Te(){var e;let n=t.useContext(ae),r=Ae("useRouteError"),i=Ce("useRouteError");return void 0!==n?n:null===(e=r.errors)||void 0===e?void 0:e[i]}var Re={};function Ie(e,t,n){t||Re[e]||(Re[e]=!0,E(!1,n))}t.memo((function(e){let{routes:t,future:n,state:r}=e;return ge(t,void 0,r,n)}));function xe(e){_(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oe(e){let{basename:n="/",children:r=null,location:i,navigationType:o="POP",navigator:s,static:a=!1}=e;_(!le(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),l=t.useMemo((()=>({basename:c,navigator:s,static:a,future:{}})),[c,s,a]);"string"===typeof i&&(i=A(i));let{pathname:d="/",search:u="",hash:h="",state:p=null,key:f="default"}=i,m=t.useMemo((()=>{let e=V(d,c);return null==e?null:{location:{pathname:e,search:u,hash:h,state:p,key:f},navigationType:o}}),[c,d,u,h,p,f,o]);return E(null!=m,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:t.createElement(ie.Provider,{value:l},t.createElement(oe.Provider,{children:r,value:m}))}function Ne(e){let{children:t,location:n}=e;return ge(De(t),n)}t.Component;function De(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,De(e.props.children,o));_(e.type===xe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),_(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=De(e.props.children,o)),r.push(s)})),r}var ke="get",Pe="application/x-www-form-urlencoded";function Le(e){return null!=e&&"string"===typeof e.tagName}function Me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}var je=null;var Ue=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Be(e){return null==e||Ue.has(e)?e:(E(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Pe,'"')),null)}function Fe(e,t){let n,r,i,o,s;if(Le(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?V(s,t):null,n=e.getAttribute("method")||ke,i=Be(e.getAttribute("enctype"))||Pe,o=new FormData(e)}else if(function(e){return Le(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Le(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(r=a?V(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||ke,i=Be(e.getAttribute("formenctype"))||Be(s.getAttribute("enctype"))||Pe,o=new FormData(s,e),!function(){if(null===je)try{new FormData(document.createElement("form"),0),je=!1}catch(e){je=!0}return je}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Le(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ke,r=null,i=Pe,s=e}var a;return o&&"text/plain"===i&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function Ve(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function We(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function He(e){return null!=e&&"string"===typeof e.page}function ze(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ge(e,t,n,r,i,o){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter(((e,t)=>s(e,t)||a(e,t))):"data"===o?t.filter(((t,o)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(s(t,o)||a(t,o))return!0;if(t.route.shouldRevalidate){var l;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(l=n[0])||void 0===l?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Ye(e){return[...new Set(e)]}function Ke(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,i)=>{if(t&&!He(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e}),[])}function qe(e){return{__html:e}}Symbol("SingleFetchRedirect");function Xe(e){let t="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===t.pathname?t.pathname="_root.data":t.pathname="".concat(t.pathname.replace(/\/$/,""),".data"),t}t.Component;function Je(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,i=React5.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(J(t))return React5.createElement(Qe,{title:"Unhandled Thrown Response!"},React5.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return React5.createElement(Qe,{title:"Application Error!",isOutsideRemixApp:n},React5.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),React5.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),i)}function Qe(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:i,children:o}=e,{routeModules:s}=nt();return null!==s.root&&void 0!==t&&t.Layout&&!i?o:React5.createElement("html",{lang:"en"},React5.createElement("head",null,React5.createElement("meta",{charSet:"utf-8"}),React5.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),React5.createElement("title",null,n)),React5.createElement("body",null,React5.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,r?React5.createElement(lt,null):null)))}function Ze(e){return!e}function $e(){let e=t.useContext($);return Ve(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function et(){let e=t.useContext(ee);return Ve(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tt=t.createContext(void 0);function nt(){let e=t.useContext(tt);return Ve(e,"You must render this element inside a <HydratedRouter> element"),e}function rt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function it(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function ot(e){let{page:n}=e,r=s(e,h),{router:i}=$e(),o=t.useMemo((()=>T(i.routes,n,i.basename)),[i.routes,n,i.basename]);return o?t.createElement(at,u({page:n,matches:o},r)):(console.warn("Tried to prefetch ".concat(n," but no routes matched.")),null)}function st(e){let{manifest:n,routeModules:r}=nt(),[i,o]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,n){return Ke((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await We(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(ze).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"}))))}(e,n,r).then((e=>{t||o(e)})),()=>{t=!0}}),[e,n,r]),i}function at(e){let{page:n,matches:r}=e,i=s(e,p),o=de(),{manifest:a,routeModules:c}=nt(),{loaderData:l,matches:d}=et(),h=t.useMemo((()=>Ge(n,r,d,a,o,"data")),[n,r,d,a,o]),f=t.useMemo((()=>Ge(n,r,d,a,o,"assets")),[n,r,d,a,o]),m=t.useMemo((()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach((n=>{var r;let i=a.routes[n.route.id];i&&i.hasLoader&&(!h.some((e=>e.route.id===n.route.id))&&n.route.id in l&&null!==(r=c[n.route.id])&&void 0!==r&&r.shouldRevalidate||i.hasClientLoader?t=!0:e.add(n.route.id))})),0===e.size)return[];let i=Xe(n);return t&&e.size>0&&i.searchParams.set("_routes",r.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[i.pathname+i.search]}),[l,o,a,h,r,n,c]),g=t.useMemo((()=>function(e,t){return Ye(e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let r=[n.module];return n.imports&&(r=r.concat(n.imports)),r})).flat(1))}(f,a)),[f,a]),v=st(f);return t.createElement(t.Fragment,null,m.map((e=>t.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},i)))),g.map((e=>t.createElement("link",u({key:e,rel:"modulepreload",href:e},i)))),v.map((e=>{let{key:n,link:r}=e;return t.createElement("link",u({key:n},r))})))}tt.displayName="FrameworkContext";var ct=!1;function lt(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:i}=nt(),{router:o,static:s,staticContext:a}=$e(),{matches:c}=et(),l=Ze(r);i&&(i.didRenderScripts=!0);let d=it(c,null,r);React9.useEffect((()=>{!0}),[]);let u=React9.useMemo((()=>{var r;let i=a?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=s?"".concat(null!==t.hmr&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(l?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(d.map(((e,n)=>"import * as route".concat(n," from ").concat(JSON.stringify(t.routes[e.route.id].module),";"))).join("\n"),"\n  ").concat(l?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let n=new Set(t.state.matches.map((e=>e.route.id))),r=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(r.pop();r.length>0;)i.push("/".concat(r.join("/"))),r.pop();i.forEach((e=>{let r=T(t.routes,e,t.basename);r&&r.forEach((e=>n.add(e.route.id)))}));let o=[...n].reduce(((t,n)=>Object.assign(t,{[n]:e.routes[n]})),{});return _objectSpread(_objectSpread({},e),{},{routes:o})}(t,o),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(d.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return React9.createElement(React9.Fragment,null,React9.createElement("script",_objectSpread(_objectSpread({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:qe(i),type:void 0})),React9.createElement("script",_objectSpread(_objectSpread({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:qe(c),type:"module",async:!0})))}),[]),h=d.map((e=>{let n=t.routes[e.route.id];return n?(n.imports||[]).concat([n.module]):[]})).flat(1),p=ct?[]:t.entry.imports.concat(h);return ct?null:React9.createElement(React9.Fragment,null,l?null:React9.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin}),React9.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin}),(p,[...new Set(f)]).map((t=>React9.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin}))),u);var f}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var ut="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ut&&(window.__reactRouterVersion="7.0.2")}catch(eU){}function ht(e){let{basename:n,children:r,window:i}=e,o=t.useRef();null==o.current&&(o.current=y({window:i,v5Compat:!0}));let s=o.current,[a,c]=t.useState({action:s.action,location:s.location}),l=t.useCallback((e=>{t.startTransition((()=>c(e)))}),[c]);return t.useLayoutEffect((()=>s.listen(l)),[s,l]),t.createElement(Oe,{basename:n,children:r,location:a.location,navigationType:a.action,navigator:s})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=t.forwardRef((function(e,n){let r,{onClick:i,discover:o="render",prefetch:a="none",relative:c,reloadDocument:l,replace:d,state:h,target:p,to:m,preventScrollReset:g,viewTransition:v}=e,y=s(e,f),{basename:b}=t.useContext(ie),w="string"===typeof m&&pt.test(m),A=!1;if("string"===typeof m&&w&&(r=m,ut))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=V(t.pathname,b);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:A=!0}catch(eU){E(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(le(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=t.useContext(ie),{hash:o,pathname:s,search:a}=me(e,{relative:n}),c=s;return"/"!==r&&(c="/"===s?r:Y([r,s])),i.createHref({pathname:c,search:a,hash:o})}(m,{relative:c}),[T,R,I]=function(e,n){let r=t.useContext(tt),[i,o]=t.useState(!1),[s,a]=t.useState(!1),{onFocus:c,onBlur:l,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=n,p=t.useRef(null);t.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=e=>{e.forEach((e=>{a(e.isIntersecting)}))},t=new IntersectionObserver(e,{threshold:.5});return p.current&&t.observe(p.current),()=>{t.disconnect()}}}),[e]),t.useEffect((()=>{if(i){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[i]);let f=()=>{o(!0)},m=()=>{o(!1),a(!1)};return r?"intent"!==e?[s,p,{}]:[s,p,{onFocus:rt(c,f),onBlur:rt(l,m),onMouseEnter:rt(d,f),onMouseLeave:rt(u,m),onTouchStart:rt(h,f)}]:[!1,p,{}]}(a,y),x=function(e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=pe(),l=de(),d=me(e,{relative:s});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:S(l)===S(d);c(e,{replace:n,state:i,preventScrollReset:o,relative:s,viewTransition:a})}}),[l,c,d,r,i,n,e,o,s,a])}(m,{replace:d,state:h,target:p,preventScrollReset:g,relative:c,viewTransition:v});let O=t.createElement("a",u(u(u({},y),I),{},{href:r||C,onClick:A||l?i:function(e){i&&i(e),e.defaultPrevented||x(e)},ref:dt(n,R),target:p,"data-discover":w||"render"!==o?void 0:"true"}));return T&&!w?t.createElement(t.Fragment,null,O,t.createElement(ot,{page:C})):O}));ft.displayName="Link";var mt=t.forwardRef((function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:c,to:l,viewTransition:d,children:h}=e,p=s(e,m),f=me(l,{relative:p.relative}),g=de(),v=t.useContext(ee),{navigator:y,basename:E}=t.useContext(ie),b=null!=v&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext(te);_(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=yt("useViewTransitionState"),o=me(e,{relative:n.relative});if(!r.isTransitioning)return!1;let s=V(r.currentLocation.pathname,i)||r.currentLocation.pathname,a=V(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=B(o.pathname,a)||null!=B(o.pathname,s)}(f)&&!0===d,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=g.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(S=S.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&E&&(A=V(A,E)||A);const C="/"!==w&&w.endsWith("/")?w.length-1:w.length;let T,R=S===w||!a&&S.startsWith(w)&&"/"===S.charAt(C),I=null!=A&&(A===w||!a&&A.startsWith(w)&&"/"===A.charAt(w.length)),x={isActive:R,isPending:I,isTransitioning:b},O=R?r:void 0;T="function"===typeof o?o(x):[o,R?"active":null,I?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let N="function"===typeof c?c(x):c;return t.createElement(ft,u(u({},p),{},{"aria-current":O,className:T,ref:n,style:N,to:l,viewTransition:d}),"function"===typeof h?h(x):h)}));mt.displayName="NavLink";var gt=t.forwardRef(((e,n)=>{let{discover:r="render",fetcherKey:i,navigate:o,reloadDocument:a,replace:c,state:l,method:d=ke,action:h,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:v}=e,y=s(e,g),E=wt(),b=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(ie),i=t.useContext(se);_(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),s=u({},me(e||".",{relative:n})),a=de();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(s.pathname="/"===s.pathname?r:Y([r,s.pathname]));return S(s)}(h,{relative:f}),w="get"===d.toLowerCase()?"get":"post",A="string"===typeof h&&pt.test(h);return t.createElement("form",u(u({ref:n,method:w,action:b,onSubmit:a?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;E(t||e.currentTarget,{fetcherKey:i,method:n,navigate:o,replace:c,state:l,relative:f,preventScrollReset:m,viewTransition:v})}},y),{},{"data-discover":A||"render"!==r?void 0:"true"}))}));function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function yt(e){let n=t.useContext($);return _(n,vt(e)),n}function _t(e){E("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=t.useRef(Me(e)),r=t.useRef(!1),i=de(),o=t.useMemo((()=>function(e,t){let n=Me(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(i.search,r.current?null:n.current)),[i.search]),s=pe(),a=t.useCallback(((e,t)=>{const n=Me("function"===typeof e?e(o):e);r.current=!0,s("?"+n,t)}),[s,o]);return[o,a]}gt.displayName="Form";var Et=0,bt=()=>"__".concat(String(++Et),"__");function wt(){let{router:e}=yt("useSubmit"),{basename:n}=t.useContext(ie),r=Ce("useRouteId");return t.useCallback((async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:a,formData:c,body:l}=Fe(t,n);if(!1===i.navigate){let t=i.fetcherKey||bt();await e.fetch(t,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,n,r])}new TextEncoder;function St(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=St(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const At=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=St(e))&&(r&&(r+=" "),r+=t);return r},Ct=["theme","type","isLoading"],Tt=e=>"number"==typeof e&&!isNaN(e),Rt=e=>"string"==typeof e,It=e=>"function"==typeof e,xt=e=>Rt(e)||It(e)?e:null,Ot=e=>(0,t.isValidElement)(e)||Rt(e)||It(e)||Tt(e);function Nt(e){let{enter:n,exit:r,appendPosition:i=!1,collapse:o=!0,collapseDuration:s=300}=e;return function(e){let{children:a,position:c,preventExitTransition:l,done:d,nodeRef:u,isIn:h,playToast:p}=e;const f=i?"".concat(n,"--").concat(c):n,m=i?"".concat(r,"--").concat(c):r,g=(0,t.useRef)(0);return(0,t.useLayoutEffect)((()=>{const e=u.current,t=f.split(" "),n=r=>{r.target===u.current&&(p(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,t.useEffect)((()=>{const e=u.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,d,s):d()};h||(l?t():(g.current=1,e.className+=" ".concat(m),e.addEventListener("animationend",t)))}),[h]),t.createElement(t.Fragment,null,a)}}function Dt(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const kt=new Map;let Pt=[];const Lt=new Set,Mt=e=>Lt.forEach((t=>t(e))),jt=()=>kt.size>0;function Ut(e,t){var n;if(t)return!(null==(n=kt.get(t))||!n.isToastActive(e));let r=!1;return kt.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function Bt(e,t){Ot(e)&&(jt()||Pt.push({content:e,options:t}),kt.forEach((n=>{n.buildToast(e,t)})))}function Ft(e,t){kt.forEach((n=>{null!=t&&null!=t&&t.containerId?(null==t?void 0:t.containerId)===n.id&&n.toggle(e,null==t?void 0:t.id):n.toggle(e,null==t?void 0:t.id)}))}function Vt(e){const{subscribe:n,getSnapshot:r,setProps:i}=(0,t.useRef)(function(e){const n=e.containerId||1;return{subscribe(r){const i=function(e,n,r){let i=1,o=0,s=[],a=[],c=[],l=n;const d=new Map,h=new Set,p=()=>{c=Array.from(d.values()),h.forEach((e=>e()))},f=e=>{a=null==e?[]:a.filter((t=>t!==e)),p()},m=e=>{const{toastId:n,onOpen:i,updateId:o,children:s}=e.props,c=null==o;e.staleId&&d.delete(e.staleId),d.set(n,e),a=[...a,e.props.toastId].filter((t=>t!==e.staleId)),p(),r(Dt(e,c?"added":"updated")),c&&It(i)&&i((0,t.isValidElement)(s)&&s.props)};return{id:e,props:l,observe:e=>(h.add(e),()=>h.delete(e)),toggle:(e,t)=>{d.forEach((n=>{null!=t&&t!==n.props.toastId||It(n.toggle)&&n.toggle(e)}))},removeToast:f,toasts:d,clearQueue:()=>{o-=s.length,s=[]},buildToast:(n,a)=>{if((t=>{let{containerId:n,toastId:r,updateId:i}=t;const o=n?n!==e:1!==e,s=d.has(r)&&null==i;return o||s})(a))return;const{toastId:c,updateId:h,data:g,staleId:v,delay:y}=a,_=()=>{f(c)},E=null==h;E&&o++;const b=u(u(u({},l),{},{style:l.toastStyle,key:i++},Object.fromEntries(Object.entries(a).filter((e=>{let[t,n]=e;return null!=n})))),{},{toastId:c,updateId:h,data:g,closeToast:_,isIn:!1,className:xt(a.className||l.toastClassName),bodyClassName:xt(a.bodyClassName||l.bodyClassName),progressClassName:xt(a.progressClassName||l.progressClassName),autoClose:!a.isLoading&&(w=a.autoClose,S=l.autoClose,!1===w||Tt(w)&&w>0?w:S),deleteToast(){const e=d.get(c),{onClose:n,children:i}=e.props;It(n)&&n((0,t.isValidElement)(i)&&i.props),r(Dt(e,"removed")),d.delete(c),o--,o<0&&(o=0),s.length>0?m(s.shift()):p()}});var w,S;b.closeButton=l.closeButton,!1===a.closeButton||Ot(a.closeButton)?b.closeButton=a.closeButton:!0===a.closeButton&&(b.closeButton=!Ot(l.closeButton)||l.closeButton);let A=n;(0,t.isValidElement)(n)&&!Rt(n.type)?A=(0,t.cloneElement)(n,{closeToast:_,toastProps:b,data:g}):It(n)&&(A=n({closeToast:_,toastProps:b,data:g}));const C={content:A,props:b,staleId:v};l.limit&&l.limit>0&&o>l.limit&&E?s.push(C):Tt(y)?setTimeout((()=>{m(C)}),y):m(C)},setProps(e){l=e},setToggle:(e,t)=>{d.get(e).toggle=t},isToastActive:e=>a.some((t=>t===e)),getSnapshot:()=>c}}(n,e,Mt);kt.set(n,i);const o=i.observe(r);return Pt.forEach((e=>Bt(e.content,e.options))),Pt=[],()=>{o(),kt.delete(n)}},setProps(e){var t;null==(t=kt.get(n))||t.setProps(e)},getSnapshot(){var e;return null==(e=kt.get(n))?void 0:e.getSnapshot()}}}(e)).current;i(e);const o=(0,t.useSyncExternalStore)(n,r,r);return{getToastToRender:function(t){if(!o)return[];const n=new Map;return e.newestOnTop&&o.reverse(),o.forEach((e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:Ut,count:null==o?void 0:o.length}}function Wt(e){const[n,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1),s=(0,t.useRef)(null),a=(0,t.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:l,closeToast:d,onClick:u,closeOnClick:h}=e;var p,f;function m(){r(!0)}function g(){r(!1)}function v(t){const r=s.current;a.canDrag&&r&&(a.didMove=!0,n&&g(),a.delta="x"===e.draggableDirection?t.clientX-a.start:t.clientY-a.start,a.start!==t.clientX&&(a.canCloseOnClick=!1),r.style.transform="translate3d(".concat("x"===e.draggableDirection?"".concat(a.delta,"px, var(--y)"):"0, calc(".concat(a.delta,"px + var(--y))"),",0)"),r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function y(){document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",y);const t=s.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return o(!0),e.closeToast(),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}null==(f=kt.get((p={id:e.toastId,containerId:e.containerId,fn:r}).containerId||1))||f.setToggle(p.id,p.fn),(0,t.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||g(),window.addEventListener("focus",m),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",g)}}),[e.pauseOnFocusLoss]);const _={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",v),document.addEventListener("pointerup",y);const n=s.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){const{top:n,bottom:r,left:i,right:o}=s.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=i&&t.clientX<=o&&t.clientY>=n&&t.clientY<=r?g():m()}};return c&&l&&(_.onMouseEnter=g,e.stacked||(_.onMouseLeave=m)),h&&(_.onClick=e=>{u&&u(e),a.canCloseOnClick&&d()}),{playToast:m,pauseToast:g,isRunning:n,preventExitTransition:i,toastRef:s,eventHandlers:_}}function Ht(e){let{delay:n,isRunning:r,closeToast:i,type:o="default",hide:s,className:a,style:c,controlledProgress:l,progress:d,rtl:h,isIn:p,theme:f}=e;const m=s||l&&0===d,g=u(u({},c),{},{animationDuration:"".concat(n,"ms"),animationPlayState:r?"running":"paused"});l&&(g.transform="scaleX(".concat(d,")"));const v=At("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(f),"Toastify__progress-bar--".concat(o),{"Toastify__progress-bar--rtl":h}),y=It(a)?a({rtl:h,type:o,defaultClassName:v}):At(v,a),_={[l&&d>=1?"onTransitionEnd":"onAnimationEnd"]:l&&d<1?null:()=>{p&&i()}};return t.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},t.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(f," Toastify__progress-bar--").concat(o)}),t.createElement("div",u({role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:y,style:g},_)))}let zt=1;const Gt=()=>""+zt++;function Yt(e){return e&&(Rt(e.toastId)||Tt(e.toastId))?e.toastId:Gt()}function Kt(e,t){return Bt(e,t),t.toastId}function qt(e,t){return u(u({},t),{},{type:t&&t.type||e,toastId:Yt(t)})}function Xt(e){return(t,n)=>Kt(t,qt(e,n))}function Jt(e,t){return Kt(e,qt("default",t))}Jt.loading=(e,t)=>Kt(e,qt("default",u({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),Jt.promise=function(e,t,n){let r,{pending:i,error:o,success:s}=t;i&&(r=Rt(i)?Jt.loading(i,n):Jt.loading(i.render,u(u({},n),i)));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,i)=>{if(null==t)return void Jt.dismiss(r);const o=u(u(u({type:e},a),n),{},{data:i}),s=Rt(t)?{render:t}:t;return r?Jt.update(r,u(u({},o),s)):Jt(s.render,u(u({},o),s)),i},l=It(e)?e():e;return l.then((e=>c("success",s,e))).catch((e=>c("error",o,e))),l},Jt.success=Xt("success"),Jt.info=Xt("info"),Jt.error=Xt("error"),Jt.warning=Xt("warning"),Jt.warn=Jt.warning,Jt.dark=(e,t)=>Kt(e,qt("default",u({theme:"dark"},t))),Jt.dismiss=function(e){!function(e){var t;if(jt()){if(null==e||Rt(t=e)||Tt(t))kt.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){const t=kt.get(e.containerId);t?t.removeToast(e.id):kt.forEach((t=>{t.removeToast(e.id)}))}}else Pt=Pt.filter((t=>null!=e&&t.options.toastId!==e))}(e)},Jt.clearWaitingQueue=function(e){void 0===e&&(e={}),kt.forEach((t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()}))},Jt.isActive=Ut,Jt.update=function(e,t){void 0===t&&(t={});const n=((e,t)=>{var n;let{containerId:r}=t;return null==(n=kt.get(r||1))?void 0:n.toasts.get(e)})(e,t);if(n){const{props:r,content:i}=n,o=u(u(u({delay:100},r),t),{},{toastId:t.toastId||e,updateId:Gt()});o.toastId!==e&&(o.staleId=e);const s=o.render||i;delete o.render,Kt(s,o)}},Jt.done=e=>{Jt.update(e,{progress:1})},Jt.onChange=function(e){return Lt.add(e),()=>{Lt.delete(e)}},Jt.play=e=>Ft(!0,e),Jt.pause=e=>Ft(!1,e);const Qt="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,Zt=e=>{let{theme:n,type:r,isLoading:i}=e,o=s(e,Ct);return t.createElement("svg",u({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-".concat(r,")")},o))},$t={info:function(e){return t.createElement(Zt,u({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return t.createElement(Zt,u({},e),t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return t.createElement(Zt,u({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return t.createElement(Zt,u({},e),t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return t.createElement("div",{className:"Toastify__spinner"})}},en=e=>{const{isRunning:n,preventExitTransition:r,toastRef:i,eventHandlers:o,playToast:s}=Wt(e),{closeButton:a,children:c,autoClose:l,onClick:d,type:h,hideProgressBar:p,closeToast:f,transition:m,position:g,className:v,style:y,bodyClassName:_,bodyStyle:E,progressClassName:b,progressStyle:w,updateId:S,role:A,progress:C,rtl:T,toastId:R,deleteToast:I,isIn:x,isLoading:O,closeOnClick:N,theme:D}=e,k=At("Toastify__toast","Toastify__toast-theme--".concat(D),"Toastify__toast--".concat(h),{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":N}),P=It(v)?v({rtl:T,position:g,type:h,defaultClassName:k}):At(k,v),L=function(e){let{theme:n,type:r,isLoading:i,icon:o}=e,s=null;const a={theme:n,type:r};return!1===o||(It(o)?s=o(u(u({},a),{},{isLoading:i})):(0,t.isValidElement)(o)?s=(0,t.cloneElement)(o,a):i?s=$t.spinner():(e=>e in $t)(r)&&(s=$t[r](a))),s}(e),M=!!C||!l,j={closeToast:f,type:h,theme:D};let U=null;return!1===a||(U=It(a)?a(j):(0,t.isValidElement)(a)?(0,t.cloneElement)(a,j):function(e){let{closeToast:n,theme:r,ariaLabel:i="close"}=e;return t.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:e=>{e.stopPropagation(),n(e)},"aria-label":i},t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(j)),t.createElement(m,{isIn:x,done:I,position:g,preventExitTransition:r,nodeRef:i,playToast:s},t.createElement("div",u(u({id:R,onClick:d,"data-in":x,className:P},o),{},{style:y,ref:i}),t.createElement("div",u(u({},x&&{role:A}),{},{className:It(_)?_({type:h}):At("Toastify__toast-body",_),style:E}),null!=L&&t.createElement("div",{className:At("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!O})},L),t.createElement("div",null,c)),U,t.createElement(Ht,u(u({},S&&!M?{key:"pb-".concat(S)}:{}),{},{rtl:T,theme:D,delay:l,isRunning:n,isIn:x,closeToast:f,hide:p,type:h,style:w,className:b,controlledProgress:M,progress:C||0}))))},tn=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},nn=Nt(tn("bounce",!0)),rn=(Nt(tn("slide",!0)),Nt(tn("zoom")),Nt(tn("flip")),{position:"top-right",transition:nn,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"});function on(e){let n=u(u({},rn),e);const r=e.stacked,[i,o]=(0,t.useState)(!0),s=(0,t.useRef)(null),{getToastToRender:a,isToastActive:c,count:l}=Vt(n),{className:d,style:h,rtl:p,containerId:f}=n;function m(e){const t=At("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":p});return It(d)?d({position:e,rtl:p,defaultClassName:t}):At(t,xt(d))}function g(){r&&(o(!0),Jt.play())}return Qt((()=>{if(r){var e;const t=s.current.querySelectorAll('[data-in="true"]'),r=12,o=null==(e=n.position)?void 0:e.includes("top");let a=0,c=0;Array.from(t).reverse().forEach(((e,t)=>{const n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(i)),n.dataset.pos||(n.dataset.pos=o?"top":"bot");const s=a*(i?.2:1)+(i?0:r*t);n.style.setProperty("--y","".concat(o?s:-1*s,"px")),n.style.setProperty("--g","".concat(r)),n.style.setProperty("--s",""+(1-(i?c:0))),a+=n.offsetHeight,c+=.025}))}}),[i,l,r]),t.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{r&&(o(!1),Jt.pause())},onMouseLeave:g},a(((e,n)=>{const i=n.length?u({},h):u(u({},h),{},{pointerEvents:"none"});return t.createElement("div",{className:m(e),style:i,key:"container-".concat(e)},n.map((e=>{let{content:n,props:i}=e;return t.createElement(en,u(u({},i),{},{stacked:r,collapseAll:g,isIn:c(i.toastId,i.containerId),style:i.style,key:"toast-".concat(i.key)}),n)})))})))}function sn(e,t){return function(){return e.apply(t,arguments)}}const{toString:an}=Object.prototype,{getPrototypeOf:cn}=Object,ln=(dn=Object.create(null),e=>{const t=an.call(e);return dn[t]||(dn[t]=t.slice(8,-1).toLowerCase())});var dn;const un=e=>(e=e.toLowerCase(),t=>ln(t)===e),hn=e=>t=>typeof t===e,{isArray:pn}=Array,fn=hn("undefined");const mn=un("ArrayBuffer");const gn=hn("string"),vn=hn("function"),yn=hn("number"),_n=e=>null!==e&&"object"===typeof e,En=e=>{if("object"!==ln(e))return!1;const t=cn(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},bn=un("Date"),wn=un("File"),Sn=un("Blob"),An=un("FileList"),Cn=un("URLSearchParams"),[Tn,Rn,In,xn]=["ReadableStream","Request","Response","Headers"].map(un);function On(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),pn(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function Nn(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Dn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,kn=e=>!fn(e)&&e!==Dn;const Pn=(Ln="undefined"!==typeof Uint8Array&&cn(Uint8Array),e=>Ln&&e instanceof Ln);var Ln;const Mn=un("HTMLFormElement"),jn=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Un=un("RegExp"),Bn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};On(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)};const Fn=un("AsyncFunction"),Vn=(Wn="function"===typeof setImmediate,Hn=vn(Dn.postMessage),Wn?setImmediate:Hn?((e,t)=>(Dn.addEventListener("message",(n=>{let{source:r,data:i}=n;r===Dn&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),Dn.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var Wn,Hn;const zn="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Dn):"undefined"!==typeof process&&process.nextTick||Vn,Gn={isArray:pn,isArrayBuffer:mn,isBuffer:function(e){return null!==e&&!fn(e)&&null!==e.constructor&&!fn(e.constructor)&&vn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||vn(e.append)&&("formdata"===(t=ln(e))||"object"===t&&vn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&mn(e.buffer),t},isString:gn,isNumber:yn,isBoolean:e=>!0===e||!1===e,isObject:_n,isPlainObject:En,isReadableStream:Tn,isRequest:Rn,isResponse:In,isHeaders:xn,isUndefined:fn,isDate:bn,isFile:wn,isBlob:Sn,isRegExp:Un,isFunction:vn,isStream:e=>_n(e)&&vn(e.pipe),isURLSearchParams:Cn,isTypedArray:Pn,isFileList:An,forEach:On,merge:function e(){const{caseless:t}=kn(this)&&this||{},n={},r=(r,i)=>{const o=t&&Nn(n,i)||i;En(n[o])&&En(r)?n[o]=e(n[o],r):En(r)?n[o]=e({},r):pn(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&On(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return On(t,((t,r)=>{n&&vn(t)?e[r]=sn(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&cn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ln,kindOfTest:un,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(pn(e))return e;let t=e.length;if(!yn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Mn,hasOwnProperty:jn,hasOwnProp:jn,reduceDescriptors:Bn,freezeMethods:e=>{Bn(e,((t,n)=>{if(vn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];vn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return pn(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Nn,global:Dn,isContextDefined:kn,isSpecCompliantForm:function(e){return!!(e&&vn(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(_n(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=pn(e)?[]:{};return On(e,((e,t)=>{const o=n(e,r+1);!fn(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Fn,isThenable:e=>e&&(_n(e)||vn(e))&&vn(e.then)&&vn(e.catch),setImmediate:Vn,asap:zn};function Yn(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Gn.inherits(Yn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Gn.toJSONObject(this.config),code:this.code,status:this.status}}});const Kn=Yn.prototype,qn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{qn[e]={value:e}})),Object.defineProperties(Yn,qn),Object.defineProperty(Kn,"isAxiosError",{value:!0}),Yn.from=(e,t,n,r,i,o)=>{const s=Object.create(Kn);return Gn.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Yn.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const Xn=Yn;function Jn(e){return Gn.isPlainObject(e)||Gn.isArray(e)}function Qn(e){return Gn.endsWith(e,"[]")?e.slice(0,-2):e}function Zn(e,t,n){return e?e.concat(t).map((function(e,t){return e=Qn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const $n=Gn.toFlatObject(Gn,{},null,(function(e){return/^is[A-Z]/.test(e)}));const er=function(e,t,n){if(!Gn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Gn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Gn.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Gn.isSpecCompliantForm(t);if(!Gn.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Gn.isDate(e))return e.toISOString();if(!a&&Gn.isBlob(e))throw new Xn("Blob is not supported. Use a Buffer instead.");return Gn.isArrayBuffer(e)||Gn.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(Gn.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Gn.isArray(e)&&function(e){return Gn.isArray(e)&&!e.some(Jn)}(e)||(Gn.isFileList(e)||Gn.endsWith(n,"[]"))&&(a=Gn.toArray(e)))return n=Qn(n),a.forEach((function(e,r){!Gn.isUndefined(e)&&null!==e&&t.append(!0===s?Zn([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!Jn(e)||(t.append(Zn(i,n,o),c(e)),!1)}const d=[],u=Object.assign($n,{defaultVisitor:l,convertValue:c,isVisitable:Jn});if(!Gn.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Gn.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),Gn.forEach(n,(function(n,o){!0===(!(Gn.isUndefined(n)||null===n)&&i.call(t,n,Gn.isString(o)?o.trim():o,r,u))&&e(n,r?r.concat(o):[o])})),d.pop()}}(e),t};function tr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function nr(e,t){this._pairs=[],e&&er(e,this,t)}const rr=nr.prototype;rr.append=function(e,t){this._pairs.push([e,t])},rr.toString=function(e){const t=e?function(t){return e.call(this,t,tr)}:tr;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ir=nr;function or(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sr(e,t,n){if(!t)return e;const r=n&&n.encode||or;Gn.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(o=i?i(t,n):Gn.isURLSearchParams(t)?t.toString():new ir(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const ar=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Gn.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},cr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ir,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dr="undefined"!==typeof window&&"undefined"!==typeof document,ur="object"===typeof navigator&&navigator||void 0,hr=dr&&(!ur||["ReactNative","NativeScript","NS"].indexOf(ur.product)<0),pr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,fr=dr&&window.location.href||"http://localhost",mr=u(u({},e),lr);const gr=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&Gn.isArray(r)?r.length:o,a)return Gn.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&Gn.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&Gn.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(Gn.isFormData(e)&&Gn.isFunction(e.entries)){const n={};return Gn.forEachEntry(e,((e,r)=>{t(function(e){return Gn.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const vr={transitional:cr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Gn.isObject(e);i&&Gn.isHTMLForm(e)&&(e=new FormData(e));if(Gn.isFormData(e))return r?JSON.stringify(gr(e)):e;if(Gn.isArrayBuffer(e)||Gn.isBuffer(e)||Gn.isStream(e)||Gn.isFile(e)||Gn.isBlob(e)||Gn.isReadableStream(e))return e;if(Gn.isArrayBufferView(e))return e.buffer;if(Gn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return er(e,new mr.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return mr.isNode&&Gn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=Gn.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return er(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Gn.isString(e))try{return(t||JSON.parse)(e),Gn.trim(e)}catch(eU){if("SyntaxError"!==eU.name)throw eU}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||vr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Gn.isResponse(e)||Gn.isReadableStream(e))return e;if(e&&Gn.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(eU){if(n){if("SyntaxError"===eU.name)throw Xn.from(eU,Xn.ERR_BAD_RESPONSE,this,null,this.response);throw eU}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mr.classes.FormData,Blob:mr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Gn.forEach(["delete","get","head","post","put","patch"],(e=>{vr.headers[e]={}}));const yr=vr,_r=Gn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Er=Symbol("internals");function br(e){return e&&String(e).trim().toLowerCase()}function wr(e){return!1===e||null==e?e:Gn.isArray(e)?e.map(wr):String(e)}function Sr(e,t,n,r,i){return Gn.isFunction(r)?r.call(this,t,n):(i&&(t=n),Gn.isString(t)?Gn.isString(r)?-1!==t.indexOf(r):Gn.isRegExp(r)?r.test(t):void 0:void 0)}class Ar{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=br(t);if(!i)throw new Error("header name must be a non-empty string");const o=Gn.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=wr(e))}const o=(e,t)=>Gn.forEach(e,((e,n)=>i(e,n,t)));if(Gn.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Gn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&_r[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Gn.isHeaders(e))for(const[s,a]of e.entries())i(a,s,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=br(e)){const n=Gn.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Gn.isFunction(t))return t.call(this,e,n);if(Gn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=br(e)){const n=Gn.findKey(this,e);return!(!n||void 0===this[n]||t&&!Sr(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=br(e)){const i=Gn.findKey(n,e);!i||t&&!Sr(0,n[i],i,t)||(delete n[i],r=!0)}}return Gn.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Sr(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Gn.forEach(this,((r,i)=>{const o=Gn.findKey(n,i);if(o)return t[o]=wr(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=wr(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Gn.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Gn.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Er]=this[Er]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=br(e);t[r]||(!function(e,t){const n=Gn.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Gn.isArray(e)?e.forEach(r):r(e),this}}Ar.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Gn.reduceDescriptors(Ar.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Gn.freezeMethods(Ar);const Cr=Ar;function Tr(e,t){const n=this||yr,r=t||n,i=Cr.from(r.headers);let o=r.data;return Gn.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Rr(e){return!(!e||!e.__CANCEL__)}function Ir(e,t,n){Xn.call(this,null==e?"canceled":e,Xn.ERR_CANCELED,t,n),this.name="CanceledError"}Gn.inherits(Ir,Xn,{__CANCEL__:!0});const xr=Ir;function Or(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Xn("Request failed with status code "+n.status,[Xn.ERR_BAD_REQUEST,Xn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Nr=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let d=s,u=0;for(;d!==o;)u+=n[d++],d%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const h=l&&c-l;return h?Math.round(1e3*u/h):void 0}};const Dr=function(e,t){let n,r,i=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];t>=o?s(c,e):(n=c,r||(r=setTimeout((()=>{r=null,s(n)}),o-t)))},()=>n&&s(n)]},kr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=Nr(50,250);return Dr((n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,c=i(a);r=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},Pr=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Lr=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gn.asap((()=>e(...n)))},Mr=mr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,mr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(mr.origin),mr.navigator&&/(msie|trident)/i.test(mr.navigator.userAgent)):()=>!0,jr=mr.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];Gn.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Gn.isString(r)&&s.push("path="+r),Gn.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ur(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Br=e=>e instanceof Cr?u({},e):e;function Fr(e,t){t=t||{};const n={};function r(e,t,n,r){return Gn.isPlainObject(e)&&Gn.isPlainObject(t)?Gn.merge.call({caseless:r},e,t):Gn.isPlainObject(t)?Gn.merge({},t):Gn.isArray(t)?t.slice():t}function i(e,t,n,i){return Gn.isUndefined(t)?Gn.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function o(e,t){if(!Gn.isUndefined(t))return r(void 0,t)}function s(e,t){return Gn.isUndefined(t)?Gn.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>i(Br(e),Br(t),0,!0)};return Gn.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);Gn.isUndefined(s)&&o!==a||(n[r]=s)})),n}const Vr=e=>{const t=Fr({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=Cr.from(a),t.url=sr(Ur(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Gn.isFormData(r))if(mr.hasStandardBrowserEnv||mr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(mr.hasStandardBrowserEnv&&(i&&Gn.isFunction(i)&&(i=i(t)),i||!1!==i&&Mr(t.url))){const e=o&&s&&jr.read(s);e&&a.set(o,e)}return t},Wr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Vr(e);let i=r.data;const o=Cr.from(r.headers).normalize();let s,a,c,l,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=r;function f(){l&&l(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Cr.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Or((function(e){t(e),f()}),(function(e){n(e),f()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Xn("Request aborted",Xn.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Xn("Network Error",Xn.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||cr;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Xn(t,i.clarifyTimeoutError?Xn.ETIMEDOUT:Xn.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&Gn.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Gn.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),u&&"json"!==u&&(m.responseType=r.responseType),p&&([c,d]=kr(p,!0),m.addEventListener("progress",c)),h&&m.upload&&([a,l]=kr(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new xr(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===mr.protocols.indexOf(v)?n(new Xn("Unsupported protocol "+v+":",Xn.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Hr=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Xn?t:new xr(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new Xn("timeout ".concat(t," of ms exceeded"),Xn.ETIMEDOUT))}),t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>Gn.asap(s),a}};function zr(e,t){this.v=e,this.k=t}function Gr(e){return function(){return new Yr(e.apply(this,arguments))}}function Yr(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,a=s instanceof zr;Promise.resolve(a?s.v:s).then((function(n){if(a){var c="return"===t?"return":"next";if(!s.k||n.done)return r(c,n);n=e[c](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,s){var a={key:e,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function Kr(e){return new zr(e,0)}function qr(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new zr(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Xr(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Jr(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Jr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Jr=function(e){this.s=e,this.n=e.next},Jr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Jr(e)}Yr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Yr.prototype.next=function(e){return this._invoke("next",e)},Yr.prototype.throw=function(e){return this._invoke("throw",e)},Yr.prototype.return=function(e){return this._invoke("return",e)};const Qr=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Zr=function(){var e=Gr((function*(e,t){var n,r=!1,i=!1;try{for(var o,s=Xr($r(e));r=!(o=yield Kr(s.next())).done;r=!1){const e=o.value;yield*qr(Xr(Qr(e,t)))}}catch(a){i=!0,n=a}finally{try{r&&null!=s.return&&(yield Kr(s.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),$r=function(){var e=Gr((function*(e){if(e[Symbol.asyncIterator])return void(yield*qr(Xr(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Kr(t.read());if(e)break;yield n}}finally{yield Kr(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),ei=(e,t,n,r)=>{const i=Zr(e,t);let o,s=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},ti="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ni=ti&&"function"===typeof ReadableStream,ri=ti&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ii=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(eU){return!1}},oi=ni&&ii((()=>{let e=!1;const t=new Request(mr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),si=ni&&ii((()=>Gn.isReadableStream(new Response("").body))),ai={stream:si&&(e=>e.body)};var ci;ti&&(ci=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ai[e]&&(ai[e]=Gn.isFunction(ci[e])?t=>t[e]():(t,n)=>{throw new Xn("Response type '".concat(e,"' is not supported"),Xn.ERR_NOT_SUPPORT,n)})})));const li=async(e,t)=>{const n=Gn.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Gn.isBlob(e))return e.size;if(Gn.isSpecCompliantForm(e)){const t=new Request(mr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Gn.isArrayBufferView(e)||Gn.isArrayBuffer(e)?e.byteLength:(Gn.isURLSearchParams(e)&&(e+=""),Gn.isString(e)?(await ri(e)).byteLength:void 0)})(t):n},di=ti&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:d,withCredentials:h="same-origin",fetchOptions:p}=Vr(e);l=l?(l+"").toLowerCase():"text";let f,m=Hr([i,o&&o.toAbortSignal()],s);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(c&&oi&&"get"!==n&&"head"!==n&&0!==(v=await li(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Gn.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Pr(v,kr(Lr(c)));r=ei(n.body,65536,e,t)}}Gn.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,u(u({},p),{},{signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0}));let o=await fetch(f);const s=si&&("stream"===l||"response"===l);if(si&&(a||s&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=Gn.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&Pr(t,kr(Lr(a),!0))||[];o=new Response(ei(o.body,65536,n,(()=>{r&&r(),g&&g()})),e)}l=l||"text";let y=await ai[Gn.findKey(ai,l)||"text"](o,e);return!s&&g&&g(),await new Promise(((t,n)=>{Or(t,n,{data:y,headers:Cr.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:f})}))}catch(y){if(g&&g(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new Xn("Network Error",Xn.ERR_NETWORK,e,f),{cause:y.cause||y});throw Xn.from(y,y&&y.code,e,f)}}),ui={http:null,xhr:Wr,fetch:di};Gn.forEach(ui,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(eU){}Object.defineProperty(e,"adapterName",{value:t})}}));const hi=e=>"- ".concat(e),pi=e=>Gn.isFunction(e)||null===e||!1===e,fi=e=>{e=Gn.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!pi(n)&&(r=ui[(t=String(n)).toLowerCase()],void 0===r))throw new Xn("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(hi).join("\n"):" "+hi(e[0]):"as no adapter specified";throw new Xn("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function mi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xr(null,e)}function gi(e){mi(e),e.headers=Cr.from(e.headers),e.data=Tr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return fi(e.adapter||yr.adapter)(e).then((function(t){return mi(e),t.data=Tr.call(e,e.transformResponse,t),t.headers=Cr.from(t.headers),t}),(function(t){return Rr(t)||(mi(e),t&&t.response&&(t.response.data=Tr.call(e,e.transformResponse,t.response),t.response.headers=Cr.from(t.response.headers))),Promise.reject(t)}))}const vi="1.8.1",yi={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{yi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const _i={};yi.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.1] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new Xn(r(i," has been removed"+(t?" in "+t:"")),Xn.ERR_DEPRECATED);return t&&!_i[i]&&(_i[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},yi.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ei={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Xn("options must be an object",Xn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new Xn("option "+o+" must be "+n,Xn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Xn("Unknown option "+o,Xn.ERR_BAD_OPTION)}},validators:yi},bi=Ei.validators;class wi{constructor(e){this.defaults=e,this.interceptors={request:new ar,response:new ar}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(eU){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Fr(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Ei.assertOptions(n,{silentJSONParsing:bi.transitional(bi.boolean),forcedJSONParsing:bi.transitional(bi.boolean),clarifyTimeoutError:bi.transitional(bi.boolean)},!1),null!=r&&(Gn.isFunction(r)?t.paramsSerializer={serialize:r}:Ei.assertOptions(r,{encode:bi.function,serialize:bi.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ei.assertOptions(t,{baseUrl:bi.spelling("baseURL"),withXsrfToken:bi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Gn.merge(i.common,i[t.method]);i&&Gn.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Cr.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let d,u=0;if(!a){const e=[gi.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=s.length;let h=t;for(u=0;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{l=gi.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return sr(Ur((e=Fr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Gn.forEach(["delete","get","head","options"],(function(e){wi.prototype[e]=function(t,n){return this.request(Fr(n||{},{method:e,url:t,data:(n||{}).data}))}})),Gn.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Fr(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}wi.prototype[e]=t(),wi.prototype[e+"Form"]=t(!0)}));const Si=wi;class Ai{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new xr(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ai((function(t){e=t})),cancel:e}}}const Ci=Ai;const Ti={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ti).forEach((e=>{let[t,n]=e;Ti[n]=t}));const Ri=Ti;const Ii=function e(t){const n=new Si(t),r=sn(Si.prototype.request,n);return Gn.extend(r,Si.prototype,n,{allOwnKeys:!0}),Gn.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Fr(t,n))},r}(yr);Ii.Axios=Si,Ii.CanceledError=xr,Ii.CancelToken=Ci,Ii.isCancel=Rr,Ii.VERSION=vi,Ii.toFormData=er,Ii.AxiosError=Xn,Ii.Cancel=Ii.CanceledError,Ii.all=function(e){return Promise.all(e)},Ii.spread=function(e){return function(t){return e.apply(null,t)}},Ii.isAxiosError=function(e){return Gn.isObject(e)&&!0===e.isAxiosError},Ii.mergeConfig=Fr,Ii.AxiosHeaders=Cr,Ii.formToJSON=e=>gr(Gn.isHTMLForm(e)?new FormData(e):e),Ii.getAdapter=fi,Ii.HttpStatusCode=Ri,Ii.default=Ii;const xi=Ii;function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oi.apply(null,arguments)}var Ni=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(eU){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Di=Math.abs,ki=String.fromCharCode,Pi=Object.assign;function Li(e){return e.trim()}function Mi(e,t,n){return e.replace(t,n)}function ji(e,t){return e.indexOf(t)}function Ui(e,t){return 0|e.charCodeAt(t)}function Bi(e,t,n){return e.slice(t,n)}function Fi(e){return e.length}function Vi(e){return e.length}function Wi(e,t){return t.push(e),e}var Hi=1,zi=1,Gi=0,Yi=0,Ki=0,qi="";function Xi(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Hi,column:zi,length:s,return:""}}function Ji(e,t){return Pi(Xi("",null,null,"",null,null,0),e,{length:-e.length},t)}function Qi(){return Ki=Yi>0?Ui(qi,--Yi):0,zi--,10===Ki&&(zi=1,Hi--),Ki}function Zi(){return Ki=Yi<Gi?Ui(qi,Yi++):0,zi++,10===Ki&&(zi=1,Hi++),Ki}function $i(){return Ui(qi,Yi)}function eo(){return Yi}function to(e,t){return Bi(qi,e,t)}function no(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ro(e){return Hi=zi=1,Gi=Fi(qi=e),Yi=0,[]}function io(e){return qi="",e}function oo(e){return Li(to(Yi-1,co(91===e?e+2:40===e?e+1:e)))}function so(e){for(;(Ki=$i())&&Ki<33;)Zi();return no(e)>2||no(Ki)>3?"":" "}function ao(e,t){for(;--t&&Zi()&&!(Ki<48||Ki>102||Ki>57&&Ki<65||Ki>70&&Ki<97););return to(e,eo()+(t<6&&32==$i()&&32==Zi()))}function co(e){for(;Zi();)switch(Ki){case e:return Yi;case 34:case 39:34!==e&&39!==e&&co(Ki);break;case 40:41===e&&co(e);break;case 92:Zi()}return Yi}function lo(e,t){for(;Zi()&&e+Ki!==57&&(e+Ki!==84||47!==$i()););return"/*"+to(t,Yi-1)+"*"+ki(47===e?e:Zi())}function uo(e){for(;!no($i());)Zi();return to(e,Yi)}var ho="-ms-",po="-moz-",fo="-webkit-",mo="comm",go="rule",vo="decl",yo="@keyframes";function _o(e,t){for(var n="",r=Vi(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Eo(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case vo:return e.return=e.return||e.value;case mo:return"";case yo:return e.return=e.value+"{"+_o(e.children,r)+"}";case go:e.value=e.props.join(",")}return Fi(n=_o(e.children,r))?e.return=e.value+"{"+n+"}":""}function bo(e){return function(t){t.root||(t=t.return)&&e(t)}}function wo(e){return io(So("",null,null,null,[""],e=ro(e),0,[0],e))}function So(e,t,n,r,i,o,s,a,c){for(var l=0,d=0,u=s,h=0,p=0,f=0,m=1,g=1,v=1,y=0,_="",E=i,b=o,w=r,S=_;g;)switch(f=y,y=Zi()){case 40:if(108!=f&&58==Ui(S,u-1)){-1!=ji(S+=Mi(oo(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:S+=oo(y);break;case 9:case 10:case 13:case 32:S+=so(f);break;case 92:S+=ao(eo()-1,7);continue;case 47:switch($i()){case 42:case 47:Wi(Co(lo(Zi(),eo()),t,n),c);break;default:S+="/"}break;case 123*m:a[l++]=Fi(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+d:-1==v&&(S=Mi(S,/\f/g,"")),p>0&&Fi(S)-u&&Wi(p>32?To(S+";",r,n,u-1):To(Mi(S," ","")+";",r,n,u-2),c);break;case 59:S+=";";default:if(Wi(w=Ao(S,t,n,l,d,i,a,_,E=[],b=[],u),o),123===y)if(0===d)So(S,t,w,w,E,o,u,a,b);else switch(99===h&&110===Ui(S,3)?100:h){case 100:case 108:case 109:case 115:So(e,w,w,r&&Wi(Ao(e,w,w,0,0,i,a,_,i,E=[],u),b),i,b,u,a,r?E:b);break;default:So(S,w,w,w,[""],b,0,a,b)}}l=d=p=0,m=v=1,_=S="",u=s;break;case 58:u=1+Fi(S),p=f;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==Qi())continue;switch(S+=ki(y),y*m){case 38:v=d>0?1:(S+="\f",-1);break;case 44:a[l++]=(Fi(S)-1)*v,v=1;break;case 64:45===$i()&&(S+=oo(Zi())),h=$i(),d=u=Fi(_=S+=uo(eo())),y++;break;case 45:45===f&&2==Fi(S)&&(m=0)}}return o}function Ao(e,t,n,r,i,o,s,a,c,l,d){for(var u=i-1,h=0===i?o:[""],p=Vi(h),f=0,m=0,g=0;f<r;++f)for(var v=0,y=Bi(e,u+1,u=Di(m=s[f])),_=e;v<p;++v)(_=Li(m>0?h[v]+" "+y:Mi(y,/&\f/g,h[v])))&&(c[g++]=_);return Xi(e,t,n,0===i?go:a,c,l,d)}function Co(e,t,n){return Xi(e,t,n,mo,ki(Ki),Bi(e,2,-2),0)}function To(e,t,n,r){return Xi(e,t,n,vo,Bi(e,0,r),Bi(e,r+1,-1),r)}var Ro=function(e,t,n){for(var r=0,i=0;r=i,i=$i(),38===r&&12===i&&(t[n]=1),!no(i);)Zi();return to(e,Yi)},Io=function(e,t){return io(function(e,t){var n=-1,r=44;do{switch(no(r)){case 0:38===r&&12===$i()&&(t[n]=1),e[n]+=Ro(Yi-1,t,n);break;case 2:e[n]+=oo(r);break;case 4:if(44===r){e[++n]=58===$i()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=ki(r)}}while(r=Zi());return e}(ro(e),t))},xo=new WeakMap,Oo=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||xo.get(n))&&!r){xo.set(e,!0);for(var i=[],o=Io(t,i),s=n.props,a=0,c=0;a<o.length;a++)for(var l=0;l<s.length;l++,c++)e.props[c]=i[a]?o[a].replace(/&\f/g,s[l]):s[l]+" "+o[a]}}},No=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Do(e,t){switch(function(e,t){return 45^Ui(e,0)?(((t<<2^Ui(e,0))<<2^Ui(e,1))<<2^Ui(e,2))<<2^Ui(e,3):0}(e,t)){case 5103:return fo+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return fo+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return fo+e+po+e+ho+e+e;case 6828:case 4268:return fo+e+ho+e+e;case 6165:return fo+e+ho+"flex-"+e+e;case 5187:return fo+e+Mi(e,/(\w+).+(:[^]+)/,fo+"box-$1$2"+ho+"flex-$1$2")+e;case 5443:return fo+e+ho+"flex-item-"+Mi(e,/flex-|-self/,"")+e;case 4675:return fo+e+ho+"flex-line-pack"+Mi(e,/align-content|flex-|-self/,"")+e;case 5548:return fo+e+ho+Mi(e,"shrink","negative")+e;case 5292:return fo+e+ho+Mi(e,"basis","preferred-size")+e;case 6060:return fo+"box-"+Mi(e,"-grow","")+fo+e+ho+Mi(e,"grow","positive")+e;case 4554:return fo+Mi(e,/([^-])(transform)/g,"$1"+fo+"$2")+e;case 6187:return Mi(Mi(Mi(e,/(zoom-|grab)/,fo+"$1"),/(image-set)/,fo+"$1"),e,"")+e;case 5495:case 3959:return Mi(e,/(image-set\([^]*)/,fo+"$1$`$1");case 4968:return Mi(Mi(e,/(.+:)(flex-)?(.*)/,fo+"box-pack:$3"+ho+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+fo+e+e;case 4095:case 3583:case 4068:case 2532:return Mi(e,/(.+)-inline(.+)/,fo+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fi(e)-1-t>6)switch(Ui(e,t+1)){case 109:if(45!==Ui(e,t+4))break;case 102:return Mi(e,/(.+:)(.+)-([^]+)/,"$1"+fo+"$2-$3$1"+po+(108==Ui(e,t+3)?"$3":"$2-$3"))+e;case 115:return~ji(e,"stretch")?Do(Mi(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Ui(e,t+1))break;case 6444:switch(Ui(e,Fi(e)-3-(~ji(e,"!important")&&10))){case 107:return Mi(e,":",":"+fo)+e;case 101:return Mi(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+fo+(45===Ui(e,14)?"inline-":"")+"box$3$1"+fo+"$2$3$1"+ho+"$2box$3")+e}break;case 5936:switch(Ui(e,t+11)){case 114:return fo+e+ho+Mi(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return fo+e+ho+Mi(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return fo+e+ho+Mi(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return fo+e+ho+e+e}return e}var ko=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case vo:e.return=Do(e.value,e.length);break;case yo:return _o([Ji(e,{value:Mi(e.value,"@","@"+fo)})],r);case go:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _o([Ji(e,{props:[Mi(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return _o([Ji(e,{props:[Mi(t,/:(plac\w+)/,":"+fo+"input-$1")]}),Ji(e,{props:[Mi(t,/:(plac\w+)/,":-moz-$1")]}),Ji(e,{props:[Mi(t,/:(plac\w+)/,ho+"input-$1")]})],r)}return""}))}}],Po=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,o=e.stylisPlugins||ko,s={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)}));var c,l=[Oo,No],d=[Eo,bo((function(e){c.insert(e)}))],u=function(e){var t=Vi(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}(l.concat(o,d));i=function(e,t,n,r){c=n,function(e){_o(wo(e),u)}(e?e+"{"+t.styles+"}":t.styles),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new Ni({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return h.sheet.hydrate(a),h};function Lo(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var Mo=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},jo=function(e,t,n){Mo(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}};var Uo={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Bo(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Fo=!1,Vo=/[A-Z]|^ms/g,Wo=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ho=function(e){return 45===e.charCodeAt(1)},zo=function(e){return null!=e&&"boolean"!==typeof e},Go=Bo((function(e){return Ho(e)?e:e.replace(Vo,"-$&").toLowerCase()})),Yo=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Wo,(function(e,t,n){return Xo={name:t,styles:n,next:Xo},t}))}return 1===Uo[e]||Ho(e)||"number"!==typeof t||0===t?t:t+"px"},Ko="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function qo(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Xo={name:i.name,styles:i.styles,next:Xo},i.name;var o=n;if(void 0!==o.styles){var s=o.next;if(void 0!==s)for(;void 0!==s;)Xo={name:s.name,styles:s.styles,next:Xo},s=s.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=qo(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s){var a=s;null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":zo(a)&&(r+=Go(o)+":"+Yo(o,a)+";")}else{if("NO_COMPONENT_SELECTOR"===o&&Fo)throw new Error(Ko);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var c=qo(e,t,s);switch(o){case"animation":case"animationName":r+=Go(o)+":"+c+";";break;default:r+=o+"{"+c+"}"}}else for(var l=0;l<s.length;l++)zo(s[l])&&(r+=Go(o)+":"+Yo(o,s[l])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var a=Xo,c=n(e);return Xo=a,qo(e,t,c)}}var l=n;if(null==t)return l;var d=t[l];return void 0!==d?d:l}var Xo,Jo=/label:\s*([^\s;{]+)\s*(;|$)/g;function Qo(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Xo=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=qo(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++){if(i+=qo(n,t,e[s]),r)i+=o[s]}Jo.lastIndex=0;for(var a,c="";null!==(a=Jo.exec(i));)c+="-"+a[1];var l=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+c;return{name:l,styles:i,next:Xo}}var Zo=!!r.useInsertionEffect&&r.useInsertionEffect,$o=Zo||function(e){return e()},es=Zo||t.useLayoutEffect,ts=t.createContext("undefined"!==typeof HTMLElement?Po({key:"css"}):null),ns=(ts.Provider,function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(ts);return e(n,i,r)}))}),rs=t.createContext({});var is={}.hasOwnProperty,os="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ss=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Mo(t,n,r),$o((function(){return jo(t,n,r)})),null},as=ns((function(e,n,r){var i=e.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var o=e[os],s=[i],a="";"string"===typeof e.className?a=Lo(n.registered,s,e.className):null!=e.className&&(a=e.className+" ");var c=Qo(s,void 0,t.useContext(rs));a+=n.key+"-"+c.name;var l={};for(var d in e)is.call(e,d)&&"css"!==d&&d!==os&&(l[d]=e[d]);return l.className=a,r&&(l.ref=r),t.createElement(t.Fragment,null,t.createElement(ss,{cache:n,serialized:c,isStringTag:"string"===typeof o}),t.createElement(o,l))})),cs=as;function ls(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var ds=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,us=ls((function(e){return ds.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),hs=function(e){return"theme"!==e},ps=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?us:hs},fs=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},ms=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Mo(t,n,r),$o((function(){return jo(t,n,r)})),null},gs=function e(n,r){var i,o,s=n.__emotion_real===n,a=s&&n.__emotion_base||n;void 0!==r&&(i=r.label,o=r.target);var c=fs(n,r,s),l=c||ps(a),d=!l("as");return function(){var u=arguments,h=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&h.push("label:"+i+";"),null==u[0]||void 0===u[0].raw)h.push.apply(h,u);else{var p=u[0];h.push(p[0]);for(var f=u.length,m=1;m<f;m++)h.push(u[m],p[m])}var g=ns((function(e,n,r){var i=d&&e.as||a,s="",u=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=t.useContext(rs)}"string"===typeof e.className?s=Lo(n.registered,u,e.className):null!=e.className&&(s=e.className+" ");var m=Qo(h.concat(u),n.registered,p);s+=n.key+"-"+m.name,void 0!==o&&(s+=" "+o);var g=d&&void 0===c?ps(i):l,v={};for(var y in e)d&&"as"===y||g(y)&&(v[y]=e[y]);return v.className=s,r&&(v.ref=r),t.createElement(t.Fragment,null,t.createElement(ms,{cache:n,serialized:m,isStringTag:"string"===typeof i}),t.createElement(i,v))}));return g.displayName=void 0!==i?i:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",g.defaultProps=n.defaultProps,g.__emotion_real=g,g.__emotion_base=a,g.__emotion_styles=h,g.__emotion_forwardProp=c,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(t,n){return e(t,Oi({},r,n,{shouldForwardProp:fs(g,n,!0)})).apply(void 0,h)},g}}.bind(null);function vs(e,t){return gs(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){gs[e]=gs(e)}));const ys=[];function _s(e){return ys[0]=e,Qo(ys)}function Es(e){const t=new URL("https://mui.com/production-error/?code=".concat(e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),"Minified MUI error #".concat(e,"; visit ").concat(t," for the full message.")}function bs(e){if("string"!==typeof e)throw new Error(Es(7));return e.charAt(0).toUpperCase()+e.slice(1)}var ws=n(5252);function Ss(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function As(e){if(t.isValidElement(e)||(0,ws.iY)(e)||!Ss(e))return e;const n={};return Object.keys(e).forEach((t=>{n[t]=As(e[t])})),n}function Cs(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=r.clone?u({},e):e;return Ss(e)&&Ss(n)&&Object.keys(n).forEach((o=>{t.isValidElement(n[o])||(0,ws.iY)(n[o])?i[o]=n[o]:Ss(n[o])&&Object.prototype.hasOwnProperty.call(e,o)&&Ss(e[o])?i[o]=Cs(e[o],n[o],r):r.clone?i[o]=Ss(n[o])?As(n[o]):n[o]:i[o]=n[o]})),i}const Ts=function(e,t){return t?Cs(e,t,{clone:!1}):e};const Rs={xs:0,sm:600,md:900,lg:1200,xl:1536},Is={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(Rs[e],"px)")},xs={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:Rs[t]||t;return"number"===typeof n&&(n="".concat(n,"px")),e?"@container ".concat(e," (min-width:").concat(n,")"):"@container (min-width:".concat(n,")")}})};function Os(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||Is;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||Is;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith("@".concat(e))))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:xs,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||Rs).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function Ns(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.keys)||void 0===e?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function Ds(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function ks(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}function Ps(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Ls(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:Ps(e,n)||i,t&&(r=t(r,i,e)),r}const Ms=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],s=Ps(e.theme,r)||{};return Os(e,o,(e=>{let r=Ls(s,i,e);return e===r&&"string"===typeof e&&(r=Ls(s,i,"".concat(t).concat("default"===e?"":bs(e)),e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const js={m:"margin",p:"padding"},Us={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Bs={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Fs=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!Bs[e])return[e];e=Bs[e]}const[t,n]=e.split(""),r=js[t],i=Us[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),Vs=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ws=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Hs=[...Vs,...Ws];function zs(e,t,n,r){var i;const o=null!==(i=Ps(e,t,!0))&&void 0!==i?i:n;return"number"===typeof o||"string"===typeof o?e=>"string"===typeof e?e:"string"===typeof o?"calc(".concat(e," * ").concat(o,")"):o*e:Array.isArray(o)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=o[t];return e>=0?n:"number"===typeof n?-n:"-".concat(n)}:"function"===typeof o?o:()=>{}}function Gs(e){return zs(e,"spacing",8)}function Ys(e,t){return"string"===typeof t||null==t?t:e(t)}function Ks(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=Ys(t,n),e)),{})}(Fs(n),r);return Os(e,e[n],i)}function qs(e,t){const n=Gs(e.theme);return Object.keys(e).map((r=>Ks(e,t,r,n))).reduce(Ts,{})}function Xs(e){return qs(e,Vs)}function Js(e){return qs(e,Ws)}function Qs(e){return qs(e,Hs)}Xs.propTypes={},Xs.filterProps=Vs,Js.propTypes={},Js.filterProps=Ws,Qs.propTypes={},Qs.filterProps=Hs;const Zs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?Ts(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function $s(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function ea(e,t){return Ms({prop:e,themeKey:"borders",transform:t})}const ta=ea("border",$s),na=ea("borderTop",$s),ra=ea("borderRight",$s),ia=ea("borderBottom",$s),oa=ea("borderLeft",$s),sa=ea("borderColor"),aa=ea("borderTopColor"),ca=ea("borderRightColor"),la=ea("borderBottomColor"),da=ea("borderLeftColor"),ua=ea("outline",$s),ha=ea("outlineColor"),pa=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=zs(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:Ys(t,e)});return Os(e,e.borderRadius,n)}return null};pa.propTypes={},pa.filterProps=["borderRadius"];Zs(ta,na,ra,ia,oa,sa,aa,ca,la,da,pa,ua,ha);const fa=e=>{if(void 0!==e.gap&&null!==e.gap){const t=zs(e.theme,"spacing",8),n=e=>({gap:Ys(t,e)});return Os(e,e.gap,n)}return null};fa.propTypes={},fa.filterProps=["gap"];const ma=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=zs(e.theme,"spacing",8),n=e=>({columnGap:Ys(t,e)});return Os(e,e.columnGap,n)}return null};ma.propTypes={},ma.filterProps=["columnGap"];const ga=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=zs(e.theme,"spacing",8),n=e=>({rowGap:Ys(t,e)});return Os(e,e.rowGap,n)}return null};ga.propTypes={},ga.filterProps=["rowGap"];Zs(fa,ma,ga,Ms({prop:"gridColumn"}),Ms({prop:"gridRow"}),Ms({prop:"gridAutoFlow"}),Ms({prop:"gridAutoColumns"}),Ms({prop:"gridAutoRows"}),Ms({prop:"gridTemplateColumns"}),Ms({prop:"gridTemplateRows"}),Ms({prop:"gridTemplateAreas"}),Ms({prop:"gridArea"}));function va(e,t){return"grey"===t?t:e}Zs(Ms({prop:"color",themeKey:"palette",transform:va}),Ms({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:va}),Ms({prop:"backgroundColor",themeKey:"palette",transform:va}));function ya(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const _a=Ms({prop:"width",transform:ya}),Ea=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i,o,s;const a=(null===(n=e.theme)||void 0===n||null===(r=n.breakpoints)||void 0===r||null===(i=r.values)||void 0===i?void 0:i[t])||Rs[t];return a?"px"!==(null===(o=e.theme)||void 0===o||null===(s=o.breakpoints)||void 0===s?void 0:s.unit)?{maxWidth:"".concat(a).concat(e.theme.breakpoints.unit)}:{maxWidth:a}:{maxWidth:ya(t)}};return Os(e,e.maxWidth,t)}return null};Ea.filterProps=["maxWidth"];const ba=Ms({prop:"minWidth",transform:ya}),wa=Ms({prop:"height",transform:ya}),Sa=Ms({prop:"maxHeight",transform:ya}),Aa=Ms({prop:"minHeight",transform:ya}),Ca=(Ms({prop:"size",cssProperty:"width",transform:ya}),Ms({prop:"size",cssProperty:"height",transform:ya}),Zs(_a,Ea,ba,wa,Sa,Aa,Ms({prop:"boxSizing"})),{border:{themeKey:"borders",transform:$s},borderTop:{themeKey:"borders",transform:$s},borderRight:{themeKey:"borders",transform:$s},borderBottom:{themeKey:"borders",transform:$s},borderLeft:{themeKey:"borders",transform:$s},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:$s},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:pa},color:{themeKey:"palette",transform:va},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:va},backgroundColor:{themeKey:"palette",transform:va},p:{style:Js},pt:{style:Js},pr:{style:Js},pb:{style:Js},pl:{style:Js},px:{style:Js},py:{style:Js},padding:{style:Js},paddingTop:{style:Js},paddingRight:{style:Js},paddingBottom:{style:Js},paddingLeft:{style:Js},paddingX:{style:Js},paddingY:{style:Js},paddingInline:{style:Js},paddingInlineStart:{style:Js},paddingInlineEnd:{style:Js},paddingBlock:{style:Js},paddingBlockStart:{style:Js},paddingBlockEnd:{style:Js},m:{style:Xs},mt:{style:Xs},mr:{style:Xs},mb:{style:Xs},ml:{style:Xs},mx:{style:Xs},my:{style:Xs},margin:{style:Xs},marginTop:{style:Xs},marginRight:{style:Xs},marginBottom:{style:Xs},marginLeft:{style:Xs},marginX:{style:Xs},marginY:{style:Xs},marginInline:{style:Xs},marginInlineStart:{style:Xs},marginInlineEnd:{style:Xs},marginBlock:{style:Xs},marginBlockStart:{style:Xs},marginBlockEnd:{style:Xs},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:fa},rowGap:{style:ga},columnGap:{style:ma},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ya},maxWidth:{style:Ea},minWidth:{transform:ya},height:{transform:ya},maxHeight:{transform:ya},minHeight:{transform:ya},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const Ta=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:s=e,themeKey:a,transform:c,style:l}=o;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const d=Ps(n,a)||{};if(l)return l(i);return Os(i,t,(t=>{let n=Ls(d,c,t);return t===n&&"string"===typeof t&&(n=Ls(d,c,"".concat(e).concat("default"===t?"":bs(t)),t)),!1===s?n:{[s]:n}}))}return function t(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const s=null!==(r=o.unstable_sxConfig)&&void 0!==r?r:Ca;function a(n){let r=n;if("function"===typeof n)r=n(o);else if("object"!==typeof n)return n;if(!r)return null;const i=Ns(o.breakpoints),a=Object.keys(i);let c=i;return Object.keys(r).forEach((n=>{const i=function(e,t){return"function"===typeof e?e(t):e}(r[n],o);if(null!==i&&void 0!==i)if("object"===typeof i)if(s[n])c=Ts(c,e(n,i,o,s));else{const e=Os({theme:o},i,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,i)?c=Ts(c,e):c[n]=t({sx:i,theme:o})}else c=Ts(c,e(n,i,o,s))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{var n,r;const i=/min-width:\s*([0-9.]+)/;return+((null===(n=e.match(i))||void 0===n?void 0:n[1])||0)-+((null===(r=t.match(i))||void 0===r?void 0:r[1])||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),u({},t)):t}(o,Ds(a,c))}return Array.isArray(i)?i.map(a):a(i)}}();Ta.filterProps=["sx"];const Ra=Ta,Ia=["sx"],xa=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!==(t=null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.unstable_sxConfig)&&void 0!==t?t:Ca;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function Oa(e){const{sx:t}=e,n=s(e,Ia),{systemProps:r,otherProps:i}=xa(n);let o;return o=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return Ss(e)?u(u({},r),e):r}:u(u({},r),t),u(u({},i),{},{sx:o})}const Na=["values","unit","step"],Da=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>u(u({},e),{},{[t.key]:t.val})),{})};const ka={borderRadius:4};function Pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gs({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}function La(e,t){const n=this;if(n.vars){var r;if(null===(r=n.colorSchemes)||void 0===r||!r[e]||"function"!==typeof n.getColorSchemeSelector)return{};let i=n.getColorSchemeSelector(e);return"&"===i?t:((i.includes("data-")||i.includes("."))&&(i="*:where(".concat(i.replace(/\s*&$/,""),") &")),{[i]:t})}return n.palette.mode===e?t:{}}const Ma=["breakpoints","palette","spacing","shape"];const ja=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={}}=e,o=s(e,Ma),a=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=s(e,Na),o=Da(t),a=Object.keys(o);function c(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function l(e){const i="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(i-r/100).concat(n,")")}function d(e,i){const o=a.indexOf(i);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==o&&"number"===typeof t[a[o]]?t[a[o]]:i)-r/100).concat(n,")")}return u({keys:a,values:o,up:c,down:l,between:d,only:function(e){return a.indexOf(e)+1<a.length?d(e,a[a.indexOf(e)+1]):c(e)},not:function(e){const t=a.indexOf(e);return 0===t?c(a[1]):t===a.length-1?l(a[t]):d(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}(t),c=Pa(r);let l=Cs({breakpoints:a,direction:"ltr",components:{},palette:u({mode:"light"},n),spacing:c,shape:u(u({},ka),i)},o);l=function(e){const t=(e,t)=>e.replace("@media",t?"@container ".concat(t):"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),u(u({},e),{},{containerQueries:i})}(l),l.applyStyles=La;for(var d=arguments.length,h=new Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return l=h.reduce(((e,t)=>Cs(e,t)),l),l.unstable_sxConfig=u(u({},Ca),null===o||void 0===o?void 0:o.unstable_sxConfig),l.unstable_sx=function(e){return Ra({sx:e,theme:this})},l};const Ua=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(rs);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},Ba=ja();const Fa=function(){return Ua(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba)};var Va=n(184);const Wa=["className","component"];const Ha=e=>e,za=(()=>{let e=Ha;return{configure(t){e=t},generate:t=>e(t),reset(){e=Ha}}})();const Ga=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function Ya(e){return Ga(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function Ka(e){if(e.type)return e;if("#"===e.charAt(0))return Ka(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Es(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Es(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const qa=(e,t)=>{try{return(e=>{const t=Ka(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")})(e)}catch(n){return e}};function Xa(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=t.includes("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Ja(e){e=Ka(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),Xa({type:a,values:c})}function Qa(e){let t="hsl"===(e=Ka(e)).type||"hsla"===e.type?Ka(Ja(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Za(e,t){return e=Ka(e),t=Ya(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Xa(e)}function $a(e,t,n){try{return Za(e,t)}catch(r){return e}}function ec(e,t){if(e=Ka(e),t=Ya(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Xa(e)}function tc(e,t,n){try{return ec(e,t)}catch(r){return e}}function nc(e,t){if(e=Ka(e),t=Ya(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Xa(e)}function rc(e,t,n){try{return nc(e,t)}catch(r){return e}}function ic(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return Qa(e)>.5?ec(e,t):nc(e,t)}(e,t)}catch(r){return e}}const oc={black:"#000",white:"#fff"},sc={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ac={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},cc={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},lc={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},dc={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},uc={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},hc={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},pc=["mode","contrastThreshold","tonalOffset"];function fc(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:oc.white,default:oc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const mc=fc();function gc(){return{text:{primary:oc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:oc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const vc=gc();function yc(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=nc(e.main,i):"dark"===t&&(e.dark=ec(e.main,o)))}function _c(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=s(e,pc),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:dc[200],light:dc[50],dark:dc[400]}:{main:dc[700],light:dc[400],dark:dc[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ac[200],light:ac[50],dark:ac[400]}:{main:ac[500],light:ac[300],dark:ac[700]}}(t),c=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:cc[500],light:cc[300],dark:cc[700]}:{main:cc[700],light:cc[400],dark:cc[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:uc[400],light:uc[300],dark:uc[700]}:{main:uc[700],light:uc[500],dark:uc[900]}}(t),d=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:hc[400],light:hc[300],dark:hc[700]}:{main:hc[800],light:hc[500],dark:hc[900]}}(t),h=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:lc[400],light:lc[300],dark:lc[700]}:{main:"#ed6c02",light:lc[500],dark:lc[900]}}(t);function p(e){const t=function(e,t){const n=Qa(e),r=Qa(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,vc.text.primary)>=n?vc.text.primary:mc.text.primary;return t}const f=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:s=700}=e;if(t=u({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(Es(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(Es(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return yc(t,"light",o,r),yc(t,"dark",s,r),t.contrastText||(t.contrastText=p(t.main)),t};let m;"light"===t?m=fc():"dark"===t&&(m=gc());return Cs(u({common:u({},oc),mode:t,primary:f({color:o,name:"primary"}),secondary:f({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:c,name:"error"}),warning:f({color:h,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:d,name:"success"}),grey:sc,contrastThreshold:n,getContrastText:p,augmentColor:f,tonalOffset:r},m),i)}function Ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?", ".concat(o):", var(--".concat(e?"".concat(e,"-"):"").concat(o).concat(t(...r.slice(1)),")")}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return"var(--".concat(e?"".concat(e,"-"):"").concat(n).concat(t(...i),")")}}function bc(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]="".concat(r.fontStyle?"".concat(r.fontStyle," "):"").concat(r.fontVariant?"".concat(r.fontVariant," "):"").concat(r.fontWeight?"".concat(r.fontWeight," "):"").concat(r.fontStretch?"".concat(r.fontStretch," "):"").concat(r.fontSize||"").concat(r.lineHeight?"/".concat(r.lineHeight," "):"").concat(r.fontFamily||""))})),t}const wc=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))},Sc=(e,t,n)=>{!function e(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(r).forEach((r=>{let[s,a]=r;(!n||n&&!n([...i,s]))&&void 0!==a&&null!==a&&("object"===typeof a&&Object.keys(a).length>0?e(a,[...i,s],Array.isArray(a)?[...o,s]:o):t([...i,s],a,o))}))}(e)},Ac=(e,t)=>{if("number"===typeof t){if(["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t))))return t;return e[e.length-1].toLowerCase().includes("opacity")?t:"".concat(t,"px")}return t};function Cc(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},s={};return Sc(e,((e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r="--".concat(n?"".concat(n,"-"):"").concat(e.join("-")),c=Ac(e,t);Object.assign(i,{[r]:c}),wc(o,e,"var(".concat(r,")"),a),wc(s,e,"var(".concat(r,", ").concat(c,")"),a)}}),(e=>"vars"===e[0])),{css:i,vars:o,varsWithDefaults:s}}const Tc=["colorSchemes","components","defaultColorScheme"];const Rc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=_,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:o={},components:a,defaultColorScheme:l="light"}=e,d=s(e,Tc),{vars:h,css:p,varsWithDefaults:f}=Cc(d,t);let m=f;const g={},{[l]:v}=o,y=s(o,[l].map(c));if(Object.entries(y||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:o,varsWithDefaults:s}=Cc(r,t);m=Cs(m,s),g[n]={css:o,vars:i}})),v){const{css:e,vars:n,varsWithDefaults:r}=Cc(v,t);m=Cs(m,r),g[l]={css:e,vars:n}}function _(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),null!==i&&void 0!==i&&i.startsWith("data-")&&!i.includes("%s")&&(r="[".concat(i,'="%s"]')),t){if("media"===r){var s,a;if(e.defaultColorScheme===t)return":root";const r=(null===(s=o[t])||void 0===s||null===(a=s.palette)||void 0===a?void 0:a.mode)||t;return{["@media (prefers-color-scheme: ".concat(r,")")]:{":root":n}}}if(r)return e.defaultColorScheme===t?":root, ".concat(r.replace("%s",String(t))):r.replace("%s",String(t))}return":root"}return{vars:m,generateThemeVars:()=>{let e=u({},h);return Object.entries(g).forEach((t=>{let[,{vars:n}]=t;e=Cs(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function a(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:u({},n)}:e)}a(n(void 0,u({},p)),p);const{[i]:l}=g,d=s(g,[i].map(c));if(l){var h,f;const{css:e}=l,t=null===(h=o[i])||void 0===h||null===(f=h.palette)||void 0===f?void 0:f.mode,s=u(!r&&t?{colorScheme:t}:{},e);a(n(i,u({},s)),s)}return Object.entries(d).forEach((e=>{var t,i;let[s,{css:c}]=e;const l=null===(t=o[s])||void 0===t||null===(i=t.palette)||void 0===i?void 0:i.mode,d=u(!r&&l?{colorScheme:l}:{},c);a(n(s,u({},d)),d)})),t}}};function Ic(e,t){return u({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const xc=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Oc={textTransform:"uppercase"},Nc='"Roboto", "Helvetica", "Arial", sans-serif';function Dc(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=Nc,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:c=500,fontWeightBold:l=700,htmlFontSize:d=16,allVariants:h,pxToRem:p}=n,f=s(n,xc);const m=i/14,g=p||(e=>"".concat(e/d*m,"rem")),v=(e,t,n,i,o)=>{return u(u(u({fontFamily:r,fontWeight:e,fontSize:g(t),lineHeight:n},r===Nc?{letterSpacing:"".concat((s=i/t,Math.round(1e5*s)/1e5),"em")}:{}),o),h);var s},y={h1:v(o,96,1.167,-1.5),h2:v(o,60,1.2,-.5),h3:v(a,48,1.167,0),h4:v(a,34,1.235,.25),h5:v(a,24,1.334,0),h6:v(c,20,1.6,.15),subtitle1:v(a,16,1.75,.15),subtitle2:v(c,14,1.57,.1),body1:v(a,16,1.5,.15),body2:v(a,14,1.43,.15),button:v(c,14,1.75,.4,Oc),caption:v(a,12,1.66,.4),overline:v(a,12,2.66,1,Oc),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Cs(u({htmlFontSize:d,pxToRem:g,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:c,fontWeightBold:l},y),f,{clone:!1})}function kc(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const Pc=["none",kc(0,2,1,-1,0,1,1,0,0,1,3,0),kc(0,3,1,-2,0,2,2,0,0,1,5,0),kc(0,3,3,-2,0,3,4,0,0,1,8,0),kc(0,2,4,-1,0,4,5,0,0,1,10,0),kc(0,3,5,-1,0,5,8,0,0,1,14,0),kc(0,3,5,-1,0,6,10,0,0,1,18,0),kc(0,4,5,-2,0,7,10,1,0,2,16,1),kc(0,5,5,-3,0,8,10,1,0,3,14,2),kc(0,5,6,-3,0,9,12,1,0,3,16,2),kc(0,6,6,-3,0,10,14,1,0,4,18,3),kc(0,6,7,-4,0,11,15,1,0,4,20,3),kc(0,7,8,-4,0,12,17,2,0,5,22,4),kc(0,7,8,-4,0,13,19,2,0,5,24,4),kc(0,7,9,-4,0,14,21,2,0,5,26,4),kc(0,8,9,-5,0,15,22,2,0,6,28,5),kc(0,8,10,-5,0,16,24,2,0,6,30,5),kc(0,8,11,-5,0,17,26,2,0,6,32,5),kc(0,9,11,-5,0,18,28,2,0,7,34,6),kc(0,9,12,-6,0,19,29,2,0,7,36,6),kc(0,10,13,-6,0,20,31,3,0,8,38,7),kc(0,10,13,-6,0,21,33,3,0,8,40,7),kc(0,10,14,-6,0,22,35,3,0,8,42,7),kc(0,11,14,-7,0,23,36,3,0,9,44,8),kc(0,11,15,-7,0,24,38,3,0,9,46,8)],Lc=["duration","easing","delay"],Mc={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},jc={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Uc(e){return"".concat(Math.round(e),"ms")}function Bc(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function Fc(e){const t=u(u({},Mc),e.easing),n=u(u({},jc),e.duration);return u(u({getAutoHeightDuration:Bc,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:a=0}=r;s(r,Lc);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:Uc(i)," ").concat(o," ").concat("string"===typeof a?a:Uc(a)))).join(",")}},e),{},{easing:t,duration:n})}const Vc={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Wc(){const e=u({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[o,s]=n[i];!Ss(r=s)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||o.startsWith("unstable_")?delete t[o]:Ss(s)&&(t[o]=u({},s),e(t[o]))}var r}(e),"import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ".concat(JSON.stringify(e,null,2),";\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;")}const Hc=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function zc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:o={},typography:a={},shape:c}=e,l=s(e,Hc);if(e.vars)throw new Error(Es(20));const d=_c(i),h=ja(e);let p=Cs(h,{mixins:Ic(h.breakpoints,n),palette:d,shadows:Pc.slice(),typography:Dc(d,a),transitions:Fc(o),zIndex:u({},Vc)});p=Cs(p,l);for(var f=arguments.length,m=new Array(f>1?f-1:0),g=1;g<f;g++)m[g-1]=arguments[g];return p=m.reduce(((e,t)=>Cs(e,t)),p),p.unstable_sxConfig=u(u({},Ca),null===l||void 0===l?void 0:l.unstable_sxConfig),p.unstable_sx=function(e){return Ra({sx:e,theme:this})},p.toRuntimeSource=Wc,p}const Gc=zc;function Yc(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const Kc=["palette","opacity","overlays"],qc=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=Yc(t);return"linear-gradient(rgba(255 255 255 / ".concat(n,"), rgba(255 255 255 / ").concat(n,"))")}));function Xc(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function Jc(e){return"dark"===e?qc:[]}function Qc(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!(null===(t=e[1])||void 0===t||!t.match(/(mode|contrastThreshold|tonalOffset)/))}const Zc=e=>[...[...Array(25)].map(((t,n)=>"--".concat(e?"".concat(e,"-"):"","overlays-").concat(n))),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkBg"),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkColor")],$c=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if("class"===i&&(o=".%s"),"data"===i&&(o="[data-%s]"),null!==i&&void 0!==i&&i.startsWith("data-")&&!i.includes("%s")&&(o="[".concat(i,'="%s"]')),e.defaultColorScheme===t){if("dark"===t){const i={};return Zc(e.cssVarPrefix).forEach((e=>{i[e]=n[e],delete n[e]})),"media"===o?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",t)]:i,["".concat(r,", ").concat(o.replace("%s",t))]:n}:{[r]:u(u({},n),i)}}if(o&&"media"!==o)return"".concat(r,", ").concat(o.replace("%s",String(t)))}else if(t){if("media"===o)return{["@media (prefers-color-scheme: ".concat(String(t),")")]:{[r]:n}};if(o)return o.replace("%s",String(t))}return r},el=["palette"],tl=["colorSchemes","defaultColorScheme","disableCssColorScheme","cssVarPrefix","shouldSkipGeneratingVar","colorSchemeSelector","rootSelector"];function nl(e,t,n){!e[t]&&n&&(e[t]=n)}function rl(e){return"string"===typeof e&&e.startsWith("hsl")?Ja(e):e}function il(e,t){"".concat(t,"Channel")in e||(e["".concat(t,"Channel")]=qa(rl(e[t]),"MUI: Can't create `palette.".concat(t,"Channel` because `palette.").concat(t,"` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().")+"\n"+"To suppress this warning, you need to explicitly provide the `palette.".concat(t,'Channel` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.')))}const ol=e=>{try{return e()}catch(t){}},sl=function(){return Ec(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")};function al(e,t,n,r){var i,o,a;if(!t)return;t=!0===t?{}:t;const c="dark"===r?"dark":"light";var l;if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r}=e,i=s(e,Kc),o=_c(t);return u({palette:o,opacity:u(u({},Xc(o.mode)),n),overlays:r||Jc(o.mode)},i)}(u(u({},t),{},{palette:u({mode:c},null===(l=t)||void 0===l?void 0:l.palette)})));const d=Gc(u(u({},n),{},{palette:u({mode:c},null===(i=t)||void 0===i?void 0:i.palette)})),{palette:h}=d,p=s(d,el);return e[r]=u(u({},t),{},{palette:h,opacity:u(u({},Xc(c)),null===(o=t)||void 0===o?void 0:o.opacity),overlays:(null===(a=t)||void 0===a?void 0:a.overlays)||Jc(c)}),p}const cl=["palette","cssVariables","colorSchemes","defaultColorScheme"];function ll(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]=u(u({},!0!==n&&n),{},{palette:_c(u(u({},!0===n?{}:n.palette),{},{mode:t}))}))}function dl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=(null===t||void 0===t?void 0:t.mode)}=e,o=s(e,cl),a=i||"light",l=null===r||void 0===r?void 0:r[a],d=u(u({},r),t?{[a]:u(u({},"boolean"!==typeof l&&l),{},{palette:t})}:void 0);for(var h=arguments.length,p=new Array(h>1?h-1:0),f=1;f<h;f++)p[f-1]=arguments[f];if(!1===n){if(!("colorSchemes"in e))return Gc(e,...p);let n=t;"palette"in e||d[a]&&(!0!==d[a]?n=d[a].palette:"dark"===a&&(n={mode:"dark"}));const r=Gc(u(u({},e),{},{palette:n}),...p);return r.defaultColorScheme=a,r.colorSchemes=d,"light"===r.palette.mode&&(r.colorSchemes.light=u(u({},!0!==d.light&&d.light),{},{palette:r.palette}),ll(r,"dark",d.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark=u(u({},!0!==d.dark&&d.dark),{},{palette:r.palette}),ll(r,"light",d.light)),r}return t||"light"in d||"light"!==a||(d.light=!0),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=Qc,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),rootSelector:l=":root"}=e,d=s(e,tl),h=Object.keys(t)[0],p=n||(t.light&&"light"!==h?"light":h),f=sl(i),{[p]:m,light:g,dark:v}=t,y=u({},s(t,[p,"light","dark"].map(c)));let _=m;if(("dark"===p&&!("dark"in t)||"light"===p&&!("light"in t))&&(_=!0),!_)throw new Error(Es(21,p));const E=al(y,_,d,p);g&&!y.light&&al(y,g,void 0,"light"),v&&!y.dark&&al(y,v,void 0,"dark");let b=u(u({defaultColorScheme:p},E),{},{cssVarPrefix:i,colorSchemeSelector:a,rootSelector:l,getCssVar:f,colorSchemes:y,font:u(u({},bc(E.typography)),E.font),spacing:(w=d.spacing,"number"===typeof w?"".concat(w,"px"):"string"===typeof w||"function"===typeof w||Array.isArray(w)?w:"8px")});var w;Object.keys(b.colorSchemes).forEach((e=>{const t=b.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return f(e,t[r][i])};var r;if("light"===t.mode&&(nl(t.common,"background","#fff"),nl(t.common,"onBackground","#000")),"dark"===t.mode&&(nl(t.common,"background","#000"),nl(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){nl(t.Alert,"errorColor",tc(t.error.light,.6)),nl(t.Alert,"infoColor",tc(t.info.light,.6)),nl(t.Alert,"successColor",tc(t.success.light,.6)),nl(t.Alert,"warningColor",tc(t.warning.light,.6)),nl(t.Alert,"errorFilledBg",n("palette-error-main")),nl(t.Alert,"infoFilledBg",n("palette-info-main")),nl(t.Alert,"successFilledBg",n("palette-success-main")),nl(t.Alert,"warningFilledBg",n("palette-warning-main")),nl(t.Alert,"errorFilledColor",ol((()=>t.getContrastText(t.error.main)))),nl(t.Alert,"infoFilledColor",ol((()=>t.getContrastText(t.info.main)))),nl(t.Alert,"successFilledColor",ol((()=>t.getContrastText(t.success.main)))),nl(t.Alert,"warningFilledColor",ol((()=>t.getContrastText(t.warning.main)))),nl(t.Alert,"errorStandardBg",rc(t.error.light,.9)),nl(t.Alert,"infoStandardBg",rc(t.info.light,.9)),nl(t.Alert,"successStandardBg",rc(t.success.light,.9)),nl(t.Alert,"warningStandardBg",rc(t.warning.light,.9)),nl(t.Alert,"errorIconColor",n("palette-error-main")),nl(t.Alert,"infoIconColor",n("palette-info-main")),nl(t.Alert,"successIconColor",n("palette-success-main")),nl(t.Alert,"warningIconColor",n("palette-warning-main")),nl(t.AppBar,"defaultBg",n("palette-grey-100")),nl(t.Avatar,"defaultBg",n("palette-grey-400")),nl(t.Button,"inheritContainedBg",n("palette-grey-300")),nl(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),nl(t.Chip,"defaultBorder",n("palette-grey-400")),nl(t.Chip,"defaultAvatarColor",n("palette-grey-700")),nl(t.Chip,"defaultIconColor",n("palette-grey-700")),nl(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),nl(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),nl(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),nl(t.LinearProgress,"primaryBg",rc(t.primary.main,.62)),nl(t.LinearProgress,"secondaryBg",rc(t.secondary.main,.62)),nl(t.LinearProgress,"errorBg",rc(t.error.main,.62)),nl(t.LinearProgress,"infoBg",rc(t.info.main,.62)),nl(t.LinearProgress,"successBg",rc(t.success.main,.62)),nl(t.LinearProgress,"warningBg",rc(t.warning.main,.62)),nl(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.11)")),nl(t.Slider,"primaryTrack",rc(t.primary.main,.62)),nl(t.Slider,"secondaryTrack",rc(t.secondary.main,.62)),nl(t.Slider,"errorTrack",rc(t.error.main,.62)),nl(t.Slider,"infoTrack",rc(t.info.main,.62)),nl(t.Slider,"successTrack",rc(t.success.main,.62)),nl(t.Slider,"warningTrack",rc(t.warning.main,.62));const e=ic(t.background.default,.8);nl(t.SnackbarContent,"bg",e),nl(t.SnackbarContent,"color",ol((()=>t.getContrastText(e)))),nl(t.SpeedDialAction,"fabHoverBg",ic(t.background.paper,.15)),nl(t.StepConnector,"border",n("palette-grey-400")),nl(t.StepContent,"border",n("palette-grey-400")),nl(t.Switch,"defaultColor",n("palette-common-white")),nl(t.Switch,"defaultDisabledColor",n("palette-grey-100")),nl(t.Switch,"primaryDisabledColor",rc(t.primary.main,.62)),nl(t.Switch,"secondaryDisabledColor",rc(t.secondary.main,.62)),nl(t.Switch,"errorDisabledColor",rc(t.error.main,.62)),nl(t.Switch,"infoDisabledColor",rc(t.info.main,.62)),nl(t.Switch,"successDisabledColor",rc(t.success.main,.62)),nl(t.Switch,"warningDisabledColor",rc(t.warning.main,.62)),nl(t.TableCell,"border",rc($a(t.divider,1),.88)),nl(t.Tooltip,"bg",$a(t.grey[700],.92))}if("dark"===t.mode){nl(t.Alert,"errorColor",rc(t.error.light,.6)),nl(t.Alert,"infoColor",rc(t.info.light,.6)),nl(t.Alert,"successColor",rc(t.success.light,.6)),nl(t.Alert,"warningColor",rc(t.warning.light,.6)),nl(t.Alert,"errorFilledBg",n("palette-error-dark")),nl(t.Alert,"infoFilledBg",n("palette-info-dark")),nl(t.Alert,"successFilledBg",n("palette-success-dark")),nl(t.Alert,"warningFilledBg",n("palette-warning-dark")),nl(t.Alert,"errorFilledColor",ol((()=>t.getContrastText(t.error.dark)))),nl(t.Alert,"infoFilledColor",ol((()=>t.getContrastText(t.info.dark)))),nl(t.Alert,"successFilledColor",ol((()=>t.getContrastText(t.success.dark)))),nl(t.Alert,"warningFilledColor",ol((()=>t.getContrastText(t.warning.dark)))),nl(t.Alert,"errorStandardBg",tc(t.error.light,.9)),nl(t.Alert,"infoStandardBg",tc(t.info.light,.9)),nl(t.Alert,"successStandardBg",tc(t.success.light,.9)),nl(t.Alert,"warningStandardBg",tc(t.warning.light,.9)),nl(t.Alert,"errorIconColor",n("palette-error-main")),nl(t.Alert,"infoIconColor",n("palette-info-main")),nl(t.Alert,"successIconColor",n("palette-success-main")),nl(t.Alert,"warningIconColor",n("palette-warning-main")),nl(t.AppBar,"defaultBg",n("palette-grey-900")),nl(t.AppBar,"darkBg",n("palette-background-paper")),nl(t.AppBar,"darkColor",n("palette-text-primary")),nl(t.Avatar,"defaultBg",n("palette-grey-600")),nl(t.Button,"inheritContainedBg",n("palette-grey-800")),nl(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),nl(t.Chip,"defaultBorder",n("palette-grey-700")),nl(t.Chip,"defaultAvatarColor",n("palette-grey-300")),nl(t.Chip,"defaultIconColor",n("palette-grey-300")),nl(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),nl(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),nl(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),nl(t.LinearProgress,"primaryBg",tc(t.primary.main,.5)),nl(t.LinearProgress,"secondaryBg",tc(t.secondary.main,.5)),nl(t.LinearProgress,"errorBg",tc(t.error.main,.5)),nl(t.LinearProgress,"infoBg",tc(t.info.main,.5)),nl(t.LinearProgress,"successBg",tc(t.success.main,.5)),nl(t.LinearProgress,"warningBg",tc(t.warning.main,.5)),nl(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.13)")),nl(t.Slider,"primaryTrack",tc(t.primary.main,.5)),nl(t.Slider,"secondaryTrack",tc(t.secondary.main,.5)),nl(t.Slider,"errorTrack",tc(t.error.main,.5)),nl(t.Slider,"infoTrack",tc(t.info.main,.5)),nl(t.Slider,"successTrack",tc(t.success.main,.5)),nl(t.Slider,"warningTrack",tc(t.warning.main,.5));const e=ic(t.background.default,.98);nl(t.SnackbarContent,"bg",e),nl(t.SnackbarContent,"color",ol((()=>t.getContrastText(e)))),nl(t.SpeedDialAction,"fabHoverBg",ic(t.background.paper,.15)),nl(t.StepConnector,"border",n("palette-grey-600")),nl(t.StepContent,"border",n("palette-grey-600")),nl(t.Switch,"defaultColor",n("palette-grey-300")),nl(t.Switch,"defaultDisabledColor",n("palette-grey-600")),nl(t.Switch,"primaryDisabledColor",tc(t.primary.main,.55)),nl(t.Switch,"secondaryDisabledColor",tc(t.secondary.main,.55)),nl(t.Switch,"errorDisabledColor",tc(t.error.main,.55)),nl(t.Switch,"infoDisabledColor",tc(t.info.main,.55)),nl(t.Switch,"successDisabledColor",tc(t.success.main,.55)),nl(t.Switch,"warningDisabledColor",tc(t.warning.main,.55)),nl(t.TableCell,"border",tc($a(t.divider,1),.68)),nl(t.Tooltip,"bg",$a(t.grey[700],.92))}il(t.background,"default"),il(t.background,"paper"),il(t.common,"background"),il(t.common,"onBackground"),il(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&nl(t[e],"mainChannel",qa(rl(n.main))),n.light&&nl(t[e],"lightChannel",qa(rl(n.light))),n.dark&&nl(t[e],"darkChannel",qa(rl(n.dark))),n.contrastText&&nl(t[e],"contrastTextChannel",qa(rl(n.contrastText))),"text"===e&&(il(t[e],"primary"),il(t[e],"secondary")),"action"===e&&(n.active&&il(t[e],"active"),n.selected&&il(t[e],"selected")))}))}));for(var S=arguments.length,A=new Array(S>1?S-1:0),C=1;C<S;C++)A[C-1]=arguments[C];b=A.reduce(((e,t)=>Cs(e,t)),b);const T={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:$c(b)},{vars:R,generateThemeVars:I,generateStyleSheets:x}=Rc(b,T);return b.vars=R,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach((e=>{let[t,n]=e;b[t]=n})),b.generateThemeVars=I,b.generateStyleSheets=x,b.generateSpacing=function(){return Pa(d.spacing,Gs(this))},b.getColorSchemeSelector=function(e){return function(t){return"media"===e?"@media (prefers-color-scheme: ".concat(t,")"):e?e.startsWith("data-")&&!e.includes("%s")?"[".concat(e,'="').concat(t,'"] &'):"class"===e?".".concat(t," &"):"data"===e?"[data-".concat(t,"] &"):"".concat(e.replace("%s",t)," &"):"&"}}(a),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=o,b.unstable_sxConfig=u(u({},Ca),null===d||void 0===d?void 0:d.unstable_sxConfig),b.unstable_sx=function(e){return Ra({sx:e,theme:this})},b.toRuntimeSource=Wc,b}(u(u({},o),{},{colorSchemes:d,defaultColorScheme:a},"boolean"!==typeof n&&n),...p)}const ul="$$material",hl={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function pl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=hl[t];return r?"".concat(n,"-").concat(r):"".concat(za.generate(e),"-").concat(t)}function fl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=pl(e,t,n)})),r}const ml=fl("MuiBox",["root"]),gl=dl(),vl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:o}=e,a=vs("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Ra);return t.forwardRef((function(e,t){const c=Fa(r),l=Oa(e),{className:d,component:h="div"}=l,p=s(l,Wa);return(0,Va.jsx)(a,u({as:h,ref:t,className:At(d,o?o(i):i),theme:n&&c[n]||c},p))}))}({themeId:ul,defaultTheme:gl,defaultClassName:ml.root,generateClassName:za.generate}),yl=vl;function _l(e,t){const n=u({},t);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]=u(u({},e[i]),n[i]);else if("componentsProps"===i||"slotProps"===i){const r=e[i],o=t[i];if(o)if(r){n[i]=u({},o);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=_l(r[t],o[t])}}else n[i]=o;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}function El(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const o=e[i];let s="",a=!0;for(let e=0;e<o.length;e+=1){const r=o[e];r&&(s+=(!0===a?"":" ")+t(r),a=!1,n&&n[r]&&(s+=" "+n[r]))}r[i]=s}return r}let bl=0;const wl=u({},r).useId;function Sl(e){if(void 0!==wl){const t=wl();return null!==e&&void 0!==e?e:t}return function(e){const[n,r]=t.useState(e),i=e||n;return t.useEffect((()=>{null==n&&(bl+=1,r("mui-".concat(bl)))}),[n]),i}(e)}const Al=Sl;const Cl=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},Tl=e=>Cl(e)&&"classes"!==e,Rl=["variants"];function Il(e){const{variants:t}=e,n=s(e,Rl),r={variants:t,style:_s(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=_s(e.style))})),r}const xl=["variants"],Ol=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Nl=ja();function Dl(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function kl(e){return e?(t,n)=>n[e]:null}function Pl(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>Pl(e,t)));if(Array.isArray(null===n||void 0===n?void 0:n.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e}=n;t=s(n,xl)}return Ll(e,n.variants,[t])}return null!==n&&void 0!==n&&n.isProcessed?n.style:n}function Ll(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let a=0;a<t.length;a+=1){const c=t[a];var i,o;if("function"===typeof c.props){if(null!==(i=n)&&void 0!==i||(n=u(u(u({},e),e.ownerState),{},{ownerState:e.ownerState})),!c.props(n))continue}else for(const t in c.props){var s;if(e[t]!==c.props[t]&&(null===(s=e.ownerState)||void 0===s?void 0:s[t])!==c.props[t])continue e}if("function"===typeof c.style)null!==(o=n)&&void 0!==o||(n=u(u(u({},e),e.ownerState),{},{ownerState:e.ownerState})),r.push(c.style(n));else r.push(c.style)}return r}function Ml(e,t){}function jl(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const Ul=dl(),Bl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=Nl,rootShouldForwardProp:r=Dl,slotShouldForwardProp:i=Dl}=e;function o(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==Ra))));const{name:n,slot:a,skipVariantsResolver:c,skipSx:l,overridesResolver:d=kl(jl(a))}=t,h=s(t,Ol),p=void 0!==c?c:a&&"Root"!==a&&"root"!==a||!1,f=l||!1;let m=Dl;"Root"===a||"root"===a?m=r:a?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=vs(e,u({shouldForwardProp:m,label:Ml(n,a)},h)),v=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return Pl(t,e)};if(Ss(e)){const t=Il(e);return t.variants?function(e){return Pl(e,t)}:t.style}return e},y=function(){const t=[];for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const a=i.map(v),c=[];if(t.push(o),n&&d&&c.push((function(e){var t,r;const i=null===(t=e.theme.components)||void 0===t||null===(r=t[n])||void 0===r?void 0:r.styleOverrides;if(!i)return null;const o={};for(const n in i)o[n]=Pl(e,i[n]);return d(e,o)})),n&&!p&&c.push((function(e){var t,r;const i=e.theme,o=null===i||void 0===i||null===(t=i.components)||void 0===t||null===(r=t[n])||void 0===r?void 0:r.variants;return o?Ll(e,o):null})),f||c.push(Ra),Array.isArray(a[0])){const e=a.shift(),n=new Array(t.length).fill(""),r=new Array(c.length).fill("");let i;i=[...n,...e,...r],i.raw=[...n,...e.raw,...r],t.unshift(i)}const l=[...t,...a,...c],u=g(...l);return e.muiName&&(u.muiName=e.muiName),u};return g.withConfig&&(y.withConfig=g.withConfig),y}}({themeId:ul,defaultTheme:Ul,rootShouldForwardProp:Tl}),Fl=Bl,Vl={theme:void 0};const Wl=function(e){let t,n;return function(r){let i=t;return void 0!==i&&r.theme===n||(Vl.theme=r.theme,i=Il(e(Vl)),t=i,n=r.theme),i}},Hl=t.createContext(void 0);function zl(e){let{props:n,name:r}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?_l(i.defaultProps,r):i.styleOverrides||i.variants?r:_l(i,r)}({props:n,name:r,theme:{components:t.useContext(Hl)}})}function Gl(e){return zl(e)}function Yl(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}function Kl(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function ql(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((()=>n.every((e=>null==e))?null:e=>{n.forEach((t=>{Kl(t,e)}))}),n)}const Xl=ql,Jl="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;const Ql=function(e){const n=t.useRef(e);return Jl((()=>{n.current=e})),t.useRef((function(){return(0,n.current)(...arguments)})).current},Zl=Ql,$l={};function ed(e,n){const r=t.useRef($l);return r.current===$l&&(r.current=e(n)),r}class td{static create(){return new td}static use(){const e=ed(td.create).current,[n,r]=t.useState(!1);return e.shouldMount=n,e.setShouldMount=r,t.useEffect(e.mountEffect,[n]),e}constructor(){l(this,"mountEffect",(()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())})),this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.start(...t)}))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.stop(...t)}))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.pulsate(...t)}))}}function nd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function rd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function id(e,t){return id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},id(e,t)}function od(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,id(e,t)}const sd=t.createContext(null);function ad(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function cd(e,t,n){return null!=n[t]?n[t]:e.props[t]}function ld(e,n,r){var i=ad(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var l=i[c][r];a[i[c][r]]=n(l)}a[c]=n(c)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(n,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,t.isValidElement)(a)){var c=s in n,l=s in i,d=n[s],u=(0,t.isValidElement)(d)&&!d.props.in;!l||c&&!u?l||!c||u?l&&c&&(0,t.isValidElement)(d)&&(o[s]=(0,t.cloneElement)(a,{onExited:r.bind(null,a),in:d.props.in,exit:cd(a,"exit",e),enter:cd(a,"enter",e)})):o[s]=(0,t.cloneElement)(a,{in:!1}):o[s]=(0,t.cloneElement)(a,{onExited:r.bind(null,a),in:!0,exit:cd(a,"exit",e),enter:cd(a,"enter",e)})}})),o}var dd=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ud=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(rd(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}od(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,s=n.handleExited;return{children:n.firstRender?(r=e,i=s,ad(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:cd(e,"appear",r),enter:cd(e,"enter",r),exit:cd(e,"exit",r)})}))):ld(e,o,s),firstRender:!1}},r.handleExited=function(e,t){var n=ad(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Oi({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=o(e,["component","childFactory"]),s=this.state.contextValue,a=dd(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(sd.Provider,{value:s},a):t.createElement(sd.Provider,{value:s},t.createElement(n,i,a))},n}(t.Component);ud.propTypes={},ud.defaultProps={component:"div",childFactory:function(e){return e}};const hd=ud,pd=[];class fd{constructor(){l(this,"currentId",null),l(this,"clear",(()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)})),l(this,"disposeEffect",(()=>this.clear))}static create(){return new fd}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function md(){const e=ed(fd.create).current;var n;return n=e.disposeEffect,t.useEffect(n,pd),e}n(2110);var gd=function(e,n){var r=arguments;if(null==n||!is.call(n,"css"))return t.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=cs,o[1]=function(e,t){var n={};for(var r in t)is.call(t,r)&&(n[r]=t[r]);return n[os]=e,n}(e,n);for(var s=2;s<i;s++)o[s]=r[s];return t.createElement.apply(null,o)};!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(gd||(gd={}));var vd=ns((function(e,n){var r=Qo([e.styles],void 0,t.useContext(rs)),i=t.useRef();return es((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),o=!1,s=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==s&&(o=!0,s.setAttribute("data-emotion",e),t.hydrate([s])),i.current=[t,o],function(){t.flush()}}),[n]),es((function(){var e=i.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&jo(n,r.next,!0),t.tags.length){var o=t.tags[t.tags.length-1].nextElementSibling;t.before=o,t.flush()}n.insert("",r,t,!1)}}),[n,r.name]),null}));function yd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qo(t)}function _d(){var e=yd.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const Ed=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:c,onExited:l,timeout:d}=e,[u,h]=t.useState(!1),p=At(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:a,height:a,top:-a/2+s,left:-a/2+o},m=At(r.child,u&&r.childLeaving,i&&r.childPulsate);return c||u||h(!0),t.useEffect((()=>{if(!c&&null!=l){const e=setTimeout(l,d);return()=>{clearTimeout(e)}}}),[l,c,d]),(0,Va.jsx)("span",{className:p,style:f,children:(0,Va.jsx)("span",{className:m})})};const bd=fl("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),wd=["center","classes","className"];var Sd,Ad,Cd,Td;const Rd=_d(Sd||(Sd=nd(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"]))),Id=_d(Ad||(Ad=nd(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]))),xd=_d(Cd||(Cd=nd(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))),Od=Fl("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Nd=Fl(Ed,{name:"MuiTouchRipple",slot:"Ripple"})(Td||(Td=nd(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])),bd.rippleVisible,Rd,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),bd.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),bd.child,bd.childLeaving,Id,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),bd.childPulsate,xd,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),Dd=t.forwardRef((function(e,n){const r=Gl({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=r,c=s(r,wd),[l,d]=t.useState([]),h=t.useRef(0),p=t.useRef(null);t.useEffect((()=>{p.current&&(p.current(),p.current=null)}),[l]);const f=t.useRef(!1),m=md(),g=t.useRef(null),v=t.useRef(null),y=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;d((e=>[...e,(0,Va.jsx)(Nd,{classes:{ripple:At(o.ripple,bd.ripple),rippleVisible:At(o.rippleVisible,bd.rippleVisible),ripplePulsate:At(o.ripplePulsate,bd.ripplePulsate),child:At(o.child,bd.child),childLeaving:At(o.childLeaving,bd.childLeaving),childPulsate:At(o.childPulsate,bd.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},h.current)])),h.current+=1,p.current=s}),[o]),_=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null===e||void 0===e?void 0:e.type)&&f.current)return void(f.current=!1);"touchstart"===(null===e||void 0===e?void 0:e.type)&&(f.current=!0);const a=s?null:v.current,c=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let l,d,u;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(c.width/2),d=Math.round(c.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;l=Math.round(t-c.left),d=Math.round(n-c.top)}if(o)u=Math.sqrt((2*c.width**2+c.height**2)/3),u%2===0&&(u+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-l),l)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-d),d)+2;u=Math.sqrt(e**2+t**2)}null!==e&&void 0!==e&&e.touches?null===g.current&&(g.current=()=>{y({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})},m.start(80,(()=>{g.current&&(g.current(),g.current=null)}))):y({pulsate:r,rippleX:l,rippleY:d,rippleSize:u,cb:n})}),[i,y,m]),E=t.useCallback((()=>{_({},{pulsate:!0})}),[_]),b=t.useCallback(((e,t)=>{if(m.clear(),"touchend"===(null===e||void 0===e?void 0:e.type)&&g.current)return g.current(),g.current=null,void m.start(0,(()=>{b(e,t)}));g.current=null,d((e=>e.length>0?e.slice(1):e)),p.current=t}),[m]);return t.useImperativeHandle(n,(()=>({pulsate:E,start:_,stop:b})),[E,_,b]),(0,Va.jsx)(Od,u(u({className:At(bd.root,o.root,a),ref:v},c),{},{children:(0,Va.jsx)(hd,{component:null,exit:!0,children:l})}))})),kd=Dd;function Pd(e){return pl("MuiButtonBase",e)}const Ld=fl("MuiButtonBase",["root","disabled","focusVisible"]),Md=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],jd=Fl("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(Ld.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});function Ud(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Zl((i=>(n&&n(i),r||e[t](i),!0)))}const Bd=t.forwardRef((function(e,n){const r=Gl({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:c,component:l="button",disabled:d=!1,disableRipple:h=!1,disableTouchRipple:p=!1,focusRipple:f=!1,focusVisibleClassName:m,LinkComponent:g="a",onBlur:v,onClick:y,onContextMenu:_,onDragLeave:E,onFocus:b,onFocusVisible:w,onKeyDown:S,onKeyUp:A,onMouseDown:C,onMouseLeave:T,onMouseUp:R,onTouchEnd:I,onTouchMove:x,onTouchStart:O,tabIndex:N=0,TouchRippleProps:D,touchRippleRef:k,type:P}=r,L=s(r,Md),M=t.useRef(null),j=td.use(),U=Xl(j.ref,k),[B,F]=t.useState(!1);d&&B&&F(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{F(!0),M.current.focus()}})),[]);const V=j.shouldMount&&!h&&!d;t.useEffect((()=>{B&&f&&!h&&j.pulsate()}),[h,f,B,j]);const W=Ud(j,"start",C,p),H=Ud(j,"stop",_,p),z=Ud(j,"stop",E,p),G=Ud(j,"stop",R,p),Y=Ud(j,"stop",(e=>{B&&e.preventDefault(),T&&T(e)}),p),K=Ud(j,"start",O,p),q=Ud(j,"stop",I,p),X=Ud(j,"stop",x,p),J=Ud(j,"stop",(e=>{Yl(e.target)||F(!1),v&&v(e)}),!1),Q=Zl((e=>{M.current||(M.current=e.currentTarget),Yl(e.target)&&(F(!0),w&&w(e)),b&&b(e)})),Z=()=>{const e=M.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},$=Zl((e=>{f&&!e.repeat&&B&&" "===e.key&&j.stop(e,(()=>{j.start(e)})),e.target===e.currentTarget&&Z()&&" "===e.key&&e.preventDefault(),S&&S(e),e.target===e.currentTarget&&Z()&&"Enter"===e.key&&!d&&(e.preventDefault(),y&&y(e))})),ee=Zl((e=>{f&&" "===e.key&&B&&!e.defaultPrevented&&j.stop(e,(()=>{j.pulsate(e)})),A&&A(e),y&&e.target===e.currentTarget&&Z()&&" "===e.key&&!e.defaultPrevented&&y(e)}));let te=l;"button"===te&&(L.href||L.to)&&(te=g);const ne={};"button"===te?(ne.type=void 0===P?"button":P,ne.disabled=d):(L.href||L.to||(ne.role="button"),d&&(ne["aria-disabled"]=d));const re=Xl(n,M),ie=u(u({},r),{},{centerRipple:o,component:l,disabled:d,disableRipple:h,disableTouchRipple:p,focusRipple:f,tabIndex:N,focusVisible:B}),oe=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=El({root:["root",t&&"disabled",n&&"focusVisible"]},Pd,i);return n&&r&&(o.root+=" ".concat(r)),o})(ie);return(0,Va.jsxs)(jd,u(u(u({as:te,className:At(oe.root,c),ownerState:ie,onBlur:J,onClick:y,onContextMenu:H,onFocus:Q,onKeyDown:$,onKeyUp:ee,onMouseDown:W,onMouseLeave:Y,onMouseUp:G,onDragLeave:z,onTouchEnd:q,onTouchMove:X,onTouchStart:K,ref:re,tabIndex:d?-1:N,type:P},ne),L),{},{children:[a,V?(0,Va.jsx)(kd,u({ref:U,center:o},D)):null]}))})),Fd=bs;function Vd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}function Wd(e){return pl("MuiCircularProgress",e)}fl("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Hd=["className","color","disableShrink","size","style","thickness","value","variant"];var zd,Gd,Yd,Kd;const qd=44,Xd=_d(zd||(zd=nd(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),Jd=_d(Gd||(Gd=nd(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: -126px;\n  }\n"]))),Qd="string"!==typeof Xd?yd(Yd||(Yd=nd(["\n        animation: "," 1.4s linear infinite;\n      "])),Xd):null,Zd="string"!==typeof Jd?yd(Kd||(Kd=nd(["\n        animation: "," 1.4s ease-in-out infinite;\n      "])),Jd):null,$d=Fl("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["color".concat(Fd(n.color))]]}})(Wl((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Qd||{animation:"".concat(Xd," 1.4s linear infinite")}},...Object.entries(t.palette).filter(Vd()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),eu=Fl("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),tu=Fl("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t["circle".concat(Fd(n.variant))],n.disableShrink&&t.circleDisableShrink]}})(Wl((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:Zd||{animation:"".concat(Jd," 1.4s ease-in-out infinite")}}]}}))),nu=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:a=40,style:c,thickness:l=3.6,value:d=0,variant:h="indeterminate"}=n,p=s(n,Hd),f=u(u({},n),{},{color:i,disableShrink:o,size:a,thickness:l,value:d,variant:h}),m=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return El({root:["root",n,"color".concat(Fd(r))],svg:["svg"],circle:["circle","circle".concat(Fd(n)),i&&"circleDisableShrink"]},Wd,t)})(f),g={},v={},y={};if("determinate"===h){const e=2*Math.PI*((qd-l)/2);g.strokeDasharray=e.toFixed(3),y["aria-valuenow"]=Math.round(d),g.strokeDashoffset="".concat(((100-d)/100*e).toFixed(3),"px"),v.transform="rotate(-90deg)"}return(0,Va.jsx)($d,u(u(u({className:At(m.root,r),style:u(u({width:a,height:a},v),c),ownerState:f,ref:t,role:"progressbar"},y),p),{},{children:(0,Va.jsx)(eu,{className:m.svg,ownerState:f,viewBox:"".concat(22," ").concat(22," ").concat(qd," ").concat(qd),children:(0,Va.jsx)(tu,{className:m.circle,style:g,ownerState:f,cx:qd,cy:qd,r:(qd-l)/2,fill:"none",strokeWidth:l})})}))})),ru=nu;function iu(e){return pl("MuiButton",e)}const ou=fl("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const su=t.createContext({});const au=t.createContext(void 0),cu=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","id","loading","loadingIndicator","loadingPosition","size","startIcon","type","variant"],lu=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],du=Fl(Bd,{shouldForwardProp:e=>Tl(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(Fd(n.color))],t["size".concat(Fd(n.size))],t["".concat(n.variant,"Size").concat(Fd(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(Wl((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return u(u({},t.typography.button),{},{minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},["&.".concat(ou.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},["&.".concat(ou.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},["&.".concat(ou.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",["&.".concat(ou.disabled)]:{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Vd()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.5)"):Za(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Za(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Za(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Za(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Za(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(ou.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(ou.disabled)]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),["&.".concat(ou.loading)]:{color:"transparent"}}}]})}))),uu=Fl("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t["iconSize".concat(Fd(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...lu]}})),hu=Fl("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t["iconSize".concat(Fd(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...lu]}})),pu=Fl("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}})),fu=Fl("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(e,t)=>t.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),mu=t.forwardRef((function(e,n){const r=t.useContext(su),i=t.useContext(au),o=Gl({props:_l(r,e),name:"MuiButton"}),{children:a,color:c="primary",component:l="button",className:d,disabled:h=!1,disableElevation:p=!1,disableFocusRipple:f=!1,endIcon:m,focusVisibleClassName:g,fullWidth:v=!1,id:y,loading:_=null,loadingIndicator:E,loadingPosition:b="center",size:w="medium",startIcon:S,type:A,variant:C="text"}=o,T=s(o,cu),R=Al(y),I=null!==E&&void 0!==E?E:(0,Va.jsx)(ru,{"aria-labelledby":R,color:"inherit",size:16}),x=u(u({},o),{},{color:c,component:l,disabled:h,disableElevation:p,disableFocusRipple:f,fullWidth:v,loading:_,loadingIndicator:I,loadingPosition:b,size:w,type:A,variant:C}),O=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,loading:s,loadingPosition:a,classes:c}=e,l=El({root:["root",s&&"loading",o,"".concat(o).concat(Fd(t)),"size".concat(Fd(i)),"".concat(o,"Size").concat(Fd(i)),"color".concat(Fd(t)),n&&"disableElevation",r&&"fullWidth",s&&"loadingPosition".concat(Fd(a))],startIcon:["icon","startIcon","iconSize".concat(Fd(i))],endIcon:["icon","endIcon","iconSize".concat(Fd(i))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},iu,c);return u(u({},c),l)})(x),N=(S||_&&"start"===b)&&(0,Va.jsx)(uu,{className:O.startIcon,ownerState:x,children:S||(0,Va.jsx)(fu,{className:O.loadingIconPlaceholder,ownerState:x})}),D=(m||_&&"end"===b)&&(0,Va.jsx)(hu,{className:O.endIcon,ownerState:x,children:m||(0,Va.jsx)(fu,{className:O.loadingIconPlaceholder,ownerState:x})}),k=i||"",P="boolean"===typeof _?(0,Va.jsx)("span",{className:O.loadingWrapper,style:{display:"contents"},children:_&&(0,Va.jsx)(pu,{className:O.loadingIndicator,ownerState:x,children:I})}):null;return(0,Va.jsxs)(du,u(u({ownerState:x,className:At(r.className,O.root,d,k),component:l,disabled:h||_,focusRipple:!f,focusVisibleClassName:At(O.focusVisible,g),ref:n,type:A,id:R},T),{},{classes:O,children:[N,"end"!==b&&P,a,"end"===b&&P,D]}))})),gu=mu;function vu(){const e=Fa(Ul);return e[ul]||e}const yu=t.createContext();function _u(e){return pl("MuiGrid",e)}const Eu=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],bu=fl("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...Eu.map((e=>"grid-xs-".concat(e))),...Eu.map((e=>"grid-sm-".concat(e))),...Eu.map((e=>"grid-md-".concat(e))),...Eu.map((e=>"grid-lg-".concat(e))),...Eu.map((e=>"grid-xl-".concat(e)))]),wu=bu,Su=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Au(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const Cu=Fl("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:c,breakpoints:l}=n;let d=[];r&&(d=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n["spacing-".concat(t,"-").concat(String(i))])})),r}(s,l,t));const u=[];return l.forEach((e=>{const r=n[e];r&&u.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,o&&t.item,c&&t.zeroMinWidth,...d,"row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==a&&t["wrap-xs-".concat(String(a))],...u]}})((e=>{let{ownerState:t}=e;return u(u(u(u({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"}),t.item&&{margin:0}),t.zeroMinWidth&&{minWidth:0}),"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;return Os({theme:t},ks({values:n.direction,breakpoints:t.breakpoints.values}),(e=>{const t={flexDirection:e};return e.startsWith("column")&&(t["& > .".concat(wu.item)]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=ks({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=Au({breakpoints:t.breakpoints.values,values:e})),o=Os({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);return"0px"!==o?{marginTop:"calc(-1 * ".concat(o,")"),["& > .".concat(wu.item)]:{paddingTop:o}}:null!==(i=n)&&void 0!==i&&i.includes(r)?{}:{marginTop:0,["& > .".concat(wu.item)]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=ks({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=Au({breakpoints:t.breakpoints.values,values:e})),o=Os({theme:t},e,((e,r)=>{var i;const o=t.spacing(e);if("0px"!==o){const e="calc(-1 * ".concat(o,")");return{width:"calc(100% + ".concat(o,")"),marginLeft:e,["& > .".concat(wu.item)]:{paddingLeft:o}}}return null!==(i=n)&&void 0!==i&&i.includes(r)?{}:{width:"100%",marginLeft:0,["& > .".concat(wu.item)]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=ks({values:r.columns,breakpoints:n.breakpoints.values}),a="object"===typeof s?s[i]:s;if(void 0===a||null===a)return e;const c="".concat(Math.round(t/a*1e8)/1e6,"%");let l={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t="calc(".concat(c," + ").concat(e,")");l={flexBasis:t,maxWidth:t}}}o=u({flexBasis:c,flexGrow:0,maxWidth:c},l)}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const Tu=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:c}=e;let l=[];n&&(l=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e="spacing-".concat(t,"-").concat(String(r));n.push(e)}})),n}(o,c));const d=[];c.forEach((t=>{const n=e[t];n&&d.push("grid-".concat(t,"-").concat(String(n)))}));return El({root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...l,"row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==s&&"wrap-xs-".concat(String(s)),...d]},_u,t)},Ru=t.forwardRef((function(e,n){const r=Gl({props:e,name:"MuiGrid"}),{breakpoints:i}=vu(),o=Oa(r),{className:a,columns:c,columnSpacing:l,component:d="div",container:h=!1,direction:p="row",item:f=!1,rowSpacing:m,spacing:g=0,wrap:v="wrap",zeroMinWidth:y=!1}=o,_=s(o,Su),E=m||g,b=l||g,w=t.useContext(yu),S=h?c||12:w,A={},C=u({},_);i.keys.forEach((e=>{null!=_[e]&&(A[e]=_[e],delete C[e])}));const T=u(u(u({},o),{},{columns:S,container:h,direction:p,item:f,rowSpacing:E,columnSpacing:b,wrap:v,zeroMinWidth:y,spacing:g},A),{},{breakpoints:i.keys}),R=Tu(T);return(0,Va.jsx)(yu.Provider,{value:S,children:(0,Va.jsx)(Cu,u({ownerState:T,className:At(R.root,a),as:d,ref:n},C))})}));const Iu=Ru;function xu(e){return pl("MuiPaper",e)}fl("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Ou=["className","component","elevation","square","variant"],Nu=Fl("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})(Wl((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:"1px solid ".concat((t.vars||t).palette.divider)}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),Du=t.forwardRef((function(e,t){var n;const r=Gl({props:e,name:"MuiPaper"}),i=vu(),{className:o,component:a="div",elevation:c=1,square:l=!1,variant:d="elevation"}=r,h=s(r,Ou),p=u(u({},r),{},{component:a,elevation:c,square:l,variant:d}),f=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return El({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},xu,i)})(p);return(0,Va.jsx)(Nu,u(u({as:a,ownerState:p,className:At(f.root,o),ref:t},h),{},{style:u(u({},"elevation"===d&&u(u({"--Paper-shadow":(i.vars||i).shadows[c]},i.vars&&{"--Paper-overlay":null===(n=i.vars.overlays)||void 0===n?void 0:n[c]}),!i.vars&&"dark"===i.palette.mode&&{"--Paper-overlay":"linear-gradient(".concat(Za("#fff",Yc(c)),", ").concat(Za("#fff",Yc(c)),")")})),h.style)}))}));function ku(e){return pl("MuiCard",e)}fl("MuiCard",["root"]);const Pu=["className","raised"],Lu=Fl(Du,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),Mu=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=n,o=s(n,Pu),a=u(u({},n),{},{raised:i}),c=(e=>{const{classes:t}=e;return El({root:["root"]},ku,t)})(a);return(0,Va.jsx)(Lu,u({className:At(c.root,r),elevation:i?8:void 0,ref:t,ownerState:a},o))}));function ju(e){return pl("MuiCardMedia",e)}fl("MuiCardMedia",["root","media","img"]);const Uu=["children","className","component","image","src","style"],Bu=Fl("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),Fu=["video","audio","picture","iframe","img"],Vu=["picture","img"],Wu=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiCardMedia"}),{children:r,className:i,component:o="div",image:a,src:c,style:l}=n,d=s(n,Uu),h=Fu.includes(o),p=!h&&a?u({backgroundImage:'url("'.concat(a,'")')},l):l,f=u(u({},n),{},{component:o,isMediaComponent:h,isImageComponent:Vu.includes(o)}),m=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e;return El({root:["root",n&&"media",r&&"img"]},ju,t)})(f);return(0,Va.jsx)(Bu,u(u({className:At(m.root,i),as:o,role:!h&&a?"img":void 0,ref:t,style:p,ownerState:f,src:h?a||c:void 0},d),{},{children:r}))})),Hu=Wu;function zu(e){return pl("MuiCardContent",e)}fl("MuiCardContent",["root"]);const Gu=["className","component"],Yu=Fl("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),Ku=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=n,o=s(n,Gu),a=u(u({},n),{},{component:i}),c=(e=>{const{classes:t}=e;return El({root:["root"]},zu,t)})(a);return(0,Va.jsx)(Yu,u({as:i,className:At(c.root,r),ownerState:a,ref:t},o))}));function qu(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,Va.jsx)(vd,{styles:r})}const Xu=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=Fa(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Va.jsx)(qu,{styles:o})};const Ju=function(e){return(0,Va.jsx)(Xu,u(u({},e),{},{defaultTheme:Ul,themeId:ul}))};function Qu(e){return pl("MuiTypography",e)}fl("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Zu=["color"],$u=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],eh={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},th=Oa,nh=Fl("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(Fd(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Wl((e=>{var t;let{theme:n}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(n.palette).filter(Vd()).map((e=>{let[t]=e;return{props:{color:t},style:{color:(n.vars||n).palette[t].main}}})),...Object.entries((null===(t=n.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat(Fd(t))},style:{color:(n.vars||n).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),rh={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ih=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiTypography"}),{color:r}=n,i=s(n,Zu),o=!eh[r],a=th(u(u({},i),o&&{color:r})),{align:c="inherit",className:l,component:d,gutterBottom:h=!1,noWrap:p=!1,paragraph:f=!1,variant:m="body1",variantMapping:g=rh}=a,v=s(a,$u),y=u(u({},a),{},{align:c,color:r,className:l,component:d,gutterBottom:h,noWrap:p,paragraph:f,variant:m,variantMapping:g}),_=d||(f?"p":g[m]||rh[m])||"span",E=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e;return El({root:["root",o,"inherit"!==e.align&&"align".concat(Fd(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},Qu,s)})(y);return(0,Va.jsx)(nh,u(u({as:_,ref:t,className:At(E.root,l)},v),{},{ownerState:y,style:u(u({},"inherit"!==c&&{"--Typography-textAlign":c}),v.style)}))})),oh=ih;function sh(e){var n;return parseInt(t.version,10)>=19?(null===e||void 0===e||null===(n=e.props)||void 0===n?void 0:n.ref)||null:(null===e||void 0===e?void 0:e.ref)||null}function ah(e){return e&&e.ownerDocument||document}const ch=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function lh(e){const t=[],n=[];return Array.from(e.querySelectorAll(ch)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function dh(){return!0}const uh=function(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:s=lh,isEnabled:a=dh,open:c}=e,l=t.useRef(!1),d=t.useRef(null),u=t.useRef(null),h=t.useRef(null),p=t.useRef(null),f=t.useRef(!1),m=t.useRef(null),g=ql(sh(n),m),v=t.useRef(null);t.useEffect((()=>{c&&m.current&&(f.current=!r)}),[r,c]),t.useEffect((()=>{if(!c||!m.current)return;const e=ah(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{o||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}}),[c]),t.useEffect((()=>{if(!c||!m.current)return;const e=ah(m.current),t=t=>{v.current=t,!i&&a()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(l.current=!0,u.current&&u.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!a()||l.current)return void(l.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==d.current&&e.activeElement!==u.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==d.current&&e.activeElement!==u.current||(n=s(m.current)),n.length>0){var r,o;const e=Boolean((null===(r=v.current)||void 0===r?void 0:r.shiftKey)&&"Tab"===(null===(o=v.current)||void 0===o?void 0:o.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,i,o,a,c,s]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,Va.jsxs)(t.Fragment,{children:[(0,Va.jsx)("div",{tabIndex:c?0:-1,onFocus:y,ref:d,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,Va.jsx)("div",{tabIndex:c?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})};var hh=n(4164);const ph=t.forwardRef((function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[s,a]=t.useState(null),c=ql(t.isValidElement(r)?sh(r):null,n);if(Jl((()=>{o||a(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),Jl((()=>{if(s&&!o)return Kl(n,s),()=>{Kl(n,null)}}),[n,s,o]),o){if(t.isValidElement(r)){const e={ref:c};return t.cloneElement(r,e)}return r}return s?hh.createPortal(r,s):s}));const fh=function(e){return"string"===typeof e};const mh=function(e,t,n){return void 0===e||fh(e)?t:u(u({},t),{},{ownerState:u(u({},t.ownerState),n)})};const gh=function(e,t,n){return"function"===typeof e?e(t,n):e};const vh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const yh=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const _h=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=At(null===n||void 0===n?void 0:n.className,o,null===i||void 0===i?void 0:i.className,null===r||void 0===r?void 0:r.className),t=u(u(u({},null===n||void 0===n?void 0:n.style),null===i||void 0===i?void 0:i.style),null===r||void 0===r?void 0:r.style),s=u(u(u({},n),i),r);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=vh(u(u({},i),r)),a=yh(r),c=yh(i),l=t(s),d=At(null===l||void 0===l?void 0:l.className,null===n||void 0===n?void 0:n.className,o,null===i||void 0===i?void 0:i.className,null===r||void 0===r?void 0:r.className),h=u(u(u(u({},null===l||void 0===l?void 0:l.style),null===n||void 0===n?void 0:n.style),null===i||void 0===i?void 0:i.style),null===r||void 0===r?void 0:r.style),p=u(u(u(u({},l),n),c),a);return d.length>0&&(p.className=d),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:l.ref}},Eh=["className","elementType","ownerState","externalForwardedProps","internalForwardedProps","shouldForwardComponentProp"],bh=["component","slots","slotProps"],wh=["component"];function Sh(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:a,shouldForwardComponentProp:c=!1}=t,l=s(t,Eh),{component:d,slots:h={[e]:void 0},slotProps:p={[e]:void 0}}=o,f=s(o,bh),m=h[e]||r,g=gh(p[e],i),v=_h(u(u({className:n},l),{},{externalForwardedProps:"root"===e?f:void 0,externalSlotProps:g})),{props:{component:y},internalRef:_}=v,E=s(v.props,wh),b=ql(_,null===g||void 0===g?void 0:g.ref,t.ref),w="root"===e?y||d:y;return[m,mh(m,u(u(u(u(u(u({},"root"===e&&!d&&!h[e]&&a),"root"!==e&&!h[e]&&a),E),w&&!c&&{as:w}),w&&c&&{component:w}),{},{ref:b}),i)]}const Ah=!1;var Ch="unmounted",Th="exited",Rh="entering",Ih="entered",xh="exiting",Oh=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Th,r.appearStatus=Rh):i=Ih:i=t.unmountOnExit||t.mountOnEnter?Ch:Th,r.state={status:i},r.nextCallback=null,r}od(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ch?{status:Th}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Rh&&n!==Ih&&(t=Rh):n!==Rh&&n!==Ih||(t=xh)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Rh){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:hh.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Th&&this.setState({status:Ch})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[hh.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),c=r?a.appear:a.enter;!e&&!n||Ah?this.safeSetState({status:Ih},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:Rh},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:Ih},(function(){t.props.onEntered(o,s)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:hh.findDOMNode(this);t&&!Ah?(this.props.onExit(r),this.safeSetState({status:xh},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Th},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Th},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:hh.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===Ch)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,o(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(sd.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function Nh(){}Oh.contextType=sd,Oh.propTypes={},Oh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Nh,onEntering:Nh,onEntered:Nh,onExit:Nh,onExiting:Nh,onExited:Nh},Oh.UNMOUNTED=Ch,Oh.EXITED=Th,Oh.ENTERING=Rh,Oh.ENTERED=Ih,Oh.EXITING=xh;const Dh=Oh,kh=e=>e.scrollTop;function Ph(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!==(n=s.transitionDuration)&&void 0!==n?n:"number"===typeof i?i:i[t.mode]||0,easing:null!==(r=s.transitionTimingFunction)&&void 0!==r?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}const Lh=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Mh=["ownerState"],jh={entering:{opacity:1},entered:{opacity:1}},Uh=t.forwardRef((function(e,n){const r=vu(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:c,easing:l,in:d,onEnter:h,onEntered:p,onEntering:f,onExit:m,onExited:g,onExiting:v,style:y,timeout:_=i,TransitionComponent:E=Dh}=e,b=s(e,Lh),w=t.useRef(null),S=Xl(w,sh(c),n),A=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},C=A(f),T=A(((e,t)=>{kh(e);const n=Ph({style:y,timeout:_,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),h&&h(e,t)})),R=A(p),I=A(v),x=A((e=>{const t=Ph({style:y,timeout:_,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),m&&m(e)})),O=A(g);return(0,Va.jsx)(E,u(u({appear:a,in:d,nodeRef:w,onEnter:T,onEntered:R,onEntering:C,onExit:x,onExited:O,onExiting:I,addEndListener:e=>{o&&o(w.current,e)},timeout:_},b),{},{children:(e,n)=>{let{ownerState:r}=n,i=s(n,Mh);return t.cloneElement(c,u({style:u(u(u({opacity:0,visibility:"exited"!==e||d?void 0:"hidden"},jh[e]),y),c.props.style),ref:S},i))}}))})),Bh=Uh;function Fh(e){return pl("MuiBackdrop",e)}fl("MuiBackdrop",["root","invisible"]);const Vh=["children","className","component","invisible","open","components","componentsProps","slotProps","slots","TransitionComponent","transitionDuration"],Wh=Fl("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Hh=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:a=!1,open:c,components:l={},componentsProps:d={},slotProps:h={},slots:p={},TransitionComponent:f,transitionDuration:m}=n,g=s(n,Vh),v=u(u({},n),{},{component:o,invisible:a}),y=(e=>{const{classes:t,invisible:n}=e;return El({root:["root",n&&"invisible"]},Fh,t)})(v),_={slots:u({transition:f,root:l.Root},p),slotProps:u(u({},d),h)},[E,b]=Sh("root",{elementType:Wh,externalForwardedProps:_,className:At(y.root,i),ownerState:v}),[w,S]=Sh("transition",{elementType:Bh,externalForwardedProps:_,ownerState:v});return(0,Va.jsx)(w,u(u(u({in:c,timeout:m},g),S),{},{children:(0,Va.jsx)(E,u(u({"aria-hidden":!0},b),{},{classes:y,ref:t,children:r}))}))})),zh=Hh;function Gh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function Yh(e){return ah(e).defaultView||window}function Kh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function qh(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Xh(e){return parseInt(Yh(e).getComputedStyle(e).paddingRight,10)||0}function Jh(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!o.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&qh(e,i)}))}function Qh(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function Zh(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=ah(e);return t.body===e?Yh(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=Kh(Yh(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Xh(r)+e,"px");const t=ah(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(Xh(t)+e,"px")}))}let e;if(r.parentNode instanceof DocumentFragment)e=ah(r).body;else{const t=r.parentElement,n=Yh(r);e="HTML"===(null===t||void 0===t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const $h=()=>{},ep=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&qh(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Jh(t,e.mount,e.modalRef,r,!0);const i=Qh(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=Qh(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=Zh(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=Qh(this.containers,(t=>t.modals.includes(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&qh(e.modalRef,t),Jh(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&qh(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const tp=function(e){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:c,onClose:l,open:d,rootRef:h}=e,p=t.useRef({}),f=t.useRef(null),m=t.useRef(null),g=ql(m,h),[v,y]=t.useState(!d),_=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let E=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(E=!1);const b=()=>(p.current.modalRef=m.current,p.current.mount=f.current,p.current),w=()=>{ep.mount(b(),{disableScrollLock:i}),m.current&&(m.current.scrollTop=0)},S=Ql((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||ah(f.current).body;ep.add(b(),e),m.current&&w()})),A=()=>ep.isTopModal(b()),C=Ql((e=>{f.current=e,e&&(d&&A()?w():m.current&&qh(m.current,E))})),T=t.useCallback((()=>{ep.remove(b(),E)}),[E]);t.useEffect((()=>()=>{T()}),[T]),t.useEffect((()=>{d?S():_&&o||T()}),[d,T,_,o,S]);const R=e=>t=>{var n;null===(n=e.onKeyDown)||void 0===n||n.call(e,t),"Escape"===t.key&&229!==t.which&&A()&&(r||(t.stopPropagation(),l&&l(t,"escapeKeyDown")))},I=e=>t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),t.target===t.currentTarget&&l&&l(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=vh(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=u(u({},n),t);return u(u({role:"presentation"},r),{},{onKeyDown:R(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(u({"aria-hidden":!0},e),{},{onClick:I(e),open:d})},getTransitionProps:()=>{var e,t;return{onEnter:Gh((()=>{y(!1),s&&s()}),null!==(e=null===c||void 0===c?void 0:c.props.onEnter)&&void 0!==e?e:$h),onExited:Gh((()=>{y(!0),a&&a(),o&&T()}),null!==(t=null===c||void 0===c?void 0:c.props.onExited)&&void 0!==t?t:$h)}},rootRef:g,portalRef:C,isTopModal:A,exited:v,hasTransition:_}};function np(e){return pl("MuiModal",e)}fl("MuiModal",["root","hidden","backdrop"]);const rp=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],ip=Fl("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Wl((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),op=Fl(zh,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),sp=t.forwardRef((function(e,n){const r=Gl({name:"MuiModal",props:e}),{BackdropComponent:i=op,BackdropProps:o,classes:a,className:c,closeAfterTransition:l=!1,children:d,container:h,component:p,components:f={},componentsProps:m={},disableAutoFocus:g=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:y=!1,disablePortal:_=!1,disableRestoreFocus:E=!1,disableScrollLock:b=!1,hideBackdrop:w=!1,keepMounted:S=!1,onBackdropClick:A,onClose:C,onTransitionEnter:T,onTransitionExited:R,open:I,slotProps:x={},slots:O={},theme:N}=r,D=s(r,rp),k=u(u({},r),{},{closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:v,disableEscapeKeyDown:y,disablePortal:_,disableRestoreFocus:E,disableScrollLock:b,hideBackdrop:w,keepMounted:S}),{getRootProps:P,getBackdropProps:L,getTransitionProps:M,portalRef:j,isTopModal:U,exited:B,hasTransition:F}=tp(u(u({},k),{},{rootRef:n})),V=u(u({},k),{},{exited:B}),W=(e=>{const{open:t,exited:n,classes:r}=e;return El({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},np,r)})(V),H={};if(void 0===d.props.tabIndex&&(H.tabIndex="-1"),F){const{onEnter:e,onExited:t}=M();H.onEnter=e,H.onExited=t}const z=u(u({},D),{},{slots:u({root:f.Root,backdrop:f.Backdrop},O),slotProps:u(u({},m),x)}),[G,Y]=Sh("root",{elementType:ip,externalForwardedProps:z,getSlotProps:P,additionalProps:{ref:n,as:p},ownerState:V,className:At(c,null===W||void 0===W?void 0:W.root,!V.open&&V.exited&&(null===W||void 0===W?void 0:W.hidden))}),[K,q]=Sh("backdrop",{elementType:i,externalForwardedProps:z,additionalProps:o,getSlotProps:e=>L(u(u({},e),{},{onClick:t=>{A&&A(t),null!==e&&void 0!==e&&e.onClick&&e.onClick(t)}})),className:At(null===o||void 0===o?void 0:o.className,null===W||void 0===W?void 0:W.backdrop),ownerState:V}),X=Xl(null===o||void 0===o?void 0:o.ref,q.ref);return S||I||F&&!B?(0,Va.jsx)(ph,{ref:j,container:h,disablePortal:_,children:(0,Va.jsxs)(G,u(u({},Y),{},{children:[!w&&i?(0,Va.jsx)(K,u(u({},q),{},{ref:X})):null,(0,Va.jsx)(uh,{disableEnforceFocus:v,disableAutoFocus:g,disableRestoreFocus:E,isEnabled:U,open:I,children:t.cloneElement(d,H)})]}))}):null})),ap=sp;function cp(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}const lp=["onChange","maxRows","minRows","style","value"];function dp(e){return parseInt(e,10)||0}const up={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const hp=t.forwardRef((function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:c}=e,l=s(e,lp),{current:d}=t.useRef(null!=c),h=t.useRef(null),p=ql(n,h),f=t.useRef(null),m=t.useRef(null),g=t.useCallback((()=>{const t=h.current,n=Yh(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const r=m.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const s=n.boxSizing,a=dp(n.paddingBottom)+dp(n.paddingTop),c=dp(n.borderBottomWidth)+dp(n.borderTopWidth),l=r.scrollHeight;r.value="x";const d=r.scrollHeight;let u=l;o&&(u=Math.max(Number(o)*d,u)),i&&(u=Math.min(Number(i)*d,u)),u=Math.max(u,d);return{outerHeightStyle:u+("border-box"===s?a+c:0),overflowing:Math.abs(u-l)<=1}}),[i,o,e.placeholder]),v=t.useCallback((()=>{const e=g();if(void 0===(t=e)||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflowing)return;var t;const n=e.outerHeightStyle,r=h.current;f.current!==n&&(f.current=n,r.style.height="".concat(n,"px")),r.style.overflow=e.overflowing?"hidden":""}),[g]);Jl((()=>{const e=()=>{v()};let t;const n=cp(e),r=h.current,i=Yh(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(e),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(t),i.removeEventListener("resize",n),o&&o.disconnect()}}),[g,v]),Jl((()=>{v()}));return(0,Va.jsxs)(t.Fragment,{children:[(0,Va.jsx)("textarea",u({value:c,onChange:e=>{d||v(),r&&r(e)},ref:p,rows:o,style:a},l)),(0,Va.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:m,tabIndex:-1,style:u(u(u({},up),a),{},{paddingTop:0,paddingBottom:0})})]})})),pp=hp;const fp=function(e){return"string"===typeof e};function mp(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const gp=t.createContext(void 0);function vp(){return t.useContext(gp)}const yp=Jl;function _p(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Ep(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(_p(e.value)&&""!==e.value||t&&_p(e.defaultValue)&&""!==e.defaultValue)}function bp(e){return pl("MuiInputBase",e)}const wp=fl("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Sp=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"];var Ap;const Cp=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(Fd(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Tp=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Rp=Fl("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Cp})(Wl((e=>{let{theme:t}=e;return u(u({},t.typography.body1),{},{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(wp.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]})}))),Ip=Fl("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Tp})(Wl((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=u(u({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5}),{},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(wp.formControl," &")]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},["&.".concat(wp.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),xp=function(e){return function(t){return(0,Va.jsx)(Ju,{styles:"function"===typeof e?n=>e(u({theme:n},t)):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Op=t.forwardRef((function(e,n){var r;const i=Gl({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:a,autoFocus:c,className:l,color:d,components:h={},componentsProps:p={},defaultValue:f,disabled:m,disableInjectingGlobalStyles:g,endAdornment:v,error:y,fullWidth:_=!1,id:E,inputComponent:b="input",inputProps:w={},inputRef:S,margin:A,maxRows:C,minRows:T,multiline:R=!1,name:I,onBlur:x,onChange:O,onClick:N,onFocus:D,onKeyDown:k,onKeyUp:P,placeholder:L,readOnly:M,renderSuffix:j,rows:U,size:B,slotProps:F={},slots:V={},startAdornment:W,type:H="text",value:z}=i,G=s(i,Sp),Y=null!=w.value?w.value:z,{current:K}=t.useRef(null!=Y),q=t.useRef(),X=t.useCallback((e=>{0}),[]),J=Xl(q,S,w.ref,X),[Q,Z]=t.useState(!1),$=vp();const ee=mp({props:i,muiFormControl:$,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ee.focused=$?$.focused:Q,t.useEffect((()=>{!$&&m&&Q&&(Z(!1),x&&x())}),[$,m,Q,x]);const te=$&&$.onFilled,ne=$&&$.onEmpty,re=t.useCallback((e=>{Ep(e)?te&&te():ne&&ne()}),[te,ne]);yp((()=>{K&&re({value:Y})}),[Y,re,K]);t.useEffect((()=>{re(q.current)}),[]);let ie=b,oe=w;R&&"input"===ie&&(oe=u(U?{type:void 0,minRows:U,maxRows:U}:{type:void 0,maxRows:C,minRows:T},oe),ie=pp);t.useEffect((()=>{$&&$.setAdornedStart(Boolean(W))}),[$,W]);const se=u(u({},i),{},{color:ee.color||"primary",disabled:ee.disabled,endAdornment:v,error:ee.error,focused:ee.focused,formControl:$,fullWidth:_,hiddenLabel:ee.hiddenLabel,multiline:R,size:ee.size,startAdornment:W,type:H}),ae=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:c,hiddenLabel:l,multiline:d,readOnly:u,size:h,startAdornment:p,type:f}=e;return El({root:["root","color".concat(Fd(n)),r&&"disabled",i&&"error",c&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&"size".concat(Fd(h)),d&&"multiline",p&&"adornedStart",o&&"adornedEnd",l&&"hiddenLabel",u&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",d&&"inputMultiline","small"===h&&"inputSizeSmall",l&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",u&&"readOnly"]},bp,t)})(se),ce=V.root||h.Root||Rp,le=F.root||p.root||{},de=V.input||h.Input||Ip;return oe=u(u({},oe),null!==(r=F.input)&&void 0!==r?r:p.input),(0,Va.jsxs)(t.Fragment,{children:[!g&&"function"===typeof xp&&(Ap||(Ap=(0,Va.jsx)(xp,{}))),(0,Va.jsxs)(ce,u(u(u(u({},le),{},{ref:n,onClick:e=>{q.current&&e.currentTarget===e.target&&q.current.focus(),N&&N(e)}},G),!fp(ce)&&{ownerState:u(u({},se),le.ownerState)}),{},{className:At(ae.root,le.className,l,M&&"MuiInputBase-readOnly"),children:[W,(0,Va.jsx)(gp.Provider,{value:null,children:(0,Va.jsx)(de,u(u(u({"aria-invalid":ee.error,"aria-describedby":o,autoComplete:a,autoFocus:c,defaultValue:f,disabled:ee.disabled,id:E,onAnimationStart:e=>{re("mui-auto-fill-cancel"===e.animationName?q.current:{value:"x"})},name:I,placeholder:L,readOnly:M,required:ee.required,rows:U,value:Y,onKeyDown:k,onKeyUp:P,type:H},oe),!fp(de)&&{as:ie,ownerState:u(u({},se),oe.ownerState)}),{},{ref:J,className:At(ae.input,oe.className,M&&"MuiInputBase-readOnly"),onBlur:e=>{x&&x(e),w.onBlur&&w.onBlur(e),$&&$.onBlur?$.onBlur(e):Z(!1)},onChange:function(e){if(!K){const t=e.target||q.current;if(null==t)throw new Error(Es(1));re({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];w.onChange&&w.onChange(e,...n),O&&O(e,...n)},onFocus:e=>{D&&D(e),w.onFocus&&w.onFocus(e),$&&$.onFocus?$.onFocus(e):Z(!0)}}))}),v,j?j(u(u({},ee),{},{startAdornment:W})):null]}))]})})),Np=Op;function Dp(e){return pl("MuiInput",e)}const kp=u(u({},wp),fl("MuiInput",["root","underline","input"])),Pp=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Lp=Fl(Rp,{shouldForwardProp:e=>Tl(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Cp(e,t),!n.disableUnderline&&t.underline]}})(Wl((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(kp.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(kp.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(kp.disabled,", .").concat(kp.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(n)}},["&.".concat(kp.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Vd()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n].main)}}}}))]}}))),Mp=Fl(Ip,{name:"MuiInput",slot:"Input",overridesResolver:Tp})({}),jp=t.forwardRef((function(e,t){var n,r,i,o;const a=Gl({props:e,name:"MuiInput"}),{disableUnderline:c=!1,components:l={},componentsProps:d,fullWidth:h=!1,inputComponent:p="input",multiline:f=!1,slotProps:m,slots:g={},type:v="text"}=a,y=s(a,Pp),_=(e=>{const{classes:t,disableUnderline:n}=e,r=El({root:["root",!n&&"underline"],input:["input"]},Dp,t);return u(u({},t),r)})(a),E={root:{ownerState:{disableUnderline:c}}},b=(null!==m&&void 0!==m?m:d)?Cs(null!==m&&void 0!==m?m:d,E):E,w=null!==(n=null!==(r=g.root)&&void 0!==r?r:l.Root)&&void 0!==n?n:Lp,S=null!==(i=null!==(o=g.input)&&void 0!==o?o:l.Input)&&void 0!==i?i:Mp;return(0,Va.jsx)(Np,u(u({slots:{root:w,input:S},slotProps:b,fullWidth:h,inputComponent:p,multiline:f,ref:t,type:v},y),{},{classes:_}))}));jp.muiName="Input";const Up=jp;function Bp(e){return pl("MuiFilledInput",e)}const Fp=u(u({},wp),fl("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])),Vp=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Wp=Fl(Rp,{shouldForwardProp:e=>Tl(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Cp(e,t),!n.disableUnderline&&t.underline]}})(Wl((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},["&.".concat(Fp.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},["&.".concat(Fp.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:s},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Fp.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Fp.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Fp.disabled,", .").concat(Fp.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(Fp.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Vd()).map((e=>{var n;let[r]=e;return{props:{disableUnderline:!1,color:r},style:{"&::after":{borderBottom:"2px solid ".concat(null===(n=(t.vars||t).palette[r])||void 0===n?void 0:n.main)}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),Hp=Fl(Ip,{name:"MuiFilledInput",slot:"Input",overridesResolver:Tp})(Wl((e=>{let{theme:t}=e;return u(u(u({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]})}))),zp=t.forwardRef((function(e,t){var n,r,i,o;const a=Gl({props:e,name:"MuiFilledInput"}),{disableUnderline:c=!1,components:l={},componentsProps:d,fullWidth:h=!1,hiddenLabel:p,inputComponent:f="input",multiline:m=!1,slotProps:g,slots:v={},type:y="text"}=a,_=s(a,Vp),E=u(u({},a),{},{disableUnderline:c,fullWidth:h,inputComponent:f,multiline:m,type:y}),b=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:s,multiline:a}=e,c=El({root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd","small"===o&&"size".concat(Fd(o)),s&&"hiddenLabel",a&&"multiline"],input:["input"]},Bp,t);return u(u({},t),c)})(a),w={root:{ownerState:E},input:{ownerState:E}},S=(null!==g&&void 0!==g?g:d)?Cs(w,null!==g&&void 0!==g?g:d):w,A=null!==(n=null!==(r=v.root)&&void 0!==r?r:l.Root)&&void 0!==n?n:Wp,C=null!==(i=null!==(o=v.input)&&void 0!==o?o:l.Input)&&void 0!==i?i:Hp;return(0,Va.jsx)(Np,u(u({slots:{root:A,input:C},slotProps:S,fullWidth:h,inputComponent:f,multiline:m,ref:t,type:y},_),{},{classes:b}))}));zp.muiName="Input";const Gp=zp,Yp=["children","classes","className","label","notched"];var Kp;const qp=Fl("fieldset",{shouldForwardProp:Tl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Xp=Fl("legend",{shouldForwardProp:Tl})(Wl((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function Jp(e){return pl("MuiOutlinedInput",e)}const Qp=u(u({},wp),fl("MuiOutlinedInput",["root","notchedOutline","input"])),Zp=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],$p=Fl(Rp,{shouldForwardProp:e=>Tl(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Cp})(Wl((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(Qp.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(Qp.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}},["&.".concat(Qp.focused," .").concat(Qp.notchedOutline)]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Vd()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(Qp.focused," .").concat(Qp.notchedOutline)]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat(Qp.error," .").concat(Qp.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(Qp.disabled," .").concat(Qp.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),ef=Fl((function(e){const{children:t,classes:n,className:r,label:i,notched:o}=e,a=s(e,Yp),c=null!=i&&""!==i,l=u(u({},e),{},{notched:o,withLabel:c});return(0,Va.jsx)(qp,u(u({"aria-hidden":!0,className:r,ownerState:l},a),{},{children:(0,Va.jsx)(Xp,{ownerState:l,children:c?(0,Va.jsx)("span",{children:i}):Kp||(Kp=(0,Va.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(Wl((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}}))),tf=Fl(Ip,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Tp})(Wl((e=>{let{theme:t}=e;return u(u(u({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]})}))),nf=t.forwardRef((function(e,n){var r,i,o,a,c;const l=Gl({props:e,name:"MuiOutlinedInput"}),{components:d={},fullWidth:h=!1,inputComponent:p="input",label:f,multiline:m=!1,notched:g,slots:v={},type:y="text"}=l,_=s(l,Zp),E=(e=>{const{classes:t}=e,n=El({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Jp,t);return u(u({},t),n)})(l),b=vp(),w=mp({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S=u(u({},l),{},{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:h,hiddenLabel:w.hiddenLabel,multiline:m,size:w.size,type:y}),A=null!==(r=null!==(i=v.root)&&void 0!==i?i:d.Root)&&void 0!==r?r:$p,C=null!==(o=null!==(a=v.input)&&void 0!==a?a:d.Input)&&void 0!==o?o:tf;return(0,Va.jsx)(Np,u(u({slots:{root:A,input:C},renderSuffix:e=>(0,Va.jsx)(ef,{ownerState:S,className:E.notchedOutline,label:null!=f&&""!==f&&w.required?c||(c=(0,Va.jsxs)(t.Fragment,{children:[f,"\u2009","*"]})):f,notched:"undefined"!==typeof g?g:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:h,inputComponent:p,multiline:m,ref:n,type:y},_),{},{classes:u(u({},E),{},{notchedOutline:null})}))}));nf.muiName="Input";const rf=nf;function of(e){return pl("MuiFormLabel",e)}const sf=fl("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),af=["children","className","color","component","disabled","error","filled","focused","required"],cf=Fl("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled]}})(Wl((e=>{let{theme:t}=e;return u(u({color:(t.vars||t).palette.text.secondary},t.typography.body1),{},{lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Vd()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(sf.focused)]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat(sf.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(sf.error)]:{color:(t.vars||t).palette.error.main}}}]})}))),lf=Fl("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Wl((e=>{let{theme:t}=e;return{["&.".concat(sf.error)]:{color:(t.vars||t).palette.error.main}}}))),df=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiFormLabel"}),{children:r,className:i,color:o,component:a="label",disabled:c,error:l,filled:d,focused:h,required:p}=n,f=s(n,af),m=mp({props:n,muiFormControl:vp(),states:["color","required","focused","disabled","error","filled"]}),g=u(u({},n),{},{color:m.color||"primary",component:a,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required}),v=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e;return El({root:["root","color".concat(Fd(n)),i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]},of,t)})(g);return(0,Va.jsxs)(cf,u(u({as:a,ownerState:g,className:At(v.root,i),ref:t},f),{},{children:[r,m.required&&(0,Va.jsxs)(lf,{ownerState:g,"aria-hidden":!0,className:v.asterisk,children:["\u2009","*"]})]}))})),uf=df;function hf(e){return pl("MuiInputLabel",e)}fl("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const pf=["disableAnimation","margin","shrink","variant","className"],ff=Fl(uf,{shouldForwardProp:e=>Tl(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(sf.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(Wl((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:r}=e;return"filled"===t&&n.shrink&&"small"===r},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),mf=t.forwardRef((function(e,t){const n=Gl({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:i,shrink:o,variant:a,className:c}=n,l=s(n,pf),d=vp();let h=o;"undefined"===typeof h&&d&&(h=d.filled||d.focused||d.adornedStart);const p=mp({props:n,muiFormControl:d,states:["size","variant","required","focused"]}),f=u(u({},n),{},{disableAnimation:r,formControl:d,shrink:h,size:p.size,variant:p.variant,required:p.required,focused:p.focused}),m=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,c=El({root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&"size".concat(Fd(r)),s],asterisk:[a&&"asterisk"]},hf,t);return u(u({},t),c)})(f);return(0,Va.jsx)(ff,u(u({"data-shrink":h,ref:t,className:At(m.root,c)},l),{},{ownerState:f,classes:m}))}));const gf=function(e,n){var r,i,o,s;return t.isValidElement(e)&&-1!==n.indexOf(null!==(r=e.type.muiName)&&void 0!==r?r:null===(i=e.type)||void 0===i||null===(o=i._payload)||void 0===o||null===(s=o.value)||void 0===s?void 0:s.muiName)};function vf(e){return pl("MuiFormControl",e)}fl("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const yf=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],_f=Fl("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["margin".concat(Fd(n.margin))],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Ef=t.forwardRef((function(e,n){const r=Gl({props:e,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:c="div",disabled:l=!1,error:d=!1,focused:h,fullWidth:p=!1,hiddenLabel:f=!1,margin:m="none",required:g=!1,size:v="medium",variant:y="outlined"}=r,_=s(r,yf),E=u(u({},r),{},{color:a,component:c,disabled:l,error:d,fullWidth:p,hiddenLabel:f,margin:m,required:g,size:v,variant:y}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return El({root:["root","none"!==n&&"margin".concat(Fd(n)),r&&"fullWidth"]},vf,t)})(E),[w,S]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{if(!gf(t,["Input","Select"]))return;const n=gf(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[A,C]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{gf(t,["Input","Select"])&&(Ep(t.props,!0)||Ep(t.props.inputProps,!0))&&(e=!0)})),e})),[T,R]=t.useState(!1);l&&T&&R(!1);const I=void 0===h||l?T:h;let x;t.useRef(!1);const O=t.useCallback((()=>{C(!0)}),[]),N=t.useCallback((()=>{C(!1)}),[]),D=t.useMemo((()=>({adornedStart:w,setAdornedStart:S,color:a,disabled:l,error:d,filled:A,focused:I,fullWidth:p,hiddenLabel:f,size:v,onBlur:()=>{R(!1)},onFocus:()=>{R(!0)},onEmpty:N,onFilled:O,registerEffect:x,required:g,variant:y})),[w,a,l,d,A,I,p,f,x,N,O,g,v,y]);return(0,Va.jsx)(gp.Provider,{value:D,children:(0,Va.jsx)(_f,u(u({as:c,ownerState:E,className:At(b.root,o),ref:n},_),{},{children:i}))})})),bf=Ef;function wf(e){return pl("MuiFormHelperText",e)}const Sf=fl("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Af=["children","className","component","disabled","error","filled","focused","margin","required","variant"];var Cf;const Tf=Fl("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat(Fd(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})(Wl((e=>{let{theme:t}=e;return u(u({color:(t.vars||t).palette.text.secondary},t.typography.caption),{},{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(Sf.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(Sf.error)]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]})}))),Rf=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p",disabled:a,error:c,filled:l,focused:d,margin:h,required:p,variant:f}=n,m=s(n,Af),g=mp({props:n,muiFormControl:vp(),states:["variant","size","disabled","error","filled","focused","required"]}),v=u(u({},n),{},{component:o,contained:"filled"===g.variant||"outlined"===g.variant,variant:g.variant,size:g.size,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required});delete v.ownerState;const y=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:c}=e;return El({root:["root",i&&"disabled",o&&"error",r&&"size".concat(Fd(r)),n&&"contained",a&&"focused",s&&"filled",c&&"required"]},wf,t)})(v);return(0,Va.jsx)(Tf,u(u({as:o,className:At(y.root,i),ref:t},m),{},{ownerState:v,children:" "===r?Cf||(Cf=(0,Va.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):r}))})),If=ah,xf=t.createContext();const Of=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const Nf=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,a=s(e,Of),c=o?{}:gh(r,i),{props:l,internalRef:d}=_h(u(u({},a),{},{externalSlotProps:c})),h=ql(d,null===c||void 0===c?void 0:c.ref,null===(t=e.additionalProps)||void 0===t?void 0:t.ref);return mh(n,u(u({},l),{},{ref:h}),i)};const Df=t.createContext({});function kf(e){return pl("MuiList",e)}fl("MuiList",["root","padding","dense","subheader"]);const Pf=["children","className","component","dense","disablePadding","subheader"],Lf=Fl("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),Mf=t.forwardRef((function(e,n){const r=Gl({props:e,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:c=!1,disablePadding:l=!1,subheader:d}=r,h=s(r,Pf),p=t.useMemo((()=>({dense:c})),[c]),f=u(u({},r),{},{component:a,dense:c,disablePadding:l}),m=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return El({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},kf,t)})(f);return(0,Va.jsx)(Df.Provider,{value:p,children:(0,Va.jsxs)(Lf,u(u({as:a,className:At(m.root,o),ref:n,ownerState:f},h),{},{children:[d,i]}))})})),jf=Kh,Uf=Yh,Bf=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Ff(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Vf(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Wf(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function Hf(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&Wf(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const zf=t.forwardRef((function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:c,disabledItemsFocusable:l=!1,disableListWrap:d=!1,onKeyDown:h,variant:p="selectedMenu"}=e,f=s(e,Bf),m=t.useRef(null),g=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});yp((()=>{i&&m.current.focus()}),[i]),t.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!m.current.style.width;if(e.clientHeight<m.current.clientHeight&&r){const t="".concat(jf(Uf(e)),"px");m.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,m.current.style.width="calc(100% + ".concat(t,")")}return m.current}})),[]);const v=Xl(m,n);let y=-1;t.Children.forEach(a,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===p&&e.props.selected||-1===y)&&(y=n),y===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(y+=1,y>=a.length&&(y=-1))):y===n&&(y+=1,y>=a.length&&(y=-1))}));const _=t.Children.map(a,((e,n)=>{if(n===y){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===p&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,Va.jsx)(Mf,u(u({role:"menu",ref:v,className:c,onKeyDown:e=>{const t=m.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(h&&h(e));const r=If(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Hf(t,r,d,l,Ff);else if("ArrowUp"===n)e.preventDefault(),Hf(t,r,d,l,Vf);else if("Home"===n)e.preventDefault(),Hf(t,null,d,l,Ff);else if("End"===n)e.preventDefault(),Hf(t,null,d,l,Vf);else if(1===n.length){const i=g.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const a=r&&!i.repeating&&Wf(r,i);i.previousKeyMatched&&(a||Hf(t,r,!1,l,Ff,i))?e.preventDefault():i.previousKeyMatched=!1}h&&h(e)},tabIndex:i?0:-1},f),{},{children:_}))})),Gf=zf,Yf=cp,Kf=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],qf=["ownerState"];function Xf(e){return"scale(".concat(e,", ").concat(e**2,")")}const Jf={entering:{opacity:1,transform:Xf(1)},entered:{opacity:1,transform:"none"}},Qf="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Zf=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:c,onEnter:l,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:v="auto",TransitionComponent:y=Dh}=e,_=s(e,Kf),E=md(),b=t.useRef(),w=vu(),S=t.useRef(null),A=Xl(S,sh(o),n),C=e=>t=>{if(e){const n=S.current;void 0===t?e(n):e(n,t)}},T=C(h),R=C(((e,t)=>{kh(e);const{duration:n,delay:r,easing:i}=Ph({style:g,timeout:v,easing:a},{mode:"enter"});let o;"auto"===v?(o=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=o):o=n,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:Qf?o:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),I=C(d),x=C(m),O=C((e=>{const{duration:t,delay:n,easing:r}=Ph({style:g,timeout:v,easing:a},{mode:"exit"});let i;"auto"===v?(i=w.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:Qf?i:.666*i,delay:Qf?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=Xf(.75),p&&p(e)})),N=C(f);return(0,Va.jsx)(y,u(u({appear:i,in:c,nodeRef:S,onEnter:R,onEntered:I,onEntering:T,onExit:O,onExited:N,onExiting:x,addEndListener:e=>{"auto"===v&&E.start(b.current||0,e),r&&r(S.current,e)},timeout:"auto"===v?null:v},_),{},{children:(e,n)=>{let{ownerState:r}=n,i=s(n,qf);return t.cloneElement(o,u({style:u(u(u({opacity:0,transform:Xf(.75),visibility:"exited"!==e||c?void 0:"hidden"},Jf[e]),g),o.props.style),ref:A},i))}}))}));Zf&&(Zf.muiSupportAuto=!0);const $f=Zf;function em(e){return pl("MuiPopover",e)}fl("MuiPopover",["root","paper"]);const tm=["onEntering"],nm=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],rm=["slotProps"];function im(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function om(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function sm(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function am(e){return"function"===typeof e?e():e}const cm=Fl(ap,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lm=Fl(Du,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),dm=t.forwardRef((function(e,n){var r;const i=Gl({props:e,name:"MuiPopover"}),{action:o,anchorEl:a,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:d="anchorEl",children:h,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:_={},slotProps:E={},transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:w=$f,transitionDuration:S="auto",TransitionProps:{onEntering:A}={},disableScrollLock:C=!1}=i,T=s(i.TransitionProps,tm),R=s(i,nm),I=null!==(r=null===E||void 0===E?void 0:E.paper)&&void 0!==r?r:y,x=t.useRef(),O=u(u({},i),{},{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:g,externalPaperSlotProps:I,transformOrigin:b,TransitionComponent:w,transitionDuration:S,TransitionProps:T}),N=(e=>{const{classes:t}=e;return El({root:["root"],paper:["paper"]},em,t)})(O),D=t.useCallback((()=>{if("anchorPosition"===d)return l;const e=am(a),t=(e&&1===e.nodeType?e:If(x.current).body).getBoundingClientRect();return{top:t.top+im(t,c.vertical),left:t.left+om(t,c.horizontal)}}),[a,c.horizontal,c.vertical,l,d]),k=t.useCallback((e=>({vertical:im(e,b.vertical),horizontal:om(e,b.horizontal)})),[b.horizontal,b.vertical]),P=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=k(t);if("none"===d)return{top:null,left:null,transformOrigin:sm(n)};const r=D();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+t.height,c=o+t.width,l=Uf(am(a)),u=l.innerHeight-g,h=l.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&s>u){const e=s-u;i-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(c>h){const e=c-h;o-=e,n.horizontal+=e}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:sm(n)}}),[a,d,D,k,g]),[L,M]=t.useState(v),j=t.useCallback((()=>{const e=x.current;if(!e)return;const t=P(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,M(!0)}),[P]);t.useEffect((()=>(C&&window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j))),[a,C,j]);t.useEffect((()=>{v&&j()})),t.useImperativeHandle(o,(()=>v?{updatePosition:()=>{j()}}:null),[v,j]),t.useEffect((()=>{if(!v)return;const e=Yf((()=>{j()})),t=Uf(a);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[a,v,j]);let U=S;"auto"!==S||w.muiSupportAuto||(U=void 0);const B=f||(a?If(am(a)).body:void 0),F={slots:_,slotProps:u(u({},E),{},{paper:I})},[V,W]=Sh("paper",{elementType:lm,externalForwardedProps:F,additionalProps:{elevation:m,className:At(N.paper,null===I||void 0===I?void 0:I.className),style:L?I.style:u(u({},I.style),{},{opacity:0})},ownerState:O}),[H,z]=Sh("root",{elementType:cm,externalForwardedProps:F,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:B,open:v},ownerState:O,className:At(N.root,p)}),{slotProps:G}=z,Y=s(z,rm),K=Xl(x,W.ref);return(0,Va.jsx)(H,u(u(u(u({},Y),!fp(H)&&{slotProps:G,disableScrollLock:C}),R),{},{ref:n,children:(0,Va.jsx)(w,u(u({appear:!0,in:v,onEntering:(e,t)=>{A&&A(e,t),j()},onExited:()=>{M(!1)},timeout:U},T),{},{children:(0,Va.jsx)(V,u(u({},W),{},{ref:K,children:h}))}))}))})),um=dm;function hm(e){return pl("MuiMenu",e)}fl("MuiMenu",["root","paper","list"]);const pm=["onEntering"],fm=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],mm={vertical:"top",horizontal:"right"},gm={vertical:"top",horizontal:"left"},vm=Fl(um,{shouldForwardProp:e=>Tl(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ym=Fl(lm,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),_m=Fl(Gf,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Em=t.forwardRef((function(e,n){var r,i;const o=Gl({props:e,name:"MuiMenu"}),{autoFocus:a=!0,children:c,className:l,disableAutoFocusItem:d=!1,MenuListProps:h={},onClose:p,open:f,PaperProps:m={},PopoverClasses:g,transitionDuration:v="auto",TransitionProps:{onEntering:y}={},variant:_="selectedMenu",slots:E={},slotProps:b={}}=o,w=s(o.TransitionProps,pm),S=s(o,fm),A=(()=>{const e=t.useContext(xf);return null!==e&&void 0!==e&&e})(),C=u(u({},o),{},{autoFocus:a,disableAutoFocusItem:d,MenuListProps:h,onEntering:y,PaperProps:m,transitionDuration:v,TransitionProps:w,variant:_}),T=(e=>{const{classes:t}=e;return El({root:["root"],paper:["paper"],list:["list"]},hm,t)})(C),R=a&&!d&&f,I=t.useRef(null);let x=-1;t.Children.map(c,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===_&&e.props.selected||-1===x)&&(x=n))}));const O=null!==(r=E.paper)&&void 0!==r?r:ym,N=null!==(i=b.paper)&&void 0!==i?i:m,D=Nf({elementType:E.root,externalSlotProps:b.root,ownerState:C,className:[T.root,l]}),k=Nf({elementType:O,externalSlotProps:N,ownerState:C,className:T.paper});return(0,Va.jsx)(vm,u(u({onClose:p,anchorOrigin:{vertical:"bottom",horizontal:A?"right":"left"},transformOrigin:A?mm:gm,slots:{paper:O,root:E.root},slotProps:{root:D,paper:k},open:f,ref:n,transitionDuration:v,TransitionProps:u({onEntering:(e,t)=>{I.current&&I.current.adjustStyleForScrollbar(e,{direction:A?"rtl":"ltr"}),y&&y(e,t)}},w),ownerState:C},S),{},{classes:g,children:(0,Va.jsx)(_m,u(u({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),p&&p(e,"tabKeyDown"))},actions:I,autoFocus:a&&(-1===x||d),autoFocusItem:R,variant:_},h),{},{className:At(T.list,h.className),children:c}))}))})),bm=Em;function wm(e){return pl("MuiNativeSelect",e)}const Sm=fl("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Am=["className","disabled","error","IconComponent","inputRef","variant"],Cm=Fl("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},["&.".concat(Sm.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),Tm=Fl(Cm,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Tl,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(Sm.multiple)]:t.multiple}]}})({}),Rm=Fl("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,["&.".concat(Sm.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),Im=Fl(Rm,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(Fd(n.variant))],n.open&&t.iconOpen]}})({}),xm=t.forwardRef((function(e,n){const{className:r,disabled:i,error:o,IconComponent:a,inputRef:c,variant:l="standard"}=e,d=s(e,Am),h=u(u({},e),{},{disabled:i,variant:l,error:o}),p=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e;return El({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat(Fd(n)),o&&"iconOpen",r&&"disabled"]},wm,t)})(h);return(0,Va.jsxs)(t.Fragment,{children:[(0,Va.jsx)(Tm,u({ownerState:h,className:At(p.select,r),disabled:i,ref:c||n},d)),e.multiple?null:(0,Va.jsx)(Im,{as:a,ownerState:h,className:p.icon})]})}));const Om=function(e){let{controlled:n,default:r,name:i,state:o="value"}=e;const{current:s}=t.useRef(void 0!==n),[a,c]=t.useState(r);return[s?n:a,t.useCallback((e=>{s||c(e)}),[])]};function Nm(e){return pl("MuiSelect",e)}const Dm=fl("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),km=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value","variant"];var Pm;const Lm=Fl(Cm,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(Dm.select)]:t.select},{["&.".concat(Dm.select)]:t[n.variant]},{["&.".concat(Dm.error)]:t.error},{["&.".concat(Dm.multiple)]:t.multiple}]}})({["&.".concat(Dm.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Mm=Fl(Rm,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(Fd(n.variant))],n.open&&t.iconOpen]}})({}),jm=Fl("input",{shouldForwardProp:e=>Cl(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Um(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Bm(e){return null==e||"string"===typeof e&&!e.trim()}const Fm=t.forwardRef((function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:a,autoWidth:c,children:l,className:d,defaultOpen:h,defaultValue:p,disabled:f,displayEmpty:m,error:g=!1,IconComponent:v,inputRef:y,labelId:_,MenuProps:E={},multiple:b,name:w,onBlur:S,onChange:A,onClose:C,onFocus:T,onOpen:R,open:I,readOnly:x,renderValue:O,required:N,SelectDisplayProps:D={},tabIndex:k,type:P,value:L,variant:M="standard"}=e,j=s(e,km),[U,B]=Om({controlled:L,default:p,name:"Select"}),[F,V]=Om({controlled:I,default:h,name:"Select"}),W=t.useRef(null),H=t.useRef(null),[z,G]=t.useState(null),{current:Y}=t.useRef(null!=I),[K,q]=t.useState(),X=Xl(n,y),J=t.useCallback((e=>{H.current=e,e&&G(e)}),[]),Q=null===z||void 0===z?void 0:z.parentNode;t.useImperativeHandle(X,(()=>({focus:()=>{H.current.focus()},node:W.current,value:U})),[U]),t.useEffect((()=>{h&&F&&z&&!Y&&(q(c?null:Q.clientWidth),H.current.focus())}),[z,c]),t.useEffect((()=>{a&&H.current.focus()}),[a]),t.useEffect((()=>{if(!_)return;const e=If(H.current).getElementById(_);if(e){const t=()=>{getSelection().isCollapsed&&H.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[_]);const Z=(e,t)=>{e?R&&R(t):C&&C(t),Y||(q(c?null:Q.clientWidth),V(e))},$=t.Children.toArray(l),ee=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(U)?U.slice():[];const t=U.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),U!==n&&(B(n),A)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:w}}),A(i,e)}b||Z(!1,t)}},te=null!==z&&F;let ne,re;delete j["aria-invalid"];const ie=[];let oe=!1,se=!1;(Ep({value:U})||m)&&(O?ne=O(U):oe=!0);const ae=$.map((e=>{if(!t.isValidElement(e))return null;let n;if(b){if(!Array.isArray(U))throw new Error(Es(2));n=U.some((t=>Um(t,e.props.value))),n&&oe&&ie.push(e.props.children)}else n=Um(U,e.props.value),n&&oe&&(re=e.props.children);return n&&(se=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:ee(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));oe&&(ne=b?0===ie.length?null:ie.reduce(((e,t,n)=>(e.push(t),n<ie.length-1&&e.push(", "),e)),[]):re);let ce,le=K;!c&&Y&&z&&(le=Q.clientWidth),ce="undefined"!==typeof k?k:f?null:0;const de=D.id||(w?"mui-component-select-".concat(w):void 0),ue=u(u({},e),{},{variant:M,value:U,open:te,error:g}),he=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e;return El({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat(Fd(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},Nm,t)})(ue),pe=u(u({},E.PaperProps),null===(r=E.slotProps)||void 0===r?void 0:r.paper),fe=Sl();return(0,Va.jsxs)(t.Fragment,{children:[(0,Va.jsx)(Lm,u(u({as:"div",ref:J,tabIndex:ce,role:"combobox","aria-controls":te?fe:void 0,"aria-disabled":f?"true":void 0,"aria-expanded":te?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[_,de].filter(Boolean).join(" ")||void 0,"aria-describedby":i,"aria-required":N?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:e=>{if(!x){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),Z(!0,e))}},onMouseDown:f||x?null:e=>{0===e.button&&(e.preventDefault(),H.current.focus(),Z(!0,e))},onBlur:e=>{!te&&S&&(Object.defineProperty(e,"target",{writable:!0,value:{value:U,name:w}}),S(e))},onFocus:T},D),{},{ownerState:ue,className:At(D.className,he.select,d),id:de,children:Bm(ne)?Pm||(Pm=(0,Va.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):ne})),(0,Va.jsx)(jm,u(u({"aria-invalid":g,value:Array.isArray(U)?U.join(","):U,name:w,ref:W,"aria-hidden":!0,onChange:e=>{const t=$.find((t=>t.props.value===e.target.value));void 0!==t&&(B(t.props.value),A&&A(e,t))},tabIndex:-1,disabled:f,className:he.nativeInput,autoFocus:a,required:N},j),{},{ownerState:ue})),(0,Va.jsx)(Mm,{as:v,className:he.icon,ownerState:ue}),(0,Va.jsx)(bm,u(u({id:"menu-".concat(w||""),anchorEl:Q,open:te,onClose:e=>{Z(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},E),{},{MenuListProps:u({"aria-labelledby":_,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:fe},E.MenuListProps),slotProps:u(u({},E.slotProps),{},{paper:u(u({},pe),{},{style:u({minWidth:le},null!=pe?pe.style:null)})}),children:ae}))]})})),Vm=Fm;function Wm(e){return pl("MuiSvgIcon",e)}fl("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Hm=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],zm=Fl("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(Fd(n.color))],t["fontSize".concat(Fd(n.fontSize))]]}})(Wl((e=>{var t,n,r,i,o,s,a,c,l,d,u,h,p,f,m,g,v,y;let{theme:_}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null===(t=_.transitions)||void 0===t||null===(n=t.create)||void 0===n?void 0:n.call(t,"fill",{duration:null===(r=(null!==(o=_.vars)&&void 0!==o?o:_).transitions)||void 0===r||null===(i=r.duration)||void 0===i?void 0:i.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null===(s=_.typography)||void 0===s||null===(a=s.pxToRem)||void 0===a?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null===(c=_.typography)||void 0===c||null===(l=c.pxToRem)||void 0===l?void 0:l.call(c,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null===(d=_.typography)||void 0===d||null===(u=d.pxToRem)||void 0===u?void 0:u.call(d,35))||"2.1875rem"}},...Object.entries((null!==(h=_.vars)&&void 0!==h?h:_).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{var t,n,r;let[i]=e;return{props:{color:i},style:{color:null===(t=(null!==(r=_.vars)&&void 0!==r?r:_).palette)||void 0===t||null===(n=t[i])||void 0===n?void 0:n.main}}})),{props:{color:"action"},style:{color:null===(p=(null!==(m=_.vars)&&void 0!==m?m:_).palette)||void 0===p||null===(f=p.action)||void 0===f?void 0:f.active}},{props:{color:"disabled"},style:{color:null===(g=(null!==(y=_.vars)&&void 0!==y?y:_).palette)||void 0===g||null===(v=g.action)||void 0===v?void 0:v.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),Gm=t.forwardRef((function(e,n){const r=Gl({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:c="svg",fontSize:l="medium",htmlColor:d,inheritViewBox:h=!1,titleAccess:p,viewBox:f="0 0 24 24"}=r,m=s(r,Hm),g=t.isValidElement(i)&&"svg"===i.type,v=u(u({},r),{},{color:a,component:c,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:f,hasSvgAsChild:g}),y={};h||(y.viewBox=f);const _=(e=>{const{color:t,fontSize:n,classes:r}=e;return El({root:["root","inherit"!==t&&"color".concat(Fd(t)),"fontSize".concat(Fd(n))]},Wm,r)})(v);return(0,Va.jsxs)(zm,u(u(u(u({as:c,className:At(_.root,o),focusable:"false",color:d,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:n},y),m),g&&i.props),{},{ownerState:v,children:[g?i.props.children:i,p?(0,Va.jsx)("title",{children:p}):null]}))}));Gm.muiName="SvgIcon";const Ym=Gm;function Km(e,n){function r(t,r){return(0,Va.jsx)(Ym,u(u({"data-testid":"".concat(n,"Icon"),ref:r},t),{},{children:e}))}return r.muiName=Ym.muiName,t.memo(t.forwardRef(r))}const qm=Km((0,Va.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Xm=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Jm=["root"],Qm={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Tl(e)&&"variant"!==e,slot:"Root"},Zm=Fl(Up,Qm)(""),$m=Fl(rf,Qm)(""),eg=Fl(Gp,Qm)(""),tg=t.forwardRef((function(e,n){const r=Gl({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:a={},className:c,defaultOpen:l=!1,displayEmpty:d=!1,IconComponent:h=qm,id:p,input:f,inputProps:m,label:g,labelId:v,MenuProps:y,multiple:_=!1,native:E=!1,onClose:b,onOpen:w,open:S,renderValue:A,SelectDisplayProps:C,variant:T="outlined"}=r,R=s(r,Xm),I=E?xm:Vm,x=mp({props:r,muiFormControl:vp(),states:["variant","error"]}),O=x.variant||T,N=u(u({},r),{},{variant:O,classes:a}),D=(e=>{const{classes:t}=e,n=El({root:["root"]},Nm,t);return u(u({},t),n)})(N),{root:k}=D,P=s(D,Jm),L=f||{standard:(0,Va.jsx)(Zm,{ownerState:N}),outlined:(0,Va.jsx)($m,{label:g,ownerState:N}),filled:(0,Va.jsx)(eg,{ownerState:N})}[O],M=Xl(n,sh(L));return(0,Va.jsx)(t.Fragment,{children:t.cloneElement(L,u(u(u({inputComponent:I,inputProps:u(u(u({children:o,error:x.error,IconComponent:h,variant:O,type:void 0,multiple:_},E?{id:p}:{autoWidth:i,defaultOpen:l,displayEmpty:d,labelId:v,MenuProps:y,onClose:b,onOpen:w,open:S,renderValue:A,SelectDisplayProps:u({id:p},C)}),m),{},{classes:m?Cs(P,m.classes):P},f?f.props.inputProps:{})},(_&&E||d)&&"outlined"===O?{notched:!0}:{}),{},{ref:M,className:At(L.props.className,c,D.root)},!f&&{variant:O}),R))})}));tg.muiName="Select";const ng=tg;function rg(e){return pl("MuiTextField",e)}fl("MuiTextField",["root"]);const ig=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","slots","slotProps","type","value","variant"],og={standard:Up,filled:Gp,outlined:rf},sg=Fl(bf,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ag=t.forwardRef((function(e,t){const n=Gl({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:a,color:c="primary",defaultValue:l,disabled:d=!1,error:h=!1,FormHelperTextProps:p,fullWidth:f=!1,helperText:m,id:g,InputLabelProps:v,inputProps:y,InputProps:_,inputRef:E,label:b,maxRows:w,minRows:S,multiline:A=!1,name:C,onBlur:T,onChange:R,onFocus:I,placeholder:x,required:O=!1,rows:N,select:D=!1,SelectProps:k,slots:P={},slotProps:L={},type:M,value:j,variant:U="outlined"}=n,B=s(n,ig),F=u(u({},n),{},{autoFocus:i,color:c,disabled:d,error:h,fullWidth:f,multiline:A,required:O,select:D,variant:U}),V=(e=>{const{classes:t}=e;return El({root:["root"]},rg,t)})(F);const W=Sl(g),H=m&&W?"".concat(W,"-helper-text"):void 0,z=b&&W?"".concat(W,"-label"):void 0,G=og[U],Y={slots:P,slotProps:u({input:_,inputLabel:v,htmlInput:y,formHelperText:p,select:k},L)},K={},q=Y.slotProps.inputLabel;"outlined"===U&&(q&&"undefined"!==typeof q.shrink&&(K.notched=q.shrink),K.label=b),D&&(k&&k.native||(K.id=void 0),K["aria-describedby"]=void 0);const[X,J]=Sh("input",{elementType:G,externalForwardedProps:Y,additionalProps:K,ownerState:F}),[Q,Z]=Sh("inputLabel",{elementType:mf,externalForwardedProps:Y,ownerState:F}),[$,ee]=Sh("htmlInput",{elementType:"input",externalForwardedProps:Y,ownerState:F}),[te,ne]=Sh("formHelperText",{elementType:Rf,externalForwardedProps:Y,ownerState:F}),[re,ie]=Sh("select",{elementType:ng,externalForwardedProps:Y,ownerState:F}),oe=(0,Va.jsx)(X,u({"aria-describedby":H,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:f,multiline:A,name:C,rows:N,maxRows:w,minRows:S,type:M,value:j,id:W,inputRef:E,onBlur:T,onChange:R,onFocus:I,placeholder:x,inputProps:ee,slots:{input:P.htmlInput?$:void 0}},J));return(0,Va.jsxs)(sg,u(u({className:At(V.root,a),disabled:d,error:h,fullWidth:f,ref:t,required:O,color:c,variant:U,ownerState:F},B),{},{children:[null!=b&&""!==b&&(0,Va.jsx)(Q,u(u({htmlFor:W,id:z},Z),{},{children:b})),D?(0,Va.jsx)(re,u(u({"aria-describedby":H,id:W,labelId:z,value:j,input:oe},ie),{},{children:o})):oe,m&&(0,Va.jsx)(te,u(u({id:H},ne),{},{children:m}))]}))})),cg=ag,lg=Km((0,Va.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),dg=Km((0,Va.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),ug=()=>{const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(!1);return(0,Va.jsxs)("div",{children:[(0,Va.jsx)("div",{style:gg.toggleButtonContainer,children:(0,Va.jsxs)("button",{onClick:()=>n(!e),style:gg.toggleButton,onMouseEnter:e=>e.target.style.backgroundColor=gg.toggleButtonHover.backgroundColor,onMouseLeave:e=>e.target.style.backgroundColor="#4CAF50",children:[e?"Collapse AdminAboutUsfirst":"Expand AdminAboutUsfirst",(0,Va.jsx)("span",{style:u(u({},gg.toggleButtonIcon),{},{transform:e?"rotate(90deg)":"rotate(0)"}),children:" \u2192"})]})}),e&&(0,Va.jsx)("div",{style:gg.cardContainer,children:(0,Va.jsx)(hg,{})}),(0,Va.jsx)("div",{style:gg.toggleButtonContainer,children:(0,Va.jsxs)("button",{onClick:()=>i(!r),style:gg.toggleButton,onMouseEnter:e=>e.target.style.backgroundColor=gg.toggleButtonHover.backgroundColor,onMouseLeave:e=>e.target.style.backgroundColor="#4CAF50",children:[r?"Collapse AdminAboutUsCard":"Expand AdminAboutUsCard",(0,Va.jsx)("span",{style:u(u({},gg.toggleButtonIcon),{},{transform:r?"rotate(90deg)":"rotate(0)"}),children:" \u2192"})]})}),r&&(0,Va.jsx)("div",{style:gg.cardContainer,children:(0,Va.jsx)(pg,{})})]})},hg=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(null),[l,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1);(0,t.useEffect)((()=>{xi.get("https://be-pjhk4.onrender.com/api/aboutus").then((e=>{if(e.data&&e.data.length>0){const t=e.data[0];n(t),i(t.title),s(t.description),c(t.aboutImage1),d(t.aboutImage2),h(!0)}else h(!1),n({})})).catch((e=>{console.error("Error fetching About Us data",e),h(!1),n({})}))}),[]);const m=(e,t)=>{const n=e.target.files[0];n&&(t(n),f(!0))};return(0,Va.jsx)("div",{style:fg.pageContainer,children:null!==e?(0,Va.jsxs)("div",{style:fg.container,children:[(0,Va.jsxs)("div",{style:fg.accordionItem,children:[(0,Va.jsx)("h2",{style:fg.cardTitle,children:"Title"}),(0,Va.jsx)("input",{type:"text",value:r,onChange:e=>{i(e.target.value),f(!0)},style:fg.inputField})]}),(0,Va.jsxs)("div",{style:fg.accordionItem,children:[(0,Va.jsx)("h2",{style:fg.cardTitle,children:"Description"}),(0,Va.jsx)("textarea",{value:o,onChange:e=>{s(e.target.value),f(!0)},style:fg.textareaField})]}),(0,Va.jsxs)("div",{style:fg.accordionItem,children:[(0,Va.jsx)("h2",{style:fg.cardTitle,children:"Image 1"}),(0,Va.jsx)("input",{type:"file",onChange:e=>m(e,c),style:fg.fileInput}),a&&"string"===typeof a?(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/aboutus/AboutUsImages/".concat(a),alt:"Image 1 preview",style:fg.imagePreview}):a&&a instanceof File?(0,Va.jsx)("img",{src:URL.createObjectURL(a),alt:"Image 1 preview",style:fg.imagePreview}):null]}),(0,Va.jsxs)("div",{style:fg.accordionItem,children:[(0,Va.jsx)("h2",{style:fg.cardTitle,children:"Image 2"}),(0,Va.jsx)("input",{type:"file",onChange:e=>m(e,d),style:fg.fileInput}),l&&"string"===typeof l?(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/aboutus/AboutUsImages/".concat(l),alt:"Image 2 preview",style:fg.imagePreview}):l&&l instanceof File?(0,Va.jsx)("img",{src:URL.createObjectURL(l),alt:"Image 2 preview",style:fg.imagePreview}):null]}),(0,Va.jsx)("div",{style:fg.saveButtonContainer,children:(0,Va.jsx)("button",{onClick:()=>{const t=new FormData;t.append("title",r),t.append("description",o),(a&&a instanceof File||a&&"string"===typeof a)&&t.append("file1",a),(l&&l instanceof File||l&&"string"===typeof l)&&t.append("file2",l);const n=u?"https://be-pjhk4.onrender.com/api/aboutus/".concat(e.id):"https://be-pjhk4.onrender.com/api/aboutus";xi({method:u?"put":"post",url:n,data:t}).then((()=>{alert(u?"Changes saved successfully!":"New item added successfully!"),f(!1)})).catch((e=>{console.error("Error saving About Us data",e),alert("Failed to save changes.")}))},style:fg.saveButton,children:u?"Save Changes":"Add New"})})]}):(0,Va.jsx)("div",{children:"Loading..."})})},pg=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(null),[a,c]=(0,t.useState)(null),[l,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)([]),[_,E]=(0,t.useState)(null),[b,w]=(0,t.useState)(null),[S,A]=(0,t.useState)(!1);(0,t.useEffect)((()=>{xi.get("https://be-pjhk4.onrender.com/api/aboutuscard").then((e=>{y(e.data)})).catch((e=>{console.error("Error fetching About Us Card data",e)}))}),[]);const C=()=>{if(u){window.confirm("You have unsaved changes. Are you sure you want to discard them?")&&(R(),f(!1),A(!1))}else R(),f(!1),A(!1)},T=()=>{xi.get("https://be-pjhk4.onrender.com/api/aboutuscard").then((e=>{y(e.data)})).catch((e=>{console.error("Error fetching About Us Card data",e)}))},R=()=>{n(""),i(""),s(null),c(null),d(null)};return v.length?(0,Va.jsxs)("div",{style:mg.container,children:[(0,Va.jsx)("h2",{children:"About Us Cards"}),(0,Va.jsx)(yl,{mb:2,children:(0,Va.jsx)(gu,{variant:"contained",color:"primary",onClick:()=>{f(!1),R(),A(!0)},children:"Add New Card"})}),(0,Va.jsx)(Iu,{container:!0,spacing:2,children:v.map((e=>(0,Va.jsx)(Iu,{item:!0,xs:12,sm:6,md:4,children:(0,Va.jsxs)(Mu,{style:mg.card,children:[(0,Va.jsx)(Hu,{component:"img",height:"200",image:e.aboutCardImage?"https://be-pjhk4.onrender.com/api/aboutuscard/AboutUsImages/".concat(e.aboutCardImage):"",alt:e.title,style:mg.cardImage}),(0,Va.jsxs)(Ku,{children:[(0,Va.jsx)(oh,{variant:"h6",children:e.title}),(0,Va.jsx)(oh,{variant:"body2",children:e.description})]}),(0,Va.jsxs)(yl,{display:"flex",justifyContent:"space-between",p:1,children:[(0,Va.jsx)(gu,{variant:"contained",color:"primary",startIcon:(0,Va.jsx)(lg,{}),onClick:()=>(e=>{f(!0),n(e.title),i(e.description),c(e.aboutCardImage),d(e.aboutCardImage),w(e.id),A(!0)})(e),style:mg.button,children:"Edit"}),(0,Va.jsx)(gu,{variant:"contained",color:"secondary",startIcon:(0,Va.jsx)(dg,{}),onClick:()=>{E(e),g(!0)},style:mg.button,children:"Delete"})]})]})},e.id)))}),(0,Va.jsx)(ap,{open:S,onClose:C,children:(0,Va.jsxs)(yl,{sx:mg.modalBox,children:[(0,Va.jsx)("h2",{children:p?"Edit About Us Card":"Add About Us Card"}),(0,Va.jsx)(cg,{label:"Title",value:e,onChange:e=>n(e.target.value),fullWidth:!0}),(0,Va.jsx)(pp,{minRows:3,placeholder:"Description",value:r,onChange:e=>i(e.target.value),style:mg.textarea}),a&&(0,Va.jsx)("div",{children:(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/aboutuscard/AboutUsImages/".concat(a),alt:"Current About Us Image",style:{width:"100%",height:"auto",marginBottom:"10px"}})}),(0,Va.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(s(t),h(!0))},style:mg.fileInput}),(0,Va.jsxs)(yl,{mt:2,style:mg.buttonContainer,children:[(0,Va.jsx)(gu,{variant:"contained",onClick:()=>{if(!e||!r)return void alert("Title and Description cannot be empty.");const t=new FormData;t.append("title",e),t.append("description",r),o?t.append("file1",o):l&&t.append("aboutCardImage",l);const n=p?"https://be-pjhk4.onrender.com/api/aboutuscard/".concat(b):"https://be-pjhk4.onrender.com/api/aboutuscard";xi({method:p?"put":"post",url:n,data:t}).then((()=>{h(!1),T(),R(),f(!1),A(!1)})).catch((e=>{console.error("Error saving About Us data",e),alert("Failed to save changes.")}))},style:mg.saveButton,children:"Save"}),(0,Va.jsx)(gu,{variant:"outlined",onClick:C,style:mg.cancelButton,children:"Cancel"})]})]})}),(0,Va.jsx)(ap,{open:m,onClose:()=>g(!1),children:(0,Va.jsxs)(yl,{sx:mg.deleteModalBox,children:[(0,Va.jsx)(oh,{variant:"h6",children:"Are you sure you want to delete this card?"}),(0,Va.jsxs)(yl,{mt:2,style:mg.buttonContainer,children:[(0,Va.jsx)(gu,{variant:"contained",color:"error",onClick:()=>{xi.delete("https://be-pjhk4.onrender.com/api/aboutuscard/".concat(null===_||void 0===_?void 0:_.id)).then((()=>{alert("Card deleted successfully!"),T(),g(!1)})).catch((e=>{console.error("Error deleting About Us Card",e),alert("Failed to delete card.")}))},style:mg.deleteButton,children:"Delete"}),(0,Va.jsx)(gu,{variant:"outlined",onClick:()=>g(!1),style:mg.cancelButton,children:"Cancel"})]})]})})]}):(0,Va.jsx)("div",{children:"Loading..."})},fg={pageContainer:{padding:"32px"},container:{maxWidth:"1000px",margin:"0 auto"},toggleButtonContainer:{display:"flex",justifyContent:"center",marginBottom:"20px"},toggleButton:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"12px 24px",fontSize:"18px",fontWeight:"bold",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease"},section:{marginTop:"20px"},card:{backgroundColor:"#fff",padding:"20px",marginBottom:"24px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},cardTitle:{fontSize:"24px",fontWeight:600,color:"#333",marginBottom:"10px"},inputField:{width:"100%",padding:"12px",fontSize:"16px",borderRadius:"4px",border:"1px solid #ccc"},textareaField:{width:"100%",padding:"12px",fontSize:"16px",borderRadius:"4px",border:"1px solid #ccc",height:"150px"},fileInput:{marginTop:"12px",marginBottom:"12px"},imagePreview:{marginTop:"12px",maxWidth:"200px",maxHeight:"200px",objectFit:"cover"},saveButtonContainer:{display:"flex",justifyContent:"center"},saveButton:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"12px 24px",fontSize:"18px",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease"},cardContainer:{marginTop:"20px"},accordionContainer:{display:"flex",flexDirection:"column",marginTop:"20px"},accordionItem:{backgroundColor:"#f9f9f9",padding:"20px",marginBottom:"15px",borderRadius:"10px",border:"2px solid #4CAF50",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease"},accordionItemHeader:{fontSize:"20px",fontWeight:"600",color:"#333",marginBottom:"10px",cursor:"pointer",transition:"color 0.3s ease"},accordionItemContent:{paddingTop:"10px"},accordionItemHover:{backgroundColor:"#e0f7e0",borderColor:"#388e3c"}},mg={container:{padding:"32px",maxWidth:"1200px",margin:"0 auto"},card:{display:"flex",flexDirection:"column",height:"100%",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"8px",border:"1px solid #ccc"},cardImage:{objectFit:"cover",borderRadius:"8px 8px 0 0",height:"200px"},button:{width:"48%",fontSize:"16px",fontWeight:"bold",padding:"10px 16px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"1px solid #ccc",transition:"all 0.3s ease"},modalBox:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"32px",borderRadius:"8px",boxShadow:24,width:"400px",border:"1px solid #ccc"},textarea:{width:"100%",padding:"12px",fontSize:"16px",borderRadius:"4px",border:"1px solid #ccc",marginBottom:"20px"},fileInput:{marginTop:"12px",marginBottom:"12px",borderRadius:"4px",border:"1px solid #ccc"},buttonContainer:{display:"flex",justifyContent:"space-between"},saveButton:{backgroundColor:"#4CAF50",color:"white",padding:"12px 24px",fontSize:"18px",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease",border:"1px solid #4CAF50"},cancelButton:{backgroundColor:"#f44336",color:"white",border:"none",padding:"12px 24px",fontSize:"18px",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease"},deleteModalBox:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"32px",borderRadius:"8px",boxShadow:24,width:"300px",border:"1px solid #ccc"},deleteButton:{backgroundColor:"#f44336",color:"white",padding:"12px 24px",fontSize:"18px",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease",border:"1px solid #f44336"}},gg={toggleButtonContainer:{display:"flex",justifyContent:"center",marginBottom:"20px"},toggleButton:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"12px 24px",fontSize:"18px",fontWeight:"bold",borderRadius:"25px",cursor:"pointer",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease",display:"flex",alignItems:"center"},toggleButtonIcon:{marginLeft:"10px",fontSize:"20px",transition:"transform 0.3s ease"},toggleButtonHover:{backgroundColor:"#45a049",transform:"scale(1.05)"},cardContainer:{padding:"10px",marginTop:"10px"}},vg=e=>{let{children:t}=e;return(0,Va.jsx)("div",{children:t})},yg=()=>{const{pathname:e}=de();return(0,t.useEffect)((()=>{document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})}),[e]),null},_g=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Va.jsxs)("div",{className:"text-center",children:[(0,Va.jsx)("div",{className:"floating",children:(0,Va.jsx)("svg",{className:"w-24 h-24 mx-auto text-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Va.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L15 12m0 0l-5.25-5m5.25 5H3"})})}),(0,Va.jsx)("h1",{className:"text-5xl font-bold text-gray-800 mt-4",children:"404"}),(0,Va.jsx)("p",{className:"text-lg text-gray-600 mt-2",children:"Page Not Found"}),(0,Va.jsx)("a",{href:"/",className:"mt-4 inline-block px-4 py-2 bg-green text-white rounded hover:bg-green transition duration-300",children:"Go Back Home"})]})})}),Eg=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"shadow-s1 p-8 rounded-lg",children:[(0,Va.jsx)("div",{className:"flex justify-between",children:(0,Va.jsx)(oE,{level:5,className:" font-normal",children:"Winning Product Lists"})}),(0,Va.jsx)("br",{}),(0,Va.jsx)("div",{className:"text-center py-5",children:(0,Va.jsx)("p",{className:"text-gray-500",children:"No products found. Start by creating a new product!"})})]})});var bg={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wg=t.createContext&&t.createContext(bg),Sg=["attr","size","title"];function Ag(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cg.apply(this,arguments)}function Tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tg(Object(n),!0).forEach((function(t){Ig(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ig(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xg(e){return e&&e.map(((e,n)=>t.createElement(e.tag,Rg({key:n},e.attr),xg(e.child))))}function Og(e){return n=>t.createElement(Ng,Cg({attr:Rg({},e.attr)},n),xg(e.child))}function Ng(e){var n=n=>{var r,{attr:i,size:o,title:s}=e,a=Ag(e,Sg),c=o||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Cg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:r,style:Rg(Rg({color:e.color||n.color},n.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&t.createElement("title",null,s),e.children)};return void 0!==wg?t.createElement(wg.Consumer,null,(e=>n(e))):n(bg)}function Dg(e){return Og({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 9c1.211 0 2.381.355 3.297 1.004 1.301.92 2.43 2.124 3.165 2.996-.735.872-1.864 2.077-3.166 2.996-.915.649-2.085 1.004-3.296 1.004s-2.382-.355-3.299-1.004c-1.301-.92-2.43-2.124-3.164-2.996.734-.872 1.863-2.076 3.164-2.995.917-.65 2.088-1.005 3.299-1.005m0-2c-1.691 0-3.242.516-4.453 1.371-2.619 1.852-4.547 4.629-4.547 4.629s1.928 2.777 4.547 4.629c1.211.855 2.762 1.371 4.453 1.371s3.242-.516 4.451-1.371c2.619-1.852 4.549-4.629 4.549-4.629s-1.93-2.777-4.549-4.629c-1.209-.855-2.76-1.371-4.451-1.371zM12 12c-.553 0-1 .447-1 1 0 .551.447 1 1 1 .551 0 1-.449 1-1 0-.553-.449-1-1-1zM12 16c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3zm0-5c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"},child:[]}]})(e)}const kg=xi.create({baseURL:"https://be-pjhk4.onrender.com/api/",timeout:1e4,headers:{"Content-Type":"application/json"}});kg.interceptors.request.use((function(e){const t=localStorage.getItem("token");return e.authRequired&&t&&(e.headers.Authorization="Bearer "+t),e.multipart&&(e.headers["Content-Type"]="multipart/form-data"),e}),(function(e){return Promise.reject(e)})),kg.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));const Pg=kg;function Lg(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function Mg(e){return Og({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(e)}function jg(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z"},child:[]}]})(e)}function Ug(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z"},child:[]}]})(e)}function Bg(e){return Og({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function Fg(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function Vg(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(e)}function Wg(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v340a6 6 0 0 1-6 6zm-42-92v24c0 6.627-5.373 12-12 12H204c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h200c6.627 0 12 5.373 12 12zm0-96v24c0 6.627-5.373 12-12 12H204c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h200c6.627 0 12 5.373 12 12zm0-96v24c0 6.627-5.373 12-12 12H204c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h200c6.627 0 12 5.373 12 12zm-252 12c0 19.882-16.118 36-36 36s-36-16.118-36-36 16.118-36 36-36 36 16.118 36 36zm0 96c0 19.882-16.118 36-36 36s-36-16.118-36-36 16.118-36 36-36 36 16.118 36 36zm0 96c0 19.882-16.118 36-36 36s-36-16.118-36-36 16.118-36 36-36 36 16.118 36 36z"},child:[]}]})(e)}function Hg(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}function zg(e){return Og({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"},child:[]}]})(e)}var Gg=n(1830),Yg=n.n(Gg),Kg=n(7995);var qg=t,Xg=Symbol.for("react-redux-context"),Jg="undefined"!==typeof globalThis?globalThis:{};function Qg(){var e;if(!qg.createContext)return{};const t=null!==(e=Jg[Xg])&&void 0!==e?e:Jg[Xg]=new Map;let n=t.get(qg.createContext);return n||(n=qg.createContext(null),t.set(qg.createContext,n)),n}var Zg=Qg(),$g=()=>{throw new Error("uSES not initialized!")};function ev(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zg;return function(){return qg.useContext(e)}}var tv=ev(),nv=$g,rv=(e,t)=>e===t;function iv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zg;const t=e===Zg?tv:ev(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=rv,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:o,subscription:s,getServerState:a,stabilityCheck:c,identityFunctionCheck:l}=t(),d=(qg.useRef(!0),qg.useCallback({[e.name]:t=>e(t)}[e.name],[e,c,i.stabilityCheck])),u=nv(s.addNestedSub,o.getState,a||o.getState,d,r);return qg.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var ov=iv();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function sv(e){e()}var av={notify(){},get:()=>[]};function cv(e,t){let n,r=av,i=0,o=!1;function s(){l.onStateChange&&l.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sv((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function c(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=av)}const l={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),c())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,a())},tryUnsubscribe:function(){o&&(o=!1,c())},getListeners:()=>r};return l}var lv=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),dv="undefined"!==typeof navigator&&"ReactNative"===navigator.product,uv=lv||dv?qg.useLayoutEffect:qg.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var hv=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",identityFunctionCheck:s="once"}=e;const a=qg.useMemo((()=>{const e=cv(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,identityFunctionCheck:s}}),[t,i,o,s]),c=qg.useMemo((()=>t.getState()),[t]);uv((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,c]);const l=n||Zg;return qg.createElement(l.Provider,{value:a},r)};function pv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zg;const t=e===Zg?tv:ev(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var fv=pv();function mv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zg;const t=e===Zg?fv:pv(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var gv,vv=mv();gv=Kg.useSyncExternalStoreWithSelector,nv=gv,(e=>{e})(t.useSyncExternalStore);var yv=Symbol.for("immer-nothing"),_v=Symbol.for("immer-draftable"),Ev=Symbol.for("immer-state");function bv(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var wv=Object.getPrototypeOf;function Sv(e){return!!e&&!!e[Ev]}function Av(e){var t;return!!e&&(Tv(e)||Array.isArray(e)||!!e[_v]||!(null===(t=e.constructor)||void 0===t||!t[_v])||Nv(e)||Dv(e))}var Cv=Object.prototype.constructor.toString();function Tv(e){if(!e||"object"!==typeof e)return!1;const t=wv(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Cv}function Rv(e,t){0===Iv(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function Iv(e){const t=e[Ev];return t?t.type_:Array.isArray(e)?1:Nv(e)?2:Dv(e)?3:0}function xv(e,t){return 2===Iv(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ov(e,t,n){const r=Iv(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Nv(e){return e instanceof Map}function Dv(e){return e instanceof Set}function kv(e){return e.copy_||e.base_}function Pv(e,t){if(Nv(e))return new Map(e);if(Dv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Tv(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Ev];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(wv(e),t)}{const t=wv(e);if(null!==t&&n)return u({},e);const r=Object.create(t);return Object.assign(r,e)}}function Lv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return jv(e)||Sv(e)||!Av(e)||(Iv(e)>1&&(e.set=e.add=e.clear=e.delete=Mv),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return Lv(n,!0)}))),e}function Mv(){bv(2)}function jv(e){return Object.isFrozen(e)}var Uv,Bv={};function Fv(e){const t=Bv[e];return t||bv(0),t}function Vv(){return Uv}function Wv(e,t){t&&(Fv("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hv(e){zv(e),e.drafts_.forEach(Yv),e.drafts_=null}function zv(e){e===Uv&&(Uv=e.parent_)}function Gv(e){return Uv={drafts_:[],parent_:Uv,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Yv(e){const t=e[Ev];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Kv(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Ev].modified_&&(Hv(t),bv(4)),Av(e)&&(e=qv(t,e),t.parent_||Jv(t,e)),t.patches_&&Fv("Patches").generateReplacementPatches_(n[Ev].base_,e,t.patches_,t.inversePatches_)):e=qv(t,n,[]),Hv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yv?e:void 0}function qv(e,t,n){if(jv(t))return t;const r=t[Ev];if(!r)return Rv(t,((i,o)=>Xv(e,r,t,i,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Jv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),Rv(i,((i,s)=>Xv(e,r,t,i,s,n,o))),Jv(e,t,!1),n&&e.patches_&&Fv("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Xv(e,t,n,r,i,o,s){if(Sv(i)){const s=qv(e,i,o&&t&&3!==t.type_&&!xv(t.assigned_,r)?o.concat(r):void 0);if(Ov(n,r,s),!Sv(s))return;e.canAutoFreeze_=!1}else s&&n.add(i);if(Av(i)&&!jv(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;qv(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||Jv(e,i)}}function Jv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Lv(t,n)}var Qv={get(e,t){if(t===Ev)return e;const n=kv(e);if(!xv(n,t))return function(e,t,n){var r;const i=ey(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Av(r)?r:r===$v(e.base_,t)?(ny(e),e.copy_[t]=ry(r,e)):r},has:(e,t)=>t in kv(e),ownKeys:e=>Reflect.ownKeys(kv(e)),set(e,t,n){const r=ey(kv(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=$v(kv(e),t),i=null===r||void 0===r?void 0:r[Ev];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||xv(e.base_,t)))return!0;ny(e),ty(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==$v(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ny(e),ty(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=kv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){bv(11)},getPrototypeOf:e=>wv(e.base_),setPrototypeOf(){bv(12)}},Zv={};function $v(e,t){const n=e[Ev];return(n?kv(n):e)[t]}function ey(e,t){if(!(t in e))return;let n=wv(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=wv(n)}}function ty(e){e.modified_||(e.modified_=!0,e.parent_&&ty(e.parent_))}function ny(e){e.copy_||(e.copy_=Pv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Rv(Qv,((e,t)=>{Zv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Zv.deleteProperty=function(e,t){return Zv.set.call(this,e,t,void 0)},Zv.set=function(e,t,n){return Qv.set.call(this,e[0],t,n,e[0])};function ry(e,t){const n=Nv(e)?Fv("MapSet").proxyMap_(e,t):Dv(e)?Fv("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Vv(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Qv;n&&(i=[r],o=Zv);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}(e,t);return(t?t.scope_:Vv()).drafts_.push(n),n}function iy(e){return Sv(e)||bv(10),oy(e)}function oy(e){if(!Av(e)||jv(e))return e;const t=e[Ev];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Pv(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Pv(e,!0);return Rv(n,((e,t)=>{Ov(n,e,oy(t))})),t&&(t.finalized_=!1),n}var sy=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!==typeof t&&bv(6),void 0!==n&&"function"!==typeof n&&bv(7),Av(e)){const i=Gv(this),o=ry(e,void 0);let s=!0;try{r=t(o),s=!1}finally{s?Hv(i):zv(i)}return Wv(i,n),Kv(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===yv&&(r=void 0),this.autoFreeze_&&Lv(r,!0),n){const t=[],i=[];Fv("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}bv(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const o=this.produce(e,n,((e,t)=>{r=e,i=t}));return[o,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Av(e)||bv(8),Sv(e)&&(e=iy(e));const t=Gv(this),n=ry(e,void 0);return n[Ev].isManual_=!0,zv(t),n}finishDraft(e,t){const n=e&&e[Ev];n&&n.isManual_||bv(9);const{scope_:r}=n;return Wv(r,t),Kv(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Fv("Patches").applyPatches_;return Sv(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},ay=sy.produce;sy.produceWithPatches.bind(sy),sy.setAutoFreeze.bind(sy),sy.setUseStrictShallowCopy.bind(sy),sy.applyPatches.bind(sy),sy.createDraft.bind(sy),sy.finishDraft.bind(sy);function cy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var ly=e=>Array.isArray(e)?e:[e];function dy(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var uy="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},hy=0,py=1;function fy(){return{s:hy,v:void 0,o:null,p:null}}function my(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=fy();const{resultEqualityCheck:r}=t;let i,o=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=fy(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=fy(),e.set(n,t)):t=r}}const a=t;let c;if(t.s===py)c=t.v;else if(c=e.apply(null,arguments),o++,r){var l,d,u;const e=null!==(l=null===(d=i)||void 0===d||null===(u=d.deref)||void 0===u?void 0:u.call(d))&&void 0!==l?l:i;null!=e&&r(e,c)&&(c=e,0!==o&&o--);i="object"===typeof c&&null!==c||"function"===typeof c?new uy(c):c}return a.s=py,a.v=c,c}return s.clearCache=()=>{n=fy(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function gy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,o=0,s=0,a={},c=t.pop();"object"===typeof c&&(a=c,c=t.pop()),cy(c,"createSelector expects an output function after the inputs, but received: [".concat(typeof c,"]"));const l=u(u({},i),a),{memoize:d,memoizeOptions:h=[],argsMemoize:p=my,argsMemoizeOptions:f=[],devModeChecks:m={}}=l,g=ly(h),v=ly(f),y=dy(t),_=d((function(){return o++,c.apply(null,arguments)}),...g);const E=p((function(){s++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=_.apply(null,e),r}),...v);return Object.assign(E,{resultFunc:c,memoizedResultFunc:_,dependencies:y,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>r,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:d,argsMemoize:p})};return Object.assign(o,{withTypes:()=>o}),o}var vy=gy(my),yy=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vy;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>yy});function _y(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Ey=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),by=()=>Math.random().toString(36).substring(7).split("").join("."),wy={INIT:"@@redux/INIT".concat(by()),REPLACE:"@@redux/REPLACE".concat(by()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(by())};function Sy(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Ay(e,t,n){if("function"!==typeof e)throw new Error(_y(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(_y(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(_y(1));return n(Ay)(e,t)}let r=e,i=t,o=new Map,s=o,a=0,c=!1;function l(){s===o&&(s=new Map,o.forEach(((e,t)=>{s.set(t,e)})))}function d(){if(c)throw new Error(_y(3));return i}function u(e){if("function"!==typeof e)throw new Error(_y(4));if(c)throw new Error(_y(5));let t=!0;l();const n=a++;return s.set(n,e),function(){if(t){if(c)throw new Error(_y(6));t=!1,l(),s.delete(n),o=null}}}function h(e){if(!Sy(e))throw new Error(_y(7));if("undefined"===typeof e.type)throw new Error(_y(8));if("string"!==typeof e.type)throw new Error(_y(17));if(c)throw new Error(_y(9));try{c=!0,i=r(i,e)}finally{c=!1}return(o=s).forEach((e=>{e()})),e}h({type:wy.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(_y(10));r=e,h({type:wy.REPLACE})},[Ey]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(_y(11));function n(){const e=t;e.next&&e.next(d())}n();return{unsubscribe:e(n)}},[Ey](){return this}}}}}function Cy(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:wy.INIT}))throw new Error(_y(12));if("undefined"===typeof n(void 0,{type:wy.PROBE_UNKNOWN_ACTION()}))throw new Error(_y(13))}))}(n)}catch(eU){i=eU}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let o=!1;const s={};for(let i=0;i<r.length;i++){const a=r[i],c=n[a],l=e[a],d=c(l,t);if("undefined"===typeof d){t&&t.type;throw new Error(_y(14))}s[a]=d,o=o||d!==l}return o=o||r.length!==Object.keys(e).length,o?s:e}}function Ty(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function Ry(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var Iy=Ry(),xy=Ry;const Oy=["reducerPath"];var Ny="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Ty:Ty.apply(null,arguments)},Dy=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function ky(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(l_(0));return u(u({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return Sy(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var Py=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Ly(e){return Av(e)?ay(e,(()=>{})):e}function My(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var jy="RTK_autoBatch",Uy=e=>t=>{setTimeout(t,e)},By=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new Py(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,o=!1;const s=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Uy(10):"callback"===e.type?e.queueNotification:Uy(e.timeout),c=()=>{o=!1,i&&(i=!1,s.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[jy]),i=!r,i&&(o||(o=!0,a(c))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function Fy(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(l_(28));if(r in t)throw new Error(l_(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var Vy=(e,t)=>Dy(e)?e.match(t):e(t);function Wy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some((t=>Vy(t,e)))}var Hy=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},zy=["name","message","stack","code"],Gy=class{constructor(e,t){l(this,"_type",void 0),this.payload=e,this.meta=t}},Yy=class{constructor(e,t){l(this,"_type",void 0),this.payload=e,this.meta=t}},Ky=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of zy)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},qy=(()=>{function e(e,t,n){const r=ky(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:u(u({},r||{}),{},{arg:n,requestId:t,requestStatus:"fulfilled"})}))),i=ky(e+"/pending",((e,t,n)=>({payload:void 0,meta:u(u({},n||{}),{},{arg:t,requestId:e,requestStatus:"pending"})}))),o=ky(e+"/rejected",((e,t,r,i,o)=>({payload:i,error:(n&&n.serializeError||Ky)(e||"Rejected"),meta:u(u({},o||{}),{},{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null===e||void 0===e?void 0:e.name),condition:"ConditionError"===(null===e||void 0===e?void 0:e.name)})})));return Object.assign((function(e){return(s,a,c)=>{const l=null!==n&&void 0!==n&&n.idGenerator?n.idGenerator(e):Hy(),d=new AbortController;let u,h;function p(e){h=e,d.abort()}const f=async function(){let f;try{var m,g;let o=null===n||void 0===n||null===(m=n.condition)||void 0===m?void 0:m.call(n,e,{getState:a,extra:c});if(null!==(v=o)&&"object"===typeof v&&"function"===typeof v.then&&(o=await o),!1===o||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const y=new Promise(((e,t)=>{u=()=>{t({name:"AbortError",message:h||"Aborted"})},d.signal.addEventListener("abort",u)}));s(i(l,e,null===n||void 0===n||null===(g=n.getPendingMeta)||void 0===g?void 0:g.call(n,{requestId:l,arg:e},{getState:a,extra:c}))),f=await Promise.race([y,Promise.resolve(t(e,{dispatch:s,getState:a,extra:c,requestId:l,signal:d.signal,abort:p,rejectWithValue:(e,t)=>new Gy(e,t),fulfillWithValue:(e,t)=>new Yy(e,t)})).then((t=>{if(t instanceof Gy)throw t;return t instanceof Yy?r(t.payload,l,e,t.meta):r(t,l,e)}))])}catch(y){f=y instanceof Gy?o(null,l,e,y.payload,y.meta):o(y,l,e)}finally{u&&d.signal.removeEventListener("abort",u)}var v;return n&&!n.dispatchConditionRejection&&o.match(f)&&f.meta.condition||s(f),f}();return Object.assign(f,{abort:p,requestId:l,arg:e,unwrap:()=>f.then(Xy)})}}),{pending:i,rejected:o,fulfilled:r,settled:Wy(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Xy(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Jy=Symbol.for("rtk-slice-createasyncthunk");function Qy(e,t){return"".concat(e,"/").concat(t)}function Zy(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Jy];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(l_(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return u({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(l_(12));if(n in a.sliceCaseReducersByType)throw new Error(l_(13));return a.sliceCaseReducersByType[n]=t,c},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),c),exposeAction:(e,t)=>(a.actionCreators[e]=t,c),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,c)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?Fy(e.extraReducers):[e.extraReducers],i=u(u({},t),a.sliceCaseReducersByType);return function(e,t){let n,[r,i,o]=Fy(t);if(function(e){return"function"===typeof e}(e))n=()=>Ly(e());else{const t=Ly(e);n=()=>t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,s=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===s.filter((e=>!!e)).length&&(s=[o]),s.reduce(((e,n)=>{if(n){if(Sv(e)){const r=n(e,t);return void 0===r?e:r}if(Av(e))return ay(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return s.getInitialState=n,s}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=i[r],s={reducerName:r,type:Qy(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function(e,t,n){let r,i,{type:o,reducerName:s,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(l_(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(o,r).exposeCaseReducer(s,r).exposeAction(s,i?ky(o,i):ky(o))}(s,o,c):function(e,t,n,r){let{type:i,reducerName:o}=e;if(!r)throw new Error(l_(18));const{payloadCreator:s,fulfilled:a,pending:c,rejected:l,settled:d,options:u}=t,h=r(i,s,u);n.exposeAction(o,h),a&&n.addCase(h.fulfilled,a);c&&n.addCase(h.pending,c);l&&n.addCase(h.rejected,l);d&&n.addMatcher(h.settled,d);n.exposeCaseReducer(o,{fulfilled:a||t_,pending:c||t_,rejected:l||t_,settled:d||t_})}(s,o,c,n)}));const d=e=>e,h=new Map;let p;function f(e,t){return p||(p=l()),p(e,t)}function m(){return p||(p=l()),p.getInitialState()}function g(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=m()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const r=My(h,n,(()=>new WeakMap));return My(r,t,(()=>{const r={};for(const[o,s]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[o]=$y(s,t,m,n)}return r}))}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const v=u(u({name:t,reducer:f,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:m},g(r)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,i=s(t,Oy);const o=null!==n&&void 0!==n?n:r;return e.inject({reducerPath:o,reducer:f},i),u(u({},v),g(o,!0))}});return v}}function $y(e,t,n,r){function i(i){let o=t(i);"undefined"===typeof o&&r&&(o=n());for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return e(o,...a)}return i.unwrapped=e,i}var e_=Zy();function t_(){}var n_="listener",r_="completed",i_="cancelled";"task-".concat(i_),"task-".concat(r_),"".concat(n_,"-").concat(i_),"".concat(n_,"-").concat(r_);var{assign:o_}=Object,s_="listenerMiddleware",a_=o_(ky("".concat(s_,"/add")),{withTypes:()=>a_}),c_=("".concat(s_,"/removeAll"),o_(ky("".concat(s_,"/remove")),{withTypes:()=>c_}));Symbol.for("rtk-state-proxy-original");function l_(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const d_=qy("auth/getAllUsers",(async(e,t)=>{try{return(await Pg.get("/users",{params:{page:e.page,size:e.size},headers:{authRequired:!0}})).result}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),u_=qy("auth/register",(async(e,t)=>{try{return await Pg.post("/users",e)}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),h_=qy("auth/login",(async(e,t)=>{try{const t=await Pg.post("auth/login",e);return localStorage.setItem("token",t.result.token),t.result.token}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),p_=qy("auth/introspect",(async(e,t)=>{try{return(await Pg.post("auth/introspect",e)).result.valid}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),f_=e_({name:"register",initialState:{users:[],isError:!1,isSuccess:!1,isLoading:!1,isLoggedIn:localStorage.getItem("isIntrospect")||!1,message:"",token:localStorage.getItem("token")||null,isRegister:!1},reducers:{RESET(e){e.isError=!1,e.isSuccess=!1,e.isLoading=!1,e.isRegister=!1,e.isLoggedIn=!1,e.message=""},logout(e){localStorage.removeItem("token"),e.isLoggedIn=!1}},extraReducers:e=>{e.addCase(d_.pending,(e=>{e.isLoading=!0})),e.addCase(d_.fulfilled,((e,t)=>{e.isLoading=!1,e.users=t.payload})),e.addCase(d_.rejected,((e,t)=>{e.isLoading=!0,e.users=t.payload})),e.addCase(u_.pending,(e=>{e.isLoading=!0})),e.addCase(u_.fulfilled,((e,t)=>{e.isLoading=!1,e.isRegister=!0,e.isError=!1,e.message=t.payload.message})),e.addCase(u_.rejected,((e,t)=>{e.isLoading=!0,e.isError=!0,e.message=t.payload})),e.addCase(h_.pending,(e=>{e.isLoading=!0})),e.addCase(h_.fulfilled,((e,t)=>{e.isLoading=!1,e.isLoggedIn=!0,e.isError=!1,e.token=t.payload,e.message=t.payload.message,localStorage.setItem("isIntrospect","true")})),e.addCase(h_.rejected,((e,t)=>{e.isLoading=!0,e.isError=!0,e.message=t.payload,localStorage.setItem("isIntrospect","false")})),e.addCase(p_.pending,(e=>{e.isIntrospect=!1})),e.addCase(p_.fulfilled,((e,t)=>{e.isLoggedIn=!0,localStorage.setItem("isIntrospect",t.payload)})),e.addCase(p_.rejected,((e,t)=>{e.isLoggedIn=!1,localStorage.setItem("isIntrospect",t.payload)}))}}),{RESET:m_,logout:g_}=f_.actions,v_=f_.reducer;var y_=n(2426),__=n.n(y_);Math.pow(10,8);const E_=864e5,b_=6e4,w_=36e5,S_=Symbol.for("constructDateFrom");function A_(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&S_ in e?e[S_](t):e instanceof Date?new e.constructor(t):new Date(t)}function C_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=A_.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(i)}function T_(e,t){return A_(t||e,e)}function R_(e,t,n){const r=T_(e,null===n||void 0===n?void 0:n.in);return isNaN(t)?A_((null===n||void 0===n?void 0:n.in)||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function I_(e,t,n){const r=T_(e,null===n||void 0===n?void 0:n.in);if(isNaN(t))return A_((null===n||void 0===n?void 0:n.in)||e,NaN);if(!t)return r;const i=r.getDate(),o=A_((null===n||void 0===n?void 0:n.in)||e,r.getTime());o.setMonth(r.getMonth()+t+1,0);return i>=o.getDate()?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function x_(e,t,n){const{years:r=0,months:i=0,weeks:o=0,days:s=0,hours:a=0,minutes:c=0,seconds:l=0}=t,d=T_(e,null===n||void 0===n?void 0:n.in),u=i||r?I_(d,i+12*r):d,h=s||o?R_(u,s+7*o):u,p=1e3*(l+60*(c+60*a));return A_((null===n||void 0===n?void 0:n.in)||e,+h+p)}function O_(e){const t=T_(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function N_(e,t){const n=T_(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function D_(e,t,n){const[r,i]=C_(null===n||void 0===n?void 0:n.in,e,t),o=N_(r),s=N_(i),a=+o-O_(o),c=+s-O_(s);return Math.round((a-c)/E_)}function k_(e,t,n){const[r,i]=C_(null===n||void 0===n?void 0:n.in,e,t),o=P_(r,i),s=Math.abs(D_(r,i));r.setDate(r.getDate()-o*s);const a=o*(s-Number(P_(r,i)===-o));return 0===a?0:a}function P_(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function L_(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function M_(e,t,n){const[r,i]=C_(null===n||void 0===n?void 0:n.in,e,t),o=(+r-+i)/w_;return L_(null===n||void 0===n?void 0:n.roundingMethod)(o)}function j_(e,t){return+T_(e)-+T_(t)}function U_(e,t,n){const r=j_(e,t)/b_;return L_(null===n||void 0===n?void 0:n.roundingMethod)(r)}function B_(e,t){const n=+T_(e)-+T_(t);return n<0?-1:n>0?1:n}function F_(e,t,n){const[r,i]=C_(null===n||void 0===n?void 0:n.in,e,t);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}function V_(e,t){const n=T_(e,null===t||void 0===t?void 0:t.in);return n.setHours(23,59,59,999),n}function W_(e,t){const n=T_(e,null===t||void 0===t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function H_(e,t){const n=T_(e,null===t||void 0===t?void 0:t.in);return+V_(n,t)===+W_(n,t)}function z_(e,t,n){const[r,i,o]=C_(null===n||void 0===n?void 0:n.in,e,e,t),s=B_(i,o),a=Math.abs(F_(i,o));if(a<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let c=B_(i,o)===-s;H_(r)&&1===a&&1===B_(r,o)&&(c=!1);const l=s*(a-+c);return 0===l?0:l}function G_(e,t,n){const r=j_(e,t)/1e3;return L_(null===n||void 0===n?void 0:n.roundingMethod)(r)}function Y_(e,t,n){const[r,i]=C_(null===n||void 0===n?void 0:n.in,e,t);return r.getFullYear()-i.getFullYear()}function K_(e,t,n){const[r,i]=C_(null===n||void 0===n?void 0:n.in,e,t),o=B_(r,i),s=Math.abs(Y_(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=o*(s-+(B_(r,i)===-o));return 0===a?0:a}function q_(e,t){const{start:n,end:r}=function(e,t){const[n,r]=C_(e,t.start,t.end);return{start:n,end:r}}(null===t||void 0===t?void 0:t.in,e),i={},o=K_(r,n);o&&(i.years=o);const s=x_(n,{years:i.years}),a=z_(r,s);a&&(i.months=a);const c=x_(s,{months:i.months}),l=k_(r,c);l&&(i.days=l);const d=x_(c,{days:i.days}),u=M_(r,d);u&&(i.hours=u);const h=x_(d,{hours:i.hours}),p=U_(r,h);p&&(i.minutes=p);const f=G_(r,x_(h,{minutes:i.minutes}));return f&&(i.seconds=f),i}const X_=()=>{const e=vv(),t=pe();return{triggerLoginExpired:()=>{Yg().fire({title:"Login expired, please login again!",confirmButtonText:"Login",customClass:{confirmButton:"swal-confirm-button"}}).then((n=>{n.isConfirmed&&(e(g_()),t("/login"))}))}}},J_=(e,t)=>{const n=t+1-e;return Array.from({length:n},((t,n)=>e+n))},Q_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(!e)return t(null),void n(!0);const r=new Date,i=Array.isArray(e)?__()(e.join("-"),"YYYY-MM-DD").toDate():new Date(e);if(i>r){t(q_({start:r,end:i})),n(!1)}else t(null),n(!0)};function Z_(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Plus"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M15,12.5H12.5V15a.5.5,0,0,1-1,0V12.5H9a.5.5,0,0,1,0-1h2.5V9a.5.5,0,0,1,1,0v2.5H15A.5.5,0,0,1,15,12.5Z"},child:[]},{tag:"path",attr:{d:"M12,21.932A9.934,9.934,0,1,1,21.932,12,9.944,9.944,0,0,1,12,21.932ZM12,3.065A8.934,8.934,0,1,0,20.932,12,8.944,8.944,0,0,0,12,3.065Z"},child:[]}]}]}]})(e)}function $_(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(e)}function eE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Medal"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.692,3.755a1.519,1.519,0,0,0-1.27-.69h-4.41a1.487,1.487,0,0,0-1.36.87L12,7.485l-1.66-3.55a1.487,1.487,0,0,0-1.36-.87H4.572a1.5,1.5,0,0,0-1.35,2.14l3.73,8.02a5.638,5.638,0,0,0-.46,2.21,5.5,5.5,0,0,0,11,0,5.419,5.419,0,0,0-.46-2.2l3.75-8.03A1.525,1.525,0,0,0,20.692,3.755ZM4.122,4.785a.527.527,0,0,1,.03-.49.494.494,0,0,1,.42-.23h4.41a.507.507,0,0,1,.46.29l2.61,5.58h-.06a5.505,5.505,0,0,0-4.43,2.25Zm7.87,15.15a4.5,4.5,0,1,1,4.5-4.5A4.5,4.5,0,0,1,11.992,19.935Zm7.89-15.15-3.46,7.4a5.454,5.454,0,0,0-3.21-2.11l-.66-1.42,2-4.3a.507.507,0,0,1,.46-.29h4.41a.482.482,0,0,1,.42.23A.505.505,0,0,1,19.882,4.785Z"},child:[]},{tag:"path",attr:{d:"M12.077,16.88l1.024.538a.174.174,0,0,0,.253-.184l-.2-1.14a.174.174,0,0,1,.051-.154l.828-.807a.175.175,0,0,0-.1-.3L12.8,14.669a.177.177,0,0,1-.132-.1l-.512-1.037a.174.174,0,0,0-.313,0l-.512,1.037a.174.174,0,0,1-.131.1l-1.145.166a.175.175,0,0,0-.1.3l.828.807a.174.174,0,0,1,.05.154l-.2,1.14a.174.174,0,0,0,.253.184l1.024-.538A.172.172,0,0,1,12.077,16.88Z"},child:[]}]}]}]})(e)}function tE(e){return Og({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor"},child:[]}]})(e)}const nE=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,t.useMemo)((()=>{const t={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SIZE_ELEMENT||3,i=Math.ceil(e/t);if(i<=r+5)return J_(1,i);const o=n-r>2,s=n+r<i-1;if(o&&!s){const e=J_(i-4,i);return[1,(0,Va.jsx)(tE,{}),...e]}if(!o&&s){return[...J_(1,5),(0,Va.jsx)(tE,{}),i]}const a=Math.max(n-r,1),c=Math.min(n+r,i);if(o&&s){const e=J_(a,c);return[1,(0,Va.jsx)(tE,{}),...e,(0,Va.jsx)(tE,{}),i]}}),[e,n,r])},rE=e=>{let{listItem:n,to:r,methodCallApi:i,tosearch:o}=e;const s=vv(),a=pe(),[c]=_t(),l=parseInt(c.get("page"))||1,[d,h]=(0,t.useState)({page:l,size:{NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SIZE_ELEMENT}),p=(null===n||void 0===n?void 0:n.totalElements)||0,f=nE(p,l);(0,t.useEffect)((()=>{"function"===typeof i&&s(i(d))}),[s,d,i]);return(0,Va.jsx)("div",{className:"flex items-center",children:null===f||void 0===f?void 0:f.map((e=>(0,Va.jsx)("div",{onClick:()=>{return t=e,void(Number.isInteger(t)&&(h((e=>u(u({},e),{},{page:t}))),o&&a("".concat(o,"&page=").concat(t)),r&&a("".concat(r,"?page=").concat(t))));var t},className:"w-10 h-10 flex items-center cursor-pointer justify-center \n          hover:bg-gray-300 hover:rounded-full \n          ".concat(l===e&&"bg-gray-300 rounded-full","\n          "),children:e},e)))})},iE=()=>{var e,n;const r=vv(),i=pe(),{users:o}=ov((e=>e.auth)),[s,a]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:c}=X_();(0,t.useEffect)((()=>{r(d_())}),[r]);return(0,t.useEffect)((()=>{var e;0===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.length)&&(null===o||void 0===o?void 0:o.currentPage)>1&&(i("?page=".concat((null===o||void 0===o?void 0:o.currentPage)-1)),r(d_({page:o.currentPage-1,size:o.pageSize})))}),[o,r,i]),(0,Va.jsxs)("section",{className:"shadow-s1 p-8 rounded-lg",children:[(0,Va.jsx)("div",{className:"flex justify-between",children:(0,Va.jsx)(oE,{level:5,className:" font-normal",children:"User Lists"})}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsx)("div",{className:"relative overflow-x-auto rounded-lg",children:(0,Va.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[(0,Va.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"S.N"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"Username"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"Email"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"Role"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"Address"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"CInumber"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"DOB"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Active"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3 flex justify-end",children:"Action"})]})}),(0,Va.jsx)("tbody",{children:(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.length)>0&&(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.map(((e,t)=>{var n;return(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:((null===o||void 0===o?void 0:o.currentPage)-1)*o.pageSize+t+1}),(0,Va.jsx)("td",{className:"px-6 py-4 capitalize",children:e.name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.email}),(0,Va.jsx)("td",{className:"px-6 py-4 capitalize",children:null===e||void 0===e||null===(n=e.roles)||void 0===n?void 0:n.map(((e,t)=>(0,Va.jsx)("p",{children:e.name},t)))}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.address?e.address:"NOT UPDATED"}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.ciNumber?e.ciNumber:"NOT UPDATED"}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.dob?e.dob:"NOT UPDATED"}),(0,Va.jsx)("td",{className:"px-6 py-4",children:(0,Va.jsx)("p",{onClick:()=>{return t=e.id,void(s?Yg().fire({title:"Are you sure?",text:"Do you want to update this user status?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Update"}).then((async e=>{if(e.isConfirmed)try{const e=await Pg.put("users/status/".concat(t),{authRequired:!0});0===e.code?(Jt.success(e.message),await r(d_({page:o.currentPage,size:o.pageSize}))):Jt.error("Error: Unable to update the user status!")}catch(n){Jt.error("Something went wrong!")}})):c());var t},className:"".concat(e.active?"text-green":"text-red-600"," cursor-pointer"),children:e.active&&!e.roles.includes("ROLE_ADMIN")?(0,Va.jsx)(Fg,{size:22}):(0,Va.jsx)(Hg,{size:22})})}),(0,Va.jsxs)("td",{className:"py-4 flex justify-end px-8",children:[(0,Va.jsx)(mt,{to:"#",type:"button",className:"font-medium text-indigo-500",children:(0,Va.jsx)(Dg,{size:25})}),(0,Va.jsx)(mt,{to:"/product/update/".concat(e.id),type:"button",className:"font-medium text-green",children:(0,Va.jsx)($_,{size:25})})]})]},e.id)})))})]})}),(0,Va.jsx)("div",{className:"mt-8 flex justify-end",children:(0,Va.jsx)(rE,{listItem:o,to:"/userlist",methodCallApi:d_})})]})},oE=e=>{let{level:t,children:n,className:r}=e;const i="h".concat(t)||0,o="".concat(1===t?"text-[45px] font-[700]":2===t?"text-[40px] font-[700]":3===t?"text-[35px] font-[700]":4===t?"text-[30px] font-[600]":5===t?"text-[25px] font-[600]":"text-[18px] font-[500]");return(0,Va.jsx)(i,{className:"".concat(r," ").concat(o),children:n})},sE=e=>{let{children:t,className:n}=e;return(0,Va.jsx)("p",{className:"".concat(n," text-base font-normal text-[rgb(107, 113, 119)]"),children:t})},aE=e=>{let{children:t,className:n}=e;return(0,Va.jsx)("p",{className:"".concat(n," text-[15px] font-[500] text-gray_100"),children:t})},cE=e=>{let{href:t,className:n,isActive:r,children:i}=e;const o=r?"text-green":"";return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)(mt,{to:t,className:"".concat(n," ").concat("text-[17px] font-medium cursor-pointer list-none hover:text-green transition-all ease-in-out"," ").concat(o),children:i})})},lE=e=>{let{href:t,className:n,isActive:r,children:i}=e;const o=r?"bg-green_100 text-green":"";return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)(mt,{to:t,className:"".concat(n," ").concat("text-[17px] font-medium cursor-pointer list-none hover:text-green transition-all ease-in-out"," ").concat(o),children:i})})},dE=e=>{let{children:t,className:n}=e;return(0,Va.jsx)("div",{className:"".concat(n," w-[85%] m-auto"),children:t})},uE=e=>{let{children:t,className:n}=e;return(0,Va.jsx)("button",{type:"submit",className:"".concat(n," text-white bg-green font-medium rounded-full text-lg px-16 py-3 hover:bg-primary transition ease-in-out"),children:t})},hE=e=>{let{children:t,className:n}=e;return(0,Va.jsx)("div",{className:"".concat(n," w-12 h-12 bg-green_100 flex items-center justify-center rounded-full"),children:t})},pE=e=>{let{title:t,subtitle:n}=e;return(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)(oE,{level:4,children:t}),(0,Va.jsx)("div",{className:"w-1/2",children:(0,Va.jsx)(aE,{children:n})})]})},fE="w-full p-4 text-sm text-gray-900 border border-gray-200 focus:ring-green focus:border-green outline-none",mE=e=>{let{item:t}=e;return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("div",{className:"flex items-center flex-col gap-2 py-8 rounded-lg bg-green_1000 shadow-s1",children:[(0,Va.jsx)("div",{className:"h-24",children:(0,Va.jsx)("img",{src:t.image,alt:"",className:"w-full h-full object-contain"})}),(0,Va.jsx)(oE,{className:" uppercase",children:t.title})]})})},gE=[{id:1,path:"/",link:"home"},{id:2,link:"product",children:!0},{id:3,path:"/blog",link:"Blog"},{id:4,path:"/about",link:"about"},{id:6,path:"/contact",link:"Contact"},{id:7,path:"/room-chat",link:"Chat Video"}],vE=[{id:1,image:"../images/category/c2.png",title:"electronics"},{id:2,image:"../images/category/book.png",title:"books"},{id:3,image:"../images/category/art.jpg",title:"arts"},{id:4,image:"../images/category/watch.jpg",title:"watches"},{id:5,image:"../images/category/coin.jpg",title:"coins"}],yE=[{id:"01",title:"Sign Up",desc:"Sign up for our bidding website easily through the contact form. Simply provide a few pictures of the items you'd like to auction, and set up to start bidding and selling in no time!",cover:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/shape-7.png"},{id:"02",title:"Auction Goes Online",desc:"Sellers can open an auction, set the starting price, and choose an unlimited bidding duration. Enjoy complete control over your auction, with no time limits or restrictions on bids!",cover:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/09/auction.png"},{id:"03",title:"Closing Auction",desc:"After the viewing day(s) the auction is still a few days open for new bids. Sellers evaluate the highest bid after the closing of an auction.",cover:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/09/auction-2.png"},{id:"04",title:"Last Step",desc:"Once the item is sold to the highest bidder, it will be available for pickup on a scheduled date. Buyers will be notified with all the details to collect their winning items.",cover:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/09/auction-3.png"}],_E=[{id:1,title:"William",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-5-1.png",amount:"100"},{id:2,title:"Orko",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-6.png",amount:"200"},{id:3,title:"Nipa",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-3.png",amount:"300"},{id:4,title:"Joseph",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-2-2.png",amount:"100"},{id:5,title:"Isabella",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-10-2.png",amount:"100"},{id:6,title:"Emily",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-15-1.png",amount:"100"},{id:7,title:"Devmahbub",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-8-3.png",amount:"100"},{id:8,title:"Ava Garcia",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-4-1.png",amount:"100"},{id:9,title:"Amelia Harris",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-13.png",amount:"100"},{id:10,title:"Alexander",profile:"https://rainbowthemes.net/themes/nuron/wp-content/uploads/2023/01/client-8.png",amount:"100"}],EE=[{id:1,profile:"https://bidout-react.vercel.app/images/bg/sponsor1.png"},{id:2,profile:"https://bidout-react.vercel.app/images/bg/sponsor3.png"},{id:3,profile:"https://bidout-react.vercel.app/images/bg/sponsor2.png"},{id:4,profile:"https://bidout-react.vercel.app/images/bg/sponsor4.png"},{id:5,profile:"https://bidout-react.vercel.app/images/bg/sponsor5.png"},{id:6,profile:"https://bidout-react.vercel.app/images/bg/sponsor6.png"},{id:7,profile:"https://bidout-react.vercel.app/images/bg/sponsor7.png"},{id:8,profile:"https://bidout-react.vercel.app/images/bg/sponsor8.png"},{id:9,profile:"https://bidout-react.vercel.app/images/bg/sponsor9.png"},{id:10,profile:"https://bidout-react.vercel.app/images/bg/sponsor1.png"},{id:4,profile:"https://bidout-react.vercel.app/images/bg/sponsor3.png"},{id:5,profile:"https://bidout-react.vercel.app/images/bg/sponsor8.png"},{id:6,profile:"https://bidout-react.vercel.app/images/bg/sponsor1.png"},{id:7,profile:"https://bidout-react.vercel.app/images/bg/sponsor9.png"}],bE=[{id:1,catgeory:"Electronics",total:7,img1:"https://media.wired.com/photos/65e873e6a982e7c6566b6bf7/master/w_2560%2Cc_limit/unnamed-11.jpg",img2:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQA9-GA493vltjJqaYpReKziCyx0Cd6uZ480w&s",img3:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR-TBGPxer37Y1G7IRZA4GpMGEv-mNOjar8ig&s",img4:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSvv0rpkHlgHA9hofMhuQbjy9ndTy2NGHyw8g&s"},{id:2,catgeory:"Books",total:10,img1:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQG4BNIsEPZeAENjhrpzP20f-25EgdEdxqx5g&s",img2:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRHF8g3Q-XBi3XiM6YxGWRwf1Bmay4LViqA2g&s",img3:"https://images.pexels.com/photos/15202787/pexels-photo-15202787/free-photo-of-hand-holding-book-in-turkish.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",img4:"https://images.pexels.com/photos/904620/pexels-photo-904620.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:3,catgeory:"Arts",total:8,img1:"https://images.pexels.com/photos/3459713/pexels-photo-3459713.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",img2:"https://images.pexels.com/photos/4576918/pexels-photo-4576918.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",img4:"https://images.pexels.com/photos/2763966/pexels-photo-2763966.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",img3:"https://images.pexels.com/photos/27063859/pexels-photo-27063859/free-photo-of-photo-of-the-map-of-italy.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:4,catgeory:"Coins",total:4,img3:"https://images.pexels.com/photos/1235971/pexels-photo-1235971.jpeg?auto=compress&cs=tinysrgb&w=600",img2:"https://images.pexels.com/photos/15195541/pexels-photo-15195541/free-photo-of-independence-edition-coin.jpeg?auto=compress&cs=tinysrgb&w=600",img4:"https://images.pexels.com/photos/18084818/pexels-photo-18084818/free-photo-of-bitcoin-is-falling.jpeg?auto=compress&cs=tinysrgb&w=600",img1:"https://images.pexels.com/photos/4715172/pexels-photo-4715172.jpeg?auto=compress&cs=tinysrgb&w=600"}],wE=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{className:"catgeory-slider pb-16",children:(0,Va.jsxs)(dE,{children:[(0,Va.jsx)(pE,{title:"Our Categories",subtitle:"Most viewed and all-time top-selling category"}),(0,Va.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-20 my-8",children:vE.map((e=>(0,Va.jsx)(mE,{item:e},e.id)))})]})})});function SE(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M312 372c-7.7 0-14 6.3-14 14 0 9.9-8.1 18-18 18H94c-9.9 0-18-8.1-18-18V126c0-9.9 8.1-18 18-18h186c9.9 0 18 8.1 18 18 0 7.7 6.3 14 14 14s14-6.3 14-14c0-25.4-20.6-46-46-46H94c-25.4 0-46 20.6-46 46v260c0 25.4 20.6 46 46 46h186c25.4 0 46-20.6 46-46 0-7.7-6.3-14-14-14z"},child:[]},{tag:"path",attr:{d:"M372.9 158.1c-2.6-2.6-6.1-4.1-9.9-4.1-3.7 0-7.3 1.4-9.9 4.1-5.5 5.5-5.5 14.3 0 19.8l65.2 64.2H162c-7.7 0-14 6.3-14 14s6.3 14 14 14h256.6L355 334.2c-5.4 5.4-5.4 14.3 0 19.8l.1.1c2.7 2.5 6.2 3.9 9.8 3.9 3.8 0 7.3-1.4 9.9-4.1l82.6-82.4c4.3-4.3 6.5-9.3 6.5-14.7 0-5.3-2.3-10.3-6.5-14.5l-84.5-84.2z"},child:[]}]})(e)}function AE(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M443.5 420.2L336.7 312.4c20.9-26.2 33.5-59.4 33.5-95.5 0-84.5-68.5-153-153.1-153S64 132.5 64 217s68.5 153 153.1 153c36.6 0 70.1-12.8 96.5-34.2l106.1 107.1c3.2 3.4 7.6 5.1 11.9 5.1 4.1 0 8.2-1.5 11.3-4.5 6.6-6.3 6.8-16.7.6-23.3zm-226.4-83.1c-32.1 0-62.3-12.5-85-35.2-22.7-22.7-35.2-52.9-35.2-84.9 0-32.1 12.5-62.3 35.2-84.9 22.7-22.7 52.9-35.2 85-35.2s62.3 12.5 85 35.2c22.7 22.7 35.2 52.9 35.2 84.9 0 32.1-12.5 62.3-35.2 84.9-22.7 22.7-52.9 35.2-85 35.2z"},child:[]}]})(e)}function CE(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z"},child:[]}]})(e)}function TE(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M257 120.471c7.083 0 23.911 4.479 23.911 4.479 45.589 10.447 77.678 52.439 77.678 99.85V352.412l9.321 9.364 7.788 7.823H136.302l7.788-7.823 9.321-9.364V224.8c0-47.41 32.089-89.403 77.678-99.85 0 0 18.043-4.479 23.911-4.479M256 48c-17.602 0-31.059 13.518-31.059 31.2v14.559c-59.015 13.523-103.53 67.601-103.53 131.041v114.4L80 380.8v20.8h352v-20.8l-41.411-41.6V224.8c0-63.44-44.516-117.518-103.53-131.041V79.2c0-17.682-13.457-31.2-31.059-31.2zm41.411 374.4h-82.823c0 22.881 18.633 41.6 41.412 41.6s41.411-18.719 41.411-41.6z"},child:[]}]})(e)}function RE(e){return Og({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zM338 304c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm513.9 437.1a8.11 8.11 0 0 1-5.2 1.9H177.2c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2l170.3-202c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l99.4 118 158.1-187.5c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l229.6 271.6c2.6 3.3 2.2 8.4-1.2 11.2z"},child:[]}]})(e)}function IE(e){return Og({tag:"svg",attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(e)}function xE(e){return Og({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"},child:[]}]})(e)}function OE(e){return Og({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}function NE(e){return Og({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zM430.5 318h-46c-1.7 0-3.3.4-4.8 1.2a10.1 10.1 0 0 0-4 13.6l88 161.1h-45.2c-5.5 0-10 4.5-10 10v21.3c0 5.5 4.5 10 10 10h63.1v29.7h-63.1c-5.5 0-10 4.5-10 10v21.3c0 5.5 4.5 10 10 10h63.1V658c0 5.5 4.5 10 10 10h41.3c5.5 0 10-4.5 10-10v-51.8h63.4c5.5 0 10-4.5 10-10v-21.3c0-5.5-4.5-10-10-10h-63.4v-29.7h63.4c5.5 0 10-4.5 10-10v-21.3c0-5.5-4.5-10-10-10h-45.7l87.7-161.1a10.05 10.05 0 0 0-8.8-14.8h-45c-3.8 0-7.2 2.1-8.9 5.5l-73.2 144.3-72.9-144.3c-1.7-3.4-5.2-5.5-9-5.5z"},child:[]}]})(e)}const DE="https://cdn-icons-png.flaticon.com/128/6997/6997662.png",kE="https://cdn-icons-png.flaticon.com/128/236/236832.png",PE=()=>(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)("section",{className:"hero bg-primary py-8",children:(0,Va.jsxs)(dE,{className:"flex items-center justify-between md:flex-row flex-col",children:[(0,Va.jsxs)("div",{className:"w-full md:w-1/2 text-white pr-12",children:[(0,Va.jsx)(oE,{level:3,className:"text-white",children:"Buy, sell & collect items."}),(0,Va.jsx)(sE,{className:"leading-7 text-gray-200 my-8",children:"Biddora is your go-to online bidding platform, offering exciting auctions on a variety of exclusive items. Bid in real-time, enjoy a secure experience, and discover unbeatable deals. Join Biddora today and start bidding!"}),(0,Va.jsx)(LE,{}),(0,Va.jsxs)("div",{className:"flex items-center gap-8 my-8",children:[(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:4,className:" text-white",children:"842M"}),(0,Va.jsx)(sE,{className:"leading-7 text-gray-200",children:"Total Product"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:4,className:" text-white",children:"842M"}),(0,Va.jsx)(sE,{className:"leading-7 text-gray-200",children:"Total Auction"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:4,className:" text-white",children:"54"}),(0,Va.jsx)(sE,{className:"leading-7 text-gray-200",children:"Total Category"})]})]})]}),(0,Va.jsxs)("div",{className:"w-full md:w-1/2 my-16 relative py-16",children:[(0,Va.jsx)("img",{src:"../images/home/hero.webp",alt:""}),(0,Va.jsx)("div",{className:"horiz-move absolute md:top-28 top-8 left-0",children:(0,Va.jsx)(ME,{title:"Proof of quality",desc:"Checked before sale"})}),(0,Va.jsx)("div",{className:"horiz-move absolute bottom-72 right-0",children:(0,Va.jsx)(ME,{title:"Safe and secure",desc:"Safe bidding and transactions"})}),(0,Va.jsxs)("div",{className:"px-5 py-4 bg-white shadow-md flex items-center gap-5 rounded-xl ml-5 -mt-5 vert-move w-1/2",children:[(0,Va.jsx)(oE,{children:"58M Happy Client"}),(0,Va.jsxs)("div",{className:"flex items-center",children:[(0,Va.jsx)(hE,{className:"border-2 border-white",children:(0,Va.jsx)("img",{src:DE,alt:"User1",className:"w-full h-full object-cover"})}),(0,Va.jsx)(hE,{className:"border-2 border-white -ml-4",children:(0,Va.jsx)("img",{src:kE,alt:"User1",className:"w-full h-full object-cover"})}),(0,Va.jsx)(hE,{className:"border-2 border-white -ml-4",children:(0,Va.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/128/236/236831.png",alt:"User1",className:"w-full h-full object-cover"})}),(0,Va.jsx)(hE,{className:"border-2 border-white -ml-4",children:(0,Va.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/128/1154/1154448.png",alt:"User1",className:"w-full h-full object-cover"})}),(0,Va.jsx)(hE,{className:"border-2 border-white -ml-4",children:(0,Va.jsx)(Z_,{size:27})})]})]})]})]})}),(0,Va.jsx)("div",{className:"bg-white w-full py-16 -mt-10 rounded-t-[40px]"})]}),LE=()=>{const e=pe(),[n,r]=(0,t.useState)("");return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("form",{onSubmit:t=>{t.preventDefault(),""!==n.trim()&&e("/search?name=".concat(n))},className:"",children:[(0,Va.jsx)("label",{htmlFor:"default-search",className:"mb-2 text-sm font-medium text-gray-800 sr-only",children:"Search"}),(0,Va.jsxs)("div",{className:"relative",children:[(0,Va.jsx)("div",{className:"absolute inset-y-0 start-2 flex items-center ps-3 pointer-events-none",children:(0,Va.jsx)(AE,{color:"black",size:25})}),(0,Va.jsx)("input",{onChange:e=>r(e.target.value),type:"search",id:"default-search",className:"block shadow-md w-full p-6 ps-16 text-sm text-gray-800 rounded-full bg-gray-50 outline-none",placeholder:"Search product..."}),(0,Va.jsx)(uE,{className:"absolute end-2.5 bottom-2",children:"Search"})]})]})})},ME=e=>{let{title:t,desc:n}=e;return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("div",{className:"px-5 py-4 bg-white shadow-md flex items-center gap-5 rounded-xl w-auto",children:[(0,Va.jsx)("div",{className:"w-14 h-14 bg-green_100 flex items-center justify-center rounded-full",children:(0,Va.jsx)(NE,{size:27,className:"text-primary"})}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{children:t}),(0,Va.jsx)(aE,{children:n})]})]})})},jE=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"process py-24 bg-primary relative",children:[(0,Va.jsx)("div",{className:"bg-white w-full py-20 -mt-10 rounded-b-[40px] z-10 absolute top-0"}),(0,Va.jsxs)(dE,{className:"py-16 pt-24 text-white",children:[(0,Va.jsx)(pE,{title:"How It Works",subtitle:"4 easy steps to be part of us"}),(0,Va.jsx)("div",{className:"content grid grid-cols-1 md:grid-cols-4 gap-8 mt-8",children:yE.map(((e,t)=>(0,Va.jsxs)("div",{className:"p-8 bg-[rgba(38,90,77,0.62)] rounded-xl flex items-center justify-center flex-col text-center",children:[(0,Va.jsx)("div",{className:"w-16 h-16",children:(0,Va.jsx)("img",{src:e.cover,alt:""})}),(0,Va.jsx)(oE,{level:5,className:"my-3 font-normal text-white",children:e.title}),(0,Va.jsx)("p",{className:"text-gray-300",children:e.desc})]},t)))})]}),(0,Va.jsx)("div",{className:"bg-white w-full py-16 rounded-t-[40px] z-10 absolute -bottom-20"})]})}),UE=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{className:"process py-12 relative z-10",children:(0,Va.jsxs)(dE,{children:[(0,Va.jsx)(pE,{title:"Top Collection",subtitle:"Discover Biddora, largest and best bidding marketplace, with a stunning selection of products. We\u2019re excited to be part of your success, growth, and the moments that bring you joy."}),(0,Va.jsx)("div",{className:"content grid grid-cols-1 md:grid-cols-4 gap-5 mt-8",children:bE.map(((e,t)=>(0,Va.jsxs)("div",{className:"bg-green_100 relative p-3 rounded-xl",children:[(0,Va.jsx)("div",{className:"h-56",children:(0,Va.jsx)("img",{src:e.img1,alt:"",className:"w-full h-full object-cover rounded-xl"})}),(0,Va.jsx)("div",{className:" absolute top-[45%] left-[38%] w-24 h-24 border-4 border-green rounded-full",children:(0,Va.jsx)("img",{src:e.img2,alt:"",className:"w-full h-full object-cover rounded-full"})}),(0,Va.jsxs)("div",{className:"grid grid-cols-3 gap-3 mt-3",children:[(0,Va.jsx)("div",{className:"h-28",children:(0,Va.jsx)("img",{src:e.img3,alt:"",className:"w-full h-full object-cover rounded-xl"})}),(0,Va.jsx)("div",{className:"h-28",children:(0,Va.jsx)("img",{src:e.img4,alt:"",className:"w-full h-full object-cover rounded-xl"})}),(0,Va.jsx)("div",{className:"h-28",children:(0,Va.jsx)("img",{src:e.img2,alt:"",className:"w-full h-full object-cover rounded-xl"})})]}),(0,Va.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,Va.jsx)(aE,{children:e.catgeory}),(0,Va.jsxs)("span",{className:"px-5 py-1 text-sm rounded-md bg-green text-white",children:[e.total," Items"]})]})]},t+1)))})]})})}),BE=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{className:"process py-12",children:(0,Va.jsxs)(dE,{children:[(0,Va.jsx)(pE,{title:"Top Seller",subtitle:"Discover our trusted sellers offering exclusive deals and top-quality items!"}),(0,Va.jsx)("div",{className:"content grid grid-cols-1 md:grid-cols-5 gap-5 mt-8",children:_E.map(((e,t)=>(0,Va.jsxs)("div",{className:"flex items-center justify-between border p-3 rounded-lg",children:[(0,Va.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Va.jsx)(hE,{className:"w-16 h-16",children:(0,Va.jsx)("img",{src:e.profile,alt:"",className:"w-full h-full rounded-full object-cover"})}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:5,className:"font-normal text-xl",children:e.title}),(0,Va.jsxs)(aE,{children:["$",e.amount*e.id]})]})]}),(0,Va.jsxs)(oE,{level:2,className:" opacity-10",children:["0",e.id]})]},t+1)))})]})})}),FE=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{className:"process py-12 relative z-10",children:(0,Va.jsxs)(dE,{children:[(0,Va.jsx)(pE,{title:"Trusted By 500+ Businesses.",subtitle:"Explore on the world's best & largest bidding marketplace with our beautiful bidding products. We want to be a part of your smile, success and future growth."}),(0,Va.jsx)("div",{className:"content grid grid-cols-3 md:grid-cols-7 gap-5 mt-8",children:EE.map(((e,t)=>(0,Va.jsx)("div",{className:"flex items-center justify-between border rounded-lg",children:(0,Va.jsx)("div",{className:"flex items-center justify-center",children:(0,Va.jsx)("img",{src:e.profile,alt:"",className:"w-full h-full rounded-full object-contain flex items-center justify-center"})})},t)))})]})})});function VE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14.0049 20.0028V22.0028H2.00488V20.0028H14.0049ZM14.5907 0.689087L22.3688 8.46726L20.9546 9.88147L19.894 9.52792L17.4191 12.0028L23.076 17.6597L21.6617 19.0739L16.0049 13.417L13.6007 15.8212L13.8836 16.9525L12.4693 18.3668L4.69117 10.5886L6.10539 9.17437L7.23676 9.45721L13.53 3.16396L13.1765 2.1033L14.5907 0.689087Z"},child:[]}]})(e)}function WE(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M253.352 19.617l-52.18 115.475 27.2.002-24.257 74.123-65.638.156 6.18-19.02L18.69 204.286l93.718 85.324 7.63-23.48 53.017 38.708-21.047 65.28-15.735-11.43-25.652 124.097 110.103-62.744-21.946-15.942 55.584-40.213 60.472 43.748-17.08 12.408 110.102 62.745-25.65-124.098-23.638 17.172-22.898-71.022 53.016-38.707 7.628 23.48 93.717-85.323-125.966-13.935 6.18 19.02-65.64-.155-24.256-74.12 25.205.003-52.2-115.483zm-5.317 115.48h12.654l30.373 92.747 85.253.217 6.288 19.352-68.854 50.29 28.914 89.712-11.94 8.674-76.363-55.233-71.475 51.698-14.977-10.88 27.065-83.972-68.856-50.288 6.287-19.35 85.256-.218 30.375-92.748zm6.338 41.76l-13.69 41.81c4.38-1.018 8.932-1.575 13.614-1.575 4.74 0 9.347.57 13.777 1.615l-13.7-41.85zm-.076 58.93c-23.097 0-41.62 18.52-41.62 41.617 0 23.097 18.523 41.617 41.62 41.617 23.096 0 41.617-18.52 41.617-41.616s-18.52-41.617-41.617-41.617zm-51.518 10.336l-43.878.104 35.336 25.794c.84-9.41 3.85-18.214 8.54-25.897zm103.032 0c4.71 7.712 7.722 16.555 8.55 26.006l35.482-25.903-44.03-.104zm-5.888 70.61c-5.968 6.912-13.462 12.47-21.96 16.12l35.413 25.606-13.453-41.726zm-91.143.13l-13.41 41.596 35.353-25.565c-8.484-3.628-15.97-9.155-21.942-16.032z"},child:[]}]})(e)}function HE(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M225.814 32.316c-3.955-.014-7.922-.01-11.9.007-19.147.089-38.6.592-58.219 1.32l5.676 24.893c20.431-2.31 42.83-4.03 65.227-4.89 12.134-.466 24.194-.712 35.892-.65 35.095.183 66.937 3.13 87.77 11.202l8.908 3.454-3.977 8.685c-29.061 63.485-35.782 124.732-31.228 184.826 2.248-71.318 31.893-134.75 70.81-216.068-52.956-8.8-109.634-12.582-168.959-12.78zm28.034 38.79c-8.74.007-17.65.184-26.559.526-41.672 1.6-83.199 6.49-110.264 12.096 30.233 56.079 54.69 112.287 70.483 167.082a71.934 71.934 0 0 1 5.894.045c4.018.197 7.992.742 11.875 1.59-16.075-51.397-34.385-98.8-57.146-146.131l-5.143-10.694 11.686-2.068c29.356-5.198 59.656-7.21 88.494-7.219 1.922 0 3.84.007 5.748.024 18.324.16 35.984 1.108 52.346 2.535l11.054.965-3.224 10.617c-18.7 61.563-22.363 127.678-11.79 190.582.176.163.354.325.526.49 3.813-1.336 7.38-2.698 10.705-4.154-8.254-67.394-4.597-136.923 26.229-209.201-17.202-4.383-43.425-6.674-72.239-7.034a656.656 656.656 0 0 0-8.675-.05zm144.945 7.385c-30.956 65.556-52.943 118.09-56.547 174.803 20.038-66.802 58.769-126.685 102.904-165.158a602.328 602.328 0 0 0-46.357-9.645zM103.832 97.02c-18.76 3.868-37.086 8.778-54.812 15.562 8.626 7.48 24.22 21.395 43.14 39.889 8.708-8.963 17.589-17.818 26.852-25.87a1067.587 1067.587 0 0 0-15.18-29.581zm142.023 7.482c-13.62-.066-27.562.324-41.554 1.293-1.468 13.682-9.56 26.482-19.225 39.07 15.431 36.469 28.758 73.683 40.756 113.194 18.375 5.42 36.554 11.827 51.28 19.504-5.47-42.458-4.722-85.963 2.38-128.508-12.885-13.31-19.597-28.09-20.135-44.34a621.48 621.48 0 0 0-13.502-.213zm182.018 26.985c-24.73 29.3-46.521 65.997-61.37 105.912 27.264-38.782 60.79-69.032 96.477-90.4a1318.664 1318.664 0 0 0-35.107-15.512zm-300.74 11.959c-14.594 13.188-29.014 29.017-44.031 44.097 32.289 19.191 59.791 41.918 82.226 67.66 1.393-.526 2.8-.999 4.215-1.43-10.498-36.096-24.885-73.033-42.41-110.327zM360.52 268.198c-16.397 19.788-31.834 30.235-53.09 38.57 2.391 9.22-1.16 19.805-9.334 27.901-4.808 4.761-10.85 10.188-19.684 13.715a62.896 62.896 0 0 0 3.9 2.127c12.364 6.17 34.207 4.18 54.5-5.049 20.23-9.2 38.302-25.092 45-41.191 3.357-9.05.96-13.77-4.917-20.692-4.184-4.925-10.295-9.89-16.375-15.38zm-170.079.586c-10.715-.098-21.597 2.994-30.59 9.76-12.79 9.623-22.65 26.784-22.738 55.934v.2l-.01.2c-2.92 61.381 1.6 89.7 10.555 105.065 7.904 13.562 21.05 20.054 40.28 31.994.916-2.406 1.87-5.365 2.765-9.098 2.277-9.499 4.161-22.545 5.355-36.975 2.389-28.858 2.04-63.51-1.955-88.445l-2.111-13.19 13.016 2.995c31.615 7.273 49.7 8.132 60.2 6.28 10.502-1.854 14.061-5.523 20.221-11.624 5.79-5.732 5.682-7.795 4.456-11.021-1.227-3.227-6.149-8.545-14.5-13.633-16.703-10.176-45.085-19.611-71.614-26.647a53.988 53.988 0 0 0-13.33-1.795zm189.1 69.416c-10.013 9.754-22.335 17.761-35.277 23.647-20.983 9.542-44.063 13.907-63.211 7.553-6.76 2.516-10.687 5.407-12.668 7.8-2.718 3.284-2.888 5.7-1.967 9.16.92 3.46 3.665 7.568 7.059 10.524 3.393 2.956 7.426 4.492 8.959 4.564 46.794 2.222 67.046-11.207 92.277-26.783 7.358-4.542 10.174-13.743 9.469-22.931-.353-4.594-1.69-8.911-3.233-11.63a9.009 9.009 0 0 0-1.408-1.904zm-166.187 9.096c2.727 25.068 2.772 54.314.642 80.053-1.247 15.072-3.175 28.779-5.789 39.685-1.137 4.746-2.388 8.954-3.9 12.659l146.697-6.465c-1.656-6.149-3.344-12.324-5.031-18.502a127.004 127.004 0 0 1-17.24 4.424l.044.73-8.316.518c-5.121.614-10.452.953-15.983.992l-83.86 5.21 2.493-11.607c7.947-37.006 8.68-69.589 3.778-105.234a353.433 353.433 0 0 1-13.536-2.463zm31.972 4.684c3.948 31.933 3.473 62.41-2.406 95.2l19.264-1.196a39.44 39.44 0 0 1-6.1-14.778c-1.296-6.88-.575-14.538 3.926-20.87.199-.281.414-.55.627-.821-5.246-4.845-9.628-11.062-11.614-18.524-2.114-7.944-.794-17.67 5.497-25.27 2.079-2.51 4.592-4.776 7.543-6.816-2.61-2.08-4.898-4.285-6.874-6.582-3.064.021-6.345-.093-9.863-.343zm132.666 41.785c-23.456 14.253-49.81 27.876-96.41 25.664a26.402 26.402 0 0 1-4.518-.615c-1.233.553-1.891 1.256-2.382 1.947-.963 1.355-1.532 3.8-.909 7.113 1.248 6.627 7.525 13.889 13.37 14.569 41.385 4.813 69.979-8.726 87.341-24.477 8-7.258 8.068-11.9 6.89-16.951-.59-2.523-1.89-4.969-3.382-7.25zm-6.683 49.062a114.657 114.657 0 0 1-8.547 4.86c1.65 6.051 3.304 12.102 4.937 18.154l19.92-3.572c-5.14-4.387-9.162-8.954-12.39-13.496-1.442-2.029-2.713-4.001-3.92-5.946z"},child:[]}]})(e)}function zE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},child:[]}]})(e)}function GE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"},child:[]}]})(e)}function YE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},child:[]}]})(e)}function KE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 4h16v12H5.17L4 17.17V4m0-2c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H4zm2 10h12v2H6v-2zm0-3h12v2H6V9zm0-3h12v2H6V6z"},child:[]}]})(e)}function qE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m3 6 8 5 8-5v3h2V4c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2L1 16c0 1.1.9 2 2 2h10v-2H3V6zm16-2-8 5-8-5h16z"},child:[]},{tag:"path",attr:{d:"M21 14v4c0 1.1-.9 2-2 2s-2-.9-2-2v-4.5c0-.28.22-.5.5-.5s.5.22.5.5V18h2v-4.5a2.5 2.5 0 0 0-5 0V18c0 2.21 1.79 4 4 4s4-1.79 4-4v-4h-2z"},child:[]}]})(e)}function XE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(e)}function JE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m12 2-5.5 9h11L12 2zm0 3.84L13.93 9h-3.87L12 5.84zM17.5 13c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 7a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5zM3 21.5h8v-8H3v8zm2-6h4v4H5v-4z"},child:[]}]})(e)}function QE(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17.58 6.25 1.77 1.77L14.37 13H12.6v-1.77l4.98-4.98zm3.27-.44-1.06-1.06c-.2-.2-.51-.2-.71 0l-.85.85L20 7.37l.85-.85c.2-.2.2-.52 0-.71zM18 12.2V17h2v2H4v-2h2v-7c0-2.79 1.91-5.14 4.5-5.8v-.7c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.7c.82.21 1.57.59 2.21 1.09l-1.43 1.43A3.89 3.89 0 0 0 12 6c-2.21 0-4 1.79-4 4v7h8v-2.8l2-2zM10 20h4c0 1.1-.9 2-2 2s-2-.9-2-2z"},child:[]}]})(e)}const ZE="https://be-pjhk4.onrender.com/api/favorites",$E=async(e,t)=>{try{return(await xi.delete("https://be-pjhk4.onrender.com/api/favorites/unfollow-auctioneer",{params:{userId:e,auctioneerId:t},headers:{Authorization:"Bearer "+localStorage.getItem("token")}})).data}catch(n){return console.error("L\u1ed7i khi h\u1ee7y theo d\xf5i ng\u01b0\u1eddi b\xe1n:",n),null}},eb=async(e,t)=>{try{return(await xi.delete("".concat(ZE,"/remove-favorite-item"),{params:{userId:e,itemId:t}})).data}catch(n){return console.error("\u274c L\u1ed7i khi h\u1ee7y y\xeau th\xedch s\u1ea3n ph\u1ea9m:",n),null}};class tb extends Error{}function nb(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return atob(t)}}function rb(e,t){if("string"!==typeof e)throw new tb("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,r=e.split(".")[n];if("string"!==typeof r)throw new tb("Invalid token specified: missing part #".concat(n+1));let i;try{i=nb(r)}catch(eU){throw new tb("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(eU.message,")"))}try{return JSON.parse(i)}catch(eU){throw new tb("Invalid token specified: invalid json for part #".concat(n+1," (").concat(eU.message,")"))}}tb.prototype.name="InvalidTokenError";const ib=e=>{let{item:n}=e;const[r,i]=(0,t.useState)(null),[o,s]=(0,t.useState)(!1),[a,c]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);c(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]),(0,t.useEffect)((()=>{(async()=>{if(a){const e=await(async(e,t)=>{try{return(await xi.get("".concat(ZE,"/is-favorite"),{params:{userId:e,itemId:t}})).data}catch(n){return console.error("\u274c L\u1ed7i khi ki\u1ec3m tra y\xeau th\xedch s\u1ea3n ph\u1ea9m:",n),!1}})(a,n.item_id);s(e)}})()}),[a,n.item_id]);return(0,t.useEffect)((()=>{if(null!==n&&void 0!==n&&n.start_date){const e=()=>Q_(null===n||void 0===n?void 0:n.start_date,i);e();const t=setInterval(e,1e3);return()=>clearInterval(t)}}),[null===n||void 0===n?void 0:n.start_date]),(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("div",{className:"bg-white shadow-s1 rounded-xl p-3 relative",children:[r&&(0,Va.jsxs)("div",{className:"flex text-center absolute left-[50%] \r top-[50%] translate-x-[-50%] shadow-lg translate-y-[-70%] \r w-[150px] h-[30px] z-20 justify-center items-center rounded-2xl bg-white",children:[(null===r||void 0===r?void 0:r.days)&&(0,Va.jsx)("div",{children:(0,Va.jsxs)("p",{children:[null===r||void 0===r?void 0:r.days,"(d)"]})}),(null===r||void 0===r?void 0:r.hours)&&(0,Va.jsx)("div",{children:(0,Va.jsxs)("p",{children:[null===r||void 0===r?void 0:r.hours,":"]})}),(null===r||void 0===r?void 0:r.minutes)&&(0,Va.jsx)("div",{children:(0,Va.jsxs)("p",{children:[null===r||void 0===r?void 0:r.minutes,":"]})}),(null===r||void 0===r?void 0:r.seconds)&&(0,Va.jsx)("div",{children:(0,Va.jsx)("p",{children:null===r||void 0===r?void 0:r.seconds})})]}),(0,Va.jsx)("style",{children:"\n          .favorite-btn {\n            background: none;\n            border: none;\n            cursor: pointer;\n            padding: 8px;\n            transition: 0.3s;\n          }\n          .favorite-btn:hover {\n            transform: scale(1.1);\n          }\n          "}),(0,Va.jsxs)("div",{className:"h-56 relative overflow-hidden",children:[(0,Va.jsx)(mt,{to:"/details/".concat(null===n||void 0===n?void 0:n.item_id),children:(0,Va.jsx)("img",{src:null===n||void 0===n?void 0:n.images[0],alt:null===n||void 0===n?void 0:n.images[0],className:"w-full h-full object-cover rounded-xl hover:scale-105 hover:cursor-pointer transition-transform duration-300 ease-in-out"})}),(0,Va.jsx)(hE,{className:"shadow-s1 absolute right-3 bottom-3",children:(0,Va.jsx)(VE,{size:22,className:"text-green"})}),(0,Va.jsx)("div",{className:"absolute top-0 left-0 p-2 w-full",children:(0,Va.jsxs)("div",{className:"flex items-center justify-between",children:[null!==n&&void 0!==n&&n.soldout?(0,Va.jsx)(aE,{className:"text-red-500 bg-white px-3 py-1 text-sm rounded-full",children:"Sold Out"}):(0,Va.jsx)(aE,{className:"text-green bg-green_100 px-3 py-1 text-sm rounded-full",children:"On Stock"}),(0,Va.jsxs)(aE,{className:"text-green bg-green_100 px-3 py-1 text-sm rounded-full",children:[null===n||void 0===n?void 0:n.totalBids," Bids"]})]})})]}),(0,Va.jsxs)("div",{className:"details mt-4",children:[(0,Va.jsx)(oE,{className:"uppercase",children:n.item_name}),(0,Va.jsx)("hr",{className:"mt-3"}),(0,Va.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,Va.jsxs)("div",{className:"flex items-center justify-between gap-5",children:[(0,Va.jsx)(VE,{size:40,className:"text-green"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"text-green",children:"Current Bid"}),(0,Va.jsxs)(oE,{children:["$",null===n||void 0===n?void 0:n.starting_price,".00"]})]})]}),(0,Va.jsx)("div",{className:"w-[1px] h-10 bg-gray-300"}),(0,Va.jsxs)("div",{className:"flex items-center justify-between gap-5",children:[(0,Va.jsx)(HE,{size:40,className:"text-red-500"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"text-red-500",children:"Buy Now"}),(0,Va.jsxs)(oE,{children:["$",null===n||void 0===n?void 0:n.starting_price,".00"]})]})]})]}),(0,Va.jsx)("hr",{className:"mb-3"}),(0,Va.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,Va.jsx)(uE,{className:"rounded-lg text-sm",children:"Place Bid"}),(0,Va.jsx)("button",{className:"favorite-btn",onClick:async()=>{if(console.log("\ud83d\udccc B\u1eaft \u0111\u1ea7u x\u1eed l\xfd y\xeau th\xedch:",{userId:a,item:n}),a)try{let e;o?(e=await eb(a,n.item_id),e&&(s(!1),alert("\u0110\xe3 h\u1ee7y y\xeau th\xedch s\u1ea3n ph\u1ea9m!"))):(e=await(async(e,t)=>{console.log("\ud83d\udccc G\u1eedi request th\xeam y\xeau th\xedch:",{userId:e,itemId:t});try{return(await xi.post("https://be-pjhk4.onrender.com/api/favorites/add-favorite-item",null,{params:{userId:e,itemId:t}})).data}catch(n){throw console.error("\u274c L\u1ed7i khi th\xeam s\u1ea3n ph\u1ea9m y\xeau th\xedch:",n),n}})(a,n.item_id),e&&(s(!0),alert("S\u1ea3n ph\u1ea9m \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam v\xe0o y\xeau th\xedch!"))),console.log("\ud83d\udccc API Response:",e)}catch(e){console.error("\u274c L\u1ed7i khi g\u1ecdi API y\xeau th\xedch:",e)}else alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 l\u01b0u s\u1ea3n ph\u1ea9m v\xe0o danh s\xe1ch y\xeau th\xedch!")},children:o?(0,Va.jsx)(zE,{size:22,className:"text-red-500"}):(0,Va.jsx)(YE,{size:22})})]})]})]})})},ob=()=>{var e,t,n;const{products:r}=ov((e=>e.product));return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{className:"product-home",children:(0,Va.jsxs)(dE,{children:[(0,Va.jsx)(pE,{title:"Live Auction",subtitle:"Explore on the world's best & largest bidding marketplace with our beautiful bidding products. We want to be a part of your smile, success and future growth."}),(0,Va.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 my-8",children:(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.length)>0&&(null===r||void 0===r||null===(t=r.data)||void 0===t||null===(n=t.filter((e=>!1===e.soldout)).slice(0,8))||void 0===n?void 0:n.map(((e,t)=>(0,Va.jsx)(ib,{item:e},t+1))))})]})})})},sb=()=>(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)(PE,{}),(0,Va.jsx)(wE,{}),(0,Va.jsx)(ob,{}),(0,Va.jsx)(BE,{}),(0,Va.jsx)(jE,{}),(0,Va.jsx)(FE,{}),(0,Va.jsx)(UE,{})]});function ab(e){return Og({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471z"},child:[]}]})(e)}function cb(e){return Og({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0"},child:[]},{tag:"path",attr:{d:"M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z"},child:[]},{tag:"path",attr:{d:"M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z"},child:[]},{tag:"path",attr:{d:"M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567"},child:[]}]})(e)}function lb(e){return Og({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"},child:[]}]})(e)}const db=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{children:(0,Va.jsxs)("div",{className:"shadow-s1 p-8 rounded-lg  mb-12",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal",children:"My Activity"}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsxs)("div",{className:"grid grid-cols-3 gap-8 mt-8",children:[(0,Va.jsxs)("div",{className:"shadow-s3 border border-green bg-green_100 p-8 flex items-center text-center justify-center gap-5 flex-col rounded-xl",children:[(0,Va.jsx)(cb,{size:80,className:"text-green"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:1,children:"500 "}),(0,Va.jsx)(oE,{children:"Balance"})]})]}),(0,Va.jsxs)("div",{className:"shadow-s3 border border-green bg-green_100 p-8 flex items-center text-center justify-center gap-5 flex-col rounded-xl",children:[(0,Va.jsx)(eE,{size:80,className:"text-green"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:1,children:"2"}),(0,Va.jsx)(oE,{children:"Items Won"})]})]}),(0,Va.jsxs)("div",{className:"shadow-s3 border border-green bg-green_100 p-8 flex items-center text-center justify-center gap-5 flex-col rounded-xl",children:[(0,Va.jsx)(WE,{size:80,className:"text-green"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:1,children:"100"}),(0,Va.jsx)(oE,{children:"Your Products "})]})]}),(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsxs)("div",{className:"shadow-s3 border border-green bg-green_100 p-8 flex items-center text-center justify-center gap-5 flex-col rounded-xl",children:[(0,Va.jsx)(JE,{size:80,className:"text-green"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:1,children:"50"}),(0,Va.jsx)(oE,{children:"All Products "})]})]}),(0,Va.jsxs)("div",{className:"shadow-s3 border border-green bg-green_100 p-8 flex items-center text-center justify-center gap-5 flex-col rounded-xl",children:[(0,Va.jsx)(zg,{size:80,className:"text-green"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:1,children:"100"}),(0,Va.jsx)(oE,{children:"All Users "})]})]})]})]})]})})}),ub=qy("product/create",(async(e,t)=>{try{return await Pg.post("/auction/add",e,{multipart:!0,authRequired:!0})}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),hb=qy("product/update",(async(e,t)=>{try{return await Pg.put("/auction/update",e,{multipart:!0,authRequired:!0})}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),pb=qy("product/getallproduct",(async(e,t)=>{try{return await Pg.get("/auction",{params:{page:e.page,size:e.size,name:e.searchName?e.searchName:""},headers:{authRequired:!0}})}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),fb=qy("product/getallproductBidding",(async(e,t)=>{try{return await Pg.get("/auction/product")}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),mb=qy("product/deleteproduct",(async(e,t)=>{try{return await Pg.delete("/auction/".concat(e),{authRequired:!0})}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),gb=qy("category/getallcategory",(async(e,t)=>{try{return(await Pg.get("/category",{params:{page:e.page,size:e.size},headers:{authRequired:!0}})).result}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),vb=qy("auction/creator",(async(e,t)=>{try{return(await Pg.get("auction/creator/".concat(e),{headers:{authRequired:!0}})).result}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),yb=qy("auction/buyer",(async(e,t)=>{try{return(await Pg.get("auction/buyer/".concat(e),{headers:{authRequired:!0}})).result}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),_b=qy("category/auctionsuccess",(async(e,t)=>{try{const t=await Pg.post("/bidding/success/".concat(e.productId,"/").concat(e.sellerId),null,{authRequired:!0,timeout:1e4});return console.log(t),t}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),Eb=qy("product/getallproductbycategory",(async(e,t)=>{try{if(e.productId){return(await Pg.get("/auction/category/".concat(e.productId),{params:{page:e.page,size:e.size}})).result}}catch(n){const e=n.response&&n.response.data&&n.response.data.message||n.message||n.toString()||n;return t.rejectWithValue(e)}})),bb=e_({name:"product",initialState:{code:null,message:"",isLoading:!1,products:[],productsBidding:[],productsOfCreator:[],productsOfBuyer:[],productsbycategory:[],categories:[],notification:{},notificationsBidding:[],notificationsBiddingLength:[],notificationchat:{}},reducers:{addNotification:(e,t)=>{e.notification=t.payload},notificationchat:(e,t)=>{e.notificationchat=t.payload},notificationBidding:(e,t)=>{e.notificationsBidding=t.payload,e.notificationsBiddingLength=t.payload}},extraReducers:e=>{e.addCase(ub.pending,(e=>{e.isLoading=!0})),e.addCase(ub.fulfilled,((e,t)=>{e.isLoading=!1,e.code=t.payload.code,Jt.success(t.payload.message)})),e.addCase(ub.rejected,((e,t)=>{e.isLoading=!0,e.code=t.payload.code,Jt.success(t.payload.message)})),e.addCase(hb.pending,(e=>{e.isLoading=!0})),e.addCase(hb.fulfilled,((e,t)=>{e.isLoading=!1,e.code=t.payload.code,Jt.success(t.payload.message)})),e.addCase(hb.rejected,((e,t)=>{e.isLoading=!1,e.code=t.payload.code,Jt.error(t.payload)})),e.addCase(pb.pending,(e=>{e.isLoading=!0,e.products=[]})),e.addCase(pb.fulfilled,((e,t)=>{e.isLoading=!1,e.products=t.payload.result})),e.addCase(pb.rejected,((e,t)=>{e.products=[]})),e.addCase(fb.pending,(e=>{e.productsBidding=[]})),e.addCase(fb.fulfilled,((e,t)=>{e.isLoading=!1,e.productsBidding=t.payload.result})),e.addCase(fb.rejected,((e,t)=>{e.productsBidding=[]})),e.addCase(vb.pending,(e=>{e.isLoading=!0,e.productsOfCreator=[]})),e.addCase(vb.fulfilled,((e,t)=>{e.isLoading=!1,e.productsOfCreator=t.payload})),e.addCase(vb.rejected,((e,t)=>{e.isLoading=!0,e.productsOfCreator=t.payload})),e.addCase(yb.pending,(e=>{e.isLoading=!0,e.productsOfBuyer=[]})),e.addCase(yb.fulfilled,((e,t)=>{e.isLoading=!1,e.productsOfBuyer=t.payload})),e.addCase(yb.rejected,((e,t)=>{e.isLoading=!0,e.productsOfBuyer=[]})),e.addCase(mb.pending,(e=>{e.isLoading=!0})),e.addCase(mb.fulfilled,((e,t)=>{e.isLoading=!1,Jt.success(t.payload.message)})),e.addCase(mb.rejected,((e,t)=>{e.isLoading=!0,Jt.success(t.payload.message)})),e.addCase(gb.pending,(e=>{e.isLoading=!0,e.categories=[]})),e.addCase(gb.fulfilled,((e,t)=>{e.isLoading=!1,e.categories=t.payload})),e.addCase(gb.rejected,((e,t)=>{e.isLoading=!0,e.categories=t.payload})),e.addCase(_b.pending,(e=>{console.log("pending")})),e.addCase(_b.fulfilled,((e,t)=>{e.isLoading=!1})),e.addCase(_b.rejected,((e,t)=>{console.log("rejected")})),e.addCase(Eb.pending,(e=>{e.productsbycategory=[]})),e.addCase(Eb.fulfilled,((e,t)=>{e.productsbycategory=t.payload})),e.addCase(Eb.rejected,((e,t)=>{e.productsbycategory=t.payload}))}}),{addNotification:wb,notificationchat:Sb,notificationBidding:Ab}=bb.actions,Cb=bb.reducer,Tb=()=>{var e,n;const r=vv(),i=pe(),{products:o,isLoading:s}=ov((e=>e.product)),[a]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:c}=X_();(0,t.useEffect)((()=>{r(pb())}),[r]);(0,t.useEffect)((()=>{var e;0===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.length)&&(null===o||void 0===o?void 0:o.currentPage)>1&&(i("?page=".concat((null===o||void 0===o?void 0:o.currentPage)-1)),r(pb({page:o.currentPage-1,size:o.pageSize})))}),[o,r,i]);return(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)("div",{className:"relative overflow-x-auto rounded-lg",children:(0,Va.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[(0,Va.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"No"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"Name"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Start price"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Bid step"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Category"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Start date"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"End date"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Status"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Screator"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Selling"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Soldout"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Images"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),(0,Va.jsx)("tbody",{children:(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.length)>0&&(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.map(((e,t)=>(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:(o.currentPage-1)*o.pageSize+t+1}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.item_name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.bid_step}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.category.category_name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.start_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.end_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:(0,Va.jsx)("p",{onClick:()=>{return t=e.item_id,void(a?Yg().fire({title:"Are you sure?",text:"Do you want to update this category status?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Update"}).then((async e=>{if(e.isConfirmed)try{const e=await Pg.put("auction/status/".concat(t),{authRequired:!0});0===e.code?(Jt.success(e.message),await r(pb({page:o.currentPage,size:o.pageSize}))):Jt.error("Error: Unable to delete the category!")}catch(n){console.log(n),Jt.error("Something went wrong!")}})):c());var t},className:"".concat(e.status?"text-green":"text-red-600"," cursor-pointer"),children:e.status?(0,Va.jsx)(Fg,{size:22}):(0,Va.jsx)(Hg,{size:22})})}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.user.name}),(0,Va.jsx)("td",{onClick:()=>{return t=e.item_id,void(a?Yg().fire({title:"Are you sure?",text:"Do you want to update this category status?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Update"}).then((async e=>{if(e.isConfirmed)try{const e=await Pg.put("auction/issell/".concat(t),{authRequired:!0});e?(Jt.success(e.message),await r(pb({page:o.currentPage,size:o.pageSize}))):Jt.error("Error: Unable to delete the category!")}catch(n){console.log(n),Jt.error("Something went wrong!")}})):c());var t},className:"".concat(e.sell?"text-green":"text-red-600"," px-6 py-4 cursor-pointer"),children:e.sell?(0,Va.jsx)(Fg,{size:22}):(0,Va.jsx)(Hg,{size:22})}),(0,Va.jsx)("td",{className:"px-6 py-4",children:(0,Va.jsx)("div",{className:"flex items-center",children:(0,Va.jsx)("p",{className:"".concat(e.soldout?"text-green":"text-red-600"," px-6 py-4"),children:e.soldout?"Success":"NOT YET"})})}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.images.map(((e,t)=>(0,Va.jsx)("img",{className:"w-10 h-10",src:e,alt:"Jeseimage"},t)))}),(0,Va.jsxs)("td",{className:"px-6 py-4 text-center flex items-center gap-3 mt-1",children:[(0,Va.jsx)(mt,{to:"#",type:"button",className:"font-medium text-indigo-500",children:(0,Va.jsx)(Dg,{size:25})}),(0,Va.jsx)(mt,{to:"/product/update/".concat(e.item_id),type:"button",className:"font-medium text-green",children:(0,Va.jsx)($_,{size:25})})]})]},e.item_id))))})]})}),(0,Va.jsx)("div",{className:"mt-8 flex justify-end",children:(0,Va.jsx)(rE,{listItem:o,to:"/product/admin",methodCallApi:pb})})]})},Rb=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"shadow-s1 p-8 rounded-lg",children:[(0,Va.jsx)("div",{className:"flex justify-between",children:(0,Va.jsx)(oE,{level:5,className:" font-normal",children:"Product Lists"})}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsx)(Tb,{})]})}),Ib=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"bg-white shadow-s1 p-8 rounded-xl",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal mb-5",children:"Update Product"}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsx)("div",{className:"create-product",children:(0,Va.jsxs)("form",{children:[(0,Va.jsxs)("div",{className:"w-full",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Commission *"}),(0,Va.jsx)("input",{type:"number",name:"commission",className:"".concat(fE)})]}),(0,Va.jsx)(uE,{type:"submit",className:"rounded-none my-5",children:"Update"})]})})]})});function xb(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11 19V22H13V19H14C16.2091 19 18 17.2091 18 15C18 12.7909 16.2091 11 14 11H13V7H15V9H17V5H13V2H11V5H10C7.79086 5 6 6.79086 6 9C6 11.2091 7.79086 13 10 13H11V17H9V15H7V19H11ZM13 17H14C15.1046 17 16 16.1046 16 15C16 13.8954 15.1046 13 14 13H13V17ZM11 11V7H10C8.89543 7 8 7.89543 8 9C8 10.1046 8.89543 11 10 11H11Z",fill:"currentColor"},child:[]}]})(e)}function Ob(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 19C8.13401 19 5 15.866 5 12C5 8.13401 8.13401 5 12 5C15.866 5 19 8.13401 19 12C19 15.866 15.866 19 12 19ZM3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12ZM9 16V8H13C14.6569 8 16 9.34315 16 11C16 12.6569 14.6569 14 13 14H11V16H9ZM14 11C14 11.5523 13.5523 12 13 12H11V10H13C13.5523 10 14 10.4477 14 11Z",fill:"currentColor"},child:[]}]})(e)}const Nb=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{children:(0,Va.jsxs)("div",{className:"shadow-s1 p-8 rounded-lg  mb-12",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal",children:"Commission Income"}),(0,Va.jsxs)("div",{className:"shadow-s3 py-16 my-16 border border-green bg-green_100 p-8 flex items-center text-center justify-center gap-5 flex-col rounded-xl",children:[(0,Va.jsx)(xb,{size:80,className:"text-green"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:1,children:"$500"}),(0,Va.jsx)(oE,{children:"Total Income"})]})]})]})})}),Db=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1);return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"bg-white shadow-s1 p-8 rounded-xl",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal mb-5",children:"Create Category"}),(0,Va.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=e,r=await Pg.post("category",t,{authRequired:!0});0===r.code&&(Jt.success(r.message),n(""))}catch(r){Jt.error(r.response.data.message)}},children:[(0,Va.jsxs)("div",{className:"w-full my-8",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Title *"}),(0,Va.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),className:"".concat(fE),placeholder:"Title",required:!0})]}),r&&(0,Va.jsx)(uE,{type:"submit",className:"rounded-none my-5",children:"CREATE"})]})]})})},kb=()=>{const{id:e}=fe(),[n,r]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:i}=X_(),[o,s]=(0,t.useState)({category_id:"",category_name:""});console.log(n);(0,t.useEffect)((()=>{n?(async()=>{try{const t=await Pg.get("category/".concat(e),{authRequired:!0});s(t)}catch(t){console.log(t)}})():i()}),[e]);return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"bg-white shadow-s1 p-8 rounded-xl",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal mb-5",children:"Update Category"}),(0,Va.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const{name:t,value:n}=e.target;s(u(u({},o),{},{[t]:n}));try{const e=await Pg.post("category",o,{authRequired:!0});0===e.code&&(Jt.success(e.message),s({category_id:"",category_name:""}))}catch(r){Jt.error(r.response.data.message)}},children:[(0,Va.jsxs)("div",{className:"w-full my-8",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Title *"}),(0,Va.jsx)("input",{type:"text",name:"title",hidden:!0,value:o.category_id,onChange:e=>s(e.target.value),className:"".concat(fE)}),(0,Va.jsx)("input",{type:"text",name:"title",value:o.category_name,onChange:e=>s(e.target.value),className:"".concat(fE)})]}),(0,Va.jsx)(uE,{type:"submit",className:"rounded-none my-5",children:"Update"})]})]})})},Pb=()=>{var e,n;const r=vv(),i=pe(),{categories:o}=ov((e=>e.product)),[s,a]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:c}=X_();(0,t.useEffect)((()=>{r(gb())}),[r]);return(0,t.useEffect)((()=>{var e;0===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.length)&&(null===o||void 0===o?void 0:o.currentPage)>1&&(i("?page=".concat((null===o||void 0===o?void 0:o.currentPage)-1)),r(gb({page:o.currentPage-1,size:o.pageSize})))}),[o,r,i]),(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"shadow-s1 p-8 rounded-lg",children:[(0,Va.jsxs)("div",{className:"flex justify-between",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal",children:"Category Lists"}),(0,Va.jsx)(mt,{to:"/category/create",children:(0,Va.jsxs)(uE,{className:"flex items-center gap-3 px-5 py-2 text-sm rounded-md transition-transform hover:scale-105",children:[(0,Va.jsx)(OE,{size:20}),(0,Va.jsx)("span",{children:"Create Category"})]})})]}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsx)("div",{className:"relative overflow-x-auto rounded-lg",children:(0,Va.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[(0,Va.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"S.N"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"Name"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3 flex justify-end",children:"Action"})]})}),(0,Va.jsx)("tbody",{children:(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.length)&&(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.map(((e,t)=>(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:((null===o||void 0===o?void 0:o.currentPage)-1)*(null===o||void 0===o?void 0:o.pageSize)+t+1}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.category_name}),(0,Va.jsxs)("td",{className:"px-6 py-4 text-center flex items-center justify-end gap-3 mt-1",children:[(0,Va.jsx)(mt,{to:"#",type:"button",className:"font-medium text-indigo-500",children:(0,Va.jsx)(Dg,{size:25})}),(0,Va.jsx)(mt,{to:"/category/update/".concat(e.category_id),className:"font-medium text-green",children:(0,Va.jsx)($_,{size:25})})]})]},e.category_id))))})]})}),(0,Va.jsx)("div",{className:"mt-8 flex justify-end",children:(0,Va.jsx)(rE,{listItem:o,to:"/category",methodCallApi:gb})})]})})};var Lb=n(2506),Mb=n.n(Lb);class jb{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map((e=>"v".concat(e.replace(".",""),".stomp")))}}jb.V1_0="1.0",jb.V1_1="1.1",jb.V1_2="1.2",jb.default=new jb([jb.V1_2,jb.V1_1,jb.V1_0]);const Ub="\n",Bb="\0";class Fb{constructor(e){const{command:t,headers:n,body:r,binaryBody:i,escapeHeaderValues:o,skipContentLengthHeader:s}=e;this.command=t,this.headers=Object.assign({},n||{}),i?(this._binaryBody=i,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=s||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body||""}get binaryBody(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}static fromRawFrame(e,t){const n={},r=e=>e.replace(/^\s+|\s+$/g,"");for(const i of e.headers.reverse()){i.indexOf(":");const o=r(i[0]);let s=r(i[1]);t&&"CONNECT"!==e.command&&"CONNECTED"!==e.command&&(s=Fb.hdrValueUnEscape(s)),n[o]=s}return new Fb({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?Fb.toUnit8Array(e,this._binaryBody).buffer:e+this._body+Bb}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const n=this.headers[t];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?e.push("".concat(t,":").concat(Fb.hdrValueEscape("".concat(n)))):e.push("".concat(t,":").concat(n))}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push("content-length:".concat(this.bodyLength())),e.join(Ub)+Ub+Ub}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?(new TextEncoder).encode(e).length:0}static toUnit8Array(e,t){const n=(new TextEncoder).encode(e),r=new Uint8Array([0]),i=new Uint8Array(n.length+t.length+r.length);return i.set(n),i.set(t,n.length),i.set(r,n.length+t.length),i}static marshall(e){return new Fb(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}class Vb{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t="string"===typeof e?this._encoder.encode(e):new Uint8Array(e),n&&0!==t[t.length-1]){const e=new Uint8Array(t.length+1);e.set(t,0),e[t.length]=0,t=e}for(let r=0;r<t.length;r++){const e=t[r];this._onByte(e)}}_collectFrame(e){0!==e&&13!==e&&(10!==e?(this._onByte=this._collectCommand,this._reinjectByte(e)):this.onIncomingPing())}_collectCommand(e){if(13!==e)return 10===e?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_collectHeaders(e){13!==e&&(10!==e?(this._onByte=this._collectHeaderKey,this._reinjectByte(e)):this._setupCollectBody())}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(58===e)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(e)}_collectHeaderValue(e){if(13!==e)return 10===e?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_setupCollectBody(){const e=this._results.headers.filter((e=>"content-length"===e[0]))[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){0!==e?this._consumeByte(e):this._retrievedBody()}_collectBodyFixedSize(e){0!==this._bodyBytesRemaining--?this._consumeByte(e):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(eU){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",eU)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Wb,Hb;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(Wb=Wb||(Wb={})),function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"}(Hb=Hb||(Hb={}));class zb{constructor(e,t,n){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:e=>{this.debug("connected to server ".concat(e.headers.server)),this._connected=!0,this._connectedVersion=e.headers.version,this._connectedVersion===jb.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(e.headers),this.onConnect(e)},MESSAGE:e=>{const t=e.headers.subscription,n=this._subscriptions[t]||this.onUnhandledMessage,r=e,i=this,o=this._connectedVersion===jb.V1_2?r.headers.ack:r.headers["message-id"];r.ack=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.ack(o,t,e)},r.nack=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.nack(o,t,e)},n(r)},RECEIPT:e=>{const t=this._receiptWatchers[e.headers["receipt-id"]];t?(t(e),delete this._receiptWatchers[e.headers["receipt-id"]]):this.onUnhandledReceipt(e)},ERROR:e=>{this.onStompError(e)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){const e=new Vb((e=>{const t=Fb.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug("<<< ".concat(t));(this._serverFrameHandlers[t.command]||this.onUnhandledFrame)(t)}),(()=>{this.debug("<<< PONG")}));this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const e=t.data instanceof ArrayBuffer?(new TextDecoder).decode(t.data):t.data;this.debug("<<< ".concat(e))}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=e=>{this.debug("Connection closed to ".concat(this._webSocket.url)),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(e){if(e.version!==jb.V1_1&&e.version!==jb.V1_2)return;if(!e["heart-beat"])return;const[t,n]=e["heart-beat"].split(",").map((e=>parseInt(e,10)));if(0!==this.heartbeatOutgoing&&0!==n){const e=Math.max(this.heartbeatOutgoing,n);this.debug("send PING every ".concat(e,"ms")),this._pinger=setInterval((()=>{this._webSocket.readyState===Wb.OPEN&&(this._webSocket.send(Ub),this.debug(">>> PING"))}),e)}if(0!==this.heartbeatIncoming&&0!==t){const e=Math.max(this.heartbeatIncoming,t);this.debug("check PONG every ".concat(e,"ms")),this._ponger=setInterval((()=>{const t=Date.now()-this._lastServerActivityTS;t>2*e&&(this.debug("did not receive server activity for the last ".concat(t,"ms")),this._closeOrDiscardWebsocket())}),e)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState!==Wb.CONNECTING&&this._webSocket.readyState!==Wb.OPEN||this._closeOrDiscardWebsocket())}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){var e,t;"function"!==typeof this._webSocket.terminate&&(e=this._webSocket,t=e=>this.debug(e),e.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const r=new Date,i=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=e=>{const n=(new Date).getTime()-r.getTime();t("Discarded socket (#".concat(i,")  closed after ").concat(n,"ms, with code/reason: ").concat(e.code,"/").concat(e.reason))},this.close(),null===o||void 0===o||o.call(e,{code:4001,reason:"Quick discarding socket (#".concat(i,") without waiting for the shutdown sequence."),wasClean:!1})}),this._webSocket.terminate()}_transmit(e){const{command:t,headers:n,body:r,binaryBody:i,skipContentLengthHeader:o}=e,s=new Fb({command:t,headers:n,body:r,binaryBody:i,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let a=s.serialize();if(this.logRawCommunication?this.debug(">>> ".concat(a)):this.debug(">>> ".concat(s)),this.forceBinaryWSFrames&&"string"===typeof a&&(a=(new TextEncoder).encode(a)),"string"===typeof a&&this.splitLargeFrames){let e=a;for(;e.length>0;){const t=e.substring(0,this.maxWebSocketChunkSize);e=e.substring(this.maxWebSocketChunkSize),this._webSocket.send(t),this.debug("chunk sent = ".concat(t.length,", remaining = ").concat(e.length))}}else this._webSocket.send(a)}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt="close-".concat(this._counter++)),this.watchForReceipt(e.receipt,(e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)})),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug("Ignoring error during disconnect ".concat(e))}else this._webSocket.readyState!==Wb.CONNECTING&&this._webSocket.readyState!==Wb.OPEN||this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:t,headers:n,body:r,binaryBody:i,skipContentLengthHeader:o}=e,s=Object.assign({destination:t},n);this._transmit({command:"SEND",headers:s,body:r,binaryBody:i,skipContentLengthHeader:o})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({},n),n.id||(n.id="sub-".concat(this._counter++)),n.destination=e,this._subscriptions[n.id]=t,this._transmit({command:"SUBSCRIBE",headers:n});const r=this;return{id:n.id,unsubscribe:e=>r.unsubscribe(n.id,e)}}unsubscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||"tx-".concat(this._counter++);this._transmit({command:"BEGIN",headers:{transaction:t}});const n=this;return{id:t,commit(){n.commit(t)},abort(){n.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({},n),this._connectedVersion===jb.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"ACK",headers:n})}nack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=Object.assign({},n),this._connectedVersion===jb.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"NACK",headers:n})}}class Gb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stompVersions=jb.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Hb.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}get webSocket(){var e;return null===(e=this._stompHandler)||void 0===e?void 0:e._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Hb.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}configure(e){Object.assign(this,e)}activate(){const e=()=>{this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(Hb.ACTIVE),this._connect())};this.state===Hb.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then((()=>{e()}))):e()}async _connect(){if(await this.beforeConnect(),this._stompHandler)return void this.debug("There is already a stompHandler, skipping the call to connect");if(!this.active)return void this.debug("Client has been marked inactive, will not attempt to connect");this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout((()=>{this.connected||(this.debug("Connection not established in ".concat(this.connectionTimeout,"ms, closing socket")),this.forceDisconnect())}),this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new zb(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active)return this.debug("STOMP got connected while deactivate was issued, will disconnect now"),void this._disposeStompHandler();this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===Hb.DEACTIVATING&&this._changeState(Hb.INACTIVE),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else{if(!this.brokerURL)throw new Error("Either brokerURL or webSocketFactory must be provided");e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())}return e.binaryType="arraybuffer",e}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug("STOMP: scheduling reconnection in ".concat(this.reconnectDelay,"ms")),this._reconnector=setTimeout((()=>{this._connect()}),this.reconnectDelay))}async deactivate(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).force||!1,t=this.active;let n;if(this.state===Hb.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Hb.DEACTIVATING),this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),!this._stompHandler||this.webSocket.readyState===Wb.CLOSED)return this._changeState(Hb.INACTIVE),Promise.resolve();{const e=this._stompHandler.onWebSocketClose;n=new Promise(((t,n)=>{this._stompHandler.onWebSocketClose=n=>{e(n),t()}}))}var r;e?null===(r=this._stompHandler)||void 0===r||r.discardWebsocket():t&&this._disposeStompHandler();return n}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._checkConnection(),this._stompHandler.subscribe(e,t,n)}unsubscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkConnection(),this._stompHandler.ack(e,t,n)}nack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkConnection(),this._stompHandler.nack(e,t,n)}}class Yb{constructor(e){this.client=e}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(e){this.client.heartbeatOutgoing=e}get incoming(){return this.client.heartbeatIncoming}set incoming(e){this.client.heartbeatIncoming=e}}class Kb extends Gb{constructor(e){super(),this.maxWebSocketFrameSize=16384,this._heartbeatInfo=new Yb(this),this.reconnect_delay=0,this.webSocketFactory=e,this.debug=function(){console.log(...arguments)}}_parseConnect(){let e,t,n,r={};for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(o.length<2)throw new Error("Connect requires at least 2 arguments");if("function"===typeof o[1])[r,t,n,e]=o;else if(6===o.length)[r.login,r.passcode,t,n,e,r.host]=o;else[r.login,r.passcode,t,n,e]=o;return[r,t,n,e]}connect(){const e=this._parseConnect(...arguments);e[0]&&(this.connectHeaders=e[0]),e[1]&&(this.onConnect=e[1]),e[2]&&(this.onStompError=e[2]),e[3]&&(this.onWebSocketClose=e[3]),super.activate()}disconnect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(this.onDisconnect=e),this.disconnectHeaders=t,super.deactivate()}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t=Object.assign({},t);const r=!1===t["content-length"];r&&delete t["content-length"],this.publish({destination:e,headers:t,body:n,skipContentLengthHeader:r})}set reconnect_delay(e){this.reconnectDelay=e}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(e){this.onUnhandledMessage=e}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(e){this.onUnhandledReceipt=e}get heartbeat(){return this._heartbeatInfo}set heartbeat(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing}}class qb{static client(e,t){null==t&&(t=jb.default.protocolVersions());return new Kb((()=>new(qb.WebSocketClass||WebSocket)(e,t)))}static over(e){let t;return"function"===typeof e?t=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),t=()=>e),new Kb(t)}}qb.WebSocketClass=null;const Xb=()=>{var e,n;const r=pe(),{id:i}=fe(),o=vv(),[s,a]=(0,t.useState)(null),[c,l]=(0,t.useState)(!1),[d,u]=(0,t.useState)({}),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(null),[y,_]=(0,t.useState)(!1),[E]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:b}=X_(),[w,S]=(0,t.useState)(""),[A,C]=(0,t.useState)(0),[T,R]=(0,t.useState)(null),[I,x]=(0,t.useState)([]),[O,N]=(0,t.useState)(""),[D,k]=(0,t.useState)("description"),[P,L]=(0,t.useState)(!1),M=async e=>{if(e){const t=await(async e=>{try{return(await xi.get("https://be-pjhk4.onrender.com/api/favorites/get-comments/".concat(e))).data}catch(t){return console.error("\u274c L\u1ed7i khi l\u1ea5y danh s\xe1ch b\xecnh lu\u1eadn:",t),[]}})(e);x(t||[])}};(0,t.useEffect)((()=>{"reviews"===D&&d.seller_id&&M(d.seller_id)}),[D,d.seller_id]);const j=e=>{k(e)};(0,t.useEffect)((()=>{(async()=>{if(s&&d.buyerId){const e=await(async(e,t)=>{try{return(await xi.get("https://be-pjhk4.onrender.com/api/favorites/is-following",{params:{userId:e,auctioneerId:t},headers:{Authorization:"Bearer "+localStorage.getItem("token")}})).data}catch(n){return console.error("L\u1ed7i khi ki\u1ec3m tra follow:",n),!1}})(s,d.buyerId);console.log("\ud83d\ude80 Tr\u1ea1ng th\xe1i follow t\u1eeb API:",e),L(e)}})()}),[s,d.buyerId]);const[U,B]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{console.log("goi laij");try{const e=await Pg.get("auction/".concat(i),{authRequired:!0});if(0===e.code){const t={item_id:e.result.item_id,item_name:e.result.item_name,description:e.result.description,starting_price:e.result.starting_price,start_date:e.result.start_date,end_date:e.result.end_date,bid_step:e.result.bid_step,buyerId:e.result.user.id,isSell:e.result.sell,isSoldOut:e.result.soldout,sellerName:e.result.user.name,seller_id:e.result.user.id};B(e.result.soldout),p(e.result.images),u(t)}}catch(e){console.log(e)}})()}),[i]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);a(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]),(0,t.useEffect)((()=>{if(null!==d&&void 0!==d&&d.end_date){const e=()=>Q_(null===d||void 0===d?void 0:d.start_date,m,_);e();const t=setInterval(e,1e3);return()=>clearInterval(t)}}),[null===d||void 0===d?void 0:d.start_date]),(0,t.useEffect)((()=>{if(null!==d&&void 0!==d&&d.end_date){const e=()=>Q_(null===d||void 0===d?void 0:d.end_date,v,_);e();const t=setInterval(e,1e3);return()=>clearInterval(t)}}),[null===d||void 0===d?void 0:d.end_date]),(0,t.useEffect)((()=>{(async()=>{try{const e=await Pg.get("bidding/"+i);C(e)}catch(e){console.log(e)}})()}),[i]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token"),t=qb.over((()=>new(Mb())("https://be-pjhk4.onrender.com/ws",null,{withCredentials:!0})));return t.connect({Authorization:"Bearer ".concat(e)},(()=>{t.subscribe("/topic/newbidding",(e=>{const t=JSON.parse(e.body);C(t)}))}),(e=>{console.error("WebSocket connection error:",e)})),R(t),()=>{t.connected&&t.disconnect((()=>{console.log("Disconnected from WebSocket")}))}}),[]);(0,t.useEffect)((()=>{(async()=>{y&&await Pg.put("auction/issell/".concat(i))})()}),[i,y]);(0,t.useEffect)((()=>{s!==d.buyerId&&!0===d.isSell&&!1===d.isSoldOut&&l(!0)}),[i,d]);return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("section",{className:"pt-24 px-8",children:(0,Va.jsxs)(dE,{children:[(0,Va.jsxs)("div",{className:"flex justify-between gap-8",children:[(0,Va.jsx)("div",{className:"w-1/2",children:(0,Va.jsx)("div",{className:"h-[70vh]",children:(0,Va.jsx)("img",{src:h[0],alt:"",className:"w-full h-full object-cover rounded-xl"})})}),(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Va.jsxs)("div",{className:"flex items-center",children:[(0,Va.jsx)(oE,{level:2,className:"capitalize",children:d.item_name}),U&&(0,Va.jsx)("div",{children:(0,Va.jsx)("p",{className:"text-red-700 font-bold",children:"soldout*"})})]}),(0,Va.jsxs)("p",{className:"ml-4 text-gray-600",children:["\ud83d\udc64 Seller: ",(0,Va.jsx)("span",{className:"font-bold",children:d.sellerName})]}),(0,Va.jsx)("button",{className:"follow-btn ".concat(P?"active":""),onClick:P?async()=>{try{console.log("\ud83d\udccc B\u1eaft \u0111\u1ea7u h\u1ee7y follow:",s,d.buyerId);await $E(s,d.buyerId)&&(L(!1),alert("B\u1ea1n \u0111\xe3 h\u1ee7y theo d\xf5i ng\u01b0\u1eddi b\xe1n!"))}catch(e){console.error("\u274c L\u1ed7i khi unfollow:",e)}}:async()=>{if(s)try{console.log("\ud83d\udccc G\u1eedi request follow:",s,d.buyerId);const e=await(async(e,t)=>{console.log("\ud83d\udccc G\u1eedi request follow:",{userId:e,auctioneerId:t});try{return(await xi.post("https://be-pjhk4.onrender.com/api/favorites/follow-auctioneer",{userId:e,auctioneerId:t})).data}catch(n){throw console.error("\u274c L\u1ed7i khi follow:",n),n}})(s,d.buyerId);e&&(L(!0),alert("B\u1ea1n \u0111\xe3 follow ng\u01b0\u1eddi b\xe1n!"))}catch(e){console.error("\u274c L\u1ed7i khi follow:",e)}else alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 follow ng\u01b0\u1eddi b\xe1n!")},children:P?"\u274c Unfollow":"\u2795 Follow seller"})]}),(0,Va.jsx)("div",{className:"flex gap-5"}),(0,Va.jsx)("br",{}),(0,Va.jsx)(sE,{children:"Korem ipsum dolor amet, consectetur adipiscing elit. Maece nas in pulvinar neque. Nulla finibus lobortis pulvinar. Donec a consectetur nulla."}),(0,Va.jsx)("br",{}),(0,Va.jsx)(aE,{children:"Item condition: New"}),(0,Va.jsx)("br",{}),(0,Va.jsx)(aE,{children:"Item Verifed: Yes"}),(0,Va.jsx)("br",{}),(0,Va.jsxs)(aE,{children:[null!==f?"Upcoming":"Opening",":"]}),(0,Va.jsx)("br",{}),(0,Va.jsxs)("div",{className:"flex gap-8 text-center",children:[null!==f&&(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===f||void 0===f?void 0:f.days)||0}),(0,Va.jsx)(aE,{children:"Days"})]}),(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===f||void 0===f?void 0:f.hours)||0}),(0,Va.jsx)(aE,{children:"Hours"})]}),(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===f||void 0===f?void 0:f.minutes)||0}),(0,Va.jsx)(aE,{children:"Minutes"})]}),(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===f||void 0===f?void 0:f.seconds)||0}),(0,Va.jsx)(aE,{children:"Seconds"})]})]}),null===f&&(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===g||void 0===g?void 0:g.days)||0}),(0,Va.jsx)(aE,{children:"Days"})]}),(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===g||void 0===g?void 0:g.hours)||0}),(0,Va.jsx)(aE,{children:"Hours"})]}),(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===g||void 0===g?void 0:g.minutes)||0}),(0,Va.jsx)(aE,{children:"Minutes"})]}),(0,Va.jsxs)("div",{className:"p-5 px-10 shadow-s1",children:[(0,Va.jsx)(oE,{level:4,children:(null===g||void 0===g?void 0:g.seconds)||0}),(0,Va.jsx)(aE,{children:"Seconds"})]})]})]}),(0,Va.jsx)("br",{}),(0,Va.jsxs)(oE,{className:"flex items-center gap-2",children:["Auction ends:",(0,Va.jsx)(aE,{children:"December 31, 2024 12:00 am"})]}),(0,Va.jsxs)(oE,{className:"flex items-center gap-2 my-5",children:["Timezone: ",(0,Va.jsx)(aE,{children:"UTC+7"})]}),(0,Va.jsxs)(oE,{className:"flex items-center gap-2 my-5",children:["Price:",(0,Va.jsxs)(aE,{children:["$",null===(e=d.starting_price)||void 0===e?void 0:e.toLocaleString("en-US")]})]}),(0,Va.jsxs)(oE,{className:"flex items-center gap-2 ".concat(U?"text-red-700":""),children:["Current bid:",(0,Va.jsxs)(aE,{className:"text-3xl",children:["  $",(null===(n=A.price)||void 0===n?void 0:n.toLocaleString("en-US"))||"0"]})]}),s!==d.buyerId&&!1===d.isSoldOut&&(0,Va.jsx)("div",{className:"w-[200px] h-[40px] bg-green border rounded-md flex justify-center items-center",children:(0,Va.jsx)("button",{onClick:()=>(async e=>{try{if(e&&s){const t=await Pg.post("chatroom/room/".concat(e),{buyerId:s},{authRequired:!0});console.log(t),null!=t&&r("/chat?item_id=".concat(e,"&buyerId=").concat(s),{state:{isCreate:!0,sellerName:null===t||void 0===t?void 0:t.sellerName,room:null===t||void 0===t?void 0:t.roomId}})}}catch(t){console.log(t)}})(d.item_id),type:"button",className:"font-medium text-white",children:"Chat now"})}),s===d.buyerId&&!U&&(0,Va.jsx)("div",{onClick:()=>(async e=>{if(E)try{Yg().fire({title:"Want to close the price?",text:"Click 'OK' to confirm, 'Cancel' to cancel",confirmButtonText:"Ok",cancelButtonText:"Cancel",showCancelButton:!0,customClass:{confirmButton:"swal-confirm-button"}}).then((async t=>{if(t.isConfirmed){const t=await o(_b({productId:e,sellerId:s}));console.log(t),_b.fulfilled.match(t)?(Jt.success("You have successfully closed the price!"),B(!0)):Jt.error("Closing price failed, please try again.")}else Jt.info("You have canceled the price.")}))}catch(t){console.log(t)}else b()})(null===d||void 0===d?void 0:d.item_id),className:"w-[200px] cursor-pointer h-[40px] bg-green border rounded-md flex justify-center items-center",children:(0,Va.jsx)("button",{className:"font-medium text-white",children:"This price"})}),c&&!1===d.isSoldOut&&(0,Va.jsx)("div",{div:!0,className:"p-5 px-10 shadow-s3 py-8",children:(0,Va.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=localStorage.getItem("token");if(w<=d.starting_price)Jt.error("Price must be greater than current price");else if(w<=A.price)Jt.error("Price must be greater than current price");else if(t||b(),T&&T.connected){const e={price:+w,productId:d.item_id,userId:s,seller:d.buyerId};T.send("/app/create",{Authorization:"Bearer ".concat(t)},JSON.stringify(e)),S("")}else console.error("WebSocket is not connected")},className:"flex gap-3 justify-between",children:[(0,Va.jsx)("input",{className:fE,value:w,onChange:e=>S(e.target.value),type:"number",name:"price"}),(0,Va.jsx)("button",{type:"submit",className:"py-3 px-8 rounded-lg ".concat("bg-gray-400 text-gray-700"),children:"Submit"})]})})]})]}),(0,Va.jsxs)("div",{className:"details mt-8",children:[(0,Va.jsxs)("div",{className:"flex items-center gap-5",children:[(0,Va.jsx)("button",{className:"tab-btn ".concat("description"===D?"active":""),onClick:()=>j("description"),children:"Description"}),(0,Va.jsx)("button",{className:"tab-btn ".concat("auctionHistory"===D?"active":""),onClick:()=>j("auctionHistory"),children:"Auction History"}),(0,Va.jsxs)("button",{className:"tab-btn ".concat("reviews"===D?"active":""),onClick:()=>j("reviews"),children:["Reviews (",I.length,")"]}),(0,Va.jsx)("button",{className:"tab-btn ".concat("moreProducts"===D?"active":""),onClick:()=>j("moreProducts"),children:"More Products"})]}),(0,Va.jsxs)("div",{className:"tab-content mt-8",children:["description"===D&&(0,Va.jsxs)("div",{className:"shadow-s3 p-8 rounded-md",children:[(0,Va.jsx)(oE,{level:4,children:"Description"}),(0,Va.jsx)("p",{children:d.description||"Kh\xf4ng c\xf3 m\xf4 t\u1ea3."})]}),"reviews"===D&&(0,Va.jsxs)("div",{className:"shadow-s3 p-8 rounded-md",children:[(0,Va.jsx)(oE,{level:5,children:"Reviews"}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsx)("div",{className:"comment-list",children:0===I.length?(0,Va.jsx)("p",{className:"text-gray-500",children:"Ch\u01b0a c\xf3 b\xecnh lu\u1eadn n\xe0o."}):I.map(((e,t)=>(0,Va.jsxs)("div",{className:"comment-item p-3 border-b",children:[(0,Va.jsx)("p",{className:"font-bold",children:e.userName}),(0,Va.jsx)("p",{children:e.content})]},t)))}),(0,Va.jsxs)("div",{className:"comment-form mt-5",children:[(0,Va.jsx)("textarea",{className:"w-full p-3 border rounded-md",rows:"3",placeholder:"Vi\u1ebft b\xecnh lu\u1eadn...",value:O,onChange:e=>N(e.target.value)}),(0,Va.jsx)("button",{className:"btn-primary mt-2",onClick:async()=>{if(!O.trim())return alert("Vui l\xf2ng nh\u1eadp n\u1ed9i dung b\xecnh lu\u1eadn!");const e=d.seller_id;if(console.log("\ud83d\udd11 G\u1eedi b\xecnh lu\u1eadn v\u1edbi d\u1eef li\u1ec7u:",{userId:s,auctioneerId:e,content:O}),!e)return console.error("\u274c auctioneerId kh\xf4ng h\u1ee3p l\u1ec7"),void alert("auctioneerId kh\xf4ng h\u1ee3p l\u1ec7");const t=await(async(e,t,n)=>{const r=localStorage.getItem("token");if(!r)return console.error("\u274c Ch\u01b0a c\xf3 token, y\xeau c\u1ea7u \u0111\u0103ng nh\u1eadp!"),null;console.log("\ud83d\udd11 G\u1eedi b\xecnh lu\u1eadn v\u1edbi d\u1eef li\u1ec7u:",{userId:e,auctioneerId:t,content:n});try{return(await xi.post("https://be-pjhk4.onrender.com/api/favorites/add-comment",{userId:e,auctioneerId:t,content:n},{headers:{Authorization:"Bearer ".concat(r)}})).data}catch(i){return console.error("\u274c L\u1ed7i khi g\u1eedi b\xecnh lu\u1eadn:",i),null}})(s,e,O);t&&(x([...I,{userName:"B\u1ea1n",content:O}]),N(""))},children:"G\u1eedi B\xecnh Lu\u1eadn"})]})]}),"moreProducts"===D&&(0,Va.jsx)("div",{className:"shadow-s3 p-8 rounded-md",children:(0,Va.jsx)("h1",{children:"More Products"})})]}),(0,Va.jsx)("style",{children:"\n          .tab-btn {\n            padding: 10px 20px;\n            border: none;\n            cursor: pointer;\n            border-radius: 5px;\n            margin-right: 10px;\n            background-color: #f0f0f0;\n          }\n          .tab-btn.active {\n            background-color: green;\n            color: white;\n          }\n          .comment-item {\n            border-bottom: 1px solid #ddd;\n            padding-bottom: 10px;\n          }\n          .btn-primary {\n            background-color: green;\n            color: white;\n            border: none;\n            padding: 10px 15px;\n            cursor: pointer;\n            border-radius: 5px;\n          }\n          .btn-primary:hover {\n            background-color: darkgreen;\n          }\n        "})]})]})})})},Jb=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"shadow-s1 p-8 rounded-lg",children:[(0,Va.jsxs)("div",{className:"flex justify-between",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal",children:"Product Lists"}),(0,Va.jsx)(mt,{to:"/create-product",children:(0,Va.jsxs)(uE,{className:"flex items-center gap-3 px-5 py-2 text-sm rounded-md transition-transform hover:scale-105",children:[(0,Va.jsx)(OE,{size:20}),(0,Va.jsx)("span",{children:"Create Product"})]})})]}),(0,Va.jsx)("hr",{className:"my-5"})]})}),Qb=(e,t)=>{let n=0;const r=Object.entries(e);for(let i of r){const e="string"===typeof i[1]?i[1].trim():i[1];e&&""!==e||(n++,t((e=>[...e,{name:i[0],message:"This fields is invalid"}])))}for(let i of r)switch(i[0]){case"start_date":const e=i[1];new Date(e);break;case"end_date":const o=i[1],s=(new Date(o),r.find((e=>"start_date"===e[0])));s&&new Date(s[1]);break;case"starting_price":i[1]<=0&&(n++,t((e=>[...e,{name:i[0],message:"Starting price must be greater than 0"}])))}return n},Zb=()=>{const{id:e}=fe(),n=pe(),r=vv(),[i,o]=(0,t.useState)({}),[s,a]=(0,t.useState)(null),[c,l]=(0,t.useState)([]),[d,h]=(0,t.useState)([]),[p,f]=(0,t.useState)(!1),[m]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:g}=X_();(0,t.useEffect)((()=>{(async()=>{if(m)try{const t=await Pg.get("auction/".concat(e),{authRequired:!0});if(0===t.code&&t.result.item_id!==i.item_id){const e={item_id:t.result.item_id,item_name:t.result.item_name,description:t.result.description,starting_price:t.result.starting_price,start_date:t.result.start_date,end_date:t.result.end_date,bid_step:t.result.bid_step};l(t.result.images),o(e)}}catch(t){console.log(t)}else g()})()}),[e,r,n,g,m]);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);a(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]);return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"bg-white shadow-s1 p-8 rounded-xl",children:[(0,Va.jsx)(oE,{level:5,className:" font-normal mb-5",children:"Update Product"}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=Qb(i,h),n=new FormData;if(n.append("item_id",i.item_id),n.append("item_name",i.item_name),n.append("description",i.description),n.append("starting_price",i.starting_price),n.append("start_date",i.start_date),n.append("end_date",i.end_date),n.append("bid_step",i.bid_step),n.append("userId",s),c.length>0){for(let e=0;e<c.length;e++)n.append("images",c[e]);f(!1)}else f(!0);0===t&&s&&c.length>0&&(r(hb(n)),l([]),o({item_id:"",item_name:"",description:"",starting_price:"",start_date:"",end_date:"",bid_step:""}))},encType:"multipart/form-data",children:[(0,Va.jsx)("input",{type:"text",name:"item_id",hidden:!0,value:i.item_id,className:"".concat(fE)}),(0,Va.jsxs)("div",{className:"w-full",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Name *"}),(0,Va.jsx)("input",{type:"text",name:"item_name",value:i.item_name,onChange:e=>{o((t=>u(u({},t),{},{item_name:e.target.value})))},className:"".concat(fE)}),(null===d||void 0===d?void 0:d.some((e=>"item_name"===e.name)))&&""===i.item_name&&(0,Va.jsx)("small",{style:{color:"red"},children:null===d||void 0===d?void 0:d.find((e=>"item_name"===e.name)).message})]}),(0,Va.jsxs)("div",{className:"flex items-center gap-5 my-4",children:[(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Start price "}),(0,Va.jsx)("input",{type:"number",name:"starting_price",value:i.starting_price,onChange:e=>{o((t=>u(u({},t),{},{starting_price:e.target.value})))},className:"".concat(fE)}),(null===d||void 0===d?void 0:d.some((e=>"starting_price"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===d||void 0===d?void 0:d.find((e=>"starting_price"===e.name)).message})]}),(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Start date "}),(0,Va.jsx)("input",{onFocus:()=>h([]),type:"date",name:"start_date",value:null!==i&&void 0!==i&&i.start_date?__()(Array.isArray(i.start_date)?i.start_date.join("-"):i.start_date,"YYYY-MM-DD").format("YYYY-MM-DD"):"",onChange:e=>{o((t=>u(u({},t),{},{start_date:e.target.value})))},className:"".concat(fE)}),(null===d||void 0===d?void 0:d.some((e=>"start_date"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===d||void 0===d?void 0:d.find((e=>"start_date"===e.name)).message})]})]}),(0,Va.jsxs)("div",{className:"flex items-center gap-5 my-4",children:[(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Bid step"}),(0,Va.jsx)("input",{type:"number",name:"bid_step",value:i.bid_step,onChange:e=>{o((t=>u(u({},t),{},{bid_step:e.target.value})))},className:fE}),(null===d||void 0===d?void 0:d.some((e=>"bid_step"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===d||void 0===d?void 0:d.find((e=>"bid_step"===e.name)).message})]}),(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"End date "}),(0,Va.jsx)("input",{onFocus:()=>h([]),type:"date",name:"end_date",value:null!==i&&void 0!==i&&i.end_date?__()(Array.isArray(i.end_date)?i.end_date.join("-"):i.end_date,"YYYY-MM-DD").format("YYYY-MM-DD"):"",onChange:e=>{o((t=>u(u({},t),{},{end_date:e.target.value})))},className:"".concat(fE)}),(null===d||void 0===d?void 0:d.some((e=>"end_date"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===d||void 0===d?void 0:d.find((e=>"end_date"===e.name)).message})]})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Description *"}),(0,Va.jsx)("textarea",{name:"description",value:i.description,onChange:e=>{o((t=>u(u({},t),{},{description:e.target.value})))},className:"".concat(fE),cols:"30",rows:"5"}),(null===d||void 0===d?void 0:d.some((e=>"description"===e.name)))&&""===i.description&&(0,Va.jsx)("small",{style:{color:"red"},children:null===d||void 0===d?void 0:d.find((e=>"description"===e.name)).message})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Image "}),(0,Va.jsx)("input",{type:"file",multiple:"multiple",onChange:e=>{e.target.files&&e.target.files.length>0?l(Array.from(e.target.files)):l([])},className:"".concat(fE),name:"images"}),p&&(0,Va.jsx)("small",{style:{color:"red"},children:"This fields is invalid"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Current Image "}),(0,Va.jsx)("div",{className:"flex gap-2",children:Array.isArray(c)&&(null===c||void 0===c?void 0:c.map(((e,t)=>{const n=e instanceof File?URL.createObjectURL(e):e;return(0,Va.jsx)("img",{className:"w-10 h-10",src:n,alt:"Jeseimage"},t)})))})]}),m&&(0,Va.jsx)(uE,{type:"submit",className:"rounded-none my-5",children:"UPDATE"})]})]})})},$b={item_id:"",item_name:"",description:"",starting_price:"",category_id:"",start_date:"",end_date:""},ew=()=>{var e,n,r;const[i,o]=(0,t.useState)(null),[s,a]=(0,t.useState)($b),{item_name:c,description:l,starting_price:d,start_date:h,end_date:p}=s,[f,m]=(0,t.useState)([]),[g,v]=(0,t.useState)(null),[y,_]=(0,t.useState)([]),[E,b]=(0,t.useState)(!1),[w,S]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:A}=X_(),C=vv(),T=(0,t.useRef)(null),{categories:R}=ov((e=>e.product)),[I,x]=(0,t.useState)(""),[O,N]=(0,t.useState)(null),[D,k]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(R.data&&R.data.length>0){const e={label:R.data[0].category_name,value:R.data[0].category_id};v(e),a((t=>u(u({},t),{},{category_id:e.value})))}}),[R]);const P=e=>{const{name:t,value:n}=e.target;a(u(u({},s),{},{[t]:n})),"start_date"!==t&&"end_date"!==t||(_((e=>e.filter((e=>e.name!==t)))),x(""))};(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);o(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]);return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"bg-white shadow-s1 p-8 rounded-xl",children:[(0,Va.jsx)(oE,{level:5,className:"font-normal mb-5",children:"Create Product"}),(0,Va.jsx)("hr",{className:"my-5"}),(0,Va.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log("\ud83d\udd0d Submitting product data:",s);try{var t;const e=new FormData;if(e.append("item_name",s.item_name),e.append("category_id",s.category_id),e.append("description",s.description),e.append("start_date",s.start_date),e.append("end_date",s.end_date),e.append("starting_price",s.starting_price),e.append("userId",i),0===f.length)return void b(!0);b(!1);for(let t=0;t<f.length;t++)e.append("images",f[t]);if(o=p,!((r=h)&&o?new Date(r)>new Date(o)?(x("Start date cannot be after end date."),0):(x(""),1):(x("Start and end dates are required."),0)))return void x("Start date must be before End date.");O&&e.append("fileUploads",O);const n=await C(ub(e)).unwrap();null!==n&&void 0!==n&&null!==(t=n.message)&&void 0!==t&&t.toLowerCase().includes("successfully")?(console.log("\u2705 Auction item created successfully:",n),a($b),m([]),N(null),v(null),x(""),T.current&&(T.current.value="")):console.error("\u274c Failed to create auction item. Response:",n)}catch(c){var n;console.error("\u274c Error:",(null===(n=c.result)||void 0===n?void 0:n.data)||c.message)}var r,o},encType:"multipart/form-data",children:[(0,Va.jsxs)("div",{className:"w-full",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Name *"}),(0,Va.jsx)("input",{type:"text",name:"item_name",value:c,onChange:P,className:"".concat(fE),placeholder:"Name"}),(null===y||void 0===y?void 0:y.some((e=>"item_name"===e.name)))&&""===s.item_name&&(0,Va.jsx)("small",{style:{color:"red"},children:null===y||void 0===y?void 0:y.find((e=>"item_name"===e.name)).message})]}),(0,Va.jsxs)("div",{className:"py-5",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Category *"}),(0,Va.jsx)(jA,{value:g,options:null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.map((e=>({label:e.category_name,value:e.category_id}))),placeholder:"Select a category",handleCategoryChange:e=>{v(e),a(u(u({},s),{},{category_id:e.value}))},className:"".concat(fE)})]}),(0,Va.jsx)("div",{className:"flex items-center gap-5 my-4",children:(0,Va.jsxs)("div",{className:"w-full",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Start price "}),(0,Va.jsx)("input",{type:"number",name:"starting_price",value:d,onChange:P,placeholder:"Start price",className:"".concat(fE)}),(null===y||void 0===y?void 0:y.some((e=>"starting_price"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===y||void 0===y?void 0:y.find((e=>"starting_price"===e.name)).message})]})}),(0,Va.jsxs)("div",{className:"flex space-x-4",children:[(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Start date"}),(0,Va.jsx)("input",{onFocus:()=>_([]),type:"date",name:"start_date",value:h,onChange:P,placeholder:"Start date",className:"".concat(fE)}),(null===y||void 0===y?void 0:y.some((e=>"start_date"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===y||void 0===y||null===(n=y.find((e=>"start_date"===e.name)))||void 0===n?void 0:n.message})]}),(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"End date"}),(0,Va.jsx)("input",{onFocus:()=>_([]),type:"date",name:"end_date",value:p,onChange:P,placeholder:"End date",className:"".concat(fE)}),(null===y||void 0===y?void 0:y.some((e=>"end_date"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===y||void 0===y||null===(r=y.find((e=>"end_date"===e.name)))||void 0===r?void 0:r.message}),I&&(0,Va.jsx)("small",{style:{color:"red"},children:I})]})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Description *"}),(0,Va.jsx)("textarea",{name:"description",value:l,onChange:P,className:"".concat(fE),cols:"30",rows:"5"}),(null===y||void 0===y?void 0:y.some((e=>"description"===e.name)))&&""===s.description&&(0,Va.jsx)("small",{style:{color:"red"},children:null===y||void 0===y?void 0:y.find((e=>"description"===e.name)).message})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Image "}),(0,Va.jsx)("input",{type:"file",multiple:"multiple",onChange:e=>{e.target.files&&e.target.files.length>0?m(e.target.files):m([])},className:"".concat(fE),name:"images",ref:T}),E&&(0,Va.jsx)("small",{style:{color:"red"},children:"This field is invalid"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"PDF File (Optional)"}),(0,Va.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{N(e.target.files[0])},className:"".concat(fE)}),O&&(0,Va.jsxs)("small",{style:{color:"green"},children:["PDF selected: ",O.name]})]}),w&&(0,Va.jsx)(uE,{type:"submit",className:"rounded-none my-5",children:"CREATE"})]})]})})};n(6431);function tw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nw(e,t){if(e){if("string"==typeof e)return tw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tw(e,t):void 0}}function rw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||nw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var iw=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function sw(e){return sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sw(e)}function aw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aw=function(){return!!e})()}function cw(e){var t=aw();return function(){var n,r=sw(e);if(t){var i=sw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rd(e)}(this,n)}}function lw(e){return function(e){if(Array.isArray(e))return tw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const dw=Math.min,uw=Math.max,hw=Math.round,pw=Math.floor,fw=e=>({x:e,y:e});function mw(e){return u(u({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function gw(e){return _w(e)?(e.nodeName||"").toLowerCase():"#document"}function vw(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function yw(e){var t;return null==(t=(_w(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function _w(e){return e instanceof Node||e instanceof vw(e).Node}function Ew(e){return e instanceof Element||e instanceof vw(e).Element}function bw(e){return e instanceof HTMLElement||e instanceof vw(e).HTMLElement}function ww(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof vw(e).ShadowRoot)}function Sw(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Tw(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Aw(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Cw(e){return["html","body","#document"].includes(gw(e))}function Tw(e){return vw(e).getComputedStyle(e)}function Rw(e){if("html"===gw(e))return e;const t=e.assignedSlot||e.parentNode||ww(e)&&e.host||yw(e);return ww(t)?t.host:t}function Iw(e){const t=Rw(e);return Cw(t)?e.ownerDocument?e.ownerDocument.body:e.body:bw(t)&&Sw(t)?t:Iw(t)}function xw(e,t){var n;void 0===t&&(t=[]);const r=Iw(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=vw(r);return i?t.concat(o,o.visualViewport||[],Sw(r)?r:[]):t.concat(r,xw(r))}function Ow(e){const t=Tw(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=bw(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=hw(n)!==o||hw(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function Nw(e){return Ew(e)?e:e.contextElement}function Dw(e){const t=Nw(e);if(!bw(t))return fw(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Ow(t);let s=(o?hw(n.width):n.width)/r,a=(o?hw(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const kw=fw(0);function Pw(e){const t=vw(e);return Aw()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:kw}function Lw(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=Nw(e);let s=fw(1);t&&(r?Ew(r)&&(s=Dw(r)):s=Dw(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==vw(e))&&t}(o,n,r)?Pw(o):fw(0);let c=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,d=i.width/s.x,u=i.height/s.y;if(o){const e=vw(o),t=r&&Ew(r)?vw(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=Dw(n),t=n.getBoundingClientRect(),r=Tw(n),i=t.left+(n.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(n.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,d*=e.x,u*=e.y,c+=i,l+=o,n=vw(n).frameElement}}return mw({width:d,height:u,x:c,y:l})}function Mw(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:c=!1}=r,l=Nw(e),d=i||o?[...l?xw(l):[],...xw(t)]:[];d.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const h=l&&a?function(e,t){let n,r=null;const i=yw(e);function o(){clearTimeout(n),r&&r.disconnect(),r=null}return function s(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),o();const{left:l,top:d,width:h,height:p}=e.getBoundingClientRect();if(a||t(),!h||!p)return;const f={rootMargin:-pw(d)+"px "+-pw(i.clientWidth-(l+h))+"px "+-pw(i.clientHeight-(d+p))+"px "+-pw(l)+"px",threshold:uw(0,dw(1,c))||1};let m=!0;function g(e){const t=e[0].intersectionRatio;if(t!==c){if(!m)return s();t?s(!1,t):n=setTimeout((()=>{s(!1,1e-7)}),100)}m=!1}try{r=new IntersectionObserver(g,u(u({},f),{},{root:i.ownerDocument}))}catch(eU){r=new IntersectionObserver(g,f)}r.observe(e)}(!0),o}(l,n):null;let p,f=-1,m=null;s&&(m=new ResizeObserver((e=>{let[r]=e;r&&r.target===l&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{m&&m.observe(t)}))),n()})),l&&!c&&m.observe(l),m.observe(t));let g=c?Lw(e):null;return c&&function t(){const r=Lw(e);!g||r.x===g.x&&r.y===g.y&&r.width===g.width&&r.height===g.height||n();g=r,p=requestAnimationFrame(t)}(),n(),()=>{d.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),h&&h(),m&&m.disconnect(),m=null,c&&cancelAnimationFrame(p)}}const jw=t.useLayoutEffect;var Uw=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Bw=function(){};function Fw(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function Vw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&o.push("".concat(Fw(e,s)));return o.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var Ww=function(e){return function(e){return Array.isArray(e)}(e)?e.filter(Boolean):"object"===a(e)&&null!==e?[e]:[]},Hw=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,u({},s(e,Uw))},zw=function(e,t,n){var r=e.cx,i=e.getStyles,o=e.getClassNames,s=e.className;return{css:i(t,e),className:r(null!==n&&void 0!==n?n:{},o(t,e),s)}};function Gw(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Yw(e){return Gw(e)?window.pageYOffset:e.scrollTop}function Kw(e,t){Gw(e)?window.scrollTo(0,t):e.scrollTop=t}function qw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bw,i=Yw(e),o=t-i,s=0;!function t(){var a=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(s+=10,i,o,n);Kw(e,a),s<n?window.requestAnimationFrame(t):r(e)}()}function Xw(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?Kw(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&Kw(e,Math.max(t.offsetTop-i,0))}function Jw(){try{return document.createEvent("TouchEvent"),!0}catch(eU){return!1}}var Qw=!1,Zw={get passive(){return Qw=!0}},$w="undefined"!==typeof window?window:{};$w.addEventListener&&$w.removeEventListener&&($w.addEventListener("p",Bw,Zw),$w.removeEventListener("p",Bw,!1));var eS=Qw;function tS(e){return null!=e}function nS(e,t,n){return e?t:n}var rS=["children","innerProps"],iS=["children","innerProps"];function oS(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,o=e.shouldScroll,s=e.isFixedPosition,a=e.controlHeight,c=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),l={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return l;var d,u=c.getBoundingClientRect().height,h=n.getBoundingClientRect(),p=h.bottom,f=h.height,m=h.top,g=n.offsetParent.getBoundingClientRect().top,v=s?window.innerHeight:Gw(d=c)?window.innerHeight:d.clientHeight,y=Yw(c),_=parseInt(getComputedStyle(n).marginBottom,10),E=parseInt(getComputedStyle(n).marginTop,10),b=g-E,w=v-m,S=b+y,A=u-y-m,C=p-v+y+_,T=y+m-E,R=160;switch(i){case"auto":case"bottom":if(w>=f)return{placement:"bottom",maxHeight:t};if(A>=f&&!s)return o&&qw(c,C,R),{placement:"bottom",maxHeight:t};if(!s&&A>=r||s&&w>=r)return o&&qw(c,C,R),{placement:"bottom",maxHeight:s?w-_:A-_};if("auto"===i||s){var I=t,x=s?b:S;return x>=r&&(I=Math.min(x-_-a,t)),{placement:"top",maxHeight:I}}if("bottom"===i)return o&&Kw(c,C),{placement:"bottom",maxHeight:t};break;case"top":if(b>=f)return{placement:"top",maxHeight:t};if(S>=f&&!s)return o&&qw(c,T,R),{placement:"top",maxHeight:t};if(!s&&S>=r||s&&b>=r){var O=t;return(!s&&S>=r||s&&b>=r)&&(O=s?b-E:S-E),o&&qw(c,T,R),{placement:"top",maxHeight:O}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return l}var sS,aS=function(e){return"auto"===e?"bottom":e},cS=(0,t.createContext)(null),lS=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,s=e.menuPosition,a=e.menuShouldScrollIntoView,c=e.theme,l=((0,t.useContext)(cS)||{}).setPortalPlacement,d=(0,t.useRef)(null),h=rw((0,t.useState)(i),2),p=h[0],f=h[1],m=rw((0,t.useState)(null),2),g=m[0],v=m[1],y=c.spacing.controlHeight;return jw((function(){var e=d.current;if(e){var t="fixed"===s,n=oS({maxHeight:i,menuEl:e,minHeight:r,placement:o,shouldScroll:a&&!t,isFixedPosition:t,controlHeight:y});f(n.maxHeight),v(n.placement),null===l||void 0===l||l(n.placement)}}),[i,o,s,a,r,l,y]),n({ref:d,placerProps:u(u({},e),{},{placement:g||aS(o),maxHeight:p})})},dS=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return gd("div",Oi({},zw(e,"menu",{menu:!0}),{ref:n},r),t)},uS=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return u({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},hS=uS,pS=uS,fS=["size"],mS=["innerProps","isRtl","size"];var gS={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},vS=function(e){var t=e.size,n=s(e,fS);return gd("svg",Oi({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:gS},n))},yS=function(e){return gd(vS,Oi({size:20},e),gd("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},_S=function(e){return gd(vS,Oi({size:20},e),gd("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ES=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return u({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*i,":hover":{color:n?o.neutral80:o.neutral40}})},bS=ES,wS=ES,SS=_d(sS||(sS=nd(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),AS=function(e){var t=e.delay,n=e.offset;return gd("span",{css:yd({animation:"".concat(SS," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},CS=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,o=e.innerProps,s=e.menuIsOpen;return gd("div",Oi({ref:i},zw(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":s}),o,{"aria-disabled":n||void 0}),t)},TS=["data"],RS=function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,o=e.Heading,s=e.headingProps,a=e.innerProps,c=e.label,l=e.theme,d=e.selectProps;return gd("div",Oi({},zw(e,"group",{group:!0}),a),gd(o,Oi({},s,{selectProps:d,theme:l,getStyles:r,getClassNames:i,cx:n}),c),gd("div",null,t))},IS=["innerRef","isDisabled","isHidden","inputClassName"],xS={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},OS={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":u({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},xS)},NS=function(e){return u({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},xS)},DS=function(e){var t=e.cx,n=e.value,r=Hw(e),i=r.innerRef,o=r.isDisabled,a=r.isHidden,c=r.inputClassName,l=s(r,IS);return gd("div",Oi({},zw(e,"input",{"input-container":!0}),{"data-value":n||""}),gd("input",Oi({className:t({input:!0},c),ref:i,style:NS(a),disabled:o},l)))},kS=function(e){var t=e.children,n=e.innerProps;return gd("div",n,t)};var PS=function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,o=e.isDisabled,s=e.removeProps,a=e.selectProps,c=n.Container,l=n.Label,d=n.Remove;return gd(c,{data:r,innerProps:u(u({},zw(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:a},gd(l,{data:r,innerProps:u({},zw(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},t),gd(d,{data:r,innerProps:u(u({},zw(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},s),selectProps:a}))},LS={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return gd("div",Oi({},zw(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||gd(yS,null))},Control:CS,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return gd("div",Oi({},zw(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||gd(_S,null))},DownChevron:_S,CrossIcon:yS,Group:RS,GroupHeading:function(e){var t=Hw(e);t.data;var n=s(t,TS);return gd("div",Oi({},zw(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return gd("div",Oi({},zw(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return gd("span",Oi({},t,zw(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:DS,LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,i=void 0===r?4:r,o=s(e,mS);return gd("div",Oi({},zw(u(u({},o),{},{innerProps:t,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),gd(AS,{delay:0,offset:n}),gd(AS,{delay:160,offset:!0}),gd(AS,{delay:320,offset:!n}))},Menu:dS,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return gd("div",Oi({},zw(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(e){var n=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,s=e.menuPlacement,a=e.menuPosition,c=(0,t.useRef)(null),l=(0,t.useRef)(null),d=rw((0,t.useState)(aS(s)),2),h=d[0],p=d[1],f=(0,t.useMemo)((function(){return{setPortalPlacement:p}}),[]),m=rw((0,t.useState)(null),2),g=m[0],v=m[1],y=(0,t.useCallback)((function(){if(i){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),t="fixed"===a?0:window.pageYOffset,n=e[h]+t;n===(null===g||void 0===g?void 0:g.offset)&&e.left===(null===g||void 0===g?void 0:g.rect.left)&&e.width===(null===g||void 0===g?void 0:g.rect.width)||v({offset:n,rect:e})}}),[i,a,h,null===g||void 0===g?void 0:g.offset,null===g||void 0===g?void 0:g.rect.left,null===g||void 0===g?void 0:g.rect.width]);jw((function(){y()}),[y]);var _=(0,t.useCallback)((function(){"function"===typeof l.current&&(l.current(),l.current=null),i&&c.current&&(l.current=Mw(i,c.current,y,{elementResize:"ResizeObserver"in window}))}),[i,y]);jw((function(){_()}),[_]);var E=(0,t.useCallback)((function(e){c.current=e,_()}),[_]);if(!n&&"fixed"!==a||!g)return null;var b=gd("div",Oi({ref:E},zw(u(u({},e),{},{offset:g.offset,position:a,rect:g.rect}),"menuPortal",{"menu-portal":!0}),o),r);return gd(cS.Provider,{value:f},n?(0,hh.createPortal)(b,n):b)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,i=s(e,iS);return gd("div",Oi({},zw(u(u({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,i=s(e,rS);return gd("div",Oi({},zw(u(u({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:PS,MultiValueContainer:kS,MultiValueLabel:kS,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return gd("div",Oi({role:"button"},n),t||gd(yS,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.innerRef,s=e.innerProps;return gd("div",Oi({},zw(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:o,"aria-disabled":n},s),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return gd("div",Oi({},zw(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return gd("div",Oi({},zw(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return gd("div",Oi({},zw(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return gd("div",Oi({},zw(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}},MS=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function jS(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||MS(r)&&MS(i)))return!1;var r,i;return!0}for(var US={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},BS=function(e){return gd("span",Oi({css:US},e))},FS={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,i=e.context,o=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,o?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,o=void 0===i?"":i,s=e.selectValue,a=e.isDisabled,c=e.isSelected,l=e.isAppleDevice,d=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&s)return"value ".concat(o," focused, ").concat(d(s,n),".");if("menu"===t&&l){var u=a?" disabled":"",h="".concat(c?" selected":"").concat(u);return"".concat(o).concat(h,", ").concat(d(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},VS=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,s=e.isFocused,a=e.selectValue,c=e.selectProps,l=e.id,d=e.isAppleDevice,h=c.ariaLiveMessages,p=c.getOptionLabel,f=c.inputValue,m=c.isMulti,g=c.isOptionDisabled,v=c.isSearchable,y=c.menuIsOpen,_=c.options,E=c.screenReaderStatus,b=c.tabSelectsValue,w=c.isLoading,S=c["aria-label"],A=c["aria-live"],C=(0,t.useMemo)((function(){return u(u({},FS),h||{})}),[h]),T=(0,t.useMemo)((function(){var e,t="";if(n&&C.onChange){var r=n.option,i=n.options,o=n.removedValue,s=n.removedValues,c=n.value,l=o||r||(e=c,Array.isArray(e)?null:e),d=l?p(l):"",h=i||s||void 0,f=h?h.map(p):[],m=u({isDisabled:l&&g(l,a),label:d,labels:f},n);t=C.onChange(m)}return t}),[n,C,g,a,p]),R=(0,t.useMemo)((function(){var e="",t=r||i,n=!!(r&&a&&a.includes(r));if(t&&C.onFocus){var s={focused:t,label:p(t),isDisabled:g(t,a),isSelected:n,options:o,context:t===r?"menu":"value",selectValue:a,isAppleDevice:d};e=C.onFocus(s)}return e}),[r,i,p,g,C,o,a,d]),I=(0,t.useMemo)((function(){var e="";if(y&&_.length&&!w&&C.onFilter){var t=E({count:o.length});e=C.onFilter({inputValue:f,resultsMessage:t})}return e}),[o,f,y,C,_,E,w]),x="initial-input-focus"===(null===n||void 0===n?void 0:n.action),O=(0,t.useMemo)((function(){var e="";if(C.guidance){var t=i?"value":y?"menu":"input";e=C.guidance({"aria-label":S,context:t,isDisabled:r&&g(r,a),isMulti:m,isSearchable:v,tabSelectsValue:b,isInitialFocus:x})}return e}),[S,r,i,m,g,v,y,C,a,b,x]),N=gd(t.Fragment,null,gd("span",{id:"aria-selection"},T),gd("span",{id:"aria-focused"},R),gd("span",{id:"aria-results"},I),gd("span",{id:"aria-guidance"},O));return gd(t.Fragment,null,gd(BS,{id:l},x&&N),gd(BS,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!x&&N))},WS=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],HS=new RegExp("["+WS.map((function(e){return e.letters})).join("")+"]","g"),zS={},GS=0;GS<WS.length;GS++)for(var YS=WS[GS],KS=0;KS<YS.letters.length;KS++)zS[YS.letters[KS]]=YS.base;var qS=function(e){return e.replace(HS,(function(e){return zS[e]}))},XS=function(e,t){void 0===t&&(t=jS);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var o=e.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}(qS),JS=function(e){return e.replace(/^\s+|\s+$/g,"")},QS=function(e){return"".concat(e.label," ").concat(e.value)},ZS=["innerRef"];function $S(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter((function(e){var t=rw(e,1)[0];return!n.includes(t)}));return i.reduce((function(e,t){var n=rw(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}(s(e,ZS),"onExited","in","enter","exit","appear");return gd("input",Oi({ref:t},n,{css:yd({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var eA=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};var tA=["boxSizing","height","overflow","paddingRight","position"],nA={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function rA(e){e.cancelable&&e.preventDefault()}function iA(e){e.stopPropagation()}function oA(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function sA(){return"ontouchstart"in window||navigator.maxTouchPoints}var aA=!("undefined"===typeof window||!window.document||!window.document.createElement),cA=0,lA={capture:!1,passive:!1};var dA=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},uA={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function hA(e){var n=e.children,r=e.lockEnabled,i=e.captureEnabled,o=function(e){var n=e.isEnabled,r=e.onBottomArrive,i=e.onBottomLeave,o=e.onTopArrive,s=e.onTopLeave,a=(0,t.useRef)(!1),c=(0,t.useRef)(!1),l=(0,t.useRef)(0),d=(0,t.useRef)(null),u=(0,t.useCallback)((function(e,t){if(null!==d.current){var n=d.current,l=n.scrollTop,u=n.scrollHeight,h=n.clientHeight,p=d.current,f=t>0,m=u-h-l,g=!1;m>t&&a.current&&(i&&i(e),a.current=!1),f&&c.current&&(s&&s(e),c.current=!1),f&&t>m?(r&&!a.current&&r(e),p.scrollTop=u,g=!0,a.current=!0):!f&&-t>l&&(o&&!c.current&&o(e),p.scrollTop=0,g=!0,c.current=!0),g&&eA(e)}}),[r,i,o,s]),h=(0,t.useCallback)((function(e){u(e,e.deltaY)}),[u]),p=(0,t.useCallback)((function(e){l.current=e.changedTouches[0].clientY}),[]),f=(0,t.useCallback)((function(e){var t=l.current-e.changedTouches[0].clientY;u(e,t)}),[u]),m=(0,t.useCallback)((function(e){if(e){var t=!!eS&&{passive:!1};e.addEventListener("wheel",h,t),e.addEventListener("touchstart",p,t),e.addEventListener("touchmove",f,t)}}),[f,p,h]),g=(0,t.useCallback)((function(e){e&&(e.removeEventListener("wheel",h,!1),e.removeEventListener("touchstart",p,!1),e.removeEventListener("touchmove",f,!1))}),[f,p,h]);return(0,t.useEffect)((function(){if(n){var e=d.current;return m(e),function(){g(e)}}}),[n,m,g]),function(e){d.current=e}}({isEnabled:void 0===i||i,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(e){var n=e.isEnabled,r=e.accountForScrollbars,i=void 0===r||r,o=(0,t.useRef)({}),s=(0,t.useRef)(null),a=(0,t.useCallback)((function(e){if(aA){var t=document.body,n=t&&t.style;if(i&&tA.forEach((function(e){var t=n&&n[e];o.current[e]=t})),i&&cA<1){var r=parseInt(o.current.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,a=window.innerWidth-s+r||0;Object.keys(nA).forEach((function(e){var t=nA[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(a,"px"))}t&&sA()&&(t.addEventListener("touchmove",rA,lA),e&&(e.addEventListener("touchstart",oA,lA),e.addEventListener("touchmove",iA,lA))),cA+=1}}),[i]),c=(0,t.useCallback)((function(e){if(aA){var t=document.body,n=t&&t.style;cA=Math.max(cA-1,0),i&&cA<1&&tA.forEach((function(e){var t=o.current[e];n&&(n[e]=t)})),t&&sA()&&(t.removeEventListener("touchmove",rA,lA),e&&(e.removeEventListener("touchstart",oA,lA),e.removeEventListener("touchmove",iA,lA)))}}),[i]);return(0,t.useEffect)((function(){if(n){var e=s.current;return a(e),function(){c(e)}}}),[n,a,c]),function(e){s.current=e}}({isEnabled:r});return gd(t.Fragment,null,r&&gd("div",{onClick:dA,css:uA}),n((function(e){o(e),s(e)})))}var pA={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},fA=function(e){var t=e.name,n=e.onFocus;return gd("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:pA,value:"",onChange:function(){}})};function mA(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function gA(){return mA(/^Mac/i)}function vA(){return mA(/^iPhone/i)||mA(/^iPad/i)||gA()&&navigator.maxTouchPoints>1}var yA={clearIndicator:wS,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,o=i.colors,s=i.borderRadius;return u({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:r?o.primary:o.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},dropdownIndicator:bS,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return u({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return u({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,o=i.spacing,s=i.colors;return u(u({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},OS),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:s.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,o=i.colors,s=i.spacing.baseUnit;return u({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*s})},loadingMessage:pS,menu:function(e,t){var n,r=e.placement,i=e.theme,o=i.borderRadius,s=i.spacing,a=i.colors;return u((l(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),l(n,"position","absolute"),l(n,"width","100%"),l(n,"zIndex",1),n),t?{}:{backgroundColor:a.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return u({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors;return u({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,o=e.cropWithEllipsis;return u({overflow:"hidden",textOverflow:o||void 0===o?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors,s=e.isFocused;return u({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:s?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},noOptionsMessage:hS,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.theme,s=o.spacing,a=o.colors;return u({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?a.primary:r?a.primary25:"transparent",color:n?a.neutral20:i?a.neutral0:"inherit",padding:"".concat(2*s.baseUnit,"px ").concat(3*s.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?a.primary:a.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return u({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,o=r.colors;return u({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return u({alignItems:"center",display:r&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var _A={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},EA={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Jw(),captureMenuScroll:!Jw(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e){return function(t,n){if(t.data.__isNew__)return!0;var r=u({ignoreCase:!0,ignoreAccents:!0,stringify:QS,trim:!0,matchFrom:"any"},e),i=r.ignoreCase,o=r.ignoreAccents,s=r.stringify,a=r.trim,c=r.matchFrom,l=a?JS(n):n,d=a?JS(s(t)):s(t);return i&&(l=l.toLowerCase(),d=d.toLowerCase()),o&&(l=XS(l),d=qS(d)),"start"===c?d.substr(0,l.length)===l:d.indexOf(l)>-1}}(),formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(eU){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function bA(e,t,n,r){return{type:"option",data:t,isDisabled:xA(e,t,n),isSelected:OA(e,t,n),label:RA(e,t),value:IA(e,t),index:r}}function wA(e,t){return e.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return bA(e,n,t,r)})).filter((function(t){return CA(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=bA(e,n,t,r);return CA(e,o)?o:void 0})).filter(tS)}function SA(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,lw(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function AA(e,t){return e.reduce((function(e,n){return"group"===n.type?e.push.apply(e,lw(n.options.map((function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}})))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e}),[])}function CA(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,o=t.isSelected,s=t.label,a=t.value;return(!DA(e)||!o)&&NA(e,{label:s,value:a,data:i},r)}var TA=function(e,t){var n;return(null===(n=e.find((function(e){return e.data===t})))||void 0===n?void 0:n.id)||null},RA=function(e,t){return e.getOptionLabel(t)},IA=function(e,t){return e.getOptionValue(t)};function xA(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function OA(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=IA(e,t);return n.some((function(t){return IA(e,t)===r}))}function NA(e,t,n){return!e.filterOption||e.filterOption(t,n)}var DA=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},kA=1,PA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&id(e,t)}(r,e);var n=cw(r);function r(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.isAppleDevice=gA()||vA(),t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,o=r.name;n.name=o,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,o=i.closeMenuOnSelect,s=i.isMulti,a=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:a}),o&&(t.setState({inputIsHiddenAfterUpdate:!s}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,o=n.name,s=t.state.selectValue,a=i&&t.isOptionSelected(e,s),c=t.isOptionDisabled(e,s);if(a){var l=t.getOptionValue(e);t.setValue(s.filter((function(e){return t.getOptionValue(e)!==l})),"deselect-option",e)}else{if(c)return void t.ariaOnChange(e,{action:"select-option",option:e,name:o});i?t.setValue([].concat(lw(s),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),o=r.filter((function(e){return t.getOptionValue(e)!==i})),s=nS(n,o,o[0]||null);t.onChange(s,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(nS(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),o=nS(e,i,i[0]||null);r&&t.onChange(o,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return TA(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return AA(wA(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Vw.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return RA(t.props,e)},t.getOptionValue=function(e){return IA(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=yA[e](n,r);i.boxSizing="border-box";var o=t.props.styles[e];return o?o(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,u(u({},LS),e.components);var e},t.buildCategorizedOptions=function(){return wA(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return SA(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:u({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&Gw(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),o=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||o>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return DA(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,o=n.escapeClearsValue,s=n.inputValue,a=n.isClearable,c=n.isDisabled,l=n.menuIsOpen,d=n.onKeyDown,u=n.tabSelectsValue,h=n.openMenuOnFocus,p=t.state,f=p.focusedOption,m=p.focusedValue,g=p.selectValue;if(!c&&("function"!==typeof d||(d(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||s)return;t.focusValue("previous");break;case"ArrowRight":if(!r||s)return;t.focusValue("next");break;case"Delete":case"Backspace":if(s)return;if(m)t.removeValue(m);else{if(!i)return;r?t.popValue():a&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!l||!u||!f||h&&t.isOptionSelected(f,g))return;t.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(l){if(!f)return;if(t.isComposing)return;t.selectOption(f);break}return;case"Escape":l?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:s}),t.onMenuClose()):a&&o&&t.clearValue();break;case" ":if(s)return;if(!l){t.openMenu("first");break}if(!f)return;t.selectOption(f);break;case"ArrowUp":l?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":l?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!l)return;t.focusOption("pageup");break;case"PageDown":if(!l)return;t.focusOption("pagedown");break;case"Home":if(!l)return;t.focusOption("first");break;case"End":if(!l)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++kA),t.state.selectValue=Ww(e.value),e.menuIsOpen&&t.state.selectValue.length){var i=t.getFocusableOptionsWithIds(),o=t.buildFocusableOptions(),s=o.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=i,t.state.focusedOption=o[s],t.state.focusedOptionId=TA(i,o[s])}return t}return function(e,t,n){t&&ow(e.prototype,t),n&&ow(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Xw(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Xw(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,o=this.buildFocusableOptions(),s="first"===e?0:o.length-1;if(!this.props.isMulti){var a=o.indexOf(r[0]);a>-1&&(s=a)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[s],focusedOptionId:this.getFocusedOptionId(o[s])},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var o=n.length-1,s=-1;if(n.length){switch(e){case"previous":s=0===i?0:-1===i?o:i-1;break;case"next":i>-1&&i<o&&(s=i+1)}this.setState({inputIsHidden:-1!==s,focusedValue:n[s]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,o=r.indexOf(n);n||(o=-1),"up"===e?i=o>0?o-1:r.length-1:"down"===e?i=(o+1)%r.length:"pageup"===e?(i=o-t)<0&&(i=0):"pagedown"===e?(i=o+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(_A):u(u({},_A),this.props.theme):_A}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,o=this.selectOption,s=this.setValue,a=this.props,c=a.isMulti,l=a.isRtl,d=a.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:c,isRtl:l,options:d,selectOption:o,selectProps:a,setValue:s,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return xA(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return OA(this.props,e,t)}},{key:"filterOption",value:function(e,t){return NA(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,n=e.isDisabled,r=e.isSearchable,i=e.inputId,o=e.inputValue,s=e.tabIndex,a=e.form,c=e.menuIsOpen,l=e.required,d=this.getComponents().Input,h=this.state,p=h.inputIsHidden,f=h.ariaSelection,m=this.commonProps,g=i||this.getElementId("input"),v=u(u(u({"aria-autocomplete":"list","aria-expanded":c,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":l,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},c&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===f||void 0===f?void 0:f.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?t.createElement(d,Oi({},m,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:g,innerRef:this.getInputRef,isDisabled:n,isHidden:p,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:a,type:"text",value:o},v)):t.createElement($S,Oi({id:g,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Bw,onFocus:this.onInputFocus,disabled:n,tabIndex:s,inputMode:"none",form:a,value:""},v))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,o=n.MultiValueLabel,s=n.MultiValueRemove,a=n.SingleValue,c=n.Placeholder,l=this.commonProps,d=this.props,u=d.controlShouldRenderValue,h=d.isDisabled,p=d.isMulti,f=d.inputValue,m=d.placeholder,g=this.state,v=g.selectValue,y=g.focusedValue,_=g.isFocused;if(!this.hasValue()||!u)return f?null:t.createElement(c,Oi({},l,{key:"placeholder",isDisabled:h,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),m);if(p)return v.map((function(n,a){var c=n===y,d="".concat(e.getOptionLabel(n),"-").concat(e.getOptionValue(n));return t.createElement(r,Oi({},l,{components:{Container:i,Label:o,Remove:s},isFocused:c,isDisabled:h,key:d,index:a,removeProps:{onClick:function(){return e.removeValue(n)},onTouchEnd:function(){return e.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),e.formatOptionLabel(n,"value"))}));if(f)return null;var E=v[0];return t.createElement(a,Oi({},l,{data:E,isDisabled:h}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,s=this.state.isFocused;if(!this.isClearable()||!e||i||!this.hasValue()||o)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,Oi({},n,{innerProps:a,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,s=this.state.isFocused;if(!e||!o)return null;return t.createElement(e,Oi({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:s}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),n=e.DropdownIndicator,r=e.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,o=this.props.isDisabled,s=this.state.isFocused;return t.createElement(r,Oi({},i,{isDisabled:o,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,Oi({},n,{innerProps:o,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var e=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,o=n.Menu,s=n.MenuList,a=n.MenuPortal,c=n.LoadingMessage,l=n.NoOptionsMessage,d=n.Option,u=this.commonProps,h=this.state.focusedOption,p=this.props,f=p.captureMenuScroll,m=p.inputValue,g=p.isLoading,v=p.loadingMessage,y=p.minMenuHeight,_=p.maxMenuHeight,E=p.menuIsOpen,b=p.menuPlacement,w=p.menuPosition,S=p.menuPortalTarget,A=p.menuShouldBlockScroll,C=p.menuShouldScrollIntoView,T=p.noOptionsMessage,R=p.onMenuScrollToTop,I=p.onMenuScrollToBottom;if(!E)return null;var x,O=function(n,r){var i=n.type,o=n.data,s=n.isDisabled,a=n.isSelected,c=n.label,l=n.value,p=h===o,f=s?void 0:function(){return e.onOptionHover(o)},m=s?void 0:function(){return e.selectOption(o)},g="".concat(e.getElementId("option"),"-").concat(r),v={id:g,onClick:m,onMouseMove:f,onMouseOver:f,tabIndex:-1,role:"option","aria-selected":e.isAppleDevice?void 0:a};return t.createElement(d,Oi({},u,{innerProps:v,data:o,isDisabled:s,isSelected:a,key:g,label:c,type:i,value:l,isFocused:p,innerRef:p?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())x=this.getCategorizedOptions().map((function(n){if("group"===n.type){var o=n.data,s=n.options,a=n.index,c="".concat(e.getElementId("group"),"-").concat(a),l="".concat(c,"-heading");return t.createElement(r,Oi({},u,{key:c,data:o,options:s,Heading:i,headingProps:{id:l,data:n.data},label:e.formatGroupLabel(n.data)}),n.options.map((function(e){return O(e,"".concat(a,"-").concat(e.index))})))}if("option"===n.type)return O(n,"".concat(n.index))}));else if(g){var N=v({inputValue:m});if(null===N)return null;x=t.createElement(c,u,N)}else{var D=T({inputValue:m});if(null===D)return null;x=t.createElement(l,u,D)}var k={minMenuHeight:y,maxMenuHeight:_,menuPlacement:b,menuPosition:w,menuShouldScrollIntoView:C},P=t.createElement(lS,Oi({},u,k),(function(n){var r=n.ref,i=n.placerProps,a=i.placement,c=i.maxHeight;return t.createElement(o,Oi({},u,k,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:g,placement:a}),t.createElement(hA,{captureEnabled:f,onTopArrive:R,onBottomArrive:I,lockEnabled:A},(function(n){return t.createElement(s,Oi({},u,{innerRef:function(t){e.getMenuListRef(t),n(t)},innerProps:{role:"listbox","aria-multiselectable":u.isMulti,id:e.getElementId("listbox")},isLoading:g,maxHeight:c,focusedOption:h}),x)})))}));return S||"fixed"===w?t.createElement(a,Oi({},u,{appendTo:S,controlElement:this.controlRef,menuPlacement:b,menuPosition:w}),P):P}},{key:"renderFormField",value:function(){var e=this,n=this.props,r=n.delimiter,i=n.isDisabled,o=n.isMulti,s=n.name,a=n.required,c=this.state.selectValue;if(a&&!this.hasValue()&&!i)return t.createElement(fA,{name:s,onFocus:this.onValueInputFocus});if(s&&!i){if(o){if(r){var l=c.map((function(t){return e.getOptionValue(t)})).join(r);return t.createElement("input",{name:s,type:"hidden",value:l})}var d=c.length>0?c.map((function(n,r){return t.createElement("input",{key:"i-".concat(r),name:s,type:"hidden",value:e.getOptionValue(n)})})):t.createElement("input",{name:s,type:"hidden",value:""});return t.createElement("div",null,d)}var u=c[0]?this.getOptionValue(c[0]):"";return t.createElement("input",{name:s,type:"hidden",value:u})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,o=n.focusedValue,s=n.isFocused,a=n.selectValue,c=this.getFocusableOptions();return t.createElement(VS,Oi({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:o,isFocused:s,selectValue:a,focusableOptions:c,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),n=e.Control,r=e.IndicatorsContainer,i=e.SelectContainer,o=e.ValueContainer,s=this.props,a=s.className,c=s.id,l=s.isDisabled,d=s.menuIsOpen,u=this.state.isFocused,h=this.commonProps=this.getCommonProps();return t.createElement(i,Oi({},h,{className:a,innerProps:{id:c,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:u}),this.renderLiveRegion(),t.createElement(n,Oi({},h,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:u,menuIsOpen:d}),t.createElement(o,Oi({},h,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(r,Oi({},h,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,o=t.ariaSelection,s=t.isFocused,a=t.prevWasFocused,c=t.instancePrefix,l=e.options,d=e.value,h=e.menuIsOpen,p=e.inputValue,f=e.isMulti,m=Ww(d),g={};if(n&&(d!==n.value||l!==n.options||h!==n.menuIsOpen||p!==n.inputValue)){var v=h?function(e,t){return SA(wA(e,t))}(e,m):[],y=h?AA(wA(e,m),"".concat(c,"-option")):[],_=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,m):null,E=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,v);g={selectValue:m,focusedOption:E,focusedOptionId:TA(y,E),focusableOptionsWithIds:y,focusedValue:_,clearFocusValueOnUpdate:!1}}var b=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},w=o,S=s&&a;return s&&!S&&(w={value:nS(f,m,m[0]||null),options:m,action:"initial-input-focus"},S=!a),"initial-input-focus"===(null===o||void 0===o?void 0:o.action)&&(w=null),u(u(u({},g),b),{},{prevProps:e,ariaSelection:w,prevWasFocused:S})}}]),r}(t.Component);PA.defaultProps=EA;var LA=(0,t.forwardRef)((function(e,n){var r=function(e){var n=e.defaultInputValue,r=void 0===n?"":n,i=e.defaultMenuIsOpen,o=void 0!==i&&i,a=e.defaultValue,c=void 0===a?null:a,l=e.inputValue,d=e.menuIsOpen,h=e.onChange,p=e.onInputChange,f=e.onMenuClose,m=e.onMenuOpen,g=e.value,v=s(e,iw),y=rw((0,t.useState)(void 0!==l?l:r),2),_=y[0],E=y[1],b=rw((0,t.useState)(void 0!==d?d:o),2),w=b[0],S=b[1],A=rw((0,t.useState)(void 0!==g?g:c),2),C=A[0],T=A[1],R=(0,t.useCallback)((function(e,t){"function"===typeof h&&h(e,t),T(e)}),[h]),I=(0,t.useCallback)((function(e,t){var n;"function"===typeof p&&(n=p(e,t)),E(void 0!==n?n:e)}),[p]),x=(0,t.useCallback)((function(){"function"===typeof m&&m(),S(!0)}),[m]),O=(0,t.useCallback)((function(){"function"===typeof f&&f(),S(!1)}),[f]),N=void 0!==l?l:_,D=void 0!==d?d:w,k=void 0!==g?g:C;return u(u({},v),{},{inputValue:N,menuIsOpen:D,onChange:R,onInputChange:I,onMenuClose:O,onMenuOpen:x,value:k})}(e);return t.createElement(PA,Oi({ref:n},r))})),MA=LA;const jA=e=>{let{value:t,options:n,handleCategoryChange:r,placeholder:i}=e;return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)(MA,{id:"category",options:n,value:t,onChange:r,placeholder:i||"Select a category"})})};function UA(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function BA(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(e)}function FA(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(e)}function VA(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function WA(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 7 23 1 17 1"},child:[]},{tag:"line",attr:{x1:"16",y1:"8",x2:"23",y2:"1"},child:[]},{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function HA(e){return Og({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function zA(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 32v432a16 16 0 0 0 16 16h432"},child:[]},{tag:"rect",attr:{width:"80",height:"192",x:"96",y:"224",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"80",height:"240",x:"240",y:"176",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"80",height:"304",x:"383.64",y:"112",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]}]})(e)}function GA(e){return Og({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 48c-79.5 0-144 61.39-144 137 0 87 96 224.87 131.25 272.49a15.77 15.77 0 0 0 25.5 0C304 409.89 400 272.07 400 185c0-75.61-64.5-137-144-137z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"192",r:"48",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(e)}const YA=()=>{const e=de(),n=pe(),r=vv(),[i,o]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),[s,a]=(0,t.useState)(localStorage.getItem("token")||null),[c,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(s)try{const e=rb(s);l(e)}catch(e){console.log(e.message)}else l(null)}),[s]);const d="flex items-center gap-3 mb-2 p-4 rounded-full";return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"sidebar flex flex-col justify-between h-[70%]",children:[i&&(0,Va.jsxs)("div",{className:"profile flex items-center text-center justify-center gap-8 flex-col ",children:[(0,Va.jsx)("img",{src:DE,alt:"",className:"w-32 h-32 rounded-full object-cover"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{className:"capitalize",children:i&&(null===c||void 0===c?void 0:c.username)}),(0,Va.jsx)(aE,{children:null===c||void 0===c?void 0:c.sub})]})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)(lE,{href:"/add",isActive:"/add"===e.pathname,className:d,children:[(0,Va.jsx)("span",{children:(0,Va.jsx)(Vg,{size:22})}),(0,Va.jsx)("span",{children:"Create Product"})]})}),(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsxs)(lE,{href:"/userlist",isActive:"/userlist"===e.pathname,className:d,children:[(0,Va.jsx)("span",{children:(0,Va.jsx)(HA,{size:22})}),(0,Va.jsx)("span",{children:"All User"})]}),(0,Va.jsxs)(lE,{href:"/product/admin",isActive:"/product/admin"===e.pathname,className:d,children:[(0,Va.jsx)("span",{children:(0,Va.jsx)(Ob,{size:22})}),(0,Va.jsx)("span",{children:" All product List"})]}),(0,Va.jsxs)(lE,{href:"/category",isActive:"/category"===e.pathname,className:d,children:[(0,Va.jsx)("span",{children:(0,Va.jsx)(JE,{size:22})}),(0,Va.jsx)("span",{children:"Categories"})]}),(0,Va.jsxs)(lE,{href:"/admin-contact",isActive:"/admin-contact"===e.pathname,className:d,children:[(0,Va.jsxs)("span",{children:[(0,Va.jsx)(VA,{size:22})," "]}),(0,Va.jsx)("span",{children:"Contact"})]}),(0,Va.jsxs)(lE,{href:"/admin-blog",isActive:"/admin-blog"===e.pathname,className:d,children:[(0,Va.jsxs)("span",{children:[(0,Va.jsx)(UA,{size:22})," "]}),(0,Va.jsx)("span",{children:"Blog"})]})]}),(0,Va.jsxs)(lE,{href:"/thongke",isActive:"/thongke"===e.pathname,className:d,children:[(0,Va.jsx)("span",{children:(0,Va.jsx)(zA,{size:22})}),(0,Va.jsx)("span",{children:"Statistis"})]}),(0,Va.jsx)(lE,{href:"/profile",isActive:"/profile"===e.pathname,className:d}),i&&(0,Va.jsxs)("button",{onClick:()=>{null!==s&&(localStorage.removeItem("token"),localStorage.removeItem("isIntrospect"),r(m_()),n("/login"))},className:"flex items-center w-full gap-3 mt-4 bg-red-500 mb-3 hover:text-white p-4 rounded-full text-white",children:[(0,Va.jsx)("span",{children:(0,Va.jsx)(SE,{size:22})}),(0,Va.jsx)("span",{children:"Log Out"})]})]})]})})},KA=e=>{let{children:t}=e;const n="admin";return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("div",{className:"mt-32",children:(0,Va.jsxs)(dE,{className:"flex",children:[(0,Va.jsx)("div",{className:"".concat("h-[110vh]"," w-[25%] shadow-s1 py-8 p-5 rounded-lg"),children:(0,Va.jsx)(YA,{role:n})}),(0,Va.jsx)("div",{className:"w-[75%] px-5 ml-10 rounded-lg",children:t})]})})})},qA={custom_scroll:"chat_custom_scroll__OAKK6",chatBox_write:"chat_chatBox_write__3toPc",chat_box_input:"chat_chat_box_input__ApMb3",btn_submit:"chat_btn_submit__+8A-q",wave_text_container:"chat_wave_text_container__XZyD6",wave_text:"chat_wave_text__QpvgQ","wave-animation":"chat_wave-animation__TogI5"},XA=()=>{const e=vv(),{categories:n,notification:r,notificationsBidding:i,notificationsBiddingLength:o}=ov((e=>e.product)),[s,a]=(0,t.useState)(!1),[c,l]=(0,t.useState)(!1),d=de(),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),{triggerLoginExpired:v}=X_(),[y,_]=(0,t.useState)([]),[E,b]=(0,t.useState)([]),[w,S]=(0,t.useState)(!1),[A,C]=(0,t.useState)(null),[T,R]=(0,t.useState)([]),[I,x]=(0,t.useState)([]),[O,N]=(0,t.useState)(!1),[D,k]=(0,t.useState)([]),[P,L]=(0,t.useState)([]),{isLoggedIn:M,token:j}=ov((e=>e.auth)),[U,B]=(0,t.useState)(""),F=(0,t.useRef)(null),V=(0,t.useRef)(null),W=(0,t.useRef)(null),H=e=>{F.current&&!F.current.contains(e.target)&&a(!1)},z=()=>{l(window.scrollY>0)};(0,t.useEffect)((()=>(document.addEventListener("mousedown",H),window.addEventListener("scroll",z),()=>{document.removeEventListener("mousedown",H),window.removeEventListener("scroll",z)})),[]);const G="/"===d.pathname;(0,t.useEffect)((()=>{e(gb({page:0,size:0}))}),[e]),(0,t.useEffect)((()=>{if(j)try{const e=rb(j);B(e.email),f(e.userid),C(e)}catch(e){console.error("Error decoding token:",e.message)}}),[j]),(0,t.useEffect)((()=>{m&&Y()}),[p]);const Y=async()=>{if(m&&p)try{const e=await Pg.get("bidding/notification/"+p,{authRequired:!0});0===e.code&&(_(e.result),b(e.result))}catch(e){console.log(e)}};(0,t.useEffect)((()=>{_((e=>[r,...e])),b((e=>[r,...e]))}),[r]);return(0,t.useEffect)((()=>{const e=localStorage.getItem("token"),t=qb.over((()=>new(Mb())("https://be-pjhk4.onrender.com/ws",null,{withCredentials:!0,timeout:5e3})));return t.debug=()=>{},t.connect({Authorization:"Bearer ".concat(e)},(()=>{t.subscribe("/topic/notification/product",(e=>{const t=JSON.parse(e.body);R((e=>e.some((e=>e.id===t.id))?e:[t,...e])),L((e=>e.some((e=>e.id===t.id))?e:[t,...e])),x((e=>e.some((e=>e.id===t.id))?e:[t,...e])),k((e=>e.some((e=>e.id===t.id))?e:[t,...e]))})),t.subscribe("/topic/notification/product/status",(e=>{const t=JSON.parse(e.body);x((e=>e.some((e=>e.id===t.id))?e:[t,...e]))})),t.subscribe("/topic/notification/product/status",(e=>{const t=JSON.parse(e.body);k((e=>e.some((e=>e.id===t.id))?e:[t,...e]))}))}),(e=>{console.error("Error connecting to WebSocket:",e)})),()=>{t.connected&&t.disconnect((()=>{console.log("Disconnected from WebSocket")}))}}),[]),(0,t.useEffect)((()=>{(async()=>{if(A&&m&&"admin@gmail.com"===(null===A||void 0===A?void 0:A.sub)){const t=localStorage.getItem("token");try{const e=await Pg.get("/notification/product",{headers:{Authorization:"Bearer ".concat(t)}});R(e.result),L(e.result)}catch(e){console.log(e)}}})()}),[A,m]),(0,t.useEffect)((()=>{(async()=>{if(m&&p){const t=localStorage.getItem("token");try{const e=await Pg.get("/notification/product/".concat(p),{headers:{Authorization:"Bearer ".concat(t)}});x(e.result),k(e.result)}catch(e){console.log(e)}}})()}),[m,p]),(0,t.useEffect)((()=>{const e=e=>{V.current&&!V.current.contains(e.target)&&W.current&&!W.current.contains(e.target)&&(N(!1),S(!1))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsx)("header",{className:G?"header py-1 bg-primary ".concat(c?"scrolled":""):"header bg-white shadow-s1 ".concat(c?"scrolled":""),children:(0,Va.jsx)(dE,{children:(0,Va.jsxs)("nav",{className:"p-4 flex justify-between items-center relative",children:[(0,Va.jsxs)("div",{className:"flex items-center gap-14",children:[(0,Va.jsx)("div",{children:G&&!c?(0,Va.jsx)("img",{src:"../images/common/Biddora2.png",alt:"LogoImg",className:"h-11"}):(0,Va.jsx)("img",{src:"../images/common/Biddora.png",alt:"LogoImg",className:"h-11"})}),(0,Va.jsx)("div",{className:"hidden lg:flex items-center justify-between gap-8 relative",children:gE.map((e=>{var t,r;return(0,Va.jsxs)("li",{className:"capitalize list-none",onMouseOver:()=>{e.children&&h(!0)},onMouseOut:()=>{e.children&&h(!1)},children:[(0,Va.jsxs)(cE,{href:e.path,isActive:d.pathname===e.path,className:"".concat(c||!G?"text-black":"text-white"," flex items-center"),children:[e.link,e.children&&(0,Va.jsx)("span",{className:"",children:u?(0,Va.jsx)(GE,{className:"text-white",size:25}):(0,Va.jsx)(XE,{className:"text-white",size:25})})]}),e.children&&u&&(0,Va.jsx)("div",{className:" top-[25px] absolute bg-white shadow-lg rounded-sm",children:(0,Va.jsx)("ul",{className:"",children:(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.length)>0&&(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.map(((e,t)=>(0,Va.jsx)(ft,{to:"/product-list/".concat(null===e||void 0===e?void 0:e.category_id),children:(0,Va.jsx)("li",{className:"border-b-[1px] p-1 cursor-pointer hover:bg-emerald-500 hover:text-white",children:null===e||void 0===e?void 0:e.category_name},null===e||void 0===e?void 0:e.category_id)},t))))})})]},e.id)}))})]}),(0,Va.jsxs)("div",{className:"flex items-center gap-8 icons",children:[(0,Va.jsxs)("div",{className:"hidden lg:flex lg:items-center lg:gap-8",children:[M&&"admin@gmail.com"!==U&&(0,Va.jsx)(lE,{href:"/chat",className:"".concat(c||!G?"text-black":"text-white"),children:(0,Va.jsx)(KE,{})}),M&&"admin@gmail.com"!==U&&(0,Va.jsx)(lE,{href:"/profile-page",className:"".concat(c||!G?"text-black":"text-white"),children:(0,Va.jsx)(Wg,{})}),(0,Va.jsxs)("div",{className:"relative cursor-pointer",ref:V,onClick:()=>{N(!O),S(!1),k([]),L([])},children:[M&&(0,Va.jsx)(QE,{size:23,className:"".concat(c||!G?"text-black":"text-white")}),(null===D||void 0===D?void 0:D.length)>0&&(0,Va.jsx)("div",{className:"absolute top-[-10px] right-[-10px] w-5 h-5 border rounded-full bg-red-600 \r flex items-center justify-center text-white text-[13px]",children:(null===D||void 0===D?void 0:D.length)>5?"5+":null===D||void 0===D?void 0:D.length}),(null===P||void 0===P?void 0:P.length)>0&&(0,Va.jsx)("div",{className:"absolute top-[-10px] right-[-10px] w-5 h-5 border rounded-full bg-red-600 \r flex items-center justify-center text-white text-[13px]",children:(null===T||void 0===T?void 0:T.length)>5?"5+":null===T||void 0===T?void 0:T.length}),O&&(0,Va.jsxs)("div",{className:"absolute w-[360px] top-[33px] overflow-hidden bg-white shadow-lg rounded-sm p-2",children:[(0,Va.jsx)("div",{className:"w-full",children:(0,Va.jsx)("h3",{className:"text-[24px]",children:"Notification"})}),(0,Va.jsxs)("div",{className:At(qA.custom_scroll,"overflow-y-auto max-h-[400px]"),children:[(null===T||void 0===T?void 0:T.length)>0&&"admin@gmail.com"===(null===A||void 0===A?void 0:A.sub)&&(null===T||void 0===T?void 0:T.map(((e,t)=>(0,Va.jsx)(mt,{to:"#",className:"flex gap-2 items-center bottom-1 padding-2",children:(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)("div",{className:"w-[50px]  flex-shrink-0",children:(0,Va.jsx)("img",{className:"w-full",alt:"",src:"https://cdn-icons-png.flaticon.com/512/6596/6596121.png"})}),(0,Va.jsxs)("div",{children:[(0,Va.jsxs)("p",{className:"whitespace-normal overflow-hidden text-ellipsis text-[14px]",children:[(0,Va.jsxs)("span",{className:"font-bold",children:[e.creator.id!==p?e.creator.name:"You"," "]}),e.creator.id!==p?"have just created a new product":"have just created a new product, kindly wait for the admin approval!"]}),(0,Va.jsx)("p",{className:"text-blue-500 text-[12px]",children:__()(e.createdAt).fromNow()})]}),(0,Va.jsx)("div",{className:"pr-3.5",children:(0,Va.jsx)(lb,{size:27,className:"text-blue-500"})})]})},e.id)))),(null===I||void 0===I?void 0:I.length)>0&&I.map(((e,t)=>{if(e.creator.id===p){let n=null;if("P"===e.type?n=(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("p",{className:"whitespace-normal overflow-hidden text-ellipsis text-[14px]",children:[(0,Va.jsxs)("span",{className:"font-bold",children:[e.creator.id!==p?e.creator.name:"You"," "]}),e.creator.id!==p?"have just created a new product":"have just created a new product, kindly wait for the admin approval!"]})}):"T"===e.type&&(n=(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("p",{className:"whitespace-normal overflow-hidden text-ellipsis text-[14px]",children:[(0,Va.jsx)("span",{className:"font-bold",children:"Your product "})," is approved!"]})})),n)return(0,Va.jsxs)(mt,{to:"#",className:"flex gap-2 items-center bottom-1 padding-2",children:[(0,Va.jsx)("div",{className:"w-[50px] flex-shrink-0",children:(0,Va.jsx)("img",{className:"w-full",alt:"",src:"https://cdn-icons-png.flaticon.com/512/6596/6596121.png"})}),(0,Va.jsxs)("div",{children:[n,(0,Va.jsx)("p",{className:"text-blue-500 text-[12px]",children:__()(e.createdAt).fromNow()})]}),(0,Va.jsx)("div",{className:"pr-3.5",children:(0,Va.jsx)(lb,{size:27,className:"text-blue-500"})})]},t)}return null}))]})]})]}),(0,Va.jsxs)("div",{ref:W,onClick:()=>{S(!w),N(!1),b([])},className:"relative cursor-pointer",children:[M&&"admin@gmail.com"!==U&&(0,Va.jsx)(TE,{size:23,className:"".concat(c||!G?"text-black":"text-white")}),(null===E||void 0===E?void 0:E.filter((e=>!1===e.sellerIsRead&&e.sellerId===p)).length)>0&&(0,Va.jsx)("div",{className:"absolute top-[-10px] right-[-10px] w-5 h-5 border rounded-full bg-red-600 \r flex items-center justify-center text-white text-[13px]",children:(null===E||void 0===E?void 0:E.filter((e=>!1===e.sellerIsRead&&e.sellerId===p)).length)>5?"5+":null===E||void 0===E?void 0:E.filter((e=>!1===e.sellerIsRead&&e.sellerId===p)).length}),(null===E||void 0===E?void 0:E.filter((e=>!1===e.buyerIsRead&&e.buyerId===p)).length)>0&&(0,Va.jsx)("div",{className:"absolute top-[-10px] right-[-10px] w-5 h-5 border rounded-full bg-red-600 \r flex items-center justify-center text-white text-[13px]",children:(null===E||void 0===E?void 0:E.filter((e=>!1===e.buyerIsRead&&e.buyerId===p)).length)>5?"5+":null===E||void 0===E?void 0:E.filter((e=>!1===e.buyerIsRead&&e.buyerId===p)).length}),w&&(0,Va.jsxs)("div",{className:"absolute w-[360px] top-[33px] right-1 overflow-hidden bg-white shadow-lg rounded-sm p-2",children:[(0,Va.jsx)("div",{className:"w-full",children:(0,Va.jsx)("h3",{className:"text-[24px]",children:"Notification"})}),(0,Va.jsx)("div",{className:At(qA.custom_scroll,"overflow-y-auto max-h-[400px]"),children:p&&(null===y||void 0===y?void 0:y.length)>0&&(null===y||void 0===y?void 0:y.map(((e,t)=>(0,Va.jsxs)(mt,{to:"/details/".concat(null===e||void 0===e?void 0:e.productId),onClick:()=>(async e=>{if(m){const n=localStorage.getItem("token");try{0===(await Pg.put("/bidding/notification/status/".concat(e,"/").concat(p),null,{headers:{Authorization:"Bearer ".concat(n)}})).code&&S(!1)}catch(t){console.log(t)}}else v()})(e.id),className:"flex gap-2 items-center bottom-1 padding-2",children:[e.sellerId===p&&(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)("div",{className:"w-[50px]  flex-shrink-0",children:(0,Va.jsx)("img",{className:"w-full",alt:"",src:"https://cdn-icons-png.flaticon.com/512/6596/6596121.png"})}),(0,Va.jsxs)("div",{children:[!0===e.auction?(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("p",{className:"whitespace-normal overflow-hidden text-ellipsis text-[14px]",children:[(0,Va.jsxs)("span",{className:"font-bold",children:[" The product named ",(0,Va.jsx)("span",{className:"font-bold",children:e.productName})," of you "]}),"was successfully bid with a price of ",e.price]})}):(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("p",{className:"whitespace-normal overflow-hidden text-ellipsis text-[14px]",children:[(0,Va.jsxs)("span",{className:"font-bold",children:[e.buyerName," "]}),"already bid a product named ",(0,Va.jsxs)("span",{className:"font-bold",children:[e.productName," "]}),"of you with a price of ",e.price]})}),(0,Va.jsx)("p",{className:"text-blue-500 text-[12px]",children:__()(e.timestamp).fromNow()})]}),!1===e.sellerIsRead&&(0,Va.jsx)("div",{className:"pr-3.5",children:(0,Va.jsx)(lb,{size:27,className:"text-blue-500"})})]}),e.buyerId===p&&(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)("div",{className:"w-[50px] flex-shrink-0",children:(0,Va.jsx)("img",{className:"w-full",alt:"",src:"https://cdn-icons-png.flaticon.com/512/6596/6596121.png"})}),(0,Va.jsxs)("div",{children:[!0===e.auction?(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("p",{className:"whitespace-normal overflow-hidden text-ellipsis text-[15px]",children:[(0,Va.jsx)("span",{className:"font-bold",children:"Congratulations, you have"}),"already made a successful bid for a product called ",(0,Va.jsx)("span",{className:"font-bold",children:e.productName})," with a price of ",e.price]})}):(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("p",{className:"whitespace-normal overflow-hidden text-ellipsis text-[15px]",children:[(0,Va.jsx)("span",{className:"font-bold",children:"You have"}),"already made a successful bid for a product called ",(0,Va.jsx)("span",{className:"font-bold",children:e.productName})," with a price of ",e.price]})}),(0,Va.jsx)("p",{className:"text-blue-500 text-[12px]",children:__()(e.timestamp).fromNow()})]}),!1===e.buyerIsRead&&(0,Va.jsx)("div",{className:"pr-3.5",children:(0,Va.jsx)(lb,{size:27,className:"text-blue-500"})})]})]},e.id))))})]})]}),!M&&(0,Va.jsx)(lE,{href:"/login",className:"".concat(c||!G?"text-black":"text-white"),children:"Sign In"}),!M&&(0,Va.jsx)(lE,{href:"/register",className:"".concat(!G||c?"bg-green":"bg-white"," px-8 py-2 rounded-full text-primary shadow-md"),children:"Sign Up"}),M&&(0,Va.jsx)(lE,{href:"/dashboard",children:(0,Va.jsx)(hE,{children:(0,Va.jsx)("img",{src:DE,alt:"",className:"w-full h-full object-cover"})})})]}),(0,Va.jsx)("div",{className:"icon flex items-center justify-center gap-6 ".concat(c||!G?"text-primary":"text-white"),children:(0,Va.jsx)("button",{onClick:()=>{a(!s)},className:"lg:hidden w-10 h-10 flex justify-center items-center bg-black text-white focus:outline-none",children:s?(0,Va.jsx)(IE,{size:24}):(0,Va.jsx)(xE,{size:24})})})]})]})})})})},JA=()=>{const e="/"===de().pathname;return(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("footer",{className:" relative bg-primary py-16",children:[e&&(0,Va.jsx)("div",{className:"bg-white w-full py-20 -mt-10 rounded-b-[40px] z-10 absolute top-0"}),(0,Va.jsxs)(dE,{className:"".concat(e?"mt-32":"mt-0"," flex flex-col md:flex-row justify-between gap-12"),children:[(0,Va.jsxs)("div",{className:"w-full md:w-1/3",children:[(0,Va.jsx)("img",{src:"../images/common/Biddora2.png",alt:"",width:"160px"}),(0,Va.jsx)("br",{}),(0,Va.jsx)("p",{className:"text-gray-300",children:"Your Marketplace, Where Every Bid Unlocks Endless Possibilities!"})]}),(0,Va.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 w-full md:w-2/3",children:[(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:5,className:"text-white font-normal",children:"Categories"}),(0,Va.jsxs)("ul",{className:"flex flex-col gap-5 mt-8 text-gray-200",children:[(0,Va.jsx)("p",{children:"Electronics"}),(0,Va.jsx)("p",{children:"Books"}),(0,Va.jsx)("p",{children:"Sports & Outdoor"}),(0,Va.jsx)("p",{children:"Instruments"}),(0,Va.jsx)("p",{children:"Jewelries"}),(0,Va.jsx)("p",{children:"Toys and Games"}),(0,Va.jsx)("p",{children:"Clothes"})]})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:5,className:"text-white font-normal",children:"Discover"}),(0,Va.jsxs)("ul",{className:"flex flex-col gap-5 mt-8 text-gray-200",children:[(0,Va.jsx)("p",{children:"About Biddora"}),(0,Va.jsx)("p",{children:"Help"}),(0,Va.jsx)("p",{children:"Press"}),(0,Va.jsx)("p",{children:"Our Blog"})]})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:5,className:"text-white font-normal",children:"We are Here"}),(0,Va.jsxs)("ul",{className:"flex flex-col gap-5 mt-8 text-gray-200",children:[(0,Va.jsx)("p",{children:"Your Account"}),(0,Va.jsx)("p",{children:"Information"}),(0,Va.jsx)("p",{children:"Contact Us"})]})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:5,className:"text-white font-normal",children:"Follow Us"}),(0,Va.jsxs)("ul",{className:"flex flex-col gap-5 mt-8 text-gray-200",children:[(0,Va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Va.jsx)(WA,{size:19}),(0,Va.jsx)("span",{children:"(646) 968-0608"})]}),(0,Va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Va.jsx)(qE,{size:22}),(0,Va.jsx)("span",{children:"biddora@gmail.com"})]}),(0,Va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Va.jsx)(GA,{size:22}),(0,Va.jsx)("span",{children:"1201 Broadway Suite"})]})]})]})]})]})]})})},QA=e=>{let{children:t}=e;const n=de();return(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)(XA,{}),(0,Va.jsx)("main",{children:t}),"/chat"!==n.pathname&&(0,Va.jsx)(JA,{})]})};var ZA=function(){return ZA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ZA.apply(this,arguments)};Object.create;function $A(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var eC=n(9613),tC=n.n(eC),nC="-ms-",rC="-moz-",iC="-webkit-",oC="comm",sC="rule",aC="decl",cC="@import",lC="@keyframes",dC="@layer",uC=Math.abs,hC=String.fromCharCode,pC=Object.assign;function fC(e){return e.trim()}function mC(e,t){return(e=t.exec(e))?e[0]:e}function gC(e,t,n){return e.replace(t,n)}function vC(e,t,n){return e.indexOf(t,n)}function yC(e,t){return 0|e.charCodeAt(t)}function _C(e,t,n){return e.slice(t,n)}function EC(e){return e.length}function bC(e){return e.length}function wC(e,t){return t.push(e),e}function SC(e,t){return e.filter((function(e){return!mC(e,t)}))}var AC=1,CC=1,TC=0,RC=0,IC=0,xC="";function OC(e,t,n,r,i,o,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:AC,column:CC,length:s,return:"",siblings:a}}function NC(e,t){return pC(OC("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function DC(e){for(;e.root;)e=NC(e.root,{children:[e]});wC(e,e.siblings)}function kC(){return IC=RC<TC?yC(xC,RC++):0,CC++,10===IC&&(CC=1,AC++),IC}function PC(){return yC(xC,RC)}function LC(){return RC}function MC(e,t){return _C(xC,e,t)}function jC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function UC(e){return AC=CC=1,TC=EC(xC=e),RC=0,[]}function BC(e){return xC="",e}function FC(e){return fC(MC(RC-1,HC(91===e?e+2:40===e?e+1:e)))}function VC(e){for(;(IC=PC())&&IC<33;)kC();return jC(e)>2||jC(IC)>3?"":" "}function WC(e,t){for(;--t&&kC()&&!(IC<48||IC>102||IC>57&&IC<65||IC>70&&IC<97););return MC(e,LC()+(t<6&&32==PC()&&32==kC()))}function HC(e){for(;kC();)switch(IC){case e:return RC;case 34:case 39:34!==e&&39!==e&&HC(IC);break;case 40:41===e&&HC(e);break;case 92:kC()}return RC}function zC(e,t){for(;kC()&&e+IC!==57&&(e+IC!==84||47!==PC()););return"/*"+MC(t,RC-1)+"*"+hC(47===e?e:kC())}function GC(e){for(;!jC(PC());)kC();return MC(e,RC)}function YC(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function KC(e,t,n,r){switch(e.type){case dC:if(e.children.length)break;case cC:case aC:return e.return=e.return||e.value;case oC:return"";case lC:return e.return=e.value+"{"+YC(e.children,r)+"}";case sC:if(!EC(e.value=e.props.join(",")))return""}return EC(n=YC(e.children,r))?e.return=e.value+"{"+n+"}":""}function qC(e,t,n){switch(function(e,t){return 45^yC(e,0)?(((t<<2^yC(e,0))<<2^yC(e,1))<<2^yC(e,2))<<2^yC(e,3):0}(e,t)){case 5103:return iC+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return iC+e+e;case 4789:return rC+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return iC+e+rC+e+nC+e+e;case 5936:switch(yC(e,t+11)){case 114:return iC+e+nC+gC(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return iC+e+nC+gC(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return iC+e+nC+gC(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return iC+e+nC+e+e;case 6165:return iC+e+nC+"flex-"+e+e;case 5187:return iC+e+gC(e,/(\w+).+(:[^]+)/,iC+"box-$1$2"+nC+"flex-$1$2")+e;case 5443:return iC+e+nC+"flex-item-"+gC(e,/flex-|-self/g,"")+(mC(e,/flex-|baseline/)?"":nC+"grid-row-"+gC(e,/flex-|-self/g,""))+e;case 4675:return iC+e+nC+"flex-line-pack"+gC(e,/align-content|flex-|-self/g,"")+e;case 5548:return iC+e+nC+gC(e,"shrink","negative")+e;case 5292:return iC+e+nC+gC(e,"basis","preferred-size")+e;case 6060:return iC+"box-"+gC(e,"-grow","")+iC+e+nC+gC(e,"grow","positive")+e;case 4554:return iC+gC(e,/([^-])(transform)/g,"$1"+iC+"$2")+e;case 6187:return gC(gC(gC(e,/(zoom-|grab)/,iC+"$1"),/(image-set)/,iC+"$1"),e,"")+e;case 5495:case 3959:return gC(e,/(image-set\([^]*)/,iC+"$1$`$1");case 4968:return gC(gC(e,/(.+:)(flex-)?(.*)/,iC+"box-pack:$3"+nC+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+iC+e+e;case 4200:if(!mC(e,/flex-|baseline/))return nC+"grid-column-align"+_C(e,t)+e;break;case 2592:case 3360:return nC+gC(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,mC(e.props,/grid-\w+-end/)}))?~vC(e+(n=n[t].value),"span",0)?e:nC+gC(e,"-start","")+e+nC+"grid-row-span:"+(~vC(n,"span",0)?mC(n,/\d+/):+mC(n,/\d+/)-+mC(e,/\d+/))+";":nC+gC(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return mC(e.props,/grid-\w+-start/)}))?e:nC+gC(gC(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return gC(e,/(.+)-inline(.+)/,iC+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(EC(e)-1-t>6)switch(yC(e,t+1)){case 109:if(45!==yC(e,t+4))break;case 102:return gC(e,/(.+:)(.+)-([^]+)/,"$1"+iC+"$2-$3$1"+rC+(108==yC(e,t+3)?"$3":"$2-$3"))+e;case 115:return~vC(e,"stretch",0)?qC(gC(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return gC(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,o,s,a){return nC+n+":"+r+a+(i?nC+n+"-span:"+(o?s:+s-+r)+a:"")+e}));case 4949:if(121===yC(e,t+6))return gC(e,":",":"+iC)+e;break;case 6444:switch(yC(e,45===yC(e,14)?18:11)){case 120:return gC(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+iC+(45===yC(e,14)?"inline-":"")+"box$3$1"+iC+"$2$3$1"+nC+"$2box$3")+e;case 100:return gC(e,":",":"+nC)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return gC(e,"scroll-","scroll-snap-")+e}return e}function XC(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case aC:return void(e.return=qC(e.value,e.length,n));case lC:return YC([NC(e,{value:gC(e.value,"@","@"+iC)})],r);case sC:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(mC(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":DC(NC(e,{props:[gC(t,/:(read-\w+)/,":"+rC+"$1")]})),DC(NC(e,{props:[t]})),pC(e,{props:SC(n,r)});break;case"::placeholder":DC(NC(e,{props:[gC(t,/:(plac\w+)/,":"+iC+"input-$1")]})),DC(NC(e,{props:[gC(t,/:(plac\w+)/,":"+rC+"$1")]})),DC(NC(e,{props:[gC(t,/:(plac\w+)/,nC+"input-$1")]})),DC(NC(e,{props:[t]})),pC(e,{props:SC(n,r)})}return""}))}}function JC(e){return BC(QC("",null,null,null,[""],e=UC(e),0,[0],e))}function QC(e,t,n,r,i,o,s,a,c){for(var l=0,d=0,u=s,h=0,p=0,f=0,m=1,g=1,v=1,y=0,_="",E=i,b=o,w=r,S=_;g;)switch(f=y,y=kC()){case 40:if(108!=f&&58==yC(S,u-1)){-1!=vC(S+=gC(FC(y),"&","&\f"),"&\f",uC(l?a[l-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=FC(y);break;case 9:case 10:case 13:case 32:S+=VC(f);break;case 92:S+=WC(LC()-1,7);continue;case 47:switch(PC()){case 42:case 47:wC($C(zC(kC(),LC()),t,n,c),c);break;default:S+="/"}break;case 123*m:a[l++]=EC(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+d:-1==v&&(S=gC(S,/\f/g,"")),p>0&&EC(S)-u&&wC(p>32?eT(S+";",r,n,u-1,c):eT(gC(S," ","")+";",r,n,u-2,c),c);break;case 59:S+=";";default:if(wC(w=ZC(S,t,n,l,d,i,a,_,E=[],b=[],u,o),o),123===y)if(0===d)QC(S,t,w,w,E,o,u,a,b);else switch(99===h&&110===yC(S,3)?100:h){case 100:case 108:case 109:case 115:QC(e,w,w,r&&wC(ZC(e,w,w,0,0,i,a,_,i,E=[],u,b),b),i,b,u,a,r?E:b);break;default:QC(S,w,w,w,[""],b,0,a,b)}}l=d=p=0,m=v=1,_=S="",u=s;break;case 58:u=1+EC(S),p=f;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==(IC=RC>0?yC(xC,--RC):0,CC--,10===IC&&(CC=1,AC--),IC))continue;switch(S+=hC(y),y*m){case 38:v=d>0?1:(S+="\f",-1);break;case 44:a[l++]=(EC(S)-1)*v,v=1;break;case 64:45===PC()&&(S+=FC(kC())),h=PC(),d=u=EC(_=S+=GC(LC())),y++;break;case 45:45===f&&2==EC(S)&&(m=0)}}return o}function ZC(e,t,n,r,i,o,s,a,c,l,d,u){for(var h=i-1,p=0===i?o:[""],f=bC(p),m=0,g=0,v=0;m<r;++m)for(var y=0,_=_C(e,h+1,h=uC(g=s[m])),E=e;y<f;++y)(E=fC(g>0?p[y]+" "+_:gC(_,/&\f/g,p[y])))&&(c[v++]=E);return OC(e,t,n,0===i?sC:a,c,l,d,u)}function $C(e,t,n,r){return OC(e,t,n,oC,hC(IC),_C(e,2,-2),0,r)}function eT(e,t,n,r,i){return OC(e,t,n,aC,_C(e,0,r),_C(e,r+1,-1),r,i)}var tT={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},nT="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",rT="active",iT="data-styled-version",oT="6.1.13",sT="/*!sc*/\n",aT="undefined"!=typeof window&&"HTMLElement"in window,cT=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),lT=(new Set,Object.freeze([])),dT=Object.freeze({});function uT(e,t,n){return void 0===n&&(n=dT),e.theme!==n.theme&&e.theme||t||n.theme}var hT=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),pT=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,fT=/(^-|-$)/g;function mT(e){return e.replace(pT,"-").replace(fT,"")}var gT=/(a)(d)/gi,vT=52,yT=function(e){return String.fromCharCode(e+(e>25?39:97))};function _T(e){var t,n="";for(t=Math.abs(e);t>vT;t=t/vT|0)n=yT(t%vT)+n;return(yT(t%vT)+n).replace(gT,"$1-$2")}var ET,bT=5381,wT=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ST=function(e){return wT(bT,e)};function AT(e){return _T(ST(e)>>>0)}function CT(e){return e.displayName||e.name||"Component"}function TT(e){return"string"==typeof e&&!0}var RT="function"==typeof Symbol&&Symbol.for,IT=RT?Symbol.for("react.memo"):60115,xT=RT?Symbol.for("react.forward_ref"):60112,OT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},NT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},DT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kT=((ET={})[xT]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ET[IT]=DT,ET);function PT(e){return("type"in(t=e)&&t.type.$$typeof)===IT?DT:"$$typeof"in e?kT[e.$$typeof]:OT;var t}var LT=Object.defineProperty,MT=Object.getOwnPropertyNames,jT=Object.getOwnPropertySymbols,UT=Object.getOwnPropertyDescriptor,BT=Object.getPrototypeOf,FT=Object.prototype;function VT(e,t,n){if("string"!=typeof t){if(FT){var r=BT(t);r&&r!==FT&&VT(e,r,n)}var i=MT(t);jT&&(i=i.concat(jT(t)));for(var o=PT(e),s=PT(t),a=0;a<i.length;++a){var c=i[a];if(!(c in NT||n&&n[c]||s&&c in s||o&&c in o)){var l=UT(t,c);try{LT(e,c,l)}catch(e){}}}}return e}function WT(e){return"function"==typeof e}function HT(e){return"object"==typeof e&&"styledComponentId"in e}function zT(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function GT(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function YT(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function KT(e,t,n){if(void 0===n&&(n=!1),!n&&!YT(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=KT(e[r],t[r]);else if(YT(t))for(var r in t)e[r]=KT(e[r],t[r]);return e}function qT(e,t){Object.defineProperty(e,"toString",{value:t})}function XT(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var JT=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw XT(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(sT);return t},e}(),QT=new Map,ZT=new Map,$T=1,eR=function(e){if(QT.has(e))return QT.get(e);for(;ZT.has($T);)$T++;var t=$T++;return QT.set(e,t),ZT.set(t,e),t},tR=function(e,t){$T=t+1,QT.set(e,t),ZT.set(t,e)},nR="style[".concat(nT,"][").concat(iT,'="').concat(oT,'"]'),rR=new RegExp("^".concat(nT,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),iR=function(e,t,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&e.registerName(t,r)},oR=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(sT),i=[],o=0,s=r.length;o<s;o++){var a=r[o].trim();if(a){var c=a.match(rR);if(c){var l=0|parseInt(c[1],10),d=c[2];0!==l&&(tR(d,l),iR(e,d,c[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}},sR=function(e){for(var t=document.querySelectorAll(nR),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(nT)!==rT&&(oR(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function aR(){return n.nc}var cR=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(nT,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(nT,rT),r.setAttribute(iT,oT);var s=aR();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},lR=function(){function e(e){this.element=cR(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw XT(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),dR=function(){function e(e){this.element=cR(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),uR=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),hR=aT,pR={isServer:!aT,useCSSOMInjection:!cT},fR=function(){function e(e,t,n){void 0===e&&(e=dT),void 0===t&&(t={});var r=this;this.options=ZA(ZA({},pR),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&aT&&hR&&(hR=!1,sR(this)),qT(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return ZT.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),s=t.getGroup(n);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(nT,".g").concat(n,'[id="').concat(i,'"]'),c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(s).concat(a,'{content:"').concat(c,'"}').concat(sT)},o=0;o<n;o++)i(o);return r}(r)}))}return e.registerId=function(e){return eR(e)},e.prototype.rehydrate=function(){!this.server&&aT&&sR(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(ZA(ZA({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new uR(n):t?new lR(n):new dR(n)}(this.options),new JT(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(eR(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(eR(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(eR(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),mR=/&/g,gR=/^\s*\/\/.*$/gm;function vR(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=vR(e.children,t)),e}))}function yR(e){var t,n,r,i=void 0===e?dT:e,o=i.options,s=void 0===o?dT:o,a=i.plugins,c=void 0===a?lT:a,l=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},d=c.slice();d.push((function(e){e.type===sC&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(mR,n).replace(r,l))})),s.prefix&&d.push(XC),d.push(KC);var u=function(e,i,o,a){void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(gR,""),l=JC(o||i?"".concat(o," ").concat(i," { ").concat(c," }"):c);s.namespace&&(l=vR(l,s.namespace));var u=[];return YC(l,function(e){var t=bC(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}(d.concat(function(e){return function(t){t.root||(t=t.return)&&e(t)}}((function(e){return u.push(e)}))))),u};return u.hash=c.length?c.reduce((function(e,t){return t.name||XT(15),wT(e,t.name)}),bT).toString():"",u}var _R=new fR,ER=yR(),bR=t.createContext({shouldForwardProp:void 0,styleSheet:_R,stylis:ER}),wR=(bR.Consumer,t.createContext(void 0));function SR(){return(0,t.useContext)(bR)}function AR(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=SR().styleSheet,s=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,t.useMemo)((function(){return yR({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})}),[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)((function(){tC()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}}),[e.shouldForwardProp,s,a]);return t.createElement(bR.Provider,{value:c},t.createElement(wR.Provider,{value:a},e.children))}var CR=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ER);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,qT(this,(function(){throw XT(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=ER),this.name+e.hash},e}(),TR=function(e){return e>="A"&&e<="Z"};function RR(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;TR(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var IR=function(e){return null==e||!1===e||""===e},xR=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!IR(o)&&(Array.isArray(o)&&o.isCss||WT(o)?r.push("".concat(RR(i),":"),o,";"):YT(o)?r.push.apply(r,$A($A(["".concat(i," {")],xR(o),!1),["}"],!1)):r.push("".concat(RR(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in tT||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function OR(e,t,n,r){return IR(e)?[]:HT(e)?[".".concat(e.styledComponentId)]:WT(e)?!WT(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:OR(e(t),t,n,r):e instanceof CR?n?(e.inject(n,r),[e.getName(r)]):[e]:YT(e)?xR(e):Array.isArray(e)?Array.prototype.concat.apply(lT,e.map((function(e){return OR(e,t,n,r)}))):[e.toString()];var i}function NR(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(WT(n)&&!HT(n))return!1}return!0}var DR=ST(oT),kR=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&NR(e),this.componentId=t,this.baseHash=wT(DR,t),this.baseStyle=n,fR.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=zT(r,this.staticRulesId);else{var i=GT(OR(this.rules,e,t,n)),o=_T(wT(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}r=zT(r,o),this.staticRulesId=o}else{for(var a=wT(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var d=this.rules[l];if("string"==typeof d)c+=d;else if(d){var u=GT(OR(d,e,t,n));a=wT(a,u+l),c+=u}}if(c){var h=_T(a>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(c,".".concat(h),void 0,this.componentId)),r=zT(r,h)}}return r},e}(),PR=t.createContext(void 0);PR.Consumer;var LR={};new Set;function MR(e,n,r){var i=HT(e),o=e,s=!TT(e),a=n.attrs,c=void 0===a?lT:a,l=n.componentId,d=void 0===l?function(e,t){var n="string"!=typeof e?"sc":mT(e);LR[n]=(LR[n]||0)+1;var r="".concat(n,"-").concat(AT(oT+n+LR[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):l,u=n.displayName,h=void 0===u?function(e){return TT(e)?"styled.".concat(e):"Styled(".concat(CT(e),")")}(e):u,p=n.displayName&&n.componentId?"".concat(mT(n.displayName),"-").concat(n.componentId):n.componentId||d,f=i&&o.attrs?o.attrs.concat(c).filter(Boolean):c,m=n.shouldForwardProp;if(i&&o.shouldForwardProp){var g=o.shouldForwardProp;if(n.shouldForwardProp){var v=n.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var y=new kR(r,p,i?o.componentStyle:void 0);function _(e,n){return function(e,n,r){var i=e.attrs,o=e.componentStyle,s=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,d=t.useContext(PR),u=SR(),h=e.shouldForwardProp||u.shouldForwardProp,p=uT(n,d,s)||dT,f=function(e,t,n){for(var r,i=ZA(ZA({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var s=WT(r=e[o])?r(i):r;for(var a in s)i[a]="className"===a?zT(i[a],s[a]):"style"===a?ZA(ZA({},i[a]),s[a]):s[a]}return t.className&&(i.className=zT(i.className,t.className)),i}(i,n,p),m=f.as||l,g={};for(var v in f)void 0===f[v]||"$"===v[0]||"as"===v||"theme"===v&&f.theme===p||("forwardedAs"===v?g.as=f.forwardedAs:h&&!h(v,m)||(g[v]=f[v]));var y=function(e,t){var n=SR();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,f),_=zT(a,c);return y&&(_+=" "+y),f.className&&(_+=" "+f.className),g[TT(m)&&!hT.has(m)?"class":"className"]=_,g.ref=r,(0,t.createElement)(m,g)}(E,e,n)}_.displayName=h;var E=t.forwardRef(_);return E.attrs=f,E.componentStyle=y,E.displayName=h,E.shouldForwardProp=m,E.foldedComponentIds=i?zT(o.foldedComponentIds,o.styledComponentId):"",E.styledComponentId=p,E.target=i?o.target:e,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)KT(e,i[r],!0);return e}({},o.defaultProps,e):e}}),qT(E,(function(){return".".concat(E.styledComponentId)})),s&&VT(E,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function jR(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var UR=function(e){return Object.assign(e,{isCss:!0})};function BR(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(WT(e)||YT(e))return UR(OR(jR(lT,$A([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?OR(r):UR(OR(jR(r,t)))}function FR(e,t,n){if(void 0===n&&(n=dT),!t)throw XT(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,BR.apply(void 0,$A([r],i,!1)))};return r.attrs=function(r){return FR(e,t,ZA(ZA({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return FR(e,t,ZA(ZA({},n),r))},r}var VR=function(e){return FR(MR,e)},WR=VR;hT.forEach((function(e){WR[e]=VR(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=NR(e),fR.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(GT(OR(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&fR.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();function HR(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=GT(BR.apply(void 0,$A([e],t,!1))),i=AT(r);return new CR(i,r)}var zR,GR,YR,KR,qR,XR,JR,QR,ZR;(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=aR(),r=GT([n&&'nonce="'.concat(n,'"'),"".concat(nT,'="true"'),"".concat(iT,'="').concat(oT,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw XT(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw XT(2);var r=e.instance.toString();if(!r)return[];var i=((n={})[nT]="",n[iT]=oT,n.dangerouslySetInnerHTML={__html:r},n),o=aR();return o&&(i.nonce=o),[t.createElement("style",ZA({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new fR({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw XT(2);return t.createElement(AR,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw XT(3)}})(),"__sc-".concat(nT,"__");const $R="#4fa94d",eI={"aria-busy":!0,role:"progressbar"},tI=WR.div(zR||(zR=nd(["\n  display: ",";\n"])),(e=>e.$visible?"flex":"none")),nI=242.776657104492,rI=HR(GR||(GR=nd(["\n12.5% {\n  stroke-dasharray: ","px, ","px;\n  stroke-dashoffset: -","px;\n}\n43.75% {\n  stroke-dasharray: ","px, ","px;\n  stroke-dashoffset: -","px;\n}\n100% {\n  stroke-dasharray: ","px, ","px;\n  stroke-dashoffset: -","px;\n}\n"])),33.98873199462888,nI,26.70543228149412,84.97182998657219,nI,84.97182998657219,2.42776657104492,nI,240.34889053344708),iI=(WR.path(YR||(YR=nd(["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"])),2.42776657104492,nI,rI,1.6),(e,t,n)=>{const r=Math.max(e,t),i=-n-r/2+1,o=2*n+r;return[i,i,o,o].join(" ")}),oI=e=>{let{height:t=80,width:n=80,color:r=$R,secondaryColor:i=$R,ariaLabel:o="oval-loading",wrapperStyle:s,wrapperClass:a,visible:c=!0,strokeWidth:l=2,strokeWidthSecondary:d}=e;return(0,Va.jsx)(tI,u(u({style:s,$visible:c,className:a,"data-testid":"oval-loading","aria-label":o},eI),{},{children:(0,Va.jsx)("svg",{width:n,height:t,viewBox:iI(Number(l),Number(d||l),20),xmlns:"http://www.w3.org/2000/svg",stroke:r,"data-testid":"oval-svg",children:(0,Va.jsx)("g",{fill:"none",fillRule:"evenodd",children:(0,Va.jsxs)("g",{transform:"translate(1 1)",strokeWidth:Number(d||l),"data-testid":"oval-secondary-group",children:[(0,Va.jsx)("circle",{strokeOpacity:".5",cx:"0",cy:"0",r:20,stroke:i,strokeWidth:l}),(0,Va.jsx)("path",{d:(h=20,["M"+h+" 0c0-9.94-8.06",h,h,h].join("-")),children:(0,Va.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 0 0",to:"360 0 0",dur:"1s",repeatCount:"indefinite"})})]})})})}));var h},sI=HR(KR||(KR=nd(["\nto {\n   transform: rotate(360deg);\n }\n"]))),aI=(WR.svg(qR||(qR=nd(["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: 0.75s;\n"])),sI),WR.polyline(XR||(XR=nd(["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])),(e=>e.width)),HR(JR||(JR=nd(["\nto {\n   stroke-dashoffset: 136;\n }\n"])))),cI=(WR.polygon(QR||(QR=nd(["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])),aI),WR.svg(ZR||(ZR=nd(["\n  transform-origin: 50% 65%;\n"]))),{name:"",email:"",password:"",confirmPassword:"",phone:"",address:""}),lI=()=>{const e=vv(),n=pe(),[r,i]=(0,t.useState)(cI),{name:o,email:s,password:a,confirmPassword:c,phone:l}=r,{isRegister:d,message:h,isError:p,isLoading:f}=ov((e=>e.auth)),[m,g]=(0,t.useState)([]),[v,y]=(0,t.useState)([]),[_,E]=(0,t.useState)([]),[b,w]=(0,t.useState)(""),[S,A]=(0,t.useState)(""),[C,T]=(0,t.useState)(""),[R,I]=(0,t.useState)(""),[x,O]=(0,t.useState)(""),[N,D]=(0,t.useState)(""),[k,P]=(0,t.useState)(""),[L,M]=(0,t.useState)(!1),[j,U]=(0,t.useState)(!1),[B,F]=(0,t.useState)(!1),V=e=>{const{name:t,value:n}=e.target;i(u(u({},r),{},{[t]:n}))},W=()=>{F(!B)},H=e=>{e.preventDefault(),M(e.target.checked)},z=()=>(0,Va.jsx)("div",{className:"modal-overlay",children:(0,Va.jsxs)("div",{className:"modal-content",children:[(0,Va.jsxs)("header",{children:[(0,Va.jsx)("button",{onClick:W,className:"close-btn",children:"\xd7"}),(0,Va.jsx)("h1",{children:"Terms & Conditions"})]}),(0,Va.jsxs)("div",{className:"modal-body",children:[(0,Va.jsx)(dI,{})," ",(0,Va.jsxs)("div",{className:"py-2 flex items-center",children:[(0,Va.jsx)("input",{type:"checkbox",checked:L,onChange:H}),(0,Va.jsx)("span",{className:"ml-2",children:"I agree to the Terms & Conditions"})]})]}),(0,Va.jsx)("footer",{children:(0,Va.jsx)("button",{onClick:W,children:"Close"})})]})});if((0,t.useEffect)((()=>(d&&n("/login"),p&&Jt.error(h||"Registration failed"),()=>{e(m_())})),[e,d,p,h,n]),(0,t.useEffect)((()=>(document.body.style.overflow=j?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[j]),(0,t.useEffect)((()=>{xi.get("https://provinces.open-api.vn/api/p/").then((e=>g(e.data))).catch((e=>console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch t\u1ec9nh:",e)))}),[]),(0,t.useEffect)((()=>{const e="".concat(N?N+", ":"").concat(x?x+", ":"").concat(R);P((t=>t.includes(e)?t:e))}),[R,x,N]),f)return(0,Va.jsx)(oI,{visible:!0,height:"80",width:"80",color:"#4fa94d",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""});return(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsxs)("section",{className:"regsiter pt-16 relative",children:[(0,Va.jsx)("div",{className:"bg-green w-96 h-96 rounded-full opacity-20 blur-3xl absolute top-2/3"}),(0,Va.jsx)("div",{className:"bg-[#241C37] pt-8 h-[40vh] relative content",children:(0,Va.jsx)(dE,{children:(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:3,className:"text-white",children:"Sign Up"}),(0,Va.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Va.jsx)(oE,{level:5,className:"text-green font-normal text-xl",children:"Home"}),(0,Va.jsx)(oE,{level:5,className:"text-white font-normal text-xl",children:"/"}),(0,Va.jsx)(oE,{level:5,className:"text-white font-normal text-xl",children:"Sign Up"})]})]})})}),(0,Va.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!o||!s||!a||!c)return Jt.error("All fields are required");if(a.length<6)return Jt.error("Password must be at least 6 characters");if(a!==c)return Jt.error("Password does not match");if(!L)return Jt.error("You must agree to the Terms and Conditions!");const n=function(e){const t={"\xe1":"a","\xe0":"a","\u1ea3":"a","\xe3":"a","\u1ea1":"a","\u0103":"a","\u1eaf":"a","\u1eb1":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe2":"a","\u1ea5":"a","\u1ea7":"a","\u1ea9":"a","\u1eab":"a","\u1ead":"a","\xe9":"e","\xe8":"e","\u1ebb":"e","\u1ebd":"e","\u1eb9":"e","\xea":"e","\u1ebf":"e","\u1ec1":"e","\u1ec3":"e","\u1ec5":"e","\u1ec7":"e","\xed":"i","\xec":"i","\u1ec9":"i","\u0129":"i","\u1ecb":"i","\xf3":"o","\xf2":"o","\u1ecf":"o","\xf5":"o","\u1ecd":"o","\xf4":"o","\u1ed1":"o","\u1ed3":"o","\u1ed5":"o","\u1ed7":"o","\u1ed9":"o","\u01a1":"o","\u1edb":"o","\u1edd":"o","\u1edf":"o","\u1ee1":"o","\u1ee3":"o","\xfa":"u","\xf9":"u","\u1ee7":"u","\u0169":"u","\u1ee5":"u","\u01b0":"u","\u1ee9":"u","\u1eeb":"u","\u1eed":"u","\u1eef":"u","\u1ef1":"u","\xfd":"y","\u1ef3":"y","\u1ef7":"y","\u1ef9":"y","\u1ef5":"y","\u0111":"d","\xc1":"A","\xc0":"A","\u1ea2":"A","\xc3":"A","\u1ea0":"A","\u0102":"A","\u1eae":"A","\u1eb0":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc2":"A","\u1ea4":"A","\u1ea6":"A","\u1ea8":"A","\u1eaa":"A","\u1eac":"A","\xc9":"E","\xc8":"E","\u1eba":"E","\u1ebc":"E","\u1eb8":"E","\xca":"E","\u1ebe":"E","\u1ec0":"E","\u1ec2":"E","\u1ec4":"E","\u1ec6":"E","\xcd":"I","\xcc":"I","\u1ec8":"I","\u0128":"I","\u1eca":"I","\xd3":"O","\xd2":"O","\u1ece":"O","\xd5":"O","\u1ecc":"O","\xd4":"O","\u1ed0":"O","\u1ed2":"O","\u1ed4":"O","\u1ed6":"O","\u1ed8":"O","\u01a0":"O","\u1eda":"O","\u1edc":"O","\u1ede":"O","\u1ee0":"O","\u1ee2":"O","\xda":"U","\xd9":"U","\u1ee6":"U","\u0168":"U","\u1ee4":"U","\u01af":"U","\u1ee8":"U","\u1eea":"U","\u1eec":"U","\u1eee":"U","\u1ef0":"U","\xdd":"Y","\u1ef2":"Y","\u1ef6":"Y","\u1ef8":"Y","\u1ef4":"Y","\u0110":"D"};return e.split("").map((e=>t[e]||e)).join("")}(k);e(u_({name:o,email:s,password:a,address:n,phone:l}))},className:"bg-white shadow-s3 w-1/3 m-auto my-16 p-8 rounded-xl",children:[(0,Va.jsxs)("div",{className:"text-center",children:[(0,Va.jsx)(oE,{level:5,children:"Sign Up"}),(0,Va.jsxs)("p",{className:"mt-2 text-lg",children:["Do you already have an account? ",(0,Va.jsx)(lE,{href:"/login",children:"Log In Here"})]})]}),(0,Va.jsxs)("div",{className:"py-2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Username *"}),(0,Va.jsx)("input",{type:"text",name:"name",value:o,onChange:V,className:fE,placeholder:"First Name"})]}),(0,Va.jsxs)("div",{className:"py-2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Enter Your Email *"}),(0,Va.jsx)("input",{type:"email",name:"email",value:s,onChange:V,className:fE,placeholder:"Enter Your Email"})]}),(0,Va.jsxs)("div",{className:"py-2 font-[500] text-gray_100",children:[(0,Va.jsx)("label",{children:"Province/City:"}),(0,Va.jsxs)("select",{value:b,onChange:async e=>{const t=e.target.value;w(t),A(""),T(""),y([]),E([]);const n=m.find((e=>e.code===Number(t)));if(I((null===n||void 0===n?void 0:n.name)||""),t)try{const e=await xi.get("https://provinces.open-api.vn/api/p/".concat(t,"?depth=2"));y(e.data.districts)}catch(r){console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch huy\u1ec7n:",r)}},className:At(fE),children:[(0,Va.jsx)("option",{value:"",children:"-- Select province/city--"}),m.map((e=>(0,Va.jsx)("option",{value:e.code,children:e.name},e.code)))]}),(0,Va.jsx)("label",{children:"District:"}),(0,Va.jsxs)("select",{value:S,onChange:async e=>{const t=e.target.value;A(t),T(""),E([]);const n=v.find((e=>e.code===Number(t)));if(O((null===n||void 0===n?void 0:n.name)||""),t)try{const e=await xi.get("https://provinces.open-api.vn/api/d/".concat(t,"?depth=2"));E(e.data.wards)}catch(r){console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch x\xe3/ph\u01b0\u1eddng:",r)}},disabled:!b,className:At(fE),children:[(0,Va.jsx)("option",{value:"",children:"-- Select District --"}),v.map((e=>(0,Va.jsx)("option",{value:e.code,children:e.name},e.code)))]}),(0,Va.jsx)("label",{children:"Commune/Ward:"}),(0,Va.jsxs)("select",{value:C,onChange:e=>{const t=e.target.value;T(t);const n=_.find((e=>e.code===Number(t)));D((null===n||void 0===n?void 0:n.name)||"")},disabled:!S,className:At(fE),children:[(0,Va.jsx)("option",{value:"",children:"-- Select Commune/Ward --"}),_.map((e=>(0,Va.jsx)("option",{value:e.code,children:e.name},e.code)))]})]}),(0,Va.jsxs)("div",{className:"py-2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Address Detail"}),(0,Va.jsx)("textarea",{name:"address",value:k,onChange:e=>{P(e.target.value)},className:fE,placeholder:"Enter detailed address (house number, street...)"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Number Phone *"}),(0,Va.jsx)("input",{type:"number",name:"phone",value:l,onChange:V,className:fE,placeholder:"Enter Your Password"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Password *"}),(0,Va.jsx)("input",{type:"password",name:"password",value:a,onChange:V,className:fE,placeholder:"Enter Your Password"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Confirm Password *"}),(0,Va.jsx)("input",{type:"password",name:"confirmPassword",value:c,onChange:V,className:fE,placeholder:"Confirm password"})]}),(0,Va.jsx)("div",{className:"py-2 text-center",children:(0,Va.jsx)("button",{type:"button",onClick:W,className:"text-blue-600 hover:underline",children:"View Terms & Conditions"})}),(0,Va.jsx)(uE,{className:"w-full rounded-none my-5",disabled:!L,children:"CREATE ACCOUNT"}),(0,Va.jsxs)("div",{className:"text-center border py-4 rounded-lg mt-4",children:[(0,Va.jsx)(oE,{children:"OR SIGN UP WITH"}),(0,Va.jsxs)("div",{className:"flex items-center justify-center gap-5 mt-5",children:[(0,Va.jsxs)("button",{className:"flex items-center gap-2 bg-red-500 text-white p-3 px-5 rounded-sm",children:[(0,Va.jsx)(Mg,{}),(0,Va.jsx)("p",{className:"text-sm",children:"SIGNUP WHIT GOOGLE"})]}),(0,Va.jsxs)("button",{className:"flex items-center gap-2 bg-indigo-500 text-white p-3 px-5 rounded-sm",children:[(0,Va.jsx)(Lg,{}),(0,Va.jsx)("p",{className:"text-sm",children:"SIGN UP WITH FACEBOOK"})]})]})]}),(0,Va.jsxs)("p",{className:"text-center mt-5",children:["By clicking the signup button, you create a Biddora account, and you agree to Biddora ",(0,Va.jsx)("span",{className:"text-green underline",children:"Terms & Conditions"})," &",(0,Va.jsx)("span",{className:"text-green underline",children:" Privacy Policy "})," ."]})]}),(0,Va.jsx)("div",{className:"bg-green w-96 h-96 rounded-full opacity-20 blur-3xl absolute bottom-96 right-0"}),B&&(0,Va.jsx)(z,{})]}),(0,Va.jsx)("style",{jsx:!0,children:"\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.7);\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          z-index: 9999;\n        }\n\n        .modal-content {\n          background-color: white;\n          padding: 20px;\n          border-radius: 8px;\n          width: 80%;\n          max-width: 600px;\n          max-height: 70%;\n          overflow-y: auto;\n        }\n\n        .modal-content header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .modal-content footer {\n          text-align: right;\n          margin-top: 20px;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n        }\n\n        .modal-body {\n          padding: 10px;\n        }\n\n        .modal-body h2 {\n          font-size: 18px;\n          font-weight: bold;\n          margin-top: 20px;\n        }\n\n        .modal-body p {\n          font-size: 16px;\n          margin-top: 10px;\n        }\n      "})]})},dI=()=>(0,Va.jsx)("div",{style:{fontFamily:"Arial, sans-serif"},children:(0,Va.jsx)("div",{style:{padding:"16px"},children:(0,Va.jsxs)("div",{children:[(0,Va.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold"},children:"Terms & Conditions"}),(0,Va.jsx)("p",{style:{fontSize:"16px",marginTop:"20px"},children:"By using this application, you agree to the terms and conditions set forth in this document. Please read them carefully before using the services provided by us."}),(0,Va.jsx)("h3",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},children:"1. Introduction"}),(0,Va.jsx)("p",{style:{fontSize:"16px",marginTop:"10px"},children:"By using this application, you agree to the terms and conditions set forth in this document. Please read them carefully before using the services provided by us."}),(0,Va.jsx)("h3",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},children:"2. User Responsibilities"}),(0,Va.jsx)("p",{style:{fontSize:"16px",marginTop:"10px"},children:"You are responsible for maintaining the confidentiality of your account and password, and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),(0,Va.jsx)("h3",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},children:"3. Privacy Policy"}),(0,Va.jsx)("p",{style:{fontSize:"16px",marginTop:"10px"},children:"We value your privacy. Your personal information will only be used in accordance with our privacy policy, which is available on our website."}),(0,Va.jsx)("h3",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},children:"4. Limitations of Liability"}),(0,Va.jsx)("p",{style:{fontSize:"16px",marginTop:"10px"},children:"We are not liable for any damages or losses that result from your use of the application, including but not limited to financial loss, reputational damage, or legal issues."}),(0,Va.jsx)("h3",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},children:"5. Amendments"}),(0,Va.jsx)("p",{style:{fontSize:"16px",marginTop:"10px"},children:"We reserve the right to amend these terms at any time. Any changes will be effective immediately upon posting on this page. You are responsible for reviewing these terms periodically."}),(0,Va.jsx)("h3",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},children:"6. Contact Us"}),(0,Va.jsx)("p",{style:{fontSize:"16px",marginTop:"10px"},children:"If you have any questions or concerns about our Terms & Conditions, please contact us at support@example.com."})]})})}),uI={email:"",password:""},hI=()=>{const e=vv(),n=pe(),[r,i]=(0,t.useState)(uI),{email:o,password:s}=r,{isLoggedIn:a,message:c,isError:l}=ov((e=>e.auth)),d=e=>{const{name:t,value:n}=e.target;i(u(u({},r),{},{[t]:n}))};return(0,t.useEffect)((()=>{a&&n("/"),l&&(Jt.error(c||"Login failed"),e(m_()))}),[e,a,l,c,n]),(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:" pt-16 relative",children:[(0,Va.jsx)("div",{className:"bg-green w-96 h-96 rounded-full opacity-20 blur-3xl absolute top-2/3"}),(0,Va.jsx)("div",{className:"bg-[#241C37] pt-8 h-[40vh] relative",children:(0,Va.jsx)(dE,{children:(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:3,className:"text-white",children:"Log In"}),(0,Va.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Va.jsx)(oE,{level:5,className:"text-green font-normal text-xl",children:"Home"}),(0,Va.jsx)(oE,{level:5,className:"text-white font-normal text-xl",children:"/"}),(0,Va.jsx)(oE,{level:5,className:"text-white font-normal text-xl",children:"Log In"})]})]})})}),(0,Va.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!o||!s)return Jt.error("All fields are required");e(h_({email:o,password:s}))},className:"bg-white shadow-s3 w-1/3 m-auto my-16 p-8 rounded-xl",children:[(0,Va.jsxs)("div",{className:"text-center",children:[(0,Va.jsx)(oE,{level:5,children:"New Member"}),(0,Va.jsxs)("p",{className:"mt-2 text-lg",children:["Do you already have an account? ",(0,Va.jsx)(lE,{href:"/register",children:"Signup Here"})]})]}),(0,Va.jsxs)("div",{className:"py-5 mt-8",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Enter Your Email *"}),(0,Va.jsx)("input",{type:"email",name:"email",value:o,onChange:d,className:fE,placeholder:"Enter Your Email",required:!0})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Password *"}),(0,Va.jsx)("input",{type:"password",name:"password",value:s,onChange:d,className:fE,placeholder:"Enter Your Password",required:!0})]}),(0,Va.jsx)("div",{className:"flex items-center gap-2 py-4",children:(0,Va.jsx)(ft,{to:"/forgot-password",className:"text-blue-600",children:"Forgot password"})}),(0,Va.jsx)(uE,{className:"w-full rounded-none my-5",children:"LOGIN"}),(0,Va.jsxs)("div",{className:"text-center border py-4 rounded-lg mt-4",children:[(0,Va.jsx)(oE,{children:"OR SIGNIN WITH"}),(0,Va.jsxs)("div",{className:"flex items-center justify-center gap-5 mt-5",children:[(0,Va.jsxs)("button",{className:"flex items-center gap-2 bg-red-500 text-white p-3 px-5 rounded-sm",children:[(0,Va.jsx)(Mg,{}),(0,Va.jsx)("p",{className:"text-sm",children:"SIGNIN WITH GOOGLE"})]}),(0,Va.jsxs)("button",{className:"flex items-center gap-2 bg-indigo-500 text-white p-3 px-5 rounded-sm",children:[(0,Va.jsx)(Lg,{}),(0,Va.jsx)("p",{className:"text-sm",children:"SIGNIN WITH FACEBOOK"})]})]})]}),(0,Va.jsxs)("p",{className:"text-center mt-5",children:["By clicking the signup button, you create a Biddora account, and you agree to Biddora ",(0,Va.jsx)("span",{className:"text-green underline",children:"Terms & Conditions"})," &",(0,Va.jsx)("span",{className:"text-green underline",children:" Privacy Policy "})," ."]})]}),(0,Va.jsx)("div",{className:"bg-green w-96 h-96 rounded-full opacity-20 blur-3xl absolute bottom-96 right-0"})]})})},pI=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"regsiter pt-16 relative",children:[(0,Va.jsx)("div",{className:"bg-green w-96 h-96 rounded-full opacity-20 blur-3xl absolute top-2/3"}),(0,Va.jsx)("div",{className:"bg-[#241C37] pt-8 h-[40vh] relative content",children:(0,Va.jsx)(dE,{children:(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:3,className:"text-white",children:"Login Seller"}),(0,Va.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Va.jsx)(oE,{level:5,className:"text-green font-normal text-xl",children:"Home"}),(0,Va.jsx)(oE,{level:5,className:"text-white font-normal text-xl",children:"/"}),(0,Va.jsx)(oE,{level:5,className:"text-white font-normal text-xl",children:"Seller"})]})]})})}),(0,Va.jsxs)("form",{className:"bg-white shadow-s3 w-1/3 m-auto my-16 p-8 rounded-xl",children:[(0,Va.jsxs)("div",{className:"text-center",children:[(0,Va.jsx)(oE,{level:5,children:"New Seller Member"}),(0,Va.jsxs)("p",{className:"mt-2 text-lg",children:["Do you already have an account? ",(0,Va.jsx)(lE,{href:"/create-account",children:"Signup Here"})]})]}),(0,Va.jsxs)("div",{className:"py-5 mt-8",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Enter Your Email *"}),(0,Va.jsx)("input",{type:"email",name:"email",className:fE,placeholder:"Enter Your Email"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Password *"}),(0,Va.jsx)("input",{type:"password",name:"password",className:fE,placeholder:"Enter Your Password"})]}),(0,Va.jsxs)("div",{className:"flex items-center gap-2 py-4",children:[(0,Va.jsx)("input",{type:"checkbox"}),(0,Va.jsx)(aE,{children:"I agree to the Terms & Policy"})]}),(0,Va.jsx)(uE,{className:"w-full rounded-none my-5 uppercase",children:"Become Seller"}),(0,Va.jsxs)("div",{className:"text-center border py-4 rounded-lg mt-4",children:[(0,Va.jsx)(oE,{children:"OR SIGNIN WITH"}),(0,Va.jsxs)("div",{className:"flex items-center justify-center gap-5 mt-5",children:[(0,Va.jsxs)("button",{className:"flex items-center gap-2 bg-red-500 text-white p-3 px-5 rounded-sm",children:[(0,Va.jsx)(Mg,{}),(0,Va.jsx)("p",{className:"text-sm",children:"SIGNIN WITH GOOGLE"})]}),(0,Va.jsxs)("button",{className:"flex items-center gap-2 bg-indigo-500 text-white p-3 px-5 rounded-sm",children:[(0,Va.jsx)(Lg,{}),(0,Va.jsx)("p",{className:"text-sm",children:"SIGNIN WITH FACEBOOK"})]})]})]}),(0,Va.jsxs)("p",{className:"text-center mt-5",children:["By clicking the signup button, you create a Biddora account, and you agree to Biddora ",(0,Va.jsx)("span",{className:"text-green underline",children:"Terms & Conditions"})," &",(0,Va.jsx)("span",{className:"text-green underline",children:" Privacy Policy "})," ."]})]}),(0,Va.jsx)("div",{className:"bg-green w-96 h-96 rounded-full opacity-20 blur-3xl absolute bottom-96 right-0"})]})}),fI=()=>(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("section",{className:"shadow-s1 p-8 rounded-lg",children:[(0,Va.jsxs)("div",{className:"profile flex items-center gap-8",children:[(0,Va.jsx)("img",{src:kE,alt:"",className:"w-24 h-24 rounded-full object-cover"}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(oE,{level:5,className:"capitalize",children:"Sunil Bk"}),(0,Va.jsx)(aE,{children:"example@gmail.com"})]})]}),(0,Va.jsxs)("form",{children:[(0,Va.jsx)("div",{className:"flex items-center gap-5 mt-10",children:(0,Va.jsxs)("div",{className:"w-full",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Full Name "}),(0,Va.jsx)("input",{type:"search",className:"capitalize ".concat(fE),placeholder:"Sunil",readOnly:!0})]})}),(0,Va.jsxs)("div",{className:"flex items-center gap-5 mt-10",children:[(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Contact Number"}),(0,Va.jsx)("input",{type:"search",className:fE,placeholder:"Contact Number"})]}),(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Email"}),(0,Va.jsx)("input",{type:"search",className:fE,placeholder:"example@gmail.com",disabled:!0})]})]}),(0,Va.jsxs)("div",{className:"my-8",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Role"}),(0,Va.jsx)("input",{type:"search",className:fE,placeholder:"admin",required:!0})]}),(0,Va.jsxs)("div",{className:"my-8",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Profile Picture"}),(0,Va.jsx)("input",{type:"search",className:fE,placeholder:"Working",required:!0})]}),(0,Va.jsx)(uE,{children:"Update Profile"})]})]})}),mI=n.p+"static/media/Contact_Hammer.22284a6b66b1e203c4d4.jpg",gI=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)({name:"",email:"",phone:"",countryCode:"",interestedIn:"",message:""}),[a,c]=(0,t.useState)(!0),[l,d]=(0,t.useState)(!0),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(""),[g,v]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{const[e,t]=await Promise.all([xi.get("https://be-pjhk4.onrender.com/api/contact/countryCodes"),xi.get("https://be-pjhk4.onrender.com/api/contact/interestedInOptions")]),r=e.data.map((e=>({name:e,phoneCode:y(e)})));n(r),i(t.data),s((e=>u(u({},e),{},{countryCode:r.length>0?r[0].name:"",interestedIn:t.data.length>0?t.data[0]:""}))),c(!1),d(!1)}catch(e){m("Error fetching options. Please try again later."),console.error("Error fetching options:",e)}})()}),[]);const y=e=>({US:"+1",UK:"+44",INDIA:"+91"}[e]||""),_=e=>{const{name:t,value:n}=e.target;s((e=>u(u({},e),{},{[t]:n})))};return(0,Va.jsxs)("div",{style:vI.container,children:[(0,Va.jsx)("h1",{style:vI.heading,children:"Contact Us"}),g?(0,Va.jsxs)("div",{style:vI.thankYouBox,children:[(0,Va.jsx)("h2",{style:vI.thankYouHeading,children:"Thank you for contacting us!"}),(0,Va.jsx)("p",{style:vI.message,children:"We will get back to you soon."}),(0,Va.jsx)("button",{onClick:()=>{v(!1),s({name:"",email:"",phone:"",countryCode:"",interestedIn:"",message:""}),m(""),window.location.reload()},style:vI.okButton,children:"OK"})]}):(0,Va.jsxs)("form",{style:vI.form,onSubmit:async e=>{if(e.preventDefault(),o.countryCode&&""!==o.countryCode)if(t=o.phone,/^[0-9]{10}$/.test(t)){var t;p(!0),m("");try{await xi.post("https://be-pjhk4.onrender.com/api/contact",o);v(!0)}catch(n){n.response?401===n.response.status?m("Unauthorized request. Please log in and try again."):400===n.response.status?m("Bad request. Please check your inputs."):m("There was an error submitting the form. Please try again."):m("Network error. Please try again later."),console.error("Error sending contact:",n)}finally{p(!1)}}else m("Please enter a valid 10-digit phone number.");else m("Please select a valid country code.")},children:[(0,Va.jsxs)("div",{style:vI.row,children:[(0,Va.jsxs)("div",{style:vI.col,children:[(0,Va.jsx)("label",{style:vI.label,htmlFor:"name",children:"Contact Name"}),(0,Va.jsx)("input",{type:"text",name:"name",id:"name",value:o.name,onChange:_,placeholder:"Your Name",required:!0,style:vI.input})]}),(0,Va.jsxs)("div",{style:vI.col,children:[(0,Va.jsx)("label",{style:vI.label,htmlFor:"email",children:"Email Address"}),(0,Va.jsx)("input",{type:"email",name:"email",id:"email",value:o.email,onChange:_,placeholder:"Email Address",required:!0,style:vI.input})]})]}),(0,Va.jsxs)("div",{style:vI.row,children:[(0,Va.jsxs)("div",{style:vI.col,children:[(0,Va.jsx)("label",{style:vI.label,htmlFor:"countryCode",children:"Select Phone Number"}),(0,Va.jsxs)("div",{style:vI.phoneInputWrapper,children:[(0,Va.jsxs)("select",{name:"countryCode",id:"countryCode",value:o.countryCode||(e.length>0?e[0].name:""),onChange:_,required:!0,style:vI.countryCodeSelect,children:[(0,Va.jsx)("option",{value:"",disabled:!0,children:"Select Phone Number"}),a?(0,Va.jsx)("option",{children:"Loading..."}):e.map((e=>(0,Va.jsx)("option",{value:e.name,children:"".concat(e.name," (").concat(e.phoneCode,")")},e.name)))]}),(0,Va.jsx)("input",{type:"tel",name:"phone",id:"phone",value:o.phone,onChange:_,placeholder:"Phone Number",required:!0,style:vI.phoneInput})]})]}),(0,Va.jsxs)("div",{style:vI.col,children:[(0,Va.jsx)("label",{style:vI.label,htmlFor:"interestedIn",children:"Interested In"}),(0,Va.jsxs)("select",{name:"interestedIn",id:"interestedIn",value:o.interestedIn||(r.length>0?r[0]:""),onChange:_,required:!0,style:vI.select,children:[(0,Va.jsx)("option",{value:"",disabled:!0,children:"Select Interested In"}),l?(0,Va.jsx)("option",{children:"Loading..."}):r.map((e=>(0,Va.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,Va.jsxs)("div",{style:vI.formGroup,children:[(0,Va.jsx)("label",{style:vI.label,htmlFor:"message",children:"Message"}),(0,Va.jsx)("textarea",{name:"message",id:"message",value:o.message,onChange:_,placeholder:"Your Message",required:!0,style:vI.textarea,maxLength:500}),(0,Va.jsx)("div",{style:vI.characterCount,children:(0,Va.jsxs)("span",{children:[o.message.length,"/500 characters"]})})]}),f&&(0,Va.jsx)("p",{style:vI.error,children:f}),(0,Va.jsx)("button",{type:"submit",style:vI.button,disabled:h,children:h?"Sending...":"Send Contact Name"})]}),(0,Va.jsxs)("div",{style:yI.container,children:[(0,Va.jsx)("div",{style:yI.mapContainer,children:(0,Va.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d2973.2186448107423!2d-87.8695875!3d41.8235898!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880e4a1c469f4ec7%3A0x61a00d8b25ba5501!2sWestern%20Suburbs%2C%20507%20E%20Woodlawn%20Ave%2C%20La%20Grange%20Park%2C%20IL%2060526%2C%20USA!5e0!3m2!1sen!2s!4v1740899441081!5m2!1sen!2s",width:"600",height:"450",style:yI.map,allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),(0,Va.jsxs)("div",{style:yI.infoContainer,children:[(0,Va.jsx)("h2",{style:yI.heading,children:"Contact Information"}),(0,Va.jsxs)("p",{style:yI.infoText,children:[(0,Va.jsx)("strong",{children:"Location:"})," Western Suburbs, 507 E Woodlawn Ave, La Grange Park, IL 60526, USA"]}),(0,Va.jsxs)("p",{style:yI.infoText,children:[(0,Va.jsx)("strong",{children:"Phone:"})," +1 (464) 113-5652"]}),(0,Va.jsxs)("p",{style:yI.infoText,children:[(0,Va.jsx)("strong",{children:"Email:"})," Biddora@gmail.com"]}),(0,Va.jsxs)("div",{style:yI.socialLinks,children:[(0,Va.jsx)("a",{href:"https://facebook.com",style:yI.socialLink,target:"_blank",rel:"noopener noreferrer",children:(0,Va.jsx)(BA,{size:30})}),(0,Va.jsx)("a",{href:"https://google.com",style:yI.socialLink,target:"_blank",rel:"noopener noreferrer",children:(0,Va.jsx)(FA,{size:30})})]})]})]})]})},vI={container:{padding:"32px",display:"flex",flexDirection:"column",alignItems:"center",backgroundImage:"url(".concat(mI,")"),backgroundSize:"cover",backgroundPosition:"center",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"},heading:{fontSize:"36px",fontWeight:700,color:"#fff",textAlign:"center",marginBottom:"32px"},form:{width:"100%",maxWidth:"600px",backgroundColor:"#fff",padding:"24px",borderRadius:"8px",marginBottom:"32px"},row:{display:"flex",justifyContent:"space-between",gap:"16px",marginBottom:"16px"},col:{flex:"1"},label:{fontSize:"14px",fontWeight:600,color:"#333",marginBottom:"8px",display:"block"},input:{width:"100%",padding:"12px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px",marginBottom:"16px"},select:{width:"100%",padding:"12px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px",marginBottom:"16px"},phoneInputWrapper:{display:"flex",gap:"8px",alignItems:"center"},countryCodeSelect:{width:"120px",padding:"12px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px"},phoneInput:{flex:"1",padding:"12px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px"},textarea:{width:"100%",padding:"12px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px",marginBottom:"16px",minHeight:"100px"},button:{backgroundColor:"#007bff",color:"#fff",padding:"12px 20px",fontSize:"16px",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s"},error:{color:"red",fontSize:"14px",textAlign:"center",marginBottom:"16px"},thankYouBox:{backgroundColor:"#f0f8ff",padding:"24px",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},thankYouHeading:{fontSize:"24px",fontWeight:600,color:"#28a745"},message:{fontSize:"18px",color:"#28a745"},okButton:{marginTop:"16px",padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},characterCount:{fontSize:"14px",color:"#666",marginTop:"8px",textAlign:"right"}},yI={container:{display:"flex",flexDirection:"row",width:"100%",height:"60vh",border:"2px solid #ccc",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},mapContainer:{width:"60%",height:"100%"},map:{width:"100%",height:"100%",border:"none"},infoContainer:{width:"40%",padding:"20px",backgroundColor:"#f5f5f5",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",justifyContent:"center"},heading:{fontSize:"24px",fontWeight:600,color:"#333",marginBottom:"20px"},infoText:{fontSize:"16px",color:"#333",marginBottom:"10px"},socialLinks:{marginTop:"20px"},socialLink:{fontSize:"16px",color:"#007bff",textDecoration:"none",marginRight:"15px"}},_I=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)(1),[a]=(0,t.useState)(5),[c,l]=(0,t.useState)("all");(0,t.useEffect)((()=>{(async()=>{try{const e=(await xi.get("https://be-pjhk4.onrender.com/api/contact")).data.sort(((e,t)=>{const n=new Date(e.receivetime[0],e.receivetime[1]-1,e.receivetime[2],e.receivetime[3],e.receivetime[4],e.receivetime[5]);return new Date(t.receivetime[0],t.receivetime[1]-1,t.receivetime[2],t.receivetime[3],t.receivetime[4],t.receivetime[5])-n}));n(e),i(e)}catch(e){console.error("Error fetching contacts:",e)}})()}),[]),(0,t.useEffect)((()=>{(()=>{let t=[...e];const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),o=new Date(n.setHours(0,0,0,0));"today"===c?t=t.filter((e=>new Date(e.receivetime[0],e.receivetime[1]-1,e.receivetime[2],e.receivetime[3],e.receivetime[4],e.receivetime[5])>=o)):"month"===c?t=t.filter((e=>new Date(e.receivetime[0],e.receivetime[1]-1,e.receivetime[2],e.receivetime[3],e.receivetime[4],e.receivetime[5])>=r)):"no-reply"===c&&(t=t.filter((e=>""===e.replyMessage))),i(t)})()}),[c,e]);const d=o*a,h=d-a,p=r.slice(h,d),f=e=>{if(!Array.isArray(e)||e.length<6)return"Invalid Date";const[t,n,r,i,o,s]=e,a=new Date(t,n-1,r,i,o,s);return isNaN(a.getTime())?"Invalid Date":a.toLocaleString()},m=r.filter((e=>""===e.replyMessage)).length,g=[];for(let t=1;t<=Math.ceil(r.length/a);t++)g.push(t);return(0,Va.jsxs)("div",{style:EI.container,children:[(0,Va.jsx)("h2",{style:EI.heading,children:"Contact List"}),(0,Va.jsxs)("div",{style:EI.filterContainer,children:[(0,Va.jsxs)("select",{onChange:e=>l(e.target.value),value:c,style:EI.filterSelect,children:[(0,Va.jsx)("option",{value:"all",children:"All Time"}),(0,Va.jsx)("option",{value:"today",children:"Today"}),(0,Va.jsx)("option",{value:"month",children:"This Month"}),(0,Va.jsx)("option",{value:"no-reply",children:"No Reply Yet"})," "]}),(0,Va.jsx)("span",{style:EI.filterLabel,children:"Filter by:"})]}),(0,Va.jsx)("div",{style:EI.notRepliedCount,children:(0,Va.jsxs)("p",{children:[m," contacts have not been replied to."]})}),(0,Va.jsxs)("table",{style:EI.table,children:[(0,Va.jsx)("thead",{children:(0,Va.jsxs)("tr",{style:EI.tableHeader,children:[(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Id"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Name"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Email"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Phone"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Country Code"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Interested In"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Receive Time"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Reply Time"}),(0,Va.jsx)("th",{style:EI.tableHeaderCell,children:"Detail"})]})}),(0,Va.jsx)("tbody",{children:p.map((e=>(0,Va.jsxs)("tr",{style:EI.tableRow,children:[(0,Va.jsx)("td",{style:EI.tableCell,children:e.id}),(0,Va.jsx)("td",{style:EI.tableCell,children:e.name}),(0,Va.jsx)("td",{style:EI.tableCell,children:e.email}),(0,Va.jsx)("td",{style:EI.tableCell,children:e.phone}),(0,Va.jsx)("td",{style:EI.tableCell,children:e.formattedCountryCode}),(0,Va.jsx)("td",{style:EI.tableCell,children:e.interestedIn}),(0,Va.jsx)("td",{style:EI.tableCell,children:f(e.receivetime)}),(0,Va.jsx)("td",{style:EI.tableCell,children:""===e.replyMessage?"Not Reply":f(e.replyTime)}),(0,Va.jsx)("td",{style:EI.tableCell,children:(0,Va.jsx)(ft,{to:"/adminContact/".concat(e.id),style:EI.button,children:"Detail"})})]},e.id)))})]}),(0,Va.jsx)("div",{style:EI.pagination,children:g.map((e=>(0,Va.jsx)("button",{onClick:()=>s(e),style:u(u({},EI.pageButton),{},{backgroundColor:o===e?"#28a745":"#fff",color:o===e?"#fff":"#28a745"}),children:e},e)))})]})},EI={container:{marginTop:"20px",padding:"20px",backgroundColor:"#f8f9fa"},heading:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#28a745"},filterContainer:{display:"flex",alignItems:"center",marginBottom:"20px"},filterSelect:{padding:"8px 12px",fontSize:"16px",marginRight:"10px",border:"1px solid #ccc",borderRadius:"4px"},filterLabel:{fontSize:"16px",color:"#333"},notRepliedCount:{marginBottom:"10px",fontSize:"16px",color:"#ff0000"},table:{width:"100%",borderCollapse:"collapse"},tableHeader:{backgroundColor:"#28a745",color:"#fff",textAlign:"left"},tableHeaderCell:{padding:"12px",fontSize:"16px",color:"#fff"},tableRow:{backgroundColor:"#fff",color:"#333",borderBottom:"1px solid #ddd"},tableCell:{padding:"12px",fontSize:"14px",borderBottom:"1px solid #ddd"},button:{padding:"8px 16px",backgroundColor:"#17a2b8",color:"#fff",textDecoration:"none",borderRadius:"4px",textAlign:"center"},pagination:{display:"flex",justifyContent:"center",marginTop:"20px"},pageButton:{width:"40px",height:"40px",border:"1px solid #28a745",padding:"0",margin:"0 5px",borderRadius:"50%",fontSize:"16px",lineHeight:"40px",textAlign:"center",cursor:"pointer",backgroundColor:"#fff"}},bI=()=>{const{id:e}=fe(),n=pe(),[r,i]=(0,t.useState)(null),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(!0),[l,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const t=await xi.get("https://be-pjhk4.onrender.com/api/contact/".concat(e));console.log("Received Contact:",t.data),i(t.data),c(!1)}catch(l){d("Failed to load contact details. Please try again later."),c(!1),console.error("Error fetching contact details:",l),Jt.error("Error fetching contact details, please try again later.")}})()}),[e]);return a?(0,Va.jsx)("div",{children:"Loading..."}):l?(0,Va.jsx)("div",{children:l}):(0,Va.jsxs)("div",{style:wI.container,children:[(0,Va.jsxs)("div",{style:wI.headerContainer,children:[(0,Va.jsx)("h2",{style:wI.heading,children:"Contact Detail"}),(0,Va.jsx)("p",{style:wI.receivedTime,children:(e=>{if(!Array.isArray(e)||e.length<6)return"Invalid Date";const[t,n,r,i,o,s]=e,a=new Date(t,n-1,r,i,o,s);return isNaN(a.getTime())?"Invalid Date":a.toLocaleString()})(r.receivetime)})]}),(0,Va.jsx)("div",{style:wI.messageContainer,children:(0,Va.jsxs)("p",{children:[(0,Va.jsx)("strong",{style:wI.bold,children:"Message:"})," ",r.message]})}),""===r.replyMessage&&(0,Va.jsxs)("div",{children:[(0,Va.jsxs)("div",{style:wI.replyContainer,children:[(0,Va.jsx)("p",{style:wI.replyLabel,children:(0,Va.jsx)("strong",{children:"Reply Message:"})}),(0,Va.jsx)("textarea",{style:wI.textarea,rows:"4",value:o,onChange:e=>s(e.target.value),placeholder:"Enter your reply"})]}),(0,Va.jsx)("button",{style:wI.replyButton,onClick:async()=>{const t=u(u({},r),{},{replyMessage:o,replyTime:(new Date).toISOString()});try{await xi.put("https://be-pjhk4.onrender.com/api/contact/".concat(e),t),i(t),Jt.success("Reply sent successfully!"),s("")}catch(l){console.error("Error updating contact reply:",l),Jt.error("Failed to send reply. Please try again later.")}},disabled:!o.trim(),children:"Reply"})]}),r.replyMessage&&(0,Va.jsxs)("div",{style:wI.sentReplyContainer,children:[(0,Va.jsx)("p",{style:wI.replyLabel,children:(0,Va.jsx)("strong",{children:"Sent Reply:"})}),(0,Va.jsx)("p",{children:r.replyMessage})]}),(0,Va.jsxs)("button",{style:wI.returnButton,onClick:()=>{n("/admin-contact")},children:[(0,Va.jsx)(Bg,{style:wI.returnIcon})," Return"]}),(0,Va.jsx)(on,{})]})},wI={container:{marginTop:"20px",padding:"20px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",maxWidth:"800px",margin:"auto"},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},heading:{fontSize:"28px",fontWeight:"bold",color:"#28a745",margin:"0"},receivedTime:{fontSize:"16px",color:"#6c757d",textAlign:"right",margin:"0"},messageContainer:{marginBottom:"20px",backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.1)"},bold:{fontWeight:"bold",color:"#333"},replyContainer:{marginBottom:"20px"},replyLabel:{fontSize:"16px",fontWeight:"bold",color:"#333",marginBottom:"8px"},textarea:{width:"100%",padding:"12px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px",marginBottom:"16px",minHeight:"120px",resize:"vertical",backgroundColor:"#f9f9f9"},replyButton:{backgroundColor:"#28a745",color:"#fff",padding:"12px 20px",fontSize:"16px",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",transition:"background-color 0.3s"},replyButtonHover:{backgroundColor:"#218838"},sentReplyContainer:{marginTop:"20px",padding:"15px",backgroundColor:"#f1f1f1",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.1)"},returnButton:{backgroundColor:"#f8f9fa",color:"#007bff",padding:"12px 20px",fontSize:"16px",border:"1px solid #007bff",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",width:"auto",marginTop:"20px"},returnIcon:{marginRight:"8px"}},SI=()=>{const[e,n]=(0,t.useState)(window.innerWidth);(0,t.useEffect)((()=>{const e=()=>n(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const r={textAlign:"center",fontSize:e<768?"2rem":"3rem",fontWeight:"bold",color:"#333",marginBottom:"20px"},i={textAlign:"center",fontSize:e<768?"2rem":"2.5rem",fontWeight:"bold",color:"#333",marginBottom:"30px"},o={textAlign:"center",maxWidth:"250px",display:"flex",flexDirection:"column",alignItems:"center",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:"pointer"},s={width:"100%",height:"250px",objectFit:"cover",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s ease, box-shadow 0.3s ease"},a={marginTop:"15px",fontSize:"1.5rem",fontWeight:"bold",color:"#333"},c={width:"100%",height:"auto",borderRadius:"8px",transition:"transform 0.3s ease"},l={width:"220px",transition:"transform 0.3s ease",cursor:"pointer"},d={flex:1,maxWidth:"250px"};return(0,Va.jsxs)("div",{style:{padding:"40px 20px",maxWidth:"1800px",margin:"0 auto"},children:[(0,Va.jsxs)("div",{style:{marginBottom:"60px",marginTop:"120px",backgroundColor:"#f9f9f9",padding:"40px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:[(0,Va.jsx)("h1",{style:r,children:"About Biddora"}),(0,Va.jsxs)("p",{style:{fontSize:"26px",lineHeight:"1.8",textAlign:"justify",color:"#555",marginBottom:"30px",fontFamily:"'Roboto', sans-serif"},children:["Biddora brings an international audience of millions to the heart of the bidding action in Art, antiques, Jewelry, and Collectibles auctions across the globe.",(0,Va.jsx)("br",{}),"With fascinating objects up for bid in more than 50 countries\u2014instantly translated to your language and currency\u2014Biddora is a worldwide marketplace with treasures waiting to be discovered, whether you're an avid collector or first-time visitor.",(0,Va.jsx)("br",{}),"By hosting thousands of auctions in real-time via the Internet, the site allows unprecedented access to remote sales, and savvy bidders can often land desired items at very desirable prices. Leave an absentee bid, or fully engage in the live-auction action\u2014it's up to you. All bidding takes place via a secure bidder network, which keeps your maximum bids for upcoming sales private until the item is opened on the day of the sale.",(0,Va.jsx)("br",{}),"Biddora revolutionized the industry from the start. In 2002, the NYC-based company formed a marketing partnership with eBay to introduce eBay Live Auctions. This alliance of Biddora and eBay enabled auction houses worldwide to go online with their live sales\u2014a development that changed the auction business forever. In 2009, the debut of Biddora' iPhone and Android apps, with live-bidding capabilities, opened up a new mobile pipeline to bid anytime, from anywhere, with complete anonymity.",(0,Va.jsx)("br",{}),"Since then, Biddora has been the first to engage bidders with live streaming video, easy online payments, personalized search alerts, and more.",(0,Va.jsx)("br",{}),"Now in its second decade, Biddora is the Web's leading auction-related site, with millions of qualified bidders. Biddora also provides a constant stream of industry intelligence to auctioneers, collectors, museums, appraisers, consignors, and more via:",(0,Va.jsx)("br",{}),"The easy-to-use Auction Results Database, a vast database with more than 29 million results that offers keyword-search access to verified auction outcomes, recent to historical. The updated archive is the #1 free online resource for the trade, appraisers, collectors, designers, art institutions, estate officers, journalists, students, and others on the research trail;",(0,Va.jsx)("br",{}),"The Biddora Consignment Hub, an easy way for interested consignors to share their property for review and evaluation with thousands of auction houses in one spot.",(0,Va.jsx)("br",{}),"There are many ways to get started as a collector. You can browse curated auctions, find auctions near you, set up keyword search alerts, search, bid, and win."]})]}),(0,Va.jsxs)("div",{style:{marginBottom:"60px"},children:[(0,Va.jsx)("h1",{style:i,children:"Staff Curated Collections"}),(0,Va.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:"20px",alignItems:"center"},children:[(0,Va.jsxs)("div",{style:o,onMouseEnter:e=>e.target.style.transform="scale(1.05)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:[(0,Va.jsx)("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUTEhMWFRUXFxcWGBgXGBcYFxUYFxYXFxUXFxgYHSggGBolHRgVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGxAQGisfHSUtLS0tLS0tLS0tLS0tLzAtLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0rLf/AABEIAQMAwgMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAGAAIDBAUBB//EAEwQAAEDAgMDBQoJCQgDAQAAAAEAAhEDIQQSMQVBUQYTImFxByMycoGTobGy0RRCUlNUYpGS0hYXM4KDwcLh8BUlNENEY3OzJDXio//EABkBAAIDAQAAAAAAAAAAAAAAAAABAgMEBf/EADERAAIBAgMHAgUFAAMAAAAAAAABAgMREkFxEyExMlFS8JGxBCIzYeFCocHR8QVigf/aAAwDAQACEQMRAD8Agr4gtlznPIzxAdFtYiN/gzNpGsqN1bKzM5zwbH9JTYILgyQ1/Tc2S0Z8oBLo0IcVVDMtQvAqNh9R1MOIdlpsLn6eCcuZ7TPh0aemqGsJhH1nODnvzAtizTJI6/FAHVC58Yq283ylLFZG2NpQJc8nd4QGoIaSdBfLYm89RIVTazJEVO3pFzdTHgzAgDeSTmvZVhydr7nVd897YZzAB0ktvoOzUQSSnN5O1xveep1Nrt0WkSO0J/J5/gvn8f5NDD4tjrOqOEyGuzDJnygsY8Fuam4mbuO8EApU6hIJGcluoDXHfHSMANibzwPkyxyZrAGOc0jwIsTJEiDE7phO/sDE6F1UiZLC15Y7QGW57yBHYlaPiHin4y0zHD5TyQfi5HCLRBE9I9IkGIGXiYfRxbM0uqNDWnpNqVqVN0HcM7gTYtNmme2yq09i4prWtBdDXh7e8tkEREn4wtoeJ3FcxOw8S9znOzS65inGvC5RaPn+Befj/JexOJbSjnajhLQ8CzOidD0yC0E2HOCmTBgGFBhds0y4TVEG16zYb43NZjui1p4qpT5PYhs5c4mfiRqIPZYlMrcnsSdTUjqYB9oDLp4YCxT8f5NKntdhsXOzECG9+1BIcJiAdHbxcDUwIWbYBPhvMT0RzjTvm7mQNCJMD7FnHYFeILasddIP7DDmH+ieJVj+xsRM5XzuijAnjAOUkbiQU8EULHPz/TUw+KD75n5WiXOzNaDfU1KkMptAIEkyS2wiS2GpjYeW5yIcWmXtcWkHKfAuT9UA3FpsqJ2FiHWc6ud92mJggkDQEyd288Um8m6wFjVGv+W0xmEG0QLb+w6iUrR8QXm/9Lg2swgy8g6AZwXZuiDYSSJzwAAZgSZXaG0Q6IeXdTXZXGxIDS9pDnaS0CYFhZVRydxFjmqz4jeEaAQf375TX8mqxMnNpFqTACN9gI1Hk3Qi0B3n4/yaj67C4ZKhcx4lpgk7swLQNWmQRrod8KGvicrsri8a26IeSJy9B14JibWEmNAaX5P4kGQ+sDrLQ8G4g3D+FvQnYfYeJY7O0uzXBJpZi6Zu4uM5hIggiMo60rR8/wAHefj/ACWXY1thnc2TGZ7mMYd4hzi0CwOpHqmxzgyF4qjKwNFR1N7KjcxJHhtOWTYBjC99/BuFQOxcUWNpkuLWkub3q8u1kzcf1oAq55N15zdOd3e9LR/QRaIXn4/yWqu2ac5RVII1mrSbJ4CXZhw6TfIp37Zp2Oc5YDjDqrtD0mmGwHRc7gGm8mFRfsHFcX6AeAJAAgQcpItwVb8nsQN1aeOSf4L7vsG8BNQgyLnNefk06+12g2e4A6GK3SExmALTl8Ukm8WUrMeXAwXzFi5xgzeWggEiARHXJgQDhYzAVKNJ7nEtiXQ6k2mZsLOaGkDrCv7HIa54cSHCZjf0WjK6CN7C06kZjaDKeGOQY5X3hRRecoudBvPBdUdA9Fttw9SSz2NVzFx7ei+CRmc5jo3MewtcZNoIe5um/wAoh5OhnwuGOL256PSIymb5h2aX9YurGKoudLW732tJDi3KzpRLRmi2hsSNCK/Jqs5+LDnxmz0QQBGUtlpabXMgkm85hdXLl8+xnfP6/wAnsrKDY0C6MO21gnsFgsjb+3hhebBp5y/NEOyxlyzqDxW2UlFXZjSbdkaZw7eATjh28AhMcuB8wfON9yX5cj6OfON/CqtvT6k9lLoFYw7Y0CXwdvAIUPLgafBz5xvuXfy4H0c+cb+FG3p9Q2UugVHDt+SNUjh28AhVvLgfRz5xvuXPy4H0c+cb7kben1DZS6BX8HbwCQw7b2CFHcuB9HPnG/hXTy4H0c+cb+FPb0+obKXQKhh22sEjh28AhQcuBH6A+cb+FdHLcfRz5xvuS29PqGyl0Cs4dvALgw7Y0CFDy5H0c+cb+FdPLgafBz5xvuRt6fUNlLoFQw7eA0SOHbwGqFfy4H0c+cb+FJvLcfRz5xvuRt6fUNlLoFZw7eAXPg7Y0CFPy4H0c+cb7kncuBp8HPnG/hRt6fUNlLoFYw7b9ELnMN4BYeyOVIr1W0uZLcwcZzA+CCdAOpEQKsjNSV0RlFx4nl3dPEOMfNiALXzn+SwdkUyQ/wCM7pVHWNmsa8gkQYLzIANoaCfChEHdRPT7GNP/AOiyNlse2gALMdTpPIbPSzNIGeYkgtAjRuWwm5zSz1NCy0NqloNNAuKBhMD3hJZjaVsQ1wY9+YMY0iXHiHNLQBMvNjYDUiSLLO5LScWSZk12uMwDJqPJsLDyWVnadbKHmfBLnDSznZGFwMXcGtBA0kA7lV5IMIxAFpz0TbQAtBb6I+2d6uS+UyN/P6ntrNBqgrukm1Hxa/sNRqzQIK7pX+T4tf2GrRX+m/MzPS5jx5tJvBSNpDgFxikapkDgpDgnimOCQTkrgLmhwC6KQ4JwBSCAG80OC6KQ4LqcEAcNJvBc5ocE+V0FADBSHBdFEcAnyuIAaKQ4LppDgngpSkBHzY4J3Mt4Jy6CgAx7nVq9EdVb1OXqNl5f3PP09Hsrepy9RjsSo8HqydTLQ8u7qXhmInIwjNoDzliZBsNTYrEwtItzND2uDA7K4SZaTmaxpA6JnOYdAA3gwDud1AdO4B6DbXuOcuDF73WJhqmYOqc2xjTnpBo8EENpOMC0WqtiOvQWNT4vUuXBaG0yIHYkuU3iBJ3DcEljOgZe2iAx4i5L4I8KQCRYGSAQ0gxMuNxCg5Jn/wAoyZPO0+HyQRp1R2XG5Wcex5z5Q4yXiGgkuLW59G7wcpG+xO6VU5IGcQDxq0rwBMBsWFhb+cmVq/QYXz+p7ayICC+6Q39DHya/sNRqwWCC+6LrQ7K3stV9f6b8zM9LmPK2YQkaKQYF3BbdNlhqn5UxWMP4EeC78CdwW6Gp2VAWMIYMp4wJ4LcDE5rOpMeEwvgRXPgh4LeLOpODBwSDCD4wh4LpwbuCIMg4Bd5sf0EBhBs4cp7cI7giE0guhiAwg/8AAncFI3AOW7CQCB4UYn9nlOGzytsDq9Ca1qAwouchKWXEUh1VfUV6YvOuSI/8yn2VfZK9GBSo8Hqwq5aHlvdS8M+I32ysjYtQNonJOcZnEGC3M4ZczCZnNTEHeDhm6ZgTq91h3SP/ABj0F5/csDZFUl9VwJdJqQNSW81QIJ6wKbr8QRqq2uOpYstAipUrC+4cUlPh6fRbbcPUkue2dJIy8XXyB0w5uZ2Zpmwc006gOgLXMc4GJIOU6SHZvJgRii3hiGC8TEiCQNDEWgaqfbjyA/fD5ba0uqMabdhAtuKg5PT8KZOvOUDO+CZbPEhuVs9S3R5Tny5vPue2sFgg7uhG9Dsrey1GVM2F0Hd0Eguw/wC29lqur/TfmZRS5gPpjRSZVM2nZSNZZSArhi6GK0GpCmgCuAnBqn5vgFI2kkMrFhSFNXG0l3mkXHYpCmnc2rYpJwopXCxSLEsiuGj1JvNJ3CxTyJZVeFNNdSRcLFSEsqsZF1zUXAn5J2xlPxavsleiWXn3JX/GUx9Wp7JXoUdaVHg9WKrxWh5P3Vj31w3czJ+2p/NZPJzMC9rbhrqZdYDpOFRg6TtDoAIv9VwhbPdSpzWI1mkwfbVcIt2lYOyavTe5thLXNteKnOuJ7bgxuyjgoTzJxy0C3CkZG+KN/UEksNSGRvij1JLn2OkjC22+GOAgOzdEySf0wmAN8fKOjRBBicrkuB8JYBpz1EfcFNon7OrXQaLR29iXClVEwIrC3xhl50N6r05teOxU+SlKMWBNucpu7J5sj1H0rbDdAwT5z3FhsEH90EdLD/tfZajBmgQd3QB08P8AtfZYrq/035mUUuYwm07JzWlSMap2U0IZE1qcGKbKllTAjFNdyJzApMiAIg1ODVK2nZIMCQxpYlzakaF2AgCPm0wtUzgmlqAIsgSc1TALkIAgbSSNJWAUi5AbiHk4wDHUx9Wp7BR/HUgLYE/DqZ+rU9go9BRR4PViq5aHlndSHfHajvQv+u5ZOAb/AJjtHUw4kdINzS10iQDDyQTMtc4aZgDtd1Hwnf8AF/E5YOycWRTy2IHOgEZie+Mpt1cbRlbpAhrrEulVvi9SxZaBPh60NaOoepJMoeC3sHqSWOxvuZOLoc62pTlo6Vi8w3pgsvvaCSKWYaGuDfKs/kpUzYoOjWpT3AangPIruNquyVGmXNLa1NrdBmq0XMkaDwjTOto4wq3JrDlmLDXNLDnpGCOJdf0LQuUxvn9T2pgsEH8v/Dw37X2WowZoEIcvT08N+19TFor/AE35mZ6XMZ1CnYWVhtJOossFMGKYiLm03JJA0zODQd0nRWMi1qYp1KHNETIEjfmF5tcGRr1LF8d8TKhBNK93bT7koRuzNr4amwkSe0mNPUqDaoOYNMxPlgkSs99Ou6q41GudkBnePq2HhSQ254kq5ySqtdXeajSHNGUSLEm7hffAHkJXPo/Fzpwc5PEWyjvSRca2LcEnMVblRjC2s2nQYXvqWLWSDIvMi0C8+VauyNnPNIOqyHmS5pjoEE2ETIjfPWtEf+RgoKc1a/8A6xYHeyKORLItD4E8jMIy7jx67qrlW6lWhVV4O5W1YgcxcDFZypNarbCK4YmlitFiYWJiK+VIBTZV3IgCpsD/AB7PFqewUfSgPYYjHsH1ansFHijR4PVjqZaHl/dUbJfu71v08I69SwdkS8vNyCST8Zw6LTnc6CT4TiSInLF7Rv8AdS8Jw/2xf9c8UObNMl75ygvAA0joukAG+YNy/qlsqt56lvTQKKJ6LewepJNo+CNNB6lxZjYY20H2dqSH5uqGskmZs6xABEHMbjQxcnHtdjJY57xnodJ5kkxceKJAGmmgCu1XgGS3MQ9pAvuc2RbwpBIjt8ufyX/xZF4FZoaD8VgqPyiASBvsLaq1cvn2M75/X+T2xhsLIR5eDvmF7avqYi6mRAQhy7HfMLHGr6mLRX5H5mZqXMPp0rBSCmEylUEKZjpVhEjdS4KXBViwlwaDO4+hdAShU1aUascMt6GnYHuVW3MRQ761jC09F1vBMGDrcRa/qV7k/jqbG81WqA1XsbWcbAOz2BbECAWRuiAoeU2HqvbFNgqAjwcwa4GCC4T4QgwRO4Lzmu5z6FPU06YIFrkZg6oe28T1LHV+ApSp4ErfcaqNSuen7OYBjw9o71kc0RpncWFw6jDdOtXeVuIqMaw0iZkmBvMRfiL715nS2ni8KwsBGTMIa6SWP4sIPR0mJuZtdejcise5+Gb8KaeddJJc2zhJy6CB0cq5XxPwdSnapbElu3Z/cuhURpbB5w0BzgiAMuptAiTcu4z6FWrUYcZ199wR1XWk2qGNyNuAIF9BuHXAt5FTc2fQPsED0BbP+KpVYSk5RsnwI1pJ8Ctza61kKYU1yF2im5ER1LhCkcExyAIHtUZVghRQgZS2HfHs8Wp7BR5HYgTYrY2gzxansFHShR4PVjqZaHmHdRHTIIEFjZ4QakH96xtivaKZJlz3MIEEhrBUa41Sd7y7pE6AdG5ywtjupOAcSTAyNk8Bzl4uLx1hYuCxfQaxwgtYKV9e8+AQTYdFwseG+FVLi9S5ZaG0yrYdiS4xth2cAkstzbYpYyvlZUaLSXZnANz5YYGsY4noue4lpsNQSbLO5HGcQDAHfKekgXuYBuBLjHVCs7ZpnJUOb5Vr+C05tYiDlf1gg2Ki5JmcT1c5SaNPitAJtvJBK0JfIZG/n9T2tgsEH8vP0mF7anqYi5gsEJcuT3zC9tT1MV9fkfmZnpcxLQpWCma1NpjRTAKXEicAUgZ706FKwbkACfKHalJxdQNPnTBndlO4jrXn+ytp805zoLn5CxpkZWguzTli5JyyjflRs9vwiQwkkAiDBBvp9iyqeyKbnZTTl2pmzhv1F1F7ynEypTy4vEtIeWfVJBktIiGmYaB0R2fb6Ns7CZaYHC3u3Ic5N7EpmsXc2GmmInfmJsJ/VPoRuKYiAiKSJx3lRoToU7mJhCmiRGWpjgrAauGmpAVXU0x1NWi2Fw6JNAikQoyFadTCgeyCgZm7F/8AYM8V/sFHYJQNsj/2DPFqewUcWUKWerJVMtDzHuo/pNY6LLnd32xPZr5Fj0qkvq99FSaZDngEZ5vlc0HQ2N5u0G8SNbuomHmPkN9srI2TR7wHPENL6lQFsGWltKkR0vk1KLJtpXYRqVTLi9S5ZaGvT0Gug4LqjptMDXTj/JcWK50DN2sQQ9pGhdpA1BkFwE3AcNRE77gwck/8TP8Au0tQGwQ1oIIGn79TBJC0azWOzNdrnqalwEPp5Gk5CCWh+TNcEAmIGYjL5J9HE5TqK7AdNRAIMSJsdFrXL6GF8/qe30zYIS5ckc7he2p6mItYbDVCXLod9wvbU9TFfX+m/MzPS5i5RUkJlI2ClCkROtap5i6ZSVXbd6eXTMQ3yakehDE3ZAxtzaTX1Q5gLg22YAxruO8a361SwO0Gtc92pcI327etFFPZ7Q2ANbqnsWmzOXOIaATo2f5I3FNmM5N7Tp08zapLS90hxHR4C+7ei9oiUJcocPScBzZLjvJAA7QNwRJsZ5NCmXa5QD5LIHBu9iy4JuUJxXKYTRaMAXWhPexcY1MBlQKFzeCtHgVHVpo3gVHJjgpnNlMITGYuyz/eLPFf7BRv5UE7OH94s8V/sFGqqpZ6slUy0PLe6sYcT9Qe04/uWFsl4DqrC2G9Iag9JjKPVEnOekAP0TOAWz3VjNQt381PpqD3LF5PsBzZsxkjhlh9JzRLrdI820i8dGRcKuW6+pYt9tAlog5W33D1JKfCjoN8UepcXOdzpoH9tVei4EmGvJ4wC5rQWg+CZJJO8WKq8nCPhQItNakSOBzQ6/xhLSZ3gq3txgyOcT8YSAekTzzYDQN4yydJDrSRCz+TVQnEskCecwwtMWbTmOIuYItELfDfE58+bz7nubBYIS5dDvuF8ap6mItYLBCHLx0Pwx66vqYrq/I/MyilzGjTbYKWmOsLAZtYgBT0NtibgKRAJKbFm7cNqfjz6D70/C7Wpn448pTNvuBptc0yMw9R9yViM3uK2Irw0nqVPCUQ1gjff7bqTEsmkRxA9YSzGBKXESe4rYuyI9jiKDOyfSUMYl10VbLb3lnZ+9NCjxJzdPaF0NXXFTSJ3GPK4HJhd/RTmHgmxj2rr2SkGpxTbEVH005jRwsrICY1qiNMGMM2NptgAdF/sFGIPWg+gf70b4j/APrKMZUKWerJ1MtDyfurNmq7/hAGupe8bu0LI2O4NqVARmOYAyJgZqsBs8csOsbmdQSdzuomKpMTFJpjSYqE+RYWyqAzENkgtBG9zg1jiwwNfCEuHCdFXLMsjkFGGDsjfFHqSUmFeMjfFHqSWA6SB7bdRvN1NZHOSBYdB7Koz8WQCd5ltvBWdyUafhQB1FZh9NOT6Sr23KWalVgwQambsdTe2+8AF2cncGOO4qHkx/jJFxnpASADbKN0/J9C1x3QMEt8/Pue2M0CD+X56eH/AGvstRgw2FkJcumzUwo0vUHoYr6/035mUUuYyacwAeClwuHBO4+WFsHZlvIqp2Y5O5CxPhdlU3+Fbs19Kh5Q7PbQYwtLoc7RxE6HWPJdVa7cRTBygnsWJtCriHGSxxgREHSZ/oojxK5ptWNzD7VZlExwvxU9TGsI1CBH1yPDBZ229dj5CoufJ0dPlHvUrIpxMKcRiJNkdYJsU2D6rfUF53yf2FWrvADC0GJeRGUcb7+C9RGDLWgTMW+xPcWU7kRITQQnPokb1CWFT3FpIk6iNQntKRKja4DGhOCdqo3BSYkSxwVckkyE6Y0Twy8/aq7kkDNN396N8R3/AFlF0IRYB/ajfFd/1lF0dShSz1ZOploeXd1JvTcf9r+I2WPsuox1IA+E1tRtgbc01rqRmA0GDUbaQW5Jl2XLsd1MwX/8Xb8Yof2ewHM2TIJiXAiwaSM9g6OhGUXnQWmt8Xqy1ZaBNQHRb2D1JLtDwW9g9SSyWNtzMdicgqOYYe1tWpJylpdSpPqMEamQ2ow/Vqui6y+SNOMS0bucpev+Su7QZLXdG3OgEmSDLQch+KDq6+4HhZuw2kY39EKXSodEGbGYdPX7tdTeuUzPn9f5PZKcQEJ8tm9+wnjVP4EWMFghPlr+mwnjP/gWiv8ATfmZmpcwQiCkxifTsB2KZidiI2mJ3KanSG9o9akZH2p7dUCJ6OCoxGRn3W+5N+CYdmlKmJ4MaD6Amtq8ExzkkKxO6sDYCB1KN7gmNcpCFICBz+v96YBO5TvEXUFIXITuMY6jwUTmwrXOAJhIUkxFcJPCnDE1zE7gQsaU9zoCka1R12b1FjBWgZ2m06dB/sFF6DsMf7zb4j/+soyBVdHg9WTqZaHmHdSN3RrzYjd8Y8UPbJOU1ABmAdANx0ssAiDxY0ibbo3oh7qXhHcTTA46vj96wtiYeabnAwwBzpJAL3FrubY2QS8NLszravdcBqqbtfUtWWgQUT0W33D1JLlJ4gdgXFmubbGZXwweTJA6Qab3y1OgSI1iZvwVHkqwjFkGczatNjidS5jiwnSwhotffdaWKpjI4uzOOcsYwWDnAMc6XmzABlJIvE6RKzeSN8TIj9LTNhAuXOBjdIc0/YrlymaXP6ntrBYIU5au79hPGf8AwIrpmw0Qny3/AE2E8ap/AtFf6b8zM1LmCEmQFLTeo6TbT2J2XqTIk/O7oTg+6iEcVIY4phYkFYcfWuVHlUqn2f1/X2rprF2rpOlgkFizzkKw2osph61apPTFYnr1N0SuMICgqO3hNY9Di2hrcOfU/q6VK5T8oT6cKSdgJXCFEHLrymQi4h8KCspcyhqOQMFaD52o2fku/wCs/wAkYWQfhz/ebfFf/wBZRiq6PB6slUy0PL+6eOna5ysAi8k1bADfeFj7Pa3m2dIk80y2vSbmbUbIAiDeDxvN51u6oOkZ05tsxExzl4nfErGoUmg1A1r2jK94a6zmkxOcEdJogWOUy7UaGp8XqXLLQ12iwv6P5pKRgsLbklkubrGPtd8CocouC2bXBc3PP1SLHq1sVFyTZGJiSYqUSZ4loJE74JjyKzthxyPaDvfIJhskEB2utxcNsGbhJVbkmIxMQR32kbiD0mtMkeW3EQd60/oMf6/X+T2thsEK8t8PUc/DOp03vymoTkaTE5ImNJv9iKm6BO4LVOOKNjLCWF3Axm3cSBAwdb7jvcnflBivodU/qO9yMALJAXUNlLu9ieOPaCQ5RYkf6Kr9x3uXHcosUf8AR1fuO9yLkj+5Gyl3ewsce0DDtvEn/R1fuP8Acon7XxJt8ErDsY73I53JNRspd3sGOPaBVLbWJbb4HWP6jvcpRygxMf4Kr9x3uRek5Gyl3ewY49oHnb2JP+jq/cd7k0bdxP0Or9x3uRmVwBGzn3fsgxx7QRPKLE/Qqv3Xe5P/ACkxP0Kr913uRWAkf3o2cu72DHHtBUcpsT9Bq/df7khymxP0Kr913uRWVzcjZS7vYMce0EzykxP0Kr913uTTyhxP0Kr913uReAuI2cu72Hjj2gXsYVamObVfQq0xleDma4AdAgXIRp9qTl1ThDCuNyM5Yjy/unuipNxDGGd4IqSD6Fi7Mz1WuqBxqPL6lM9TW0qL5m1iH1Nfk23hbHdUPTPiN9srH2W+abqXRzMB6QguNxU6RBg5eccA4HTEkfFk53xepcstDVpvECw0G9JTUmjKLHQepdWG50TMxuFLs5BAk1hcmAGUi8mGgk79ATIaACSsjk/i20qjnuEZajTlvuaDHHW0rbxLHjM6nZweTd0B7qcEQAJDgHG95aXgwM04dXYBd04YTmItTe4AbntkMAZcWJBAg2WyNnGzMErqV0g8b3RqfzY85H8Kd+cZnzbfOjf+qgOjsV5BltMC0O5trNAZIDah0BNjkBMS4aqxW2DTbLmvc1mje9sqkkDMc1QVKbAb6NLxEdI6KeN93t/RHCu33/sM/wA49OPAZ55tvQu/nHp/Nt8633IQo4F80e8sLmDKww2HkmLzuB+VAF/rKDBbJpkHOwObdwBdzLG6Aw2n0rgDeLNCWOXX2DBHt9w3b3RafzbfOt9yd+cJnzbfOj8KCWcnszei3MRDXMElxBJAcxrxDiD0XAiNLtlUxsqLN5twN4NM5tDBylstP1QSd2ZNTk/1ewYYr9PuehO7oLfmh50e5L84TfmR50fhXn/9hZSQWMOUwZpg5XNmGmSZHRcMpADujuMh+C5PtefBcQAfBptcSQ4Eh0vHxZGoOhh0EIxS7v2QYY9v7sOD3RgP8kedH4Uw90gbqLD+3H7mINfsdoM06LbWknnCS3VwMZJaLktBaM1swgqv/ZjzLSGEHWxe/cdalMzcbyAJ3ap45dfYjhXQOx3SL/oAP2v/AMJ/5yGb6QH68etiARydk5SKQ1uwPc3TMDDWCWukwRfU2aGrlHYlQEBtNliCWmi20fKL6rSR1RcbkY33ew8H/X3PQB3RmfNt86Pwrn5x6fzbdfnW+5BjOTzSImKk6NaHhrAM1qdnufaTmNJsHV0X7R2fHOBgFZr2ZSSxrC0akgCo+NRBmZ3TlSxy7vb+h4Y9vv8A2GX5yKeuRtv95tvQunui0/m2+db7kE1tnXZmYG5WQMgYC9suaQXm7cxziCJiSLETM7YVIvytDaYd0c3OVHAOmxc4wIuAYiAZGl1jl19gwR7fcM/zhs+bb50fhSHdBZ82D+0HuQFW2GWOkgMcLw9nRNyMzXZe+CWkCYI4uBCjGxHEB2SnLjlAFMFriItEtBEuEgDeRByp4pd3sGGPb+7PQfzgt+aHnR+FMf3RB8yPOj8K8/dsUGwaJLbAMBPytJBc4SQdbCLgBXcRyfpMsKZLjJHOQ0gDpTkpucC0NN3uIBy2b4QaY5d3sLDHt/djuWu3W4prngBpDYyh7XExmII0PDcodh0nPNRzRGZzr7gX0WHJbcTSPUPIoauzXiIZTZAs1wcGwd4ZlLYNjJk3Glo0tkbPLSXOLW+AAOkXDw8xyuDWhl56QnoGNOkm7IaW83sM3oNv8UepdSwtToN8UepJYGjpJnKmHbndYiSZgkT2wbrlTBMIggkWsXOOmmp6gkkm5OxHCuhAcGywy28qgdQbMRadPtXUk1J9R4V0OnCM0yjWPIkaDRoBv9S4kppu5FxXQ7TwzDq0FS/BGfJ001t/UBdSUkyDSHfBWQLek2TfgFP5I9KSSTbBJD6OCpmxbYbpNvT1BPfgmN0EX4n3pJKDbJqK6DhhW63mx8J3ZxUD8DTEw30nylJJRxO/ElhXQhfh2tggQU1mFZA6I3+pJJSUn1FhXQ6MMwXDRK4KDZiOCSSkmyLSJm4Vg0aBOsb51n7SnMwjBMD0nt4pJKVyLSEcDT+SPSuMwbBo2PKf63n7V1JJtjjFdCb+z6fyeO8+9NZhWkQZjhmdH2Skkq7snhXQ0aeHbAtuCSSShcZ//9k=",alt:"Art",style:s}),(0,Va.jsx)("h3",{style:a,children:"Art"})]}),(0,Va.jsxs)("div",{style:o,onMouseEnter:e=>e.target.style.transform="scale(1.05)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:[(0,Va.jsx)("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUSEhMVFRUVFRcVFRUVFRUVFRgVFRUWFxUVFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDQ0NEA0PDysZFRkrLTcrKysrNy0rNysrNystKzcrKysrKystKysrLSstKysrLSsrKysrKysrKysrKysrK//AABEIAQYAwAMBIgACEQEDEQH/xAAcAAABBAMBAAAAAAAAAAAAAAAAAQIDCAQGBwX/xABPEAABAwIBBQsEDQkIAwAAAAABAAIDBBEFBxIhQVEGEyIxYXGBkaGxwVKSwvAyQlNiY2Ryc5Oz0dLhCCMkdIKissPxFCUzNDVUo7QVFtP/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQID/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAERAv/aAAwDAQACEQMRAD8A7QhCEAhCEAhCEAhCxMSxSGnYXzysjaNb3AdQ4yeQIDFcSip4nTTvDI2C5cbnmAA0ucdQGkri26rKxUyuLKT9Hj1Os0zO5zpDOZt+dedlD3XGunOYSKeK+9NNxnaOFK4anE3A2C2slaQ5yqvQqcaqXm76id599LI7vKx/7ZJ5b/OP2rFzilufX+qD0YMZqGHgVE7fkzSN7nBbHhGUjEYCPz5mbrZMM+4+X7MHpWmZ3P1IL0FnNxu6yHEId8j4MjbCWInhMO0H2zDqd0GxBA2BVb3M41NSStnhdZzTax0tc08bHjW0+ukLvG5nKDR1bReRsEvEYpXBpv7xxsHjm07QFEbYhCEAhCEAhCEAhCEAhCEAhC5nu4yoinkdT0bWyPZwXyu0xtdraxo9mRrNwAdumwdKkeGgucQANJJNgByk8S1TFco+HQXG/wC+uHtYBvmkas8cAda4RjeP1NW69TM+TTcNceAD72McFvOAvOJRcdXxbLG5wc2mpswkEB8rwXNJGhwY0WuOPSSuXVVQ+R5kkcXvcdL3Eucb7SdKx8/+qeFQ8NvcbQsBjl6ERsQvOe2xI2EjqKDIjbderS4BK+KSYWzYr51zp0NDjawtxHasGgsBdzM4HQLktF+cca9uB8NrHMAsQReYtudZOcDqtxa9a6STGdeJJTEGx0EaisVy9us3u1mNG3Oa5/UWu4jzaF4qz1JFiambwSeXu/qEEp8fsByknw8FE5ZVteAbv66ka1kcofE3QIpWh7QNjXCzwOTOsNi3zB8skLrCqgfGdb4jvjefNNnDouuKBxPHo5vtTwUFoMF3UUdVYU9RG9xF8y+bJ0xus4dS9hVHK2nc7lBrqQgCUyxjjimJe22xrjwmdBtyKGLHoXgbjt1cOIQ75Fdr2m0sTvZMceLT7Zp1O6NBBA99ECEIQCEIQaXlT3TmjpcyJ1pp7sYRxsYP8SQcoBAHK4HUq/FbhlYxQzYjK32sAbCzTo4Iznnnz3PH7IWm3VUFCS6EDmtunWTWHUnIHNWLVt4Z5bHrCygoawaWnkt1H8UEDWp+ahikCBoagtUgSFBM7Q1o5O8k+KgU9To0bAB1BQBAOGtIE15ubdfgnIApEpTSivc3I7on0NSyoZcgcGRg9vGbZzefWDtA5VZumqGyMbIxwcx7Q5rhxFrhdpHOCqkXXeMimNb7Rup3G7qZ1m7d6ku5nQCHt5gFEroaEIRAke8AEniAJPMNJSrw93NbvOH1UgNiIXhvynjMb2uCCtVfV77JJL7rI+XT8I8v9JY10rlG9VUqVNaUqKCpAUxKw6vX1+1EPBTakXZzEduj7E4JwFwRtHbq7UGG0qQfYoWlSjiQSBLGLuA5UifDx32A/Z4oEnNyo3GwunuULzc22d6KGBOQEFENcUgTSdKcUUl1vmRjFN6xFsZPBqI3xW1ZzRvrCfo3D9paA06V6m56tMNVTzA23uaNx+SHjPHm3CItYhCFEC0PLTV5mGll9Ms0bOgXkP1a3xcmy+VfBpIfKdNIf2BGwfWOQcfKiebcx7FImuCqkgdoClWNTnjGwrIDkDgjlSJUD09hsVEw6upOCDHlbZxHL36UreI8ydVjiPR1f1UTSgmupI+IqIKZo0BBFM+w5ToHOmRtsEwHOdfUNA8T0qVApUbinKNyKGokdYFKFFUHRblRCwqVzbi23QoY1MgtZudrN+paeb3SGN/SWAntXoLUslNVvmF03vA+P6ORzR2WW2qIFw3LpVZ1dFH7nTtd0ySSX7GNXclXfK3U5+KTjyBHH1Rtd3vKDTSmlOKaVVY7TZ5G0XWQFjyaHN6Qp0EgQCmhOCBb7E8FRpWOt096B0wu08mlYwKy2lYZFrjZcIJQpKx2a2w4zwR4nqSUou4dfUoJn5zydTdA59Z9diB0YsE8lIEhQLdMSoQKoJjpCmKx5Tp6ED41Ko4wnoO75CqrOoJGe51DgOZ8cbu/OXR1yDIBVf5yLUN4eOc7813c1dfUQKsm7yfPxGrd8O8eYcwfwqzgVUcZlzqid/lTSu86Rx8UWMFyanOTCVRjVJ0t51lrCruIHlWa3iQATkiAgUJSLpEoQOY7r9dKiqhpvtHaPUJ5Ov1skm0t7QgRj81rna7Zo5z6hRwssEsntW7OEec8XryJ6ASXSpEAgoSEopCVi34RUr3LHi28qIzIwlCRiVB0nITU2rpY/LpnHpZJHb+IruqrtkfqAzFYfftlj643Pt+4FYlRDJ35rXO8lpPULqpJffTt09atRujn3ukqX+TTzO6o3FVWARYa5MKeU0qqxqscFZEJ0L0ty8AkraVjuJ1RDfmEjSnbqqQxV1WzQAKma1thkcW9hCI89CAlQIlQhAAo4r7NaVTUUbXSNa8gNJ03NtWgX5Sgw4hrPGdKkWXiUDGvszi2Xvbp61iIBIlSIGkppcnFRuCCGoOhNjGhZIpC9krr/wCExrzy3ljj/mDqWOxBlN4kBA4krUGxZP5szEqN2ydo88FnpKziqfgs2ZUQPvbNnid5sjSe5WxKhWvZQZM3DKw/F3t88ZvpKsqsXlZmzMKqSNe8t86oiaewlVzQhrimXT3BRqj2twv+p0Q+MR/xD7FnZS2WxWsHwoPnRRu9JY2T2O+KUXz7T1NcfBZ+VIf3tV/Lj/68KDVWpySyVAJboQgEjglSD16ygUBIlSICyaQnIQNskzU9Y1VNYaONB6+52MSCuZqFC9/TFPTy+gvEiatmyW0xkqKiP3Shq2dLo9HctbpzfSgnKcEiVApeRpHGNI6FbemkzmNd5TWu6wD4qpCtLuQqN8oaR50l1NCTz722/aoVrmWl9sLePKmhHU/P9BV+XdMus2bQRN8upaOgRTO8AuFoQhURUpTHKq2nJXFnYtSaOJ73HmEMnjZPyoO/vas+XH/14Vm5FIs7FGe8hlf2NZ6a8rKVJfFqz50DqijHgiPAskQ0pUCIQgIBKPXtQUBAEoRdIgRCEiBSVivjWSonINxyMW/8rC08T2TN/wCF58FqE8OZJJGdBY9zPMcW+C2jJKbYvSfKlHXTTBYW7+k3rE6yMCw35zhb4QCT00HjApUgSoFVk8l1QH4VSke1Y5n0cr2eiq2BWByKy3wtjfIlmb1vMnpqFeRl9f8Ao9K34dzvNicPTXFiuwZfpdFIzaZndW9DxXHiqQJrk5NKDpOQSnvWzyeRTFvnyR/cK1Dd8++J1jvjDx5pLfBdC/J7p9NbJq/MMB5bzF3e1cz3RyB1ZVG171VQ6/PM8oMJqEgPIlugLpUdAQ5A0qSCIvc1g43EAX4lGU5psgycQoTEQCQQRoI7VilSzTF2lxvbQORRIEKROBSFyBFE8KW6a48iDYMmL7YrRn4Ujzo3t8V7GW2mzMVJ90gik6eHH/LXg7gpQzEaQ8X6REPOeG+K3n8oKntPRyeVHKz6N7CPrSg5YE4JoTggF2/IHPejqGX9jU35g6GLxaVxBde/J/qP85Hs3l/XvrfAIVj5f3fnqMbI5j1vi+6uV2XTMvTr1dONkBPnSO+6uZhCGlNcpCopCg7lkDgzaKeTyqk9TIo/FxXFKx+dI93lOc7ziT4rveSePesFa86/7RJ0ZzwOxgVfYRwRzDuUDwlukSqgSlIEpQNKdZIUpQKkQgoGlCEIEsmOCkTHoMzc7Jm1lK7ZUwHqmYV2L8oGnvS00nk1BZ0Pjce+MLitE/NkY7yXtd1OB8FYHLXT5+FSOAuWSQv/AH8wnqeVCq+NTgo2J4CoCunZBJLVdQ3yoAfMkH3yuYlb/kOkIxIjU6mlv0OiI7igny6SXxCNvk0zD1yS/YudLfMtp/vM8lPCO2Q+K0IhAXTHBPsopr2NuOxtz8iCxuEM3jc+2+gtw9zjyF0TnHtcq7qyW7ZghwaoZxBtKIutrY/FVtCgVCRKqFSFCCgQp6YU4oBIUIQIhCAgE0pxSFBDOeCeY9ysxlAZvmDVJ+LCTzA2T0VWmQX0bdCtLRQ7/hjGHTvtG1vnwAeKhVW2BSKOK9hfQderSnqgW75GpLYrF76OVv7hd6K0hbdknfbFablMg64ZEGVlmffFJBsihH7l/FaTZbflcdfFajkEQ/4Y1qCBCFlYHT75VU8fl1ELOh0rQewlYq2TJjTb5itI3ZI555o43vHa0IO25Vv9LqeaP66NVtCsnlTbfCqrkaw9UrCq3AKBEqWyLKhEhS2Q9AhTgmgJ1kCJEqRAISgIIQCZZPSEIGOVotwMmdhtE466aLsYB4KrzgrNZNX3wuj+YaPNJHgoVXXdHSGKsqYiLZlRK0fJEjs3sssBbblZo97xap4rSb3KOZ0TASf2mvWpKgWy5NDbFaM/CntjePFa0thyeutidGfh2Dr0eKDIyoSXxWr5HsHVDGtYWxZRzfFKz54jqa0eC1xAFdAyGU2diTn6o6eQ9LnRsHYXLn5XWfyf6fh1knvYWdZkce4IN/yksvhdZ8w4+bY+CrI2+zt/BWl3bw5+HVjNtNL/AAEqrtlAmn1P4I0+p/BPAS2VEdj6n8EadaehAjU+yRnGnoIymlSFNIQMJOpJY+p/BPui6Btzs7fwSEn1P4J6VwQY7yfU/grR7gKHecOpYw4u/NNdci3+JeS1tgz7dCrA4K1O5M/oNL+rw/VtURyPL3SZtZBL7pAWnnikJ7pAuZrtOX6n/MUsmtsz2dD487+WFxdVSL2dxbrYhRn41B2ytHivHXqbkT+n0n61B9cxBPu3lzsRrD8ZlHmvLfBeIvR3RSZ1XUu8qpnPQZn2WAgQrt2QSC1JUPPtqiw5mxM8XFcSXf8AInFbC2O8uaYnofmdzAg3WvphLFJEdAkY5l/lNLfFVoxLcViFOSJKOVwGjPiaZWu980subc4BVnkKIqXJSTN9lBM35Ub297VC5xHG0jn0K3d0xzAeMA84ugqGKlp4rdYS79yK2cuGwu9lDE75UbD3hYcm5mid7KjpjzwRfdQVabLyJxmGxWfO5HD/APZUv0EX3Un/AKfh/wDsqb6CP7EFXzMNncm78FaQbk6D/ZUv0EX3VkQ4DSN9jS07eaGMdzUFUhOCbCxOy6yIaaV/sIZHfJje7uCthHSxt9jGxvM1o7gpgUFXaTcriEgBZQ1BvtY5n8YC9alyZYpJx0zY/nJox08EuPYrGIQcUwbIvO5wNXURxt1thvI8jkc9rQw9Dl2ShpWxRsiZfNjY1jbm5zWgAXOs2CnQg0DLfDfDc7yJ4j52cz0wuBKx+VaAPwqpB1CN/S2VhCrgUUhK9LcubVtJ+swfXMXmrOwA2q6Y7KmA35BMy6o6bieReYuc+GrY4Ek2lY5p0knS5pN+pa/W5La2PjkpjzSS/wDyQhRHhVu5qaO+c6PoLvFq7nkuw19PhsLHlpJMknBuRaSRzgNIGmxQhBtiEIQCEIQCEIQCEIQCEIQCEIQCEIQCEIQeNuxwp9VRTU8ZaHvaM0vJDbtc12kgEj2OwrkdLkdrX6TNTD9uU/ywhCDPjyJT+2q4httG93eQvVwzIxCx7XzVUj81wOaxjYwbG9iSXG3NZCEH/9k=",alt:"Clothing",style:s}),(0,Va.jsx)("h3",{style:a,children:"Clothing"})]}),(0,Va.jsxs)("div",{style:o,onMouseEnter:e=>e.target.style.transform="scale(1.05)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:[(0,Va.jsx)("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUTExMWFhUXFyAaFxgYGBsZHxsgIB0gICAdHx8wKEAwMCYxJx8fMEAwMUBAQEBAIDFLUD9AT0BBQEEBCgoKDg0OGhAQGi0fHSYtLS8rLS03LS0tLS0wLS0tKy0tLS0tLS0tLS0tLTUtLS0tKy0tLS0tKy0tKy0tLSstLf/AABEIAMgAyAMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAAAQIEBQYDB//EADoQAAIBAgMEBwYEBgMBAAAAAAABAgMRBCExBRJBUQYiYXGBkaEyQrHB0fATM3LhByNSYoKiFNLxwv/EABkBAQADAQEAAAAAAAAAAAAAAAABAgMEBf/EACcRAQACAgEEAAYDAQAAAAAAAAABAgMRMQQSIUETMlFhccFSgaEi/9oADAMBAAIRAxEAPwD7iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADG2hjoUYOdR2ivvI88PtWhNJxqwd1ddZL0Gle6N62zQQpX0JCwAAAAAAAAAAAAAAAAAAAAAAAAAABSrUUYuUnZJXbLnA9LtvOrL8Gk+qn1muL+hatdyyy5Yx13LB6QbTli6lldU46L69p4qFloilGnuqyPbeb7jfWnlzM2nc8rUa0oezKUf0yaM6j0gxEff3v1JM1yed0JevkNRKYvaOJdHh+l0vfpJ/pbXxNlh+k9CWu9B9q+aOKsyrTzzKzSG1epyR930jD7QpT9mpF+KMo+VtGVh8dUgurUku6T+BWcbWvV/WH0oHB0ek2IjrKMl/dH6Gxw/TD+ul4xfyZXslrXqcc/Z1YNPQ6SYeWsnH9Sa9TZUMTCecJRl3NMrqYbVvW3EvYAELAAAAAAAAAAAAGh6U7dWHhuxzqSWXZ2/QmI2re8Ujctf0y6Qbn8ik+u/bfJcjmMNRUVnq9WeWHg2/wASV3JmRuKx0RXUPJvknJbukhG/Mnw+RW+ZeXayVULJ8mWbv+xWPO3zLJdoEKTK5+vcWsT2/ACJR7OPO5G7xICYCS4iPIhdpGuVwIkjqug+Dsp1WtXux7lm/l5HLU09LZ/dj6TsrDfh0oQ5LPv4meSfGnV0tN27voywAYvQAAAAAAAAADwxmKjSg5zdkvuwRM68sXbm1Y4ek5yzfux5v6HzN1Z15urUbbbMra+Pliqrb9lZdiXIiEUslktEdFK6h5efL8S32Xv9NCM0w9c+ILMUyf3wJgxu93yIfLJdoFpRXArfkrD5FcrcvUC6lyXb3lU3yJug9AFSRDqeogrrPQnfWdgFsm3/AOkTtfJXvzJi7kJ2TVs34+AS2XRzDb9ZSfswW8/l6/A76GiscxsDDbmHv71V2Xc8l82dRBWSRz3ncvU6enbSEgAq2AAAAAAAAUqVFFNt2SV22fOek223iJqEPY93/s+0z+mG395/hU31Vq17z+iOdw1C3WftP4G1Ka8y87qc3dPZXh6UqG6rN+J7x0zt6lGiG/HtNHLwu3x14CP2itPO3z4FpeXYAiw58CE/PTI9HppoBWKvpmTB9xW3K5PfqBKS7iq493mQpZ9hKVs/MCF59gT1LJffIhw8QKN/E9cJSdSpGHGTt5lJa/I3/RLDJzlUaygrLvf0XxK2nUNMVO+8Q6OhSW/GK9mnH1eS9E/M2JibNj1XPjN73hw9LGWc71wAAAAAAAA5Tpn0gVKLpQfWeU7cFyXabHpXtr/i0VOzcpzVONlezd7O3gfMKUpVKjlN5t5Xdm+3vNMdYmfLk6rLatdR79sjD0rvelkuBmRefMlK1kkVkjd52tBYhJa3+ocgl6OS7CKk79xRyyv99pO7lcA4ZENcNQ19svTi/LVECmev7Ewd32E3sn6Eb77O0IXkvLQhtJaZiWiD+9NQkvpZv9yL6kVNbiD+9AJVuPI7LZuF/Dw8IaSqPP8AyzflE5jZOFVStGGbV7vuWv0O5pLerdkI+sv2XqY5J9O7pKc2/pnRjZWRIBm7QAAAAAAAHD/xfjbAKpwpVqc5ZKWV915PL3jX9H6lOvQimoycerJPdk045Z2yvpodxt/ZscThq1CWlSDj4tZPwdj4R0N2HOeMjUctyVL8yKlZ70bws0klqtHwKW5b4oi1LVn15/U/p9IrbEh7jlDud15Mwq2y6sdLS7nuv1OljHIOBaMlo9uW/T47enH1uq+upRyt1la/joekJp6WOplSRgV9j0277u6+ceqaRm+sOa3RfxlpIp52V7EPt1v3mwqbJmr7slJcpK3qvoYVWE4J71OSXNdZehrGSsua/T5K8wiKdrX9ciLXPOjNStZ662L7vBFmKLWZbJ+YcbPIJeNiR5yn26F+DtwWhWMewvBLi+8ECkVlK2o58xCO9bm3ZW4kDqOiOGSjOtLjkn2LOT++R0Wy4vc3nrNub8dF4KyMB4ZQpU6C960H3azfkn5m6SOaZ3O3r46dtYqkAENAAAAAAAAEM+XdM8NLA4xYyEW6NV/zUt52nbO0dLyss3o12n1I861FSVmk1yeY1tMTMTuHAbN6WYWrkqqjLlPqv1N7Cqnozz2r0Fwla/8AL3G+MOr6aHOV+guKoJ/8Wv22bcfC2cR2wp32jmN/h1IaOJntvHYbLE4dtf1JW9VePwNjgemmGnlJum/71ZeehWaymMtZ8b06NxKOmRQxUJq8ZJrmndHqVasHEbPhP2opvnx89TXV9icYTkuyXWX1N/YhxJi0xxLO2OluYcvWw1aPtU1PPWL+TMd4lJ7uj5SVn5M62UDxrYWMlaUU1yauaxmn2579HWflnTm27ZfsS3x1fYbOtsWPuOUO53Xk8jAq7NrR03Z93Vf0NIy1ly36XJXjy8JNZ2Np0Wwu/XT4QW8+/RL5+Bpast12mpR/Ureuh2vRuiqWHdWXvLff6UsvT4k3t/z4MGOZyeY4bXDLerSlwprdXe7OXpumxMPZVJxpre9qXWl3yzf08DMMHowAAJAAAAAAAAAAAFgAKSpJ8DRbS6IYStdyoxUn70Oq/Q6AE7RMRPL5viv4dzptyw1dxfJ9X/ZfNGvr4jaeF/Mo/iwXG1/9o/NH1gq4Ib3yp8PXyzp8wwPTijLKpGVN8bq6818zocJtGlVV4TjJc4tM3G1OjeGr/mUot/1WtLzWZye0v4aQ9rD1p05cL5+qsyO2E91458/43ykLHGT2ftbCvhXgv8/pL4k4XpvZ7tejODTs2ut6aleyVozV9+Py7FxKuBr9n7fw9b8urFvlez8tTZKSZVpE7eLoJ8Da42Cf4dFLKUldL+mGb/8AleJiUo3ku82GAW/VqT4R/lx8M5erS/xLVVv9GzABZAAAAAAAAAAAAAAAAAAAAAAAACrgjCx+yKNZWqU4TX90U/UzwBwu1f4a4apnTcqb7OsvJ5+ppKvRbaWG/IrfiRXC9/8AWXyZ9VIsTtn8Ovrx+HyvZ3SjF0qsIYnDZuSSavC7eSyf1PpezcN+HTjF5u15Pm3m35tmRKCeqTLEePS1YmOZ2AALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//2Q==",alt:"Book",style:s}),(0,Va.jsx)("h3",{style:a,children:"Book"})]}),(0,Va.jsxs)("div",{style:o,onMouseEnter:e=>e.target.style.transform="scale(1.05)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:[(0,Va.jsx)("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxAQDw8NEBAQEA8PDw0PDw8PEBAQDxAQFREWFhURFRUYHSghGBolGxUWIzEiJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGxAQGislHiUtLy0tLSstLS0rKy0rKy4tLS0vLS0tKy0rKysrLS0tKystKystLS0tLS0rLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAACAAEDBQYEB//EAFAQAAEDAQQDCQwGBQsFAQAAAAEAAgMRBAUSITFBUQYTFCJTYZGS0QcVFiMyVXGBk6GxslJUcnOU0kKis8HhFyQlMzRDRGWC8PFiZIOjwmP/xAAaAQEBAQEBAQEAAAAAAAAAAAAAAQIDBAUG/8QANBEAAgIAAwUGBAQHAAAAAAAAAAECEQMEEgUUITFBExUiUVJhYoGRoUJxscEGMnKC4fDx/9oADAMBAAIRAxEAPwD1sJwhThdjiSBGFGFI1Qpl7R3RLrje+N9pwuje9jhvUxo5poRUN2hRfynXNrtrR6Ypvyqk3EA0vAClDeltrlscFro4lvQqs4vGadUVg7p9zfXmdSX8qId025vr0fVl/KrlsXMjEI2DoU0I0sV+RSjulXN9fi6JPyov5R7n+vw/r9iud4H0R0BNwZv0W9AU0ovaexUDui3P5wg6Xdicd0O5/OFn6x7Fb8GZ9BvVCfgrPoM6rU0l1+xU/wAoN0ecLN1z2Jxu/ujzhZfaK04JH9BnValwOPk4+o3sU0l1ld4e3T5xsvtWp/Du6fONk9s1WPAouSj6jexPwCHkovZt7Eouorhu5unzjY/bs7UvDi6vONj/ABEfarLgEPIxezZ2Jd74eRi9mzsUotlb4b3V5xsX4iPtT+G11ecbF+Ii7V3m7YOQh9kzsQm7IOQh9kzsShZx+Gt1ecbF+Ji7UvDS6vONh/FQ9q6TdVn5CH2TOxD3ps/1eD2UfYrpM6iHwzuvzjYfxUH5kvDK6/ONh/FwfmUpumz/AFeD2MfYgNz2b6vB7GPsV0k1+wPhldfnGw/i4PzJeGV1+cbD+Lg/Mkbls31az+xj7ExuSy/VrP7GPsTSTtPYfwyuvzjYfxcH5kvDK6/ONh/FQfmUZuKy/VrP7GPsUTrisv1Wz+xj7FdBHi+x0+Gd1+cbD+Kh/Ml4ZXX5xsX4mHtVfLcdl+rWf2MfYsru7uuCO77W9kETXCIkObExrhmNBAV7PgY3jjVHqjXhwDmkEOAIIzBBFQQmJXNdf9ng+4h+QKclYPQMUKclCqZHSTJIBk4TJwgCCNqAImqFMBuAFWW4/wCaW75mrZxsWO7nArFbj/mlu+Zq28bV0vgcNPiYmtRhqIBFRYs6JAYUqI6JEKWWgKJURJIKBolROkgEnCSSFHTpkqqFHTFKqZAJNRPVKqpAaJUTp0IDRNhR0T0VsURFqBzFPRC4JZlxOORix3dIZS7Laf8A8v8A6C20jVju6YP6Ktv3Q+dq2nwOTjxRsbsP83g+5h+QLoJXLdp8RD9zF8gU5KwegRKZKqZUgk6FJAOnCFEgCCJpQVTgqFMN3MBWC2n/ADS3/M1bljV5LuIvF0TLWWEYm3nbS9hJFWudxSOq5b+w31jILQXDFhc0Grm50rTWPgtuD02c1KOpx6l+Aiohgka9oc01B2ZqWi4nagKJiFJRMQliiOiVEdE1FbIAkiolRBQKeiKiVFBQNEqI6JqIUCiSOiaitkoBJHRNRLFA0TgJ6JwEsUIBPRPRPRBQBCEhSEISEsUQSBYzuoD+ibb9239o1bV4WN7qeV0W37tn7Vi0mc2uJqLvPiYfuovkCnquWwHxMX3cfyhT1VNBVTJqpIB0kySAJJDVKqAKqcFBVIFAeEXJesEZtEUgJc685agHOjpCAcJ08YM6TXUt5ZXRxP4swLsi5wMbWmtSCTxc6DRpFF5vdVx2qd9olgDi02u1NdhwVbSQmodm5mdM6LtbdE5lAeJYMNCIcLmtqY2hrqn6PGB9KzvMoKmuBylllOVrmet2G/nNHkF9aHEwChG2jSelW8F/QubiOJnM9uH40XjxtFrxukaA4NY2JrXHAGtJ4xA1Oq3TsbqU3fCWMNfJZ2uzwgNAkq+pJcM+K0hoGfpTt8CXO0Z0ZmHKme0wWtkmTTnsU68esXdAbHgjfC5jWhofI1rmtBNCAG5DSc/cFph3TbG08eVga1rXSYg8PbnSgwghx0aNoWbi+MWd4zfKSN1RMQs9Yd2tilFQ/C7eWzlj8LSIneS81Oui7bu3QWa0U3uVprkKOaTWlaUrpolM1qiWVEkSShqgU6dIBBQySMNSLUstEaZEUJQlCSSSVAk4TJwgocJ0ydQDJiiTFAROCxfdXH9D237MX7Zi2zgsX3WB/Q9s9EP7di0mZaNBYj4qL7uP5QpwVy2I+Ki+7j+ULoBXQwGnTBJQCSSSQpHvo2hNvzdoWb4QdqYznaumg49oaXf27Qm4Q3aFmTMdqbfTtTQO0MduAgeRPLG7C4Wy10OKn6eyi9Is8znCk0YIpQFoEjTqOWketYXubWXHZpXf95a/Ud8W5jseQJPQjkpRSZqOG4ybXUIXRZn573kdTcvcUbtzVncwtGIAig4wyFa5CimhJGuur0rqjcvPLDXkepTZlLTuDiL8W/PB11Y1zCNhGWxcVu7m0LyXeKcScy4OYTlpBFaHILfB9dI9aOgXPs4+RvUzye8NwDgC3xoBFHFhxBzdTC76OQyK4bJuens7mTQSYZGHIOG2gJ5zQU/4Xs2W1RSRRO8oNJ5wE7NdBafNHnDd0t8RNwgwvOTeNGTTMVORFdKt7DuxtRHjWNa7G4UDOLhrlU1/3Raw2OD6MfrAUL7vs50sj9wWopp3+pmSiw7uv+CbLEGvDWlwrxeNooSrVrgdBB9Gaou9lnzIayp00cR+9dMEYZ5LnAE1piqCVSUXLUnFcbLQUZm2qFDKZBvg2hGCNoQgqJ6JBOgoaiVE6SChk6YuG0dKEyjaCgoNKi53THVQe9cM8JNSXP1Zhx1etVF0sspXBoLnENAzJJoB61h+6lao33NbMEjH/wBnHFe13+Ij2K0tkTHDC5xA2uBf69axHdDuwMu60PYWFjTZ9AYCKzsA565rooxq7OM3NPlwPQbEfFx/ds+ULpaVxWJ3i4/sM+ULqaVswThOgBRKFHSTJKAwe/pxMqoWhGLQvSeQs9+RCVVgtCIWhBZiNzd3mVkrhI5v84tGQNP0/QtGzc88gePl0VyefyrPblba5jJA3Lx89TlTN5Wrh3URRV357SdW2myg9a7QbWGmfKx23mJRd8w7PuSef8VP6n/wVhBuPfqtVp9p/BVkfdIs7Tkxzhq0Cqlf3VIgBSIj/UNC4yx5eaPTHCh1v6Mt27kSNNstXtD2KXwY/wC6tR/8h7FlX91El2TBpzzBXFa+6dKSQKilQaAbf+Vnt5eZrRDpB/78zaP3NAZme0H0vK4LRdMbdD5Xf6pP3FY60brrU/GQHnCGl1M6BwFD71LdFvtlqkZGBK0E6S12oiurYtxxZt0efEUUrUa+Zd2izUOQefS+btXHI540NPXn/MtTBuMcQN9tGdG+SDkeLXX9odCt7NuYszQAS51HOI4x0F1QNOyi6rHXU83YY8na4fmzB2SK1yEtjic6lDk+bR1loLvuS30q6MN4wBDpJa025PW7hcxgDWigAoAFMJwuMsw+iPfDJx/FN/IrLts0sYNW1zyzedXO5dc0klPIPv7V2NlCcyBedyt20fQjFKNKRTOtMg/uneqv5lG+3vH9zJ6h/FW7pAopDXQ7DzgNPxC2pLyOMoy6TKOS93DTBaPU0dq5zfVf8PavU137irmZkueCVldQfH8S1w+Cp9+vZpzZYJBU6Jp4zTVkWnNR41csP7mVg3/NjV/bYzLY9+izWofa4g/WcF1ts8pFcBbzGWp/VcVzd8rc3N1ijJFf6q0AivraFxS7qLWzDiuuU1PHLZoqDPVWlfcvPPNYnSFfU9OHlst+LFb+i/Yu+CuAq4gc2JxJ6SAj4GXaKEZ50HR5RWbfu9kbhaLrtRqeNx4aNFfTQ7dSndu2lJpwB4ZXypJ4G1G3DUrxz2hT4zS+h7Y5bLpefzZaS3K05lwbnnWPVzGqB25yAihedp0aPQFVWrdfQZw2Vg179NX3Bv71XS7vi2rXWqzNJyYIoHEgc1XGvQufeflJv8lf6I1u+WXRGj8FLMcw0mhOZLyOjQVm+6LdDIbttD20GdmAGCMV8fGDoAOvnXJad1jpWYN/tEldO9s3ou9bQD0LMbopi6zPBjmGcVHSyPkI8Y36TjtWIZ+WJNRern14F0YEV4Yr6HsdiPi4/sM+ULsYVW2J/EZ9hnyhd8RX2jxo6WokDUYUNDpJk6A8owIgxdQiT70u55TmDUQC6N6T72qSjxJ9ok3x7GudQySUa0kVq47EmQykkUd5WEnYa0Kmhdhe54FHB0tHaxxirOyOxVLqAHmGI56tq4QwlLmzti4ui6SOHvc6rgXGgLcJqBXb0Kdt11/Rc4EChxDLKnxW1uq6IQ0Pkj4xzDXZ0HOruNzGijWtAGwAL3xycD4eNthxdRV/Yy9w7mI5HtIjwji4nPzFNZoda29n3O2BpqYmPJABxaDQU0aFycIS4QvR2EapcD5U89jSlb/U0UcdmDcAihw0Apgbo0U0KWCWCLNjWM52tAPSsxwhPwgKdgvMm+4npRqTe7dqcXu36SyZnCW/jam7wG/Y5rm3o0/pKdlvG1YvhHOn4VzrLy0TcdoYq5o24vAbVG+9R9L3rGcJO1Nv6iysTT2li9Eax97jao3X0Nqy+/ITMtbvA5PP47NS2+htU0d6tOsLIb+n4Qjy8Sxz2OuZrX27nHSVx3hJHKwxygOadWIg9IWdNoQ79zqPLRapledxX0Oe8tzkb84rVaY9jC9r4/eK+9Vpujes94faHa3ulaa/6QW/BXW/c6B1oXjxtkZfEXJx/p4HfC2rmo9U/wAymie3FR1nhiOrfI24iOapqV2zWhjMnTRxj/oqHdICnlka4UcGuGxwBHvVJbLqjriY+ZmebWlsjeh4PuXxc1/D7j4sOVry6/vf0Pr5bbCn4cSNP7f4O51tgeKNtFeapr8VUX4RvEgBaeNHodiceONOxS0jZpbLJT9LAWe5oXJe8sZgeGNIOKPM4qnjjavnYGUnh4iemVX1X/D60caEuTR7PYhxGfYZ8ArCILhsQ4jPsM+AVhEv0bIjoYjQtRqGhk6SSgPP8Cfe11iJGI13s4UcYjTOjyXcIknRZH0FSxR4Vdlia/G5zwBjfQE6eMrux2KJjt8c4OcNArQAIoLqtEPFjhtTCZKvoKxkUqdVQ6uuupMNz8nIS9V61h4igl4TGPl5YjdT4MuBeA2jpT98BtHSqfwfk5CbqvT94JeQm6r133x+R4e6Y+pFxw8bR0pcPG0dKp+8EvITdV6XeGXkJuq9XffhJ3RH1IueHDaOlIW4bR0qm7wy/V5uq9N3il5CXqvTffhHdEfUi74cNo6UuHD6Q6VS945eQl6r03eSXkJerIm+/CO6F6kXfDhtHSm74N+m3pCpe8snIS9WRaGxboL3gaWRSWhjScRG8MOeENrxmHU0dCm+/CVbHj1kRC8W/SHSEXDhtHSo7z3XXlIN6ntMmRY7C6OJhDmua9hyaCKOa0+pVUMk72b23G5tM2sBNBve95kCvkZKb8/SHsaPSX2Lnh4+kOlLho2qvnda3vbI5spe15kad6pR5eHl1A2nlAFcL7qeSSYZSSSTxX6SrvvsZexl6i+4YNqbhg2qh70P5GXqvTG538jL1XpvvsO516kX/Df91S4Ys/3ofyMvVemN0O5KXqv7E332Hc69SNCbagdaa61Qd6XclL1XdiXep3Jy9V3Ym+fCFshepF4Z+dAZudUvep3Jy9V3YhN1u+hL1Xdim+expbK+JFw6U7VXXy87y7PWz5ggiskjRQMd/qhY49LmlTzWWSZrYnMfhbTCGxNactAqG116PRsC5zzOqLVHbC2fompalwZ7ZYh4uP7DPlC74wuOxtoxgORDGAjYcK7WLzn0UTNRoGo1CiSSSUBlQ1OGrqfZSNGY96iwLscQMKfCjDUWFARhqeikwpUUAFE+FHRPRCgUT0RUT0QA0SoiSUANEqI0ziAKkgDacggBokQoX2+AaZouu3tQG9LPyzOlAebbv3fz2Qc0P7NquO5qamf7EfxKzW7y1tfb5C1wc2kNCNH9U1XXcztkbXWjG8Nq2KmI0rm5YvxHVrwHowCfCudt4wctH1gFNHaY3eTIx3oe0rZyColRHRJABRKiNJAR0TYVIkgI8KbCpKJUQCgGa6wFyNXU0qM0g2qdigapmKFJmo0DUShodJJJAcOFC+IHSpqJqKmaOI2Y6s0O8O2e8LvITEK2Sjh3h2z3hNvDtnvC7ShJSxRyby7Z7wlvTtnvC6S5CXq2SiDenbPeEt6ds94UxemxoCHe3bPeEt7ds+ClxpsaA57Q4sY55GTWlxzGoLC2qd8rsb3FxOYGocwGoLd2xm+RvjrTE0trsqNKwNrstqgJD4HSNGiSIFwI20FSPXRAgcCF653XgB5TXt+0KfFRuvGM/pfBLNmfv2wF8peHEE09wp+5d+5qymLFmTiA9ykne1xrUdKmsk7W6SFiuNm74UW7QiwriF5Rj9IJC9otANTsBb2rdmKL27bxfC4cYmOoxMJqKbRsK2AB2Lz2yCedwbHC8NJFZHgtaBrNTp9VV6HG+gA5kMsWB2xLCdhR74lviEAwnYUsJ2FSY0sagIsJ2FLCdhUuJLElgiodh6FNCdRVfNfdmYcJlaTrDavp1QVNZbzhkyZI0k6AatJ6ULRYNUzFztKnYoUnaiQNRKGh06ZJAc6Yp0lSAlAVIhKAiKicp3KJ6EIHFROcpnhQvWjJXX3bt6ge6tHEYG/aOVfVmfUvOnvcKGrxpNPGNFestNu0tIqyLmLiKiuZpry0V6VkzhrWgpspBX3LMjpDgibhDxnifR9BpmGHmGeelFv8lcGOSuRBrMS7Xo1LmAbxjTjHR/UkadZJqMtiRYKYQBpr/c50561P8Vk0dQtkvlB0mWRbjnpnrLk3DZQK45aO0HHMKZ6ss1zUGXFGWQHiKdGJE2lScIqa6RD7uNkgOnhk1aY5QRn5U1XeqmSQtkpq6sh1FuKQ0rrrhoFztApTCAKip8VU+vEjwg0yZkKUAjofTx80LwCMz8hifnod4zLmPEqUTZZK+U6ow6Q7jDXlgyQtZp0aTqB2aAH5a0bYxSlc6ilAa018bHl0fBAFHa5Rnjk11aHEEEHbg/3kug3hO2lJpBSn94dGLT5HpXK1hoM86CtGyDXzPzU8ZoQ6rnEVNMM2eR1ucR7kHAnbfFoB/tD6Z576KA5a8CcX5aaEcIdWuRL2Z1GVBTPShltDjTCHDPOrHkUp6K6diKK0kDjNeTnmI30+FUFILv8A2jikTv1VBMZ2/vpponG6G0gkb8TkCKmLUcwDWnx0qvc0+TSQCpLatno0aW5AUyyT4nVDsL8sj/XaDpzLeYdKWKRbWDdBacTHPkLmA0dxWUdQ55+orbiWuYzG1eYMbQknGNBHlYa7MxzDpW7uC0Y4GbW8U+rR7qLUWc5otd8VVuitNLNK2nlNp6OfpVlRc9qsokaWnQQQtHMx9xWQuAcdas5bLk4YS2hyOVDzj3LiFyW+zOJsskMsRNd5tAcMO3C9uYUkk16uy4HZh/1cJcR0YVzaZ6YzjRotzVse5jmSEuMbgGuOktI0epX8b1m9z9kmjZ47DjcS52DyQdgV/EtHJvjwO5jlICuZhUoKgJapKOqZCgVSqkkqQaqYlJJCAEqJxSSQETlC5JJUyc8sDHeU1rvtNB+KiNhh5KPqN7EklSDcAh5KPqN7Ejd8PIxezZ2JJIBu9kHIQ+zZ2JjdFn5CH2TOxJJAN3ls31eH2TOxLvLZvq8HsmdiSSAbvFZfq8Ps29iE7n7J9Xi9TAEklAN4O2TkI+hMdzlk5Bn63akkhRvBuycg3pd2oTuZsfIN6z+1JJACdy9j5H/2SfmQHcrY+TPtZfzJJILGO5SyfQeP/LJ2qwu27Y7O0sjBAc7EauLjWgGk+gJJKizsSSSUA1EQCSSAkYp2JJIVHQwqSqSShoVU6SSA/9k=",alt:"Electronic",style:s}),(0,Va.jsx)("h3",{style:a,children:"Electronic"})]})]})]}),(0,Va.jsx)("div",{style:{textAlign:"center",marginTop:"60px",marginBottom:"40px"},children:(0,Va.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",marginTop:"40px",width:"100%",maxWidth:"900px",marginLeft:"auto",marginRight:"auto",backgroundColor:"#f1f1f1",borderRadius:"8px",padding:"30px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,Va.jsx)("div",{style:d,children:(0,Va.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///8AAAD7+/taWlpMTEwEBARnZ2c2Njb5+fnU1NQICAi2traKior19fXl5eXo6OiioqLv7+8jIyOCgoI+Pj50dHTQ0NDb29tUVFQZGRmWlpbFxcW4uLgeHh6QkJASEhKtra0vLy9HR0dtbW16enoqKipiYmI0NDSbm5vIyMg5cgIhAAAJAklEQVR4nO2dC2PirBKGAzFK1MTcE++pt27//x88MGBr97ittUyIfvNsd1u7CrxhGC4hg+cRBEEQBEEQBEEQBEEQBEH0DwH/cselQITzy2/PCY+i6Jn1xYvm5fjSLOpnrEepKD2wM2X6hBJFuANxAXwVoXBdIOvEOxCnUEKL2HWBrDNkwdjYaMDkT3vXBbKKbHJLLS1oSn+svjO2dF0qm3CPl0wJa0L5KmxA4p4/lbOJMlVtWQ31WWeqOrPIdaGsEkMDzD0uhOBeruSy5/I1IfQRE1mFqpeYgN7QdaGsEoKmiXm1enqFz1+HpPARIYWPDyl8fLTClXn1RP3h+9BaK0zSmSJNPit84AG4nj2k9TLZg6Z1lq0z9Q+82ifLOn1/16MShclht2b/Yr07JOEDzzFEuNnBkgUb62/B5296zh/sNg+4aAPG+Wd3rdqC9x+Cjxe7P6n3QO1RNSse5uP36gquKX2Xq2t0nIdK4EOIlAJ5uN9+Kj/LimZ/mH5w2DdFdqFS/t3upcbHcDq8nm7PZZdf26JsqzoVn8vORVpX7b7Ynt+mNE5rR0X+GSLJPiqGNcmFG+Ee1NJFRUV10lxUZJb02edwfe8sLD7cZdOmN3wwbZuPjxQwDhD9bJDKwUTJHHoBZZ2Hiptff/vJ6qCtVfYq80TdnOqjQGV9XlxCZciyzstKW+X3H4SvqpybT7Iy9nrpcpSRhjsopKzDk9JnnMtXZTXvUO+sTkytGsvP78LemamxxuXWNKfjhF/8x82pTI6mNW6X3q0G3hmqLO3ZXxxmd5WNe7PD2eG0Xq/0QSfgJVvdjrJW3DdbkJ8SbaZb4zYxqfYEEKjvDip3f28jgqZc6OsUJH0S6ElHsTJO1J95v+m0hTfzjUtd6TsAvUDa5NK4+sPvJ3viYNJa9qnLCF/06HIT/dqyuBdtlLsJ2EuPFnLSgXaBUzvT9Wiqh6qDW8Z83bBXfTVjw9/XoAc2Hw0Z68+9fg4doRrInGw5BulTT3BTnLU96BVlz1Bv4b78LrZYmnoHaW5r/ivXbAPOpUlBYSqLArlX6R0bw8i5P+Vgo9KgEpv2JGUlOtnWuZnytICZXWN1M55KqtHbw1KXCoWqwil0z0ebjVAh55pHSHmqEnbWFuXIsc7A61m1UZN2Ah46q92NT2FyrrfG+Bgr85EP/X7uOV3VmOllstX377yDlV6Am6EkfisLEDjEuH0k0xyCP11YT/r2MnjpC1zlNyQreoPUX1KHDVHbUYMzk5N20Zg24KwZghnJEmB5O76C9IfuxjWyq5DtJBMoCw4qTaEzcHU7A0ZWatqLmMcGzDRBzOErwNcxNq8Q86jmDHw1YhZfMXtR2Q8QH4Lh0UBl8eKqS9TbYqaInk4NexnaiOJ7dO64e+6X5iq6AW77HWPMRsJjaAkNYhZfEK2VozvhDv35yeG+/hq6Y2wDmsJU302PCOvcrEXOpWWBkwds1DgqgbyxF6ZDuI6JkymidqXYz4XEDp3pHvaH4E5t5AQN9q64Wf32VdYF9iKRKNSF9JFzuc5OKfSxmwf3lcIdci7Xsx6pBnJCz+ekshm5GHtrhUP0fIakEI3nV+h1qhA9m2uQQkuQQkRIoSVIISKk0BKkEBFSaAlSiAgptAQpRIQUWoIUIkIKLUEKESGFliCFiJBCS5BCREihJUghIqTQEqQQEVJoCVKICCm0BCnEgne+Y8jBnqEnr0PPE0++60tazWuHCl/Rs/k/uJdCWNISPScVII1to863snP1uIXkD3pOC8gn7NzT6Mflu3jmauXmEUThRbDNu4NDKmLIZ9f9486JDluBnQ03O+Y7aA5/8baGfLswHgjww+bL7ipRyD/LDMLHjLqI5BQV8GDQdgU5d0O6GLNxEHyEkcdFx4Jj40VXkbGiyTkIa97JJeViaiJjFxPIEPcxJM+bqUc84EyqQTfRcThEOdHRhv2Zh6fQpAuPN+sYut2FU4vgqkIkPhPAAe3aio0OsC4bfp52FLtR5RLl2/OpdBu0pqEi30Y5GKhsFIOV6OyYRpWLWDZnSz1EHO/S5hAKT4UXjXQ8ky4kwqWUg6gEQtzK/A9YOUXqqVFwMafY1F+3A6lYRxpWT5RiPNvNVWQ2MJNg4eq8hmgR6CK0OA0k1IGMg9ZhGLw2gMerM4znq7nw9TimdXaoiAnHrArhYzhUeDh9zDaOI8NudFO0POSHAznmUIWl2/jF0qmWshxjNrd75IdKaQHmMbIdPfDnRYlHYKcLz7LC6AjLJRPXIahl/hMYNh6trk3x8zFbu8h9wFRPxx2CAzFtpuuDaaxQutqfEcHalOVIANyr50rh0XUFarjqmNm8tlqHExjzYsYt+wmb87mt1uAc5hTjvoQQr2B+mtvsmAWEhBq5b4QaAbdMGpttRkW87UsAcQUEjjnaXI0Otzp8IO8HOtjg1majeYMeqPD7QgF915tFhWr5afzv49McYPuukDpCJghulxi8nyb37Yd+kOrlh8aWu4vlPaUwZTHHHF5nfL5uF0cF3ozNEGezwR0STcGtvOcaA4u+lHth3gx+CCz9s9G374MND6z4afJNbvO2ML+nq6+g5N/PxfXBsveEeUUMnHoTOpj5/uujkbgn9j0IS34PHHYUyenI7OsLzWcwXBr14DCSn5OD+bVfzpmFPsuM5V0Vyio6NuY3hwpEvqPYljYQemz1db88gcuAHpsQiT+6v4ivH/UIv4t1X9H5Rgs78LiA1dv9v7wI19OgMStQYxFjkuiTrpLry+T6uBz1Dlcx13+Nijce6Fsd12n1eB4z5jkqHGbOIDGP/mqK+s61Oc0xfMjOEOB62iXtsKn+1sCrxsw53R/pdC9Q7oWZWK6n9WWPIOrp2vzP4v29jwdX9/o3UItKYzmJtUgRT8q1+S3bqBMwH1SgIdGGCrPA0ak8lKeRnhWOXR5dYZXlq1nW+JjqBuY3r485WvuMtME4V+dwfCxXnF/M87hHp6n+juX+yirE/hkqUDtJOXgRVZ59kpfllXCxJwcTXielX7y+vhZ+mdTPo+szIlU8SdP7F89aef8R+JWfCIIgCIIgCIIgCIIgCIJ4FP4HAI1eoIxnCzoAAAAASUVORK5CYII=",alt:"Phone",style:c})}),(0,Va.jsx)("div",{style:{textAlign:"center",flex:2},children:(0,Va.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#333"},children:"Get notifications from your favorite auctioneers"})}),(0,Va.jsx)("div",{style:d,children:(0,Va.jsx)("a",{href:"https://www.apple.com/app-store/",target:"_blank",rel:"noopener noreferrer",children:(0,Va.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAe1BMVEX///8AAAAGBgYEBAQKCgq0tLR7e3tpaWmcnJynp6dwcHCqqqpiYmJSUlKMjIy3t7eVlZXR0dE+Pj7X19fz8/O/v79BQUHg4ODy8vLr6+s2NjbKyspERESGhoYxMTFMTEwlJSUTExMpKSkcHByfn59aWlp/f38eHh5ubm7WlLXYAAAJs0lEQVR4nO2biXaqSBCGu0VEQFkEgoi4a/L+TzhV1c1iAiiJIffMqX/mqvRmfV3VCy0RgsVisVgsFovFYrFYLBaLxWKxWCwWi8VisVgsFovFYrFYLBaLxWKxWCwWi8VisVgsFovFYrFYLBaLxWKxWN9VlPjmb8uej6uLmccVn+0Gt9mvyxpXHzPPyxVgbs+O8v+oo+W5yoPXkb5xOrImcu8lQsS2MxLg+IhTufDW4MLRAKUxPmKRCP82HuEfONGaC9cakXB0RHkNhLsYk3DsOJXLsQnHduJgwn1wfAViL+mz3fBUuYGEs7UQh07LF7fAs84PG4E4lRvhdlonbfH2yPQJFJArYT9GHEYY4f6gM3elNkjJw2aI0OwmdB8SSnmQSNjdTd8jzBAg6yE0pXxLRPoYsSRUvOgS/YFSGoR4aeh3WQWlXIo5faF7V+/HhORBceknlDIXM3xbBN4J3vbY+H6JCXvYJh7OgXeWhiaU2yBYygkAWh58IEOLYFNHqZwW8xn2yMGaboKipNmh0RuK0sCbUr0VtvtDwpkKwuMjwq3IqTvA42DcRUDrscDkudwJE5uAkUyEMODiGKJ6KgORxdB3YDve7qQlIfgKmllD+avAHfRarTVQHOTBF+aUKDGw01gs2xAHEFKMUnT0Ex4xTH3xgTV2AHWReyGuYNVJvguw4obFkFA6+OILcM0J+i3EEZ4KC/pCE0qJ5l9FJBF1Bx3i6ZheiIC+UOylCYnSErC1zrKfEap5JOotoQmhEA3GGdqxjqQdpa6MYAC/k3tFqAlDAWAHKA4sH0EE5p6ggCGTknAG1k8gHJDQxUq+9i0STtQX7iARRsZpuzFFW5w+T3h7OE9qwj2UOlBJMssUMpu7mcQB/E7J2AM7LJsJOTEkzl2WEGEKjr5SqJYzDfh9AZe+2EJTtoKpCdVcCh2alPHVOgU/T3iB8dFfsJppPhSF/ECqhViK7VVcwczPhCnG5RTdjf8CINwiA3QKmDrB2wJxg8tcHGtCmJZ0lDYJo1iZMJlQFOv/8P9nCI9HZb9DM/LbftdP6GIQQmTt8GWLQCEMJpHDyx2hi0wwBOdgLLk8B0KYk4748ga2TiYUwVA0kw1CyqDLBmEgbgrwqx4RFiFMbnGi7z5uoRqM7bdbKxFDqKlI3ghhpmq5yhE8p896HGofGuDEJKcRm4kE1qIFjYVchDAilXWBSH2cTspxmKh0CG2R7uUbtkyE0ECapGYbYj/hrDqKi92rlTSO5tpuuE5mkpiF3tQdL2Gijg4WPnjyii/yaBboZZj8Dr4DU4X08hAmI3CWGbk7KAILY55bK3+lbZXXJDJ3kLyB8lDpVqYvwnArT5g49QtsqUhy3xpMaPacPvasGs/KAF+g0Az59ZOyr07WL3V6M/G+1rOEfu8Bq/dzxDaDXq4ewlsvYGuc/ouIPYS9fPHpBYAQp39JGPQSrl4BOIoTuwmzPsAXzDNjIXYS7npj9FWAd3Fq/Ap3J2HRR2h2m3x0bdtePo/YMEVu3TyN8uT2UsROQrePsOcImXrm8UHGV0R5DusQUUnGK0g7CZNuPrzb65QycwChjlO8dyyl9maQd/oBYhn/nYR5H2HPRlbgbfugxdIg0RmJv3w/LIO1g2mw0YsjypwYWoM+lJff8+Gs01zYycJmelCYSjQKzwHqIyBChk18KI0fq5Owb08qun+sAjrPGzjZkh0BxXZtFx18hWW2YTTK6iujK/NJwt4Fv/tEETJXq0Yc7x0HJtZzYfuXvUo5Ow7ecyzmvlmGAtpxuSOUR8cCH6aW41wpWx5utm/j6R1lX53ZRkrHtVXm1U5y/H1pEKHTR9g5EB2yM67XExvu9/AFlVMKLrRyv6aUeFki0hwc1D46VV+VY241aBLVHxAqBYbxGjNPqe73QxtiJ+G5l3DdQZiQDW4dpuCapAr4tGzYqhq6loQ0lQZSM94TygN1CD1XARtiA8+qRBGSHYY6IktpC3ZuQfzmrk2NkK8SNI1eBZ4aklSwm8s3+mDqMmCRs7Ko6ysnXsgNhWK8i1Jli32QO/RkJuk0TgDgOsSwWCtrVmvl7+cJ++8O248VLW1yHaZB5SjyyrsmTEqPlztcsES72lWIjZmGGgmqGh6kkHEeZV4UtPLl5itiN+Gin7D1FjjRg82s4tgTFWyh69Sek6KatNAURz/es1CzSaRXC3JhpopM0f2aMFGZUOlDtZFiPwwglHEHWamWQBV6rV/Ch21FeK1z8/oN5dewZG2hhoZa8SvCDcaoHp+4EZmqim+Uua+bSDT104T2A8Kv+xYcf/R4lyvKNdOj0FHK1Fwj6vXUq3qiDM1FNWPUhA59mTJ3rmqorjH0HNzs9SGEx37AljXR/JrfJIxUYoMQzSu/XJmjhpp9R6hKqXxdw6fZukSuFQ0i7L+9EC1PGa3vCrx9Jky/+BDt3Ze1tUE4OqI7wlmDENtbNglxFprbpW7DCHtPalp+BsUhUWxWqA+hd5lo0apuLlRvrk7BgVDXN6qhlt0R4qj2NCF6+NwknN01MWi1kP37mpaDGrfxZbEOU6/2No7SQBGWS012t3fQFqWffTgV5QCr2q0JV0LPTF3qP/PuvsFoO6hZN+ZXnApOmlC7O9IBi9XV9DJruPOoftBWqxSNw1Cv7moC3VdD8qJWC01YLyVGqwsfEHZubNrW+5VorJEL7TAkpMXhiL1FCz01cNWA4qgrfAh7CeE3pVPa93IHUFQtx9g5GAZIVhOqME3VYN6/DY1S2dge3imetpTFbVf9JIr2nacqpGpzXOaAsojmpeo8pLmFovlCWtWF2hlFCT1IsET6mlDvhbI8T6tVcwhh+QSJyHxv5iV6E5C9txXN7qYfdNlOEZZLVrYrCe0yNup9UVQDOjrmQl2kuSbES6JvEqodrerIVsJ5/++HUzQ1L0vMcHC0P41xCPO8qC8XYR5+KMLDHm1NSxoklDZ4MPabP0U6Cfo5Dr163bjgTKQ2OBsfXR4F5f1ynid1uZ2NVbMwOH2H8Icq18NGWAu9Hk46qtS3wY3LT5l35YyvVf+AsCHRdwryycbmdTtAS8F/nPAFZ09M+NeEr0b8bcKgldBtL/wriET4i895n3e73adJE1Ja19PfIrzOx31W/xm9ltCxR/17i+f0SkAZJKP+zcxzeiXhIsB7niE/aY6il/HJbUC3gMn/9W/XplagD49G+vvD5+W8QrNiHtS/g47xN6RDZL9Arh8+OvRlsVgsFovFYrFYLBaLxWKxWCwWi8VisVgsFovFYrFYLBaLxWKxWCwWi8VisVgsFovFYrFYLBaLxWKxWCxWp/4D6UDOff7xQjgAAAAASUVORK5CYII=",alt:"Download on the App Store",style:c})})})]})}),(0,Va.jsxs)("div",{style:{marginTop:"60px",marginBottom:"60px"},children:[(0,Va.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#333"},children:"As Seen On"}),(0,Va.jsxs)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap",marginTop:"20px"},children:[(0,Va.jsx)("div",{style:l,onMouseEnter:e=>e.target.style.transform="scale(1.1)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:(0,Va.jsx)("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxARDxIQEA8VERAOEA8NDRAQEBISEBAOFRYWFhUVFhMYHSgsGBonHhUWITEhJSkrLjIxFyIzODMsOiktLi4BCgoKDg0OGxAQGzAmICUuLS0rKysrLS0rKy8vKy0tLS0rLS0tLS0rKy0tNysvLS0tLS0tLS0tLS0tLSsrLS0tLf/AABEIAOEA4QMBEQACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAAAwIEBQYHCAH/xABJEAACAgACBQYICQoFBQAAAAAAAQIDBBEFBgcSMRMhQVFxgSIyNWFzkaGyFDNScnSSscHRIzRCQ1RjgpOisxUWRNLiFyVig8L/xAAbAQEAAgMBAQAAAAAAAAAAAAAAAQMCBAUGB//EADoRAQACAQIDBAcHAwIHAAAAAAABAgMEEQUhMRJBUXETMjM0gZGxBhRCUmGh0cHh8CJyFRYjQ1Nikv/aAAwDAQACEQMRAD8A7iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+NgQWY6mPjXQj2zivvI7UM4xXnpWfkhemMKuOJpXbdX+JHbr4s/u2b8k/KVUNK4Z8MRU+y2D+8dqviicGWOtZ+UrquyMlnGSkutNNGSuYmOqoIAAAAAAAAAAAAAAAAAAAA+NgYrG6yYKnNWYqtNcYxlvz+rHNldstK9ZbmLh+py+pjn5cv3YXFbQ8JHmrhbb51FQj/U8/YUzqqdzo4/s/qrevMV+O/0/lir9odz+Lw8IdTnOU/Yt0rnVz3Q3afZ2keveZ8o2/lY264Y6f61Q80K4r2vN+0xnUXltV4NpKd0z5z/Gyyv0viZ+NiLX2WSS9SZhOS097YpotPTpSPkxuIk5eM3L5zz+0wmZlsVrWvqxt5LeSXUQzQzQShkiEoY+C96Pgy+VHmfrQ6Fo7UbW5slgtaMdS/yeLsyX6NkuVj2ZTzy7iyua8dJaeXh2ly+tSPhy+ja9DbUZJqOMpTXMnbRzNed1t8/c+4vpq/zQ5Gp+z/fgt8J/l0XRukacRWraLFZXLhKL6elNdD8z5zbraLRvDzuXDfFbsXjaV0ZKwAAAAAAAAAAAAMVpXWPBYb4/E1wkufc3t6zurjm36jC2StestjDpM2b1KzP0+fRqmkdqmGjmsPRZc+iU8qq3683/AElFtVWOkbuth4Bmt7S0R+8/x+7WsftHx9uarddEXw5OG9NfxTz+xGvbVXnpydfBwHS0533t5ztH7fywOL0lffny19lufFTsk490c8l6jXte1usuzg0uDD7OkR8Ofz6o4IwhfKeBkrlPAyVyuIGSqUjJYIbAlDMhKCYShmQlDIJRSIEUglktXNP3YG5W1NuLa5arPwLYdT6n1Po7M088eSaTvDU1uix6rH2bde6fD+zvWjMfXiKYX1POu2KnF9OT6Guhrg15jq1tFo3h4PNitivNL9YXRKsAAAAAAAAAYnWrSc8Lgr761F2U1SsgppuO8utJrm7zG87VmV2mxxky1pPSZcJ0prjpDFZq3FTUX+rqfJQy6soZZrtbOfbLe3e9dg0GnxerXn4zzYitfiVS6FVxAxldVPAxXVTwMZW1TQEEp4GSuU8DKFcriBkqlI+BLBDMJQzISgmEoZEJQyCUUiBFIJRyIS7Nsnl/22K/e3++zpab2bxXHPfJ8o+jdDYcgAAAAAAAAAa3tD8mYv6PMry+pLa0PvFPOHnmBzZe1qngRK2HUdk+h8LiMPfK/D1XSjeoxlbXGbUdyLyTa4Ztm1pqVtWd4cDjepzYstYx3mOXdMx3yyGvWpFbr+EYKmNc6l+Vpqioxsr470Yr9Ne1diJz6eNt6wx4Txe9b+jz23iekz3T/H0c5wSTsgnzpzgn0pptGhHWHrskzGO0x4T9HcP8r6P/AGGj+RX+B1vQ4/yx8nzv/iWs/wDLb/6lzDU3DQsx9NdkIzhJ2b0JpOLyrm1mn50jQwVickRL2PFMt6aO16TMTy5x16w6l/l3Ar/SUr/1Q/A6HoqeEPG/f9VP/ct85FoPA/s1H8uH4D0dPCD77q/z2+csHrro3DV4Kc6qa4TU6kpQhFSSc4p5NeYqz1rFOUOjwrUZ8mqrW9pmOfWZ8JX2gNG4PEYWq14WlylBKf5KHxkfBl0daZnjrS1YnaGrrNRqcGe2P0luU8uc9O5oOuOj1h8ZZCMVGEt22pJZJQl0JdSkpLuNPNXs32el4XqJz6atrTvMcp/zyZPZ3oWu+d1l1cbK64xrjGcVKLslzt5PpSS+sWaakW3mWlxrV3xRWmOZiZ58uXJn9b9V8N8CulRhq67ao8rGVdcYy3YPeks0umKfMXZcVexO0OZw/iGb7xWMl5mJnbnM7c3I5RbeSWbbyilxbfBI572MzEc5dp0fqhga6K424SmycK4K2ydUHKc0vCk210vM6VcNIjnEPDZeJam+SZre0RM8oiZ5fo4xpmyud9s6oRhXKybqhBKMY155RyS4cyXfmc28xNpmHttPS1MVa3neducz1372OkYrnZdk3k6Ppb/eOlpvZvFcc98nyj6N1NhyAAAAAAAAABre0PyZi/o8yvL6ktrQ+8U84eeYHNl7WqeBErYdf2L/AJrifpC/txN3SerPm8z9oPbU/wBv9ZdDzNpwXNNdtVeRvji6I/kp2wd8Ir4qbkvDS+S3x6m+p82hnwbWi9fi9Xwrinbw20+WecRPZnx5dPPwdMZvvKOO6i+UsP22/wBqZzNP7WPi91xf3C3w+sOpaewMsRhbqI5KVtbgnLPdzfXkuB0Mle1WYeN0maMOauSekTEtDjs5v+VR/X/sNP7pbxeln7QYfy2/b+WM03q7LButT5Nu1TceTz5t3dzzzS+UjDJimnVuaPiFNVv2YmNvH9W07NsbnG7Dt+K1dDsl4MkuxpfWNjS25TVxuPYdr1yx38p+H+fso2oYHOunEJeJJ0z+bJZxb8ycWv4iNVXlFjgGba9sU98bx8P7fRm9SMByOBqTWUrU759DznzpPzqO6u4uw17NIc/imf0uptMdI5R8P7svhsRXdXvRalCe9HzPJuL9qZZExMNK9LY7bTylyfVzQL/xhYeSzjhLJ2yz584Vtcm+9utmhix/9Xbweu1us30HpI63iI+fX+roGvOkOQwF0k8pWLkK+venzNrsjvPuNvPbs0mXnuF4PTaqtZ6Rzn4OF3PnOU92gkEuy7JvJ0fS3+8dLTezeK4575PlH0bqbDkAAAAAAAAADW9ofkvF/R5leX1JbWh94p5w88wObL2tU8CJWw6/sX/NcT9IX9uJu6T1Z83mftB7an+3+srraBpm3B4vB3VvhDEKyDfg2V71WcX9z6GRqMk0tWYTwjR01WDLjt+m0+E822aM0hTi6I21tTrsTTTXB8JRkutcGjZraLxvDj58GTT5JpflMf5uvmZKHHdRPKWH7bf7Uzmaf2sfF7ri/uFvh9YdT05jZUYa26KTlVBzipZ5NrryOhe3ZrMvG6XDGbNXHPfOzRo7QMS/1NXqn/uNT71bwej/AOX8P55/ZitPactxjrdkYR5JTUdzPn3t3PPNv5KK8mWb7bt7RaCmk7XZmZ326/oq1Ux3I42qTeUZy5GfzZ8y/q3X3E4bdm8MOJ4fS6a0d8c4+H9t3TtMaOhiaJ0T8Wzdz61k1JfYb96xaNpeP0+e2DJGSvWFvrLj/g2DutXM417lXmsl4MPa0Y5Ldmkyt0WD0+orSe+efl1lrmyzH71FuHb56JqcF+7s/wCUZPvKdLbeuzp8fw9nNXJH4o/eP7bNow+ioQxV2JXj4iumuS6uT3uddqcV/Ai+KRFpt4uRfUWthrinpWZn57f58Wh7WtI52U4ZPmri75r/AMpeDD1JS+samrtzir0P2fwbVvlnv5R9Z/o5tM03o0Ugl2XZN5Oj6W/3jpab2bxXHPfJ8o+jdTYcgAAAAAAAAAa3tD8mYv6PMry+pLb0PvFPOHnmBzZe0qngRK2HWdj+Mqrw2IVlsIN4hNKc4xbXJx51mzc0sxFZ38XnOO472zU7MTP+n+soNrGJrsswrrsjPKGIz3JKWWbryzy4cCvVzE7bNv7PUtWuTtRt06/FhNS9ZJYK7ws5Ye1pXwXPl0KyK617VzdRTgzejnn0dPinDY1mPevrx0/X9HX4aVw0kmsRU00mnysOD7zp9uvi8NOmzRO00n5S5RqTZGOkKJSkoxTtzlJpJfk5rizm4J2yQ9rxWs20NoiOfL6w6vZjsNJOMrqpRfM4ysg01502dLtV8Xiow5oneKz8pWyjo/qw3qpI/wBH6Ld9V/7fuxetXwNYK7kuQ392O7ucnveNHhkV5ez2J22bnD/vH3mna7W2/fu5tLh1fcaD17ruiNN024eqyd0IznCLnFzimp5ZSWTfXmdKmSJrE7vCajSZMeW1IrO0T4NT2m6WhOFNFdkZJyldY4SUlzLdinl2yfcjX1V4mIrDtcB01q2tltG3dG/69Wvah6SVGOhvS3a7oypm28orPwot98Uu8q09uzd0OMYJy6ado5xz/l1j/E8P+0VfzYfib/ar4vH+gy/ln5S4hrTpH4Ri7rs81OxqHo4+DD2JPvOXkt2rzL3ehweg09Kd+3PznnLByMG2jkQl2XZN5Oj6W/3mdLTezeK4575PlH0bqbDkAAAAAAAAADW9ofkzF/R5leX1JbWh94p5w88wObL2tU8CJWwuK2YyuquYyMVsJYGMroTwJhEwmiSwlNCKMlcpoVoy2YTKTk11E7MN1EwhBNEJiUMgndDMhKKTITuimwIZBKORCXZdk3k6Ppb/AHjpab2bxXHPfJ8o+jdTYcgAAAAAAAAAa3tD8mYv6PMry+pLa0PvFPOHnmBzZe1qngRK2FxAxXVTwMZW1TwMZXVTQEEp4GSuU8DJXK4gZKpV2TSXO0u1pEsN1jdpClcbYd0k/sButLNLUfLz7Iy/AhO6Gelaut/VYTujeka31+ohO6l4yD6fYwnd85WL4NEJUyCUciEuy7JvJ0fS3+8dLTezeK4575PlH0bqbDkAAAAAAAAADW9ofkzF/R5leX1JbWh94p5w88wObL2tU8CJWwuIGMrqp4GMrqpHZGPjSS7WkRtMs+3WvWUUtLUx/Scvmpv2mUUlVbU446IZ6wfJr75S+5GUVUW1O/SFvPTt74OMfmxX35mW0K5y2lb2Y+6XG2fZvNL1IMd5lA+fjz9oSqRDJWgKkGSpEJVoJhUiEpISaCYSKWZDJ2fZN5Oj6W/3jpab2bxXHPfJ8o+jdTYcgAAAAAAAAAa3tD8mYv0EyvL6ktrQ+8U84eea+dpLnb4JcX2I5z2u8RG8szg9X8bZ8Xg7ped1OEfrTyXtMoxXnuUX4hpsfW8fDmy1GomlJL4mur0t0W/VDMzjS2nq1b8cwx6q5hsx0jLx8VTDrUHY/wD4RnGla9+O1npE/RV/0ivfHGV5+jm/vMvu0+Kn/jVfyz83yWyLEdGLrfbXNfiPu0+KY41T8k/NaXbKcevFton/AB2RftgYzp7La8Zw98SxuK2f6Tr/ANNvrrrsrl7M8/YYTgvHc2acU01vxbecMLi9FYmnPlsPbUlxdlU4r1tFc1tHWG5TPiv6ton4rVMxXqkQyVoCpBkqRCVaCYVIhKtBKpEMnatk3k6Ppb/eZ0tN7N4rjnvk+UfRupsOQAAAAAAAAALPSmDhdXKqyKnCxbs4vPKUep5ETG/KWVLzS0Wr1haaP0LTSsqaa6l1VwjD7EIrEdGV8t7zvaZlfRwq6SVatYeIFSpj1AfeSXUB85JdQHx0RApeGQEbwnUBisfqxhbue3C1WP5Uqo731kszGaVnrC/Hqc2P1bTHxa3j9mGAn4kbKX+6sbXqnvFU6ekt7HxnU06zE+cNdx2yixZujFxl8mN1bj65xb+wqnSz3S38fHq/jp8pYHG6g6Sr4UK1ddNkZf0vJ+wqtp7x3N/HxfS3/Ft5wweL0ffT8dRZVl02VzivW0VTWY6w38efFf1bRPxQRZiuVohKtBK4wOEsusVVMHZZLxYx49r6l53zE1rNp2hjly0xV7d52h33VDRPwTCVUZ5uEW5yXB2SblJrzZt5HVx07FYh4HW6n7xntk8enl3M4ZtUAAAAAAAAAAAAAAAAAAAAAA+ZAUupPoAjlhkBHLCA6Mbi9XMNb8ZhaZvrlTBv15GM0rPWF9NVmp6t5j4sZbqJo98cHBfNc4+7JGE4Mfg2a8U1cfjlTXqFo9P80T+dO2S9TkR93x+CZ4tq5/H9Gc0doaqlbtVUKo9KrhGOfblxLK1ivSGnlzZMs75LTPmykI5IyVKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/9k=",alt:"New",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),(0,Va.jsx)("div",{style:l,onMouseEnter:e=>e.target.style.transform="scale(1.1)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:(0,Va.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACoCAMAAABt9SM9AAAAgVBMVEX///8AAABlZWWkpKTu7u78/Pz4+PjX19fq6upDQ0Pz8/PR0dGEhITi4uKsrKyoqKh9fX2RkZFwcHDBwcGdnZ2enp4lJSVra2sRERHKyspHR0dTU1Pc3Nw+Pj5OTk40NDRdXV0aGhq1tbV/f3+MjIy8vLwpKSkvLy8XFxc4ODgLCwuQVNj1AAAJSElEQVR4nO2da2OqMAyGh1zmQBxejnen4pib//8HHgvTpqWFokBTx/NparfR15KmSVpeXjo6Ojo6Ojo6Ojo6Ou7G9Zx+uNlswr7vubovBi1OEI96HycLsNiux3YSerovDRVeMN3PLDk/URzqvkYcbKarAp0o89jXfamaCQZKQv2ytR3dF6yN8HNRRaqUj/hPWrDko7JSGYO/Zr9cu/qgouwD3dffIu70AaVStkvdfWiLh6UivL3q7kYbJIc6tLow7+vuStOE65qkIkx196ZZRjVKdWH2xPdi+FWvVhcGuvvUFLUYdp7ZRne3msCv01pBhrp7Vj+v54a0sqyx7r7VTdyYVBd2z7W+rhRcuINnmhXnDWtlWRPdXayNe+MLVYh1d7IeXLVI6KM8xaToblvRyrLedfe0Bt5a0uoZxlZTrqiIRHdnH6TXolaWZXZI8LNVrSzL5BDXsGWtrIW5uZ/XtrWyrA/dfb4X75EMzr186u71new1aGXqwsfWopVlmWi2Qk1aGWm2drrEMtCTrzmPUwnTYoF9jVpZPd29r0ibS8I8Zi17Jlq1sg66+1+JogrRNrB1C1CBd81aWZZBVeHqndoNIsIxiga1jsaRbgmU+afeqTn9rXpD9caUNlfoE5jl640/mzK0qkSxGhPLlCVilcKi5sQyI9mzrNKl5sT60qdABSqFsZoTywg3vtqqsEGxTFghVqvva1AsE7yHU3kvWhILf1xrU61DTYq10qeCIrmg32I/Gi6DYPL+Kao8Eoh1/tlflj+97eO5IfRBQHaFN5syxcTBka8s5cUaxzSp3I/HaqKcD9/C97Hfh8xc+JZPS7kxqyYj1teQd7vd5KdYp+1nEvqu63pOMMzVF+6b7GkNwKWOJIPHpMiAWDuxzz0piEaMuNqGJefjIQ/U0KqZubSNA0w5EEu6mJPlPkTi9pnhhXxfYmFPbhxFYskR1kyMJcMmOICRV70DLXLLrJYk0W+eq5qb7eSdt4J/QKcF3PnWYXlXMqaVxHrxuJTtonCf9O2rOKM2WlF2kQpz9riSWC8+43UdSlYytxwA6r3nWWWy0maan0pisaUTpd7mNbCNuTreS33Ob27wu5skjid8BWNYIJbn+7m5ETglCptP5vgtfOaSsoGk16u9/RqxA2IkESsYpONz+8lpclstcbt9ncn7Pzvmtx1m3tn+rm60wzI3BflMuTLzRbtnkVgBcNm3jJ90vRG3TPv4uidhMWDGbpC+uXu4S82R3iqwh3wMYgXv0KlArIhtH8HPxvmbcHmArZkSyexbQpy2GHFfZt6bPAG1vLxYudwhHKZh7s7iffutz7dGHHggZvUffenktLKsNducFUsQvt+Dj1MpwcDNV9nPPO6PId6ISAqNgGsjTF0AHyzhxBJGpIH4xH0CSRtRfhIE/FIDirgc97JCXtBXgajvMBTgs2KJBqIF7yQy2Y5KmgNtyUvEjtaJcUglOTEwtM6MWEdxe3B0wwzeV5LIIL0RiVHAm2p1v6ET5Ik7A232nBFL0h4MxT14IRmHYGiRuxbvCSzuAm5jk2am6S8MoFjS9tSkj4DJklVU7Px+hkPKD/FuuCBi0Z5J60PoFDCFYkkLleit9A5Cimqb1PEev8KKJS3upmbHhmJJjzOgHY7Bz2q1b88qViRrT+eMCbitlLRCLhZdRUsPCaFruKojKwGeg5pYuG0WdQwkbhY08DZ06JVsFu28Wg4WcYxmxnyVkusHg8m2fugLpdmQ3pJqu6+Bj4qNH2btJzFCYAViQx/SlXWY+lk9IK7aDj3ESWkSn6OvxJvoZqD9pcMgaKfkwd9+ltWBjUdXyAoC8ekF5PJAVEBosmEc1Wb2QiitDam4kvuQ/r2xhbr8L2IHgmjPITOX22zIRhh1AAsW4uZSIyQeuGDlTF4iTu+kExoI7zm5KYuNX9kWG54T7CWDYpJ4Fggqi7QFzdMJA3H1X+pawYW+x53ac2TbE7GYyT1XwvUGPsyGEjBy+RUPDMSSTxeIs6xpyP2beQtOWifegqQfMu+Ux+DHuXcoWxAoTScAzMV/mYlmHUFvmN1ch3k+apmKxUZRljC7w4h7tVHQDLGrBMYeRryy6JjlukPwnE3oiG6IbNhxSYXgmOq1PXIFQ9dbdA/f9Ee3WsIx828zaVHvO8wGkfLmBjvf+ww3n8KiER/Od3p9P0bRaML9RmYsEXsOt0jDXrH5r0FT+f6ho6Awxf0mfhBnwuj6LipvSrha//IB4B2AWKfSOS7JGs7K2mnl5oSrqXWbKsvSex5bh1tWpHb9zlDbd7B9bq2SOKd+RfHY8vnKv1Xh2Lrt/Ue8jCaA5aCCcQVOWJHdEuzaOBSsY6hnj3ixQ4BBqZ7wULlX4ChCj3UvNdvirVOyjKBDVwHfkiZoYDo0ztkiUqlOX7ExKXGgbinbObUVFW4zD145ChqggktD70bBbcQ4y/Q4gjNtzJ3/sJjmpvqkaPvTKuFMV8gmSVB7WQRBmmK2HkfH8erw+/Icvv6yyZfBrIfUzvST8r0789vz6fxgyp+1q0eBCvil/StlN4+OF3HVf2H78SHaxK7o7Omk3WNci0C+GYWg+YAjCvq58OW3rhYDiFOGlLaPCJZhxNHBWk+wo5hwUsELFhNvgHknaDhSOc9b+XXioI0HfJSBuEyZRVo/0x6Y96Fw6B9axgysyseG1M+2/BrxoHh6RWMg3oWSR1ak3hLyYxJQ0siDH5VBXA4ipNrJUPWCdw+KBI2eKeZqEAlNP9JQjhEraA5dh1GjLgaRoekhFuvyK8NI689zIpwRbyEvRIdrakhkRkDJsWoNYJzXQGndkTcg+yWn5RW1ocb9SquJMYOCWGIafTQ5y8y0JWGe1h7+sUBdQKpIS2o9hVYtOaez59CqFbt1Mt9eXan0pIZ7WCPe0FSZsNlqEeQl3FXxmsyOGbzGkdBcMNDctbOchpz59fOYdojTxK1oZFxUidr90x/keygewqn38aPPO6wykkNtUvWexWmX49aUrBbuRnk+/Bq8iBnic1Nq5lG5Tn9HKoI3vf8ZRB/oNzDVz+S+mXHwzN5CAf2p4GSfQnqTZwovVCWcqucW57Gp2eb68JOovIZkNfobnoIKzvLfXHJLHlaD4eYv33xivH4Q25/j3n5N2M+P0+Fk8/xeekdHR0dHR0dHR0dHh3b+A2v2fmHiwgZmAAAAAElFTkSuQmCC",alt:"ABC",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),(0,Va.jsx)("div",{style:l,onMouseEnter:e=>e.target.style.transform="scale(1.1)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:(0,Va.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAkFBMVEX////MAADKAADjjIzOAADdamrdd3f/+fnRMzPfc3P87OzrqKjuvr7klZXUTEzRIiLRGxv88PDjiIjSKir++vrNDw/329v55eXggIDsrq700NDdbm7xxcXzzMzTODjWR0fUPz/YVVXllJTooqLvubnZXFzsra3nnp744OD21tbbY2PXWVnNExPjg4PYU1PPHR1L3avvAAAG/klEQVR4nO2c6XLiOhCF7Y5ZwhIwu1kCIcwNJJC8/9td2VLLsiSyTE0hp+qcP0MsS/ZnyepWqz1RBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQVC/1Rnf106j3DwlHVEeN/iHhHcX1E92BEIQgDC0QghCE4QVCEIIwvEAIQhCGFwhBCMLwAiEIQRheIAQhCMMLhCAEYXiBEIQgDC8QghCE4QVCEIIwvIIQGomD9sEvKl1t7HoDtyYU9zB+beo81NGZj38ssuUmW3z4m6Bk9bxZHkY7p3i8LxraxUnx7/4xLCEli146MauMZUGSqaOTQ+JphPapOn9pM77L401K5I9VQEKK/2zsGpOCkLYt49jKaeU8M4pfqsUPFmEjHCGtZm4NSbirHtxbzUyPleJePQnpcemrURAmc+vopdIO2YnaB7O4LoRXLyMIqe8cfTDrPn16nZoQJuvKea1USxBOeRaZZRs138wT4w755e0cenymMWHWg/BsvEjHrPk0njIBlX00WQlLMlBjuV+2pO48ehGWJu7K38uyuBaE0w6f0OruTHNfGGgepOLlE3+SOneoa6sH0JPFB/lXOd/WgXCqJ5K+xHtsXPZ9qf1QTyQUP8y7Mb3Jv9bcFH8u8UCD00Y0Ju1Kp1Z9yO/Rciz6oL0/VaqMmbBD1M1bIPXKPlVvsNWm+7wjGVgP4/CE9KIKhaWmR3vin1iErWH8KEtmPsLoPSY1Iqa1IdxGfAsl7HXCKJP/CC3IQzgj+iOLe1QXQvXI78U8eXRrOIS5IZA2IT17CAW3NYxDE3LzwhHbpZ4aLuGJJEoUdclDmJI1jEMTKmu+oXjgA3Rmmig3BDTjMpcweraGcWBCnvkSPUEInfbb4ZQVO4Rz/e4Wdt0mjAZ6GNehDxXXhSjjczY7ax1uEwpDwGfndt0h3FSHcWBC2RkdvU7NP8J07sAmnAzigbTrc18fRo3KMA5LqO5ZmHG2+q+eOIpNKFZHtJe/xATlEs71A8sdn8CEhZPZGpO6DbZxXxBGWx7ek6GHMH9iyj0VDyws4bk4utQ3tPZ5dR5C0657CCdnYxiHJVypo6QsxYcH0Edo2PWth9AYxncUlFDdxhuNZfHG65j7CNOE7frJR5gPY/nQJmH7kP4r7m1KC76L7xLmdv1ZVRp5CIXj8yp/ZY9BCYuR1tI32/YB+gmFIUhkL3V8fSiAeHpeBSUsloIpG/DW0L74J4Rroqb8NfcRdpJ4p34FJSwM85yn0vRsX/wTwugtJjO+ahGK1aZ8B1i/qQ9TOTqP5dKySqg6bRAnZqD8N72Hx4s8e6TNaJVQWUoxjBfhCYtxNPnhXDpX/kw6jcflJk5JmKhIyBsZ65VfZQ/n7HVm2q5XCM9jOTqPhj9fG59m/D1C9mfEqC4jrZpwyAFW0W4Z2ApEOC2O/tAvFb5mO+KKrx5CXgG3pnxiOMK/WlsIQp6aVkS8Y2USUkP+EsNYR+/Crg/35fqw8fX6MF/2JnJ0drR7Wu1D5tZxudBr/PRHa/xiYa/8mb626xXCMpBDq8CEaj4fGXGa5daO06xdQvZnxApYbVRUCctADp0CE6pY29SMtc3624+h1pRdlQphvJNHe2zXq4TGBs02LCFvli2vxku1LEKefjmgYRGScnz6PE8Hj3m/XIl5XyXkOMWM5DtsEeoxMYw/WkEJ9b5F079vcZ2Q/ZmmDGjYhLHaZ+wpxycg4U6VLbx7T9cJ+dko99QhZH/mXb4Jddg/fI49+4efEapFRLew6w5h3JZu+SwuHJ9a7AGf2p49YK2Mw2uakO36OLfrkzabPiZkx2dR+BP3IQlJv3/Pib2Pr3UfqylDrJ64ovI6xZJke8z0YCgTUdQGTRIPlicd1XgNQGikKkTZ1srFMLIy1IqipxvhXmoUaRjsoJXFqlOzSpbGg3312+TTGBGX+WHx53HgaPzK5xh+3VkFRe/FAzirwW6k0rA/k2fa8JIqdUIlN8qJqs4wk5YrXTgwbq6pH8uaTzBz3jiQkx4yXki6C7Rb5bV9+z8RraTlOUl7aluUi92MuHf30rfKTWx7cxMdTawm7IzNaqzn87TF2xKKKzU8+aWOnqwmhtVKXfsK1ZTAWezqpjnCb+svGuhs3RaMkKKTW1vOt4WWiVP7poQFZPOQtq7Unszd5XFe5427cenhj2nHwz/1xUhuTZhfkAZGrn6py3372rcItLt0D92Lm6fPxaNss35pxFfS/IN8UeK1+F+d/5fF+GYGhCAMLxCCEIThBUIQgjC8QAhCEIYXCEEIwvACIQhBGF4gBCEIwwuEIARheIEQhCAMLxCCEIThBUIQgjC8QPgjja59aRBU304x/4Z6nrzR4Bpd/xIJgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAojP4Hz92ld/UD3VAAAAAASUVORK5CYII=",alt:"CNN",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),(0,Va.jsx)("div",{style:l,onMouseEnter:e=>e.target.style.transform="scale(1.1)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:(0,Va.jsx)("img",{src:"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAADfCAMAAADcKv+WAAABWVBMVEX///8AAADMAEwAidBkYKrzcCH8txENsUv8tAC8vLwArT97e3tra2us37v+4a1PT0/Pz8+hoaHZ2dkAgM3yZQAAhM5fX1/KAEJgXKhKSkrJADvLAEYgICBbV6ZYU6XJAD6ysrIsLCzJyN8Ar0P09PSsqs/zag/L4vOr0OsXFxeIiIjk5OSRkZFUT6MAqzRBQUGJhr2jocrnoLRua6+8utjSM2X83M5Zptv+8ev3qYT95tvt9vuFvOP1ilL+5roplNTu+fL77PHfg5v33OWWk8Pq6vN+e7frr8DaZYbhiJ+3ttX6xq/5vaLc7Pfa2enzdiz2lmdKoNn91o/9ymXL69X8vzi42O8xuF+Az5j0fz6X16o2NjbwxdDVR3H55evYWH3uvsrqqbz3oXj2lmb7z7x0s+D+9OD92Zn4spHe8uT90X6r3rpixYBYw3r+5bf+7c5zy47GACj9xE7QIZPAAAAR5klEQVR4nO2d+1cUxxLHd10QAZHlsS4sLuzKivIQBBVRo6BRExWNIgYf+IgxGtFcc/P//3Cnu2d6evpZ1dMsm3uoc27uCcxMz2eru75V1b2kUDi0Qzu0/1O7tbty/3Zk99//CL3l8YPlC/cu3rtw58zj1n6+WhD78f7l2lS1OhFZdao28fNPzjtapy9MTtbHqNXrk5MXTrfhNf1t902tekS0iamJ27dsd7SW65NjXaKN1ccetOt90fb2TW3iiGLV2n3zLWfO17tUq3d1qCdXpjSAxKaOGBbl3Ys6QGKTd9r77jB7V9MDEqut6O64dN4ASBx58W67AVzWulw1E0aMt9VbzlgIoyU51mGMt44YJqmZ8cykjZCEnc5ivOwgVOfqaasPKWNXJ2nkO+ssjRkzMeeuw4eU8d5B8ai2Yok0gom3XBxzI3bVzxwUkWy3pkCEU8JUvQRwYmSTnbIc3zkXIrNqmudAfEim6oUDxBLsR9g0jRC5Gy+ZJF+2848Pkozbz0AnHklX40UgYYe48RYgmsZW22W3PIatRGIdsRp/ggUbYhOx/p+BztMoqF46WDpqiHmazNR7wGjT1SHaiCGcYjEV7sRoph4wXmS3oPGUGFuMkMwmRTz4xQiWDOrF38gtpzFerB98dfweHm0SZQSrIkU8+HiDCKgRIu1xIAJqR+Spv2EQmWr82xBRE5UhLp+vMwMhHnw7bhc/UR+fpnZpeQygjx2wFlERtSqV/oBctd4BiTheNLg9AEzUDtDFwmUM4q5w46UuyGJsZ3aztvpwc3Pz4eqa9PPbiAyu9pbf9tjYJs6YWk1dPxvZo+vB+T5+6B4dHZ2ZmSH/fPJR/NUuYqZWeU/N3YBjlo02j354OhJZJfpf6cq5R+H41q7OjM50pxb921XBl/hKA5Gmikvx3PpIpcStUhlZPxcI8EOGL6H8k18Ar6Ym3iT3QMspYZ6eq4yUZKuM/BCA8KEGkEL+ci2+Ai4bSUmMcGIiGdefqoAUsvRrXsIbo1pAYqOb8TXuVnhsXBYfgFO4+IazlYqWMLKRP3IBXuvWuzBmjCcrOBPnmnEBOE+T7O2c3oWxI5/mITS7kDFeZddBJyrv+UOXYp1F4F9thBHjujfhms2F4ly9D2zC1ZInA5uMY2wj9aydMI8fXzoRu0dXyYXg5gYSkSnGdeMyTBk91+NVxzRlRi+F6cbEu+TRsIkad9+euhFLI14K6VqIzGY+kGthGU6Vb6PeASGyto011KR+9MnobrinaTpVQbl4WkoB635y6XUQYalyBU+4CnJiZDfI1SDdmHqfPBzUg2MtjT8A05ROVXzGCnRi4kbIYkzrDNCmBg02j2BO9HHjGtSJ3TPUjRDdSPcX7wK8yNLTK0AnRm7ErsZNqBMjN5Kq4y0k4KSPhziRpKfAlUjdiA2qN8CE3TM0x3FvFad1Bkg1LpLrfgA7sVTC6j94nhJGcoNbN6rC0Ru3arBaGA4YzVQcITie0plK0zinbojtN3epUSeXwTQxQTyLQnyIQez+hdyy4tKNVDMi1XCF1LFlctk6xovIxXgVHm2IG2kzx4Uoni1y1sTniWI48+8sIq4D8AGFyOTf1YqriQM4ulMsPYUrBkXE5eK/4xBHSZPD2eAQB3A4cZKkpwjFoIg48UcismT8jdWNoma4635yDUYx8IjIicrk/73VjRM/iwMsWxFZQwMFiJ6ouHATuZG2cazTNLtlY98pPk8aGijFKKHDDSJ/i43cZdUNUTOiRNyGyBoaKMUooUUDJf3EqG5YD1IhzqPS9BSnGCW09KMSOGovyV22Bkc1832NlmUt+ihGCZ3AYdLw2I2kbLTqRnYAS4eq7qEYJXwavol148wTcpu5MT5xOTuARTVoeopUDI9iCl4SczfadWNCOuJvbt+whgaW0KNBhVXGuGw0L0Vpm9+sGrShgVUMn1Yq3o20bDQ2OLKaYWnfsIYGVjHwfY0CXv27Rx8WLEfha9L3poyq4acYSN2PDetFVjaadKMmf8fPhEgbGmjFKPkQesi/TTcm5McbVIM2NNCKgZX9xP5EMrJ2o143snUGMUP7ZpKkp1jF8NvSIPYByUjLRn1jPFtnENOrBmtoYH2YY6P4CY7RohuyZpia/j6KkW8rHLYBl7qR3KPVDVkzDKrB0lOcYuQ9tYFL5GZIu1G7oSprRpSI6xBpQwOnGP7rMLFrv6D0kdyia4xPqd8L1y5F8guMYlRKIc5QYSYrLRu1jXH1uZqmP01PMYqR80QKt9UZuCOZbqgB9bL62DtqvKHfrYUrRqXkKYcag6sH1Q31vLiqGbqmP2towLfbPHaGzfbRcExMMVY2KjNV1QydatD0FKoYFXSB6LC134GOpGXjbVk3pjR/a0NNxGl6ClSMkac5j6R+uvl5a2/v84nvn/iPTOf9ZDeSdqOyoapqRkFt+tP0FKgYolRsfNkeGNj+soHgu/nsWGpH977HP16zHPkTGcm1sm4odQYxf8UYWU+kYuPrt+m+2HZebIP41rYIl2DRv23FB2xBeQAtG2XdmNINJbVv6iQ9BSkGz2e2/1rsm+7hNt3X82LDSfg5y5dQ7jHIay8BkLRslCaqRjOUpv8kUDEqiQu3dxYFPmZ9fS/sgJ+eawAZ5Al2BaDAomVjtjGu0wy5fcPSUzdhovYb31RACtljm67fdS5MIP+JHelM6GZ+jy5rZWJqVfsnb7KJOE1PnYrB1X5gWgtIbNHsyBNmQNGRzoSO6YYYcNQ6g1hWNUCKwRO2vxdNgMSRfxkI/2MlJJDP2IWuhI6WjZkGR21XO6K4Ful+m0MxKpX4IPh2j9GFNsbvLkLiyFhAHAkdLRvFDVWtZmTbN7ShYVeMkSux2r+wudDC6CYkkHvs4o9WR9JTKpnGuH7eCKpB01OrYlQStf+y0+cijBg16/EfEOLRY0fjfMea0Em6ofammAntG/qXJmyKMbIeu/BVn32SxraoxFXnQkwhP7M7bAkdLRtXeFDVa4aYiDPFsE3SWO03/gK4kNmGNBqYMGJ8zhxpS+hI2Zg2xvWaIapG3a4YXO0tUuGaqp8RiKl8mBM6WjbyxriuziCWntmk6alRMXjC9s0ZZ8Sp+iUzGAKQQsbysWZK6OgpFa4b2jqDWIJIGxomxeBq75IKyab/FoeCr0TuyJvsTlNCR+U/aYxPvS3oLfnzTPQ4mEExuNq7pUKeqhvCUM+wiKl8GBI6WjYmjfGqgTBp+tP9Nv3XMbjag6RCQvwqDIUnJPIR5wGGhI78ylZnEIvbN5NGxeBq/0qfc1ttWtD/Tz6IEeQWu31V9+UxqhusMW7SDH5mk6anGkLenkFIRcaN6Ug3/RC5fGgTOnJKhTXGTZqRJOK0oaFRjErSnhmAqb1iQkzd8kRM5UOT0NGykeqGSTOSpj/90reqGLw9g5KKjBcH+Eh7voikjIyfoSR0tN1IGxyGOoMYScTpfpuiGGltj5OKDOIrPpBHQBUcGcuH0mplumGuM4iRRHxSpxhc7dFSIdh0muDkQUzlQ07oaNlIdEPZA09teYylp1KNwdXeQyr2AzGVDymho2Vj1aIZtH1DGxpZxeBq7yMVesQcazGGjOUjm9DRduPtavq1RdWiWoOmpyJhpRK70FMqtIjeETVlTOQjk9CRsvFtzawZRDVoenpOQOSbMb5SkZoQbux9KRhjIh9iQkd1413N8rfDW3Xa0FgXXJh8T99bKgTEVDQAbRsAZNyFFBM6Ujbu/tesGYVCF2lopIrBN2NySIWAKFT+IRBT+VjljqRl4xFTnUHsHklPuWJwtc8jFaktCgMBGzdOyLiM5AkdLRtXbH/+nbQWE8XgmzH5pILb9I4wUIDFyBgT+UharaPyX8fRWawYXO1fBXFhJtp4lxo6yFg+4lNJM5sFt1WY2scuzC0VKWKms5FT/EXGRD7izNxNSGsMrvYD+dResMw8DenGVD5oQjf6seCydfHoRQCpSEyQjMBuFOSDtFpfuggjxeBqvw3vIbptRxoooBsF+YgSutFrBbtdSdU+jFTEprbDQwXVGDKRj83RJ3bCR7w9E0gqYpv+po4VcqoK8nGt264bfyRqH0oqEkTdYKZNcF/IRD5W7V5k/7cR1IW6abovjM8/aYfRWf6qQiIcMAwUKI/jjMkmltMCSoWdMEBtLEP+A0nggkpFDzl+YzuzcdNyZsOLMZEPi1lPJnhY384X+4BboSGf2cf70hM2zvRNv7IPSOzz0WMhMbl8aC2sVExHgBtuwsi+bz0/FtL2jC7cWewLaD1/w875xfbp+39OBDPTgvz6dSCcbcP8d2iHdmiHdmiHdmiHdmj/Uuuk/7jjPllj4aDfAGKt+eFyuTzc8nJIb7HDGYeH+pdmi4nNLvUPDSOf0FssziEub5WzNs/fpOywYQ8PtBrHizo72cA8LEIs9sMvH5YG47ee1L5Lxk7h3qxQ1vPFlGUUIoLRiGh7HcEGwW/WaNqfdBKHWDzeLsRi8TUIsnHK9RzwK8eI4M8kPyLk5YaXQjxFQiwOtg+xODtvG6JQmAvzQcmIxfH2IRaLtrg/3wQ9wgOxuNRGxKLZjw3gE3wQi6/biHjKNABoknojFptu2QqFaHpD+GP8EIuzTsZgiPrlCEggciLa1khoRF0IRxD6I7oYwyFqRjI/Y/bk3FCjt7cRpeT5ER2MUMTxci+3xpw2VVEqHFOkGR/KvFO5Py+iVbPAiFK2VB5X31wO4OqbUJvTfOa9S/kQi7Yk0hOxUFhQx8leMK8HNATA8iw2DQczeiMWhhzDNDUvsmRZNb25EIvm2/0R1XCZGUXjZVStjkU0M+ZAlG8tDgm/1E1TuJ98EIuN8IiFpnSvGFIH1VeAl/V+iJmPOBBivxmxvI+ERkQDYx5EebkJI7xWhg81S22I+uZjHkRZ2lMK1YmBIo0DUTtMHkQ5pKY5hrISQbVrAERdYy4P4qx0L/+FGk5d1UAwRE2SFFA00kuU5DTkNHUgqowBpb/Bf6MMG3YvyY6ovKo/ojKQ8ZmBnehClCtXb0QlaKYBW8ndgq5EN6IU3HwR1SQ8/Z1caMHanQERs3WdF+L8UFN5qiDt8q8abUfMNOZCNTb6zY8MPU8VxKbmfU6ljIEQxbko94abgQkVxIaucEubj2EQM+tbVkV4Oe+JOKQtTvnkCYKYhZDvNNQ4IRGtjCEQJQY5oDbagKiJ8MUkaQ6B2MwWSk3p1+EKRQuihTHMWhwUMzQ5O8ceyPBD1DOWgyFmZLF5MIj6Xb5ywIZ/uiDlTe/2TFQTY2/APY0F050BWxp2REODVa5ec2zbJCPJXat2iIaNUX6fHIjJjJQ1KnApZUOEpK9mxMFx0Zram1vaYYBnR4IgQhiNiNIw87oYzW6Wl7fxGMB+IOo6uJ6IBXXNFeOUqaX9absQ3YwIRE2QZq0huU/caCuikxGDqEko6GqU3Ru61HAgqgVrDkRF5YsN8lPFu4EPc7sQHYw4RCV+UYcpneLAyuhEtDPiENWOKf1pU/rhbLsRDbvwXojK5gWNnkqB2mg3oo0RiagIR6/++W1HtDDmRWTDKWEIcVo9EKKZEYmoZLKs3lAVM2RFBUNUUxA/xKZ8f5xzqw8OKBxAxEJL7j/4IKofVIyoJgUBu6lQxEJLe5ANh6iSJMOpT4YcAA6MqPcjClEz25MSX1OIAA4Ah0YstJo5ETWHa3hVofv8AsUcBKKOEYOoO1BrfI/s0zUGb9RhEDXnY+CIw+rnk9lo158obhhepNz0P8noSIFlRihiWU8gdNsMsjQ7pFmSjVznUV1ZvpSIGBFPiaYXHOmDMJamgw2xDzDfYJ/W/iFKuyx5OnDyNNRuF8U2fnxhaGho4Xg6+j4iZuNiLkS5EYV6xn4iZgJDLkRFFDQnyA8GUWTMg6jpCQO+1NceRIExB6K2JQz34z4jpoz+iIYcFPyFm/1G5ETeiMbjmLa42lbEBMkX0fKCkK2UtiDGPQpPxIbtyS3QZG0DImP0Qux3lUkQR7YDkZ4J8kDUfQlKMe1hA0/E8tKgaEsNOCJh5Ihz44MAOw7/AxlDxsQWi5jLFsJ2AyXrtazJueDnOky2sL+fZau3v6nQzZ4cgkz1YBb8BIlirXJjrn/wdfNU8/Xg8blG2RKq/gdLrvyL16OFxwAAAABJRU5ErkJggg==",alt:"NBC",style:{width:"100%",height:"auto",borderRadius:"8px"}})}),(0,Va.jsx)("div",{style:l,onMouseEnter:e=>e.target.style.transform="scale(1.1)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:(0,Va.jsx)("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxASEBUSEBAVExUVFhUZFRgVFw8WFRkQFRcWFhYVFhUYHSggGBslGxgVITEhJSkrLi4uGB81ODMsNygtLisBCgoKDg0OGhAQGi0lICIvLS0vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIAJQBVQMBEQACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABQYBBAcCA//EAEEQAAIBAQIKBgYJBAIDAAAAAAABAgMEEQUGITFBUWFxgZESEyKhscEyNFJywtEWM0JTc4KSsvAjJEPSYqJj4fH/xAAaAQEAAwEBAQAAAAAAAAAAAAAABAUGAwIB/8QAMxEAAgECAwUFCAMBAQEAAAAAAAECAwQFETESEyFBcTNRgZGxFTI0QlJhodEiQ/AjJBT/2gAMAwEAAhEDEQA/ALNe9ZjDWZIXvWBkhe9YGSF71gZIXvWBkhe9YGSF71gZIXvWBkhe9YGSF71gZIxJu7OM8hkjo1jlfTg9cYvmkbCk84J/Yys1lJr7n2PZ5AAAAB8bRaYQXSnJRWttI5zqRgs5PI9QhKbyisyGtWNFJZKcZT2+jHvy9xX1cVpR91Zk6nhtSXvcCMrYzV36KhDg2+bfkQp4pVeiSJkcNpr3m2as8N2l/wCZ8FBeRwd/cP5jsrGgvl9T1DDtpX+W/fGD8j7HELhfMfHYUH8vqbdHGisvShCW7pRfmSIYrUXvJM4ywyD91skrLjNRlkmpU3t7Uea+RNp4nSlwlwIdTDqsfd4kxQrwmulCSktaaaJ8Jxms4vMhShKLykj6ns8hgFcxrsF8VWjnjkn7uh8PPYVOJ27a3keWvQssPrpPdy56dSr3vWUeZdZIXvWfBkhe9YGSF71gZIXvWMxki1Yq4Q6UXSk+1DLHbDVwfii+wy42o7uWq9CkxC32JbxaP1LCWpXAAxJnxvLiCh4bt/XVXJejHJDdpfF91xmL243tVtaLgjRWdDdU+OrNAiEsze9YzPmSF71gZIXvWMxkjZwdZZVqsaaby5ZPVBZ35b2iRbUZVqigvHocLiqqNNy8i/06aikoq5JXJbEaqKUVkjNttvM5sY01gAAAAAAAAAAAAAB8egRf8Cyvs9J/+OHNJI1lrLaoxf2MxcLKrJfdm6SDiADxUqKKbk0ks7eRJbWeXJRWbZ9SbeSK3hLGbPGgvzyX7Y+b5FRcYn8tLzLS3w7PjV8iu1qspy6U5OUtbbb/APSKec5Tec3n1LWEIwWUVkjweT2AAAAAAAD6UK0oS6UJOL1p3c9fE9QqSpvODyPE6cZrKSzLFg3GbNGurv8Amlk/MtG9dxcW+KLSr5lVXw5rjT4/YslOaaTTTTzNZU1sLhNNZoq2mnkxUgmmmr08jWxiSTWTCeTzRQcK2J0arhozxeuDzcs3Ayt1QdGo48uRpLavvaalz5mmRyQAAAAD7WS0SpzjOOeLv3rSuKvOlGq6U1NcjnVpqpBwfM6BZbRGpBTi71JXr5GrpzU4qS5mYnBwk4s+x0PJBY02/oU+ri+1Uz7Kennm56isxK43cNhav0J9hQ3k9p6L1KgZ8vgAAAAAC5YsYP6un05LtTue6H2V58TRYdb7untS1foUF9X3lTZWiJosSCczMYa0AAAAAAAAAAAAAAAvOLcr7LT2dJcpSRp7B528TOXqyryJMmEU17ZaoUoOc3cl3vUlpZyq1Y04uUtD3TpyqS2YriUrCuFZ15ZezBZo+ctbM5dXk67+3cX9taQorPVmgRCWAAAAAAAAAAAAACQwThadB+1B54+cdT8e8mWl3Og8tUQ7m0jVWejLrZbTCpBTg70/5c9TNHTqxqR2ovgUNSnKEtmWpoYw4P62lfFduF7jtWmPHxSIt9b72nw1RIs6+6qcdGUlGaNEAAAAAAWDFS39GToyeSWWHvaVxWXg9Zb4ZcZPdPwKrEaGa3i5alorVYxi5SdySbe5F1OSgnJ6IqIxcnso5/b7W6tSVSWnMtUVmX82mUr1XWqOTNNQpKlTUUa5xOwAAAAJHAVg66qk12I9qW3VHi+5MmWNvvqq7lqQ72vuqeXNl6SNMjPGT6DmZjDWgAAAAAAAAAAAAAAFzxUl/bJapTXff5mjwx50PFmfxBZV34EtVqqMXKTuSV7b0JE6UlFbT0IaTk8kUTC+EpV535VBegtmt7WZi7unXnnyWiNFa2yox+71NEikoAAAAAAAAAAAAAAAAEhgfCUqE78rhL018S2rv5Eu0unQl9nqRLq2VaPDXkXmnNSipRd6aTTWZp6TTJqSzRnmnF5MpuMmD+qq9OK7FS97p55Lz56jPYjb7uptrR+peWFfeQ2HqvQiCvLAAAAAHqEmmmnc0009TWVM+xk4tOOqPMoqScXzJnDOGutpQhHI2r6m9Zo81fyLK7vt7SjGPPUr7SzdOo5S5aEIVhZAAAAAz/OISGeXFl6wJYOppKL9J5Z+89HDMamzobmmovXmZq6rb2o5ciRJRHABzMxhrQAAAAAD0oPU+TPWxLufkeduPeOhL2XyY2J/S/Ibce9eY6EvZfJjYn9L8htx715joS9l8mNif0vyG3HvXmOhL2XyY2J/S/Ibce9eY6uXsvkxsS7n5Dbj3rzLZig31M071dN57/ZiX2F5qk0+8pMSydVNdxp414QvfUxeRXOe/PGPg+RHxO547peJ3w63/sfgV0py2AAAAAANnB9klWqKnHJfneqKzv8Ams7W9F1pqCONesqMHNlzsmBrPTVypxk/aklKT4vNwNHSs6NNcIooKl1Vm+MmerRgmzzVzpR3pKL4NZT1UtKM1k4o8xuasHmpMp2F8HuhU6N96avi9mp7UZ27t3Qnly5F9a3G+hnzWppEYkgAAAAAFjxTwhc3Rk8jvcN+eUfPmXGF3H9T8P0VGJW/9q8SewlY41qcoPTmeqSzMtbiiqsHBldRqulNSRQKlNxk4yVzTaa2oyk4uEnF6o00JKSUlozyeT0AAAAAAAAAAAATeK9g6dTrJLswzbamjksvFFnhtvtz3jXBepW4jX2I7tavUuCNAUhkAAHMzGGtAAAAAPnIHQcEr+3pfhw/ajW26/5R6GWrdpLqzbO2RzAyAGQAyBgZA1sIWpUqcqj+ysi1yzJcXccq1RUqbm+R0pU3Umormc/nNyblJ3tttvW3lZk5Scnm+Zp4xUVsrkeT4egAAAAACcxRX9eXuPxiWeFdq+hW4n2a6lwRoCkABV8c89LdU+ApcW+XxLbC9ZLoVspi3AAAAAAPdKo4yUo5HFprej1CbhJSXI8zipxcXzOhWSuqlOM1mkk+eg1tKaqQU1zMvUg4ScXyK9jZg/NWitSn4Rl5cipxS3/tXiWeG1/6n4FbKYtwAAAAAAAAAAe6NJzkoRV7k0lvZ6hBzkorVnic1CLk9EdAwfZI0qcYR0LK9b0vizV0KKpU1BcjM1ajqzc3zNk7HMAAA5mYw1oAAAAAegOg4J9Xpfhw/ajW2/ZR6Iy9btJdWbZ2OQAAAAABWscLRkhTWm+T3LIu9vkU+LVMlGHiWmGU85OfdwKwUhcgAAAAAAAnMUfr5e4/GJZ4V2r6FbifZrqXA0BSAAq+OeeluqfAUuLfL4lrhesvArZTFwAAAAAAAC2YoWi+nKDfoSvXuzy+KkX2FVM6bh3P8FHiVPKopd5OVqSlFxkr0001sZZygpRcXzK+MnF5ooGELI6VSVN6Mz1weZ/zSmZS4oujUcH/AJGlt6yq01Lz6mscTuAAAAAAAAAWXFOwZ60lrjD4peXPWXWF2/8Aa/Ap8Rr5vdrxLMi5KoyAAAAczMYa0AAAAAAnbLjLKEIwVJPoxUb+k8tyuvzFpTxSUIqOzp9ysnhqlJy2tfsfX6Vz+5j+qXyPfteX0LzPPstfV+B9K5/cx/VL5D2vL6F5j2Wvq/A+lc/uY/ql8h7Xl9C8x7LX1fgfSuf3Mf1S+Q9ry+heY9lr6vwWKwWh1KUJtXdKKd2e69X3XlvRqbynGfesyrqw2JuPcVDGar0rTJeyox7ul8Rn8SltV39ki7w+OVHPvZFEEnAAAAAAAAnMUfr5e4/GJZ4V2r6FbifZrqXA0BSAAq+OeeluqfAUuLfL4lrhesvArZTFwAAAAAAACaxSq3Whx9qD5ppruvLLC5ZVmu9FdiUc6Sfcy5GhKMhcZsH9ZT6cV24XvfD7S8+G0rsRtt7T2lqvQm2Nxu57L0ZTTOmgAAAAAAABsWCyOrUjTWnO9UVnf81o7W9F1aigjjXqqlBzZ0CjSUYqMVcopJLYjVQgoxUVyMzKTk23zPoez4AAAADmZjDWgAAAAAAAAAAAAAvuA/VqX4cPA1Vn2EOiMzddtLqU7DEr7RV9992TyM7ePOvPqX1osqMehpkckAAAAAAAAnMUfr5e4/GJZ4V2r6FbifZrqXA0BSAAq+OeeluqfAUuLfL4lrhesvArZTFwAAAAAAACQwBK6009ra5xkS7B5XEP9yIl6s6Ev9zL2agzoAKPh+wdTV7Poz7UdntLn47DM39Dc1OGj4mgsa+9p8dVwIwhE0AAAAAAt+K1g6FPrH6VTNshoXHPy1Ggw23UKe29ZFDiFZzqbC0XqTpZkAAAAAAA5mYw1oAAAAAAAAAAAAAL7gP1al+HDwNVZ9hDojM3XbS6lNwsrq9X35d7vM5ddtPqX9r2MOhqHA7gAAAAAAAnMUfr5e4/GJZ4V2r6FbifZrqXA0BSAAq+OeeluqfAUuLfL4lrhesvArZTFwAAAAAAADdwIv7ml73kyTZfEQ/3IjXnYSL8jVGbPNSokm27kk23sR5lJJNs+pZvJFAwnbXWqubzZorVBZvnxMtdV3WqOXLkaS2oKlTUfM1SOSAAAAAACyYp2/PRk9bh8UfPmXOF3GtJ+BUYjb5PeLxLOi6KkyAAAAADmZjDWgAAAAAAAAAAAAAvuBPVqX4cfA1Vn8PDojM3XbS6lTxghdaam1prjFed5Q38dm4kXdjLOhEjiGSwAAAAAAATmKP18vcfjEs8K7V9CtxPs11LgaApAAVfHPPS3VPgKXFvl8S1wvWXgVspi4AAAAAAABJYuQvtMNnSf/VrzRNw+OdxF92ZDv5ZUGu/IvJpjPFcxrwhclRi8sss/d0Lj5bSoxS4yW6XPXoWeHUM5b16LTqVcoy6AAAAAAAB7pVJRkpRdzi01vR6hNwkpLVHmcVOLi9GdAwfa41acZx0rKtUtK5mroVVVgprmZirTdObi+RsnY5gAAAA5mYw1oAAAAAAAAAAAAAL7gP1al+HDwNTZv8A88OiMzddtPqQGN9G6rCftRu4xfyl3FXitPKpGXeiywyecJR7mQJVFoAAAAAAACcxR+vl7j8YlnhXavoVuJ9mupcDQFIACr4556W6p8BS4t8viWuF6y8CtlMXAAAAAAAALBidRvqTn7MVFb5O9/tXMtsKp5zlPuWXmVeJz/io9/EstutUaVOU5Zorm9C4suatVU4Ob5FTTg5yUVzOfWitKc3OTyyd7+W5LIZOpNzm5PVmnp01Tiox0R8zwewAAAAAAAACbxXt/QqdXJ9mebZU0c83BFnhtxsT3b0fqVuI0NuO2tV6FwRoCkMgAAAHMzGGtAAAAAALJgnANKrRjOTmnK++5xuyNrSthc2thTqUYyk3myoub2pTqyjHLJG39FqHt1OcP9Tv7Ko97/H6OPtKr3L/AHiY+i1H26vOn/qfPZVHvf4/Q9pVe5fn9mHirR+8q86X+h89k0vqf4/R99p1e5fn9mPopR+9q86X+g9kUvql+P0PadXuX5/ZM2OzqnTjBNtRikm7r7krstxY0qapwUFy4EGpNzk5PmR2M9l6dBtLLB9Lhml3NvgRMRpbdFvu4kmxq7FVffgUszZoQAAAAAAATmKP18vcfjEs8K7V9CtxPs11LgaApAAVfHPPS3VPgKXFvl8S1wvWXgVspi4AAAAAAABdsWrL1dBN55vpPjd0e5I0uH0t3RXe+Jnb6rt1n9uBDY02/pz6qL7MPS21NXBd7eorsTuNqW7Wi16k/DqGzHePV6dCCKsswAAAAAAAAAAP5xGeR8yz4F7wHb+upJv0lkn7y08c5qLO4VamnzWpm7qhuqjXLkSJLI4AABzMxhrQAAAAAC84ueq0/wA37maew+HiZy97eRJkwigAAAAAGJRTVzyp+B8azWQzyOfYTsbo1ZQeZZYvXB5vlwMpc0HRqOPI01tWVWmpc+ZqnA7gAAAAAEpi5ao0666TuUk436m2mvC7iTsPqqnW/lz4EK/pOdLhy4l3TNKZ8XgFQxstUZ1Ywi7+gnf70rr1wuXMz+KVVKaiuRd4bScYuT5kGVhZAAAAAAG7giwutVUfsrLP3Vo45iTaUN9US5cyNd191Tb5vQt2GbeqFJyXpPJBf8n5LPwNBd11QpZrXkUdtRdaoo8uZRW9eV6d7zsyzbbzNIklwRgH0AAAAGWg1lqfE89DAPoAAAAJHAVv6mqm32ZXRlu0S4PubJljcbmpx0fAh3tDe0+GqL0jTmeMgAA5mYw1oAAAAABecXPVaf5v3M09h8PEzl728iTJhFAAAAAAABF4dwZ10Mnpxyx264vYyFe2qrw4arQlWly6M+Oj1KRKLTuauayNPOms6ZmpJp5M0UWmk0YPh9AAAAAGgJCy4ZtFNXRqXpZlJKV3HP3kulfVqayTz6kSpZUZvPLLoeq+HbTNXdZ0dfRST551wPU8QrzWWeXQ+QsKMXnln1I0hEwAAAAAAzGLbSSvbdySztvQfYxcmktTzJqKzZecCYOVCnc/Tllm9upbF89ZprO2VCnx15mduq7rTz5LQq+Hrf11VtPsRvUduuXF9yRS31xvavDRFxZUN1T46sjSETAAAAAbWDbG61WMFmeWT1QWd+W9o721B1qij5nC4rbqm5eBO40YNXQjUgruglGSXsfZfB9z2FpiVqthTjy4PoVmH3H83CT19SsFIXQAAAAABcsWMIdZT6En2qdy3w+y/LhtNFh1xvKey9UUF9Q3c81oyaLEggA5mYw1oAAAAABecXPVaf5v3M09h8PEzl728iTJhFAAAAAAABhgEFh/AvWf1Ka7ele0l8RWX1lvFtw971LCzvN3/Cfu+hUmrsjyNZ086eplA00+JeJprgYPh9AAAAAAAAAAAAABlLVl+YSbeSPjaSzZbcAYF6v+pUXbayL2V/t/8136Cxst0tuevoUV5ebx7ENPU94zYQ6un0IvtVL1uhpflxPWI3O6p7K1f4R8sLfeTzei9SnGdL8AAAAAAuOLGD+rp9OS7VS57ofZXnx2Giw633dPaerKC/r7yeytETFWCkmpK9NNNbHnJ8oqSaZCTaeaOf4Rsbo1ZU3oyxeuDzPy4MytzRdGo4eRpbesqsFLzNY4HcAAAAGzg62OjVjUWj0lrg86896R3t6zo1FJHC4oqrTcToFKopJSi701ensZqoyUkmuZmmmnkz2ej4czMYa0AAAAAAvOLnqtP837maew+HiZy97eRJkwigAAAAAAAABgEPhnAka3aj2amvRLZL5kC7sY1v5LhL/aky2vJUeD4x/2hUbVZp05dGpFxfc1rT0oz9WjOnLZmsi9p1YVFtReZ8TmdAAAAAAAAAAAfWzWadSXRpxcn4LW3oR0pUp1ZbMUc6tWFOOcmW7A2A40e1O6VTXojsj8/Av7SxjRWcuMijuryVXguCJWtUUYuUnckm29iJ0pKKbZDjFyeSKBhC1utUlUenMtUVmX80tmUuKzrVHNmmt6KpU1FGscTsAAAACQwHYOurJNdmPanu0R4vuTJdlb76qk9FxZEvK+6p8NXwRe0jUGdMgEJjRYOsp9ZFdqnl3w+0uGfg9ZW4jb7yG1HVehOsK+7nsvR+pTjPF+AAAAAAWfFPCGR0ZPNe4e7pjwz8dhd4ZcZrdSfQpsRoZPeLxLIW+ZVZHNDGmuAAAAAALzi56rT/N+5mnsPh4mcve3kSZMIoAAAAAAAAAAAB8LTZYVI9GcVJbfLUc6lONRZSWZ6hUlB5xeRXrdiu89Gf5Z+Ul5riVNbCudJ+D/AGWlHE+VReK/RB2mw1afp05Lbdev1LIVlS3q03/KLLCncU6nus10zi/udwAAA2fMwfezWSpU+rpyluWT9TyHanQqVH/FHKpWp0/eZN2DFiTy1p3L2Y5Xxlo4cyzo4U3xqPwX7K6tiXKmvFljslkhTj0acVFbNO1vSy3pUoU1sxRVzqSm85PM+x0PBWcbMIZqMXtnu+zHz5aymxO5y/5R8S0w63ze8l4FaKUuQAAAAB0GhecAWDqaSTXal2pb9C4LzNPZW+5ppc3xZm7uvvamfJaEmTCMADDR8BQ8NWHqarivReWG7SuD8jMXtu6NVrkzRWdfe0/ujQIhLAAAAB9KFaUJRnHPF3r+br1xPdOo6clKPI8VIKcXF8zoFitMatOM45muT0rgzV0aqqQU1zMxVpunJxfI52ZE1QAAAAABecXPVaf5v3M09h8PEzl728iTJhFAAAAAAAAAAAAAAAABqV7BRl6VKD3xjfzOLt6U9Yo9qvUhpJmvLANlf+JcJTXgzk7C3fy+p3V7Xy94wsA2X7r/ALVH5nz/AOC3Xy+p9d7X+r0Nijg2hH0aUF+VX82dY21KOkUcZV6ktZM20jvkcjIAAPM3kPj0PqOb1K0ptzk73J3vezIVZOc3JmppRUIJI8ng9gAAAAkcX6MZ2iCllSvlxjlXeTLCCnXSZDvpuNF5F7NOZ4AAAAELjXRi6HSeeEo3Pe1Frdl7kV2JwTo59xOw+bVbJcymmdL8AAAAAHxk7izbJxU4q5rstJ35G+kndyRa4bWlFSXQrMRpRcos/9k=",alt:"Fox",style:{width:"100%",height:"auto",borderRadius:"8px"}})})]})]})]})},AI=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)(null),[a,c]=(0,t.useState)(1),[l,d]=(0,t.useState)(1),u=pe(),h=e=>{c(e)};(0,t.useEffect)((()=>{(async()=>{try{const e=await xi.get("https://be-pjhk4.onrender.com/api/blog");n(e.data),i(e.data),d(Math.ceil(e.data.length/5))}catch(o){s("Error fetching blogs")}})()}),[]);if(o)return(0,Va.jsx)("div",{children:o});const p=(()=>{const e=5*(a-1),t=e+5;return r.slice(e,t)})();return(0,Va.jsxs)("div",{style:CI.blogPage,children:[(0,Va.jsx)("h1",{children:"Blog List"}),(0,Va.jsx)("div",{style:CI.blogFilters,children:(0,Va.jsxs)("select",{style:CI.filterDropdown,onChange:t=>(t=>{const n=new Date;let r;n.setHours(0,0,0,0);const o=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();switch(t){case"today":r=e.filter((e=>{const t=new Date(e.blogDate);return t.setHours(0,0,0,0),o(t,n)&&t<=n}));break;case"yesterday":const t=new Date(n);t.setDate(n.getDate()-1),t.setHours(0,0,0,0),r=e.filter((e=>{const r=new Date(e.blogDate);return r.setHours(0,0,0,0),o(r,t)&&r<=n}));break;case"this-week":const i=n.getDate()-n.getDay(),s=i+6;r=e.filter((e=>{const t=new Date(e.blogDate);t.setHours(0,0,0,0);const r=t.getDate();return r>=i&&r<=s&&t<=n}));break;case"this-month":r=e.filter((e=>{const t=new Date(e.blogDate);return t.setHours(0,0,0,0),t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()&&t<=n}));break;case"this-year":r=e.filter((e=>{const t=new Date(e.blogDate);return t.setHours(0,0,0,0),t.getFullYear()===n.getFullYear()&&t<=n}));break;default:r=e.filter((e=>{const t=new Date(e.blogDate);return t.setHours(0,0,0,0),t<=n}))}i(r),c(1),d(Math.ceil(r.length/5))})(t.target.value),children:[(0,Va.jsx)("option",{value:"all",children:"All"}),(0,Va.jsx)("option",{value:"today",children:"Today"}),(0,Va.jsx)("option",{value:"this-week",children:"This Week"}),(0,Va.jsx)("option",{value:"this-month",children:"This Month"}),(0,Va.jsx)("option",{value:"this-year",children:"This Year"})]})}),0===p.length?(0,Va.jsx)("p",{children:"No blogs available."}):(0,Va.jsx)("ul",{style:CI.blogList,children:p.map((e=>{return(0,Va.jsxs)("li",{style:CI.blogListItem,onClick:()=>{return t=e.id,void u("/blog/".concat(t));var t},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f9f9f9",onMouseLeave:e=>e.currentTarget.style.backgroundColor="",children:[(0,Va.jsx)("div",{style:CI.blogImageContainer,children:(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/blog/BlogImages/".concat(e.blogImage.split(",")[0]),alt:e.title,style:CI.blogImage})}),(0,Va.jsxs)("div",{style:CI.blogTextContent,children:[(0,Va.jsx)("h3",{style:CI.blogTitle,children:e.title}),(0,Va.jsx)("p",{style:CI.blogAuthor,children:e.author}),(0,Va.jsx)("p",{style:CI.blogDate,children:new Date(e.blogDate).toLocaleDateString()}),(0,Va.jsx)("p",{style:CI.blogContent,children:(t=e.content,n=100,t.length>n?t.substring(0,n)+"...":t)})]})]},e.id);var t,n}))}),(0,Va.jsxs)("div",{style:CI.pagination,children:[a>1&&(0,Va.jsx)("button",{style:CI.paginationButton,onClick:()=>h(a-1),children:"Previous"}),[...Array(l)].map(((e,t)=>{const n=t+1;return(0,Va.jsx)("button",{style:CI.paginationButton,onClick:()=>h(n),className:a===n?"active":"",children:n},n)})),a<l&&(0,Va.jsx)("span",{style:CI.ellipsis,children:"..."}),a<l&&(0,Va.jsx)("button",{style:CI.paginationButton,onClick:()=>h(a+1),children:"Next"})]})]})},CI={blogPage:{paddingTop:"100px",width:"80%",margin:"0 auto",fontFamily:"Arial, sans-serif"},blogList:{listStyle:"none",padding:"0"},blogListItem:{borderBottom:"1px solid #ddd",padding:"15px 0",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center"},blogImageContainer:{width:"150px",height:"100px",marginRight:"20px"},blogImage:{width:"100%",height:"100%",objectFit:"cover"},blogTextContent:{flex:1},blogTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"5px"},blogAuthor:{color:"#555",fontSize:"1rem"},blogDate:{color:"#888",fontSize:"0.9rem",marginBottom:"10px"},blogContent:{fontSize:"1rem",color:"#333"},blogFilters:{marginBottom:"20px"},filterDropdown:{padding:"10px",backgroundColor:"#007BFF",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},pagination:{marginTop:"20px",display:"flex",justifyContent:"center",gap:"10px"},paginationButton:{padding:"10px",backgroundColor:"#007BFF",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},ellipsis:{padding:"10px",cursor:"default"}},TI=()=>{const{id:e}=fe(),[n,r]=(0,t.useState)(null),[i,o]=(0,t.useState)([]),[s,a]=(0,t.useState)(null);if((0,t.useEffect)((()=>{(async()=>{try{const t=await xi.get("https://be-pjhk4.onrender.com/api/blog/".concat(e));r(t.data)}catch(s){a("Error fetching blog details")}})(),(async()=>{try{const t=(await xi.get("https://be-pjhk4.onrender.com/api/blog")).data.filter((t=>t.id!==parseInt(e)));o(t.slice(0,5))}catch(s){a("Error fetching recent posts")}})()}),[e]),s)return(0,Va.jsx)("div",{children:s});if(!n)return(0,Va.jsx)("div",{children:"Loading..."});const c=new Date(n.blogDate).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});return(0,Va.jsxs)("div",{style:RI.blogDetailContainer,children:[(0,Va.jsxs)("div",{style:RI.mainContent,children:[n.blogImage&&(0,Va.jsx)("div",{style:RI.mainImageContainer,children:(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/blog/BlogImages/".concat(n.blogImage.split(",")[0]),alt:"Main Blog Image",style:RI.mainImage})}),(0,Va.jsxs)("div",{style:RI.blogContentWrapper,children:[(0,Va.jsx)("h1",{style:RI.blogTitle,children:n.title}),(0,Va.jsxs)("p",{style:RI.blogMeta,children:[c," by ",n.author]}),(0,Va.jsx)("p",{style:RI.blogContent,children:n.content}),n.blogImage&&n.blogImage.split(",").length>1&&(0,Va.jsxs)("div",{style:RI.additionalImagesContainer,children:[(0,Va.jsx)("h4",{style:RI.additionalImagesTitle,children:"More Images:"}),(0,Va.jsx)("div",{style:RI.additionalImagesWrapper,children:n.blogImage.split(",").slice(1).map(((e,t)=>(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/blog/BlogImages/".concat(e),alt:"Blog Image ".concat(t+1),style:RI.additionalImage},t)))})]})]})]}),(0,Va.jsxs)("div",{style:RI.sidebar,children:[(0,Va.jsx)("h2",{style:RI.recentPostsTitle,children:"Recent Posts"}),(0,Va.jsx)("ul",{style:RI.recentPostsList,children:i.map((e=>(0,Va.jsx)("li",{style:RI.recentPostItem,children:(0,Va.jsxs)("a",{href:"/blog/".concat(e.id),style:RI.recentPostLink,children:[e.blogImage&&(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/blog/BlogImages/".concat(e.blogImage.split(",")[0]),alt:"Image for ".concat(e.title),style:RI.recentPostImage}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)("h3",{style:RI.recentPostTitle,children:e.title}),(0,Va.jsx)("p",{style:RI.recentPostDate,children:new Date(e.blogDate).toLocaleDateString()})]})]})},e.id)))})]})]})},RI={blogDetailContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"40px 20px",fontFamily:"Arial, sans-serif",gap:"20px",maxWidth:"1200px",margin:"0 auto"},mainContent:{flex:3,maxWidth:"75%"},sidebar:{flex:1,backgroundColor:"#f9f9f9",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},blogTitle:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"10px",color:"#333"},blogMeta:{fontSize:"1rem",color:"#555",marginBottom:"20px"},mainImageContainer:{marginBottom:"20px",textAlign:"center",width:"100%"},mainImage:{width:"100%",height:"auto",objectFit:"cover",borderRadius:"8px",maxHeight:"500px"},blogContentWrapper:{marginTop:"20px"},blogContent:{fontSize:"1.2rem",lineHeight:"1.8",marginBottom:"20px",color:"#333"},additionalImagesContainer:{marginTop:"30px"},additionalImagesTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"10px"},additionalImagesWrapper:{display:"flex",gap:"15px",flexWrap:"wrap"},additionalImage:{width:"100%",height:"auto",maxWidth:"300px",marginBottom:"15px",borderRadius:"5px"},recentPostsTitle:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"10px",color:"#333"},recentPostsList:{listStyle:"none",padding:"0"},recentPostItem:{marginBottom:"20px",display:"flex",alignItems:"center"},recentPostLink:{textDecoration:"none",display:"flex",alignItems:"center",color:"#333"},recentPostImage:{width:"60px",height:"60px",objectFit:"cover",marginRight:"10px",borderRadius:"8px"},recentPostTitle:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"5px"},recentPostDate:{fontSize:"0.9rem",color:"#888"}},II=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const e=await xi.get("https://be-pjhk4.onrender.com/api/blog");n(e.data)}catch(r){i("Error fetching blog data")}})()}),[]);return r?(0,Va.jsx)("div",{children:r}):(0,Va.jsxs)("div",{style:xI.adminContainer,children:[(0,Va.jsx)("h1",{children:"Admin - Blog Management"}),(0,Va.jsx)(ft,{to:"/admin-blog/add",style:xI.addButton,children:"Add Blog"}),(0,Va.jsxs)("table",{style:xI.table,children:[(0,Va.jsx)("thead",{children:(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("th",{style:xI.tableHeader,children:"ID"}),(0,Va.jsx)("th",{style:xI.tableHeader,children:"Title"}),(0,Va.jsx)("th",{style:xI.tableHeader,children:"Author"}),(0,Va.jsx)("th",{style:xI.tableHeader,children:"Blog Date"}),(0,Va.jsx)("th",{style:xI.tableHeader,children:"Actions"})]})}),(0,Va.jsx)("tbody",{children:e.map(((t,o)=>(0,Va.jsxs)("tr",{style:o%2===0?xI.evenRow:xI.oddRow,children:[(0,Va.jsx)("td",{style:xI.tableCell,children:t.id}),(0,Va.jsx)("td",{style:xI.tableCell,children:t.title}),(0,Va.jsx)("td",{style:xI.tableCell,children:t.author}),(0,Va.jsx)("td",{style:xI.tableCell,children:new Date(t.blogDate).toLocaleDateString()}),(0,Va.jsxs)("td",{style:xI.tableCell,children:[(0,Va.jsx)(ft,{to:"/admin-blog/detail/".concat(t.id),style:xI.button,children:"Detail"}),(0,Va.jsx)("button",{onClick:()=>(async t=>{try{await xi.delete("https://be-pjhk4.onrender.com/api/blog/".concat(t)),n(e.filter((e=>e.id!==t)))}catch(r){i("Error deleting blog")}})(t.id),style:xI.deleteButton,children:"Delete"})]})]},t.id)))})]})]})},xI={adminContainer:{padding:"20px",fontFamily:"Arial, sans-serif"},addButton:{marginBottom:"20px",padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",textDecoration:"none",borderRadius:"5px",display:"inline-block",fontSize:"16px",transition:"background-color 0.3s"},addButtonHover:{backgroundColor:"#45a049"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},tableHeader:{backgroundColor:"#4CAF50",color:"white",fontWeight:"bold",padding:"12px 15px",textAlign:"left"},tableCell:{padding:"10px 15px",borderBottom:"1px solid #ddd",textAlign:"left"},evenRow:{backgroundColor:"#f9f9f9"},oddRow:{backgroundColor:"#ffffff"},button:{margin:"0 10px",padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",textDecoration:"none",borderRadius:"5px",transition:"background-color 0.3s"},buttonHover:{backgroundColor:"#45a049"},deleteButton:{padding:"6px 12px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background-color 0.3s"},deleteButtonHover:{backgroundColor:"#e53935"}},OI=()=>{const{id:e}=fe(),[n,r]=(0,t.useState)(null),[i,o]=(0,t.useState)(null),[s,a]=(0,t.useState)([]),c=pe();(0,t.useEffect)((()=>{(async()=>{try{const t=await xi.get("https://be-pjhk4.onrender.com/api/blog/".concat(e));r(t.data)}catch(i){o("Error fetching blog details")}})()}),[e]);return i?(0,Va.jsx)("div",{style:NI.error,children:i}):n?(0,Va.jsxs)("div",{style:NI.blogDetailContainer,children:[(0,Va.jsx)("button",{style:NI.backButton,onClick:()=>c(-1),children:"Return Back"}),(0,Va.jsx)("h1",{style:NI.title,children:n.title}),(0,Va.jsxs)("h3",{style:NI.author,children:[new Date(n.blogDate).toLocaleDateString()," by ",n.author]}),(0,Va.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const r=new FormData;r.append("title",n.title),r.append("author",n.author),r.append("content",n.content);for(let e=0;e<s.length;e++)r.append("blogImages",s[e]);try{await xi.put("https://be-pjhk4.onrender.com/api/blog/".concat(e),r,{headers:{"Content-Type":"multipart/form-data"}});alert("Blog updated successfully"),c(-1)}catch(i){o("Error updating blog")}},children:[(0,Va.jsxs)("div",{style:NI.contentContainer,children:[(0,Va.jsx)("p",{style:NI.content,children:n.content}),(0,Va.jsx)("label",{htmlFor:"title",style:NI.label,children:"Title:"}),(0,Va.jsx)("input",{type:"text",id:"title",value:n.title,onChange:e=>r(u(u({},n),{},{title:e.target.value})),style:NI.input}),(0,Va.jsx)("label",{htmlFor:"author",style:NI.label,children:"Author:"}),(0,Va.jsx)("input",{type:"text",id:"author",value:n.author,onChange:e=>r(u(u({},n),{},{author:e.target.value})),style:NI.input}),(0,Va.jsx)("label",{htmlFor:"content",style:NI.label,children:"Content:"}),(0,Va.jsx)("textarea",{id:"content",value:n.content,onChange:e=>r(u(u({},n),{},{content:e.target.value})),style:NI.textarea}),n.blogImage&&(0,Va.jsx)("div",{style:NI.imageContainer,children:n.blogImage.split(",").map(((e,t)=>(0,Va.jsx)("img",{src:"https://be-pjhk4.onrender.com/api/blog/BlogImages/".concat(e),alt:"Blog Image ".concat(t+1),style:NI.blogImage},t)))}),(0,Va.jsx)("input",{type:"file",multiple:!0,onChange:e=>{const t=e.target.files;a(t)},style:NI.fileInput})]}),(0,Va.jsx)("button",{type:"submit",style:NI.submitButton,children:"Update Blog"})]})]}):(0,Va.jsx)("div",{style:NI.loading,children:"Loading..."})},NI={blogDetailContainer:{padding:"20px",fontFamily:"Arial, sans-serif",maxWidth:"900px",margin:"0 auto",backgroundColor:"#f9f9f9",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},title:{fontSize:"2.5rem",color:"#333",marginBottom:"10px"},author:{fontSize:"1.1rem",color:"#555",marginBottom:"20px"},contentContainer:{marginBottom:"30px"},content:{fontSize:"1.2rem",lineHeight:"1.6",color:"#444"},imageContainer:{marginTop:"20px",display:"flex",flexDirection:"row",gap:"10px",flexWrap:"wrap"},blogImage:{width:"30%",height:"auto",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.05)"},backButton:{padding:"10px 15px",backgroundColor:"#007BFF",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginBottom:"20px",fontSize:"1rem"},fileInput:{marginTop:"20px"},submitButton:{padding:"10px 15px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"1rem"},label:{fontSize:"1rem",marginTop:"10px",display:"block",fontWeight:"bold",color:"#333"},input:{width:"100%",padding:"10px",fontSize:"1rem",marginTop:"5px",borderRadius:"5px",border:"1px solid #ccc"},textarea:{width:"100%",padding:"10px",fontSize:"1rem",marginTop:"5px",borderRadius:"5px",border:"1px solid #ccc",minHeight:"100px"},error:{color:"red",fontSize:"1.2rem"},loading:{fontSize:"1.2rem",color:"#777"}},DI=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(""),[l,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),m=pe();return(0,Va.jsxs)("div",{style:kI.adminContainer,children:[(0,Va.jsx)("h1",{children:"Add New Blog"}),u&&(0,Va.jsx)("div",{style:kI.error,children:u}),(0,Va.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e||!r||!o||!a)return void h("All fields are required");const n=new FormData;n.append("title",e),n.append("author",r),n.append("content",o),n.append("blogDate",a);for(let e=0;e<l.length;e++)n.append("blogImages",l[e]);try{f(!0);await xi.post("https://be-pjhk4.onrender.com/api/blog",n,{headers:{"Content-Type":"multipart/form-data"}});m("/admin-blog")}catch(u){h("Error adding blog"),f(!1)}},style:kI.form,children:[(0,Va.jsxs)("div",{style:kI.formGroup,children:[(0,Va.jsx)("label",{children:"Title:"}),(0,Va.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),style:kI.input})]}),(0,Va.jsxs)("div",{style:kI.formGroup,children:[(0,Va.jsx)("label",{children:"Author:"}),(0,Va.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),style:kI.input})]}),(0,Va.jsxs)("div",{style:kI.formGroup,children:[(0,Va.jsx)("label",{children:"Content:"}),(0,Va.jsx)("textarea",{value:o,onChange:e=>s(e.target.value),style:kI.textarea})]}),(0,Va.jsxs)("div",{style:kI.formGroup,children:[(0,Va.jsx)("label",{children:"Blog Date:"}),(0,Va.jsx)("input",{type:"date",value:a,onChange:e=>c(e.target.value),style:kI.input})]}),(0,Va.jsxs)("div",{style:kI.formGroup,children:[(0,Va.jsx)("label",{children:"Images (optional):"}),(0,Va.jsx)("input",{type:"file",multiple:!0,onChange:e=>{d(e.target.files)},style:kI.input})]}),(0,Va.jsx)("button",{type:"submit",style:kI.submitButton,disabled:p,children:p?"Adding Blog...":"Add Blog"})]})]})},kI={adminContainer:{padding:"20px",fontFamily:"Arial, sans-serif"},form:{marginTop:"20px",width:"100%"},formGroup:{marginBottom:"15px"},label:{fontWeight:"bold"},input:{width:"100%",padding:"10px",marginTop:"5px",borderRadius:"5px",border:"1px solid #ddd"},textarea:{width:"100%",height:"150px",padding:"10px",marginTop:"5px",borderRadius:"5px",border:"1px solid #ddd"},submitButton:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},error:{color:"red",marginBottom:"15px"}};var PI=n(6075);const LI=function(e){let{slides:n,interval:r=4e3}=e;const[i,o]=(0,t.useState)(0),s=()=>{o(i===n.length-1?0:i+1)};return(0,t.useEffect)((()=>{const e=setInterval((()=>{s()}),r);return()=>clearInterval(e)}),[i,r]),(0,Va.jsxs)("div",{className:"relative overflow-hidden w-full h-[300px] flex items-center justify-center",children:[(0,Va.jsx)("div",{className:"flex transition-transform ease-out duration-600",style:{transform:"translateX(-".concat(100*i,"%)")},children:n.map(((e,t)=>(0,Va.jsx)("div",{className:"flex-shrink-0 w-full h-full flex items-center justify-center",children:(0,Va.jsx)("img",{alt:"",src:e,className:"max-w-[80%] max-h-[80%] object-contain"})},t)))}),(0,Va.jsxs)("div",{className:"absolute top-0 h-full w-full flex justify-between items-center text-gray-400 px-10",children:[(0,Va.jsx)("button",{onClick:()=>{o(0===i?n.length-1:i-1)},children:(0,Va.jsx)(jg,{size:25})}),(0,Va.jsx)("button",{onClick:s,children:(0,Va.jsx)(Ug,{size:25})})]}),(0,Va.jsx)("div",{className:"absolute bottom-0 py-4 flex justify-center gap-3 w-full",children:n.map(((e,t)=>(0,Va.jsx)("div",{onClick:()=>o(t),className:"rounded-full w-3 h-3 cursor-pointer ".concat(t===i?"bg-gray-600":"bg-gray-300")},"circle"+t)))})]})},MI=n.n(PI)().bind(qA),jI=()=>{pe();const e=de(),{isCreate:n,sellerName:r,room:i,seller:o}=e.state||{},s=(0,t.useRef)(null),a=new URLSearchParams(e.search),c=(a.get("item_id"),a.get("buyerId")),[l,d]=(0,t.useState)(null),[u,h]=(0,t.useState)([]),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)([]),[_,E]=(0,t.useState)([]),[b,w]=(0,t.useState)(null),[S,A]=(0,t.useState)(null),[C,T]=(0,t.useState)(null),[R,I]=(0,t.useState)([{content:"",id:"",images:[],roomId:"",senderId:"",timestamp:""}]),[x,O]=(0,t.useState)([]),[N,D]=(0,t.useState)(""),[k,P]=(0,t.useState)(""),[L,M]=(0,t.useState)(null),[j,U]=(0,t.useState)({}),[B,F]=(0,t.useState)(!1),[V,W]=(0,t.useState)(null),[H,z]=(0,t.useState)(""),[G,Y]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);Y(t.username)}catch(t){console.error("Error decoding token:",t.message)}}),[]),(0,t.useEffect)((()=>{const e={};null===x||void 0===x||x.forEach((t=>{var n,r,i,o,s;const a=(null===b||void 0===b?void 0:b.chatroomId)===t.roomId?(null===b||void 0===b?void 0:b.buyerId)===l?null===b||void 0===b?void 0:b.quantityBuyer:(null===b||void 0===b?void 0:b.sellerId)===l?null===b||void 0===b?void 0:b.quantitySeller:"":(null===t||void 0===t||null===(n=t.notification)||void 0===n?void 0:n.chatroomId)===t.roomId?(null===t||void 0===t||null===(r=t.notification)||void 0===r?void 0:r.buyerId)===l?null===t||void 0===t||null===(i=t.notification)||void 0===i?void 0:i.quantityBuyer:(null===t||void 0===t||null===(o=t.notification)||void 0===o?void 0:o.sellerId)===l?null===t||void 0===t||null===(s=t.notification)||void 0===s?void 0:s.quantitySeller:"":"";a&&(e[t.roomId]=a)})),U(e)}),[x,b,l]),(0,t.useEffect)((()=>{c&&(async()=>{try{if(c){const e=await Pg.get("users/".concat(c),{authRequired:!0});null==e||n||r||g(e.name)}}catch(e){console.log(e)}})()}),[]),(0,t.useEffect)((()=>{l&&(async()=>{try{if(l){const e=await Pg.get("chatroom/room/".concat(l),{authRequired:!0});e.forEach((e=>{w(e.notification)})),O(e)}}catch(e){console.log(e)}})()}),[l]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);d(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]),(0,t.useEffect)((()=>{n&&r&&(async e=>{g(e),P(i),f(!0)})(r)}),[n,i,r]);(0,t.useEffect)((()=>{console.log(C),z((null===C||void 0===C?void 0:C.userId)===l?null===C||void 0===C?void 0:C.sellerId:null===C||void 0===C?void 0:C.userId)}),[C]),(0,t.useEffect)((()=>{k&&(async()=>{try{if(k){const e=await Pg.get("chatroom/room/message/".concat(k),{authRequired:!0});I(e)}}catch(e){console.log(e)}})()}),[k]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token"),t=qb.over((()=>new(Mb())("https://be-pjhk4.onrender.com/ws",null,{withCredentials:!0,timeout:5e3})));return t.debug=()=>{},t.connect({Authorization:"Bearer ".concat(e)},(()=>{console.log("Connected to WebSocket"),t.subscribe("/topic/room/".concat(k),(e=>{try{const t=new TextDecoder("utf-8").decode(e.binaryBody),n=JSON.parse(t);n?I((e=>[...e,n])):console.error("Message parsing failed:",n)}catch(t){console.error("Failed to parse message:",t)}})),t.subscribe("/topic/notificationchat",(e=>{const t=JSON.parse(e.body);w(t)})),t.subscribe("/topic/room/".concat(k,"/typing"),(e=>{const t=JSON.parse(e.body);W(t.userId),F(t.typing)}))}),(e=>{console.error("Error connecting to WebSocket:",e)})),M(t),()=>{t.connected&&t.disconnect((()=>{console.log("Disconnected from WebSocket")}))}}),[k]);(0,t.useEffect)((()=>{var e;null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[R]);(0,t.useEffect)((()=>{l&&(async()=>{try{if(l){const e=(await Pg.get("chatroom/room/message/room/".concat(l),{authRequired:!0})).reduce(((e,t)=>(e[t.roomId]||(e[t.roomId]=[]),e[t.roomId].push(t),e)),{});E(Object.values(e))}}catch(e){console.log(e)}})()}),[l,R]),(0,t.useEffect)((()=>{if(R.length>0){const e=R[R.length-1];E((t=>{const n=t.map((t=>t.roomId===e.roomId?[...t,e]:t));return n.length>0?n:[[e]]}))}}),[R]);const K=new Set;return(0,Va.jsx)("section",{className:"flex justify-center",style:{backgroundImage:"url('/images/common/chat_bg.jpg')"},children:(0,Va.jsx)("div",{className:"bg-white shadow-s3 w-1/2 h-screen rounded-xl flex ",children:(0,Va.jsxs)("div",{className:"mt-[83px] w-full flex",children:[(0,Va.jsxs)("div",{className:"border w-[50%] h-full",children:[(0,Va.jsx)("div",{className:"h-[40px] mt-3 p-2 border-2 mx-3 rounded-md",children:(0,Va.jsx)("input",{className:"h-full w-full border-none outline-none",placeholder:"Enter chat name"})}),(0,Va.jsx)("div",{className:At(qA.custom_scroll,"mt-3 h-[90%] overflow-y-auto overflow-hidden"),children:(null===x||void 0===x?void 0:x.length)>0&&(null===x||void 0===x?void 0:x.map(((e,t)=>{var n,r;if(K.has(e.roomId))return null;K.add(e.roomId);const i=e.roomId===k,o=R.some((t=>t.senderId===l&&t.roomId===e.roomId));return(0,Va.jsxs)("div",{onClick:()=>{(async(e,t,n)=>{P(e.roomId),g(t),f(!0),F(!1),A(n),U({}),l&&await Pg.delete("chatroom/notification-chat/".concat(e.roomId,"/").concat(l),{authRequired:!0})})(e,l!==(null===e||void 0===e?void 0:e.userId)?null===e||void 0===e?void 0:e.sellerName:null===e||void 0===e?void 0:e.buyerName,t),T(e)},className:MI("flex justify-between h-[85px] items-center border-b-[1px] cursor-pointer ".concat(S===t?"bg-[#33ecbe]":"")),children:[(0,Va.jsxs)("div",{className:"flex items-center",children:[(0,Va.jsxs)("div",{className:"w-[46px] relative mr-1",children:[(e.roomId===(null===e||void 0===e||null===(n=e.notification)||void 0===n?void 0:n.chatroomId)||(null===b||void 0===b?void 0:b.chatroomId)===e.roomId)&&!i&&!o&&(j[e.roomId]>0&&(0,Va.jsx)("div",{className:"absolute right-0 top-[-5px] border w-5 h-5 flex items-center justify-center rounded-full bg-red-600",children:(0,Va.jsx)("span",{className:"text-white text-[12px]",children:(j[e.roomId]<5?j[e.roomId]:"5+")||""})})||j[e.roomId]>0&&(0,Va.jsx)("div",{className:"absolute right-0 top-[-5px] border w-5 h-5 flex items-center justify-center rounded-full bg-red-600",children:(0,Va.jsx)("span",{className:"text-white text-[12px]",children:(j[e.roomId]<5?j[e.roomId]:"5+")||""})})),(0,Va.jsx)("img",{alt:"",src:"https://cdn-icons-png.flaticon.com/512/6596/6596121.png"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)("p",{className:"text-sm",children:l!==(null===e||void 0===e?void 0:e.userId)?null===e||void 0===e?void 0:e.sellerName:null===e||void 0===e?void 0:e.buyerName}),(0,Va.jsxs)("span",{className:"text-[12px] text-[#9B9B9B]",children:["item:",null===e||void 0===e?void 0:e.item_name]}),(0,Va.jsx)("div",{className:"h-[15px] flex items-center",children:(0,Va.jsx)("span",{className:"text-[11px]  font-weight: bold text-black",children:(null===(r=e.listMessages[0])||void 0===r?void 0:r.content)||""})})]})]}),(0,Va.jsx)("div",{className:"w-[60px] h-[60px] pr-2 ",children:(0,Va.jsx)("img",{className:"h-full w-full object-cover rounded-md",alt:"",src:null===e||void 0===e?void 0:e.images})})]},t)})))})]}),p&&(0,Va.jsx)(Va.Fragment,{children:(0,Va.jsxs)("div",{className:"grid grid-rows-[60px,1fr,15px,55px] w-full",children:[(0,Va.jsx)("div",{className:"border flex items-center",children:(0,Va.jsxs)("div",{className:"flex items-center",children:[(0,Va.jsx)("div",{className:"w-[46px]",children:(0,Va.jsx)("img",{alt:"",src:"https://cdn-icons-png.flaticon.com/512/6596/6596121.png"})}),(0,Va.jsx)("div",{children:(0,Va.jsx)("p",{className:"text-sm",children:m})})]})}),(0,Va.jsxs)("div",{className:MI("custom_scroll"),children:[(null===R||void 0===R?void 0:R.length)>0&&(null===R||void 0===R?void 0:R.map(((e,t)=>{var n,r;return(0,Va.jsxs)(Va.Fragment,{children:[(null===e||void 0===e?void 0:e.content.length)>0&&(0,Va.jsx)("div",{className:MI("flex mb-3 ".concat((null===e||void 0===e?void 0:e.senderId)===l?"flex justify-end":"")),children:(0,Va.jsxs)("div",{className:MI("min-w-[100px] max-w-[300px] rounded-md ml-3 p-2 mr-2 ".concat((null===e||void 0===e?void 0:e.senderId)===l?"bg-[#1f7f67]":"bg-[#f4f4f4]")),children:[(0,Va.jsx)("p",{className:MI("break-words text-[14px]  ".concat((null===e||void 0===e?void 0:e.senderId)===l?"text-white":"text-black")),children:null===e||void 0===e?void 0:e.content}),(0,Va.jsx)("div",{className:"flex justify-end",children:(0,Va.jsx)("span",{className:"text-[12px] text-[#9B9B9B]",children:__()(e.timestamp).format("h:mm a")})})]})},t),(null===e||void 0===e?void 0:e.images)&&e.images.length>0&&(0,Va.jsx)("div",{className:MI("flex mb-3 ".concat((null===e||void 0===e?void 0:e.senderId)===l?"flex justify-end":"")),children:(0,Va.jsxs)("div",{className:MI("min-w-[100px] max-w-[300px] rounded-md ml-3 p-2 mr-2 ".concat((null===e||void 0===e?void 0:e.senderId)===l?"bg-[#1f7f67]":"bg-[#f4f4f4]")),children:[(0,Va.jsx)("div",{children:(null===e||void 0===e||null===(n=e.images)||void 0===n?void 0:n.length)>0&&(null===e||void 0===e||null===(r=e.images)||void 0===r?void 0:r.map(((e,t)=>(0,Va.jsx)("div",{className:"mb-1",children:(0,Va.jsx)("img",{className:"h-[200px]",src:e,alt:""})},t))))}),(0,Va.jsx)("div",{className:"flex justify-end",children:(0,Va.jsx)("span",{className:"text-[12px] text-[#9B9B9B]",children:__()(e.timestamp).format("h:mm a")})})]})})]})}))),(0,Va.jsx)("div",{ref:s})]}),(0,Va.jsx)("div",{children:B&&V!==l&&(0,Va.jsxs)("div",{className:qA.wave_text_container,children:[(0,Va.jsx)("span",{className:qA.wave_text,children:"N"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"g"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"\u01b0"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"\u1edd"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"i"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"d"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"\xf9"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"n"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"g"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"\u0111"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"a"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"n"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"g"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"n"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"h"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"\u1ead"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"p"}),(0,Va.jsx)("span",{className:qA.wave_text,children:"."}),(0,Va.jsx)("span",{className:qA.wave_text,children:"."}),(0,Va.jsx)("span",{className:qA.wave_text,children:"."})]})}),(0,Va.jsx)("div",{className:qA.chatBox_write,children:(0,Va.jsxs)("div",{className:qA.chat_box_input,children:[(0,Va.jsxs)("div",{className:"mr-2",children:[(0,Va.jsx)("input",{type:"file",id:"picture",hidden:!0,multiple:!0,onChange:e=>{const t=e.target.files;if(t){const e=Array.from(t).map((e=>URL.createObjectURL(e)));h((t=>[...t,...e])),y(Array.from(t))}}}),(0,Va.jsx)("label",{for:"picture",className:"cursor-pointer",children:(0,Va.jsx)(RE,{size:30,className:"text-[#1f7f67]"})})]}),(0,Va.jsxs)("div",{className:"flex-1 bg-[#f0f0f0] rounded-lg overflow-hidden",children:[(0,Va.jsx)("textarea",{className:"w-full",value:N,onChange:e=>{D(e.target.value),L.send("/app/chat/".concat(k,"/typing"),{},JSON.stringify({userId:l,typing:!0})),window.typingTimeout&&clearTimeout(window.typingTimeout),window.typingTimeout=setTimeout((()=>{L.send("/app/chat/".concat(k,"/typing"),{},JSON.stringify({userId:l,typing:!1}))}),2e3)},placeholder:"Write.."}),u.length>0&&(0,Va.jsx)("div",{className:"w-full bg-[#f0f0f0] h-10 flex items-center",children:u.length>0&&(null===u||void 0===u?void 0:u.map(((e,t)=>(0,Va.jsxs)("div",{children:[(0,Va.jsx)(CE,{className:"cursor-pointer",onClick:()=>{h((e=>e.filter(((e,n)=>n!==t)))),y((e=>e.filter(((e,n)=>n!==t))))}}),(0,Va.jsx)("img",{className:"w-[30px] ml-2",alt:"",src:e})]},t))))})]}),(0,Va.jsx)("div",{onClick:async()=>{const e=localStorage.getItem("token"),t=new FormData;t.append("content",N),t.append("roomId",k),t.append("sender",l),v.forEach((e=>{t.append("images",e)}));const n=await Pg.post("chatroom/send-message",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e)}});if(console.log({reciverId:H,seller:o}),n){const t={content:n.content,roomId:n.roomId,sender:l,receiver:H||o,imagess:n.images.map((e=>e.toString())),timestamp:n.timestamp,senderName:G};console.log(t),L&&(L.send("/app/sendMessage",{Authorization:"Bearer ".concat(e)},JSON.stringify(t)),D(""),y([]),h([]))}},className:qA.btn_submit,children:(0,Va.jsx)("button",{type:"submit",children:(0,Va.jsx)(ab,{})})})]})})]})}),!p&&(0,Va.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Va.jsx)(LI,{slides:["https://chat.chotot.com/emptyRoom.png","https://chat.chotot.com/emptyRoom2.png","https://t4.ftcdn.net/jpg/01/52/26/99/360_F_152269999_krzVqnxRBfXeUQxNg2w3RlJHOUaHKoyu.jpg"]})})]})})})},UI=()=>{var e,n,r;const i=vv(),{productsbycategory:o}=ov((e=>e.product)),{productId:s}=fe(),[a,c]=(0,t.useState)({currentPage:0,pageSize:0,prevProductId:s}),[l]=_t(),d=parseInt(l.get("page"))||1,[h,p]=(0,t.useState)({}),[f,m]=(0,t.useState)({page:d,size:{NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SIZE_ELEMENT,productId:s});return(0,t.useEffect)((()=>{m((e=>u(u({},e),{},{page:d,productId:s})))}),[d,s]),(0,t.useEffect)((()=>{if(s){const e=null===o||void 0===o?void 0:o.currentPage,t=null===o||void 0===o?void 0:o.pageSize;e===a.currentPage&&t===a.pageSize&&s===a.productId||(i(Eb(f)),c({currentPage:e,pageSize:t,productId:s}))}}),[s,null===o||void 0===o?void 0:o.currentPage,null===o||void 0===o?void 0:o.pageSize,d]),(0,t.useEffect)((()=>{if(null!==o&&void 0!==o&&o.data){const e=o.data.map((e=>{if(e.start_date){const t=()=>{Q_(e.start_date,(t=>p((n=>u(u({},n),{},{[e.item_id]:t})))))};t();const n=setInterval(t,1e3);return{item_id:e.item_id,timer:n}}return null}));return()=>{e.forEach((e=>{null!==e&&void 0!==e&&e.timer&&clearInterval(e.timer)}))}}}),[o]),(0,Va.jsxs)("div",{className:"w-[85%] m-auto mt-[100px]",children:[(0,Va.jsx)("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-8 my-8",children:(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.length)>0&&(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.map((e=>{var t,n,r,i,o,s,a,c;return(0,Va.jsxs)(ft,{to:"/details/".concat(null===e||void 0===e?void 0:e.item_id),className:"bg-white shadow-s1 rounded-xl p-3 relative",children:[h[e.item_id]&&(0,Va.jsxs)("div",{className:"flex text-center absolute left-[50%] top-[50%] \r translate-x-[-50%] shadow-lg translate-y-[-70%] w-[150px] h-[30px] \r z-20 justify-center items-center rounded-2xl bg-white",children:[(null===(t=h[e.item_id])||void 0===t?void 0:t.days)&&(0,Va.jsx)("div",{className:"",children:(0,Va.jsxs)("p",{children:[null===(n=h[e.item_id])||void 0===n?void 0:n.days,"(d)"]})}),(null===(r=h[e.item_id])||void 0===r?void 0:r.hours)&&(0,Va.jsx)("div",{className:"",children:(0,Va.jsxs)("p",{children:[null===(i=h[e.item_id])||void 0===i?void 0:i.hours,":"]})}),(null===(o=h[e.item_id])||void 0===o?void 0:o.minutes)&&(0,Va.jsx)("div",{className:"",children:(0,Va.jsxs)("p",{children:[null===(s=h[e.item_id])||void 0===s?void 0:s.minutes,":"]})}),(null===(a=h[e.item_id])||void 0===a?void 0:a.seconds)&&(0,Va.jsx)("div",{className:"",children:(0,Va.jsx)("p",{children:null===(c=h[e.item_id])||void 0===c?void 0:c.seconds})})]}),(0,Va.jsxs)("div",{className:"h-56 relative overflow-hidden",children:[(0,Va.jsx)(mt,{to:"/details/".concat(null===e||void 0===e?void 0:e.item_id),children:(0,Va.jsx)("img",{src:e.images[0],alt:"",className:"w-full h-full object-cover rounded-xl hover:scale-105 hover:cursor-pointer transition-transform duration-300 ease-in-out"})}),(0,Va.jsx)(hE,{className:"shadow-s1 absolute right-3 bottom-3",children:(0,Va.jsx)(VE,{size:22,className:"text-green"})}),(0,Va.jsx)("div",{className:"absolute top-0 left-0 p-2 w-full",children:(0,Va.jsxs)("div",{className:"flex items-center justify-between",children:[!0===(null===e||void 0===e?void 0:e.soldout)?(0,Va.jsx)(aE,{className:"text-red-500 bg-white px-3 py-1 text-sm rounded-full",children:"Sold Out"}):(0,Va.jsx)(aE,{className:"text-green bg-green_100 px-3 py-1 text-sm rounded-full",children:"On Stock"}),(0,Va.jsx)(aE,{className:"text-green bg-green_100 px-3 py-1 text-sm rounded-full",children:"123 Bids"})]})})]}),(0,Va.jsxs)("div",{className:"details mt-4",children:[(0,Va.jsx)(oE,{className:"uppercase",children:e.item_name}),(0,Va.jsx)("hr",{className:"mt-3"}),(0,Va.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,Va.jsxs)("div",{className:"flex items-center justify-between gap-5",children:[(0,Va.jsx)("div",{children:(0,Va.jsx)(VE,{size:40,className:"text-green"})}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"text-green",children:"Current Bid"}),(0,Va.jsxs)(oE,{children:["$",e.starting_price,".00"]})]})]}),(0,Va.jsx)("div",{className:"w-[1px] h-10 bg-gray-300",children:" "}),(0,Va.jsxs)("div",{className:"flex items-center justify-between gap-5",children:[(0,Va.jsx)("div",{children:(0,Va.jsx)(HE,{size:40,className:"text-red-500"})}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"text-red-500",children:"Buy Now"}),(0,Va.jsx)(oE,{children:"$2.00"})]})]})]}),(0,Va.jsx)("hr",{className:"mb-3"}),(0,Va.jsxs)("div",{className:"flex items-center  justify-between mt-3",children:[(0,Va.jsx)(uE,{className:"rounded-lg text-sm",children:"Place Bid"}),(0,Va.jsx)(uE,{className:"rounded-lg px-4 py-3",children:(0,Va.jsx)(YE,{size:20})})]})]})]},e.item_id)})))}),0===(null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.length)&&(0,Va.jsx)("div",{className:"flex m-auto",children:(0,Va.jsx)("h2",{children:"No Available Product"})}),(0,Va.jsx)("div",{className:"mt-8 flex justify-end",children:(0,Va.jsx)(rE,{listItem:o,to:"/product-list/".concat(s),methodCallApi:Eb})})]})},BI=()=>{var e,n,r;const[i,o]=(0,t.useState)(""),s=de(),a=vv(),[c]=_t(),l=parseInt(c.get("page"))||1,{products:d}=ov((e=>e.product)),[h,p]=(0,t.useState)({page:l,size:{NODE_ENV:"production",PUBLIC_URL:"/FE_AUCTIONONLINE",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SIZE_ELEMENT,searchName:i});return(0,t.useEffect)((()=>{const e=new URLSearchParams(s.search).get("name");o(e)}),[s.search]),(0,t.useEffect)((()=>{p((e=>u(u({},e),{},{page:l,searchName:i})))}),[l,i]),(0,t.useEffect)((()=>{""!==i.trim()&&a(pb(h))}),[a,h,i]),(0,Va.jsxs)("div",{className:"w-[85%] m-auto mt-[100px]",children:[(0,Va.jsx)("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-8 my-8",children:(null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.length)>0&&(null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.map((e=>(0,Va.jsxs)(ft,{to:"/details/".concat(null===e||void 0===e?void 0:e.item_id),className:"bg-white shadow-s1 rounded-xl p-3 relative",children:[(0,Va.jsxs)("div",{className:"h-56 relative overflow-hidden",children:[(0,Va.jsx)(mt,{to:"/details/".concat(null===e||void 0===e?void 0:e.item_id),children:(0,Va.jsx)("img",{src:e.images[0],alt:"",className:"w-full h-full object-cover rounded-xl hover:scale-105 hover:cursor-pointer transition-transform duration-300 ease-in-out"})}),(0,Va.jsx)(hE,{className:"shadow-s1 absolute right-3 bottom-3",children:(0,Va.jsx)(VE,{size:22,className:"text-green"})}),(0,Va.jsx)("div",{className:"absolute top-0 left-0 p-2 w-full",children:(0,Va.jsxs)("div",{className:"flex items-center justify-between",children:[!0===(null===e||void 0===e?void 0:e.soldout)?(0,Va.jsx)(aE,{className:"text-red-500 bg-white px-3 py-1 text-sm rounded-full",children:"Sold Out"}):(0,Va.jsx)(aE,{className:"text-green bg-green_100 px-3 py-1 text-sm rounded-full",children:"On Stock"}),(0,Va.jsx)(aE,{className:"text-green bg-green_100 px-3 py-1 text-sm rounded-full",children:"123 Bids"})]})})]}),(0,Va.jsxs)("div",{className:"details mt-4",children:[(0,Va.jsx)(oE,{className:"uppercase",children:e.item_name}),(0,Va.jsx)("hr",{className:"mt-3"}),(0,Va.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,Va.jsxs)("div",{className:"flex items-center justify-between gap-5",children:[(0,Va.jsx)("div",{children:(0,Va.jsx)(VE,{size:40,className:"text-green"})}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"text-green",children:"Current Bid"}),(0,Va.jsxs)(oE,{children:["$",e.starting_price,".00"]})]})]}),(0,Va.jsx)("div",{className:"w-[1px] h-10 bg-gray-300",children:" "}),(0,Va.jsxs)("div",{className:"flex items-center justify-between gap-5",children:[(0,Va.jsx)("div",{children:(0,Va.jsx)(HE,{size:40,className:"text-red-500"})}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"text-red-500",children:"Buy Now"}),(0,Va.jsx)(oE,{children:"$2.00"})]})]})]}),(0,Va.jsx)("hr",{className:"mb-3"}),(0,Va.jsxs)("div",{className:"flex items-center  justify-between mt-3",children:[(0,Va.jsx)(uE,{className:"rounded-lg text-sm",children:"Place Bid"}),(0,Va.jsx)(uE,{className:"rounded-lg px-4 py-3",children:(0,Va.jsx)(YE,{size:20})})]})]})]},e.item_id))))}),0===(null===d||void 0===d||null===(r=d.data)||void 0===r?void 0:r.length)&&(0,Va.jsx)("div",{className:"flex m-auto",children:(0,Va.jsx)("h2",{children:"No Available Product"})}),(0,Va.jsx)("div",{className:"mt-8 flex justify-end",children:(0,Va.jsx)(rE,{listItem:d,tosearch:"/search?name=".concat(i),methodCallApi:pb})})]})};var FI=n(3322),VI=n.n(FI);const WI=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(null),[a,c]=(0,t.useState)([]),l=VI().createClient({mode:"rtc",codec:"vp8"});VI().setLogLevel(4);const d="myRoom",u=12345;return(0,t.useEffect)((()=>{const e=localStorage.getItem("token");return fetch("https://be-pjhk4.onrender.com/api/video-call/join?channelName=".concat(d,"&uid=").concat(u),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((e=>e.json())).then((e=>{n(e.token)})),()=>{l&&l.leave()}}),[d,u]),(0,t.useEffect)((()=>{e&&(l.join(e,d,null,u).then((()=>{const e=VI().createStream({audio:!0,video:!0});e.init((()=>{s(e),l.publish(e),i(!0)}))})),l.on("stream-added",(e=>{const t=e.stream;l.subscribe(t)})),l.on("stream-subscribed",(e=>{const t=e.stream;c((e=>[...e,t])),t.play("remote-video-".concat(t.getId()))})))}),[e]),r?(0,Va.jsx)("div",{className:"mt-[400px]",children:(0,Va.jsxs)("div",{children:[o&&(0,Va.jsx)("video",{id:"local-video",autoPlay:!0,playsInline:!0}),a.map(((e,t)=>(0,Va.jsx)("video",{id:"remote-video-".concat(e.getId()),autoPlay:!0,playsInline:!0},t)))]})}):(0,Va.jsx)("div",{children:"Joining..."})},HI=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)({}),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(!1),[l,d]=(0,t.useState)(!0),h=(0,t.useRef)(null),p=(0,t.useRef)(null);(0,t.useEffect)((()=>{h.current=VI().createClient({mode:"rtc",codec:"vp8"}),VI().setLogLevel(4)}),[]);return(0,Va.jsxs)("div",{className:"mt-[400px]",children:[(0,Va.jsx)("h1",{children:"Agora Video Chat"}),a?(0,Va.jsxs)("div",{children:[(0,Va.jsx)("button",{onClick:async()=>{e.forEach((e=>e.stop())),await h.current.leave(),n([]),i({}),c(!1)},children:"Leave Channel"}),(0,Va.jsx)("button",{onClick:()=>{e[1]&&(e[1].setEnabled(!l),d(!l))},children:l?"Turn Off Camera":"Turn On Camera"})]}):(0,Va.jsxs)("div",{children:[(0,Va.jsx)("input",{type:"text",value:o,onChange:e=>s(e.target.value),placeholder:"Enter channel name"}),(0,Va.jsx)("button",{onClick:async()=>{try{const e=(await xi.get("https://be-pjhk4.onrender.com/api/agora/token",{params:{channelName:o,uid:Math.floor(1e3*Math.random())}})).data;await h.current.join("c37acd12fafb4d4494fd8516342a7a10",o,e,null);const[t,r]=await VI().createMicrophoneAndCameraTracks();n([t,r]),await h.current.publish([t,r]),h.current.on("user-published",(async(e,t)=>{await h.current.subscribe(e,t),"video"===t&&i((t=>u(u({},t),{},{[e.uid]:e})))})),h.current.on("user-unpublished",(e=>{i((t=>{const n=u({},t);return delete n[e.uid],n}))})),c(!0)}catch(e){console.error("Error joining channel:",e)}},children:"Join Channel"})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)("video",{ref:p,autoPlay:!0,muted:!0,style:{width:"200px"}}),Object.values(r).map((e=>(0,Va.jsx)("video",{ref:t=>{t&&e.videoTrack.play(t)},autoPlay:!0,style:{width:"200px"}},e.uid)))]})]})},zI=async(e,t,n)=>(console.log({id:e,price:t,orderId:n}),xi.get("".concat("https://be-pjhk4.onrender.com/api/v1","/payment/vn-pay?productId=").concat(e,"&amount=").concat(t,"&orderId=").concat(n))),GI=()=>{var e;const{id:n}=fe(),[r,i]=(0,t.useState)(null),[o,s]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{const e=await Pg.get("auction/".concat(n),{authRequired:!0});0===e.code&&i(e.result)}catch(e){console.log(e)}})()}),[n]),(0,t.useEffect)((()=>{var e;const t="order_".concat(n,"_").concat(Date.now());var i;null!==r&&void 0!==r&&null!==(e=r.bidding)&&void 0!==e&&e.price&&zI(n,null===r||void 0===r||null===(i=r.bidding)||void 0===i?void 0:i.price,t).then((e=>{var t;s(null===(t=e.data.data)||void 0===t?void 0:t.paymentUrl)})).catch((e=>console.error(e)))}),[r]);return r?(0,Va.jsxs)("div",{className:"mt-[300px]",children:[(0,Va.jsx)("h2",{children:"Checkout"}),(0,Va.jsxs)("p",{children:[(0,Va.jsx)("strong",{children:"Product:"})," ",null===r||void 0===r?void 0:r.item_name]}),(0,Va.jsxs)("p",{children:[(0,Va.jsx)("strong",{children:"Price:"})," ",null===r||void 0===r||null===(e=r.bidding)||void 0===e?void 0:e.price," VND"]}),(0,Va.jsx)("button",{onClick:e=>{o?window.location.href=o:alert("L\u1ed7i: Ch\u01b0a c\xf3 URL thanh to\xe1n.")},children:"Proceed to Payment"})]}):(0,Va.jsx)("p",{children:"Loading..."})},YI=()=>{const e=pe(),[n,r]=(0,t.useState)({productName:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",amount:0});return(0,t.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("paymentInfo"));e&&r(e)}),[]),(0,Va.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[(0,Va.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"Thanh to\xe1n th\xe0nh c\xf4ng!"}),(0,Va.jsxs)("p",{className:"mt-4 text-lg",children:["S\u1ea3n ph\u1ea9m: ",n.productName]}),(0,Va.jsxs)("p",{className:"text-lg",children:["Gi\xe1 ti\u1ec1n: ",n.amount," VND"]}),(0,Va.jsx)("button",{className:"mt-6 px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition",onClick:()=>e("/profile-page"),children:"Quay v\u1ec1 trang ch\u1ee7"})]})};var KI=n(763);const qI=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[a,c]=(0,t.useState)(""),[l,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[v,y]=(0,t.useState)("");(0,t.useEffect)((()=>{xi.get("https://provinces.open-api.vn/api/p/").then((e=>n(e.data))).catch((e=>console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch t\u1ec9nh:",e)))}),[]);return(0,Va.jsxs)("div",{className:"mt-[400px]",children:[(0,Va.jsx)("h2",{children:"Ch\u1ecdn \u0111\u1ecba ch\u1ec9"}),(0,Va.jsx)("label",{children:"T\u1ec9nh/Th\xe0nh ph\u1ed1:"}),(0,Va.jsxs)("select",{value:a,onChange:async t=>{const n=t.target.value;c(n),d(""),h(""),i([]),s([]);const r=e.find((e=>e.code===Number(n)));if(f((null===r||void 0===r?void 0:r.name)||""),n)try{const e=await xi.get("https://provinces.open-api.vn/api/p/".concat(n,"?depth=2"));i(e.data.districts)}catch(o){console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch huy\u1ec7n:",o)}},children:[(0,Va.jsx)("option",{value:"",children:"-- Ch\u1ecdn t\u1ec9nh/th\xe0nh ph\u1ed1 --"}),e.map((e=>(0,Va.jsx)("option",{value:e.code,children:e.name},e.code)))]}),(0,Va.jsx)("label",{children:"Huy\u1ec7n/Qu\u1eadn:"}),(0,Va.jsxs)("select",{value:l,onChange:async e=>{const t=e.target.value;d(t),h(""),s([]);const n=r.find((e=>e.code===Number(t)));if(g((null===n||void 0===n?void 0:n.name)||""),t)try{const e=await xi.get("https://provinces.open-api.vn/api/d/".concat(t,"?depth=2"));s(e.data.wards)}catch(i){console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch x\xe3/ph\u01b0\u1eddng:",i)}},disabled:!a,children:[(0,Va.jsx)("option",{value:"",children:"-- Ch\u1ecdn huy\u1ec7n/qu\u1eadn --"}),r.map((e=>(0,Va.jsx)("option",{value:e.code,children:e.name},e.code)))]}),(0,Va.jsx)("label",{children:"X\xe3/Ph\u01b0\u1eddng:"}),(0,Va.jsxs)("select",{value:u,onChange:e=>{const t=e.target.value;h(t);const n=o.find((e=>e.code===Number(t)));y((null===n||void 0===n?void 0:n.name)||"")},disabled:!l,children:[(0,Va.jsx)("option",{value:"",children:"-- Ch\u1ecdn x\xe3/ph\u01b0\u1eddng --"}),o.map((e=>(0,Va.jsx)("option",{value:e.code,children:e.name},e.code)))]}),p&&m&&v&&(0,Va.jsxs)("p",{children:[(0,Va.jsx)("strong",{children:"\u0110\u1ecba ch\u1ec9 \u0111\xe3 ch\u1ecdn:"})," ",v,", ",m,", ",p]})]})},XI=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(1),l=pe();return(0,Va.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md mt-28",children:[(0,Va.jsx)("h2",{className:"text-2xl font-bold text-center mb-4",children:"Forgot Password"}),1===a&&(0,Va.jsxs)("div",{children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Enter your email:"}),(0,Va.jsx)("input",{type:"email",className:"w-full p-2 border border-gray-300 rounded mt-1 outline-none",placeholder:"Enter email...",value:e,onChange:e=>n(e.target.value)}),(0,Va.jsx)("button",{className:"w-full bg-blue-500 text-white p-2 rounded mt-3",onClick:async()=>{try{const t=await Pg.post("users/forgot-password?email=".concat(e),{headers:{"Content-Type":"application/json"}});console.log("OTP sent successfully:",t),Jt.success("OTP has been sent to your email!"),c(2)}catch(t){console.error("Error sending OTP:",t),Jt.error("Unable to send OTP, please check your email!")}},children:"Send OTP"})]}),2===a&&(0,Va.jsxs)("div",{children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Enter OTP:"}),(0,Va.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded mt-1",placeholder:"Enter OTP...",value:r,onChange:e=>i(e.target.value)}),(0,Va.jsx)("button",{className:"w-full bg-blue-500 text-white p-2 rounded mt-3",onClick:async()=>{try{await Pg.post("users/verify-otp?email=".concat(e,"&otp=").concat(r));Jt.success("OTP is valid, please enter a new password!"),c(3)}catch(t){console.error("Error verifying OTP:",t),Jt.error("Invalid OTP!")}},children:"Verify OTP"})]}),3===a&&(0,Va.jsxs)("div",{children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Enter new password:"}),(0,Va.jsx)("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded mt-1",placeholder:"Enter new password...",value:o,onChange:e=>s(e.target.value)}),(0,Va.jsx)("button",{className:"w-full bg-red-500 text-white p-2 rounded mt-3",onClick:async()=>{try{await Pg.post("users/reset-password?email=".concat(e,"&otp=").concat(r,"&newPassword=").concat(o)),Jt.success("Password has been successfully reset!"),n(""),i(""),s(""),l("/login")}catch(t){console.error("Error resetting password:",t),Jt.error("Unable to reset password, please try again!")}},children:"Reset Password"})]}),(0,Va.jsx)(on,{})]})},JI=e=>{let{userId:n}=e;const[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[a,c]=(0,t.useState)({}),l=pe();(0,t.useEffect)((()=>{(async()=>{if(n)try{const e=await(async e=>{console.log("\ud83d\udccc G\u1eedi request l\u1ea5y danh s\xe1ch y\xeau th\xedch v\u1edbi userId:",e);try{return(await xi.get("https://be-pjhk4.onrender.com/api/favorites/get-favorite-items/".concat(e))).data}catch(t){throw console.error("\u274c L\u1ed7i khi l\u1ea5y danh s\xe1ch s\u1ea3n ph\u1ea9m y\xeau th\xedch:",t),t}})(n);s(e||[])}catch(e){console.error("\u274c L\u1ed7i khi l\u1ea5y danh s\xe1ch s\u1ea3n ph\u1ea9m y\xeau th\xedch:",e)}else console.error("\u274c Kh\xf4ng t\xecm th\u1ea5y userId trong LocalStorage!")})()}),[]);return(0,Va.jsxs)("div",{className:"favorites-page",children:[(0,Va.jsx)("h2",{children:"Seller has been following"}),0===r.length?(0,Va.jsx)("p",{className:"empty-message",children:"You are not following any sellers yet."}):(0,Va.jsxs)("table",{className:"custom-table",children:[(0,Va.jsx)("thead",{children:(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("th",{children:"Seller"}),(0,Va.jsx)("th",{children:"Phone"}),(0,Va.jsx)("th",{children:"Address"}),(0,Va.jsx)("th",{children:"Action"})]})}),(0,Va.jsx)("tbody",{children:r.map((e=>(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("td",{children:e.name}),(0,Va.jsx)("td",{children:e.phone}),(0,Va.jsx)("td",{children:e.location}),(0,Va.jsx)("td",{children:(0,Va.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{const t=localStorage.getItem("userId");await $E(t,e)&&(i(r.filter((t=>t.id!==e))),alert("You have unfollowed!"))})(e.id),children:"\u274c Unfollow"})})]},e.id)))})]}),(0,Va.jsx)("h1",{children:"Favorite products"}),0===o.length?(0,Va.jsx)("p",{className:"empty-message",children:"You have not liked any products yet."}):(0,Va.jsxs)("table",{className:"custom-table",children:[(0,Va.jsx)("thead",{children:(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("th",{children:"Image"}),(0,Va.jsx)("th",{children:"Name item"}),(0,Va.jsx)("th",{children:"Price"}),(0,Va.jsx)("th",{children:"Current price"}),(0,Va.jsx)("th",{children:"Description"}),(0,Va.jsx)("th",{children:"Action"})]})}),(0,Va.jsx)("tbody",{children:o.map((e=>(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("td",{children:(0,Va.jsx)("img",{src:e.imageUrl,alt:e.name,className:"favorite-item-img"})}),(0,Va.jsx)("td",{children:e.name}),(0,Va.jsxs)("td",{children:["$",e.startingPrice]}),(0,Va.jsxs)("td",{children:["$",e.currentPrice]}),(0,Va.jsx)("td",{children:e.description}),(0,Va.jsxs)("td",{children:[(0,Va.jsx)("button",{className:"btn-info mb-1",onClick:()=>l("/details/".concat(e.id)),children:"\ud83d\udd0d Details"}),(0,Va.jsx)("button",{className:"btn-danger",onClick:()=>(async e=>{const t=localStorage.getItem("userId");await eb(t,e)&&(s(o.filter((t=>t.id!==e))),alert("Product has been removed from wishlist!"))})(e.id),children:"\u274c Delete"})]})]},e.id)))})]}),(0,Va.jsx)("style",{children:"\n              .favorites-page {\n                max-width: 1200px;\n                margin: auto;\n                text-align: center;\n              }\n    \n              .title {\n                font-size: 28px;\n                font-weight: bold;\n                margin-bottom: 20px;\n              }\n    \n              .empty-message {\n                font-style: italic;\n                color: gray;\n              }\n    \n              .custom-table {\n                width: 100%;\n                border-collapse: collapse;\n                margin-top: 20px;\n                border: 1px solid #ddd;\n              }\n    \n              .custom-table th, .custom-table td {\n                border: 1px solid #ddd;\n                padding: 12px;\n                text-align: left;\n              }\n    \n              .custom-table th {\n                background-color: #333;\n                color: white;\n              }\n    \n              .custom-table tr:nth-child(even) {\n                background-color: #f9f9f9;\n              }\n    \n              .custom-table tr:hover {\n                background-color: #f1f1f1;\n              }\n    \n              .btn-danger {\n                background-color: red;\n                color: white;\n                border: none;\n                padding: 5px 10px;\n                cursor: pointer;\n                border-radius: 5px;\n                margin-right: 5px;\n              }\n    \n              .btn-danger:hover {\n                background-color: darkred;\n              }\n    \n              .btn-info {\n                background-color: #007bff;\n                color: white;\n                border: none;\n                padding: 5px 10px;\n                cursor: pointer;\n                border-radius: 5px;\n                margin-right: 5px;\n              }\n    \n              .btn-info:hover {\n                background-color: #0056b3;\n              }\n    \n              .favorite-item-img {\n                width: 50px;\n                height: 50px;\n                object-fit: cover;\n                border-radius: 5px;\n              }\n            "})]})};function QI(e){return Og({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"},child:[]}]})(e)}const ZI={item_name:"",description:"",starting_price:"",start_date:"",end_date:"",category_id:""},$I=()=>{var e,n,r;const i=vv(),[o,s]=(0,t.useState)(0),[a,c]=(0,t.useState)(0),[l,d]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[g,v]=(0,t.useState)([]),[y,_]=(0,t.useState)(""),[E,b]=(0,t.useState)(null),{productsOfCreator:w,productsOfBuyer:S}=ov((e=>e.product)),[A,C]=(0,t.useState)(ZI),{item_name:T,description:R,starting_price:I,start_date:x,end_date:O,bid_step:N}=A,[D,k]=(0,t.useState)([]),[P,L]=(0,t.useState)(null),[M,j]=(0,t.useState)([]),[U,B]=(0,t.useState)(!1),F=(0,t.useRef)(null),{categories:V}=ov((e=>e.product)),[W]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);_(t.username),b(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]),(0,t.useEffect)((()=>{if(Array.isArray(w)&&(null===w||void 0===w?void 0:w.length)>0){const e=null===w||void 0===w?void 0:w.filter((e=>!0===e.status)),t=Array.isArray(w)?null===w||void 0===w?void 0:w.filter((e=>{const[t,n,r]=(null===e||void 0===e?void 0:e.end_date)||[];if(!t||!n||!r)return!1;const i=new Date(t,n-1,r);return!e.bidding&&e.status&&i<=new Date})):[],n=Array.isArray(w)?null===w||void 0===w?void 0:w.filter((e=>!1===e.status)):[],r=Array.isArray(w)?null===w||void 0===w?void 0:w.filter((e=>!0===e.soldout)):[];d(e||[]),v(t||[]),p(n||[]),m(r||[])}}),[w,E]),(0,t.useEffect)((()=>{E&&i(vb(E))}),[i,E]),(0,t.useEffect)((()=>{E&&i(yb(E))}),[i,E]);const[H,z]=(0,t.useState)(5),[G,Y]=(0,t.useState)(5),K=()=>{Y((e=>e+5))},q=()=>{Y(5)};(0,t.useEffect)((()=>{if(V.data){const e=null===V||void 0===V?void 0:V.data.map((e=>({label:e.category_name,value:e.category_id})));L(e)}}),[V]);const X=e=>{const{name:t,value:n}=e.target;C(u(u({},A),{},{[t]:n}))};return(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsxs)("div",{className:" flex border-b border-[#e0e0e0]",children:[(0,Va.jsx)("img",{className:"w-[46px]",alt:"",src:"https://cdn-icons-png.flaticon.com/512/6596/6596121.png"}),(0,Va.jsxs)("div",{className:"flex flex-col ",children:[(0,Va.jsx)("span",{className:"text-slate-800 font-bold",children:y}),(0,Va.jsxs)("span",{onClick:()=>c(1),className:"text-[14px] flex items-center text-[#306bd9] cursor-pointer",children:[" ",(0,Va.jsx)(QI,{})," Add new product "]})]})]}),0===a&&(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)("div",{className:"p-3",children:(0,Va.jsx)("ul",{className:"flex",children:[{name:"Success bidding"},{name:"Expired"},{name:"Pending"},{name:"Opening"},{name:"Sold"},{name:"My Favorites"}].map(((e,t)=>(0,Va.jsx)("li",{onClick:()=>s(t),className:"cursor-pointer mr-3 font-bold uppercase ",children:(0,Va.jsx)("span",{className:"transition-all duration-300 ".concat(o===t?"border-b-2 border-blue-900 translate-x-2":"translate-x-0"),children:e.name})},t)))})}),(0,Va.jsxs)("div",{className:"w-full pl-3 pr-3 overflow-x-auto",children:[4!==o&&(0,Va.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[(0,Va.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:(0,Va.jsxs)("tr",{children:[(0,Va.jsx)("th",{scope:"col",className:"px-6 py-5",children:"Name"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Start price"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Current price"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Start date"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"End date"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Images"}),(0,Va.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),(0,Va.jsxs)("tbody",{children:[1===o&&(null===l||void 0===l?void 0:l.length)>0&&(null===g||void 0===g?void 0:g.map(((e,t)=>{var n,r;return(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:e.item_name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null!==e&&void 0!==e&&null!==(n=e.bidding)&&void 0!==n&&n.price?null===e||void 0===e||null===(r=e.bidding)||void 0===r?void 0:r.price:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.start_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.end_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.images.map(((e,t)=>(0,Va.jsx)("img",{className:"w-10 h-10",src:e,alt:"Jeseimage"},t)))}),(0,Va.jsx)("td",{className:"px-6 py-4 text-center flex items-center gap-3 mt-1",children:(0,Va.jsx)("button",{className:"font-medium text-green",children:"Repost"})})]},e.item_id)}))),0===o&&(null===h||void 0===h?void 0:h.length)>0&&(null===h||void 0===h||null===(e=h.slice(0,G))||void 0===e?void 0:e.map(((e,t)=>{var n,r;return(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.item_name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null!==e&&void 0!==e&&null!==(n=e.bidding)&&void 0!==n&&n.price?null===e||void 0===e||null===(r=e.bidding)||void 0===r?void 0:r.price:null===e||void 0===e?void 0:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.start_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.end_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.images.map(((e,t)=>(0,Va.jsx)("img",{className:"w-10 h-10",src:e,alt:"Jeseimage"},t)))}),(0,Va.jsxs)("td",{className:"px-6 py-4 text-center flex items-center gap-3 mt-1",children:[(0,Va.jsx)(mt,{to:"#",type:"button",className:"font-medium text-indigo-500",children:(0,Va.jsx)(Dg,{size:25})}),(0,Va.jsx)(mt,{to:"/product/update/".concat(null===e||void 0===e?void 0:e.item_id),type:"button",className:"font-medium text-green",children:(0,Va.jsx)($_,{size:25})})]})]},e.item_id)}))),3===o&&(null===l||void 0===l?void 0:l.length)>0&&(null===l||void 0===l?void 0:l.map(((e,t)=>{var n,r;return(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.item_name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null!==e&&void 0!==e&&null!==(n=e.bidding)&&void 0!==n&&n.price?null===e||void 0===e||null===(r=e.bidding)||void 0===r?void 0:r.price:null===e||void 0===e?void 0:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.start_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.end_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.images.map(((e,t)=>(0,Va.jsx)("img",{className:"w-10 h-10",src:e,alt:"Jeseimage"},t)))}),(0,Va.jsxs)("td",{className:"px-6 py-4 text-center flex items-center gap-3 mt-1",children:[(0,Va.jsx)(mt,{to:"#",type:"button",className:"font-medium text-indigo-500",children:(0,Va.jsx)(Dg,{size:25})}),(0,Va.jsx)(mt,{to:"/product/update/".concat(null===e||void 0===e?void 0:e.item_id),type:"button",className:"font-medium text-green",children:(0,Va.jsx)($_,{size:25})})]})]},e.item_id)}))),2===o&&(null===h||void 0===h?void 0:h.length)>0&&(null===h||void 0===h?void 0:h.map(((e,t)=>{var n,r;return(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.item_name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null!==e&&void 0!==e&&null!==(n=e.bidding)&&void 0!==n&&n.price?null===e||void 0===e||null===(r=e.bidding)||void 0===r?void 0:r.price:null===e||void 0===e?void 0:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.start_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.end_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e?void 0:e.images.map(((e,t)=>(0,Va.jsx)("img",{className:"w-10 h-10",src:e,alt:"Jeseimage"},t)))})]},e.item_id)}))),0===o&&S&&(null===S||void 0===S?void 0:S.length)>0&&(null===S||void 0===S||null===(n=S.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.buyer)||void 0===t?void 0:t.id)===E})))||void 0===n?void 0:n.map((e=>{var t,n;return(0,Va.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Va.jsx)("td",{className:"px-6 py-4",children:e.item_name}),(0,Va.jsx)("td",{className:"px-6 py-4",children:e.starting_price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e||null===(t=e.bidding)||void 0===t?void 0:t.price}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.start_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:__()(e.end_date).format("DD/MM/YYYY")}),(0,Va.jsx)("td",{className:"px-6 py-4",children:null===e||void 0===e||null===(n=e.images)||void 0===n?void 0:n.map(((e,t)=>(0,Va.jsx)("img",{className:"w-10 h-10",src:e,alt:"Product"},t)))}),(0,Va.jsx)("td",{className:"px-0 py-5",children:(0,Va.jsx)("div",{className:"w-[100px] h-[40px] bg-green border rounded-md flex justify-center items-center",children:(0,Va.jsx)("button",{onClick:()=>(e=>{var t;const n="order_".concat(e,"_").concat(Date.now()),r=null===S||void 0===S?void 0:S.find((t=>t.item_id===e));var i;null!==r&&void 0!==r&&null!==(t=r.bidding)&&void 0!==t&&t.price&&(localStorage.setItem("paymentInfo",JSON.stringify({productName:r.name,amount:r.bidding.price})),zI(e,null===r||void 0===r||null===(i=r.bidding)||void 0===i?void 0:i.price,n).then((e=>{var t;null!==(t=e.data.data)&&void 0!==t&&t.paymentUrl?window.location.href=e.data.data.paymentUrl:window.location.href="/payment-failure"})).catch((()=>{window.location.href="/payment-failure"})))})(e.item_id),type:"button",className:"font-medium px-4 py-2 rounded ".concat(e.paid?"bg-gray-400 cursor-not-allowed":"bg-green-600 text-white"),disabled:e.paid,children:e.paid?"Paid":"Pay with Stripe \ud83d\udcb3"})})})]},e.item_id)})))]})]}),4===o&&(null===f||void 0===f?void 0:f.length)>0&&(null===f||void 0===f?void 0:f.slice(0,G).map(((e,t)=>{var n,r,i,o;return(0,Va.jsxs)("div",{className:"border-b border-gray-400",children:[(0,Va.jsxs)("p",{className:"text-[14px]",children:["Product Name: ",(0,Va.jsx)("span",{className:"text-[16px] font-bold",children:e.item_name})]}),(0,Va.jsxs)("p",{className:"text-[14px]",children:["Price: ",(0,Va.jsx)("span",{className:"text-[16px] font-bold",children:null===e||void 0===e||null===(n=e.bidding)||void 0===n?void 0:n.price})]}),(0,Va.jsxs)("p",{className:"text-[14px]",children:["Sold Date: ",(0,Va.jsx)("span",{className:"text-[16px] font-bold",children:__()(e.end_date).format("DD/MM/YYYY")})]}),(0,Va.jsxs)("p",{className:"text-[14px]",children:["Buyer: ",(0,Va.jsx)("span",{className:"text-[16px] font-bold",children:null===e||void 0===e||null===(r=e.buyer)||void 0===r?void 0:r.name})]}),(0,Va.jsxs)("p",{className:"text-[14px]",children:["Phone Number: ",(0,Va.jsx)("span",{className:"text-[16px] font-bold",children:null===e||void 0===e||null===(i=e.buyer)||void 0===i?void 0:i.phone})]}),(0,Va.jsxs)("p",{className:"text-[14px]",children:["Address: ",(0,Va.jsx)("span",{className:"text-[16px] font-bold",children:null===e||void 0===e||null===(o=e.buyer)||void 0===o?void 0:o.address})]}),(0,Va.jsxs)("p",{className:"text-[14px]",children:["Payment: ",(0,Va.jsx)("span",{className:At("text-[16px] font-bold",!1===(null===e||void 0===e?void 0:e.paid)?"":"text-red-500"),children:!0===(null===e||void 0===e?void 0:e.paid)?"Da thanh toan":"Chua thanh toan"})]})]},e.item_id)}))),4===o&&G<h.length&&(0,Va.jsx)("div",{className:"text-center mt-4 pb-1",children:(0,Va.jsx)("button",{onClick:K,className:"px-4 py-0 bg-blue-500 text-white rounded-md",children:"View More"})}),4===o&&G>5&&(0,Va.jsx)("div",{className:"text-center mt-4 pb-1",children:(0,Va.jsx)("button",{onClick:q,className:"px-4 py-0 bg-red-500 text-white rounded-md",children:"Show Less"})})]}),2===o&&H<l.length&&(0,Va.jsx)("div",{className:"text-center mt-4 pb-1",children:(0,Va.jsx)("button",{onClick:()=>{z((e=>e+5))},className:"px-4 py-0 bg-blue-500 text-white rounded-md",children:"View More"})}),2===o&&H>5&&(0,Va.jsx)("div",{className:"text-center mt-4 pb-1",children:(0,Va.jsx)("button",{onClick:()=>{z(5)},className:"px-4 py-0 bg-red-500 text-white rounded-md",children:"Show Less"})}),0===o&&G<(null===h||void 0===h?void 0:h.length)&&(0,Va.jsx)("div",{className:"text-center mt-4 pb-1",children:(0,Va.jsx)("button",{onClick:K,className:"px-4 py-0 bg-blue-500 text-white rounded-md",children:"View More"})}),0===o&&G>5&&(0,Va.jsx)("div",{className:"text-center mt-4 pb-1",children:(0,Va.jsx)("button",{onClick:q,className:"px-4 py-0 bg-red-500 text-white rounded-md",children:"Show Less"})}),5===o&&(0,Va.jsx)(JI,{userId:E})]}),1===a&&(0,Va.jsxs)("div",{className:"p-3",children:[(0,Va.jsxs)("div",{className:"flex justify-between",children:[(0,Va.jsx)("h1",{className:"text-[18px] font-bold",children:"Add new product"}),(0,Va.jsx)("button",{onClick:()=>c(0),className:"text-red-500",children:"Cancel"})]}),(0,Va.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=Qb(A,j);console.log(t);const n=new FormData;if(n.append("item_name",A.item_name),n.append("category_id",A.category_id),n.append("description",A.description),n.append("starting_price",A.starting_price),n.append("start_date",A.start_date),n.append("end_date",A.end_date),n.append("userId",E),D.length>0){for(let e=0;e<D.length;e++)n.append("images",D[e]);B(!1)}else B(!0);0===t&&E&&D.length>0&&W&&(i(ub(n)),C(ZI),k([]),F.current&&(F.current.value=""))},encType:"multipart/form-data",children:[(0,Va.jsxs)("div",{className:"w-full",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Name *"}),(0,Va.jsx)("input",{type:"text",name:"item_name",value:T,onChange:X,className:"".concat(fE),placeholder:"Name"}),(null===M||void 0===M?void 0:M.some((e=>"item_name"===e.name)))&&""===A.item_name&&(0,Va.jsx)("small",{style:{color:"red"},children:null===M||void 0===M?void 0:M.find((e=>"item_name"===e.name)).message})]}),(0,Va.jsxs)("div",{className:"py-5",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Category *"}),(0,Va.jsx)(jA,{value:P,options:null===(r=V.data)||void 0===r?void 0:r.map((e=>({label:e.category_name,value:e.category_id}))),placeholder:"Select a category",handleCategoryChange:e=>{L(e),C(u(u({},A),{},{category_id:e.value}))},className:"".concat(fE)})]}),(0,Va.jsxs)("div",{className:"flex items-center gap-5 my-4",children:[(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Start price "}),(0,Va.jsx)("input",{type:"number",name:"starting_price",value:I,onChange:X,placeholder:"Start price",className:"".concat(fE)}),(null===M||void 0===M?void 0:M.some((e=>"starting_price"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===M||void 0===M?void 0:M.find((e=>"starting_price"===e.name)).message})]}),(0,Va.jsxs)("div",{className:"w-1/2",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Start date "}),(0,Va.jsx)("input",{onFocus:()=>j([]),type:"date",name:"start_date",value:x,onChange:X,placeholder:"Start date",className:"".concat(fE)}),(null===M||void 0===M?void 0:M.some((e=>"start_date"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===M||void 0===M?void 0:M.find((e=>"start_date"===e.name)).message})]})]}),(0,Va.jsx)("div",{className:"flex items-center gap-5 my-4",children:(0,Va.jsxs)("div",{className:"w-full",children:[(0,Va.jsx)(aE,{className:"mb-2",children:"End date "}),(0,Va.jsx)("input",{onFocus:()=>j([]),type:"date",name:"end_date",value:O,onChange:X,placeholder:"End date",className:"".concat(fE)}),(null===M||void 0===M?void 0:M.some((e=>"end_date"===e.name)))&&(0,Va.jsx)("small",{style:{color:"red"},children:null===M||void 0===M?void 0:M.find((e=>"end_date"===e.name)).message})]})}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Description *"}),(0,Va.jsx)("textarea",{name:"description",value:R,onChange:X,className:"".concat(fE),cols:"30",rows:"5"}),(null===M||void 0===M?void 0:M.some((e=>"description"===e.name)))&&""===A.description&&(0,Va.jsx)("small",{style:{color:"red"},children:null===M||void 0===M?void 0:M.find((e=>"description"===e.name)).message})]}),(0,Va.jsxs)("div",{children:[(0,Va.jsx)(aE,{className:"mb-2",children:"Image "}),(0,Va.jsx)("input",{type:"file",multiple:"multiple",onChange:e=>{e.target.files&&e.target.files.length>0?k(e.target.files):k([])},className:"".concat(fE),name:"images",ref:F}),U&&(0,Va.jsx)("small",{style:{color:"red"},children:"This field is invalid"})]}),W&&(0,Va.jsx)(uE,{type:"submit",className:"rounded-none my-5",children:"CREATE"})]})]})]})},ex=()=>{var e;const[n,r]=(0,t.useState)(null),[i,o]=(0,t.useState)(null),[s,a]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);r(t)}catch(t){console.error("Error decoding token:",t.message)}}),[]),(0,t.useEffect)((()=>{var e;null!==n&&void 0!==n&&n.userid&&(e=null===n||void 0===n?void 0:n.userid,Pg.get("https://be-pjhk4.onrender.com/api/users/".concat(e)).then((e=>{o(e)})).catch((e=>{console.error("Error fetching About Us Card data",e)})))}),[null===n||void 0===n?void 0:n.userid]);return(0,Va.jsx)("div",{className:"mt-[90px] min-h-screen bg-gray-100 flex justify-center p-4",children:(0,Va.jsxs)("div",{className:"w-full max-w-6xl bg-white shadow-lg rounded-lg flex",children:[(0,Va.jsxs)("div",{className:"w-1/3 border-r p-4",children:[(0,Va.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Va.jsx)("div",{className:"w-20 h-20 bg-blue-500 text-white flex items-center justify-center rounded-full text-3xl font-bold",children:"d"}),(0,Va.jsx)("h2",{className:"mt-3 text-xl font-bold",children:null===i||void 0===i?void 0:i.name}),(0,Va.jsx)("p",{className:"text-gray-500 text-sm",children:"No Rating"})]}),(0,Va.jsxs)("div",{className:"mt-4 text-sm space-y-2 text-gray-600",children:[(0,Va.jsxs)("p",{children:["\ud83d\udcc5 Enrolled: ",(0,Va.jsx)("span",{className:"font-medium",children:"1 year 4 months"})]}),(0,Va.jsx)("p",{children:null!==i&&void 0!==i&&i.isVerify?(0,Va.jsxs)(Va.Fragment,{children:["\u2705 Verified",(0,Va.jsx)("button",{onClick:()=>{Yg().fire({title:"Th\xf4ng tin b\u1ea1n \u0111\xe3 x\xe1c minh.",html:'\n      <div style="text-align: left;">\n      <p><strong>T\xean:</strong> '.concat(i.citizen.fullName,"</p>\n    <p><strong>Ng\xe0y sinh:</strong> ").concat(i.citizen.birthDate,"</p>\n    <p><strong>Ng\xe0y c\u1ea5p:</strong> ").concat(i.citizen.startDate,"</p>\n    </div>\n    "),confirmButtonText:"Ok",customClass:{confirmButton:"swal-confirm-button"}})},className:"ml-2 text-green",children:"View"})]}):(0,Va.jsx)(ft,{to:"/citizen-verify",className:"text-red-500",children:"\u274c Click to Verify"})}),(0,Va.jsxs)("p",{children:["\ud83d\udccd Address: ",null===i||void 0===i?void 0:i.address]}),(0,Va.jsxs)("p",{children:["\ud83d\udce9 Email: ",null===i||void 0===i?void 0:i.email]}),(0,Va.jsxs)("p",{children:["\ud83d\udcde Phone: ",null===i||void 0===i?void 0:i.phone]}),(0,Va.jsxs)("p",{className:"mt-3 text-xl font-bold",children:[null===i||void 0===i||null===(e=i.money)||void 0===e?void 0:e.toLocaleString("vi-VN")," VN\u0110"]})]})]}),(0,Va.jsx)("div",{className:"w-full overflow-auto",children:(0,Va.jsx)($I,{})})]})})};var tx;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(tx||(tx={}));var nx,rx,ix=new Map([[tx.QR_CODE,"QR_CODE"],[tx.AZTEC,"AZTEC"],[tx.CODABAR,"CODABAR"],[tx.CODE_39,"CODE_39"],[tx.CODE_93,"CODE_93"],[tx.CODE_128,"CODE_128"],[tx.DATA_MATRIX,"DATA_MATRIX"],[tx.MAXICODE,"MAXICODE"],[tx.ITF,"ITF"],[tx.EAN_13,"EAN_13"],[tx.EAN_8,"EAN_8"],[tx.PDF_417,"PDF_417"],[tx.RSS_14,"RSS_14"],[tx.RSS_EXPANDED,"RSS_EXPANDED"],[tx.UPC_A,"UPC_A"],[tx.UPC_E,"UPC_E"],[tx.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function ox(e){return Object.values(tx).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(nx||(nx={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(rx||(rx={}));var sx,ax=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[rx.SCAN_TYPE_CAMERA,rx.SCAN_TYPE_FILE],e}(),cx=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!ix.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,ix.get(t))},e}(),lx=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(sx||(sx={}));var dx=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:sx.UNKWOWN_ERROR}},e}(),ux=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function hx(e){return"undefined"===typeof e||null===e}var px,fx=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),mx=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),gx=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),vx=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];if(r.has(s))return t.logError("".concat(s," is not supported videoConstaints."),!0),!1}return!0},e}(),yx=n(3484),_x=function(){function e(e,t,n){if(this.formatMap=new Map([[tx.QR_CODE,yx.BarcodeFormat.QR_CODE],[tx.AZTEC,yx.BarcodeFormat.AZTEC],[tx.CODABAR,yx.BarcodeFormat.CODABAR],[tx.CODE_39,yx.BarcodeFormat.CODE_39],[tx.CODE_93,yx.BarcodeFormat.CODE_93],[tx.CODE_128,yx.BarcodeFormat.CODE_128],[tx.DATA_MATRIX,yx.BarcodeFormat.DATA_MATRIX],[tx.MAXICODE,yx.BarcodeFormat.MAXICODE],[tx.ITF,yx.BarcodeFormat.ITF],[tx.EAN_13,yx.BarcodeFormat.EAN_13],[tx.EAN_8,yx.BarcodeFormat.EAN_8],[tx.PDF_417,yx.BarcodeFormat.PDF_417],[tx.RSS_14,yx.BarcodeFormat.RSS_14],[tx.RSS_EXPANDED,yx.BarcodeFormat.RSS_EXPANDED],[tx.UPC_A,yx.BarcodeFormat.UPC_A],[tx.UPC_E,yx.BarcodeFormat.UPC_E],[tx.UPC_EAN_EXTENSION,yx.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!yx)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(yx.DecodeHintType.POSSIBLE_FORMATS,r),i.set(yx.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise((function(n,r){try{n(t.decode(e))}catch(i){r(i)}}))},e.prototype.decode=function(e){var t=new yx.MultiFormatReader(this.verbose,this.hints),n=new yx.HTMLCanvasElementLuminanceSource(e),r=new yx.BinaryBitmap(new yx.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:cx.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,r){e.set(t,n)})),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Ex=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(eU){o(eU)}}function a(e){try{c(r.throw(e))}catch(eU){o(eU)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},bx=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(eU){a=[6,eU],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},wx=function(){function e(t,n,r){if(this.formatMap=new Map([[tx.QR_CODE,"qr_code"],[tx.AZTEC,"aztec"],[tx.CODABAR,"codabar"],[tx.CODE_39,"code_39"],[tx.CODE_93,"code_93"],[tx.CODE_128,"code_128"],[tx.DATA_MATRIX,"data_matrix"],[tx.ITF,"itf"],[tx.EAN_13,"ean_13"],[tx.EAN_8,"ean_8"],[tx.PDF_417,"pdf417"],[tx.UPC_A,"upc_a"],[tx.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return Ex(this,void 0,void 0,(function(){var t,n;return bx(this,(function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:cx.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}}))}))},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,i=e;r<i.length;r++){var o=i[r],s=o.boundingBox.width*o.boundingBox.height;s>n&&(n=s,t=o)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,r){e.set(t,n)})),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Sx=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(eU){o(eU)}}function a(e){try{c(r.throw(e))}catch(eU){o(eU)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Ax=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(eU){a=[6,eU],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Cx=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&wx.isSupported()?(this.primaryDecoder=new wx(e,n,r),this.secondaryDecoder=new _x(e,n,r)):this.primaryDecoder=new _x(e,n,r)}return e.prototype.decodeAsync=function(e){return Sx(this,void 0,void 0,(function(){var t;return Ax(this,(function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}}))}))},e.prototype.decodeRobustlyAsync=function(e){return Sx(this,void 0,void 0,(function(){var t,n;return Ax(this,(function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}}))}))},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Tx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rx=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(eU){o(eU)}}function a(e){try{c(r.throw(e))}catch(eU){o(eU)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Ix=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(eU){a=[6,eU],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},xx=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),Ox=function(e){function t(t){return e.call(this,"zoom",t)||this}return Tx(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return Tx(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(xx)),Nx=function(e){function t(t){return e.call(this,"torch",t)||this}return Tx(t,e),t}(xx),Dx=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new Ox(this.track)},e.prototype.torchFeature=function(){return new Nx(this.track)},e}(),kx=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Rx(this,void 0,void 0,(function(){var o,s;return Ix(this,(function(a){switch(a.label){case 0:return o=new e(t,n,i),r.aspectRatio?(s={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:a.sent(),a.label=2;case 2:return o.setupSurface(),[2,o]}}))}))},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return Rx(this,void 0,void 0,(function(){return Ix(this,(function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]}))}))},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise((function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach((function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())}))}))},e.prototype.getCapabilities=function(){return new Dx(this.getFirstTrackOrFail())},e}(),Px=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return Rx(this,void 0,void 0,(function(){return Ix(this,(function(r){return[2,kx.create(e,this.mediaStream,t,n)]}))}))},e.create=function(t){return Rx(this,void 0,void 0,(function(){var n;return Ix(this,(function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}}))}))},e}(),Lx=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(eU){o(eU)}}function a(e){try{c(r.throw(e))}catch(eU){o(eU)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Mx=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(eU){a=[6,eU],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},jx=function(){function e(){}return e.failIfNotSupported=function(){return Lx(this,void 0,void 0,(function(){return Mx(this,(function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]}))}))},e.prototype.create=function(e){return Lx(this,void 0,void 0,(function(){return Mx(this,(function(t){return[2,Px.create(e)]}))}))},e}(),Ux=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(eU){o(eU)}}function a(e){try{c(r.throw(e))}catch(eU){o(eU)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Bx=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(eU){a=[6,eU],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Fx=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=fx.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=fx.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return Ux(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return Bx(this,(function(a){switch(a.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=a.sent(),r=[],i=0,o=n;i<o.length;i++)"videoinput"===(s=o[i]).kind&&r.push({id:s.deviceId,label:s.label});return e(t),[2,r]}}))}))},e.getCamerasFromMediaStreamTrack=function(){return new Promise((function(e,t){MediaStreamTrack.getSources((function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];"video"===o.kind&&n.push({id:o.id,label:o.label})}e(n)}))}))},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(px||(px={}));var Vx,Wx=function(){function e(){this.state=px.NOT_STARTED,this.onGoingTransactionNewState=px.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===px.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=px.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===px.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=px.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==px.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case px.UNKNOWN:throw"Transition from unknown is not allowed";case px.NOT_STARTED:this.failIfNewStateIs(e,[px.PAUSED]);case px.SCANNING:case px.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),Hx=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===px.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==px.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===px.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===px.PAUSED},e}(),zx=function(){function e(){}return e.create=function(){return new Hx(new Wx)},e}(),Gx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(ax),Kx=function(){function e(e,t){this.logger=t,this.fps=Yx.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Yx.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?vx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!hx(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),qx=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new ux(this.verbose),this.qrcode=new Cx(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=zx.create()}return e.prototype.start=function(e,t,n,r){var i,o=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var s=Kx.create(t,this.logger);this.clearElement();var a=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=a,l=document.getElementById(this.elementId);l.clientWidth?l.clientWidth:Yx.DEFAULT_WIDTH;l.style.position="relative",this.shouldScan=!0,this.element=l;var d=this,u=this.stateManagerProxy.startTransition(px.SCANNING);return new Promise((function(t,r){var a=c?s.videoConstraints:d.createVideoConstraints(e);if(!a)return u.cancel(),void r("videoConstraints should be defined");var l={};c&&!s.aspectRatio||(l.aspectRatio=s.aspectRatio);var h={onRenderSurfaceReady:function(e,t){d.setupUi(e,t,s),d.isScanning=!0,d.foreverScan(s,n,i)}};jx.failIfNotSupported().then((function(e){e.create(a).then((function(e){return e.render(o.element,l,h).then((function(e){d.renderedCamera=e,u.execute(),t(null)})).catch((function(e){u.cancel(),r(e)}))})).catch((function(e){u.cancel(),r(fx.errorGettingUserMedia(e))}))})).catch((function(e){u.cancel(),r(fx.cameraStreamingNotSupported())}))}))},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(px.PAUSED),this.showPausedState(),(hx(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(px.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume((function(){t()})):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(px.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then((function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(Yx.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()}))},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then((function(e){return e.decodedText}))},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hx(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var e=o.width,s=o.height,a=document.getElementById(n.elementId),c=a.clientWidth?a.clientWidth:Yx.DEFAULT_WIDTH,l=Math.max(a.clientHeight?a.clientHeight:s,Yx.FILE_SCAN_MIN_HEIGHT),d=n.computeCanvasDrawConfig(e,s,c,l);if(t){var u=n.createCanvasElement(c,l,"qr-canvas-visible");u.style.display="inline-block",a.appendChild(u);var h=u.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=c,h.canvas.height=l,h.drawImage(o,0,0,e,s,d.x,d.y,d.width,d.height)}var p=Yx.FILE_SCAN_HIDDEN_CANVAS_PADDING,f=Math.max(o.width,d.width),m=Math.max(o.height,d.height),g=f+2*p,v=m+2*p,y=n.createCanvasElement(g,v);a.appendChild(y);var _=y.getContext("2d");if(!_)throw"Unable to get 2d context from canvas";_.canvas.width=g,_.canvas.height=v,_.drawImage(o,0,0,e,s,p,p,f,m);try{n.qrcode.decodeRobustlyAsync(y).then((function(e){r(lx.createFromQrcodeResult(e))})).catch(i)}catch(E){i("QR code parse error, error = ".concat(E))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)}))},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Fx.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!vx.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[tx.QR_CODE,tx.AZTEC,tx.CODABAR,tx.CODE_39,tx.CODE_93,tx.CODE_128,tx.DATA_MATRIX,tx.MAXICODE,tx.ITF,tx.EAN_13,tx.EAN_8,tx.PDF_417,tx.RSS_14,tx.RSS_EXPANDED,tx.UPC_A,tx.UPC_E,tx.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var o=i[r];ox(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(hx(e))return!0;if(!hx(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(hx(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!hx(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var o,s=this.toQrdimensions(e,t,i),a=function(e){if(e<Yx.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Yx.MIN_QR_BOX_SIZE,"px.")};a(s.width),a(s.height),s.width=((o=s.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),o=e),o)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=hx(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=t,s={x:0,y:0,width:e,height:t},a=o?this.getShadedRegionBounds(e,t,i):s,c=this.createCanvasElement(a.width,a.height),l=c.getContext("2d",{willReadFrequently:!0});l.canvas.width=a.width,l.canvas.height=a.height,this.element.append(c),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=l,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=fx.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(t){return e(t.text,lx.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0})).catch((function(e){n.possiblyUpdateShaders(!1);var r=fx.codeParseError(e);return t(r,dx.createFrom(r)),!1}))},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,s=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*o,c=this.qrRegion.height*s,l=this.qrRegion.x*o,d=this.qrRegion.y*s;this.context.drawImage(i,l,d,a,c,0,0,this.qrRegion.width,this.qrRegion.height);var u=function(){r.foreverScanTimeout=setTimeout((function(){r.foreverScan(e,t,n)}),r.getTimeoutFps(e.fps))};this.scanContext(t,n).then((function(i){i||!0===e.disableFlip?u():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally((function(){u()})))})).catch((function(e){r.logger.logError("Error happend while scanning context",e),u()}))}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",o=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},s=Object.keys(e);if(1!==s.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(s.length," keys");var a=Object.keys(e)[0];if(a!==t&&a!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(a!==t){var c=e.deviceId;if("string"==typeof c)return{deviceId:c};if("object"==typeof c){if(i in c)return{deviceId:{exact:c["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof c)}var l=e.facingMode;if("string"==typeof l){if(o(l))return{facingMode:l}}else{if("object"!=typeof l)throw"Invalid type of 'facingMode' = ".concat(typeof l);if(!(i in l))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(o(l["".concat(i)]))return{facingMode:{exact:l["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,o=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(o)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(t){t.style.backgroundColor=e?Yx.BORDER_SHADER_MATCH_COLOR:Yx.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,i=t,o=document.createElement("canvas");return o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=hx(n)?"qr-canvas":n,o},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-r.width)/2,s=(n-r.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Yx.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var a=40;this.insertShaderBorders(i,a,5,-5,null,0,!0),this.insertShaderBorders(i,a,5,-5,null,0,!1),this.insertShaderBorders(i,a,5,null,-5,0,!0),this.insertShaderBorders(i,a,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,o,s){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=Yx.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(t,"px"),a.style.height="".concat(n,"px"),null!==r&&(a.style.top="".concat(r,"px")),null!==i&&(a.style.bottom="".concat(i,"px")),s?a.style.left="".concat(o,"px"):a.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),e.appendChild(a)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),Xx="data:image/svg+xml;base64,",Jx=Xx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Qx=Xx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Zx=Xx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",$x=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),eO=function(){function e(){this.data=$x.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=$x.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),tO=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=gx.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=gx.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),nO=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Zx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Zx,this.infoIcon.style.opacity="0.6")},e}(),rO=function(){function e(){var e=this;this.infoDiv=new tO,this.infoIcon=new nO((function(){e.infoDiv.show()}),(function(){e.infoDiv.hide()}))}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),iO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(eU){o(eU)}}function a(e){try{c(r.throw(e))}catch(eU){o(eU)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},oO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(eU){a=[6,eU],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},sO=function(){function e(){}return e.hasPermissions=function(){return iO(this,void 0,void 0,(function(){var e,t,n,r;return oO(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}}))}))},e}(),aO=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===rx.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===rx.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return ax.DEFAULT_SUPPORTED_SCAN_TYPE;var t=ax.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var i=r[n];if(!ax.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},e}(),cO=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),lO=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(cO.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),dO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(eU){o(eU)}}function a(e){try{c(r.throw(e))}catch(eU){o(eU)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},uO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(eU){a=[6,eU],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},hO=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return dO(this,void 0,void 0,(function(){var e,t;return uO(this,(function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?mx.torchOffButton():mx.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?mx.torchOnFailedMessage():mx.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),pO=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=lO.createElement("button",cO.TORCH_BUTTON_ID),this.torchController=new hO(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=mx.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",(function(e){return dO(n,void 0,void 0,(function(){return uO(this,(function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(cO.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(cO.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(cO.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(cO.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new hO(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=mx.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var o=new e(n,i);return o.render(t,r),o},e}(),fO=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=lO.createElement("button",cO.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(e){r.click()})),r.append(this.fileSelectionButton),this.fileScanInput=lO.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",(function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],o=r.name;i.setImageNameToButton(o),n(r)}}}));var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",(function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var s=!1,a=0;a<r.length;++a){var c=r.item(a);if(c){if(c.type.match(/image.*/)){s=!0;var l=c.name;i.setImageNameToButton(l),n(c),o.innerText=mx.dragAndDropMessage();break}}}s||(o.innerText=mx.dragAndDropMessageOnlyImages())}}))}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=mx.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var i=mx.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=mx.fileSelectionChooseImage()+" - "+mx.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),mO=function(){function e(e){this.selectElement=lO.createElement("select",cO.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=mx.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,o=0,s=this.cameras;o<s.length;o++){var a=s[o],c=a.id,l=null==a.label?c:a.label;l&&""!==l||(l=[mx.anonymousCameraPrefix(),i++].join(" "));var d=document.createElement("option");d.value=c,d.innerText=l,this.options.push(d),this.selectElement.appendChild(d)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),gO=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=lO.createElement("input",cO.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=mx.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",(function(){return r.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return r.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=mx.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Vx||(Vx={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new aO(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ux(this.verbose),this.persistedDataManager=new eO,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(mx.lastMatch(t),Vx.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id=".concat(this.elementId," not found");r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new qx(this.getScanRegionId(),function(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(e){(hx(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise((function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then((function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()})).catch((function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)})):(e.html5Qrcode.clear(),t(),n()):n()})):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=ax.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!ax.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=ax.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=ax.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:ax.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ax.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ax.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),aO.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new rO).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(mx.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};qx.getCameras().then((function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(mx.noCameraFound(),Vx.STATUS_WARNING),i())})).catch((function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,Vx.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)}))},e.prototype.createPermissionButton=function(e,t){var n=this,r=lO.createElement("button",this.getCameraPermissionButtonId());r.innerText=mx.cameraPermissionTitle(),r.addEventListener("click",(function(){r.disabled=!0,n.createCameraListUi(e,t,r)})),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;aO.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?sO.hasPermissions().then((function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))})).catch((function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)})):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=aO.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=aO.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=fO.create(e,t,(function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";aO.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(mx.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then((function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)})).catch((function(e){n.setHeaderMessage(e,Vx.STATUS_WARNING),n.qrCodeErrorCallback(e,dx.createFrom(e))})))}))},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=gO.create(r,!1),o=mO.create(r,e),s=document.createElement("span"),a=lO.createElement("button",cO.CAMERA_START_BUTTON_ID);a.innerText=mx.scanButtonStartScanningText(),s.appendChild(a);var c,l=lO.createElement("button",cO.CAMERA_STOP_BUTTON_ID);l.innerText=mx.scanButtonStopScanningText(),l.style.display="none",l.disabled=!0,s.appendChild(l);r.appendChild(s);var d=function(e){e||(a.style.display="none"),a.innerText=mx.scanButtonStartScanningText(),a.style.opacity="1",a.disabled=!1,e&&(a.style.display="inline-block")};if(a.addEventListener("click",(function(e){a.innerText=mx.scanButtonScanningStarting(),o.disable(),a.disabled=!0,a.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r=o.getValue();n.persistedDataManager.setLastUsedCameraId(r),n.html5Qrcode.start(r,function(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then((function(e){l.disabled=!1,l.style.display="inline-block",d(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(c?c.updateTorchCapability(e.torchFeature()):c=pO.create(s,e.torchFeature(),{display:"none",marginLeft:"5px"},(function(e){n.setHeaderMessage(e,Vx.STATUS_WARNING)})),c.show()):c&&c.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback((function(e){n.apply(e)}));var r,o,s,a=1;t.config.defaultZoomValueIfSupported&&(a=t.config.defaultZoomValueIfSupported),r=a,o=n.min(),a=r>(s=n.max())?s:r<o?o:r,i.setValues(n.min(),n.max(),a,n.step()),i.show()}}(r)})).catch((function(e){n.showHideScanTypeSwapLink(!0),o.enable(),d(!0),n.setHeaderMessage(e,Vx.STATUS_WARNING)}))})),o.hasSingleItem()&&a.click(),l.addEventListener("click",(function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";l.disabled=!0,n.html5Qrcode.stop().then((function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),o.enable(),a.disabled=!1,l.style.display="none",a.style.display="inline-block",c&&(c.reset(),c.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()})).catch((function(e){l.disabled=!1,n.setHeaderMessage(e,Vx.STATUS_WARNING)}))})),n.persistedDataManager.getLastUsedCameraId()){var u=n.persistedDataManager.getLastUsedCameraId();o.hasValue(u)?(o.setValue(u),a.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=mx.textIfCameraScanSelected(),n=mx.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var o=lO.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=aO.isCameraScanType(this.currentScanType)?t:n,o.addEventListener("click",(function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,aO.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=n,e.currentScanType=rx.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=t,e.currentScanType=rx.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")})),i.appendChild(o),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&sO.hasPermissions().then((function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)})).catch((function(e){t.persistedDataManager.setHasPermission(!1)}))},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Vx.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case Vx.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Vx.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Vx.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Jx,this.cameraScanImage.alt=mx.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Qx,this.fileScanImage.alt=mx.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return cO.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return cO.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();function vO(){const e=(0,t.useRef)(),[n,r]=(0,t.useState)(""),i=pe();return(0,Va.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-5",children:(0,Va.jsxs)("div",{className:"bg-white shadow-xl rounded-2xl p-6 w-full max-w-md space-y-4",children:[(0,Va.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-700",children:"Capture the QR code on your identification card"}),(0,Va.jsx)("div",{className:"w-full h-64 bg-gray-200 flex items-center justify-center text-gray-500 rounded-lg",children:"Not Available"}),(0,Va.jsx)("input",{type:"file",accept:"image/*",ref:e,className:"hidden",onChange:e=>{var t;e.target.files.length&&(r(""),t=e.target.files[0],new qx("qr-temp-scanner").scanFile(t,!1).then((e=>{i("/ocr-reader",{state:{qrText:e}})})).catch((()=>{r("Invalid QR. Please try again.")})))}}),(0,Va.jsx)("button",{onClick:()=>e.current.click(),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300",children:"Click to choose an image with QR Code"}),n&&(0,Va.jsx)("p",{className:"text-red-500 text-center",children:n}),(0,Va.jsx)("div",{id:"qr-temp-scanner",className:"hidden"})]})})}var yO=n(1362),_O=n.n(yO);function EO(){const e=pe(),n=de(),{qrText:r}=n.state||{},i=(0,t.useRef)(),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(""),[l,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),[_,E]=(0,t.useState)(""),[b,w]=(0,t.useState)("");(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);f(t.userid)}catch(u){console.error("Error decoding token:",u.message)}}),[]),(0,t.useEffect)((()=>{if(r){const e=r.split("|");g(e[0]),y(e[2]),E(e[3].substring(0,2)+"/"+e[3].substring(2,4)+"/"+e[3].substring(4,8)),w(e[5])}}),[r]);(0,t.useEffect)((()=>{if(o){const t=/\b(\d{2}\/\d{2}\/\d{4})\b/,n=o.match(t),r=n?n[0]:"Kh\xf4ng t\xecm th\u1ea5y ng\xe0y c\u1ea5p",i=/(IDVNM[^\n]+\n[^\n]+\n[^\n]+)/,s=o.match(i);if((s?s[0].trim():"Kh\xf4ng t\xecm th\u1ea5y MRZ").includes(m)){console.log(" C\xf3 ch\u1ee9a d\xe3y s\u1ed1 trong MRZ");(async t=>{try{const n=await Pg.post("users/verify-citizen",t,{headers:{"Content-Type":"application/json"},authRequired:!0});return!0===n.result&&Yg().fire({title:"Congratulations! ".concat(n.message),text:"You can now access all the features of the application.",confirmButtonText:"Ok",customClass:{confirmButton:"swal-confirm-button"}}).then((t=>{t.isConfirmed&&e("/profile-page")})),n.data}catch(u){u.response&&Jt.error(u.response.data.message)}})({userId:p,ciCode:m,fullName:v,birthDate:_,address:b,startDate:r})}else Jt.warning("Please try again with another image!")}}),[o]);return(0,Va.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-5",children:(0,Va.jsxs)("div",{className:"bg-white shadow-xl rounded-2xl p-6 w-full max-w-md space-y-4",children:[(0,Va.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-700",children:"Capture the QR code on the back of your ID card"}),(0,Va.jsx)("div",{className:"w-full h-64 bg-gray-200 flex items-center justify-center text-gray-500 rounded-lg",children:a?(0,Va.jsx)("img",{src:a,alt:"Ch\u1ecdn \u1ea3nh",className:"object-contain max-h-full"}):(0,Va.jsx)("p",{children:"Not Available"})}),(0,Va.jsx)("input",{type:"file",accept:"image/*",ref:i,className:"hidden",onChange:e=>{var t;e.target.files.length&&(t=e.target.files[0],c(URL.createObjectURL(t)),s(""),h(""),d(!0),_O().recognize(t,"eng+vie",{logger:()=>{}}).then((e=>{let{data:{text:t}}=e;s(t),d(!1)})).catch((()=>{h("Invalid QR Code"),d(!1)})))}}),(0,Va.jsx)("button",{onClick:()=>i.current.click(),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300",children:"Click to choose an image with QR Code"}),l&&(0,Va.jsx)("p",{className:"text-blue-500 text-center",children:"Pending..."}),u&&(0,Va.jsx)("p",{className:"text-red-500 text-center",children:u})]})})}const bO=e=>{let{username:n,roomId:r,isCreator:i}=e;const o=(0,t.useRef)(null),s=(0,t.useRef)(null),[a,c]=(0,t.useState)(new Map),[l,d]=(0,t.useState)(!0),[h,p]=(0,t.useState)(!0),[f,m]=(0,t.useState)(new Map),[g,v]=(0,t.useState)(null),[y,_]=(0,t.useState)(new Map),E=(0,t.useRef)(null),b=(0,t.useRef)({}),[w,S]=(0,t.useState)(!1),[A,C]=(0,t.useState)([]),[T,R]=(0,t.useState)(null),[I,x]=(0,t.useState)(!1),[O,N]=(0,t.useState)({id:"",name:"",price:0,imageUrl:"",link:""}),[D,k]=(0,t.useState)(""),[P,L]=(0,t.useState)([]),[M,j]=(0,t.useState)(""),U=()=>{var e;if(M.trim()&&(null===(e=E.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN){const e={type:"comment",content:M,timestamp:Date.now()};E.current.send(JSON.stringify(e)),j(""),console.log("".concat(n," sent comment: ").concat(M))}};(0,t.useEffect)((()=>{let e,t=!0,a=0;const l=()=>{E.current=new WebSocket("wss://be-pjhk4.onrender.com/signaling?roomId=".concat(r,"&username=").concat(n,"&isCreator=").concat(i)),E.current.onopen=()=>{t&&(console.log("".concat(n," WebSocket connected for room ").concat(r)),a=0,E.current.send(JSON.stringify({id:n,type:"join",roomId:r})),console.log("".concat(n," in room ").concat(r," sending getRoomInfo request")),E.current.send(JSON.stringify({type:"getRoomInfo",roomId:r})),e=setInterval((()=>{t&&!g&&E.current.readyState===WebSocket.OPEN?(console.log("".concat(n," in room ").concat(r," retrying to get room info...")),E.current.send(JSON.stringify({type:"getRoomInfo",roomId:r}))):g&&(console.log("".concat(n," in room ").concat(r," received streamerId: ").concat(g,", stopping retry")),clearInterval(e))}),500))},E.current.onmessage=e=>{if(t)try{const t=JSON.parse(e.data);if(console.log("Streamer ".concat(n," in room ").concat(r," received message:"),t),"roomInfo"===t.type)return console.log("Streamer ".concat(n," in room ").concat(r," received roomInfo: Streamer is ").concat(t.streamerId)),void v(t.streamerId);var i,a;if("stopLive"===t.type)return console.log("Streamer ".concat(n," received stopLive in room ").concat(r)),null!==(i=o.current)&&void 0!==i&&i.srcObject&&(o.current.srcObject.getTracks().forEach((e=>e.stop())),o.current.srcObject=null),null!==(a=s.current)&&void 0!==a&&a.srcObject&&(s.current.srcObject.getTracks().forEach((e=>e.stop())),s.current.srcObject=null),Object.entries(b.current).forEach((e=>{let[t,n]=e;return n.close()})),b.current={},E.current.close(),c(new Map),m(new Map),v(null),C([]),R(null),void _(new Map);const l=t.id||t.target;if(l&&"string"!==typeof l)return void console.warn("Invalid peerId: ".concat(l,", message:"),t);"existingUsers"===t.type?(console.log("Streamer ".concat(n," in room ").concat(r," received existing users: ").concat(t.users)),t.users.forEach((e=>{e===n||b.current[e]||d(e,!0)}))):"join"===t.type&&l&&!b.current[l]?(console.log("Streamer ".concat(n," in room ").concat(r," initiating connection with new peer: ").concat(l)),d(l,!0),E.current.readyState===WebSocket.OPEN&&(console.log("".concat(n," in room ").concat(r," sending getRoomInfo request due to new user join")),E.current.send(JSON.stringify({type:"getRoomInfo",roomId:r})))):"leave"===t.type?(console.log("Streamer ".concat(n," in room ").concat(r," received leave from peer: ").concat(l)),c((e=>{const t=new Map(e);return t.delete(l),t})),m((e=>{const t=new Map(e);return t.delete(l),t})),_((e=>{const t=new Map(e);return t.delete(l),t})),b.current[l]&&(b.current[l].close(),delete b.current[l])):"status"===t.type?m((e=>{var n,r,i,o;const s=new Map(e);return s.set(l,{micEnabled:void 0!==t.micEnabled?t.micEnabled:null===(n=null===(r=s.get(l))||void 0===r?void 0:r.micEnabled)||void 0===n||n,cameraEnabled:void 0!==t.cameraEnabled?t.cameraEnabled:null===(i=null===(o=s.get(l))||void 0===o?void 0:o.cameraEnabled)||void 0===i||i}),s})):"products"===t.type?(console.log("Streamer ".concat(n," in room ").concat(r," received products:"),t.products),C(t.products||[])):"pinnedProduct"===t.type?(console.log("Streamer ".concat(n," in room ").concat(r," received pinned product:"),t.product),R(t.product)):"unpinProduct"===t.type?(console.log("Streamer ".concat(n," in room ").concat(r," unpinned product")),R(null)):"raisedHands"===t.type?(console.log("Streamer ".concat(n," in room ").concat(r," received raised hands:"),t.raisedHands),_(new Map(Object.entries(t.raisedHands)))):"comments"===t.type?L(t.comments||[]):"comment"===t.type?L((e=>[...e,{username:t.username,content:t.content,timestamp:t.timestamp}])):l&&h(l,t)}catch(eU){console.error("Error parsing message:",eU)}},E.current.onerror=e=>{console.error("WebSocket error in room ".concat(r,":"),e),a<5?(console.log("Retrying WebSocket connection for ".concat(n," in room ").concat(r,", attempt ").concat(a+1)),setTimeout(l,1e3),a++):console.error("Max WebSocket retries reached for ".concat(n," in room ").concat(r))},E.current.onclose=()=>{console.log("".concat(n," WebSocket closed in room ").concat(r)),a<5?(console.log("Retrying WebSocket connection for ".concat(n," in room ").concat(r,", attempt ").concat(a+1)),setTimeout(l,1e3),a++):console.error("Max WebSocket retries reached for ".concat(n," in room ").concat(r))};const d=function(e){var t;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(b.current[e])return void console.log("RTCPeerConnection already exists for peerId: ".concat(e," in room ").concat(r));const s=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",username:"your-email@example.com",credential:"your-password"}]});if(null!==(t=o.current)&&void 0!==t&&t.srcObject){o.current.srcObject.getTracks().forEach((t=>{console.log("Streamer ".concat(n," adding track to ").concat(e," in room ").concat(r,": ").concat(t.kind)),s.addTrack(t,o.current.srcObject)}))}else console.warn("No local stream available to add tracks for ".concat(e," in room ").concat(r));s.onicecandidate=t=>{t.candidate&&E.current.readyState===WebSocket.OPEN&&(console.log("".concat(n," sending ICE candidate to ").concat(e," in room ").concat(r,":"),t.candidate),E.current.send(JSON.stringify({candidate:t.candidate,id:n,target:e})))},s.ontrack=t=>{console.log("Streamer ".concat(n," in room ").concat(r," received stream from ").concat(e,":"),t.streams[0].getTracks().map((e=>e.kind))),c((n=>{const r=new Map(n);return r.set(e,t.streams[0]),r}))};let a=!1;s.oniceconnectionstatechange=()=>{console.log("".concat(n," ICE connection state with ").concat(e," in room ").concat(r,": ").concat(s.iceConnectionState)),"disconnected"===s.iceConnectionState||"failed"===s.iceConnectionState?(c((t=>{const n=new Map(t);return n.delete(e),n})),m((t=>{const n=new Map(t);return n.delete(e),n})),_((t=>{const n=new Map(t);return n.delete(e),n})),delete b.current[e],console.log("Peer ".concat(e," disconnected in room ").concat(r)),a=!1,setTimeout((()=>{b.current[e]||(console.log("Re-initiating connection with ".concat(e," in room ").concat(r," after disconnection")),d(e,!0))}),2e3)):"connected"===s.iceConnectionState&&(console.log("Connection successfully established with ".concat(e," in room ").concat(r)),a=!0)},s.onnegotiationneeded=()=>{"stable"!==s.signalingState||a?console.log("".concat(n," in room ").concat(r," onnegotiationneeded skipped for ").concat(e,", signalingState: ").concat(s.signalingState,", isConnected: ").concat(a)):(console.log("".concat(n," in room ").concat(r," onnegotiationneeded triggered for ").concat(e,", sending offer")),u(e,!1))},s.pendingSignals=[],s.pendingCandidates=[],b.current[e]=s,i&&"stable"===s.signalingState&&!a&&u(e,!1)},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=b.current[e];if(!i)return void console.error("No RTCPeerConnection found for peerId: ".concat(e," in room ").concat(r));if("stable"!==i.signalingState)return void console.warn("Cannot send offer to ".concat(e,", signalingState is ").concat(i.signalingState));const o={offerToReceiveAudio:!0,offerToReceiveVideo:!0,iceRestart:t};i.createOffer(o).then((e=>i.setLocalDescription(e))).then((()=>{E.current.readyState===WebSocket.OPEN&&(console.log("".concat(n," sending offer to ").concat(e," in room ").concat(r,":"),i.localDescription),E.current.send(JSON.stringify({sdp:i.localDescription,id:n,target:e})))})).catch((e=>console.error("Offer error:",e)))},h=(e,t)=>{let i=b.current[e];if(!i)return console.log("Buffering signal for peerId: ".concat(e," in room ").concat(r,", creating new RTCPeerConnection")),d(e,!0),i=b.current[e],void i.pendingSignals.push(t);if(t.sdp){if("answer"===t.sdp.type){if(console.log("".concat(n," received answer from ").concat(e," in room ").concat(r,":"),t.sdp),"have-local-offer"!==i.signalingState)return void console.warn("Cannot set remote answer, signalingState is ".concat(i.signalingState));i.setRemoteDescription(new RTCSessionDescription(t.sdp)).then((()=>{console.log("".concat(n," set remote description (answer) from ").concat(e," in room ").concat(r)),i.pendingCandidates&&i.pendingCandidates.length>0&&(console.log("Applying ".concat(i.pendingCandidates.length," pending candidates for ").concat(e," in room ").concat(r)),i.pendingCandidates.forEach((t=>{i.addIceCandidate(new RTCIceCandidate(t)).catch((t=>console.error("Add buffered ICE candidate error for ".concat(e," in room ").concat(r,":"),t)))})),i.pendingCandidates=[])})).catch((e=>console.error("Set remote description error:",e)))}}else t.candidate&&(console.log("".concat(n," received ICE candidate from ").concat(e," in room ").concat(r,":"),t.candidate),i.remoteDescription?i.addIceCandidate(new RTCIceCandidate(t.candidate)).catch((t=>console.error("Add ICE candidate error for ".concat(e," in room ").concat(r,":"),t))):(console.log("".concat(n," buffering ICE candidate from ").concat(e," in room ").concat(r)),i.pendingCandidates=i.pendingCandidates||[],i.pendingCandidates.push(t.candidate)))}};return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((e=>{if(t){console.log("".concat(n," local stream acquired in room ").concat(r,":"),e.getTracks().map((e=>e.kind))),o.current.srcObject=e;const t=e.clone();console.log("".concat(n," cloned local stream for extra video in room ").concat(r,":"),t.getTracks().map((e=>e.kind))),s.current&&(s.current.srcObject=t),l()}})).catch((e=>{console.error("Error accessing media devices in room ".concat(r,":"),e),alert("Error accessing media devices: ".concat(e.message))})),()=>{var i,a;t=!1,clearInterval(e),E.current&&E.current.readyState===WebSocket.OPEN&&(E.current.close(),console.log("".concat(n," WebSocket closed in cleanup in room ").concat(r))),Object.entries(b.current).forEach((e=>{let[t,n]=e;console.log("Closing RTCPeerConnection for ".concat(t," in room ").concat(r)),n.close()})),b.current={},null!==(i=s.current)&&void 0!==i&&i.srcObject&&(s.current.srcObject.getTracks().forEach((e=>e.stop())),s.current.srcObject=null),null!==(a=o.current)&&void 0!==a&&a.srcObject&&(o.current.srcObject.getTracks().forEach((e=>e.stop())),o.current.srcObject=null)}}),[r,n,i]);const B=[...a.entries()].sort(((e,t)=>{let[n]=e,[r]=t;const i=y.get(n)||!1,o=y.get(r)||!1;return i&&!o?-1:!i&&o?1:0}));return(0,Va.jsxs)("div",{className:"flex flex-col h-screen bg-gray-900 text-white mt-[75px]",children:[(0,Va.jsxs)("div",{className:"flex flex-1 overflow-hidden ",children:[(0,Va.jsxs)("div",{className:"w-1/4 flex flex-col p-4 overflow-y-auto",children:[(0,Va.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Participants"}),B.map((e=>{let[t,n]=e;const r=f.get(t)||{micEnabled:!0,cameraEnabled:!0},i=y.get(t)||!1;return(0,Va.jsxs)("div",{className:"mb-4 relative",children:[(0,Va.jsx)("video",{ref:e=>{e&&e.srcObject!==n&&(e.srcObject=n,console.log("Assigned stream to video for ".concat(t)))},autoPlay:!0,playsInline:!0,className:"w-full rounded-md border border-gray-700"}),!r.cameraEnabled&&(0,Va.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 text-white rounded-md",children:"Camera Off"}),(0,Va.jsxs)("div",{className:"text-sm mt-1",children:[(0,Va.jsx)("span",{className:"mr-2",children:t}),i&&(0,Va.jsx)("span",{className:"text-yellow-400 mr-2",children:"\u270b"}),(0,Va.jsxs)("span",{className:"text-gray-400",children:["Mic: ",r.micEnabled?"On":"Off"," | Camera: ",r.cameraEnabled?"On":"Off"]})]})]},t)}))]}),(0,Va.jsxs)("div",{className:"w-full h-[96%] flex flex-col p-4",children:[(0,Va.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Main Video"}),(0,Va.jsxs)("div",{className:"relative h-[95%]",children:[(0,Va.jsx)("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover rounded-md border border-gray-700"}),!h&&(0,Va.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 text-white rounded-md",children:"Camera Off"}),(0,Va.jsxs)("div",{className:"absolute bottom-2 right-4 w-1/4 flex flex-col",children:[(0,Va.jsx)("div",{className:"max-h-1/3 overflow-hidden",children:P.map(((e,t)=>(0,Va.jsxs)("div",{className:"text-white text-sm mb-1 p-1 bg-gray-800 bg-opacity-25 rounded-lg animate-slide-up",style:{animation:"slide-up 5s linear"},children:[(0,Va.jsxs)("span",{className:"font-semibold",children:[e.username,":"]})," ",e.content]},t)))}),(0,Va.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,Va.jsx)("input",{type:"text",value:M,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&U(),placeholder:"Say something...",className:"w-full p-2 text-sm text-white bg-gray-700 border border-gray-600 rounded-l-md \r focus:outline-none   placeholder-gray-400"}),(0,Va.jsx)("button",{onClick:U,className:"bg-gray-700 text-white text-sm px-4 py-[9px] rounded-r-md hover:border-gray-600 transition-colors duration-200",children:"Send"})]})]})]}),(0,Va.jsxs)("div",{className:"text-sm mt-2",children:[(0,Va.jsxs)("span",{className:"mr-2",children:[n," (You)"]}),(0,Va.jsxs)("span",{className:"text-gray-400",children:["Mic: ",l?"On":"Off"," | Camera: ",h?"On":"Off"]})]})]})]}),(0,Va.jsxs)("div",{className:"flex justify-center gap-4 p-4 bg-gray-800",children:[(0,Va.jsx)("button",{onClick:()=>x(!0),className:"text-white bg-[#32c36c] hover:bg-[#2aa85e] focus:ring-4 \r focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-all",children:"Add New Product"}),0===A.length?(0,Va.jsx)("p",{className:"flex items-center",children:"No products available"}):(0,Va.jsxs)("div",{className:"grid grid-cols-3 gap-4 w-1/2",children:[(0,Va.jsx)("button",{onClick:()=>S(!w),className:"text-white bg-[#32c36c] hover:bg-[#2aa85e] focus:ring-4 \r focus:outline-none focus:ring-green-300 font-medium w-[150px] rounded-lg text-sm px-5 py-2.5 text-center transition-all",type:"button",children:"List Product"}),w&&(0,Va.jsx)("div",{id:"default-modal",tabIndex:"-1","aria-hidden":"true",className:"overflow-y-auto overflow-x-hidden fixed top-0 left-0 right-0 z-50 flex justify-center items-center w-full h-screen bg-black/50",children:(0,Va.jsx)("div",{className:"relative p-4 w-full m-auto top-[75px] max-w-2xl max-h-full",children:(0,Va.jsxs)("div",{className:"relative bg-white rounded-lg shadow-sm dark:bg-gray-700 flex flex-col items-center",children:[(0,Va.jsx)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b border-gray-200 dark:border-gray-600 w-full",children:(0,Va.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Product List"})}),(0,Va.jsx)("div",{className:"overflow-y-auto max-h-[500px] w-full p-4",children:A.map((e=>(0,Va.jsxs)("div",{className:"relative w-full rounded-md overflow-hidden mb-2 shadow-sm border border-gray-300",children:[(0,Va.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-40 object-cover"}),(0,Va.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-4 text-white",children:[(0,Va.jsx)("p",{className:"font-semibold",children:e.name}),(0,Va.jsxs)("p",{className:"text-sm",children:["Start Price: $",e.price]}),(0,Va.jsx)("button",{onClick:()=>(e=>{var t;(null===(t=E.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&(console.log("Streamer ".concat(n," in room ").concat(r," sending pinProduct for product ID: ").concat(e)),E.current.send(JSON.stringify({type:"pinProduct",productId:e})))})(e.id),disabled:T&&T.id===e.id,className:"mt-2 w-[150px] py-2 rounded-md ".concat(T&&T.id===e.id?"bg-gray-500":" bg-[#32c36c] "," text-white hover:opacity-80"),children:"Pin Product"})]})]},e.id)))}),(0,Va.jsx)("div",{className:"flex items-center justify-end p-4 border-t border-gray-200 dark:border-gray-600 w-full",children:(0,Va.jsx)("button",{onClick:()=>S(!1),className:"py-2.5 px-5 text-sm font-medium text-gray-900 bg-white rounded-lg border border-gray-200 hover:text-white hover:bg-[#2aa85e] focus:outline-none focus:ring-4 focus:ring-gray-100 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:text-white",children:"Close"})})]})})})]}),(0,Va.jsx)("button",{onClick:()=>{var e,t;if(null===(e=o.current)||void 0===e||!e.srcObject)return void console.error("Cannot toggle mic: local stream is not initialized");const r=o.current.srcObject.getAudioTracks();if(0===r.length)return void console.error("No audio tracks available to toggle");const i=!l;r.forEach((e=>{e.enabled=i,console.log("".concat(n," set mic track ").concat(e.id," to ").concat(i?"enabled":"disabled"))})),d(i),(null===(t=E.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&E.current.send(JSON.stringify({type:"status",id:n,micEnabled:i,cameraEnabled:h}))},className:"px-4 py-2 rounded-md ".concat(l?"bg-red-600":"bg-green-600"," hover:opacity-80"),children:l?"Mute Mic":"Unmute Mic"}),(0,Va.jsx)("button",{onClick:()=>{var e,t,r;if(null===(e=o.current)||void 0===e||!e.srcObject)return void console.error("Cannot toggle camera: local stream is not initialized");const i=!h;o.current.srcObject.getVideoTracks().forEach((e=>{e.enabled=i,console.log("".concat(n," set camera track ").concat(e.id," to ").concat(i?"enabled":"disabled"))})),null!==(t=s.current)&&void 0!==t&&t.srcObject&&s.current.srcObject.getVideoTracks().forEach((e=>{e.enabled=i,console.log("".concat(n," set cloned camera track ").concat(e.id," to ").concat(i?"enabled":"disabled"))})),p(i),(null===(r=E.current)||void 0===r?void 0:r.readyState)===WebSocket.OPEN&&E.current.send(JSON.stringify({type:"status",id:n,micEnabled:l,cameraEnabled:i}))},className:"px-4 py-2 rounded-md ".concat(h?"bg-red-600":"bg-green-600"," hover:opacity-80"),children:h?"Stop Video":"Start Video"}),i&&(0,Va.jsx)("button",{onClick:()=>{var e,t,a;i?(null!==(e=o.current)&&void 0!==e&&e.srcObject&&(o.current.srcObject.getTracks().forEach((e=>{e.stop(),console.log("".concat(n," stopped track ").concat(e.id))})),o.current.srcObject=null),null!==(t=s.current)&&void 0!==t&&t.srcObject&&(s.current.srcObject.getTracks().forEach((e=>{e.stop(),console.log("".concat(n," stopped cloned track ").concat(e.id))})),s.current.srcObject=null),(null===(a=E.current)||void 0===a?void 0:a.readyState)===WebSocket.OPEN&&(E.current.send(JSON.stringify({type:"stopLive",roomId:r})),E.current.close(),console.log("".concat(n," sent stopLive message and closed WebSocket in room ").concat(r))),Object.entries(b.current).forEach((e=>{let[t,i]=e;i.close(),console.log("".concat(n," closed RTCPeerConnection with ").concat(t," in room ").concat(r))})),b.current={},c(new Map),m(new Map),v(null),C([]),R(null),_(new Map),console.log("".concat(n," stopped live stream and cleared all states in room ").concat(r))):console.log("".concat(n," is not the creator, cannot stop live"))},className:"px-4 py-2 bg-red-600 rounded-md hover:bg-red-700",children:"End Meeting"})]}),I&&(0,Va.jsxs)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-lg shadow-lg text-black",children:[(0,Va.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Product"}),(0,Va.jsxs)("div",{className:"mb-2",children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Product ID: "}),(0,Va.jsx)("input",{type:"text",value:O.id,onChange:e=>N(u(u({},O),{},{id:e.target.value})),className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Va.jsxs)("div",{className:"mb-2",children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Product Name: "}),(0,Va.jsx)("input",{type:"text",value:O.name,onChange:e=>N(u(u({},O),{},{name:e.target.value})),className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Va.jsxs)("div",{className:"mb-2",children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Price: "}),(0,Va.jsx)("input",{type:"number",value:O.price,onChange:e=>N(u(u({},O),{},{price:e.target.value})),className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Va.jsxs)("div",{className:"mb-2",children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Image URL: "}),(0,Va.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=URL.createObjectURL(t);k(e),N(u(u({},O),{},{imageUrl:t}))}},className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),D&&(0,Va.jsx)("img",{src:D,alt:"Preview",style:{marginTop:"10px",width:"100px",height:"100px",objectFit:"cover"}})]}),(0,Va.jsxs)("div",{className:"mb-4",children:[(0,Va.jsx)("label",{className:"block text-sm font-medium",children:"Product Link: "}),(0,Va.jsx)("input",{type:"text",value:O.link,onChange:e=>N(u(u({},O),{},{link:e.target.value})),className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Va.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Va.jsx)("button",{onClick:()=>{var e;if(!O.name||!O.price||!O.id)return void alert("Please fill in all required fields (ID, Name, Price).");const t={type:"addProduct",id:O.id,name:O.name,price:parseFloat(O.price),imageUrl:D||"https://via.placeholder.com/150",link:O.link||"#"};(null===(e=E.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?(console.log("Streamer ".concat(n," in room ").concat(r," sending addProduct:"),t),E.current.send(JSON.stringify(t)),N({id:"",name:"",price:0,imageUrl:"",link:""}),k(""),x(!1)):console.error("WebSocket is not open for ".concat(n," in room ").concat(r))},className:"bg-[#32c36c] hover:bg-[#2aa85e] text-white px-4 py-2 rounded-md",children:"Add Product"}),(0,Va.jsx)("button",{onClick:()=>{x(!1),k("")},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"})]})]}),(0,Va.jsx)("div",{className:"h-[80px]"}),T&&(0,Va.jsxs)("div",{className:"absolute top-14 right-4 bg-white p-4 rounded-lg shadow-lg text-black",children:[(0,Va.jsx)("h4",{className:"font-semibold",children:"Pinned Product"}),(0,Va.jsx)("img",{src:T.imageUrl,alt:T.name,className:"w-12 h-12 object-cover rounded-md mt-2"}),(0,Va.jsx)("p",{className:"font-semibold",children:T.name}),(0,Va.jsxs)("p",{children:["Price: $",T.price]}),(0,Va.jsx)("button",{onClick:()=>{var e;(null===(e=E.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&(console.log("Streamer ".concat(n," in room ").concat(r," sending unpinProduct")),E.current.send(JSON.stringify({type:"unpinProduct"})))},className:"mt-2 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",children:"Unpin"})]})]})},wO=e=>{var n,r,i,o,s,a;let{username:c,roomId:l,isCreator:d}=e;const u=(0,t.useRef)(null),[h,p]=(0,t.useState)(new Map),[f,m]=(0,t.useState)(!0),[g,v]=(0,t.useState)(!0),[y,_]=(0,t.useState)(new Map),[E,b]=(0,t.useState)(null),[w,S]=(0,t.useState)(!1),A=(0,t.useRef)(null),C=(0,t.useRef)({}),[T,R]=(0,t.useState)([]),[I,x]=(0,t.useState)(null),[O,N]=(0,t.useState)([]),[D,k]=(0,t.useState)(""),P=()=>{var e;if(D.trim()&&(null===(e=A.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN){const e={type:"comment",content:D,timestamp:Date.now()};A.current.send(JSON.stringify(e)),k(""),console.log("".concat(c," sent comment: ").concat(D))}};(0,t.useEffect)((()=>{let e,t=!0,n=0;const r=()=>{A.current=new WebSocket("wss://be-pjhk4.onrender.com/signaling?roomId=".concat(l,"&username=").concat(c,"&isCreator=").concat(d));(()=>{const i=e=>{var t;if(C.current[e])return void console.log("RTCPeerConnection already exists for peerId: ".concat(e," in room ").concat(l));const n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",username:"your-email@example.com",credential:"your-password"}]});if(null!==(t=u.current)&&void 0!==t&&t.srcObject){u.current.srcObject.getTracks().forEach((t=>{console.log("Viewer ".concat(c," adding track to ").concat(e," in room ").concat(l,": ").concat(t.kind)),n.addTrack(t,u.current.srcObject)}))}else console.warn("No local stream available to add tracks for ".concat(e," in room ").concat(l));n.onicecandidate=t=>{t.candidate&&A.current.readyState===WebSocket.OPEN&&(console.log("".concat(c," sending ICE candidate to ").concat(e," in room ").concat(l,":"),t.candidate),A.current.send(JSON.stringify({candidate:t.candidate,id:c,target:e})))},n.ontrack=t=>{console.log("Viewer ".concat(c," in room ").concat(l," received stream from ").concat(e,":"),t.streams[0].getTracks().map((e=>e.kind))),p((n=>{const r=new Map(n);return r.set(e,t.streams[0]),r}))};let r=!1;n.oniceconnectionstatechange=()=>{console.log("".concat(c," ICE connection state with ").concat(e," in room ").concat(l,": ").concat(n.iceConnectionState)),"disconnected"===n.iceConnectionState||"failed"===n.iceConnectionState?(p((t=>{const n=new Map(t);return n.delete(e),n})),_((t=>{const n=new Map(t);return n.delete(e),n})),delete C.current[e],console.log("Peer ".concat(e," disconnected in room ").concat(l)),r=!1,setTimeout((()=>{C.current[e]||(console.log("Re-initiating connection with ".concat(e," in room ").concat(l," after disconnection")),i(e))}),2e3)):"connected"===n.iceConnectionState&&(console.log("Connection successfully established with ".concat(e," in room ").concat(l)),r=!0)},n.onnegotiationneeded=()=>{console.log("".concat(c," in room ").concat(l," onnegotiationneeded triggered for ").concat(e,", skipping offer as Viewer"))},n.pendingSignals=[],n.pendingCandidates=[],C.current[e]=n};A.current.onopen=()=>{t&&(console.log("".concat(c," WebSocket connected for room ").concat(l)),n=0,A.current.send(JSON.stringify({id:c,type:"join",roomId:l})),console.log("".concat(c," in room ").concat(l," sending getRoomInfo request")),A.current.send(JSON.stringify({type:"getRoomInfo",roomId:l})),e=setInterval((()=>{t&&!E&&A.current.readyState===WebSocket.OPEN?(console.log("".concat(c," in room ").concat(l," retrying to get room info...")),A.current.send(JSON.stringify({type:"getRoomInfo",roomId:l}))):E&&(console.log("".concat(c," in room ").concat(l," received streamerId: ").concat(E,", stopping retry")),clearInterval(e))}),500))},A.current.onmessage=e=>{if(t)try{const t=JSON.parse(e.data);if(console.log("Viewer ".concat(c," in room ").concat(l," received message:"),t),"roomInfo"===t.type)return console.log("Viewer ".concat(c," in room ").concat(l," received roomInfo: Streamer is ").concat(t.streamerId)),void b(t.streamerId);var n;if("stopLive"===t.type)return console.log("Viewer ".concat(c," received stopLive in room ").concat(l)),null!==(n=u.current)&&void 0!==n&&n.srcObject&&(u.current.srcObject.getTracks().forEach((e=>e.stop())),u.current.srcObject=null),Object.entries(C.current).forEach((e=>{let[t,n]=e;return n.close()})),C.current={},A.current.close(),p(new Map),_(new Map),b(null),R([]),void x(null);const r=t.id||t.target;if(r&&"string"!==typeof r)return void console.warn("Invalid peerId: ".concat(r,", message:"),t);"existingUsers"===t.type?(console.log("Viewer ".concat(c," in room ").concat(l," received existing users: ").concat(t.users)),t.users.forEach((e=>{e===c||C.current[e]||i(e)})),A.current.readyState===WebSocket.OPEN&&(console.log("".concat(c," in room ").concat(l," sending getRoomInfo request after receiving existing users")),A.current.send(JSON.stringify({type:"getRoomInfo",roomId:l})))):"join"===t.type&&r&&!C.current[r]?(console.log("Viewer ".concat(c," in room ").concat(l," initiating connection with new peer: ").concat(r)),i(r),A.current.readyState===WebSocket.OPEN&&(console.log("".concat(c," in room ").concat(l," sending getRoomInfo request due to new user join")),A.current.send(JSON.stringify({type:"getRoomInfo",roomId:l})))):"leave"===t.type?(console.log("Viewer ".concat(c," in room ").concat(l," received leave from peer: ").concat(r)),p((e=>{const t=new Map(e);return t.delete(r),t})),_((e=>{const t=new Map(e);return t.delete(r),t})),C.current[r]&&(C.current[r].close(),delete C.current[r])):"status"===t.type?_((e=>{var n,i,o,s;const a=new Map(e);return a.set(r,{micEnabled:void 0!==t.micEnabled?t.micEnabled:null===(n=null===(i=a.get(r))||void 0===i?void 0:i.micEnabled)||void 0===n||n,cameraEnabled:void 0!==t.cameraEnabled?t.cameraEnabled:null===(o=null===(s=a.get(r))||void 0===s?void 0:s.cameraEnabled)||void 0===o||o}),a})):"products"===t.type?(console.log("Viewer ".concat(c," in room ").concat(l," received products:"),t.products),R(t.products||[])):"pinnedProduct"===t.type?(console.log("Viewer ".concat(c," in room ").concat(l," received pinned product:"),t.product),x(t.product)):"unpinProduct"===t.type?(console.log("Viewer ".concat(c," in room ").concat(l," unpinned product")),x(null)):"comments"===t.type?N(t.comments||[]):"comment"===t.type?N((e=>[...e,{username:t.username,content:t.content,timestamp:t.timestamp}])):r&&((e,t)=>{let n=C.current[e];if(!n)return console.log("Buffering signal for peerId: ".concat(e," in room ").concat(l,", creating new RTCPeerConnection")),i(e),n=C.current[e],void n.pendingSignals.push(t);if(t.sdp){if("offer"===t.sdp.type){if(console.log("".concat(c," received offer from ").concat(e," in room ").concat(l,":"),t.sdp),"stable"!==n.signalingState)return void console.warn("Cannot set remote offer, signalingState is ".concat(n.signalingState));n.setRemoteDescription(new RTCSessionDescription(t.sdp)).then((()=>(console.log("".concat(c," set remote description from ").concat(e," in room ").concat(l)),n.createAnswer()))).then((e=>n.setLocalDescription(e))).then((()=>{A.current.readyState===WebSocket.OPEN&&(console.log("".concat(c," sending answer to ").concat(e," in room ").concat(l,":"),n.localDescription),A.current.send(JSON.stringify({sdp:n.localDescription,id:c,target:e}))),n.pendingCandidates&&n.pendingCandidates.length>0&&(console.log("Applying ".concat(n.pendingCandidates.length," pending candidates for ").concat(e," in room ").concat(l)),n.pendingCandidates.forEach((t=>{n.addIceCandidate(new RTCIceCandidate(t)).catch((t=>console.error("Add buffered ICE candidate error for ".concat(e," in room ").concat(l,":"),t)))})),n.pendingCandidates=[])})).catch((e=>console.error("Answer error:",e)))}else if("answer"===t.sdp.type){if(console.log("".concat(c," received answer from ").concat(e," in room ").concat(l,":"),t.sdp),"have-local-offer"!==n.signalingState)return void console.warn("Cannot set remote answer, signalingState is ".concat(n.signalingState));n.setRemoteDescription(new RTCSessionDescription(t.sdp)).then((()=>{console.log("".concat(c," set remote description (answer) from ").concat(e," in room ").concat(l)),n.pendingCandidates&&n.pendingCandidates.length>0&&(console.log("Applying ".concat(n.pendingCandidates.length," pending candidates for ").concat(e," in room ").concat(l)),n.pendingCandidates.forEach((t=>{n.addIceCandidate(new RTCIceCandidate(t)).catch((t=>console.error("Add buffered ICE candidate error for ".concat(e," in room ").concat(l,":"),t)))})),n.pendingCandidates=[])})).catch((e=>console.error("Set remote description error:",e)))}}else t.candidate&&(console.log("".concat(c," received ICE candidate from ").concat(e," in room ").concat(l,":"),t.candidate),n.remoteDescription?n.addIceCandidate(new RTCIceCandidate(t.candidate)).catch((t=>console.error("Add ICE candidate error for ".concat(e," in room ").concat(l,":"),t))):(console.log("".concat(c," buffering ICE candidate from ").concat(e," in room ").concat(l)),n.pendingCandidates=n.pendingCandidates||[],n.pendingCandidates.push(t.candidate)))})(r,t)}catch(eU){console.error("Error parsing message:",eU)}},A.current.onerror=e=>{console.error("WebSocket error in room ".concat(l,":"),e),n<5?(console.log("Retrying WebSocket connection for ".concat(c," in room ").concat(l,", attempt ").concat(n+1)),setTimeout(r,1e3),n++):console.error("Max WebSocket retries reached for ".concat(c," in room ").concat(l))},A.current.onclose=()=>{console.log("".concat(c," WebSocket closed in room ").concat(l)),n<5?(console.log("Retrying WebSocket connection for ".concat(c," in room ").concat(l,", attempt ").concat(n+1)),setTimeout(r,1e3),n++):console.error("Max WebSocket retries reached for ".concat(c," in room ").concat(l))}})()};return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((e=>{t&&(console.log("".concat(c," local stream acquired in room ").concat(l,":"),e.getTracks().map((e=>e.kind))),u.current.srcObject=e,r())})).catch((e=>{console.error("Error accessing media devices in room ".concat(l,":"),e),alert("Error accessing media devices: ".concat(e.message))})),()=>{t=!1,clearInterval(e),A.current&&A.current.readyState===WebSocket.OPEN&&(A.current.close(),console.log("".concat(c," WebSocket closed in cleanup in room ").concat(l))),Object.entries(C.current).forEach((e=>{let[t,n]=e;console.log("Closing RTCPeerConnection for ".concat(t," in room ").concat(l)),n.close()})),C.current={}}}),[l,c,d]);const L=E&&E!==c?h.get(E):null;new Map([...h.entries()].filter((e=>{let[t]=e;return t!==E&&t!==c})));return(0,Va.jsxs)("div",{className:"flex flex-col  h-[90%] bg-gray-900 text-white",children:[(0,Va.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,Va.jsxs)("div",{className:"w-1/3 flex flex-col p-4 overflow-y-auto",children:[(0,Va.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Participants"}),[...h.entries()].map((e=>{let[t,n]=e;if(t===E)return null;const r=y.get(t)||{micEnabled:!0,cameraEnabled:!0};return(0,Va.jsxs)("div",{className:"mb-4 relative",children:[(0,Va.jsx)("video",{ref:e=>{e&&e.srcObject!==n&&(e.srcObject=n,console.log("Assigned stream to video for ".concat(t)))},autoPlay:!0,playsInline:!0,className:"w-full rounded-md border border-gray-700"}),!r.cameraEnabled&&(0,Va.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 text-white rounded-md",children:"Camera Off"}),(0,Va.jsxs)("div",{className:"text-sm mt-1",children:[(0,Va.jsx)("span",{className:"mr-2",children:t}),(0,Va.jsxs)("span",{className:"text-gray-400",children:["Mic: ",r.micEnabled?"On":"Off"," | Camera: ",r.cameraEnabled?"On":"Off"]})]})]},t)})),(0,Va.jsxs)("div",{className:"mb-4 relative",children:[(0,Va.jsx)("video",{ref:u,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-md border border-gray-700"}),!g&&(0,Va.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 text-white rounded-md",children:"Camera Off"}),(0,Va.jsxs)("div",{className:"text-sm mt-1",children:[(0,Va.jsxs)("span",{className:"mr-2",children:[c," (You)"]}),(0,Va.jsxs)("span",{className:"text-gray-400",children:["Mic: ",f?"On":"Off"," | Camera: ",g?"On":"Off"]})]})]})]}),(0,Va.jsxs)("div",{className:"w-2/3 h-[90%] flex flex-col p-4",children:[(0,Va.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Main Video"}),L&&E!==c?(0,Va.jsxs)("div",{className:"relative h-full",children:[(0,Va.jsx)("video",{ref:e=>{e&&e.srcObject!==L&&(e.srcObject=L,console.log("Assigned stream to video for ".concat(E)))},autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover rounded-md border border-gray-700"}),!(null===(n=null===(r=y.get(E))||void 0===r?void 0:r.cameraEnabled)||void 0===n||n)&&(0,Va.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 text-white rounded-md",children:"Camera Off"}),(0,Va.jsxs)("div",{className:"absolute bottom-2 right-4 w-1/4 flex flex-col",children:[(0,Va.jsxs)("div",{className:"max-h-1/2 overflow-hidden",children:[" ",O.map(((e,t)=>(0,Va.jsxs)("div",{className:"text-white text-sm mb-1 p-1 bg-gray-800 bg-opacity-70 rounded-lg animate-slide-up",style:{animation:"slide-up 5s linear"},children:[(0,Va.jsxs)("span",{className:"font-semibold",children:[e.username,":"]})," ",e.content]},t)))]}),(0,Va.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,Va.jsx)("input",{type:"text",value:D,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&P(),placeholder:"Say something...",className:"w-full p-2 text-sm text-white bg-gray-700 border border-gray-600 rounded-l-md \r focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400"}),(0,Va.jsx)("button",{onClick:P,className:"bg-gray-700 text-white text-sm px-4 py-[9px] rounded-r-md hover:border-gray-600 transition-colors duration-200",children:"Send"})]})]}),(0,Va.jsxs)("div",{className:"text-sm mt-2",children:[(0,Va.jsx)("span",{className:"mr-2",children:E}),(0,Va.jsxs)("span",{className:"text-gray-400",children:["Mic: ",null===(i=null===(o=y.get(E))||void 0===o?void 0:o.micEnabled)||void 0===i||i?"On":"Off"," | Camera: ",null===(s=null===(a=y.get(E))||void 0===a?void 0:a.cameraEnabled)||void 0===s||s?"On":"Off"]})]})]}):(0,Va.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:"Waiting for Streamer..."})]})]}),(0,Va.jsxs)("div",{className:"flex justify-center gap-4 p-4 bg-gray-800",children:[(0,Va.jsx)("button",{onClick:()=>{var e,t;if(null===(e=u.current)||void 0===e||!e.srcObject)return void console.error("Cannot toggle mic: local stream is not initialized");const n=u.current.srcObject.getAudioTracks();if(0===n.length)return void console.error("No audio tracks available to toggle");const r=!f;n.forEach((e=>{e.enabled=r,console.log("".concat(c," set mic track ").concat(e.id," to ").concat(r?"enabled":"disabled"))})),m(r),(null===(t=A.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&A.current.send(JSON.stringify({type:"status",id:c,micEnabled:r,cameraEnabled:g}))},className:"px-4 py-2 rounded-md ".concat(f?"bg-red-600":"bg-green-600"," hover:opacity-80"),children:f?"Mute Mic":"Unmute Mic"}),(0,Va.jsx)("button",{onClick:()=>{var e,t;if(null===(e=u.current)||void 0===e||!e.srcObject)return void console.error("Cannot toggle camera: local stream is not initialized");const n=!g;u.current.srcObject.getVideoTracks().forEach((e=>{e.enabled=n,console.log("".concat(c," set camera track ").concat(e.id," to ").concat(n?"enabled":"disabled"))})),v(n),(null===(t=A.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&A.current.send(JSON.stringify({type:"status",id:c,micEnabled:f,cameraEnabled:n}))},className:"px-4 py-2 rounded-md ".concat(g?"bg-red-600":"bg-green-600"," hover:opacity-80"),children:g?"Stop Video":"Start Video"}),(0,Va.jsx)("button",{onClick:()=>{var e;const t=!w;S(t),(null===(e=A.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&(A.current.send(JSON.stringify({type:"raiseHand",id:c,raised:t})),console.log("".concat(c," sent raiseHand: ").concat(t)))},className:"px-4 py-2 rounded-md ".concat(w?"bg-yellow-600":"bg-blue-600"," hover:opacity-80"),children:w?"Lower Hand":"Raise Hand"})]}),I&&(0,Va.jsxs)("div",{className:"absolute top-14 right-4 bg-white p-4 rounded-lg shadow-lg text-black",children:[(0,Va.jsx)("h4",{className:"font-semibold",children:"Pinned Product"}),(0,Va.jsx)("img",{src:I.imageUrl,alt:I.name,className:"w-12 h-12 object-cover rounded-md mt-2"}),(0,Va.jsx)("p",{className:"font-semibold",children:I.name}),(0,Va.jsxs)("p",{children:["Price: $",I.price]}),(0,Va.jsx)("a",{href:I.link,target:"_blank",rel:"noopener noreferrer",className:"mt-2 block text-blue-600 hover:underline",children:"View Product"})]})]})};const SO=function(){const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(null),[a,c]=(0,t.useState)(!1),[l,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{const e=await Pg.get("https://be-pjhk4.onrender.com/api/room-video-call",{headers:{"Content-Type":"application/json"}});0===e.code&&g(null===e||void 0===e?void 0:e.result)})()}),[]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);d(t.username),f(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]);const v=async()=>{r.trim()?(c(!0),s("streamer")):alert("Please enter a Room ID")},y=e=>{r.trim()?(c(!1),s(e)):alert("Please enter a Room ID")};return o?(0,Va.jsxs)("div",{className:"relative h-screen mt-[75px] bg-gray-900",children:[(0,Va.jsx)("button",{onClick:()=>{n(null),i(""),s(null),c(!1)},className:"absolute top-4 right-4 bg-red-600 text-white px-4 py-1 rounded-md hover:bg-red-700 z-10",children:"Logout"}),"streamer"===o?(0,Va.jsx)(bO,{username:u,roomId:r,isCreator:a}):(0,Va.jsx)(wO,{username:u,roomId:r,isCreator:a})]}):(0,Va.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,Va.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[m&&(null===m||void 0===m?void 0:m.length)>0&&(null===m||void 0===m?void 0:m.map((e=>(0,Va.jsxs)("div",{className:"max-w-sm rounded overflow-hidden shadow-lg",children:[(0,Va.jsxs)("div",{className:"px-6 py-4",children:[(0,Va.jsxs)("div",{className:"font-bold text-xl mb-2",children:["Room:",e.id]}),(0,Va.jsx)("p",{className:"text-gray-700 text-base",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptatibus quia, nulla! Maiores et perferendis eaque, exercitationem praesentium nihil."})]}),(0,Va.jsx)("div",{className:"px-6 pt-4 pb-2",children:(0,Va.jsx)("button",{onClick:()=>{return t=e,c(!0),s(t.role),void i(t.id);var t},className:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:"Join"})})]},e.id)))),(0,Va.jsx)("input",{value:u,onChange:e=>h(e.target.value),placeholder:"Enter name",className:"w-full p-2 mb-4 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Va.jsx)("input",{value:r,onChange:e=>i(e.target.value),placeholder:"Enter Room ID",className:"w-full p-2 mb-4 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Va.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Va.jsx)("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Create Room (as Streamer)"}),(0,Va.jsx)("button",{onClick:()=>y("streamer"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Join as Streamer"}),(0,Va.jsx)("button",{onClick:()=>y("viewer"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Join as Viewer"})]})]})})};function AO(e){return e+.5|0}const CO=(e,t,n)=>Math.max(Math.min(e,n),t);function TO(e){return CO(AO(2.55*e),0,255)}function RO(e){return CO(AO(255*e),0,255)}function IO(e){return CO(AO(e/2.55)/100,0,1)}function xO(e){return CO(AO(100*e),0,100)}const OO={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},NO=[..."0123456789ABCDEF"],DO=e=>NO[15&e],kO=e=>NO[(240&e)>>4]+NO[15&e],PO=e=>(240&e)>>4===(15&e);function LO(e){var t=(e=>PO(e.r)&&PO(e.g)&&PO(e.b)&&PO(e.a))(e)?DO:kO;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const MO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jO(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function UO(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function BO(e,t,n){const r=jO(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function FO(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),o=Math.min(t,n,r),s=(i+o)/2;let a,c,l;return i!==o&&(l=i-o,c=s>.5?l/(2-i-o):l/(i+o),a=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,l,i),a=60*a+.5),[0|a,c||0,s]}function VO(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(RO)}function WO(e,t,n){return VO(jO,e,t,n)}function HO(e){return(e%360+360)%360}function zO(e){const t=MO.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?TO(+t[5]):RO(+t[5]));const i=HO(+t[2]),o=+t[3]/100,s=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return VO(BO,e,t,n)}(i,o,s):"hsv"===t[1]?function(e,t,n){return VO(UO,e,t,n)}(i,o,s):WO(i,o,s),{r:n[0],g:n[1],b:n[2],a:r}}const GO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},YO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let KO;function qO(e){KO||(KO=function(){const e={},t=Object.keys(YO),n=Object.keys(GO);let r,i,o,s,a;for(r=0;r<t.length;r++){for(s=a=t[r],i=0;i<n.length;i++)o=n[i],a=a.replace(o,GO[o]);o=parseInt(YO[s],16),e[a]=[o>>16&255,o>>8&255,255&o]}return e}(),KO.transparent=[0,0,0,0]);const t=KO[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const XO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const JO=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,QO=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ZO(e,t,n){if(e){let r=FO(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=WO(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function $O(e,t){return e?Object.assign(t||{},e):e}function eN(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=RO(e[3]))):(t=$O(e,{r:0,g:0,b:0,a:1})).a=RO(t.a),t}function tN(e){return"r"===e.charAt(0)?function(e){const t=XO.exec(e);let n,r,i,o=255;if(t){if(t[7]!==n){const e=+t[7];o=t[8]?TO(e):CO(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?TO(n):CO(n,0,255)),r=255&(t[4]?TO(r):CO(r,0,255)),i=255&(t[6]?TO(i):CO(i,0,255)),{r:n,g:r,b:i,a:o}}}(e):zO(e)}class nN{constructor(e){if(e instanceof nN)return e;const t=typeof e;let n;"object"===t?n=eN(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*OO[e[1]],g:255&17*OO[e[2]],b:255&17*OO[e[3]],a:5===n?17*OO[e[4]]:255}:7!==n&&9!==n||(t={r:OO[e[1]]<<4|OO[e[2]],g:OO[e[3]]<<4|OO[e[4]],b:OO[e[5]]<<4|OO[e[6]],a:9===n?OO[e[7]]<<4|OO[e[8]]:255})),t}(e)||qO(e)||tN(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=$O(this._rgb);return e&&(e.a=IO(e.a)),e}set rgb(e){this._rgb=eN(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(IO(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?LO(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=FO(e),n=t[0],r=xO(t[1]),i=xO(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(IO(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const o=t===i?.5:t,s=2*o-1,a=n.a-r.a,c=((s*a===-1?s:(s+a)/(1+s*a))+1)/2;i=1-c,n.r=255&c*n.r+i*r.r+.5,n.g=255&c*n.g+i*r.g+.5,n.b=255&c*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=QO(IO(e.r)),i=QO(IO(e.g)),o=QO(IO(e.b));return{r:RO(JO(r+n*(QO(IO(t.r))-r))),g:RO(JO(i+n*(QO(IO(t.g))-i))),b:RO(JO(o+n*(QO(IO(t.b))-o))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new nN(this.rgb)}alpha(e){return this._rgb.a=RO(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=AO(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ZO(this._rgb,2,e),this}darken(e){return ZO(this._rgb,2,-e),this}saturate(e){return ZO(this._rgb,1,e),this}desaturate(e){return ZO(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=FO(e);n[0]=HO(n[0]+t),n=WO(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function rN(){}const iN=(()=>{let e=0;return()=>e++})();function oN(e){return null===e||void 0===e}function sN(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function aN(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function cN(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function lN(e,t){return cN(e)?e:t}function dN(e,t){return"undefined"===typeof e?t:e}const uN=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function hN(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function pN(e,t,n,r){let i,o,s;if(sN(e))if(o=e.length,r)for(i=o-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<o;i++)t.call(n,e[i],i);else if(aN(e))for(s=Object.keys(e),o=s.length,i=0;i<o;i++)t.call(n,e[s[i]],s[i])}function fN(e,t){let n,r,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],o=t[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function mN(e){if(sN(e))return e.map(mN);if(aN(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=mN(e[n[i]]);return t}return e}function gN(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function vN(e,t,n,r){if(!gN(e))return;const i=t[e],o=n[e];aN(i)&&aN(o)?yN(i,o,r):t[e]=mN(o)}function yN(e,t,n){const r=sN(t)?t:[t],i=r.length;if(!aN(e))return e;const o=(n=n||{}).merger||vN;let s;for(let a=0;a<i;++a){if(s=r[a],!aN(s))continue;const t=Object.keys(s);for(let r=0,i=t.length;r<i;++r)o(t[r],e,s,n)}return e}function _N(e,t){return yN(e,t,{merger:EN})}function EN(e,t,n){if(!gN(e))return;const r=t[e],i=n[e];aN(r)&&aN(i)?_N(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=mN(i))}const bN={"":e=>e,x:e=>e.x,y:e=>e.y};function wN(e,t){const n=bN[t]||(bN[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function SN(e){return e.charAt(0).toUpperCase()+e.slice(1)}const AN=e=>"undefined"!==typeof e,CN=e=>"function"===typeof e,TN=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const RN=Math.PI,IN=2*RN,xN=IN+RN,ON=Number.POSITIVE_INFINITY,NN=RN/180,DN=RN/2,kN=RN/4,PN=2*RN/3,LN=Math.log10,MN=Math.sign;function jN(e,t,n){return Math.abs(e-t)<n}function UN(e){const t=Math.round(e);e=jN(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(LN(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function BN(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function FN(e,t,n){let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function VN(e){return e*(RN/180)}function WN(e){return e*(180/RN)}function HN(e){if(!cN(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function zN(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*RN&&(o+=IN),{angle:o,distance:i}}function GN(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function YN(e,t){return(e-t+xN)%IN-RN}function KN(e){return(e%IN+IN)%IN}function qN(e,t,n,r){const i=KN(e),o=KN(t),s=KN(n),a=KN(o-i),c=KN(s-i),l=KN(i-o),d=KN(i-s);return i===o||i===s||r&&o===s||a>c&&l<d}function XN(e,t,n){return Math.max(t,Math.min(n,e))}function JN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function QN(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const ZN=(e,t,n,r)=>QN(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),$N=(e,t,n)=>QN(e,n,(r=>e[r][t]>=n));const eD=["push","pop","shift","splice","unshift"];function tD(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(eD.forEach((t=>{delete e[t]})),delete e._chartjs)}function nD(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const rD="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function iD(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n=o,r||(r=!0,rD.call(window,(()=>{r=!1,e.apply(t,n)})))}}const oD=e=>"start"===e?"left":"end"===e?"right":"center",sD=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function aD(e,t,n){const r=t.length;let i=0,o=r;if(e._sorted){const{iScale:s,vScale:a,_parsed:c}=e,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=s.axis,{min:u,max:h,minDefined:p,maxDefined:f}=s.getUserBounds();if(p){if(i=Math.min(ZN(c,d,u).lo,n?r:ZN(t,d,s.getPixelForValue(u)).lo),l){const e=c.slice(0,i+1).reverse().findIndex((e=>!oN(e[a.axis])));i-=Math.max(0,e)}i=XN(i,0,r-1)}if(f){let e=Math.max(ZN(c,s.axis,h,!0).hi+1,n?0:ZN(t,d,s.getPixelForValue(h),!0).hi+1);if(l){const t=c.slice(e-1).findIndex((e=>!oN(e[a.axis])));e+=Math.max(0,t)}o=XN(e,i,r)-i}else o=r-i}return{start:i,count:o}}function cD(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const lD=e=>0===e||1===e,dD=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*IN/n),uD=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*IN/n)+1,hD={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*DN),easeOutSine:e=>Math.sin(e*DN),easeInOutSine:e=>-.5*(Math.cos(RN*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>lD(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>lD(e)?e:dD(e,.075,.3),easeOutElastic:e=>lD(e)?e:uD(e,.075,.3),easeInOutElastic(e){const t=.1125;return lD(e)?e:e<.5?.5*dD(2*e,t,.45):.5+.5*uD(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-hD.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*hD.easeInBounce(2*e):.5*hD.easeOutBounce(2*e-1)+.5};function pD(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function fD(e){return pD(e)?e:new nN(e)}function mD(e){return pD(e)?e:new nN(e).saturate(.5).darken(.1).hexString()}const gD=["x","y","borderWidth","radius","tension"],vD=["color","borderColor","backgroundColor"];const yD=new Map;function _D(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=yD.get(n);return r||(r=new Intl.NumberFormat(e,t),yD.set(n,r)),r}(t,n).format(e)}const ED={values:e=>sN(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),o=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const s=LN(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),_D(e,r,c)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(LN(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?ED.numeric.call(this,e,t,n):""}};var bD={formatters:ED};const wD=Object.create(null),SD=Object.create(null);function AD(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function CD(e,t,n){return"string"===typeof t?yN(AD(e,t),n):yN(AD(e,""),t)}class TD{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>mD(t.backgroundColor),this.hoverBorderColor=(e,t)=>mD(t.borderColor),this.hoverColor=(e,t)=>mD(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return CD(this,e,t)}get(e){return AD(this,e)}describe(e,t){return CD(SD,e,t)}override(e,t){return CD(wD,e,t)}route(e,t,n,r){const i=AD(this,e),o=AD(this,n),s="_"+t;Object.defineProperties(i,{[s]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=o[r];return aN(e)?Object.assign({},t,e):dN(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach((e=>e(this)))}}var RD=new TD({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:vD},numbers:{type:"number",properties:gD}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ID(e,t,n,r,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>r&&(r=o),r}function xD(e,t,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},o=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let s=0;const a=n.length;let c,l,d,u,h;for(c=0;c<a;c++)if(u=n[c],void 0===u||null===u||sN(u)){if(sN(u))for(l=0,d=u.length;l<d;l++)h=u[l],void 0===h||null===h||sN(h)||(s=ID(e,i,o,s,h))}else s=ID(e,i,o,s,u);e.restore();const p=o.length/2;if(p>n.length){for(c=0;c<p;c++)delete i[o[c]];o.splice(0,p)}return s}function OD(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function ND(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function DD(e,t,n,r){kD(e,t,n,r,null)}function kD(e,t,n,r,i){let o,s,a,c,l,d,u,h;const p=t.pointStyle,f=t.rotation,m=t.radius;let g=(f||0)*NN;if(p&&"object"===typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,r,i/2,m,0,0,IN):e.arc(n,r,m,0,IN),e.closePath();break;case"triangle":d=i?i/2:m,e.moveTo(n+Math.sin(g)*d,r-Math.cos(g)*m),g+=PN,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*m),g+=PN,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":l=.516*m,c=m-l,s=Math.cos(g+kN)*c,u=Math.cos(g+kN)*(i?i/2-l:c),a=Math.sin(g+kN)*c,h=Math.sin(g+kN)*(i?i/2-l:c),e.arc(n-u,r-a,l,g-RN,g-DN),e.arc(n+h,r-s,l,g-DN,g),e.arc(n+u,r+a,l,g,g+DN),e.arc(n-h,r+s,l,g+DN,g+RN),e.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*m,d=i?i/2:c,e.rect(n-d,r-c,2*d,2*c);break}g+=kN;case"rectRot":u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+h,r-s),e.lineTo(n+u,r+a),e.lineTo(n-h,r+s),e.closePath();break;case"crossRot":g+=kN;case"cross":u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+u,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"star":u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+u,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s),g+=kN,u=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-u,r-a),e.lineTo(n+u,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"line":s=i?i/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(n-s,r-a),e.lineTo(n+s,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function PD(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function LD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function MD(e){e.restore()}function jD(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function UD(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function BD(e,t,n,r,i){if(i.strikethrough||i.underline){const o=e.measureText(r),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,c=n-o.actualBoundingBoxAscent,l=n+o.actualBoundingBoxDescent,d=i.strikethrough?(c+l)/2:l;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,d),e.lineTo(a,d),e.stroke()}}function FD(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function VD(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=sN(t)?t:[t],a=o.strokeWidth>0&&""!==o.strokeColor;let c,l;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),oN(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),c=0;c<s.length;++c)l=s[c],o.backdrop&&FD(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),oN(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(l,n,r,o.maxWidth)),e.fillText(l,n,r,o.maxWidth),BD(e,n,r,l,o),r+=Number(i.lineHeight);e.restore()}function WD(e,t){const{x:n,y:r,w:i,h:o,radius:s}=t;e.arc(n+s.topLeft,r+s.topLeft,s.topLeft,1.5*RN,RN,!0),e.lineTo(n,r+o-s.bottomLeft),e.arc(n+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,RN,DN,!0),e.lineTo(n+i-s.bottomRight,r+o),e.arc(n+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,DN,0,!0),e.lineTo(n+i,r+s.topRight),e.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-DN,!0),e.lineTo(n+s.topLeft,r)}const HD=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zD=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function GD(e,t){const n=(""+e).match(HD);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const YD=e=>+e||0;function KD(e,t){const n={},r=aN(t),i=r?Object.keys(t):t,o=aN(e)?r?n=>dN(e[n],e[t[n]]):t=>e[t]:()=>e;for(const s of i)n[s]=YD(o(s));return n}function qD(e){return KD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function XD(e){return KD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function JD(e){const t=qD(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function QD(e,t){e=e||{},t=t||RD.font;let n=dN(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=dN(e.style,t.style);r&&!(""+r).match(zD)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:dN(e.family,t.family),lineHeight:GD(dN(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:dN(e.weight,t.weight),string:""};return i.string=function(e){return!e||oN(e.size)||oN(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function ZD(e,t,n,r){let i,o,s,a=!0;for(i=0,o=e.length;i<o;++i)if(s=e[i],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),a=!1),void 0!==n&&sN(s)&&(s=s[n%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function $D(e,t){return Object.assign(Object.create(e),t)}function ek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=uk("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>ek([r,...e],t,i,n)};return new Proxy(o,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>ok(n,r,(()=>function(e,t,n,r){let i;for(const o of t)if(i=uk(rk(o,e),n),"undefined"!==typeof i)return ik(e,i)?lk(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>hk(e).includes(t),ownKeys:e=>hk(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function tk(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:nk(e,r),setContext:t=>tk(e,t,n,r),override:i=>tk(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>ok(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=e;let a=r[t];CN(a)&&s.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let c=t(o,s||r);a.delete(e),ik(e,c)&&(c=lk(i._scopes,i,e,c));return c}(t,a,e,n));sN(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;if("undefined"!==typeof o.index&&r(e))return t[o.index%t.length];if(aN(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const c of n){const n=lk(r,i,e,c);t.push(tk(n,o,s&&s[e],a))}}return t}(t,a,e,s.isIndexable));ik(t,a)&&(a=tk(a,i,o&&o[t],s));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function nk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:CN(n)?n:()=>n,isIndexable:CN(r)?r:()=>r}}const rk=(e,t)=>e?e+SN(t):t,ik=(e,t)=>aN(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function ok(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function sk(e,t,n){return CN(e)?e(t,n):e}const ak=(e,t)=>!0===e?t:"string"===typeof e?wN(t,e):void 0;function ck(e,t,n,r,i){for(const o of t){const t=ak(n,o);if(t){e.add(t);const o=sk(t._fallback,n,i);if("undefined"!==typeof o&&o!==n&&o!==r)return o}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function lk(e,t,n,r){const i=t._rootScopes,o=sk(t._fallback,n,r),s=[...e,...i],a=new Set;a.add(r);let c=dk(a,s,n,o||n,r);return null!==c&&(("undefined"===typeof o||o===n||(c=dk(a,s,o,c,r),null!==c))&&ek(Array.from(a),[""],i,o,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(sN(i)&&aN(n))return n;return i||{}}(t,n,r))))}function dk(e,t,n,r,i){for(;n;)n=ck(e,t,n,r,i);return n}function uk(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function hk(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function pk(e,t,n,r){const{iScale:i}=e,{key:o="r"}=this._parsing,s=new Array(r);let a,c,l,d;for(a=0,c=r;a<c;++a)l=a+n,d=t[l],s[a]={r:i.parse(wN(d,o),l)};return s}const fk=Number.EPSILON||1e-14,mk=(e,t)=>t<e.length&&!e[t].skip&&e[t],gk=e=>"x"===e?"y":"x";function vk(e,t,n,r){const i=e.skip?t:e,o=t,s=n.skip?t:n,a=GN(o,i),c=GN(s,o);let l=a/(a+c),d=c/(a+c);l=isNaN(l)?0:l,d=isNaN(d)?0:d;const u=r*l,h=r*d;return{previous:{x:o.x-u*(s.x-i.x),y:o.y-u*(s.y-i.y)},next:{x:o.x+h*(s.x-i.x),y:o.y+h*(s.y-i.y)}}}function yk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=gk(t),r=e.length,i=Array(r).fill(0),o=Array(r);let s,a,c,l=mk(e,0);for(s=0;s<r;++s)if(a=c,c=l,l=mk(e,s+1),c){if(l){const e=l[t]-c[t];i[s]=0!==e?(l[n]-c[n])/e:0}o[s]=a?l?MN(i[s-1])!==MN(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(e,t,n){const r=e.length;let i,o,s,a,c,l=mk(e,0);for(let d=0;d<r-1;++d)c=l,l=mk(e,d+1),c&&l&&(jN(t[d],0,fk)?n[d]=n[d+1]=0:(i=n[d]/t[d],o=n[d+1]/t[d],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[d]=i*s*t[d],n[d+1]=o*s*t[d])))}(e,i,o),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=gk(n),i=e.length;let o,s,a,c=mk(e,0);for(let l=0;l<i;++l){if(s=a,a=c,c=mk(e,l+1),!a)continue;const i=a[n],d=a[r];s&&(o=(i-s[n])/3,a["cp1".concat(n)]=i-o,a["cp1".concat(r)]=d-o*t[l]),c&&(o=(c[n]-i)/3,a["cp2".concat(n)]=i+o,a["cp2".concat(r)]=d+o*t[l])}}(e,o,t)}function _k(e,t,n){return Math.max(Math.min(e,n),t)}function Ek(e,t,n,r,i){let o,s,a,c;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)yk(e,i);else{let n=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)a=e[o],c=vk(n,a,e[Math.min(o+1,s-(r?0:1))%s],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,o,s,a=PD(e[0],t);for(n=0,r=e.length;n<r;++n)s=o,o=a,a=n<r-1&&PD(e[n+1],t),o&&(i=e[n],s&&(i.cp1x=_k(i.cp1x,t.left,t.right),i.cp1y=_k(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=_k(i.cp2x,t.left,t.right),i.cp2y=_k(i.cp2y,t.top,t.bottom)))}(e,n)}function bk(){return"undefined"!==typeof window&&"undefined"!==typeof document}function wk(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Sk(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const Ak=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Ck=["top","right","bottom","left"];function Tk(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=Ck[i];r[o]=parseFloat(e[t+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Rk=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Ik(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=Ak(n),o="border-box"===i.boxSizing,s=Tk(i,"padding"),a=Tk(i,"border","width"),{x:c,y:l,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:o}=r;let s,a,c=!1;if(Rk(i,o,e.target))s=i,a=o;else{const e=t.getBoundingClientRect();s=r.clientX-e.left,a=r.clientY-e.top,c=!0}return{x:s,y:a,box:c}}(e,n),u=s.left+(d&&a.left),h=s.top+(d&&a.top);let{width:p,height:f}=t;return o&&(p-=s.width+a.width,f-=s.height+a.height),{x:Math.round((c-u)/p*n.width/r),y:Math.round((l-h)/f*n.height/r)}}const xk=e=>Math.round(10*e)/10;function Ok(e,t,n,r){const i=Ak(e),o=Tk(i,"margin"),s=Sk(i.maxWidth,e,"clientWidth")||ON,a=Sk(i.maxHeight,e,"clientHeight")||ON,c=function(e,t,n){let r,i;if(void 0===t||void 0===n){const o=e&&wk(e);if(o){const e=o.getBoundingClientRect(),s=Ak(o),a=Tk(s,"border","width"),c=Tk(s,"padding");t=e.width-c.width-a.width,n=e.height-c.height-a.height,r=Sk(s.maxWidth,o,"clientWidth"),i=Sk(s.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||ON,maxHeight:i||ON}}(e,t,n);let{width:l,height:d}=c;if("content-box"===i.boxSizing){const e=Tk(i,"border","width"),t=Tk(i,"padding");l-=t.width+e.width,d-=t.height+e.height}l=Math.max(0,l-o.width),d=Math.max(0,r?l/r:d-o.height),l=xk(Math.min(l,s,c.maxWidth)),d=xk(Math.min(d,a,c.maxHeight)),l&&!d&&(d=xk(l/2));return(void 0!==t||void 0!==n)&&r&&c.height&&d>c.height&&(d=c.height,l=xk(Math.floor(d*r))),{width:l,height:d}}function Nk(e,t,n){const r=t||1,i=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height="".concat(e.height,"px"),s.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(e.currentDevicePixelRatio=r,s.height=i,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Dk=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};bk()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(eU){}return e}();function kk(e,t){const n=function(e,t){return Ak(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Pk(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Lk(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Mk(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},s=Pk(e,i,n),a=Pk(i,o,n),c=Pk(o,t,n),l=Pk(s,a,n),d=Pk(a,c,n);return Pk(l,d,n)}function jk(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Uk(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Bk(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Fk(e){return"angle"===e?{between:qN,compare:YN,normalize:KN}:{between:JN,compare:(e,t)=>e-t,normalize:e=>e}}function Vk(e){let{start:t,end:n,count:r,loop:i,style:o}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:o}}function Wk(e,t,n){if(!n)return[e];const{property:r,start:i,end:o}=n,s=t.length,{compare:a,between:c,normalize:l}=Fk(r),{start:d,end:u,loop:h,style:p}=function(e,t,n){const{property:r,start:i,end:o}=n,{between:s,normalize:a}=Fk(r),c=t.length;let l,d,{start:u,end:h,loop:p}=e;if(p){for(u+=c,h+=c,l=0,d=c;l<d&&s(a(t[u%c][r]),i,o);++l)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:p,style:e.style}}(e,t,n),f=[];let m,g,v,y=!1,_=null;const E=()=>y||c(i,v,m)&&0!==a(i,v),b=()=>!y||0===a(o,m)||c(o,v,m);for(let w=d,S=d;w<=u;++w)g=t[w%s],g.skip||(m=l(g[r]),m!==v&&(y=c(m,i,o),null===_&&E()&&(_=0===a(m,i)?w:S),null!==_&&b()&&(f.push(Vk({start:_,end:w,loop:h,count:s,style:p})),_=null),S=w,v=m));return null!==_&&f.push(Vk({start:_,end:u,loop:h,count:s,style:p})),f}function Hk(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const o=Wk(r[i],e.points,t);o.length&&n.push(...o)}return n}function zk(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),o=Gk(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,c=n.length,l=[];let d=o,u=t[0].start,h=u;function p(e,t,r,i){const o=a?-1:1;if(e!==t){for(e+=c;n[e%c].skip;)e-=o;for(;n[t%c].skip;)t+=o;e%c!==t%c&&(l.push({start:e%c,end:t%c,loop:r,style:i}),d=i,u=t%c)}}for(const f of t){u=a?u:f.start;let e,t=n[u%c];for(h=u+1;h<=f.end;h++){const o=n[h%c];e=Gk(r.setContext($D(i,{type:"segment",p0:t,p1:o,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:s}))),Yk(e,d)&&p(u,h-1,f.loop,d),t=o,d=e}u<h-1&&p(u,h-1,f.loop,d)}return l}(e,t,n,r):t}function Gk(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Yk(e,t){if(!t)return!1;const n=[],r=function(e,t){return pD(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}class Kk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],o=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=rD.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),a=!0):(i[s]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qk=new Kk;const Xk="transparent",Jk={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=fD(e||Xk),i=r.valid&&fD(t||Xk);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Qk{constructor(e,t,n,r){const i=t[n];r=ZD([e.to,r,i,e.from]);const o=ZD([e.from,i,r]);this._active=!0,this._fn=e.fn||Jk[e.type||typeof o],this._easing=hD[e.easing]||hD.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ZD([e.to,t,r,e.from]),this._from=ZD([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||t<n),!this._active)return this._target[r]=s,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class Zk{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!aN(e))return;const t=Object.keys(RD.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!aN(i))return;const o={};for(const e of t)o[e]=i[e];(sN(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,o)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const c=o[a];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(e,t));continue}const l=t[c];let d=i[c];const u=n.get(c);if(d){if(u&&d.active()){d.update(u,l,s);continue}d.cancel()}u&&u.duration?(i[c]=d=new Qk(u,e,c,l),r.push(d)):e[c]=l}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(qk.add(this._chart,n),!0):void 0}}function $k(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:i,end:r?i:o}}function eP(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function tP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,o="single"===r.mode;let s,a,c,l;if(null===t)return;let d=!1;for(s=0,a=i.length;s<a;++s){if(c=+i[s],c===n){if(d=!0,r.all)continue;break}l=e.values[c],cN(l)&&(o||0===t||MN(t)===MN(l))&&(t+=l)}return d||r.all?t:0}function nP(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function rP(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function iP(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function oP(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=r,c=o.axis,l=s.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,s,r),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[c]:n,[l]:o}=e;h=(e._stacks||(e._stacks={}))[l]=rP(i,d,n),h[a]=o,h._top=iP(h,s,!0,r.type),h._bottom=iP(h,s,!1,r.type);(h._visualValues||(h._visualValues={}))[a]=o}}function sP(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function aP(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const cP=e=>"reset"===e||"none"===e,lP=(e,t)=>t?e:Object.assign({},e);class dP{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nP(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&aP(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=dN(n.xAxisID,sP(e,"x")),o=t.yAxisID=dN(n.yAxisID,sP(e,"y")),s=t.rAxisID=dN(n.rAxisID,sP(e,"r")),a=t.indexAxis,c=t.iAxisID=r(a,i,o,s),l=t.vAxisID=r(a,o,i,s);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tD(this._data,this),e._stacked&&aP(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(aN(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",o="x"===r.axis?"x":"y",s=Object.keys(e),a=new Array(s.length);let c,l,d;for(c=0,l=s.length;c<l;++c)d=s[c],a[c]={[i]:d,[o]:e[d]};return a}(t,e)}else if(n!==t){if(n){tD(n,this);const e=this._cachedMeta;aP(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),eD.forEach((t=>{const n="_onData"+SN(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];const s=r.apply(this,i);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...i)})),s}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=nP(t.vScale,t),t.stack!==n.stack&&(r=!0,aP(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(oP(this,t._parsed),t._stacked=nP(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,s=i.axis;let a,c,l,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,l=r;else{l=sN(r[e])?this.parseArrayData(n,r,e,t):aN(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===c[s]||u&&c[s]<u[s];for(a=0;a<t;++a)n._parsed[a+e]=c=l[a],d&&(i()&&(d=!1),u=c);n._sorted=d}o&&oP(this,l)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:o}=e,s=i.axis,a=o.axis,c=i.getLabels(),l=i===o,d=new Array(r);let u,h,p;for(u=0,h=r;u<h;++u)p=u+n,d[u]={[s]:l||i.parse(c[p],p),[a]:o.parse(t[p],p)};return d}parseArrayData(e,t,n,r){const{xScale:i,yScale:o}=e,s=new Array(r);let a,c,l,d;for(a=0,c=r;a<c;++a)l=a+n,d=t[l],s[a]={x:i.parse(d[0],l),y:o.parse(d[1],l)};return s}parseObjectData(e,t,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,c=new Array(r);let l,d,u,h;for(l=0,d=r;l<d;++l)u=l+n,h=t[u],c[l]={x:i.parse(wN(h,s),u),y:o.parse(wN(h,a),u)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,o=t[e.axis];return tP({keys:eP(r,!0),values:t._stacks[e.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let o=null===i?NaN:i;const s=r&&n._stacks[t.axis];r&&s&&(r.values=s,o=tP(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,s=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:eP(n,!0),values:null})(t,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let u,h;function p(){h=r[u];const t=h[s.axis];return!cN(h[e.axis])||l>t||d<t}for(u=0;u<o&&(p()||(this.updateRangeFromParsed(c,e,h,a),!i));++u);if(i)for(u=o-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(c,e,h,a);break}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r][e.axis],cN(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return aN(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(dN(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=$k(e,n),i=$k(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,c=this.options.drawActiveElementsOnTop;let l;for(n.dataset&&n.dataset.draw(e,i,s,a),l=s;l<s+a;++l){const t=r[l];t.hidden||(t.active&&c?o.push(t):t.draw(e,i))}for(l=0;l<o.length;++l)o[l].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return $D(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return $D(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,o=e+"-"+t,s=i[o],a=this.enableOptionSharing&&AN(n);if(s)return lP(s,a);const c=this.chart.config,l=c.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=c.getOptionScopes(this.getDataset(),l),h=Object.keys(RD.elements[e]),p=c.resolveNamedOptions(u,h,(()=>this.getContext(n,r,t)),d);return p.$shared&&(p.$shared=a,i[o]=Object.freeze(lP(p,a))),p}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,o="animation-".concat(t),s=i[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),o=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(o,this.getContext(e,n,t))}const c=new Zk(r,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||cP(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:o}}updateElement(e,t,n,r){cP(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!cP(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[s,a,c]of this._syncList)this[s](a,c);this._syncList=[];const r=n.length,i=t.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,o=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=o;s--)e[s]=e[s-t]};for(a(i),s=e;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&aP(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function uP(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=nD(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,o,s,a=t._length;const c=()=>{32767!==o&&-32768!==o&&(AN(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(r=0,i=n.length;r<i;++r)o=t.getPixelForValue(n[r]),c();for(s=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return a}function hP(e,t,n,r){return sN(e)?function(e,t,n,r){const i=n.parse(e[0],r),o=n.parse(e[1],r),s=Math.min(i,o),a=Math.max(i,o);let c=s,l=a;Math.abs(s)>Math.abs(a)&&(c=a,l=s),t[n.axis]=l,t._custom={barStart:c,barEnd:l,start:i,end:o,min:s,max:a}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function pP(e,t,n,r){const i=e.iScale,o=e.vScale,s=i.getLabels(),a=i===o,c=[];let l,d,u,h;for(l=n,d=n+r;l<d;++l)h=t[l],u={},u[i.axis]=a||i.parse(s[l],l),c.push(hP(h,u,o,l));return c}function fP(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function mP(e,t,n,r){let i=t.borderSkipped;const o={};if(!i)return void(e.borderSkipped=o);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:c,top:l,bottom:d}=function(e){let t,n,r,i,o;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:t,top:i,bottom:o}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=l:(n._bottom||0)===r?i=d:(o[gP(d,s,a,c)]=!0,i=l)),o[gP(i,s,a,c)]=!0,e.borderSkipped=o}function gP(e,t,n,r){var i,o,s;return r?(s=n,e=vP(e=(i=e)===(o=t)?s:i===s?o:i,n,t)):e=vP(e,t,n),e}function vP(e,t,n){return"start"===e?t:"end"===e?n:e}function yP(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}l(dP,"defaults",{}),l(dP,"datasetElementType",null),l(dP,"dataElementType",null);class _P extends dP{parsePrimitiveData(e,t,n,r){return pP(e,t,n,r)}parseArrayData(e,t,n,r){return pP(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,c="x"===i.axis?s:a,l="x"===o.axis?s:a,d=[];let u,h,p,f;for(u=n,h=n+r;u<h;++u)f=t[u],p={},p[i.axis]=i.parse(wN(f,c),u),d.push(hP(wN(f,l),p,o,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),o=i._custom,s=fP(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),c=s.isHorizontal(),l=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||oN(t[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,l),f=(t._stacks||{})[s.axis],m={horizontal:c,base:n.base,enableBorderRadius:!f||fP(t._custom)||o===f._top||o===f._bottom,x:c?n.head:p.center,y:c?p.center:n.head,height:c?p.size:Math.abs(n.size),width:c?Math.abs(n.size):p.size};u&&(m.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=m.options||e[h].options;mP(m,g,f,o),yP(m,g,l.ratio),this.updateElement(e[h],h,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,o=[],s=this._cachedMeta.controller.getParsed(t),a=s&&s[n.axis],c=e=>{const t=e._parsed.find((e=>e[n.axis]===a)),r=t&&t[e.vScale.axis];if(oN(r)||isNaN(r))return!0};for(const l of r)if((void 0===t||!c(l))&&((!1===i||-1===o.indexOf(l.stack)||void 0===i&&void 0===l.stack)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,o;for(i=0,o=t.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=e.barThickness;return{min:s||uP(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,s=i||0,a=this.getParsed(e),c=a._custom,l=fP(c);let d,u,h=a[t.axis],p=0,f=n?this.applyStack(t,a,n):h;f!==h&&(p=f-h,f=h),l&&(h=c.barStart,f=c.barEnd-c.barStart,0!==h&&MN(h)!==MN(c.barEnd)&&(p=0),p+=h);const m=oN(i)||l?p:i;let g=t.getPixelForValue(m);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):g,u=d-g,Math.abs(u)<o){u=function(e,t,n){return 0!==e?MN(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,s)*o,h===s&&(g-=u/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),c=Math.min(e,i),p=Math.max(e,i);g=Math.max(Math.min(g,p),c),d=g+u,n&&!l&&(a._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(s)){const e=MN(u)*t.getLineWidthForValue(s)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,o=dN(r.maxBarThickness,1/0);let s,a;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,o=i[e];let s=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const c=n.categoryPercentage;null===s&&(s=o-(null===a?t.end-t.start:a-o)),null===a&&(a=o+o-s);const l=o-(o-Math.min(s,a))/2*c;return{chunk:Math.abs(a-s)/2*c/r,ratio:n.barPercentage,start:l}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let o,s;return oN(i)?(o=t.min*n.categoryPercentage,s=n.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:t.pixels[e]-o/2}}(e,t,r,n),l=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);s=c.start+c.chunk*l+c.chunk/2,a=Math.min(o,c.chunk*c.ratio)}else s=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(o,t.min*t.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}l(_P,"id","bar"),l(_P,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),l(_P,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class EP extends dP{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=dN(e[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=dN(e&&e.r&&+e.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,o=this.getParsed(e),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y),c=o._custom;return{label:n[e]||"",value:"("+s+", "+a+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(t,r),l=o.axis,d=s.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!i&&this.getParsed(u),h={},p=h[l]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[l]),f=h[d]=i?s.getBasePixel():s.getPixelForValue(n[d]);h.skip=isNaN(p)||isNaN(f),c&&(h.options=a||this.resolveDataElementOptions(u,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=dN(n&&n._custom,i),r}}l(EP,"id","bubble"),l(EP,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),l(EP,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class bP extends dP{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,s=e=>+n[e];if(aN(n[e])){const{key:e="value"}=this._parsing;s=t=>+wN(n[t],e)}for(i=e,o=e+t;i<o;++i)r._parsed[i]=s(i)}}_getRotation(){return VN(this.options.rotation-90)}_getCircumference(){return VN(this.options.circumference)}_getRotationExtents(){let e=IN,t=-IN;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-o)/2,0),a=Math.min((c=this.options.cutout,l=s,"string"===typeof c&&c.endsWith("%")?parseFloat(c)/100:+c/l),1);var c,l;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,o=0,s=0;if(t<IN){const a=e,c=a+t,l=Math.cos(a),d=Math.sin(a),u=Math.cos(c),h=Math.sin(c),p=(e,t,r)=>qN(e,a,c,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>qN(e,a,c,!0)?-1:Math.min(t,t*n,r,r*n),m=p(0,l,u),g=p(DN,d,h),v=f(RN,l,u),y=f(RN+DN,d,h);r=(m-v)/2,i=(g-y)/2,o=-(m+v)/2,s=-(g+y)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}(h,u,a),v=(n.width-o)/p,y=(n.height-o)/f,_=Math.max(Math.min(v,y)/2,0),E=uN(this.options.radius,_),b=(E-Math.max(E*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*E,this.offsetY=g*E,r.total=this.calculateTotal(),this.outerRadius=E-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/IN)}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,c=(s.left+s.right)/2,l=(s.top+s.bottom)/2,d=i&&a.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],o={x:c+this.offsetX,y:l+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};f&&(o.options=p||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,o,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?IN*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=_D(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,o,s,a;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,s=o.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(dN(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}l(bP,"id","doughnut"),l(bP,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),l(bP,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),l(bP,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const o=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class wP extends dP{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,o=this.chart._animationsDisabled;let{start:s,count:a}=aD(t,r,o);this._drawStart=s,this._drawCount=a,cD(t)&&(s=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},e),this.updateElements(r,s,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(t,r),u=o.axis,h=s.axis,{spanGaps:p,segment:f}=this.options,m=BN(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,y=e.length;let _=t>0&&this.getParsed(t-1);for(let E=0;E<y;++E){const n=e[E],p=g?n:{};if(E<t||E>=v){p.skip=!0;continue}const y=this.getParsed(E),b=oN(y[h]),w=p[u]=o.getPixelForValue(y[u],E),S=p[h]=i||b?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,y,a):y[h],E);p.skip=isNaN(w)||isNaN(S)||b,p.stop=E>0&&Math.abs(y[u]-_[u])>m,f&&(p.parsed=y,p.raw=c.data[E]),d&&(p.options=l||this.resolveDataElementOptions(E,n.active?"active":r)),g||this.updateElement(n,E,p,r),_=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}l(wP,"id","line"),l(wP,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),l(wP,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class SP extends dP{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=_D(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return pk.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,c=a.xCenter,l=a.yCenter,d=a.getIndexAngle(0)-.5*RN;let u,h=d;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,p);for(u=t;u<t+n;u++){const t=e[u];let n=h,f=h+this._computeAngle(u,r,p),m=o.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,i&&(s.animateScale&&(m=0),s.animateRotate&&(n=f=d));const g={x:c,y:l,innerRadius:0,outerRadius:m,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?VN(this.resolveDataElementOptions(e,t).angle||n):0}}l(SP,"id","polarArea"),l(SP,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),l(SP,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const o=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class AP extends bP{}l(AP,"id","pie"),l(AP,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class CP extends dP{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return pk.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let s=t;s<t+n;s++){const t=e[s],n=this.resolveDataElementOptions(s,t.active?"active":r),a=i.getPointPositionForValue(s,this.getParsed(s).r),c=o?i.xCenter:a.x,l=o?i.yCenter:a.y,d={x:c,y:l,angle:a.angle,skip:isNaN(c)||isNaN(l),options:n};this.updateElement(t,s,d,r)}}}l(CP,"id","radar"),l(CP,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),l(CP,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class TP extends dP{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,o=this.getParsed(e),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y);return{label:n[e]||"",value:"("+s+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:o}=aD(t,n,r);if(this._drawStart=i,this._drawCount=o,cD(t)&&(i=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:o}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:s},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:c}=this._cachedMeta,l=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(l),u=this.includeOptions(r,d),h=o.axis,p=s.axis,{spanGaps:f,segment:m}=this.options,g=BN(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let _=t;_<t+n;++_){const t=e[_],n=this.getParsed(_),l=v?t:{},f=oN(n[p]),E=l[h]=o.getPixelForValue(n[h],_),b=l[p]=i||f?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[p],_);l.skip=isNaN(E)||isNaN(b)||f,l.stop=_>0&&Math.abs(n[h]-y[h])>g,m&&(l.parsed=n,l.raw=c.data[_]),u&&(l.options=d||this.resolveDataElementOptions(_,t.active?"active":r)),v||this.updateElement(t,_,l,r),y=n}this.updateSharedOptions(d,r,l)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,o)/2}}l(TP,"id","scatter"),l(TP,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),l(TP,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function RP(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class IP{static override(e){Object.assign(IP.prototype,e)}constructor(e){l(this,"options",void 0),this.options=e||{}}init(){}formats(){return RP()}parse(){return RP()}format(){return RP()}add(){return RP()}diff(){return RP()}startOf(){return RP()}endOf(){return RP()}}var xP=IP;function OP(e,t,n,r){const{controller:i,data:o,_sorted:s}=e,a=i._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&s&&o.length){const s=a._reversePixels?$N:ZN;if(!r){const r=s(o,t,n);if(c){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,o=n.slice(0,r.lo+1).reverse().findIndex((e=>!oN(e[t.axis])));r.lo-=Math.max(0,o);const s=n.slice(r.hi).findIndex((e=>!oN(e[t.axis])));r.hi+=Math.max(0,s)}return r}if(i._sharedOptions){const e=o[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=s(o,t,n-r),i=s(o,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:o.length-1}}function NP(e,t,n,r,i){const o=e.getSortedVisibleDatasetMetas(),s=n[t];for(let a=0,c=o.length;a<c;++a){const{index:e,data:n}=o[a],{lo:c,hi:l}=OP(o[a],t,s,i);for(let t=c;t<=l;++t){const i=n[t];i.skip||r(i,e,t)}}}function DP(e,t,n,r,i){const o=[];if(!i&&!e.isPointInArea(t))return o;return NP(e,n,t,(function(n,s,a){(i||PD(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&o.push({element:n,datasetIndex:s,index:a})}),!0),o}function kP(e,t,n,r,i,o){let s=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let c=Number.POSITIVE_INFINITY;return NP(e,n,t,(function(n,l,d){const u=n.inRange(t.x,t.y,i);if(r&&!u)return;const h=n.getCenterPoint(i);if(!(!!o||e.isPointInArea(h))&&!u)return;const p=a(t,h);p<c?(s=[{element:n,datasetIndex:l,index:d}],c=p):p===c&&s.push({element:n,datasetIndex:l,index:d})})),s}function PP(e,t,n,r,i,o){return o||e.isPointInArea(t)?"r"!==n||r?kP(e,t,n,r,i,o):function(e,t,n,r){let i=[];return NP(e,n,t,(function(e,n,o){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:c}=zN(e,{x:t.x,y:t.y});qN(c,s,a)&&i.push({element:e,datasetIndex:n,index:o})})),i}(e,t,n,i):[]}function LP(e,t,n,r,i){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return NP(e,n,t,((e,r,c)=>{e[s]&&e[s](t[n],i)&&(o.push({element:e,datasetIndex:r,index:c}),a=a||e.inRange(t.x,t.y,i))})),r&&!a?[]:o}var MP={evaluateInteractionItems:NP,modes:{index(e,t,n,r){const i=Ik(t,e),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?DP(e,i,o,r,s):PP(e,i,o,!1,r,s),c=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&c.push({element:n,datasetIndex:e.index,index:t})})),c):[]},dataset(e,t,n,r){const i=Ik(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?DP(e,i,o,r,s):PP(e,i,o,!1,r,s);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>DP(e,Ik(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=Ik(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;return PP(e,i,o,n.intersect,r,s)},x:(e,t,n,r)=>LP(e,Ik(t,e),"x",n.intersect,r),y:(e,t,n,r)=>LP(e,Ik(t,e),"y",n.intersect,r)}};const jP=["left","top","right","bottom"];function UP(e,t){return e.filter((e=>e.pos===t))}function BP(e,t){return e.filter((e=>-1===jP.indexOf(e.pos)&&e.box.axis===t))}function FP(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function VP(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!jP.includes(r))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let o,s,a;for(o=0,s=e.length;o<s;++o){a=e[o];const{fullSize:s}=a.box,c=n[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*r:s&&t.availableWidth,a.height=i):(a.width=r,a.height=l?l*i:s&&t.availableHeight)}return n}function WP(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function HP(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function zP(e,t,n,r){const{pos:i,box:o}=n,s=e.maxPadding;if(!aN(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[i]+=n.size}o.getPadding&&HP(s,o.getPadding());const a=Math.max(0,t.outerWidth-WP(s,e,"left","right")),c=Math.max(0,t.outerHeight-WP(s,e,"top","bottom")),l=a!==e.w,d=c!==e.h;return e.w=a,e.h=c,n.horizontal?{same:l,other:d}:{same:d,other:l}}function GP(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function YP(e,t,n,r){const i=[];let o,s,a,c,l,d;for(o=0,s=e.length,l=0;o<s;++o){a=e[o],c=a.box,c.update(a.width||t.w,a.height||t.h,GP(a.horizontal,t));const{same:s,other:u}=zP(t,n,a,r);l|=s&&i.length,d=d||u,c.fullSize||i.push(a)}return l&&YP(i,t,n,r)||d}function KP(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function qP(e,t,n,r){const i=n.padding;let{x:o,y:s}=t;for(const a of e){const e=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/c.weight||1;if(a.horizontal){const r=t.w*l,o=c.size||e.height;AN(c.start)&&(s=c.start),e.fullSize?KP(e,i.left,s,n.outerWidth-i.right-i.left,o):KP(e,t.left+c.placed,s,r,o),c.start=s,c.placed+=r,s=e.bottom}else{const r=t.h*l,s=c.size||e.width;AN(c.start)&&(o=c.start),e.fullSize?KP(e,o,i.top,s,n.outerHeight-i.bottom-i.top):KP(e,o,t.top+c.placed,s,r),c.start=o,c.placed+=r,o=e.right}}t.x=o,t.y=s}var XP={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=JD(e.options.layout.padding),o=Math.max(t-i.width,0),s=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,o,s,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:o,options:{stack:s,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return t}(e),n=FP(t.filter((e=>e.box.fullSize)),!0),r=FP(UP(t,"left"),!0),i=FP(UP(t,"right")),o=FP(UP(t,"top"),!0),s=FP(UP(t,"bottom")),a=BP(t,"x"),c=BP(t,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(c).concat(s).concat(a),chartArea:UP(t,"chartArea"),vertical:r.concat(i).concat(c),horizontal:o.concat(s).concat(a)}}(e.boxes),c=a.vertical,l=a.horizontal;pN(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const d=c.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/d,hBoxMaxHeight:s/2}),h=Object.assign({},i);HP(h,JD(r));const p=Object.assign({maxPadding:h,w:o,h:s,x:i.left,y:i.top},i),f=VP(c.concat(l),u);YP(a.fullSize,p,u,f),YP(c,p,u,f),YP(l,p,u,f)&&YP(c,p,u,f),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),qP(a.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,qP(a.rightAndBottom,p,u,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},pN(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class JP{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class QP extends JP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ZP="$chartjs",$P={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},eL=e=>null===e||""===e;const tL=!!Dk&&{passive:!0};function nL(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,tL)}function rL(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function iL(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||rL(n.addedNodes,r),t=t&&!rL(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function oL(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||rL(n.removedNodes,r),t=t&&!rL(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const sL=new Map;let aL=0;function cL(){const e=window.devicePixelRatio;e!==aL&&(aL=e,sL.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function lL(e,t,n){const r=e.canvas,i=r&&wk(r);if(!i)return;const o=iD(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),s=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||o(n,r)}));return s.observe(i),function(e,t){sL.size||window.addEventListener("resize",cL),sL.set(e,t)}(e,o),s}function dL(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){sL.delete(e),sL.size||window.removeEventListener("resize",cL)}(e)}function uL(e,t,n){const r=e.canvas,i=iD((t=>{null!==e.ctx&&n(function(e,t){const n=$P[e.type]||e.type,{x:r,y:i}=Ik(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,tL)}(r,t,i),i}class hL extends JP{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[ZP]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",eL(i)){const t=kk(e,"width");void 0!==t&&(e.width=t)}if(eL(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=kk(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[ZP])return!1;const n=t[ZP].initial;["height","width"].forEach((e=>{const r=n[e];oN(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[ZP],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:iL,detach:oL,resize:lL}[t]||uL;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:dL,detach:dL,resize:dL}[t]||nL)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Ok(e,t,n,r)}isAttached(e){const t=e&&wk(e);return!(!t||!t.isConnected)}}class pL{constructor(){l(this,"x",void 0),l(this,"y",void 0),l(this,"active",!1),l(this,"options",void 0),l(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return BN(this.x)&&BN(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function fL(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],s=o.length,a=o[0],c=o[s-1],l=[];if(s>i)return function(e,t,n,r){let i,o=0,s=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===s&&(t.push(e[i]),o++,s=n[o*r])}(t,l,o,s/i),l;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const o=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let s=0,a=o.length-1;s<a;s++){const e=o[s];if(e>i)return e}return Math.max(i,1)}(o,t,i);if(s>0){let e,n;const r=s>1?Math.round((c-a)/(s-1)):null;for(mL(t,l,d,oN(r)?0:a-r,a),e=0,n=s-1;e<n;e++)mL(t,l,d,o[e],o[e+1]);return mL(t,l,d,c,oN(r)?t.length:c+r),l}return mL(t,l,d),l}function mL(e,t,n,r,i){const o=dN(r,0),s=Math.min(dN(i,e.length),e.length);let a,c,l,d=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),l=o;l<0;)d++,l=Math.round(o+d*n);for(c=Math.max(o,0);c<s;c++)c===l&&(t.push(e[c]),d++,l=Math.round(o+d*n))}l(pL,"defaults",{}),l(pL,"defaultRoutes",void 0);const gL=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,vL=(e,t)=>Math.min(t||e,e);function yL(e,t){const n=[],r=e.length/t,i=e.length;let o=0;for(;o<i;o+=r)n.push(e[Math.floor(o)]);return n}function _L(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),o=e._startPixel,s=e._endPixel,a=1e-6;let c,l=e.getPixelForTick(i);if(!(n&&(c=1===r?Math.max(l-o,s-l):0===t?(e.getPixelForTick(1)-l)/2:(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<o-a||l>s+a)))return l}function EL(e){return e.drawTicks?e.tickLength:0}function bL(e,t){if(!e.display)return 0;const n=QD(e.font,t),r=JD(e.padding);return(sN(e.text)?e.text.length:1)*n.lineHeight+r.height}function wL(e,t,n){let r=oD(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class SL extends pL{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=lN(e,Number.POSITIVE_INFINITY),t=lN(t,Number.NEGATIVE_INFINITY),n=lN(n,Number.POSITIVE_INFINITY),r=lN(r,Number.NEGATIVE_INFINITY),{min:lN(e,n),max:lN(t,r),minDefined:cN(e),maxDefined:cN(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,c=s.length;a<c;++a)t=s[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),o||(r=Math.max(r,t.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:lN(n,lN(r,n)),max:lN(r,lN(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){hN(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,o=uN(t,(i-r)/2),s=(e,t)=>n&&0===e?0:e+t;return{min:s(r,-Math.abs(o)),max:s(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?yL(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=fL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){hN(this.options.afterUpdate,[this])}beforeSetDimensions(){hN(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){hN(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),hN(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){hN(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=hN(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){hN(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){hN(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=vL(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let o,s,a,c=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const l=this._getLabelSizes(),d=l.widest.width,u=l.highest.height,h=XN(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),d+6>o&&(o=h/(n-(e.offset?.5:1)),s=this.maxHeight-EL(e.grid)-t.padding-bL(e.title,this.chart.options.font),a=Math.sqrt(d*d+u*u),c=WN(Math.min(Math.asin(XN((l.highest.height+6)/o,-1,1)),Math.asin(XN(s/a,-1,1))-Math.asin(XN(u/a,-1,1)))),c=Math.max(r,Math.min(i,c))),this.labelRotation=c}afterCalculateLabelRotation(){hN(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){hN(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=bL(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=EL(i)+o):(e.height=this.maxHeight,e.width=EL(i)+o),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:o}=this._getLabelSizes(),a=2*n.padding,c=VN(this.labelRotation),l=Math.cos(c),d=Math.sin(c);if(s){const t=n.mirror?0:d*i.width+l*o.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:l*i.width+d*o.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,d,l)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,c="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;a?c?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===i?u=t.width:"end"===i?d=e.width:"inner"!==i&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-l+o)*this.width/(this.width-l),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){hN(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)oN(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=yL(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,o=[],s=[],a=Math.floor(t/vL(t,n));let c,l,d,u,h,p,f,m,g,v,y,_=0,E=0;for(c=0;c<t;c+=a){if(u=e[c].label,h=this._resolveTickFontOptions(c),r.font=p=h.string,f=i[p]=i[p]||{data:{},gc:[]},m=h.lineHeight,g=v=0,oN(u)||sN(u)){if(sN(u))for(l=0,d=u.length;l<d;++l)y=u[l],oN(y)||sN(y)||(g=ID(r,f.data,f.gc,g,y),v+=m)}else g=ID(r,f.data,f.gc,g,u),v=m;o.push(g),s.push(v),_=Math.max(g,_),E=Math.max(v,E)}!function(e,t){pN(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const b=o.indexOf(_),w=s.indexOf(E),S=e=>({width:o[e]||0,height:s[e]||0});return{first:S(0),last:S(t-1),widest:S(b),highest:S(w),widths:o,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return XN(this._alignToPixels?OD(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return $D(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return $D(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=VN(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,s=i?i.widest.width+o:0,a=i?i.highest.height+o:0;return this.isHorizontal()?a*n>s*r?s/n:a/r:a*r<s*n?a/n:s/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:s}=r,a=i.offset,c=this.isHorizontal(),l=this.ticks.length+(a?1:0),d=EL(i),u=[],h=s.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,m=function(e){return OD(n,e,p)};let g,v,y,_,E,b,w,S,A,C,T,R;if("top"===o)g=m(this.bottom),b=this.bottom-d,S=g-f,C=m(e.top)+f,R=e.bottom;else if("bottom"===o)g=m(this.top),C=e.top,R=m(e.bottom)-f,b=g+f,S=this.top+d;else if("left"===o)g=m(this.right),E=this.right-d,w=g-f,A=m(e.left)+f,T=e.right;else if("right"===o)g=m(this.left),A=e.left,T=m(e.right)-f,E=g+f,w=this.left+d;else if("x"===t){if("center"===o)g=m((e.top+e.bottom)/2+.5);else if(aN(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}C=e.top,R=e.bottom,b=g+f,S=b+d}else if("y"===t){if("center"===o)g=m((e.left+e.right)/2);else if(aN(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}E=g-f,w=E-d,A=e.left,T=e.right}const I=dN(r.ticks.maxTicksLimit,l),x=Math.max(1,Math.ceil(l/I));for(v=0;v<l;v+=x){const e=this.getContext(v),t=i.setContext(e),r=s.setContext(e),o=t.lineWidth,l=t.color,d=r.dash||[],h=r.dashOffset,p=t.tickWidth,f=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=_L(this,v,a),void 0!==y&&(_=OD(n,y,o),c?E=w=A=T=_:b=S=C=R=_,u.push({tx1:E,ty1:b,tx2:w,ty2:S,x1:A,y1:C,x2:T,y2:R,width:o,color:l,borderDash:d,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=l,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:c,padding:l,mirror:d}=i,u=EL(n.grid),h=u+l,p=d?-l:h,f=-VN(this.labelRotation),m=[];let g,v,y,_,E,b,w,S,A,C,T,R,I="middle";if("top"===r)b=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===r)b=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,E=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,E=e.x}else if("x"===t){if("center"===r)b=(e.top+e.bottom)/2+h;else if(aN(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)+h}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)E=(e.left+e.right)/2-h;else if(aN(r)){const e=Object.keys(r)[0],t=r[e];E=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===a?I="top":"end"===a&&(I="bottom"));const x=this._getLabelSizes();for(g=0,v=s.length;g<v;++g){y=s[g],_=y.label;const e=i.setContext(this.getContext(g));S=this.getPixelForTick(g)+i.labelOffset,A=this._resolveTickFontOptions(g),C=A.lineHeight,T=sN(_)?_.length:1;const t=T/2,n=e.color,a=e.textStrokeColor,l=e.textStrokeWidth;let u,h=w;if(o?(E=S,"inner"===w&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),R="top"===r?"near"===c||0!==f?-T*C+C/2:"center"===c?-x.highest.height/2-t*C+C:-x.highest.height+C/2:"near"===c||0!==f?C/2:"center"===c?x.highest.height/2-t*C:x.highest.height-T*C,d&&(R*=-1),0===f||e.showLabelBackdrop||(E+=C/2*Math.sin(f))):(b=S,R=(1-T)*C/2),e.showLabelBackdrop){const t=JD(e.backdropPadding),n=x.heights[g],r=x.widths[g];let i=R-t.top,o=0-t.left;switch(I){case"middle":i-=n/2;break;case"bottom":i-=n}switch(w){case"center":o-=r/2;break;case"right":o-=r;break;case"inner":g===v-1?o-=r:g>0&&(o-=r/2)}u={left:o,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:_,font:A,textOffset:R,options:{rotation:f,color:n,strokeColor:a,strokeWidth:l,textAlign:h,textBaseline:I,translation:[E,b],backdrop:u}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-VN(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=e+i,s=this._getLabelSizes().widest.width;let a,c;return"left"===t?r?(c=this.right+i,"near"===n?a="left":"center"===n?(a="center",c+=s/2):(a="right",c+=s)):(c=this.right-o,"near"===n?a="right":"center"===n?(a="center",c-=s/2):(a="left",c=this.left)):"right"===t?r?(c=this.left+i,"near"===n?a="right":"center"===n?(a="center",c-=s/2):(a="left",c-=s)):(c=this.left+o,"near"===n?a="left":"center"===n?(a="center",c+=s/2):(a="right",c=this.right)):a="right",{textAlign:a,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const s=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,o=r.length;i<o;++i){const e=r[i];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const s=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,l,d,u;this.isHorizontal()?(c=OD(e,this.left,o)-o/2,l=OD(e,this.right,s)+s/2,d=u=a):(d=OD(e,this.top,o)-o/2,u=OD(e,this.bottom,s)+s/2,c=l=a),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(c,d),t.lineTo(l,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&LD(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;VD(t,i.label,0,i.textOffset,n,e)}n&&MD(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=QD(n.font),o=JD(n.padding),s=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||aN(t)?(a+=o.bottom,sN(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:c,titleY:l,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:i,left:o,bottom:s,right:a,chart:c}=e,{chartArea:l,scales:d}=c;let u,h,p,f=0;const m=s-i,g=a-o;if(e.isHorizontal()){if(h=sD(r,o,a),aN(n)){const e=Object.keys(n)[0],r=n[e];p=d[e].getPixelForValue(r)+m-t}else p="center"===n?(l.bottom+l.top)/2+m-t:gL(e,n,t);u=a-o}else{if(aN(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-g+t}else h="center"===n?(l.left+l.right)/2-g+t:gL(e,n,t);p=sD(r,s,i),f="left"===n?-DN:DN}return{titleX:h,titleY:p,maxWidth:u,rotation:f}}(this,a,t,s);VD(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:u,textAlign:wL(s,t,r),textBaseline:"middle",translation:[c,l]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=dN(e.grid&&e.grid.z,-1),r=dN(e.border&&e.border.z,0);return this._isVisible()&&this.draw===SL.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=t.length;i<o;++i){const o=t[i];o[n]!==this.id||e&&o.type!==e||r.push(o)}return r}_resolveTickFontOptions(e){return QD(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class AL{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=yN(Object.create(null),[n?RD.get(n):{},RD.get(t),e.defaults]);RD.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),o=[e].concat(r).join("."),s=t[n].split("."),a=s.pop(),c=s.join(".");RD.route(o,i,c,a)}))}(t,e.defaultRoutes);e.descriptors&&RD.describe(t,e.descriptors)}(e,o,n),this.override&&RD.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in RD[r]&&(delete RD[r][n],this.override&&delete wD[n])}}class CL{constructor(){this.controllers=new AL(dP,"datasets",!0),this.elements=new AL(pL,"elements"),this.plugins=new AL(Object,"plugins"),this.scales=new AL(SL,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):pN(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=SN(e);hN(n["before"+r],[],n),t[e](n),hN(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var TL=new CL;class RL{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===hN(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){oN(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=dN(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(TL.plugins.items);for(let o=0;o<r.length;o++)n.push(TL.getPlugin(r[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const e=i[o];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:o}=t;const s=[],a=e.getContext();for(const c of i){const t=c.id,i=IL(n[t],r);null!==i&&s.push({plugin:c,options:xL(e.config,{plugin:c,local:o[t]},i,a)})}return s}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function IL(e,t){return t||!1!==e?!0===e?{}:e:null}function xL(e,t,n,r){let{plugin:i,local:o}=t;const s=e.pluginScopeKeys(i),a=e.getOptionScopes(n,s);return o&&i.defaults&&a.push(i.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function OL(e,t){const n=RD.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function NL(e){if("x"===e||"y"===e||"r"===e)return e}function DL(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function kL(e){if(NL(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||DL(i.position)||e.length>1&&NL(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function PL(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function LL(e,t){const n=wD[e.type]||{scales:{}},r=t.scales||{},i=OL(e.type,t),o=Object.create(null);return Object.keys(r).forEach((t=>{const s=r[t];if(!aN(s))return console.error("Invalid scale configuration for scale: ".concat(t));if(s._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=kL(t,s,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return PL(e,"x",n[0])||PL(e,"y",n[0])}return{}}(t,e),RD.scales[s.type]),c=function(e,t){return e===t?"_index_":"_value_"}(a,i),l=n.scales||{};o[t]=_N(Object.create(null),[{axis:a},s,l[a],l[c]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,s=n.indexAxis||OL(i,t),a=(wD[i]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),i=n[t+"AxisID"]||t;o[i]=o[i]||Object.create(null),_N(o[i],[{axis:t},r[i],a[e]])}))})),Object.keys(o).forEach((e=>{const t=o[e];_N(t,[RD.scales[t.type],RD.scale])})),o}function ML(e){const t=e.options||(e.options={});t.plugins=dN(t.plugins,{}),t.scales=LL(e,t)}function jL(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const UL=new Map,BL=new Set;function FL(e,t){let n=UL.get(e);return n||(n=t(),UL.set(e,n),BL.add(n)),n}const VL=(e,t,n)=>{const r=wN(t,n);void 0!==r&&e.add(r)};class WL{constructor(e){this._config=function(e){return(e=e||{}).data=jL(e.data),ML(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=jL(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ML(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return FL(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return FL("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return FL("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return FL("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),s=o.get(t);if(s)return s;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>VL(a,e,t)))),t.forEach((e=>VL(a,r,e))),t.forEach((e=>VL(a,wD[i]||{},e))),t.forEach((e=>VL(a,RD,e))),t.forEach((e=>VL(a,SD,e)))}));const c=Array.from(a);return 0===c.length&&c.push(Object.create(null)),BL.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,wD[t]||{},RD.datasets[t]||{},{type:t},RD,SD]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:o,subPrefixes:s}=HL(this._resolverCache,e,r);let a=o;if(function(e,t){const{isScriptable:n,isIndexable:r}=nk(e);for(const i of t){const t=n(i),o=r(i),s=(o||t)&&e[i];if(t&&(CN(s)||zL(s))||o&&sN(s))return!0}return!1}(o,t)){i.$shared=!1;a=tk(o,n=CN(n)?n():n,this.createResolver(e,n,s))}for(const c of t)i[c]=a[c];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=HL(this._resolverCache,e,n);return aN(t)?tk(i,t,void 0,r):i}}function HL(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let o=r.get(i);if(!o){o={resolver:ek(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,o)}return o}const zL=e=>aN(e)&&Object.getOwnPropertyNames(e).some((t=>CN(e[t])));const GL=["top","bottom","left","right","chartArea"];function YL(e,t){return"top"===e||"bottom"===e||-1===GL.indexOf(e)&&"x"===t}function KL(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function qL(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),hN(n&&n.onComplete,[e],t)}function XL(e){const t=e.chart,n=t.options.animation;hN(n&&n.onProgress,[e],t)}function JL(e){return bk()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const QL={},ZL=e=>{const t=JL(e);return Object.values(QL).filter((e=>e.canvas===t)).pop()};function $L(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function eM(e,t,n){return e.options.clip?e[n]:t[n]}class tM{static register(){TL.add(...arguments),nM()}static unregister(){TL.remove(...arguments),nM()}constructor(e,t){const n=this.config=new WL(t),r=JL(e),i=ZL(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!bk()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?QP:hL}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,c=a&&a.height,l=a&&a.width;this.id=iN(),this.ctx=s,this.canvas=a,this.width=l,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),o.resizeDelay||0),this._dataChanges=[],QL[this.id]=this,s&&a?(qk.listen(this,"complete",qL),qk.listen(this,"progress",XL),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return oN(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return TL}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Nk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ND(this.canvas,this.ctx),this}stop(){return qk.stop(this),this}resize(e,t){qk.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Nk(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),hN(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){pN(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=kL(e,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),pN(i,(t=>{const i=t.options,o=i.id,s=kL(o,i),a=dN(i.type,t.dtype);void 0!==i.position&&YL(i.position,s)===YL(t.dposition)||(i.position=t.dposition),r[o]=!0;let c=null;if(o in n&&n[o].type===a)c=n[o];else{c=new(TL.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[c.id]=c}c.init(i,e)})),pN(r,((e,t)=>{e||delete n[t]})),pN(n,(e=>{XP.configure(this,e,e.options),XP.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(KL("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||OL(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=TL.getController(o),{datasetElementType:r,dataElementType:s}=RD.datasets[o];Object.assign(t,{dataElementType:TL.getElement(s),datasetElementType:r&&TL.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){pN(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,l=this.data.datasets.length;c<l;c++){const{controller:e}=this.getDatasetMeta(c),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||pN(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(KL("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){pN(this.scales,(e=>{XP.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);TN(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){$L(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!TN(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;XP.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],pN(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,CN(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(qk.has(this)?this.attached&&!qk.running(this)&&qk.start(this):(this.draw(),qL({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:eM(n,t,"left"),right:eM(n,t,"right"),top:eM(r,t,"top"),bottom:eM(r,t,"bottom")}:t}(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&LD(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&MD(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return PD(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=MP.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=$D(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);AN(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),qk.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ND(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete QL[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};pN(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},t.isAttached(this.canvas)?s():o()}unbindEvents(){pN(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},pN(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,o,s,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){o=e[s];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!fN(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),o=i(t,e),s=n?e:i(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,o=t,s=this._getActiveElements(e,r,n,o),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),c=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,hN(i.onHover,[e,s,this],this),a&&hN(i.onClick,[e,s,this],this));const l=!fN(s,r);return(l||t)&&(this._active=s,this._updateHoverStyles(s,r,t)),this._lastEvent=c,l}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function nM(){return pN(tM.instances,(e=>e._plugins.invalidate()))}function rM(e,t,n,r){const i=KD(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-t)/2,s=Math.min(o,r*t/2),a=e=>{const t=(n-Math.min(o,e))*r/2;return XN(e,0,Math.min(o,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:XN(i.innerStart,0,s),innerEnd:XN(i.innerEnd,0,s)}}function iM(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function oM(e,t,n,r,i,o){const{x:s,y:a,startAngle:c,pixelMargin:l,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-l,0),h=d>0?d+r+n+l:0;let p=0;const f=i-c;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;p=(f-(0!==e?f*e/(e+r):f))/2}const m=(f-Math.max(.001,f*u-n/RN)/u)/2,g=c+m+p,v=i-m-p,{outerStart:y,outerEnd:_,innerStart:E,innerEnd:b}=rM(t,h,u,v-g),w=u-y,S=u-_,A=g+y/w,C=v-_/S,T=h+E,R=h+b,I=g+E/T,x=v-b/R;if(e.beginPath(),o){const t=(A+C)/2;if(e.arc(s,a,u,A,t),e.arc(s,a,u,t,C),_>0){const t=iM(S,C,s,a);e.arc(t.x,t.y,_,C,v+DN)}const n=iM(R,v,s,a);if(e.lineTo(n.x,n.y),b>0){const t=iM(R,x,s,a);e.arc(t.x,t.y,b,v+DN,x+Math.PI)}const r=(v-b/h+(g+E/h))/2;if(e.arc(s,a,h,v-b/h,r,!0),e.arc(s,a,h,r,g+E/h,!0),E>0){const t=iM(T,I,s,a);e.arc(t.x,t.y,E,I+Math.PI,g-DN)}const i=iM(w,g,s,a);if(e.lineTo(i.x,i.y),y>0){const t=iM(w,A,s,a);e.arc(t.x,t.y,y,g-DN,A)}}else{e.moveTo(s,a);const t=Math.cos(A)*u+s,n=Math.sin(A)*u+a;e.lineTo(t,n);const r=Math.cos(C)*u+s,i=Math.sin(C)*u+a;e.lineTo(r,i)}e.closePath()}function sM(e,t,n,r,i){const{fullCircles:o,startAngle:s,circumference:a,options:c}=t,{borderWidth:l,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=c,p="inner"===c.borderAlign;if(!l)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*l,e.lineJoin=d||"round"):(e.lineWidth=l,e.lineJoin=d||"bevel");let f=t.endAngle;if(o){oM(e,t,n,r,f,i);for(let t=0;t<o;++t)e.stroke();isNaN(a)||(f=s+(a%IN||IN))}p&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:c}=t;let l=i/a;e.beginPath(),e.arc(o,s,a,r-l,n+l),c>i?(l=i/c,e.arc(o,s,c,n+l,r-l,!0)):e.arc(o,s,i,n+DN,r-DN),e.closePath(),e.clip()}(e,t,f),o||(oM(e,t,n,r,f,i),e.stroke())}l(tM,"defaults",RD),l(tM,"instances",QL),l(tM,"overrides",wD),l(tM,"registry",TL),l(tM,"version","4.4.8"),l(tM,"getChart",ZL);class aM extends pL{constructor(e){super(),l(this,"circumference",void 0),l(this,"endAngle",void 0),l(this,"fullCircles",void 0),l(this,"innerRadius",void 0),l(this,"outerRadius",void 0),l(this,"pixelMargin",void 0),l(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=zN(r,{x:e,y:t}),{startAngle:s,endAngle:a,innerRadius:c,outerRadius:l,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=dN(d,a-s),p=qN(i,s,a)&&s!==a,f=h>=IN||p,m=JN(o,c+u,l+u);return f&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:c}=this.options,l=(r+i)/2,d=(o+s+c+a)/2;return{x:t+Math.cos(l)*d,y:n+Math.sin(l)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>IN?Math.floor(n/IN):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*r,Math.sin(s)*r);const a=r*(1-Math.sin(Math.min(RN,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:o,startAngle:s,circumference:a}=t;let c=t.endAngle;if(o){oM(e,t,n,r,c,i);for(let t=0;t<o;++t)e.fill();isNaN(a)||(c=s+(a%IN||IN))}oM(e,t,n,r,c,i),e.fill()}(e,this,a,i,o),sM(e,this,a,i,o),e.restore()}}function cM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=dN(n.borderCapStyle,t.borderCapStyle),e.setLineDash(dN(n.borderDash,t.borderDash)),e.lineDashOffset=dN(n.borderDashOffset,t.borderDashOffset),e.lineJoin=dN(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=dN(n.borderWidth,t.borderWidth),e.strokeStyle=dN(n.borderColor,t.borderColor)}function lM(e,t,n){e.lineTo(n.x,n.y)}function dM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:o=r-1}=n,{start:s,end:a}=t,c=Math.max(i,s),l=Math.min(o,a),d=i<s&&o<s||i>a&&o>a;return{count:r,start:c,loop:t.loop,ilen:l<c&&!d?r+l-c:l-c}}function uM(e,t,n,r){const{points:i,options:o}=t,{count:s,start:a,loop:c,ilen:l}=dM(i,n,r),d=function(e){return e.stepped?jD:e.tension||"monotone"===e.cubicInterpolationMode?UD:lM}(o);let u,h,p,{move:f=!0,reverse:m}=r||{};for(u=0;u<=l;++u)h=i[(a+(m?l-u:u))%s],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):d(e,p,h,m,o.stepped),p=h);return c&&(h=i[(a+(m?l:0))%s],d(e,p,h,m,o.stepped)),!!c}function hM(e,t,n,r){const i=t.points,{count:o,start:s,ilen:a}=dM(i,n,r),{move:c=!0,reverse:l}=r||{};let d,u,h,p,f,m,g=0,v=0;const y=e=>(s+(l?a-e:e))%o,_=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(c&&(u=i[y(0)],e.moveTo(u.x,u.y)),d=0;d<=a;++d){if(u=i[y(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<p?p=n:n>f&&(f=n),g=(v*g+t)/++v):(_(),e.lineTo(t,n),h=r,v=0,p=f=n),m=n}_()}function pM(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?hM:uM}l(aM,"id","arc"),l(aM,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),l(aM,"defaultRoutes",{backgroundColor:"backgroundColor"}),l(aM,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const fM="function"===typeof Path2D;function mM(e,t,n,r){fM&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),cM(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:o}=t,s=pM(t);for(const a of i)cM(e,o,a.style),e.beginPath(),s(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class gM extends pL{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Ek(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const o=!!e._loop,{start:s,end:a}=function(e,t,n,r){let i=0,o=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}(n,i,o,r);return zk(e,!0===r?[{start:s,end:a,loop:o}]:function(e,t,n,r){const i=e.length,o=[];let s,a=t,c=e[t];for(s=t+1;s<=n;++s){const n=e[s%i];n.skip||n.stop?c.skip||(r=!1,o.push({start:t%i,end:(s-1)%i,loop:r}),t=a=n.stop?s:null):(a=s,c.skip&&(t=s)),c=n}return null!==a&&o.push({start:t%i,end:a%i,loop:r}),o}(n,s,a<s?a+i:a,!!e._fullLoop&&0===s&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,o=Hk(this,{property:t,start:r,end:r});if(!o.length)return;const s=[],a=function(e){return e.stepped?Lk:e.tension||"monotone"===e.cubicInterpolationMode?Mk:Pk}(n);let c,l;for(c=0,l=o.length;c<l;++c){const{start:l,end:d}=o[c],u=i[l],h=i[d];if(u===h){s.push(u);continue}const p=a(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);p[t]=e[t],s.push(p)}return 1===s.length?s[0]:s}pathSegment(e,t,n){return pM(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=pM(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const s of r)o&=i(e,this,s,{start:t,end:t+n-1});return!!o}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),mM(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function vM(e,t,n,r){const i=e.options,{[n]:o}=e.getProps([n],r);return Math.abs(t-o)<i.radius+i.hitRadius}l(gM,"id","line"),l(gM,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),l(gM,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),l(gM,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class yM extends pL{constructor(e){super(),l(this,"parsed",void 0),l(this,"skip",void 0),l(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return vM(this,e,"x",t)}inYRange(e,t){return vM(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!PD(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,DD(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function _M(e,t){const{x:n,y:r,base:i,width:o,height:s}=e.getProps(["x","y","base","width","height"],t);let a,c,l,d,u;return e.horizontal?(u=s/2,a=Math.min(n,i),c=Math.max(n,i),l=r-u,d=r+u):(u=o/2,a=n-u,c=n+u,l=Math.min(r,i),d=Math.max(r,i)),{left:a,top:l,right:c,bottom:d}}function EM(e,t,n,r){return e?0:XN(t,n,r)}function bM(e){const t=_M(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,o=qD(r);return{t:EM(i.top,o.top,0,n),r:EM(i.right,o.right,0,t),b:EM(i.bottom,o.bottom,0,n),l:EM(i.left,o.left,0,t)}}(e,n/2,r/2),o=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=XD(i),s=Math.min(t,n),a=e.borderSkipped,c=r||aN(i);return{topLeft:EM(!c||a.top||a.left,o.topLeft,0,s),topRight:EM(!c||a.top||a.right,o.topRight,0,s),bottomLeft:EM(!c||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:EM(!c||a.bottom||a.right,o.bottomRight,0,s)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function wM(e,t,n,r){const i=null===t,o=null===n,s=e&&!(i&&o)&&_M(e,r);return s&&(i||JN(t,s.left,s.right))&&(o||JN(n,s.top,s.bottom))}function SM(e,t){e.rect(t.x,t.y,t.w,t.h)}function AM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-r,s=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+o,h:e.h+s,radius:e.radius}}l(yM,"id","point"),l(yM,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),l(yM,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class CM extends pL{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=bM(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?WD:SM;var a;e.save(),o.w===i.w&&o.h===i.h||(e.beginPath(),s(e,AM(o,t,i)),e.clip(),s(e,AM(i,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,AM(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return wM(this,e,t,n)}inXRange(e,t){return wM(this,e,null,t)}inYRange(e,t){return wM(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}l(CM,"id","bar"),l(CM,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),l(CM,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const TM=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class RM extends pL{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=hN(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=QD(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=TM(n,i);let c,l;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,l=this._fitRows(o,i,s,a)+10):(l=this.maxHeight,c=this._fitCols(o,r,s,a)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(l,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],l=r+s;let d=e;i.textAlign="left",i.textBaseline="middle";let u=-1,h=-l;return this.legendItems.forEach(((e,p)=>{const f=n+t/2+i.measureText(e.text).width;(0===p||c[c.length-1]+f+2*s>o)&&(d+=l,c[c.length-(p>0?0:1)]=0,h+=l,u++),a[p]={left:0,top:h,row:u,width:f,height:r},c[c.length-1]+=f+s})),d}_fitCols(e,t,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],l=o-e;let d=s,u=0,h=0,p=0,f=0;return this.legendItems.forEach(((e,o)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const o=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),s=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=IM(t,n));return r}(i,r,t.lineHeight);return{itemWidth:o,itemHeight:s}}(n,t,i,e,r);o>0&&h+g+2*s>l&&(d+=u+s,c.push({width:u,height:h}),p+=u+s,f++,u=h=0),a[o]={left:p,top:h,col:f,width:m,height:g},u=Math.max(u,m),h+=g+s})),d+=u,c.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,o=jk(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=sD(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,s=sD(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let i=0,s=sD(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,s=sD(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;LD(e,this),this._draw(),MD(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,s=RD.color,a=jk(e.rtl,this.left,this.width),c=QD(o.font),{padding:l}=o,d=c.size,u=d/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:p,boxHeight:f,itemHeight:m}=TM(o,d),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:sD(i,this.left+l,this.right-n[0]),y:this.top+l+v,line:0}:{x:this.left+l,y:sD(i,this.top+v+l,this.bottom-t[0].height),line:0},Uk(this.ctx,e.textDirection);const y=m+l;this.legendItems.forEach(((_,E)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const b=r.measureText(_.text).width,w=a.textAlign(_.textAlign||(_.textAlign=o.textAlign)),S=p+u+b;let A=h.x,C=h.y;a.setWidth(this.width),g?E>0&&A+S+l>this.right&&(C=h.y+=y,h.line++,A=h.x=sD(i,this.left+l,this.right-n[h.line])):E>0&&C+y>this.bottom&&(A=h.x=A+t[h.line].width+l,h.line++,C=h.y=sD(i,this.top+v+l,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;r.save();const i=dN(n.lineWidth,1);if(r.fillStyle=dN(n.fillStyle,s),r.lineCap=dN(n.lineCap,"butt"),r.lineDashOffset=dN(n.lineDashOffset,0),r.lineJoin=dN(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=dN(n.strokeStyle,s),r.setLineDash(dN(n.lineDash,[])),o.usePointStyle){const s={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},c=a.xPlus(e,p/2);kD(r,s,c,t+u,o.pointStyleWidth&&p)}else{const o=t+Math.max((d-f)/2,0),s=a.leftForLtr(e,p),c=XD(n.borderRadius);r.beginPath(),Object.values(c).some((e=>0!==e))?WD(r,{x:s,y:o,w:p,h:f,radius:c}):r.rect(s,o,p,f),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(A),C,_),A=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(w,A+p+u,g?A+S:this.right,e.rtl),function(e,t,n){VD(r,n.text,e,t+m/2,c,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(A),C,_),g)h.x+=S+l;else if("string"!==typeof _.text){const e=c.lineHeight;h.y+=IM(_,e)+l}else h.y+=y})),Bk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=QD(t.font),r=JD(t.padding);if(!t.display)return;const i=jk(e.rtl,this.left,this.width),o=this.ctx,s=t.position,a=n.size/2,c=r.top+a;let l,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),l=this.top+c,d=sD(e.align,d,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);l=c+sD(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=sD(s,d,d+u);o.textAlign=i.textAlign(oD(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,VD(o,t.text,h,l,n)}_computeTitleHeight(){const e=this.options.title,t=QD(e.font),n=JD(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(JN(e,this.left,this.right)&&JN(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],JN(e,r.left,r.left+r.width)&&JN(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&hN(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&hN(t.onHover,[e,n,this],this)}else n&&hN(t.onClick,[e,n,this],this)}}function IM(e,t){return t*(e.text?e.text.length:0)}var xM={id:"legend",_element:RM,start(e,t,n){const r=e.legend=new RM({ctx:e.ctx,options:n,chart:e});XP.configure(e,r,n),XP.addBox(e,r)},stop(e){XP.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;XP.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const c=e.controller.getStyle(n?0:void 0),l=JD(c.borderWidth);return{text:t[e.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:s&&(a||c.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class OM extends pL{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=sN(n.text)?n.text.length:1;this._padding=JD(n.padding);const i=r*QD(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:o}=this,s=o.align;let a,c,l,d=0;return this.isHorizontal()?(c=sD(s,n,i),l=t+e,a=i-n):("left"===o.position?(c=n+e,l=sD(s,r,t),d=-.5*RN):(c=i-e,l=sD(s,t,r),d=.5*RN),a=r-t),{titleX:c,titleY:l,maxWidth:a,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=QD(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);VD(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:a,textAlign:oD(t.align),textBaseline:"middle",translation:[i,o]})}}var NM={id:"title",_element:OM,start(e,t,n){!function(e,t){const n=new OM({ctx:e.ctx,options:t,chart:e});XP.configure(e,n,t),XP.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;XP.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;XP.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const DM={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++o}}if(0===o||0===r.size)return!1;const s=[...r].reduce(((e,t)=>e+t))/r.size;return{x:s,y:i/o}},nearest(e,t){if(!e.length)return!1;let n,r,i,o=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=GN(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();o=e.x,s=e.y}return{x:o,y:s}}};function kM(e,t){return t&&(sN(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function PM(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function LM(e,t){const{element:n,datasetIndex:r,index:i}=t,o=e.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:e,label:s,parsed:o.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function MM(e,t){const n=e.chart.ctx,{body:r,footer:i,title:o}=e,{boxWidth:s,boxHeight:a}=t,c=QD(t.bodyFont),l=QD(t.titleFont),d=QD(t.footerFont),u=o.length,h=i.length,p=r.length,f=JD(t.padding);let m=f.height,g=0,v=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*l.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v){m+=p*(t.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(v-p)*c.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const _=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=l.string,pN(e.title,_),n.font=c.string,pN(e.beforeBody.concat(e.afterBody),_),y=t.displayColors?s+2+t.boxPadding:0,pN(r,(e=>{pN(e.before,_),pN(e.lines,_),pN(e.after,_)})),y=0,n.font=d.string,pN(e.footer,_),n.restore(),g+=f.width,{width:g,height:m}}function jM(e,t,n,r){const{x:i,width:o}=n,{width:s,chartArea:{left:a,right:c}}=e;let l="center";return"center"===r?l=i<=(a+c)/2?"left":"right":i<=o/2?l="left":i>=s-o/2&&(l="right"),function(e,t,n,r){const{x:i,width:o}=r,s=n.caretSize+n.caretPadding;return"left"===e&&i+o+s>t.width||"right"===e&&i-o-s<0||void 0}(l,e,t,n)&&(l="center"),l}function UM(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||jM(e,t,n,r),yAlign:r}}function BM(e,t,n,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:c}=n,l=i+o,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=XD(s);let f=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,c,l);return"center"===c?"left"===a?f+=l:"right"===a&&(f-=l):"left"===a?f-=Math.max(d,h)+i:"right"===a&&(f+=Math.max(u,p)+i),{x:XN(f,0,r.width-t.width),y:XN(m,0,r.height-t.height)}}function FM(e,t,n){const r=JD(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function VM(e){return kM([],PM(e))}function WM(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const HM={beforeTitle:rN,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:rN,beforeBody:rN,beforeLabel:rN,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return oN(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:rN,afterBody:rN,beforeFooter:rN,footer:rN,afterFooter:rN};function zM(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?HM[t].call(n,r):i}class GM extends pL{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new Zk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=function(e,t,n){return $D(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,r=zM(n,"beforeTitle",this,e),i=zM(n,"title",this,e),o=zM(n,"afterTitle",this,e);let s=[];return s=kM(s,PM(r)),s=kM(s,PM(i)),s=kM(s,PM(o)),s}getBeforeBody(e,t){return VM(zM(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return pN(e,(e=>{const t={before:[],lines:[],after:[]},i=WM(n,e);kM(t.before,PM(zM(i,"beforeLabel",this,e))),kM(t.lines,zM(i,"label",this,e)),kM(t.after,PM(zM(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return VM(zM(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=zM(n,"beforeFooter",this,e),i=zM(n,"footer",this,e),o=zM(n,"afterFooter",this,e);let s=[];return s=kM(s,PM(r)),s=kM(s,PM(i)),s=kM(s,PM(o)),s}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],o=[];let s,a,c=[];for(s=0,a=t.length;s<a;++s)c.push(LM(this.chart,t[s]));return e.filter&&(c=c.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(c=c.sort(((t,r)=>e.itemSort(t,r,n)))),pN(c,(t=>{const n=WM(e.callbacks,t);r.push(zM(n,"labelColor",this,t)),i.push(zM(n,"labelPointStyle",this,t)),o.push(zM(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=c,c}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const e=DM[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=MM(this,n),s=Object.assign({},e,t),a=UM(this.chart,n,s),c=BM(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:c.x,y:c.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:c,bottomLeft:l,bottomRight:d}=XD(s),{x:u,y:h}=e,{width:p,height:f}=t;let m,g,v,y,_,E;return"center"===i?(_=h+f/2,"left"===r?(m=u,g=m-o,y=_+o,E=_-o):(m=u+p,g=m+o,y=_-o,E=_+o),v=m):(g="left"===r?u+Math.max(a,l)+o:"right"===r?u+p-Math.max(c,d)-o:this.caretX,"top"===i?(y=h,_=y-o,m=g-o,v=g+o):(y=h+f,_=y+o,m=g+o,v=g-o),E=y),{x1:m,x2:g,x3:v,y1:y,y2:_,y3:E}}drawTitle(e,t,n){const r=this.title,i=r.length;let o,s,a;if(i){const c=jk(n.rtl,this.x,this.width);for(e.x=FM(this,n.titleAlign,n),t.textAlign=c.textAlign(n.titleAlign),t.textBaseline="middle",o=QD(n.titleFont),s=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,a=0;a<i;++a)t.fillText(r[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,a+1===i&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,t,n,r,i){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:c}=i,l=QD(i.bodyFont),d=FM(this,"left",i),u=r.x(d),h=a<l.lineHeight?(l.lineHeight-a)/2:0,p=t.y+h;if(i.usePointStyle){const t={radius:Math.min(c,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(u,c)+c/2,l=p+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,DD(e,t,n,l),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,DD(e,t,n,l)}else{e.lineWidth=aN(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=r.leftForLtr(u,c),n=r.leftForLtr(r.xPlus(u,1),c-2),s=XD(o.borderRadius);Object.values(s).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,WD(e,{x:t,y:p,w:c,h:a,radius:s}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),WD(e,{x:n,y:p+1,w:c-2,h:a-2,radius:s}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,p,c,a),e.strokeRect(t,p,c,a),e.fillStyle=o.backgroundColor,e.fillRect(n,p+1,c-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:c,boxPadding:l}=n,d=QD(n.bodyFont);let u=d.lineHeight,h=0;const p=jk(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+u/2),e.y+=u+i},m=p.textAlign(o);let g,v,y,_,E,b,w;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=FM(this,m,n),t.fillStyle=n.bodyColor,pN(this.beforeBody,f),h=s&&"right"!==m?"center"===o?c/2+l:c+2+l:0,_=0,b=r.length;_<b;++_){for(g=r[_],v=this.labelTextColors[_],t.fillStyle=v,pN(g.before,f),y=g.lines,s&&y.length&&(this._drawColorBox(t,e,_,p,n),u=Math.max(d.lineHeight,a)),E=0,w=y.length;E<w;++E)f(y[E]),u=d.lineHeight;pN(g.after,f)}h=0,u=d.lineHeight,pN(this.afterBody,f),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let o,s;if(i){const a=jk(n.rtl,this.x,this.width);for(e.x=FM(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",o=QD(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,s=0;s<i;++s)t.fillText(r[s],a.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:o}=this,{x:s,y:a}=e,{width:c,height:l}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=XD(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+d,a),"top"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+c-u,a),t.quadraticCurveTo(s+c,a,s+c,a+u),"center"===o&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(s+c,a+l-p),t.quadraticCurveTo(s+c,a+l,s+c-p,a+l),"bottom"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+h,a+l),t.quadraticCurveTo(s,a+l,s,a+l-h),"center"===o&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(s,a+d),t.quadraticCurveTo(s,a,s+d,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=DM[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=MM(this,e),s=Object.assign({},n,this._size),a=UM(t,e,s),c=BM(e,s,a,t);r._to===c.x&&i._to===c.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=JD(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),Uk(e,t.textDirection),i.y+=o.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),Bk(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!fN(n,r),o=this._positionChanged(r,t);(i||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,t,n),s=this._positionChanged(o,e),a=t||!fN(o,i)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,o=DM[i.position].call(this,e,t);return!1!==o&&(n!==o.x||r!==o.y)}}l(GM,"positioners",DM);var YM={id:"tooltip",_element:GM,positioners:DM,afterInit(e,t,n){n&&(e.tooltip=new GM({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",u(u({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:HM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function KM(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function qM(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class XM extends SL{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(oN(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:XN(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:KM(n,e,dN(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return qM.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function JM(e,t){const n=[],{bounds:r,step:i,min:o,max:s,precision:a,count:c,maxTicks:l,maxDigits:d,includeBounds:u}=e,h=i||1,p=l-1,{min:f,max:m}=t,g=!oN(o),v=!oN(s),y=!oN(c),_=(m-f)/(d+1);let E,b,w,S,A=UN((m-f)/p/h)*h;if(A<1e-14&&!g&&!v)return[{value:f},{value:m}];S=Math.ceil(m/A)-Math.floor(f/A),S>p&&(A=UN(S*A/p/h)*h),oN(a)||(E=Math.pow(10,a),A=Math.ceil(A*E)/E),"ticks"===r?(b=Math.floor(f/A)*A,w=Math.ceil(m/A)*A):(b=f,w=m),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((s-o)/i,A/1e3)?(S=Math.round(Math.min((s-o)/A,l)),A=(s-o)/S,b=o,w=s):y?(b=g?o:b,w=v?s:w,S=c-1,A=(w-b)/S):(S=(w-b)/A,S=jN(S,Math.round(S),A/1e3)?Math.round(S):Math.ceil(S));const C=Math.max(HN(A),HN(b));E=Math.pow(10,oN(a)?C:a),b=Math.round(b*E)/E,w=Math.round(w*E)/E;let T=0;for(g&&(u&&b!==o?(n.push({value:o}),b<o&&T++,jN(Math.round((b+T*A)*E)/E,o,QM(o,_,e))&&T++):b<o&&T++);T<S;++T){const e=Math.round((b+T*A)*E)/E;if(v&&e>s)break;n.push({value:e})}return v&&u&&w!==s?n.length&&jN(n[n.length-1].value,s,QM(s,_,e))?n[n.length-1].value=s:n.push({value:s}):v&&w!==s||n.push({value:w}),n}function QM(e,t,n){let{horizontal:r,minRotation:i}=n;const o=VN(i),s=(r?Math.sin(o):Math.cos(o))||.001,a=.75*t*(""+e).length;return Math.min(t/s,a)}l(XM,"id","category"),l(XM,"defaults",{ticks:{callback:qM}});class ZM extends SL{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return oN(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=e=>r=t?r:e,s=e=>i=n?i:e;if(e){const e=MN(r),t=MN(i);e<0&&t<0?s(0):e>0&&t>0&&o(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);s(i+t),e||o(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=JM({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&FN(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return _D(e,this.chart.options.locale,this.options.ticks.format)}}class $M extends ZM{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=cN(e)?e:0,this.max=cN(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=VN(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}l($M,"id","linear"),l($M,"defaults",{ticks:{callback:bD.formatters.numeric}});const ej=e=>Math.floor(LN(e)),tj=(e,t)=>Math.pow(10,ej(e)+t);function nj(e){return 1===e/Math.pow(10,ej(e))}function rj(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function ij(e,t){let{min:n,max:r}=t;n=lN(e.min,n);const i=[],o=ej(n);let s=function(e,t){let n=ej(t-e);for(;rj(e,t,n)>10;)n++;for(;rj(e,t,n)<10;)n--;return Math.min(n,ej(e))}(n,r),a=s<0?Math.pow(10,Math.abs(s)):1;const c=Math.pow(10,s),l=o>s?Math.pow(10,o):0,d=Math.round((n-l)*a)/a,u=Math.floor((n-l)/c/10)*c*10;let h=Math.floor((d-u)/Math.pow(10,s)),p=lN(e.min,Math.round((l+u+h*Math.pow(10,s))*a)/a);for(;p<r;)i.push({value:p,major:nj(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,a=s>=0?1:a),p=Math.round((l+u+h*Math.pow(10,s))*a)/a;const f=lN(e.max,p);return i.push({value:f,major:nj(f),significand:h}),i}class oj extends SL{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=ZM.prototype.parse.apply(this,[e,t]);if(0!==n)return cN(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=cN(e)?Math.max(0,e):null,this.max=cN(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!cN(this._userMin)&&(this.min=e===tj(this.min,0)?tj(this.min,-1):tj(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,o=e=>r=t?r:e;n===r&&(n<=0?(i(1),o(10)):(i(tj(n,-1)),o(tj(r,1)))),n<=0&&i(tj(r,-1)),r<=0&&o(tj(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=ij({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&FN(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":_D(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=LN(e),this._valueRange=LN(this.max)-LN(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(LN(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function sj(e){const t=e.ticks;if(t.display&&e.display){const e=JD(t.backdropPadding);return dN(t.font&&t.font.size,RD.font.size)+e.height}return 0}function aj(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function cj(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],o=e._pointLabels.length,s=e.options.pointLabels,a=s.centerPointLabels?RN/o:0;for(let u=0;u<o;u++){const o=s.setContext(e.getPointLabelContext(u));i[u]=o.padding;const h=e.getPointPosition(u,e.drawingArea+i[u],a),p=QD(o.font),f=(c=e.ctx,l=p,d=sN(d=e._pointLabels[u])?d:[d],{w:xD(c,l.string,d),h:d.length*l.lineHeight});r[u]=f;const m=KN(e.getIndexAngle(u)+a),g=Math.round(WN(m));lj(n,t,m,aj(g,h.x,f.w,0,180),aj(g,h.y,f.h,90,270))}var c,l,d;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,o=e.options,{centerPointLabels:s,display:a}=o.pointLabels,c={extra:sj(o)/2,additionalAngle:s?RN/i:0};let l;for(let d=0;d<i;d++){c.padding=n[d],c.size=t[d];const i=dj(e,d,c);r.push(i),"auto"===a&&(i.visible=uj(i,l),i.visible&&(l=i))}return r}(e,r,i)}function lj(e,t,n,r,i){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,c=0;r.start<t.l?(a=(t.l-r.start)/o,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(c=(t.t-i.start)/s,e.t=Math.min(e.t,t.t-c)):i.end>t.b&&(c=(i.end-t.b)/s,e.b=Math.max(e.b,t.b+c))}function dj(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=n,c=e.getPointPosition(t,r+i+s,o),l=Math.round(WN(KN(c.angle+DN))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(c.y,a.h,l),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(l),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(c.x,a.w,u);return{visible:!0,x:c.x,y:d,textAlign:u,left:h,top:d,right:h+a.w,bottom:d+a.h}}function uj(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:o}=e;return!(PD({x:n,y:r},t)||PD({x:n,y:o},t)||PD({x:i,y:r},t)||PD({x:i,y:o},t))}function hj(e,t,n){const{left:r,top:i,right:o,bottom:s}=n,{backdropColor:a}=t;if(!oN(a)){const n=XD(t.borderRadius),c=JD(t.backdropPadding);e.fillStyle=a;const l=r-c.left,d=i-c.top,u=o-r+c.width,h=s-i+c.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),WD(e,{x:l,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(l,d,u,h)}}function pj(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,IN);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=e.getPointPosition(o,t),i.lineTo(n.x,n.y)}}l(oj,"id","logarithmic"),l(oj,"defaults",{ticks:{callback:bD.formatters.logarithmic,major:{enabled:!0}}});class fj extends ZM{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=JD(sj(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=cN(e)&&!isNaN(e)?e:0,this.max=cN(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/sj(this.options))}generateTickLabels(e){ZM.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=hN(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?cj(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return KN(e*(IN/(this._pointLabels.length||1))+VN(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(oN(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(oN(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return $D(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-DN+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),pj(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,o=this._pointLabels.length;let s,a,c;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const o=r.setContext(e.getPointLabelContext(i));hj(n,o,t);const s=QD(o.font),{x:a,y:c,textAlign:l}=t;VD(n,e._pointLabels[i],a,c+s.lineHeight/2,s,{color:o.color,textAlign:l,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),s=r.setContext(n),c=i.setContext(n);!function(e,t,n,r,i){const o=e.ctx,s=t.circular,{color:a,lineWidth:c}=t;!s&&!r||!a||!c||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),pj(e,n,s,r),o.closePath(),o.stroke(),o.restore())}(this,s,a,o,c)}})),n.display){for(e.save(),s=o-1;s>=0;s--){const r=n.setContext(this.getPointLabelContext(s)),{color:i,lineWidth:o}=r;o&&i&&(e.lineWidth=o,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(s,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,s)=>{if(0===s&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(s)),c=QD(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){e.font=c.string,o=e.measureText(r.label).width,e.fillStyle=a.backdropColor;const t=JD(a.backdropPadding);e.fillRect(-o/2-t.left,-i-c.size/2-t.top,o+t.width,c.size+t.height)}VD(e,r.label,0,-i,c,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}l(fj,"id","radialLinear"),l(fj,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:bD.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),l(fj,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),l(fj,"descriptors",{angleLines:{_fallback:"grid"}});const mj={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},gj=Object.keys(mj);function vj(e,t){return e-t}function yj(e,t){if(oN(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:o}=e._parseOpts;let s=t;return"function"===typeof r&&(s=r(s)),cN(s)||(s="string"===typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!BN(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function _j(e,t,n,r){const i=gj.length;for(let o=gj.indexOf(e);o<i-1;++o){const e=mj[gj[o]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return gj[o]}return gj[i-1]}function Ej(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=QN(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function bj(e,t,n){const r=[],i={},o=t.length;let s,a;for(s=0;s<o;++s)a=t[s],i[a]=s,r.push({value:a,major:!1});return 0!==o&&n?function(e,t,n,r){const i=e._adapter,o=+i.startOf(t[0].value,r),s=t[t.length-1].value;let a,c;for(a=o;a<=s;a=+i.add(a,1,r))c=n[a],c>=0&&(t[c].major=!0);return t}(e,r,i,n):r}class wj extends SL{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new xP(e.adapters.date);r.init(t),_N(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:yj(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();function a(e){o||isNaN(e.min)||(r=Math.min(r,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}o&&s||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),r=cN(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=cN(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?_j(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let o=gj.length-1;o>=gj.indexOf(n);o--){const n=gj[o];if(mj[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return gj[n?gj.indexOf(n):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=gj.indexOf(e)+1,n=gj.length;t<n;++t)if(mj[gj[t]].common)return gj[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),bj(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const o=n.length<3?.5:.25;r=XN(r,0,o),i=XN(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||_j(i.minUnit,t,n,this._getLabelCapacity(t)),s=dN(r.ticks.stepSize,1),a="week"===o&&i.isoWeekday,c=BN(a)||!0===a,l={};let d,u,h=t;if(c&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,c?"day":o),e.diff(n,t,o)>1e5*s)throw new Error(t+" and "+n+" are too far apart with stepSize of "+s+" "+o);const p="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,s,o),u++)Ej(l,d,p);return d!==n&&"ticks"!==r.bounds&&1!==u||Ej(l,d,p),Object.keys(l).sort(vj).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,o=i.ticks.callback;if(o)return hN(o,[e,t,n],this);const s=i.time.displayFormats,a=this._unit,c=this._majorUnit,l=a&&s[a],d=c&&s[c],u=n[t],h=c&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:l))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=VN(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*o,h:n*o+s*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,bj(this,[e],this._majorUnit),r),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(yj(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return nD(e.sort(vj))}}function Sj(e,t,n){let r,i,o,s,a=0,c=e.length-1;n?(t>=e[a].pos&&t<=e[c].pos&&({lo:a,hi:c}=ZN(e,"pos",t)),({pos:r,time:o}=e[a]),({pos:i,time:s}=e[c])):(t>=e[a].time&&t<=e[c].time&&({lo:a,hi:c}=ZN(e,"time",t)),({time:r,pos:o}=e[a]),({time:i,pos:s}=e[c]));const l=i-r;return l?o+(s-o)*(t-r)/l:o}l(wj,"id","time"),l(wj,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Aj extends wj{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Sj(t,this.min),this._tableRange=Sj(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let o,s,a,c,l;for(o=0,s=e.length;o<s;++o)c=e[o],c>=t&&c<=n&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,s=r.length;o<s;++o)l=r[o+1],a=r[o-1],c=r[o],Math.round((l+a)/2)!==c&&i.push({time:c,pos:o/(s-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Sj(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Sj(this._table,n*this._tableRange+this._minPos,!0)}}l(Aj,"id","timeseries"),l(Aj,"defaults",wj.defaults);const Cj=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Tj="label";function Rj(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Ij(e,t){e.labels=t}function xj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tj;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):u({},t)}))}function Oj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tj;const n={labels:[],datasets:[]};return Ij(n,e.labels),xj(n,e.datasets,t),n}function Nj(e,n){const{height:r=150,width:i=300,redraw:o=!1,datasetIdKey:a,type:c,data:l,options:d,plugins:h=[],fallbackContent:p,updateMode:f}=e,m=s(e,Cj),g=(0,t.useRef)(null),v=(0,t.useRef)(null),y=()=>{g.current&&(v.current=new tM(g.current,{type:c,data:Oj(l,a),options:d&&u({},d),plugins:h}),Rj(n,v.current))},_=()=>{Rj(n,null),v.current&&(v.current.destroy(),v.current=null)};return(0,t.useEffect)((()=>{!o&&v.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(v.current,d)}),[o,d]),(0,t.useEffect)((()=>{!o&&v.current&&Ij(v.current.config.data,l.labels)}),[o,l.labels]),(0,t.useEffect)((()=>{!o&&v.current&&l.datasets&&xj(v.current.config.data,l.datasets,a)}),[o,l.datasets]),(0,t.useEffect)((()=>{v.current&&(o?(_(),setTimeout(y)):v.current.update(f))}),[o,d,l.labels,l.datasets,f]),(0,t.useEffect)((()=>{v.current&&(_(),setTimeout(y))}),[c]),(0,t.useEffect)((()=>(y(),()=>_())),[]),t.createElement("canvas",u({ref:g,role:"img",height:r,width:i},m),p)}const Dj=(0,t.forwardRef)(Nj);function kj(e,n){return tM.register(n),(0,t.forwardRef)(((n,r)=>t.createElement(Dj,u(u({},n),{},{ref:r,type:e}))))}const Pj=kj("bar",_P);tM.register(XM,$M,CM,NM,YM,xM);const Lj=()=>{const[e,n]=(0,t.useState)({labels:[],datasets:[{label:"S\u1ed1 l\u01b0\u1ee3t \u0111\u1eb7t gi\xe1",data:[],backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Gi\xe1 trung b\xecnh (VN\u0110)",data:[],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]}),[r,i]=(0,t.useState)({labels:[],datasets:[{label:"T\u1ed5ng s\u1ed1 ti\u1ec1n \u0111\xe3 \u0111\u1ea5u gi\xe1 th\xe0nh c\xf4ng (VN\u0110)",data:[],backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Admin nh\u1eadn 2% (VN\u0110)",data:[],backgroundColor:"rgba(255, 206, 86, 0.6)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:1}]});(0,t.useEffect)((()=>{xi.get("https://be-pjhk4.onrender.com/api/bidding/statistics").then((e=>{const t=e.data,r=Object.keys(t),i=r.map((e=>t[e].count)),o=r.map((e=>t[e].avgPrice));n({labels:r,datasets:[{label:"S\u1ed1 l\u01b0\u1ee3t \u0111\u1eb7t gi\xe1",data:i,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Gi\xe1 trung b\xecnh (VN\u0110)",data:o,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]})})).catch((e=>console.error("L\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u:",e))),xi.get("https://be-pjhk4.onrender.com/api/bidding/successful-bidding").then((e=>{const t=e.data,n=Object.keys(t),r=n.map((e=>t[e].totalBiddingAmount)),o=n.map((e=>t[e].adminEarnings));i({labels:n,datasets:[{label:"T\u1ed5ng s\u1ed1 ti\u1ec1n \u0111\xe3 \u0111\u1ea5u gi\xe1 th\xe0nh c\xf4ng (VN\u0110)",data:r,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Admin nh\u1eadn 2% (VN\u0110)",data:o,backgroundColor:"rgba(255, 206, 86, 0.6)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:1}]})})).catch((e=>console.error("L\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u:",e)))}),[]);const[o,s]=(0,t.useState)(0);return(0,t.useEffect)((()=>{xi.get("https://be-pjhk4.onrender.com/api/bidding/admin-earnings").then((e=>{s(e.data.totalAdminEarnings)})).catch((e=>console.error("L\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u:",e)))}),[]),(0,Va.jsxs)("div",{className:"product-sales",children:[(0,Va.jsx)("h1",{children:"Auction Statistics"}),(0,Va.jsx)(Pj,{data:e,options:{responsive:!0,plugins:{title:{display:!0,text:"S\u1ed1 l\u01b0\u1ee3t \u0111\u1eb7t gi\xe1 & Gi\xe1 trung b\xecnh"}}}}),(0,Va.jsx)("h2",{children:"Successful Bid Statistics"}),(0,Va.jsx)(Pj,{data:r,options:{responsive:!0,plugins:{title:{display:!0,text:"T\u1ed5ng s\u1ed1 ti\u1ec1n \u0111\u1ea5u gi\xe1 & 2% ph\xed admin"}}}}),(0,Va.jsxs)("div",{className:"product-sales",children:[(0,Va.jsx)("h1",{children:"Auction Statistics"}),(0,Va.jsxs)("div",{className:"admin-earnings",children:[(0,Va.jsx)("h2",{children:"Total amount Admin received:"}),(0,Va.jsx)("p",{children:(0,Va.jsxs)("strong",{children:[o.toLocaleString()," VN\u0110"]})})]})]})]})};var Mj,jj="https://js.stripe.com",Uj="".concat(jj,"/v3"),Bj=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Fj=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Vj="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Wj=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Uj).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},Hj=null,zj=null,Gj=null,Yj=function(e){return null!==Hj?Hj:(Hj=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(Vj),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e,t=document.querySelectorAll('script[src^="'.concat(jj,'"]')),n=0;n<t.length;n++){var r=t[n];if(e=r.src,Bj.test(e)||Fj.test(e))return r}return null}();if(r&&e)console.warn(Vj);else if(r){if(r&&null!==Gj&&null!==zj){var i;r.removeEventListener("load",Gj),r.removeEventListener("error",zj),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=Wj(e)}}else r=Wj(e);Gj=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),zj=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",Gj),r.addEventListener("error",zj)}catch(o){return void n(o)}else t(null)})),Hj.catch((function(e){return Hj=null,Promise.reject(e)})))},Kj=!1,qj=function(){return Mj||(Mj=Yj(null).catch((function(e){return Mj=null,Promise.reject(e)})))};Promise.resolve().then((function(){return qj()})).catch((function(e){Kj||console.warn(e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Kj=!0;var r=Date.now();qj().then((function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),i=function(e){return 3===e?"v3":e}(e.version);r&&"v3"!==i&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var o=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:t})}(o,n),o}(e,t,r)}))}("pk_test_51QzXY62NueUWgxdg6B8LQaTl7VMRdQYocaXHVvi20N3WxUE08zM5gg9JPlRcDZCMNIMXw7ZLsj7YwV6QacadD26L00phbNL9px");const Xj=e=>{let{productId:t}=e;return(0,Va.jsx)("button",{onClick:async()=>{try{const e=await xi.post("https://be-pjhk4.onrender.com/api/stripe/create-checkout-session/".concat(t));window.location.href=e.data.url}catch(e){console.error("\u274c L\u1ed7i t\u1ea1o session Stripe:",e)}},className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Thanh to\xe1n ngay"})},Jj=()=>{const e=pe();return(0,Va.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-red-100",children:[(0,Va.jsx)("h1",{className:"text-2xl font-bold text-red-600",children:"Thanh to\xe1n th\u1ea5t b\u1ea1i!"}),(0,Va.jsx)("p",{className:"mt-4 text-lg",children:"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh thanh to\xe1n."}),(0,Va.jsx)("button",{className:"mt-6 px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition",onClick:()=>e("/profile-page"),children:"Quay v\u1ec1 trang ch\u1ee7"})]})};const Qj=function(){const e=pe(),n=vv(),{token:r,isLoggedIn:i}=ov((e=>e.auth)),{isLoading:o,products:s,productsBidding:a}=ov((e=>e.product)),[c,l]=(0,t.useState)(""),[d,u]=(0,t.useState)(null),h=(0,t.useRef)([]),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(localStorage.getItem("isIntrospect")||!1),[_,E]=(0,t.useState)([]),[b,w]=(0,t.useState)([]);(0,t.useEffect)((()=>{n(pb({page:0,size:0}))}),[n]);const S=(0,KI.debounce)((()=>{n(fb())}),3e3);(0,t.useEffect)((()=>{n(fb())}),[]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const t=rb(e);f(t.userid)}catch(t){console.error("Error decoding token:",t.message)}}),[]),(0,t.useEffect)((()=>{Array.isArray(a)&&a.length>0&&(h.current=[...a])}),[a]),(0,t.useEffect)((()=>{i&&p&&A()}),[i,v,p]);const A=async()=>{if(v&&p)try{const e=await Pg.get("bidding/notification/"+p,{authRequired:!0});0===e.code&&(n(Ab(e.result)),w(e.result),E(e.result))}catch(e){console.log(e)}};(0,t.useEffect)((()=>{const e=localStorage.getItem("token");if(!Array.isArray(a))return;const t=setInterval((async()=>{if(m||o)return;g(!0),S();const t=new Date;console.log("Checking for expired products...");const n=a.filter((e=>{if(!Array.isArray(e.end_date)||e.end_date.length<3)return!1;const[n,r,i]=e.end_date;return new Date(n,r-1,i)<=t&&!e.isSoldOut}));for(const i of n)if(p)if(console.log("\u26a1 Auction success for: ".concat(i.item_name)),e)try{const t=await Pg.post("/bidding/success/".concat(i.item_id,"/").concat(i.user.id),null,{headers:{Authorization:"Bearer ".concat(e)},timeout:1e4});console.log(t)}catch(r){console.error("Error during auction success for ".concat(i.item_name,":"),r)}else console.log("No token found, skipping auction success.");g(!1)}),432e5);return()=>clearInterval(t)}),[n,p,s,o,m]);const[C,T]=(0,t.useState)("true"===localStorage.getItem("isIntrospect")||!1),[R,I]=(0,t.useState)(C);return(0,t.useEffect)((()=>{r&&n(p_(r))}),[n,r]),(0,t.useEffect)((()=>{C||R||Yg().fire({title:"Login expired, please login again!",confirmButtonText:"Login",customClass:{confirmButton:"swal-confirm-button"}}).then((t=>{t.isConfirmed&&(I(!0),n(g_()),e("/login"))}))}),[C,e,n,R]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token"),t=qb.over((()=>new(Mb())("https://be-pjhk4.onrender.com/ws",null,{withCredentials:!0})));return t.debug=()=>{},t.connect({Authorization:"Bearer ".concat(e)},(()=>{t.subscribe("/topic/notification",(e=>{const t=JSON.parse(e.body);l(t)}))}),(e=>{console.error("WebSocket connection error:",e)})),u(t),()=>{t.connected&&t.disconnect((()=>{console.log("Disconnected from WebSocket")}))}}),[]),(0,t.useEffect)((()=>{c&&n(wb(c))}),[n,c]),(0,Va.jsxs)(Va.Fragment,{children:[(0,Va.jsx)(on,{}),(0,Va.jsx)(yg,{}),(0,Va.jsxs)(Ne,{children:[(0,Va.jsx)(xe,{path:"/",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(sb,{})})}),(0,Va.jsx)(xe,{path:"/profile-page",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(ex,{})})}),(0,Va.jsx)(xe,{path:"/payment",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(Xj,{})})}),(0,Va.jsx)(xe,{path:"/create-room",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(SO,{})})}),(0,Va.jsx)(xe,{path:"/citizen-verify",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(vO,{})})}),(0,Va.jsx)(xe,{path:"/ocr-reader",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(EO,{})})}),(0,Va.jsx)(xe,{path:"/login",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(hI,{})})}),(0,Va.jsx)(xe,{path:"/chat",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(jI,{})})}),(0,Va.jsx)(xe,{path:"/product-list/:productId",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(UI,{})})}),(0,Va.jsx)(xe,{path:"/address",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(qI,{})})}),(0,Va.jsx)(xe,{path:"/search",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(BI,{})})}),(0,Va.jsx)(xe,{path:"/contact",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(gI,{})})}),(0,Va.jsx)(xe,{path:"/room",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(WI,{})})}),(0,Va.jsx)(xe,{path:"/roomchat",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(HI,{})})}),(0,Va.jsx)(xe,{path:"/forgot-password",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(XI,{})})}),(0,Va.jsx)(xe,{path:"/checkout/:id",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(GI,{})})}),(0,Va.jsx)(xe,{path:"/success",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(YI,{})})}),(0,Va.jsx)(xe,{path:"/payment-failed",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(Jj,{})})}),(0,Va.jsx)(xe,{path:"/about",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(SI,{})})}),(0,Va.jsx)(xe,{path:"/blog",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(AI,{})})}),(0,Va.jsx)(xe,{path:"/blog/:id",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(TI,{})})}),(0,Va.jsx)(xe,{path:"/seller/login",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(pI,{})})})}),(0,Va.jsx)(xe,{path:"/register",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(lI,{})})}),(0,Va.jsx)(xe,{path:"/add",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(ew,{})})})})}),(0,Va.jsx)(xe,{path:"/AdminAboutUs",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(ug,{})})})})}),(0,Va.jsx)(xe,{path:"/admin/income",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Nb,{})})})})}),(0,Va.jsx)(xe,{path:"/product/update/:id",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Zb,{})})})})}),(0,Va.jsx)(xe,{path:"/details/:id",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(Xb,{})})}),(0,Va.jsx)(xe,{path:"/dashboard",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(db,{})})})})}),(0,Va.jsx)(xe,{path:"/product",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Jb,{})})})})}),(0,Va.jsx)(xe,{path:"/product/admin",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Rb,{})})})})}),(0,Va.jsx)(xe,{path:"/product/admin/update/:id",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Ib,{})})})})}),(0,Va.jsx)(xe,{path:"/userlist",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(iE,{})})})})}),(0,Va.jsx)(xe,{path:"/admin-blog",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(II,{})})})})}),(0,Va.jsx)(xe,{path:"/admin-blog/detail/:id",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(OI,{})})})})}),(0,Va.jsx)(xe,{path:"/admin-blog/add",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(DI,{})})})})}),(0,Va.jsx)(xe,{path:"/winning-products",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Eg,{})})})})}),(0,Va.jsx)(xe,{path:"/profile",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(fI,{})})})})}),(0,Va.jsx)(xe,{path:"/favorites",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(JI,{})})})})}),(0,Va.jsx)(xe,{path:"/category",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Pb,{})})})})}),(0,Va.jsx)(xe,{path:"/category/create",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Db,{})})})})}),(0,Va.jsx)(xe,{path:"/category/update/:id",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(kb,{})})})})}),(0,Va.jsx)(xe,{path:"/admin-contact",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(_I,{})})})})}),(0,Va.jsx)(xe,{path:"/adminContact/:id",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(bI,{})})})})}),(0,Va.jsx)(xe,{path:"/thongke",element:(0,Va.jsx)(vg,{children:(0,Va.jsx)(QA,{children:(0,Va.jsx)(KA,{children:(0,Va.jsx)(Lj,{})})})})}),(0,Va.jsx)(xe,{path:"/*",element:(0,Va.jsx)(QA,{children:(0,Va.jsx)(_g,{})})})]})]})},Zj=e=>{e&&e instanceof Function&&n.e(496).then(n.bind(n,1496)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))},$j=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let o=new Py;return t&&(function(e){return"boolean"===typeof e}(t)?o.push(Iy):o.push(xy(t.extraArgument))),o},{reducer:n,middleware:r,devTools:i=!0,preloadedState:o,enhancers:s}=e||{};let a,c;if("function"===typeof n)a=n;else{if(!Sy(n))throw new Error(l_(1));a=Cy(n)}c="function"===typeof r?r(t):t();let l=Ty;i&&(l=Ny(u({trace:!1},"object"===typeof i&&i)));const d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(_y(15))};const s={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,...n)}},a=t.map((e=>e(s)));return o=Ty(...a)(i.dispatch),u(u({},i),{},{dispatch:o})}}(...c),h=By(d);return Ay(a,o,l(..."function"===typeof s?s(h):h()))}({reducer:{auth:v_,product:Cb}});i.createRoot(document.getElementById("root")).render((0,Va.jsx)(t.StrictMode,{children:(0,Va.jsx)(ht,{children:(0,Va.jsx)(hv,{store:$j,children:(0,Va.jsx)(Qj,{})})})})),Zj()})()})();
//# sourceMappingURL=main.96ae1712.js.map